!function(){var e,t,i,r,n={15595:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,'.certificate__learn-more,.certificate__online-exam,.certificate__prep{font-family:Roboto,Arial,sans-serif;font-size:12px}.certificate__fine-print{font-family:RobotoItalic,Roboto,Arial,sans-serif;font-size:12px}.certificate__title{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:16px}.certificate{background-color:#fff;border:1px solid #dde4e9;box-shadow:0 2px 3px 0 #333e4b14;box-sizing:border-box;color:#111b27;flex:1 1 auto;padding-top:20px;position:relative;text-align:center;width:100%}.certificate .certificateWrapper{display:flex;flex-direction:column}.certificate .certificate__details-container{display:flex;flex-direction:column;justify-content:space-between}.certificate__header-image{display:block;margin:auto!important;max-height:170px;text-align:center}.certificate__details-container{flex:1 1 auto;margin:20px;overflow:hidden}.certificate__title{color:#222d3b;line-height:34px;margin-bottom:12px;text-align:center}.certificate__online-exam{letter-spacing:1px}.certificate__online-exam,.certificate__prep{color:#676e78;line-height:24px;text-align:center}.certificate__prep{letter-spacing:2px}.certificate__prep a,.certificate__prep a:visited{color:#29a1e6;text-decoration:none}.certificate__prep label:after{content:":"}.certificate__prep-container{height:130px;min-height:72px}.certificate__fine-print{color:#676e78;font-size:10px;letter-spacing:1px;line-height:24px;margin-bottom:12px;text-align:center}.certificate__exam-button{margin:16px 12px;text-align:center}.certificate__exam-button__container{display:flex;justify-content:center}.certificate__learn-more{line-height:14px;text-align:center}.certificate__learn-more button{background:none;border:none;color:#29a1e6;padding:0;text-align:center}',""]),e.exports=r},14142:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".headerTitle{font-family:RobotoLight,Arial,sans-serif;font-size:24px}.headerLeft{font-family:Roboto,Arial,sans-serif;font-size:14px}.certificate-header{background:#fff;padding:16px 16px 8px}.headerLeft{color:#222d3b}.headerLeft,.headerRight{display:inline-block;vertical-align:top}.headerTitle{color:#222d3b}.headerSubTitle{max-width:680px;padding:0 10px 10px 0}@media screen and (max-width:767px){.headerLeft,.headerRight{display:block}.certImage{transform:translateX(50%);width:50%}}@media screen and (min-width:768px) and (max-width:1199px){.headerLeft{width:60%}.headerRight{width:40%}.certImage{width:100%}}@media screen and (min-width:1200px){.headerLeft{width:75%}.headerRight{width:25%}.certImage{width:100%}}",""]),e.exports=r},39578:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".folderable-list__name-width{flex-basis:100%}.folderable-list__show-resize:hover .layout-draggable-handle{visibility:visible}.layout-draggable-handle{color:#889eb3;cursor:move;left:3px;position:absolute;top:-2px;visibility:hidden;width:100%}.full-width{width:100%}.full-height{height:100%}.flex{display:flex}.tooltip-content{align-items:center;display:flex;justify-content:center;margin-left:6px;z-index:1}.folderable-load-placeholder{overflow:auto}",""]),e.exports=r},53424:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".tab-navigator__tab._anomalies.selected{border-top-color:#2063d6}root-cause-explorer-component{height:100%;width:100%}",""]),e.exports=r},94621:function(e,t,i){e.exports=i.p+"administration-4763b5c4.png"},19886:function(e,t,i){e.exports=i.p+"advanced-metrics-w-k8-360de076.png"},35946:function(e,t,i){e.exports=i.p+"fundamentals-14a358c7.png"},39281:function(e,t,i){e.exports=i.p+"general-cert-logo-bad2e3c5.png"},21888:function(e,t,i){e.exports=i.p+"metrics-mastery-67b6ff0a.png"},57743:function(e,t,i){e.exports=i.p+"search-mastery-53cefc93.png"},79302:function(e,t,i){e.exports=i.p+"security-analytics-586bee17.png"},38209:function(e,t,i){e.exports=i.p+"grey_sumoji-0df5dbca.png"},98688:function(e,t,i){e.exports=i.p+"advance-career-bf70a906.svg"},82327:function(e,t,i){e.exports=i.p+"improve-skills-0f683279.svg"},2717:function(e,t,i){e.exports=i.p+"join-community-f9843fb6.svg"},55511:function(e,t,i){e.exports=i.p+"desert-f989bd36.svg"},47006:function(e,t,i){"use strict";var r=i(89131),n=i(64596),{browserHelperService:a}=i(60567);const{performanceLogService:s}=i(41197);function o(e,t,i,o,l,c,d,u,p,h,m,g){var y=this;c.load("destinations").then((function(){y.infoDialogOptions.title=h.__.destinations.USAGE_CODE_DIALOG_TITLE})),c.load("keyederrors");var v=null,f="Active",S="Inactive",b="none",E=function(e,t){_.each(e.s3Buckets,(function(e){var i,r,n=_.cloneDeep(e);n.type="ArchiveForwarding"===n.forwardType?"Amazon Archive S3":"Amazon S3",n.source="ArchiveForwarding"===n.forwardType?"Collector":"Index",n.name=n.destinationName||n.bucketName,n.sinkType="ArchiveForwarding"===n.forwardType?"s3Archive":"s3",n.sinkId=n.id,n.status="RoleBased"===(r=(i=n).authenticationMode)&&i.roleArn||"AccessKey"===r&&i.accessKeyId?i.enabled?f:S:b,("ArchiveForwarding"!==n.forwardType||SumoApp.getAngularService("currentUserHelper").hasFeatureFlag("UIS3ArchiveSource")&&-1!==n.dataForwardSinkId)&&(t[t.length]=n)}))},T=function(e){var t=[];return _.forEach(e,(function(e){e.sinks?function(e,t){_.each(e.sinks,(function(e,i){if("archive"!==e.sinkType){var r=_.cloneDeep(e);r.type=r.sinkType,r.name=r.sinkName,r.source="Collector","syslog"===r.sinkType&&(r.url=r.protocol+"://"+r.host,r.port&&(r.url=r.url+":"+r.port)),t[t.length]=r}}))}(e,t):e.s3Buckets&&E(e,t)})),t},x=function(){var e;s.mark(n.EVENT,n.MARKS.renderPath.dataFetchStart),d.all((e=[],m.hasPrivilege("UIPerIndexDataForwardingEnabled")&&m.hasPermission("S3_DATA_FORWARDING")&&(e[e.length]=i.list()),(m.hasPermission("READ_COLLECTORS")||m.hasPermission("MANAGE_COLLECTORS"))&&(e[e.length]=t.list()),e)).then((function(e){s.mark(n.EVENT,n.MARKS.renderPath.dataRetrieved);var t=T(e);y.gridOptions.safeData=t,y.gridOptions.gridData=[].concat(y.gridOptions.safeData),y.gridOptions.defaults={description:h.__.destinations.NO_DESCRIPTION},g((function(){s.mark(n.EVENT,n.MARKS.renderPath.rendered),function(){_.each(n.MEASUREMENTS.renderPath,(function(e){s.measure(n.EVENT,e)}));var e={memState:a.getMemoryUseInfo()};_.each(n.MEASUREMENTS.renderPath,(function(t){s.send(n.EVENT,t,e)}))}()}))}))},C=function(t){o.list(t.id).then((function(t){e.indexList=y.indexList=function(e){var t=e.dataForwardingRules,i=_.uniq(_.map(t,(function(e){return e.view})));return i.length?i:null}(t),e.indexListFetched=y.indexListFetched=!0}))},A=function(){var e=p((function(){0!==$("#usageCodeSelectArea").length&&(w(),p.cancel(e))}),50)},w=function(){var e=$("#usageCodeSelectArea"),t=y.selection=u.getSelection(),i=document.createRange();i.selectNodeContents(e[0]),t.removeAllRanges(),t.addRange(i),y.watchSelection||(y.watchSelection=p((function(){var e=u.getSelection();r.equals(e,y.selection)||(y.selection=e,w())}),100))},I=function(t){var i=t||{sinkType:"hitachi",protocol:"udp",objectId:"your_path/logname_{day}_{hour}_{minute}_{second}_{uuid}.log"};y.originalItem=i,e.destination=r.extend({},i),y.isValid=D(e.destination),y.killValidWatch=e.$watchCollection("destination",(function(t,i){y.isValid=D(e.destination)})),y.editDialogOptions.title=y.isAdd?h.__.destinations.ADD_DESTINATION:h.__.destinations.EDIT_DESTINATION,l.open(y.editDialogOptions).then((function(t){e.editDestDialog=t,e.editDestDialog.closePromise.then((function(t){v&&(v.spinner("stop"),v=null),y.killValidWatch&&(y.killValidWatch(),delete y.killValidWatch),delete e.destination}))}))},R=function(e){return _.find(y.gridOptions.safeData,(function(t){return e===t.sinkId}))},D=function(e){return 0===N(e).errors.length},O=function(e,t){var i,r,n,a;SumoUtil.isValidName(t.sinkName)||e.push(h.__.destinations.ERROR_SINK_NAME),i=t.sinkName,r=t.sinkId,n=!0,(a=_.find(y.gridOptions.safeData,(function(e){return e.sinkName===i&&e})))&&a.sinkId!==r&&(n=!1),n||e.push(h.__.destinations.ERROR_UNIQUE_SINK_NAME)},N=function(e){var t=[],i=r.extend({},e);switch(i.sinkType){case"hitachi":O(t,i),k(i,t);break;case"restAPI":O(t,i),L(i,t);break;case"syslog":O(t,i),P(i,t);break;case"s3":case"s3Archive":F(t);break;default:t.push(sprintf(h.__.destinations.UNSUPPORTED_DESTINATION_TYPE,i.sinkType))}return delete i.sinkType,{errors:t,payload:i}},M=function(e){delete e.type,delete e.name,delete e.source},k=function(e,t){SumoUtil.isValidUrl(e.url,!0)||t.push(h.__.destinations.ERROR_SINK_URL),SumoUtil.isStringEmpty(e.username)&&t.push(h.__.destinations.ERROR_SINK_USERNAME),SumoUtil.isStringEmpty(e.password)&&t.push(h.__.destinations.ERROR_SINK_PASSWORD),M(e),delete e.protocol,delete e.host,delete e.port,delete e.token},L=function(e,t){SumoUtil.isValidUrl(e.url,!0)||t.push(h.__.destinations.ERROR_SINK_URL),SumoUtil.isStringEmpty(e.username)&&t.push(h.__.destinations.ERROR_SINK_USERNAME),SumoUtil.isStringEmpty(e.password)&&t.push(h.__.destinations.ERROR_SINK_PASSWORD),M(e),delete e.protocol,delete e.host,delete e.port,delete e.token},P=function(e,t){SumoUtil.isStringEmpty(e.host)&&t.push(h.__.destinations.ERROR_SINK_HOST),SumoUtil.isValidPort(e.port)||t.push(h.__.destinations.ERROR_SINK_PORT),e.protocol||(e.protocol="tcp"),e.token||(e.token=""),M(e),delete e.url,delete e.username,delete e.password,delete e.objectId},F=function(e){var t=r.element($(".destination-edit-dialog .edit-section")).controller(),i=t&&t.isValidEntry(),n=i&&i.errors;n&&e.push.apply(e,n)},U=function(e){if(e.error){var t=_.map(e.errors,(function(e){return _.isBlank(e.message)?"":_.template(e.message)(e.values)})).join(" ");_.isBlank(t)&&(m.hasFeatureFlag("UIReplaceToasterPlugin")?t=e.message||e.errorMessage:SumoApp.userMessage.error(t,{isHTML:!0})),SumoApp.userMessage.error(t)}return e.error},V=function(e){v.spinner("stop"),v=null;var t=y.isAdd?function(e){var t;return(t=e.s3Buckets)?t.destinationName||t.bucketName:e.sinkName}(e):y.originalItem.name;m.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.info(y.isAdd?c.getSafeString("destinations.DESTINATION_ADDED_SUCCESSFULLY_STR",t):c.getSafeString("destinations.DESTINATION_UPDATED_SUCCESSFULLY_STR",t)):SumoApp.userMessage.info(y.isAdd?c.getSafeString("destinations.DESTINATION_ADDED_SUCCESSFULLY",t):c.getSafeString("destinations.DESTINATION_UPDATED_SUCCESSFULLY",t),{isHTML:!0}),y.editMode=!1,y.isAdd=!1,y.deferred.resolve(),x()},B=function(e){v.spinner("stop"),U(e);var t=e.message;return y.deferred.reject(t),!1},H=function(e,t){return delete r.extend({},e).$$hashKey,delete r.extend({},t).$$hashKey,r.equals(e,t)},W=function(){v||(v=r.element("#destination-button-submit")).spinner()};y.showDataForwarding=e.showDataForwarding=!m.getOrg().typeHelpers.isFree,y.partitionDataForwarding=e.partitionDataForwarding=m.hasFeatureFlag("UIPartitionDataForwarding"),y.uiS3ArchiveSource=m.hasFeatureFlag("UIS3ArchiveSource"),y.hasManageS3Permission=m.hasPermission("S3_DATA_FORWARDING"),y.hasReadCollectorPermission=m.hasPermission("READ_COLLECTORS"),y.hasManageCollectorPermission=m.hasPermission("MANAGE_COLLECTORS"),y.showCollectors=!0,y.selectPane=function(e){y.showCollectors=0===e},y.gridOptions={gridData:[],safeData:[],maxRows:10,minRows:10,overlayMessage:h.__.destinations.NO_SINKS,columns:[{title:"Destination Name",field:"name",headerCellClass:"grid-cell col1",rowCellClass:"grid-cell col1 dest-name"},{title:"Type",field:"type",headerCellClass:"grid-cell col2",rowCellClass:"grid-cell col2"},{title:"Data Source",field:"source",headerCellClass:"grid-cell col1",rowCellClass:"grid-cell col1"},{title:"Description",field:"description",headerCellClass:"grid-cell col3",rowCellClass:"grid-cell col3 dest-desc",rowCellTemplate:"js/features/manage/views/templates/grid-description-cell.html"},{title:"",headerCellClass:"grid-cell col2",rowCellClass:"grid-cell col2",rowCellTemplate:"js/features/manage/views/templates/grid-icon-cell.html",disableSort:!0}]},y.infoDialogOptions={template:"js/features/manage/views/usage-code.html",title:"Data Forwarding Definition",scope:e,name:"DestinationUsageCode",dialogSize:"large",showCancel:!1,data:{controller:y},className:"ngdialog-theme-sumo destination-edit-dialog destination-info-dialog prada"},y.editDialogOptions={template:"js/features/manage/views/edit-destination.html",title:"Add Destination",scope:e,name:"EditDestination",showOk:!1,showCancel:!1,preCloseCallback:function(e){if(W(),v.spinner("start"),!e||"$closeButton"===e)return v.spinner("stop"),v=null,y.editMode=!1,y.isAdd=!1,!0;if("$cancelButton"===e)return v.spinner("stop"),v=null,y.editMode=!1,y.isAdd=!1,!0;delete e.errors;var i=N(e);if(e.errors=i.errors,0!==i.errors.length)return e.errors=i.errors,v.spinner("stop"),!1;switch(e.sinkType){case"s3":case"s3Archive":return function(e){var t,i=r.element($(".destination-edit-dialog  .edit-section")).controller(),n="s3"===e.sinkType?{forwardType:"IndexForwarding"}:{forwardType:"ArchiveForwarding"},a=Object.assign((delete(t=i.getDataToSave()).type,delete t.source,delete t.name,delete t.sinkType,delete t.sinkId,delete t.invalidatedBySystem,delete t.customerId,delete t.objectId,delete t.protocol,delete t.status,delete t.username,delete t.password,t),n);return i.setData(a),i.saveData(V,B),y.deferred=d.defer(),y.deferred.promise}(e);default:return function(e,i){var r,n=e.sinkType;return n=n.charAt(0).toUpperCase()+n.slice(1),r=y.isAdd?t.create(n,i.payload):t.update(n,i.payload),y.deferred=d.defer(),r.then(V).catch(B),y.deferred.promise}(e,i)}},data:{controller:y},className:"ngdialog-theme-sumo destination-edit-dialog prada"},y.addDestination=function(){y.editMode||(y.editMode=!0,y.isAdd=!0,I())},y.editDestination=e.editDestination=function(e){if(!y.editMode){y.editMode=!0,y.isAdd=!1;var t=R(e);I(t)}},y.deleteDestination=e.deleteDestination=function(e){var r=R(e);SumoApp.userMessage.question(c.getSafeString("destinations.CONFIRM_DELETE_DESTINATION",r.name),{okCallback:function(){switch(r.sinkType){case"s3":case"s3Archive":!function(e){i.remove(e.bucketName).then((function(t){m.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.info(c.getSafeString("destinations.DESTINATION_DELETED_SUCCESSFULLY_STR",e.destinationName||e.bucketName)):SumoApp.userMessage.info(c.getSafeString("destinations.DESTINATION_DELETED_SUCCESSFULLY",e.destinationName||e.bucketName),{isHTML:!0}),x()})).catch((function(e){U(e)}))}(r);break;default:!function(e,i){t.remove(e).then((function(){m.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.info(c.getSafeString("destinations.DESTINATION_DELETED_SUCCESSFULLY_STR",i.sinkName)):SumoApp.userMessage.info(c.getSafeString("destinations.DESTINATION_DELETED_SUCCESSFULLY",i.sinkName),{isHTML:!0}),x()}))}(e,r)}},isHTML:!0})},y.showUsageCode=e.showUsageCode=function(t){var i=R(t);e.destination=r.extend({},i),l.open(function(t){var i=r.extend({noTitleInterpolation:!0},y.infoDialogOptions);switch(e.indexListFetched=y.indexListFetched=!1,t.sinkType){case"s3":case"s3Archive":i=r.extend(i,{title:t.destinationName||t.bucketName,template:"js/features/manage/views/s3-destination-info.html"}),C(t);break;default:i=r.extend(i,{title:h.__.destinations.USAGE_CODE_DIALOG_TITLE,template:"js/features/manage/views/usage-code.html"})}return y.infoDialogOptions=i}(i)).then((function(t){y.codeDestDialog=t,y.codeDestDialog.closePromise.then((function(t){y.watchSelection&&(p.cancel(y.watchSelection),delete y.watchSelection),delete e.destination}))})),A()},y.disableSave=e.disableSave=function(){var t=e.destination;if("s3"===t.sinkType||"s3Archive"===t.sinkType){var i=$(".destination-edit-dialog .edit-section").controller();return!i||!i.isValidEntry()}return!(!y.editMode||y.isAdd||!H(y.originalItem,t))||!y.isValid},y.isValid=!1,y.isRowEditable=function(e){return("s3"===e.sinkType||"s3Archive"===e.sinkType)&&y.hasManageS3Permission||"s3"!==e.sinkType&&"s3Archive"!==e.sinkType&&y.hasManageCollectorPermission},x()}o.$inject=["$scope","destinationsService","s3DestinationsService","s3RulesService","SumoDialog","i18n","$q","$window","$interval","$rootScope","currentUserHelper","$timeout"],e.exports=o},11700:function(e,t,i){"use strict";var r=i(89131);function n(e,t,i,n,a,s,o,l,c){var d=this;n.load("destinations").then((function(){d.usageDialogOptions.title=l.__.destinations.USAGE_CODE_DIALOG_TITLE,d.gridOptions.title=l.__.destinations.FORWARDING_TITLE})),n.load("keyederrors");var u=null,p=function(){t.list().then((function(e){_.each(e.sinks,(function(e,t){"syslog"===e.sinkType&&(e.url=e.protocol+"://"+e.host,e.port&&(e.url=e.url+":"+e.port))})),d.gridOptions.safeData=e.sinks,d.gridOptions.gridData=[].concat(d.gridOptions.safeData)}))},h=function(){var e=o((function(){0!==$("#usageCodeSelectArea").length&&(m(),o(e))}),50)},m=function(){var e=$("#usageCodeSelectArea"),t=d.selection=s.getSelection(),i=document.createRange();i.selectNodeContents(e[0]),t.removeAllRanges(),t.addRange(i),d.watchSelection||(d.watchSelection=o((function(){var e=s.getSelection();r.equals(e,d.selection)||(d.selection=e,m())}),100))},g=function(t){var n=t||{sinkType:"hitachi",protocol:"udp",objectId:"your_path/logname_{day}_{hour}_{minute}_{second}_{uuid}.log"};d.originalItem=n,e.destination=r.extend({},n),d.isValid=v(e.destination),d.killValidWatch=e.$watchCollection("destination",(function(t,i){d.isValid=v(e.destination)})),d.editDialogOptions.title=d.isAdd?l.__.destinations.ADD_DESTINATION:l.__.destinations.EDIT_DESTINATION,i.open(d.editDialogOptions).then((function(t){e.editDestDialog=t,e.editDestDialog.closePromise.then((function(t){u&&(u.spinner("stop"),u=null),d.killValidWatch&&(d.killValidWatch(),delete d.killValidWatch),delete e.destination}))})),p()},y=function(e){return _.find(d.gridOptions.safeData,(function(t){return e===t.sinkId}))},v=function(e){return 0===f(e).errors.length},f=function(e){var t,i,n,a,s=[],o=r.extend({},e);switch(SumoUtil.isValidName(o.sinkName)||s.push(l.__.destinations.ERROR_SINK_NAME),t=o.sinkName,i=o.sinkId,n=!0,(a=_.find(d.gridOptions.safeData,(function(e){return e.sinkName===t&&e})))&&a.sinkId!==i&&(n=!1),n||s.push(l.__.destinations.ERROR_UNIQUE_SINK_NAME),o.sinkType){case"hitachi":S(o,s);break;case"restAPI":b(o,s);break;case"syslog":E(o,s);break;default:s.push(sprintf(l.__.destinations.UNSUPPORTED_DESTINATION_TYPE,o.sinkType))}return delete o.sinkType,{errors:s,payload:o}},S=function(e,t){SumoUtil.isValidUrl(e.url,!0)||t.push(l.__.destinations.ERROR_SINK_URL),SumoUtil.isStringEmpty(e.username)&&t.push(l.__.destinations.ERROR_SINK_USERNAME),SumoUtil.isStringEmpty(e.password)&&t.push(l.__.destinations.ERROR_SINK_PASSWORD),delete e.protocol,delete e.host,delete e.port,delete e.token},b=function(e,t){SumoUtil.isValidUrl(e.url,!0)||t.push(l.__.destinations.ERROR_SINK_URL),SumoUtil.isStringEmpty(e.username)&&t.push(l.__.destinations.ERROR_SINK_USERNAME),SumoUtil.isStringEmpty(e.password)&&t.push(l.__.destinations.ERROR_SINK_PASSWORD),delete e.protocol,delete e.host,delete e.port,delete e.token},E=function(e,t){SumoUtil.isStringEmpty(e.host)&&t.push(l.__.destinations.ERROR_SINK_HOST),SumoUtil.isValidPort(e.port)||t.push(l.__.destinations.ERROR_SINK_PORT),e.protocol||(e.protocol="tcp"),e.token||(e.token=""),delete e.url,delete e.username,delete e.password,delete e.objectId},T=function(e){u.spinner("stop"),u=null;var t=d.isAdd?e.sinkName:d.originalItem.sinkName;c.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.info(d.isAdd?n.getSafeString("destinations.DESTINATION_ADDED_SUCCESSFULLY_STR",t):n.getSafeString("destinations.DESTINATION_UPDATED_SUCCESSFULLY_STR",t)):SumoApp.userMessage.info(d.isAdd?n.getSafeString("destinations.DESTINATION_ADDED_SUCCESSFULLY",t):n.getSafeString("destinations.DESTINATION_UPDATED_SUCCESSFULLY",t),{isHTML:!0}),d.editMode=!1,d.isAdd=!1,d.deferred.resolve(),p()},x=function(e){u.spinner("stop"),function(e){if(e.error){var t=_.map(e.errors,(function(e){return _.isBlank(e.message)?"":_.template(e.message)(e.values)})).join(" ");_.isBlank(t)&&(t=e.errorMessage),c.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.error(t):SumoApp.userMessage.error(t,{isHTML:!0})}e.error}(e);var t=e.errorMessage;d.deferred.reject(t)},C=function(e,t){return delete r.extend({},e).$$hashKey,delete r.extend({},t).$$hashKey,r.equals(e,t)},A=function(){u||(u=r.element("#destination-button-submit")).spinner()};d.partitionDataForwarding=e.partitionDataForwarding=c.hasPrivilege("UIPerIndexDataForwardingEnabled"),d.hasManageS3Permission=c.hasPermission("S3_DATA_FORWARDING"),d.hasReadCollectorPermission=c.hasPermission("READ_COLLECTORS"),d.hasManageCollectorPermission=c.hasPermission("MANAGE_COLLECTORS"),d.showCollectors=!0,d.selectPane=function(e){d.showCollectors=0===e},d.gridOptions={gridData:[],safeData:[],titleClass:"title-bar",title:"Data Forwarding Destinations",maxRows:10,minRows:5,overlayMessage:l.__.destinations.NO_SINKS,columns:[{title:"Name",field:"sinkName",headerCellClass:"grid-cell col1",rowCellClass:"grid-cell col1"},{title:"Type",field:"sinkType",headerCellClass:"grid-cell col2",rowCellClass:"grid-cell col2"},{title:"URL",field:"url",headerCellClass:"grid-cell col3",rowCellClass:"grid-cell col3"},{title:"",headerCellClass:"grid-cell col4",rowCellClass:"grid-cell col4",rowCellTemplate:"js/features/manage/views/templates/grid-icon-cell.html",disableSort:!0}],buttons:{left:[{icon:"plus",callback:"destinationCtrl.addDestination()",visibleWhen:"destinationCtrl.hasManageCollectorPermission || destinationCtrl.hasManageS3Permission",id:"add-forwarder",title:"__.destinations.ADD_DESTINATION"}]}},d.usageDialogOptions={template:"js/features/manage/views/usage-code.html",title:"Data Forwarding Definition",scope:e,name:"DestinationUsageCode",dialogSize:"large",showCancel:!1,data:{controller:d},className:"ngdialog-theme-sumo destination-edit-dialog prada"},d.editDialogOptions={template:"js/features/manage/views/edit-destination.html",title:"Add Destination",scope:e,name:"EditDestination",showOk:!1,showCancel:!1,preCloseCallback:function(e){if(A(),u.spinner("start"),!e||"$closeButton"===e)return u.spinner("stop"),u=null,d.editMode=!1,d.isAdd=!1,!0;if("$cancelButton"===e)return u.spinner("stop"),u=null,d.editMode=!1,d.isAdd=!1,!0;delete e.errors;var i,r=e.sinkType,n=f(e);return e.errors=n.errors,0===n.errors.length?(r=r.charAt(0).toUpperCase()+r.slice(1),i=d.isAdd?t.create(r,n.payload):t.update(r,n.payload),d.deferred=a.defer(),i.then(T).catch(x),d.deferred.promise):(e.errors=n.errors,u.spinner("stop"),!1)},data:{controller:d},className:"ngdialog-theme-sumo destination-edit-dialog prada"},d.addDestination=function(){d.editMode||(d.editMode=!0,d.isAdd=!0,g())},d.editDestination=e.editDestination=function(e){if(!d.editMode){d.editMode=!0,d.isAdd=!1;var t=y(e);g(t)}},d.deleteDestination=e.deleteDestination=function(e){var i=y(e);SumoApp.userMessage.question(n.getSafeString("destinations.CONFIRM_DELETE_DESTINATION",i.sinkName),{okCallback:function(){t.remove(e).then((function(){c.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.info(n.getSafeString("destinations.DESTINATION_DELETED_SUCCESSFULLY_STR",i.sinkName)):SumoApp.userMessage.info(n.getSafeString("destinations.DESTINATION_DELETED_SUCCESSFULLY",i.sinkName),{isHTML:!0}),p()}))},isHTML:!0})},d.showUsageCode=e.showUsageCode=function(t){var n=y(t);e.destination=r.extend({},n),i.open(d.usageDialogOptions).then((function(t){d.codeDestDialog=t,d.codeDestDialog.closePromise.then((function(t){d.watchSelection&&(o.cancel(d.watchSelection),delete d.watchSelection),delete e.destination}))})),h()},d.disableSave=e.disableSave=function(){return!(!d.editMode||d.isAdd||!C(d.originalItem,e.destination))||!d.isValid},d.isValid=!1,d.isRowEditable=function(e){return"s3"===e.sinkType&&d.hasManageS3Permission||"s3"!=e.sinkType&&d.hasManageCollectorPermission},p()}n.$inject=["$scope","destinationsService","SumoDialog","i18n","$q","$window","$interval","$rootScope","currentUserHelper"],e.exports=n},37014:function(e){function t(e,t){e.perPartitionDataForwardingOn=t.hasPrivilege("UIPerIndexDataForwardingEnabled")}t.$inject=["$scope","currentUserHelper"],e.exports=t},58948:function(e,t,i){"use strict";var r=i(89131),n=i(60567).SelectizeViewModule,a=i(60072);o.$inject=["$scope","$element","i18n","s3ForwardingService","s3DestinationsService","s3RegionService","cloudFormationTemplateService","$attrs"];var s=a.IamRolesNetworkService;function o(e,t,i,a,o,l,c,d){var u=this,p="others",h=!1,m=i.get("s3Forwarding"),g=SumoApp.getAngularService("currentUserHelper");u.ArnRoleMode="manual";var y=[{text:m.S3_AWS_MANUALLY_CREATE_ROLE,value:"manual"},{text:m.S3_AWS_CFT_IAM_TEMPLATE,value:"template"}],v={accessKeyId:null,bucketName:"",customerId:null,description:"",enabled:!0,region:p,secretAccessKey:null};v=Object.assign(v,{authenticationMode:"RoleBased",roleArn:null});var f="Active",S="Inactive",b="none",E=function(e){u.data=r.extend({},e),u.data.region||(u.data.region=v.region),u.origData=r.extend({},u.data),I()},T=function(){var t;e.isAdd?(e.disableBucketName=!1,E(v)):e.$parent.destination?(t=e.$parent.destination,e.disableBucketName=!!t.id,E(r.extend({},v,t))):(e.disableBucketName=!0,a.list(N).then((function(e){e.s3Buckets&&e.s3Buckets.length>0?E(e.s3Buckets[0]):E(v)})))},x=function(e){SumoApp.userMessage.info(m.S3_SAVED_SUCCESSFULLY),u.origData=r.extend({},u.data),R(),I()},C=function(e){!function(e){if(e.error){var t=_.map(e.errors,(function(e){return _.isBlank(e.message)?"":_.template(e.message)(e.values)})).join(" ");_.isBlank(t)&&(t=e.message||e.errorMessage),g.hasFeatureFlag("UIReplaceToasterPlugin")?SumoApp.userMessage.error(t):SumoApp.userMessage.error(t,{isHTML:!0})}e.error}(e)},A=function(){var e;(e=$("#partition-view-type-radio").is(":checked")?$("#partition-create-view-container .input-source-region-dest").first():$("#scheduled-view-type-radio").is(":checked")?$("#scheduled-view-create-view-container .input-source-region-dest").first():$(".input-source-region-dest").first()).length>0&&(u.regionSelView=new n({el:e,create:!0,maxItems:1,disableInput:!0,closeAfterSelect:!0,options:w()}),u.regionSelView.setValue(u.data.region),$(".input-source-region-dest .selectize-input").attr("data-sumo-test","s3RegionDropdown"),$(".input-source-region-dest .selectize-dropdown .option").each((function(){$(this).attr("data-sumo-test",this.dataset.value)})))},w=function(){return _.map(u.regions,(function(e){return e.value=e.id,e}))},I=function(){u.data.accessKeyId?u.data.enabled?u.status=f:u.status=S:u.status=b},R=function(){u.editMode=!u.editMode,u.editMode?u.killValidWatch=e.$watchCollection((function(){return u.data}),(function(e,t){u.isValid=D(u.data)})):u.killValidWatch&&(u.killValidWatch(),delete u.killValidWatch)},D=function(e){return 0===O(e).errors.length},O=function(e){var t=[],i=$.extend(!0,{},e);if(!h)return{errors:t};SumoApp.priv.hasFlagUIPartitionDataForwarding()&&!SumoUtil.isValidName(e.destinationName)&&t.push(m.ERROR_S3_DESTINATION_NAME),SumoUtil.isStringEmpty(e.bucketName)&&t.push(m.ERROR_S3_BUCKET_NAME),"AccessKey"===e.authenticationMode&&(SumoUtil.isStringEmpty(e.accessKeyId)&&t.push(m.ERROR_S3_KEY_ID),SumoUtil.isStringEmpty(e.secretAccessKey)&&t.push(m.ERROR_S3_SECRET)),"RoleBased"===e.authenticationMode&&SumoUtil.isStringEmpty(e.roleArn)&&t.push(m.ERROR_S3_RoleARN);var r=e.region;return r&&p!==r||(i.region=null),{errors:t,payload:i}};e.data=u.data=r.extend({},v),u.editMode=!1;var N=g.getOrg().id,M=function(){var i=t.find(".input-create-iam-role");i.length>0&&(u.createIamView=new n({el:i,create:!0,maxItems:1,disableInput:!0,closeAfterSelect:!0,options:y,onChange:function(t){u.ArnRoleMode=t,e.$apply()},items:["manual"]}))},k=function(){s.get().then((function(e){u.externalId=e.externalId,u.accountId=e.accountId})).catch(C)},L=function(e){c.getCfTemplate(e).then((function(e){u.template=e.template})).catch(C)};u.toggleEditMode=R,u.saveData=function(e,t){var i=SumoApp.priv.hasUIPerIndexDataForwardingEnabled(),n=O(r.extend(u.data,i?{}:{customerId:N})),s=i?o:a;if(0===n.errors.length)return s.create(n.payload).then(e||x).catch(t||C);u.errors=n.errors},u.deleteData=function(){(SumoApp.priv.hasFlagUIPartitionDataForwarding()?o:a).remove(u.data).then((function(e){u.data=r.extend({},v),I(),R(),SumoApp.userMessage.info(m.S3_REMOVED_SUCCESSFULLY)})).catch(C)},u.cancelEdit=function(){T(),R()},u.showHelp=function(e){e.preventDefault(),SumoApp.getAngularService("helpNavigationService").showHelp({id:"4042"})},u.validate=O,u.getDataToSave=function(){u.data.region=u.regionSelView.getValue();var e=O(u.data).payload;return delete e.customerId,e},u.isValidEntry=function(){return 0===O(r.extend(u.data,{customerId:N})).errors.length},u.enableRemove=function(){return!r.equals(u.origData,v)},u.setData=E,u.createIamRoleSelectView=M,u.getInfo=k,u.getTemplate=L,u.launchConsole=function(){c.launchCfConsole()},u.downloadTemplate=function(){c.download(u.data.bucketName,u.template)},l.list().then((function(e){u.regions=_.map(e.regions,(function(e,t){return{id:e||p,text:t}})),I(),T(),A(),M(),k(),u.data.bucketName.length>0&&L(u.data.bucketName),h=!0})),u.isRegionSupported=!0}e.exports=o},58541:function(e,t,i){"use strict";var{legacyHttpPost:r}=i(63205);e.exports=function(){return{getPreviewResults:function(e,t,i){return r("/sumo/v1/metrics/rule/preview",{selector:e,extracts:t,size:i})}}}},43803:function(e,t,i){"use strict";var r=i(89131),{legacyHttpGet:n,legacyHttpPost:a,legacyHttpDelete:s,legacyHttpPut:o}=i(63205);function l(e,t){var i="/sumo/v1/metrics/structured/rules/";return{createRule:function(e){var t=[i,"create"].join("");return a(t,e)},readRule:function(e){var t=[i,"read/",e].join("");return n(t)},updateRule:function(e,t){var r=[i,"update/",e].join("");return o(r,t)},deleteRule:function(e){var t=[i,"delete/",e].join("");return s(t)},bulkRead:function(){var a=[i,"bulk/read","?q=",t.Math.random()].join("");return n(a,{cache:!1}).then((function(t){return t.rules&&r.isArray(t.rules)?r.copy(t.rules):e.reject("Response was in an unexpected format")}))},bulkDelete:function(e){var t=[i,"bulk/delete"].join("");return a(t,{ids:e})}}}l.$inject=["$q","$window"],e.exports=l},66504:function(e,t,i){"use strict";var r=i(89131);function n(e,t,i,n,a,s,o,l,c){var d=this;d.currentRule={id:a,name:"",from:"",ruleMapping:[]};var u={NO_DATA:"~No matching time series",LOADING:"~Loading...",PREVIEW_GRID_TITLE:"~Preview of matching time series (%s of %s)",PREVIEW_COL_TITLE:"~Time Series",BAD_REQUEST:"~There is an error in your rule.  Most likely this is due to an issue in one of your assigned values.",RULE_DOES_NOT_EXIST:"~The metric rule you are trying to modify does not exist anymore. If you continue, you will create a new rule.",INTERNAL_SERVER_ERROR:"~Unknown server error.  Please check your rule syntax.",UNNAMED_VARIABLE:"~Variable assigned as %s is unnamed",NO_VALUE:"~Assigned variable %s has no value"},p=0,h=1,m=2;d.singleField=!1,d.usePreviewAPI=!0,d.previewSize=50,d.__metrics={},d.formErrors=[],d.ruleErrors=[],d.previewOverlayMessage=u.NO_DATA,d.extractionValues={},d.previewTimerPromise=null,d.preview=[],d.mySafeData=$.extend(!0,[],d.preview),d.myGridData=$.extend(!0,[],d.mySafeData);var g={title:"~Time Series",field:"name",headerCellClass:"grid-cell",rowCellClass:"grid-cell",rowCellTemplate:"js/features/metrics/views/ruleManager/templates/cell-template.html"},y={title:"Dynamic Var1",field:"field1",headerCellClass:"grid-cell",rowCellClass:"grid-cell",rowCellTemplate:"js/features/metrics/views/ruleManager/templates/cell-template-var.html"};function v(e){return(e.status||e.message)&&function(e){var t=e.message;switch(e.status){case 400:t=u.BAD_REQUEST;break;case 404:t=u.RULE_DOES_NOT_EXIST;break;case 500:t=u.INTERNAL_SERVER_ERROR}t&&""!==t.trim()&&(d.formErrors.push(t),r.element("#edit-rule-form .form__header")[0].scrollIntoView())}(e),e.errors&&function(e){for(var t=0;t<e.errors.length;t++){var i=e.errors[t].key,r=S(e.errors[t]);if(b(i)===h){for(var n=e.errors[t].values.id,a=0;a<d.currentRule.ruleMapping.length;a++)if(d.currentRule.ruleMapping[a].name===n){d.currentRule.ruleMapping[a].error.push(r);break}}else b(i)===m?d.formErrors.push(r):d.ruleErrors.push(r)}}(e),e.status||e.errors?d.formErrors.concat(d.ruleErrors):e}function f(){d.formErrors=[],d.ruleErrors=[];for(var e=0;e<d.currentRule.ruleMapping.length;e++)d.currentRule.ruleMapping[e].error=[]}function S(e){return t.get("keyederrors."+e.key,e.values)}function b(e){switch(e){case"metrics:rule_illegal_underscore":case"metrics:rule_non_parsed_field":case"metrics:rule_invalid_position":return h;case"metrics:rule_name_already_exists":return m;default:return p}}function E(){return i((function(e,t){if(d.currentRule.ruleMapping&&d.currentRule.ruleMapping.length>0){f();for(var i=0;i<d.currentRule.ruleMapping.length;i++){var r=d.currentRule.ruleMapping[i];r.name||r.expression?r.name?r.expression||(_.each(d.currentRule.ruleMapping,(function(e){e.name===r.name&&(e.preview=null)})),r.errorName=!1,r.errorValue=!0,r.error.push(sprintf(u.NO_VALUE,r.name)),t(u.NO_VALUE)):(r.errorName=!0,r.errorValue=!1,r.error.push(sprintf(u.UNNAMED_VARIABLE,r.expression)),t(u.UNNAMED_VARIABLE)):(r.errorName=!1,r.errorValue=!0,r.error.push(sprintf(u.NO_MAPPING)),t(u.NO_VALUE))}e({rule:{name:d.currentRule.name||"unspecified",from:d.currentRule.from,extract:d.currentRule.ruleMapping.map((function(e){var t=null!=e.expression.substring(2).match(/^[0-9]+$/)?"$_rawName."+e.expression.substring(1):e.expression;return{key:e.name,value:t}}))}})}else d.currentRule[0].errorName=!1,d.currentRule[0].errorValue=!0,d.currentRule[0].error.push(sprintf(u.NO_MAPPING)),t(u.NO_VALUE)}))}function T(){d.previewTimerPromise&&(o.cancel(d.previewTimerPromise),d.previewTimerPromise=null),C([]),d.previewTimerPromise=o((function(){!function(){if(f(),!d.currentRule.from)return void R({series:[]});d.usePreviewAPI?(d.currentRule.extract=[],_.each(d.currentRule.ruleMapping,(function(e){e.name&&e.expression&&d.currentRule.extract.push({key:e.name,value:e.expression.replace(/\$_([0-9]+)/g,"$_rawName._$1")})})),c.getPreviewResults(d.currentRule.from,d.currentRule.extract,d.previewSize).then(R).catch((function(e){v(e),R(e)}))):l.getResults({query:[{rowId:"A",query:d.currentRule.from}],startTime:moment().subtract(15,"minutes").valueOf(),endTime:Date.now()}).then(R);d.gridOptions.resetSelectedRow=!0}()}),500),d.selectedItem=null,x(),O()}function x(){_.each(d.currentRule.ruleMapping,(function(e){e.preview=d.selectedItem?u.LOADING:null}))}function C(e){d.preview=e,d.gridOptions.safeData=d.mySafeData=$.extend(!0,[],d.preview),d.gridOptions.gridData=d.myGridData=$.extend(!0,[],d.mySafeData)}function A(){if(d.selectedItem){var e=d.currentRule.from.split(" ")[0].replace(/([\*][\.])(?:([\*])([^\.]))?/g,(function(e,t,i,r,n){return 0===n?e:"([^\\.]*)?[\\.]+"+(i?"(.*)":"")+(r||"")}));e=(e=e.replace(/^[\*]([\.])?/g,(function(e,t,i){return t?"([^\\.]*)+[\\.]":"(.*)"}))).replace(/([\.])?(?:[\*])(?!\))/g,(function(e,t){return(t?"[\\.]":"")+"(.*)"}));for(var t=new RegExp(e).exec(d.selectedItem)||[],i={},r=1;r<t.length;r++)i["$_"+r]=t[r];d.extractionValues=i}else d.extractionValues={};d.usePreviewAPI&&_.each(d.currentRule.ruleMapping,(function(e){e.preview=w(e.name,e.expression)}))}function w(e,t){var i;if(d.usePreviewAPI){if(d.selectedItem&&d.selectedItem.name)for(var r=d.previewExtracts[d.selectedItem.name]||[],n=0;n<r.length;n++){var a=r[n];if(a.key===e){i=a.value;break}}}else{i=t||"";for(n=Object.keys(d.extractionValues).length;n>0;n--)i=i.replace("$_"+n,d.extractionValues["$_"+n])}return i}function I(){d.currentRule.extract&&(d.currentRule.ruleMapping=d.currentRule.extract.map((function(e){return{name:e.key,expression:e.value.replace(/\$_rawName._/g,"$_").replace(/\$_raw._/g,"$_")}})))}function R(e){d.previewTimerPromise=null,O();var t=!1;if(d.usePreviewAPI){d.gridOptions.columns=[],d.gridOptions.columns.push(Object.assign({},g));for(var i=0;i<d.currentRule.ruleMapping.length;i++){var r=Object.assign({},y);r.title=d.currentRule.ruleMapping[i].name;var n=i+1;r.field="field"+n,d.gridOptions.columns.push(r)}var a={};_.each(e.results,(function(e){a[e.name]=e.properties?e.properties:[]})),d.previewExtracts=a,C(_.map(e.results,(function(e){var t={name:e.name},i=0;return d.currentRule.ruleMapping.forEach((function(r){i++,e.properties.find((function(e){if(e.key===r.name)return t["field"+i]=e.value,!0}))})),t}))),t=e.moreResults,function(){if(d.currentRule.id){d.initialRuleCopy||(d.initialRuleCopy=$.extend(!0,{},d.currentRule)),N(JSON.stringify(d.initialRuleCopy)===JSON.stringify(d.currentRule))}}()}else C(_.map(e.series,(function(e){return{name:e.metric.name}})));D(t),d.selectedItem&&(function(){for(var e=0;e<d.preview.length;e++)if(d.selectedItem.name===d.preview[e].name)return!0;return!1}()||(d.selectedItem=null),A())}function D(e){var t=d.preview.length+"";e&&(t+="+"),d.gridOptions.title=sprintf(u.PREVIEW_GRID_TITLE,d.preview.length,t)}function O(){d.previewTimerPromise?d.previewOverlayMessage=u.LOADING:d.previewOverlayMessage=u.NO_DATA}function N(e){$("button[title='Save']").prop("disabled",e)}return d.gridOptions={gridData:d.myGridData,safeData:d.mySafeData,titleClass:"preview-grid-title grid-title",title:"~Matching Time Series Preview",maxRows:10,minRows:5,overlayMessage:"vm.previewOverlayMessage",hideToggles:!0,childField:"children",indent:20,resetSelectedRow:!1,columns:[g]},d.onClose=function(e){return function(e){if(e)switch(e){case"$ok":e=(SumoUtil.isValidName(d.currentRule.name)?(d.currentRule.id?E().then((function(e){return n.updateRule(d.currentRule.id,e)})):E().then((function(e){return n.createRule(e)}))).then((function(e){return s.publish("ruleModified"),e})):(r.element("#edit-rule-form .form__header")[0].scrollIntoView(),i.reject({message:"Need to input a valid name"}))).catch((function(e){return i.reject(v(e))}))}return e}(e)},d.queryUpdated=function(){T()},d.itemSelected=function(e){!function(e){d.selectedItem===e?(d.selectedItem=null,d.gridOptions.resetSelectedRow=!0,x()):(d.selectedItem=e,A(),d.gridOptions.resetSelectedRow=!1)}(e)},d.getPreviewValue=function(e){return w(e)},d.extractsUpdated=function(){d.usePreviewAPI?A():I()},function(){t.load("metrics").then((function(e){d.__metrics=e,u.NO_DATA=d.__metrics.ruleManagerPreviewNoData,u.LOADING=d.__metrics.ruleManagerPreviewLoading,u.PREVIEW_GRID_TITLE=d.__metrics.ruleManagerPreview,u.PREVIEW_COL_TITLE=d.__metrics.ruleManagerPreviewColumnTitle,u.BAD_REQUEST=d.__metrics.ruleManagerBadRequest,u.RULE_DOES_NOT_EXIST=d.__metrics.ruleManagerErrorModifyInexistentRule,u.INTERNAL_SERVER_ERROR=d.__metrics.ruleManagerInternalServerError,u.UNNAMED_VARIABLE=d.__metrics.ruleManagerUnnamedVariableError,u.NO_VALUE=d.__metrics.ruleManagerNoValueError,u.NO_MAPPING=d.__metrics.ruleManagerNoMappingError,d.gridOptions.columns[0].title=u.PREVIEW_COL_TITLE,D(),O()})),d.currentRule.id&&n.readRule(d.currentRule.id).then((function(e){if(e.error)return i.reject(e.error);N(!0);var t=d.currentRule.id;d.currentRule=e.rule,d.currentRule.id=t,I(),T()})).catch((function(e){v(e)}));o((function(){$("#name-field").find("input").trigger("focus"),$("#edit-rule-preview").on("click",(function(e){$(e.target).closest(".grid-row").length||(d.selectedItem=null,x(),d.gridOptions.resetSelectedRow=!0)}))}),500),d.ruleListener=s.subscribe("metricsRuleChanged",(function(){T()}))}(),e.$on("$destroy",(function(){d.ruleListener&&d.ruleListener()})),d}n.$inject=["$scope","i18n","$q","rulesNetworkService","ruleId","eventService","$timeout","metricsNetworkService","previewNetworkService"],e.exports=n},52405:function(e,t,i){var r=i(89131);function n(e,t,i,n,a,s,o,l,c){var d=this;function u(e){var t=(e=e||"").trim().split(" "),n=r.copy(d.originalData);t.forEach((function(e){n=i("filter")(n,e)})),d.gridOptions.safeData=n,d.gridOptions.gridData=r.copy(n)}function p(){var e=g().currentPage;return n.bulkRead().then((function(t){d.originalData=r.copy(t),d.originalData=_.each(d.originalData,(function(e){return e.name=e.rule.name,e.from=e.rule.from,e.extract=e.rule.extract.map((function(e){return e.key})).join(", "),e})),u(),s((function(){e&&g().selectPage(e)}),0)})).catch((function(e){f(e)}))}function h(e){a.open(y(e)).then((function(e){d.editRuleDialog=e}))}function m(e,i){var r="from: "+i.from,s=i.extract.map((function(e){return e.key+" = "+e.value.replace(/\$_rawName._/g,"$_").replace(/\$_raw._/g,"$_")})).join("<br/>"),o=t.getSafeString("metrics.ruleManagerConfirmDeleteMessage",{variables:s,expression:r,name:i.name});a.confirm({title:d.__metrics.ruleManagerConfirmDeleteTitle,message:o,dialogSize:"medium",className:"prada ngdialog-theme-sumo delete-dialog",okButtonContent:d.__metrics.ruleManagerConfirmDeleteOkButtonLabel}).then((function(t){!function(e,t){"$ok"!==t&&!0!==t||(!function(e){n.deleteRule(e).then((function(e){return e.error?l.reject("Something went wrong"):(p(),e)})).catch((function(e){f(e)}))}(e),v())}(e,t)}))}function g(){if(!d.paginationScope){var e=r.element("#rule-manager *[st-pagination]")[0];e&&(d.paginationScope=e.scope().$$childHead)}return d.paginationScope||{}}function y(t){return{title:t?d.__metrics.ruleManagerEditExistingRule:d.__metrics.ruleManagerCreateNewRule,template:"js/features/metrics/views/ruleManager/edit-rule.html",controller:"EditRuleDialogCtrl",controllerAs:"vm",resolve:{ruleId:function(){return t}},scope:e,dialogSize:"full",closeByDocument:!0,className:"prada ngdialog ngdialog-theme-sumo rule-editor-dialog",showOk:!0,showCancel:!0,okButtonContent:d.__metrics.ruleManagerSaveButtonLabel,preCloseCallback:"vm.onClose"}}function v(){if(!SumoApp.getAngularService("currentUserHelper").hasFeatureFlag("UIMetricsRulesNoReindexing"))return o.show(o.preset("simple").title(d.__metrics.ruleManagerReindexingDialogTitle).contentTemplate(d.__metrics.ruleManagerReindexingDialogContent).buttons(o.buttons().ok().text("Close")).css("-medium"))}function f(e){var t=r.isString(e)?e:e.message||"";a.error({message:t})}d.loadingData=!0,d.originalData=[],d.safeData=[],d.displayData=[],d.__metrics={},d.gridOptions={},d.reindexingToaster=null,c.hasPermission("MANAGE_METRICS_RULES")&&(d.addRuleButtonOption={maxWidth:200,buttons:{right:[{icon:"plus",callback:"buttonBar.addRule()"}]},addRule:function(){a.open(y("")).then((function(e){d.editRuleDialog=e}))}}),d.paginationScope=null,t.load("metrics").then((function(e){d.__metrics=e,d.gridOptions={gridData:d.displayData,safeData:d.safeData,maxRows:15,minRows:10,overlayMessage:d.__metrics.ruleManagerNoRulesToDisplay,childField:"children",indent:20,usePagination:!0,highlightOnHover:!0,columns:[{title:d.__metrics.ruleManagerColumnName,field:"name",headerCellClass:"grid-cell rules-name-cell unselectable",rowCellClass:"grid-cell rules-name-cell"},{title:d.__metrics.ruleManagerColumnExpression,field:"from",headerCellClass:"grid-cell rules-scope-cell unselectable",rowCellClass:"grid-cell rules-scope-cell"},{title:d.__metrics.ruleManagerColumnVariables,field:"extract",headerCellClass:"grid-cell rules-variable-cell unselectable",rowCellClass:"grid-cell rules-variable-cell"},{disableSort:!0,headerCellClass:"grid-cell rules-action-cell unselectable",rowCellClass:"grid-cell rules-action-cell unselectable",rowCellTemplate:"js/features/metrics/views/ruleManager/rule-actions-cell.html",actions:{edit:h,delete:m},editIconLabel:d.__metrics.ruleManagerEditIconLabel,deleteIconLabel:d.__metrics.ruleManagerDeleteIconLabel}]},d.addRuleButtonOption&&(d.addRuleButtonOption.buttons.right[0].title=e.ruleManagerCreateNewRule)})),e.$on("ruleModified",(function(e){e&&r.isFunction(e.stopPropagation)&&e.stopPropagation();p(),v()})),d.updateDisplayData=u,d.editRule=h,p()}n.$inject=["$scope","i18n","$filter","rulesNetworkService","SumoDialog","$timeout","dialogService","$q","currentUserHelper"],e.exports=n},89919:function(e){function t(e){var t=function(i,r,n,a){var s,o=r,l=r.split("||");return l.length>1&&(s=l[0],o=l[1]),s&&(a||(a=0),_.each(i,(function(e){e.depth=a;var i=e[s];i&&(e[s]=t(i,r,n,a+1))}))),e("orderBy")(i,o,n)};return t}t.$inject=["$filter"],e.exports=t},35848:function(e,t,i){var r=i(89131);function n(e,t,i,n,a,s,o,l){var c=this;c.baselineQuery=r.copy(i),c.baselineTime=n,c.targetQuery=r.copy(a),c.targetTime=s,c.BASELINE_TIMERANGE_ID="baseline-timerange",c.TARGET_TIMERANGE_ID="target-timerange",c.formError="",c.baselineQueryError="",c.baselineTimerangeError="",c.targetQueryError="",c.targetTimerangeError="";var d={},u={},p={RUN_QUERY:{message:"running logcompare",attrs:{action:"run",event:"dialog-run-button",source:"custom-delta-dialog",id:o}},CANCEL_DIALOG:{message:"cancelling logcompare dialog",attrs:{action:"cancel-dialog",event:"dialog-cancel-button",source:"cusotm-delta-dialog",id:o}}};function h(e){return["timeshift",e].join(" ")}function m(){return!(c.formError||c.baselineQueryError||c.baselineTimerangeError||c.targetQueryError||c.targetTimerangeError)}function g(e){l.user("LogCompare:: "+e.message+" :: "+l.formatMessage(r.extend(r.copy(e.attrs),{BQM:c.baselineQuery===i?0:1,BTM:_.isEmpty(d)?0:1,TQM:c.targetQuery===a?0:1,TTM:_.isEmpty(u)?0:1,BQETQ:c.baselineQuery!==c.targetQuery?0:1})))}c.onClose=function(t){if("$ok"===t){var i,r,n,a=SumoUtil.isStringEmpty(c.targetQuery)?"*":c.targetQuery.trim(),s=SumoUtil.isStringEmpty(c.baselineQuery)?a:c.baselineQuery.trim(),o=function(){var e;e=_.isEmpty(d)?c.baselineTime.indexOf(" to ")>-1?function(){var e=/(.+)\s+to\s+(.+)/i.exec(c.baselineTime),t="";e&&(t=["start_time",SumoApp.dateUtil.format()(moment(e[1]).valueOf()),"end_time",SumoApp.dateUtil.format()(moment(e[2]).valueOf())].join(" "));return t}():h(c.baselineTime):"absolute"===d.type?["start_time",SumoApp.dateUtil.format()(d.startTime),"end_time",SumoApp.dateUtil.format()(d.endTime)].join(" "):h(d.value);return e}(),l=function(){var e;e=_.isEmpty(u)?c.targetTime:u.value;return e}();r=[a,"| logcompare",o],a!==s&&r.push(["baseline (",s,")"].join("")),n=r.join(" ").trim(),m()?(i={query:n,targetTime:l},e.$emit("customDeltaResult",i)):t=!1}if(t)switch(t){case"$ok":g(p.RUN_QUERY);break;default:g(p.CANCEL_DIALOG)}return t},c.validateBaselineQuery=function(){c.baselineQueryError="",c.baselineQuery&&c.baselineQuery.indexOf("|")>-1&&(c.baselineQueryError=c.__search.deltaCustomDialogQueryErrorPipes)},c.validateTargetQuery=function(){c.targetQueryError="",c.targetQuery&&c.targetQuery.indexOf("|")>-1&&(c.targetQueryError=c.__search.deltaCustomDialogQueryErrorPipes)},c.updateBaselineTimeRange=function(e){e.errors?c.baselineTimerangeError=e.errorMessages.join(" "):(c.baselineTimerangeError=null,d=r.copy(e))},c.updateTargetTimeRange=function(e){e.errors?c.targetTimeRangeError=e.errorMessages.join(" "):(c.targetTimeRangeError=null,u=r.copy(e))},c.isFormValid=m,t.load("summarizeDelta").then((function(e){c.__search=e})),e.$on("destroy",(function(){$.logWarnLocal("custom-delta-dialog-destroyed")}))}n.$inject=["$scope","i18n","baselineQuery","baselineTime","targetQuery","targetTime","sessionId","logService"],e.exports=n},51871:function(e,t,i){function r(e,t,r,n){"use strict";return{restrict:"E",scope:{},templateUrl:"js/features/summarizeDelta/views/summarize-delta-button.html",link:function(a,s){Promise.resolve().then((function(){var o=[i(60567),i(86795),i(34074),i(50963)];(function(i,o,l,c){const{SearchQueryUtil:d}=o;var u,p=l.SearchQueryDataModule,h=i.searchParametersService;a.DEFAULT_ACTION=0,a.options=[];var m,g=c.idGeneratorService.generateId(),y=!1,v={DEFAULT_ACTION:{message:"running logcompare",attrs:{action:"run",event:"combo-button-default",source:"combo-button",timeshift:"-24h",id:g}},DROP_MENU_ONE_DAY:{message:"running logcompare",attrs:{action:"run",event:"combo-button-menu",source:"combo-button",timeshift:"-24h",id:g}},DROP_MENU_ONE_WEEK:{message:"running logcompare",attrs:{action:"run",event:"combo-button-menu",source:"combo-button",timeshift:"-7d",id:g}},DROP_MENU_CUSTOM_DELTA:{message:"opening logcompare dialog",attrs:{action:"open-dialog",event:"combo-button-menu",source:"combo-button",id:g}}};e.load("summarizeDelta").then((function(e){u=e,a.DEFAULT_OPTION_LABEL=u.deltaDefaultOptionLabel,a.options=[{label:u.deltaOneDayLabel,action:function(){S(v.DROP_MENU_ONE_DAY),b("| logcompare timeshift -24h")}},{label:u.deltaOneWeekLabel,action:function(){S(v.DROP_MENU_ONE_WEEK),b("| logcompare timeshift -7d")}},{label:u.deltaCustomLabel,action:function(){S(v.DROP_MENU_CUSTOM_DELTA),T().then((function(e){var i=e.getParameterModel(),r=i?i.getParameters():void 0,n=!!r&&r.length>0,s=e.getParseQueryResult();f=n&&s?s.runnableQuery:e.getSearchExpression(),a.query=I(),a.customDialog=t.open(function(e){return{title:u.deltaCustomDialogTitle,template:"js/features/summarizeDelta/views/custom-delta-dialog.html",controller:"CustomDeltaDialogCtrl",controllerAs:"vm",resolve:{baselineQuery:x,baselineTime:C,targetQuery:A,targetTime:_.partial(w,e),sessionId:function(){return g}},scope:a,className:"prada ngdialog ngdialog-theme-sumo logCompare-dialog",closeByDocument:!1,name:"CustomDeltaDialog",showOk:!1,showCancel:!1,preCloseCallback:"vm.onClose"}}(e))}))}}]}));var f="";function S(e){y||r.user("LogCompare:: "+e.message+" :: "+r.formatMessage(e.attrs))}function b(e){a.launch||(a.launch=_.debounce(E,250,!0)),a.launch(e)}function E(e){T().then((function(t){f=t.getSearchExpression();var i=I()||"*",r=new p;i=SumoUtil.appendToSearchExpression(i,e).trim(),r.setQueryString(i),r.setTimeRange(t.getTimerangeText()),r.setSearchByReceiptTime(t.getSearchByReceiptTime()),r.setExecuteSearch(!0),r.setAutoParsingInfo(t.getAutoParsingInfo());var n=t.getParameterModel();n&&(r.setParameters(n.getParameters()),r.setParamViewState(h.getParamViewState(!0,!0,!1)));SumoApp.applicationView.onDrilldownSearch(null,r)}))}function T(){return m&&m.reject("canceling"),m=n.defer(),s.trigger("getSearchQueryModel"),m.promise}function x(){var e=/\s*baseline\s*\((.*)\)/i.exec(f);return e=e?e[1]:I()}function C(){var e,t=/\s*timeshift\s*(-\s*[^\s]*)/i.exec(f);if(t)e=t[1];else{var i=/\s*start_time\s*([^\s]*)/i.exec(f),r=/\s*end_time\s*([^\s]*)/i.exec(f);i&&r&&(i=moment(i[1]).valueOf(),r=moment(r[1]).valueOf(),e=SumoUtil.formatTimeRangeText(i,r,!0))}return e=e||"-24h"}function A(){return I()}function w(e){return e.getTimerangeText()}function I(){var e=(new d).getIndexOfFirstPipeOperatorIgnoringKeywords(f,'"');return e>-1?f.substring(0,e):f}function R(){s.off("view-will-destroy"),s.off("searchQueryModelProvided")}a.$on("customDeltaResult",(function(e,t){e.stopPropagation();var i=t;r=i.query,n=i.targetTime,r&&T().then((function(e){var t=new p;t.setQueryString(r),t.setTimeRange(n),t.setSearchByReceiptTime(e.getSearchByReceiptTime()),t.setExecuteSearch(!0);var i=null;SumoApp.applicationView.onDrilldownSearch(i,t)}));var r,n})),a.$on("destroy",R),s.on("view-will-destroy",(function(){R(),a.$destroy()})),s.on("searchQueryModelProvided",(function(e,t){m&&m.resolve(t)})),a.executeDefaultAction=function(){a.options.length>a.DEFAULT_ACTION&&a.options[a.DEFAULT_ACTION].action&&(S(v.DEFAULT_ACTION),y=!0,a.options[a.DEFAULT_ACTION].action())},a.getDefaultOptionLabel=function(){return a.DEFAULT_OPTION_LABEL||(a.options.length>a.DEFAULT_ACTION?a.options[a.DEFAULT_ACTION].label||"":void 0)}}).apply(null,o)})).catch(i.oe)}}}r.$inject=["i18n","SumoDialog","logService","$q"],e.exports=r},15691:function(e,t,i){"use strict";var r=Object.defineProperty,n=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,i)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,d=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&c(e,i,t[i]);if(s)for(var i of s(t))l.call(t,i)&&c(e,i,t[i]);return e},u=(e,t)=>n(e,a(t));Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const p=i(34517),h=i(21902),m=i(52800),g=i(89131),y=i(64264),v=i(50963),f=i(5350),_=e=>e&&"object"==typeof e&&"default"in e?e:{default:e};const S=_(h),b=function(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const i in e)if("default"!==i){const r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>e[i]})}return t.default=e,Object.freeze(t)}(g),E=_(f);t.store=void 0,t.store$=void 0;const T="module_dispatch";const x=new class{constructor(){this.handleMessage=e=>{if(e.type===T){const{action:t,to:i}=e.payload;this.dispatch(t,i)}else{const t=this.customDispatchHandlers?this.customDispatchHandlers[e.type]:void 0;t?t(e):this.store&&this.store.dispatch(e)}},this.dispatch=(e,t="self")=>{"self"===t?this.inbound$.next(e):this.outbound$.next({action:e,to:t})},this.inbound$=new p.Subject,this.outbound$=new p.Subject,this.inbound$.subscribe(this.handleMessage)}setHandlers(e,t){this.customDispatchHandlers=e,this.store=t}addNewModuleSubscription(e){e.subscribe(this.inbound$)}subscribe(e){this.outbound$.subscribe(e)}},C=x.dispatch;class A{constructor(e,i){this.handleMessage=e=>{if(this.customDispatchHandlers){const i=this.customDispatchHandlers[e.type];i?i(e):t.store.dispatch(e)}else t.store.dispatch(e)},this.dispatch=(e,t="self")=>{"self"===t?this.inbound$.next(e):"core"===t?this.outbound$.next(e):this.outbound$.next({type:T,payload:{action:e,to:t}})},this.type=e,this.customDispatchHandlers=i,this.inbound$=new p.Subject,this.outbound$=new p.Subject,this.setupTriggers(this.inbound$)}setupTriggers(e){e.subscribe(this.handleMessage)}}const w=new class{constructor(){this.registerModule=e=>{const{customDispatchHandlers:t,name:i}=e,r=new A(i,t);return this.moduleOptions.push(u(d({},e),{dispatchHandler:r})),r.dispatch},this.getDispatch=e=>this.moduleOptions.filter((({name:t})=>e===t))[0].dispatchHandler.dispatch,this.moduleOptions=[]}},{moduleOptions:I,registerModule:R,getDispatch:D}=w;t.services={};class O extends h.Component{constructor(e){var i;super(e),i=e.store,t.store=i,t.store$=new p.BehaviorSubject(t.store.getState()),t.store.subscribe((()=>t.store$.next(t.store.getState()))),function(e){t.services=e}(e.services);const r=D(e.type),{id:n,view:a}=e;r({type:"tab_content_rendered",payload:{view:a,id:n}},"core")}render(){return m.Provider?S.default.createElement(m.Provider,{store:this.props.store},this.props.children):S.default.createElement(S.default.Fragment,null," ",this.props.children," ")}}class N extends h.Component{render(){return S.default.createElement("div",{id:"angular-bootstrap-element",ref:e=>this.node=e},this.props.children)}componentDidMount(){this.props.angular.bootstrap(this.node,[this.props.moduleName],{strictDi:!0})}}function M(e){return e.replace(/([a-z])([A-Z0-9])/g,((e,t,i)=>[t,i].join("-").toLowerCase()))}class k extends h.Component{constructor(e){super(e),this.renderRef=S.default.createRef()}render(){return S.default.createElement("div",{ref:this.renderRef})}componentDidMount(){this.renderAngularElement()||setTimeout((()=>{this.renderAngularElement()}))}renderAngularElement(){const e=this.renderRef.current,t=e?e.ownerDocument:void 0,i=t?t.getElementById("angular-bootstrap-element"):void 0;if(e&&t&&i){const{$rootScope:r,$compile:n,$timeout:a}=this.getServices(i);if(!r)return!1;const s=this.getScope(r),o=this.createElement(e,t);return this.compile(n,o,s,a),!0}}getServices(e){const t=this.props.angular.element(e).injector();return t?{$timeout:t.get("$timeout"),$rootScope:t.get("$rootScope"),$compile:t.get("$compile")}:{}}getScope(e){const t=e.$new();return Object.keys(this.props.bindings).forEach((e=>{const i=this.props.bindings[e];t[e]=i})),t}createElement(e,t){const i=t.createElement(M(this.props.componentName));return Object.keys(this.props.bindings||[]).forEach((e=>{i.setAttribute(M(e),e)})),e.appendChild(i),i}compile(e,t,i,r){const n=e(t)(i);return r((()=>{i.$apply()})),n}}const L={store:null,services:{}};function P(e){return d(d({},e),L)}class F extends h.Component{constructor(e){super(e),this.onIframeLoad=()=>{const{contentDocument:e}=this.frameRef.current||{};e&&this.setState({iframeHead:e.head,iframeRoot:e.body})},this.frameRef=h.createRef()}componentDidMount(){const e=this.frameRef.current;e&&(e.addEventListener("load",this.onIframeLoad),this.props.setRoot&&this.props.setRoot(e))}render(){const{children:e,head:t}=this.props,{iframeHead:i,iframeRoot:r}=this.state;return S.default.createElement("iframe",{ref:this.frameRef,className:"iframe-frame",src:this.props.htmlLink},i&&E.default.createPortal(t,i),r&&E.default.createPortal(e,r))}}function U(e){return t=>{const i=t,{htmlLink:r}=i,n=((e,t)=>{var i={};for(var r in e)o.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&s)for(var r of s(e))t.indexOf(r)<0&&l.call(e,r)&&(i[r]=e[r]);return i})(i,["htmlLink"]);return S.default.createElement(F,{htmlLink:r},S.default.createElement(e,d({},n)))}}function V(e,t){class i{constructor(i){this.$state=i,Object.keys(e).forEach((e=>{this[e]=this.$state.params[e]})),this.htmlLink=`/${t}.html`}}return i.$inject=["$state"],i}function B(e,t){const i=Object.keys(t).reduce(((e,t)=>`${e} html-link="vm.htmlLink" ${M(t)}="vm.${t}"`),"");return`<${M(e)} ${i} />`}var $,H=(($=H||{}).VIEW_MESSAGE="view_message",$),W=(e=>(e.CORE="core",e.BROADCAST="broadcast_message",e))(W||{});const q={messageTypes:H,moduleNames:W};function j(e,t){t.forEach((t=>{e.component(t.name,t.value)}))}t.AngularBootstrapperComponent=N,t.AngularRenderer=k,t.ModuleContainer=O,t.constants=q,t.dispatch=C,t.getBasicView=({stateName:e,type:t,icon:i},r)=>({name:e,id:t,title:"",type:t,icon:i,params:r?d({},r.params):{},isDrillDown:r&&r.isDrillDown}),t.initializeModules=function(e,t,i,r){let n;const a=I.map((({component:e,params:t,componentName:i,frameIsolation:r})=>{const n=r?U(e):e,a=Object.keys(P(t)),s=r?[...a,"htmlLink"]:a;return{name:i,value:v.legacyReactToAngular(n,s)}})),s=I.map((e=>{const{params:t}=e,i=P(t);return u(d({},e),{params:i,controller:V(i,e.name),template:B(e.componentName,i)})})),o=I.reduce(((e,t)=>{const{angularModule:i}=t;return i?[...e,i]:e}),[]);e.service("moduleManager",function(e,t,i){const{store:r,epic$:n,reducerRegistry:a}=t;class s{constructor(t,i,...n){this.registerModule=e=>{this.modules=[...this.modules,e];const{store:t,epics:i,dispatchHandler:r,routeName:n,url:a,template:s,controller:o,params:l}=e,c=r?r.outbound$:void 0,d={name:n,url:a,template:s,controller:o,controllerAs:"vm",params:l};this.register({stateDefinition:d,storeDefs:t,epicDefs:i,moduleOutbound$:c})},this.addDefaultParamsToTransition=t=>{let i=t.params(),n=!0;const a=e.reduce(((e,t,i)=>u(d({},e),{[t]:this.injectedServices[i]})),{});return null===i.store&&(i=u(d({},i),{store:r,services:a,angular:b}),n=t.router.stateService.target(t.to(),i)),n},this.getModule=e=>this.modules.filter((t=>t.name===e))[0],this.sendTrigger=({action:e,to:t})=>{if(t===W.BROADCAST)this.sendBroadcast(e);else{const i=t?this.getModule(t):void 0,{dispatchHandler:{inbound$:{next:r=(()=>{})}={}}={}}=i||{};r(e)}},this.execute=(e,t)=>{},this.injectedServices=n,this.modules=[],this.$transitions=i,x.setHandlers(t.customHandlers,r),x.subscribe(this.sendTrigger)}initialize(e,t){this.execute,this.getModule,this.$stateProvider=e,this.registerModules(t)}registerModules(e){e.forEach(this.registerModule)}register({stateDefinition:e,storeDefs:t,epicDefs:i,moduleOutbound$:r}){this.registerState(e),this.registerTrigger(r),this.registerReducers(t),this.registerEpics(i)}registerReducers(e){e&&e.forEach((e=>{const{name:t,initialState:i,reducers:r}=e;a.register({name:t,initialState:i,actionHandlers:r})}))}registerEpics(e){e&&n.next(y.combineEpics(...e))}registerState(e){this.$stateProvider&&(this.$stateProvider.state(e),this.$transitions.onBefore({to:"**"},this.addDefaultParamsToTransition))}registerTrigger(e){e&&x.addNewModuleSubscription(e)}deregisterModule(e){this.modules=this.modules.filter((t=>t.name!==e))}sendBroadcast(e){this.modules.forEach((t=>{const{dispatchHandler:i}=t;i&&i.inbound$.next(e)}))}}return s.$inject=[i,"$transitions",...e],s}(i,r,t)),e.config(["$stateProvider",e=>{n=e}]),e.run(["moduleManager",e=>{e.initialize(n,s)}]),j(e,a),o.forEach((({components:t})=>{j(e,t)}))},t.registerModule=R,function(){try{var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e)}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}()},17397:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var r=i(21902),n=i.n(r),a=i(60567),s=i(66359),o=i(34074),l=i(50563),c=i(51901),d=i(5013),u=i(31650);const p=new a.BackboneViewUtilService;const h=({view:e,searchId:t,searchData:i,simpleSearchQuery:r,drilldownData:a,transactionDrilldownData:h,reattachQueryData:m,onTitleChange:g,broadcastMsg$:y})=>{const v=n().useRef(),f=n().useRef(null),_=n().useRef(),S=n().useCallback((()=>{if(!f.current)return;const n=l.applicationContext.appContext,s=()=>(0,u.kn)(e);!function(e){void 0===e.searchCompletionsModel&&(e.searchCompletionsModel=new o.SearchCompletionsModel({context:e}))}(n);const c=(0,u.ZG)({view:e,context:n});(0,u.AW)({model:e.model,onModelValueChange:s,view:e});const d=(0,u.Yd)({context:n,element:f.current,view:e,onTitleChange:g});c&&(0,u.HG)({view:e,searchView:d,searchId:t,searchData:i,simpleSearchQuery:r,drilldownData:a,transactionDrilldownData:h,reattachQueryData:m,onTitleChange:g}),_.current=(0,u.J1)(y,d,e),d.on("searchQueryModelChanged",(t=>{t!==e.model&&((0,u.Fi)({model:e.model,onModelValueChange:s,view:e}),e.model=t,(0,u.AW)({model:e.model,onModelValueChange:s,view:e}))})),v.current=d}),[e,t,i,r,a,h,m,g,y]),b=n().useCallback((()=>{const e=(new Date).getTime().toString();d.searchPerformanceService.start({id:e,metric:c.SearchPerformanceMetrics.SearchPageLoaded,skipSli:!0}),S(),setTimeout((()=>{d.searchPerformanceService.measureOnce({id:e,metric:c.SearchPerformanceMetrics.SearchPageLoaded,skipSli:!0})}))}),[S]),E=n().useCallback((()=>{v.current&&(s.currentUserHelper.hasFeatureFlag("UISearchShowSpinnerOnTab")||(0,u.Fi)({model:v.current.model,view:e}),v.current.destroy(),p.destroyView(v.current),(0,u.kn)(e)),_.current&&_.current.dispose()}),[e]);return n().useEffect((()=>(b(),E)),[b,E]),n().createElement("div",{ref:f})}},31650:function(e,t,i){"use strict";i.d(t,{Yd:function(){return L},HG:function(){return B},kn:function(){return O},Fi:function(){return M},ZG:function(){return k},J1:function(){return D},AW:function(){return N}});var r=i(89867),n=i(16471),a=i(60567),s=i(16367),o=i(34074),l=i(50963),c=i(50563),d=i(21902),u=i(63541);let p;!function(e){e.CANCEL="cencel",e.OVERRIDE="overide",e.DUPLICATE="duplicate"}(p||(p={}));const h=[{type:p.CANCEL,color:"secondary",label:l.i18nUtil.get("search.confirmDialog.cancel")},{type:p.OVERRIDE,color:"secondary",label:l.i18nUtil.get("search.confirmDialog.overrideButton")},{type:p.DUPLICATE,color:"primary",label:l.i18nUtil.get("search.confirmDialog.openDuplicateButton")}],m=e=>{const[t,i]=d.useState(!0),r=t=>{i(!1),e.onActionCallback(t)};return d.createElement(u.Dialog,{open:t,customSize:{width:"25%"},"data-sumo-test":"search-modify-confirm-dialog",onClose:()=>{r(p.CANCEL)},TransitionProps:{onEntered:e=>{e.focus()}}},d.createElement(u.Dialog.Title,null,l.i18nUtil.get("search.confirmDialog.title")),d.createElement(u.Dialog.Content,null,l.i18nUtil.get("search.confirmDialog.bodyText")),d.createElement(u.Dialog.Actions,null,h.map((e=>d.createElement(u.Button,{"data-sumo-test":`search-modify-${e.type}-button`,key:e.type,color:e.color,onClick:()=>r(e.type)},e.label)))))},g=d.memo(m);var y=i(64390),v=i(92972),f=i(5350),S=i(47254);const b=["onActionCallback"],E="search-modify-confirm-dialog";function T(e){const{onActionCallback:t}=e,i=(0,v.Z)(e,b);(0,S.$h)({dialogId:E,reactElement:d.createElement(g,(0,y.Z)({onActionCallback:e=>{t(e),function(){const e=document.getElementById(E);e&&f.unmountComponentAtNode(e)}()}},i))})}const x=i(76993),C=i(57299),A=i(54565),w=i(67010),I=new r.TimeRangeUtil,R=["histogram","histogramUpdated","rawCount","recordCount","searchExpression","timeRangeDetails","isPinned","savedSearch","isSavedSearchModified","status","searchQueryStartMillis","searchQueryEndMillis","shortCode","searchActions","editedState"];function D(e,t,i){return e?e.subscribe((e=>{var r;e.type===n.WORKSPACE.VIEW_MESSAGE_TYPES.RESIZE&&t.onApplicationResize(),e.type===n.WORKSPACE.VIEW_MESSAGE_TYPES.ON_CONTENT_PRE_OPEN&&(null===(r=e.arguments)||void 0===r?void 0:r.viewId)===i.id&&function(e){const t=c.applicationContext.searchWorkspaceViewService,i=()=>{t.cloneView({onlyTimeRange:!1,alsoTimeRange:!0,view:e,duplicateOriginal:!0})};T({onActionCallback:r=>{if(r===p.OVERRIDE){a.contentSearchService.fetchById(e.data.savedSearchId).then((i=>{t.resetSearch(e,i)}))}else r===p.DUPLICATE&&i()}})}(i)})):void 0}function O(e){c.applicationContext.searchWorkspaceViewService.updateData(e)}function N({model:e,onModelValueChange:t,view:i}){e&&R.forEach((r=>{e.on("change:"+r,t,i)}))}function M({model:e,onModelValueChange:t,view:i}){e&&R.forEach((r=>{e.off("change:"+r,t,i)}))}function k({view:e,context:t}){let i=!1;if(!e.model){var r;i=!0;const n=null!==(r=e.data)&&void 0!==r&&r.parameterData?new x(e.data.parameterData):void 0,a=_.extend({context:t,searchViewSettingsModel:SumoApp.user.userPreferencesModel?SumoApp.user.userPreferencesModel.getSearchViewSettingsModel(w):new w,searchExpression:"",parameterModel:n,viewId:e.id},e.data||{});e.model=new C(a),O(e)}return e.model.setDetachable(!0),i}function L({context:e,element:t,view:i,onTitleChange:r}){const n=c.applicationContext.searchWorkspaceViewService;return new A({context:e,el:t,model:i.model,viewId:i.id,bentoPinAction:n.pinSearch.bind(n,i),createSavedSearch:n.createSavedSearch.bind(n,i),editSavedSearch:n.editSavedSearch.bind(n,i),getSaveSearchSettings:()=>function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.saveSearchSettings}(i),getTitle:()=>function(e){return null==e?void 0:e.title}(i),fromLastSession:i.fromLastSession,updateTitle:e=>V(e,r)})}function P(e,t){if("string"!=typeof t&&t.startMillis&&t.endMillis)e.setStartTimestamp(t.startMillis),e.setEndTimestamp(t.endMillis);else if(_.isString(t)){const i=t,r=i.match(/^(.+)\sto\s(.+)$/)?I.parseTimeRangeValue(i):I.parseTimeRangeDetails(i);e.setStartTimestamp(r.startTime),e.setEndTimestamp(r.endTime)}}function F(e,t){const i=e.timeRange,r=t.timeRange;e.dashboardPanel&&(t=_.extend(t,e.dashboardPanel,{parentAccessKey:e.parentAccessKey})),t.timeRange=r.details,_.isString(t.properties)||(t.properties=JSON.stringify(t.properties));const n=new o.SearchQueryDataModule;e.drilldownConfig&&n.setDrilldownConfig(e.drilldownConfig),n.setMonitorObject(t),n.setQueryName(t.title),n.setQueryString(e.queryString||t.queryString),n.setParameters(e.parameters||t.parameters),n.setMonitorModified(!1),n.setAutoParsingInfo(t.autoParsingInfo);const a=e.version;if(a){n.getMonitorObject().version={modifiedAt:moment(a.modifiedAt),modifiedBy:a.modifiedBy}}return i?P(n,i):(n.setStartTimestamp(r.startTime),n.setEndTimestamp(r.endTime)),n.setExecuteSearch(!0),n}function U({searchId:e,searchView:t,onTitleChange:i}){if(e){const r=s.Heimdall.getPlugin("routeChangePerformance");r.waitFor("get saved search"),function(e,t,i){SumoApp.ajax.call(null,{endpoint:"/json/v1/savedsearch/getSingle/table",data:{searchId:e},errorCode:"saved_search",success:e=>{let r;if(e.name&&V(e.name,i),e&&0!==e.id&&(r=new o.SearchQueryDataModule,r.setQueryString(e.query.queryString),r.setParameters(e.parameters),r.setTimeRange(e.query.timeRange),r.setFromSavedSearch(!0),r.setSavedSearchQueryId(e.id),r.setSearchByReceiptTime(e.byReceiptTime),r.setAutoParsingInfo(e.autoParsingInfo),r.setSavedSearch(e),e.schedules&&!_.isEmpty(e.schedules[0]))){const t=e.schedules[0];_.isBlank(t.cronSchedule)||(r.createCronJobHash(),t.friendlySchedule=t.scheduleType?t.scheduleType:r.getFrequencyFromCronExpression(t.cronSchedule),t.runAt=r.getHourToRunAt(t),r.setSchedules(e.schedules))}t&&t(r)}})}(e,(e=>{r.done("get saved search"),e&&-1!==_.functions(e).indexOf("setExecuteSearch")?(e.setExecuteSearch(SumoApp.user.userPreferencesModel.getRunSelectedSavedSearch()),t.drilldown(e)):SumoApp.userMessage.error("Could not retrieve search")}),i)}}function V(e,t){t&&e&&t(e)}function B({view:e,searchView:t,searchId:i,searchData:r,simpleSearchQuery:s,drilldownData:d,transactionDrilldownData:u,reattachQueryData:p,onTitleChange:h}){const m=a.searchUrlUtilService.isSearchCode(i),g=c.applicationContext.dashboardService;if(t.updateIsShared(m),e.fromLastSession)e.fromLastSession=!1;else{const c=a.searchUrlUtilService.isDirectSearchLink(i),v=_.isFinite(i);if(m&&c&&(i=i=i.substr(2)),r&&!_.isUndefined(r)){var y;let i;null===(y=e.model.getSaveSearchSettings())||void 0===y||y.setLogsQueryMode(n.QUERY_DISPLAY_MODE.ADVANCED),r.timeZone=SumoApp.dateUtil.getDefaultTimeZone(),i=SumoApp.priv.hasFlagUIDashboardDrillDownWithFilters()?g.getPanelWithFilters(r):g.getPanel(""+r.parentId,""+r.id),i.then(_.partial(F,r)).then((e=>{t.drilldown(e)})).catch((()=>{SumoApp.userMessage.error(l.i18nUtil.get("search.searchWorkspaceViewService.drilldownError"))}))}else if(s&&!_.isUndefined(s)){const e=function(e){const t=e.timeRange,i=new o.SearchQueryDataModule;return i.setQueryString(e.queryString),i.setMonitorModified(!1),e.autoParsingInfo&&i.setAutoParsingInfo(e.autoParsingInfo),e.byReceiptTime&&i.setSearchByReceiptTime(e.byReceiptTime),t&&P(i,t),e.properties&&(e.properties=JSON.stringify(e.properties)),e.displayTimerange&&(e.timeRange=e.displayTimerange),i.setMonitorObject(e),i.setExecuteSearch(!0),i}(s);t.drilldown(e)}else _.isUndefined(d)?_.isUndefined(u)?p?t.reattach(p):v?U({searchId:i,searchView:t,onTitleChange:h}):m||c?t.loadSavedSearchInstance(i):"create"===i&&t.loadSavedSearchInstance("create",void 0,void 0,{id:e.params.id,query:e.params.query,startTime:e.params.startTime,endTime:e.params.endTime,parameters:e.params.parameters}):t.openTransactionDrilldown(u):t.drilldown(d)}}},54351:function(e,t,i){"use strict";i.r(t),i.d(t,{ShareSearchDialogRenderer:function(){return d},ShareSearchDialogComponent:function(){return p}});var r=i(21902),n=i(5350),a=i(60567),s=i(50963),o=i(63541),l=i(47254);const c="search-share-dialog",d=e=>{(0,l.$h)({reactElement:r.createElement(u,e),dialogId:c})};const u=e=>{const[t,i]=r.useState(e.state);r.useEffect((()=>{e.getShortCode()||e.createShortCode((()=>{const t=e.getShortCode(),r=e.createShareSearchDialogUrls(t);i({contentItemUrls:r})}))}),[e,e.getShortCode,e.createShareSearchDialogUrls,e.createShareSearchDialogUrls]);const[a,l]=r.useState(!0);return r.createElement(o.Dialog,{open:a},r.createElement(o.Dialog.Title,null,s.i18nUtil.get("search.shareSearch")),r.createElement(o.Dialog.Content,null,r.createElement(p,{contentItemUrls:t.contentItemUrls})),r.createElement(o.Dialog.Actions,null,r.createElement(o.Button,{"data-sumo-test":"share-search-done",color:"primary",onClick:()=>{l(!1),function(){const e=document.getElementById(c);e&&n.unmountComponentAtNode(e)}()}},s.i18nUtil.get("search.done"))))},p=e=>r.createElement(r.Fragment,null,e.contentItemUrls.map((e=>r.createElement(r.Fragment,null,r.createElement("div",{"data-sumo-test":"share-search-dialog-label"},s.i18nUtil.get(e.i18nKey)),r.createElement(a.ContentItemUrl,{url:e.url})))))},47570:function(e,t,i){"use strict";i.r(t),i.d(t,{AGGREGATE_TYPE:function(){return d.F5},ANALYTICS_TIER:function(){return S.I},COLUMN_EXTRAS_HEIGHT:function(){return d.M$},ColumnWidthStore:function(){return c.qz},ContextMenuStore:function(){return c.Zm},HEIGHT_PER_LINE:function(){return d.qC},JSONDataTypeNames:function(){return g.E},JsonMode:function(){return d.nw},JsonPrettifier:function(){return r.Z},LogQueryRowEditor:function(){return T._},LogSearchTable:function(){return n.Z},MESSAGES_ID:function(){return d.t7},MESSAGE_TIME_ID:function(){return d.UF},MenuType:function(){return c.og},NumericFieldTypes:function(){return d.Yg},ParserCombinator:function(){return h.jh},QuickQueryListContainer:function(){return N.q},RECIEPT_TIME_ID:function(){return d.w7},REQUIRED_TABLE_FIELDS:function(){return d._g},ROW_OFFSET_ID:function(){return d.bb},RecordValueType:function(){return d.Zy},RowHeightStore:function(){return c.zr},SUMMARY_ID:function(){return d.QZ},SearchActions:function(){return x.P},SearchConfig:function(){return C.B},SearchContainer:function(){return P.Z},SearchEpic:function(){return A.l},SearchNonAggregateTableContainer:function(){return l.n},SearchQueryExpressionEditor:function(){return D},SearchQueryParser:function(){return h.cf},SearchSummarizeTable:function(){return a.Z},SearchTableAPIStore:function(){return c.t$},SelectWithHint:function(){return s.Z},SelectionMenuActions:function(){return d.J3},StandaloneSearchContainer:function(){return F.q},TimeFieldIds:function(){return d.Pv},aggHeaderConstants:function(){return d.MU},calculateOffsetAndLength:function(){return u.calculateOffsetAndLength},calculatePageCount:function(){return u.calculatePageCount},cleanSearchState:function(){return v.cleanSearchState},computeRawQueryString:function(){return h.Cz},copySelectedTextToClipboard:function(){return u.copySelectedTextToClipboard},createDropdownAtContainerId:function(){return k.createDropdownAtContainerId},createScannedSizeButton:function(){return M.createScannedSizeButton},createSearchCommonNgModule:function(){return Ve.r},createSearchComponentsNgModule:function(){return Be.A},createSearchConflictHandler:function(){return b.createSearchConflictHandler},createSearchNgModule:function(){return Ue},dataFields:function(){return d.tc},destroyDropdown:function(){return k.destroyDropdown},fetchEstimatedUsageDetailsByTier:function(){return m.fetchEstimatedUsageDetailsByTier},fetchPartitionsJson:function(){return m.fetchPartitionsJson},filteredFields:function(){return f.Ri},flatData:function(){return f.sj},flattenJsonUtil:function(){return g.$},getConflictFromErrorResponse:function(){return E.getConflictFromErrorResponse},getDataAndMetadata:function(){return u.getDataAndMetadata},getDateTimeStrings:function(){return u.getDateTimeStrings},getFields:function(){return u.getFields},getFormattedFieldName:function(){return u.getFormattedFieldName},getLogSearchBasicMode:function(){return I.getLogSearchBasicMode},getSelectedRangeCount:function(){return u.getSelectedRangeCount},getShouldEnableColumnFlex:function(){return u.getShouldEnableColumnFlex},getSurroundingMessagesData:function(){return u.getSurroundingMessagesData},getSurroundingMessagesDataUrl:function(){return u.getSurroundingMessagesDataUrl},getTargetMessageLocator:function(){return u.getTargetMessageLocator},getValueMetaObject:function(){return u.getValueMetaObject},hasMoreRawMessages:function(){return u.hasMoreRawMessages},hasSearchFinished:function(){return m.hasSearchFinished},initializeSearch:function(){return L.Z},initializeStandaloneSearch:function(){return L.H},isFieldNumeric:function(){return u.isFieldNumeric},isSecurityTierData:function(){return p.l},isTimeFieldUtil:function(){return u.isTimeFieldUtil},mapPartitionsWithTier:function(){return m.mapPartitionsWithTier},matchIndexWithSummaryindexes:function(){return u.matchIndexWithSummaryindexes},nestedData:function(){return f.Pj},openSurroundingMessages:function(){return u.openSurroundingMessages},partitionCreateFormFields:function(){return S.x},pauseQuery:function(){return v.pauseQuery},removeAllSpanTags:function(){return u.removeAllSpanTags},removeDuplicateKeys:function(){return u.removeDuplicateKeys},renderEditSearchDialog:function(){return Ae},renderEditSearchDialogFromLibrary:function(){return we},resumeQuery:function(){return v.resumeQuery},safelyRenderSpanTags:function(){return u.safelyRenderSpanTags},sanitizeForHighlighting:function(){return u.sanitizeForHighlighting},searchEntityReducerHandlers:function(){return o.Zd},searchExpressionContainsSort:function(){return u.searchExpressionContainsSort},searchInitialState:function(){return o._G},searchReducerHandlers:function(){return o.Y0},searchResultsTable:function(){return O.n},selectRecentSearch:function(){return w.selectRecentSearch},setLogSearchBasicMode:function(){return I.setLogSearchBasicMode},shouldShowCurrentScannedBytes:function(){return m.shouldShowCurrentScannedBytes},shouldShowEstimatedScannedBytes:function(){return m.shouldShowEstimatedScannedBytes},sortObjectKeys:function(){return u.sortObjectKeys},surroundingMessagesItems:function(){return d.yS},toMessageHashList:function(){return u.toMessageHashList},toStructuredQueryString:function(){return h.ws},updateRenderedColumnsWidths:function(){return c.hp},updateRenderedRowsHeights:function(){return c.S9},updateSearchActions:function(){return y.updateSearchActions},userReferencedSearchFieldsFilter:function(){return $e.o}});var r=i(77150),n=i(14106),a=i(36371),s=i(51530),o=i(8830),l=i(10505),c=(i(49791),i(83624)),d=i(39741),u=i(24867),p=i(72461),h=i(19716),m=i(29338),g=i(65826),y=i(99552),v=i(92019),f=i(6287),S=i(31250),b=i(41642),E=i(6930),T=i(79608),x=i(283),C=i(36079),A=i(49778),w=i(60069),I=i(60508),R=i(22443);D.$inject=["safeApply"];function D(e){return{require:"ngModel",restrict:"AE",template:'<textarea class="search-query-expression-editor-textarea" ng-disabled="isDisabled"></textarea>',scope:{context:"=",basicQueryCompletions:"=",useComplete:"=",usePlaceholder:"=",enterStartsSearch:"=",initialFocus:"=",isDisabled:"=",disabledText:"=",zIndex:"<?",queryStringSubject:"<?",onBlur:"<?"},link(t,i,r,n){const a=i.children()[0];if(t.isDisabled){const e=t.$watch("disabledText",((t,i)=>{void 0!==t&&($(".search-query-expression-editor-textarea").val(t),e())}))}else!function(i){const r={context:t.context,el:i,basicQueryCompletions:t.basicQueryCompletions,bUseComplete:t.useComplete,bUsePlaceholder:t.usePlaceholder,bEnterStartsSearch:t.enterStartsSearch,initialFocus:t.initialFocus,zIndex:t.zIndex,queryStringSubject:t.queryStringSubject},a=R.searchQueryEditorService.getQueryEditor(r),s={blur(){var i;e(t,(()=>{n.$setViewValue(a.editor.getValue())})),null===(i=t.onBlur)||void 0===i||i.call(t)},change(i,r){e(t,(()=>{t.$emit("searchQueryExpressionEditorInputChange",i,r)}))}};a.editor.on("blur",s.blur),a.editor.on("change",s.change),n.$render=()=>{a.setValue(n.$viewValue)},t.$on("$destroy",(()=>{a.editor.off("blur",s.blur),a.editor.off("change",s.change),a.destroy()})),a.render()}(a)}}}var O=i(83114),N=i(18038),M=i(46254),k=i(70395),L=i(98043),P=i(17397),F=i(98481),U=i(89131),V=i(50963),B=i(21902),H=i.n(B),W=i(63541),q=i(76035),j=i.n(q);const Q=()=>H().createElement(H().Fragment,null,H().createElement("div",{className:j().searchViewDummy},H().createElement(W.Loader,{"data-sumo-test":"search-checking-spinner",loaderType:"spinner",isVisible:!0,size:"large"})));var z=i(54351),G=i(95398),K=i(51093),Y=i(20777),Z=i(61592),X=i(48009),J=i(16471),ee=i(60567),te=i(66359),ie=i(41197),re=i(88097),ne=i(34074),ae=i(50563),se=i(5350),oe=i.n(se),le=i(52800),ce=i(89867),de=i(47254);const ue=()=>Promise.all([i.e(6686),i.e(4208)]).then(i.bind(i,88153)).then((({SaveSearchDialogContainer:e})=>({default:e}))),pe=H().forwardRef(((e,t)=>H().createElement(W.SuspenseComponent,{dynamicImportFn:ue,componentProps:Object.assign({},e,{ref:t}),moduleName:"saveSearchDialog",noLoader:!0}))),he=()=>Promise.all([i.e(6686),i.e(4208)]).then(i.bind(i,66734)).then((({EditSearchDialogContainer:e})=>({default:e}))),me=H().forwardRef(((e,t)=>H().createElement(W.SuspenseComponent,{dynamicImportFn:he,componentProps:Object.assign({},e,{ref:t}),moduleName:"editSearchDialog",noLoader:!0})));var ge=i(91503),ye=i(98356),ve=i(13422),fe=i(18414),_e=i(53662),Se=i(33409);const be={savedSearch:{query:{queryString:"",timeRange:"-15m"},name:"search 1"},enableScheduleSearch:!1,scheduleSearchError:{frequencySelectorError:!1,alertConditionError:!1,alertSettingsError:!1,treError:!1},fieldsTouched:ye.J,frequentPartitions:[],infrequentPartitions:[],partitions:[],selectedAlertType:J.ScheduleAlertType.EMAIL,alertTypeApiResponse:{}},Ee=(e,t)=>{switch(e||(e=be),t.type){case _e.n.type:return(0,Se.t)(e,t)}return e};function Te(e=be){return(0,ve.createStore)(Ee,e,(0,ve.applyMiddleware)(fe.default))}const xe="save-search-dialog-react",Ce=({savedSearch:e,contentSearch:t})=>{var i,r;const n=null!==(i=null===(r=ae.applicationContext.store.getState().views.search.partitionState)||void 0===r?void 0:r.data)&&void 0!==i?i:[],{frequentPartitions:a,infrequentPartitions:s}=(0,m.mapPartitionsWithTier)(n),o=(0,ge.MJ)(null==e?void 0:e.schedules);return{savedSearch:Object.assign({},e,{query:Object.assign({},(null==e?void 0:e.query)||{},{queryString:(null==e?void 0:e.query.queryString)||"",timeRangeDetails:(null==e?void 0:e.query.timeRange)&&ce.timeRangeUtil.parseTimeRangeValue(e.query.timeRange).details}),schedules:null!=e&&e.schedules&&(null==e?void 0:e.schedules.length)>0?null==e?void 0:e.schedules:(0,ge.he)(e)}),selectedAlertType:o,alertTypeApiResponse:{},scheduleSearchError:{alertConditionError:!1,alertSettingsError:!1,treError:!1,frequencySelectorError:!1},fieldsTouched:ye.J,frequentPartitions:a,infrequentPartitions:s,partitions:n,originalItem:t?{contentSearch:t}:void 0}},Ae=({id:e,originalItem:t},i)=>{const r=t?{contentSearch:t}:{};(0,de.$h)({dialogId:xe,reactElement:H().createElement(le.Provider,{store:Te(Ce(r))},H().createElement(me,{savedSearchId:e,onClose:e=>{Ie(),i(e)}}))})};function we({searchItem:e,actionCommand:t}){return new Promise((()=>{Ae({id:e.referenceId,originalItem:e},(e=>{if(e){const i=[e],r={actionType:t.actionType,items:i};return ee.contentLoggingNotificationService.logAndNotify(t,i,r)}}))}))}function Ie(){const e=document.getElementById(xe);e&&oe().unmountComponentAtNode(e)}var Re=i(31650),De=i(77177);class Oe extends ee.BaseViewService{constructor(){super(ee.workspacesManager,ie.logService),(0,K.Z)(this,"viewInfo",J.WORKSPACE.VIEWS.SEARCH),(0,K.Z)(this,"counter",0),(0,K.Z)(this,"errorStatus",99),(0,K.Z)(this,"debouncedSetDataFromModel",void 0),(0,K.Z)(this,"lastSessionFolderList",void 0),(0,K.Z)(this,"getDefaultViewTitle",(()=>V.i18nUtil.get("search.searchWorkspaceViewService.defaultViewTitle"))),(0,K.Z)(this,"searchDrilldownMultiple",(e=>{const t=ee.workspacesManager.getCurrent();e.forEach(((e,i)=>{const r=V.idGeneratorService.generateId().toString(),n=this.createView({id:r,title:e.name||(e.getQueryName?e.getQueryName():void 0)||V.i18nUtil.get("search.searchWorkspaceViewService.defaultDrilldownTitle"),params:{viewId:r,drilldownData:e},isDrillDown:!0});t.addView(n,void 0,0!==i)}))})),(0,K.Z)(this,"searchDrillDown",(e=>{const t=ee.workspacesManager.getCurrent(),i=V.idGeneratorService.generateId().toString();return t.addView(this.createView({id:i,title:e.name||(e.getQueryName?e.getQueryName():void 0)||V.i18nUtil.get("search.searchWorkspaceViewService.defaultDrilldownTitle"),params:{viewId:i,drilldownData:e},isDrillDown:!0}))})),(0,K.Z)(this,"simpleSearchDrillDown",((e,t)=>{const i=ee.workspacesManager.getCurrent(),r=""+V.idGeneratorService.generateId(),n=e.title||(t?J.WORKSPACE.VIEWS.SEARCH.drilldownLivetailTitle:J.WORKSPACE.VIEWS.SEARCH.drilldownTitle),a=this.createView({id:r,title:n,params:{viewId:r,simpleSearchQuery:e},isDrillDown:!0});i.addView(a)})),(0,K.Z)(this,"transactionSearchDrillDown",(e=>{const t=ee.workspacesManager.getCurrent(),i=V.idGeneratorService.generateId().toString();t.addView(this.createView({id:i,title:e.name||(e.getQueryName?e.getQueryName():void 0)||V.i18nUtil.get("search.searchWorkspaceViewService.defaultDrilldownTitle"),params:{viewId:i,transactionDrilldownData:e},isDrillDown:!0}))})),(0,K.Z)(this,"panelDrilldown",(e=>{const t=ee.workspacesManager.getCurrent(),i=""+V.idGeneratorService.generateId(),r=this.createView({id:i,title:J.WORKSPACE.VIEWS.SEARCH.drilldownTitle,params:{viewId:i,searchData:e},isDrillDown:!0});t.addView(r)})),(0,K.Z)(this,"reattachQuery",(e=>{const t=ee.workspacesManager.getCurrent(),i=""+(e.getQueryId()||V.idGeneratorService.generateId());t.addView(this.createView({id:i,title:e.getQueryName()||V.i18nUtil.get("search.searchWorkspaceViewService.defaultDrilldownTitle"),params:{viewId:i,reattachQueryData:e}}))})),(0,K.Z)(this,"extractDataFromModel",(e=>{var t;const i=e.toJSON?e.toJSON():e;delete i.context,i.isPublishable=null===(t=e.isPublishable)||void 0===t?void 0:t.call(e);return _.each(["searchViewSettingsModel","pendingStartSearchQuery","exporter","keepAliveRequest","caller","searchQueryModel","subViewModels","displayStartMillis","displayEndMillis","facets","fields","histogram","pagedMessages","performance","userAssignedFields","drilldownMonitor","continuousPartitions","infrequentPartitions","frequentPartitions","securityPartitions","aggregateResultsSettings","hiddenLegends","viewId"],(e=>{delete i[e]})),_.each(["saveSearchSettings"],(e=>{const t=i[e];t&&(i[e]=this.extractDataFromModel(t))})),i})),(0,K.Z)(this,"createSavedSearch",((e,t,i)=>{var r,n;te.currentUserHelper.hasFeatureFlag("UISearchSaveSearchDialogReact")?(r=t,n=t=>{this.onContentEdit(e,t)},(0,de.$h)({dialogId:xe,reactElement:H().createElement(le.Provider,{store:Te(Ce({savedSearch:r}))},H().createElement(pe,{onSaveSearch:n,onClose:Ie}))})):ee.libraryActionsService.runAction({actionType:V.ContentActionType.CREATE,event:i,params:{type:J.CONTENT_TYPES.SAVED_SEARCH,payload:t}}).then((t=>{this.onContentEdit(e,t.items[0])}))})),(0,K.Z)(this,"editSavedSearch",((e,t,i,r)=>{const n=t;return te.currentUserHelper.hasFeatureFlag("UISearchEditSearchDialogReact")?new Promise((t=>{Ae({id:n},(i=>{i&&e&&this.onContentEdit(e,i),t()}))})):ee.contentSearchService.fetchContentItem(n).then((e=>ee.libraryActionsService.runAction({actionType:V.ContentActionType.EDIT,event:i},e,r)))})),this.debouncedSetDataFromModel=_.debounce(this.setDataFromModel,250)}newTab(e,t,i){super.newTab(e,t,i);const r=this.createView();e.addView(r,i)}createView(e={}){const t=super.createView(e),i=e.id||""+V.idGeneratorService.generateId(),r=e.title||(0,Y.Z)(e,"params.initTabName")||this.getTitle();return t.id=i,t.title=r,t.params=e.params?e.params:{viewId:i},t}getSearchQueryData(e,t,i,r){var n;const a=ee.workspacesManager.getCurrent().currentView===i;let s;const o=!(null===(n=i.data)||void 0===n||!n.fromSavedSearch);return s=r&&o?this.getSavedSearchData(i):a?this.getCurrentViewData(i,e,t):this.getViewData(i,e,t),s}getSavedSearchData(e){let t;try{t=new ne.SearchQueryDataModule,t.setExecuteSearch(!1),t.setQueryString(e.data.savedSearch.query.queryString),t.setTimeRange(e.data.savedSearch.query.timeRange),this.setSearchParameters(t,e.data.savedSearch.parameters)}catch(e){e.message=V.i18nUtil.get("search.searchWorkspaceViewService.notASavedSearch"),t.error=e}return e.data&&(t.setAutoParsingInfo(e.data.savedSearch.autoParsingInfo),t.setSearchByReceiptTime(e.data.savedSearch.byReceiptTime)),t}getCurrentViewData(e,t,i){const r=new ne.SearchQueryDataModule,n=this.getTimeRange(e);if(t)r.setQueryString(""),r.setTimeRange(n);else{i&&r.setTimeRange(n);const t=(0,Y.Z)(e.model,"getDisplaySearchExpression")?e.model.getDisplaySearchExpression()||e.model.getSearchExpression():"";r.setQueryString(t)}if((0,Z.Z)(e.model,"getParameterModel")){const t=e.model.getParameterModel();this.setSearchParameters(r,t.getParameters())}if(e.data&&(r.setAutoParsingInfo(e.data.autoParsingInfo),r.setSearchByReceiptTime(e.data.byReceiptTime)),(0,Z.Z)(e.model,"getSaveSearchSettings")){const t=e.model.getSaveSearchSettings();t&&r.setMonitorObject({logsQueryMode:t.getLogsQueryMode()})}return r}getViewData(e,t,i){const r=new ne.SearchQueryDataModule,n=this.getTimeRange(e);if(r.setQueryString(t?"":e.data.displaySearchExpression),r.setTimeRange(i?n:""),_.hasPath(e.model,"getParameterModel")){const t=e.model.getParameterModel();this.setSearchParameters(r,t.getParameters())}return e.data&&(r.setAutoParsingInfo(e.data.autoParsingInfo),r.setSearchByReceiptTime(e.data.byReceiptTime)),r}setSearchParameters(e,t){(0,X.Z)(t)||e.setParameters(t)}getTimeRange(e){const t=e.model.getDisplayTimerangeText();return t||e.model.getTimerangeText()}cloneView(e){const t=ee.workspacesManager.getCurrent(),i=""+V.idGeneratorService.generateId(),r=this.getSearchQueryData(e.onlyTimeRange,e.alsoTimeRange,e.view,e.duplicateOriginal),n=this.getTitle();r.error?(0,re.showCriticalNotification)({variant:"critical",message:r.error.message,autoDismiss:!0}):t.addView(this.createView({id:i,title:n,params:{viewId:i,drilldownData:r},isDrillDown:e.isDrillDown}))}cleanViewData(e){const t=_(e).pick("searchQueryId","isDrilldown","savedSearchId","timerangeDetails","startMillis","endMillis","searchQueryEndMillis","searchQueryStartMillis","isAllTIme","searchOwner","byReceiptTime","autoParsingInfo","accelerateSearch","fromSavedSearch","fromSavedSearchQueryString","isSavedSearchModified","searchByReceiptTimeDisabled","drillDownParams","saveSearchSettings","userAssignedFields","displaySearchExpression","displayTimerangeText","parseQueryResult","searchQueryStartMillis","searchQueryEndMillis","shortCode","isPublishable");if(_.isEmpty(t.displayTimerangeText)&&(t.displayTimerangeText=t.timerangeText),t.parseQueryResult){const{aggregation:e,summary:i}=t.parseQueryResult;t.parseQueryResult={aggregation:e,summary:i}}return e&&e.parameterModel&&(t.parameterData={paramPositionMap:e.parameterModel.getParamPositionMap(),parameters:e.parameterModel.getParameters()}),t}getViewParams(){return[...super.getViewParams(),"viewId"]}modifyViewId(e,t){if(e&&t.id!==e){t.id=e;const i=t.params;i.viewId=e,ee.workspacesManager.getCurrent().currentView===t&&ee.applicationState.go(this.viewInfo.stateName,i,{notify:!1,reload:!1,location:"replace"})}}updateViewId(e,t){const i=e.data;let r;if(i){const e=i.savedSearch;t?r=_.isEmpty(e)?V.idGeneratorService.generateId():e.id:i.isPinned?r=i.searchQueryId:_.isEmpty(e)||(r=e.id)}r=r?""+r:r,this.modifyViewId(r,e)}getIcon(e){let t=!1,i=!1;const r=(0,Y.Z)(e,"data");if(r){const e=r.savedSearch;t=e&&e.schedules&&e.schedules.length>0,i=r.isPinned}return i?this.viewInfo.pinnedSearchIcon:t?this.viewInfo.scheduledIcon:this.viewInfo.icon}getStateIcon(e){let t;return e.data&&e.data.isSavedSearchModified&&(t=this.viewInfo.savedSearchEditIcon),t}pinSearch(e){if(e.model){var t;const i={id:e.id,name:null===(t=ee.workspacesManager.getCurrent().currentView)||void 0===t?void 0:t.title,type:J.CONTENT_TYPES.BACKGROUND_SEARCH,typeIcon:"",accessKey:"",actions:[],permissions:[],favorite:!1,referenceId:e.id,scheduled:!1,scheduledKnown:!1};e.model.pinQuery((()=>{if(e.editMode||e.isStatic)return;let t;e.title!==V.i18nUtil.get("search.searchWorkspaceViewService.defaultDrilldownTitle")&&0!==e.title.indexOf(sprintf(V.i18nUtil.get("search.searchWorkspaceViewService.defaultViewTitle"),""))||(t=moment().format("ddd Hmm")),this.suggestTitleChange(e,t),ee.workspacesManager.getCurrent().currentView!==e&&this.setDataFromModel(e)}),((e,t,i)=>{SumoApp.userMessage.error(i)}),i)}}suggestTitleChange(e,t){const i=ee.workspacesManager.getCurrent();i.currentView===e?i.enterEditMode(e,t):this.updateTitle(e,t).then((()=>{i.updateTitle(e.id,t)}))}isActionDisabled(e,t){let i;switch(t){case J.WORKSPACE.MENU_ACTIONS.rename.action:i=!this.canBeRenamed(e);break;case J.WORKSPACE.MENU_ACTIONS.pin.action:i=this.isSearchPinAllowed(e).then((e=>!e));break;default:i=!1}return Promise.resolve(i)}canBeRenamed(e){return e.data&&(e.data.isPinned||!e.data.savedSearchId||e.data.isPublishable)}isActionHidden(e,t){let i;switch(t){case J.WORKSPACE.MENU_ACTIONS.pin.action:i=e.data&&e.data.isPinned;break;case J.WORKSPACE.MENU_ACTIONS.unpin.action:i=!(e.data&&e.data.isPinned);break;case J.WORKSPACE.MENU_ACTIONS.duplicate.action:i=e.editedState;break;case J.WORKSPACE.MENU_ACTIONS.duplicateCurrent.action:case J.WORKSPACE.MENU_ACTIONS.duplicateOriginal.action:i=!e.editedState;break;default:i=!1}return i}isSearchPinAllowed(e){return new Promise((t=>{e.model||t(!1);const i=e.data;i?this.isErrorStatus(i.status)||!i.searchQueryId?t(!1):this.isSaveQuery(e).then((e=>{t(!e&&!i.isPinned)})):t(!1)}))}isErrorStatus(e){return e===this.errorStatus}implementAction(e,t){switch(t){case J.WORKSPACE.MENU_ACTIONS.unpin.action:case J.WORKSPACE.MENU_ACTIONS.pin.action:this.pinSearch(e)}}isSaveQuery(e){if(e.model){const t=e.model.getPendingStartSearchQuery();return(t?t.model.getIsSaveExpression():e.model.getIsSaveExpression())||Promise.resolve(!1)}return Promise.resolve(!1)}getTabIdFromLibraryItem(e){const t=e.type===J.CONTENT_TYPES.BACKGROUND_SEARCH?e.id:e.referenceId;return t?t.toString():void 0}onContentEdit(e,t){if(e.model){const i=ee.workspacesManager.getCurrent();return(0,V.getAngularInjectable)("contentManagementServiceFactory").getInstance().getService(t.type).fetch(t).then((t=>{e.model.setFromSavedSearch(!0),e.model.setSavedSearchId(t.id),e.model.setFromSavedSearchQueryString(t.query.queryString),e.model.setSavedSearch(t),e.model.setSearchByReceiptTime(t.byReceiptTime),e.model.setAutoParsingInfo(t.autoParsingInfo),null!=i&&i.updateTitle&&i.updateTitle(e.id,t.name),e.model.setResetValuesToSavedSearch(Date.now())})).then((()=>((null==i?void 0:i.currentView)!==e&&this.setDataFromModel(e),e)))}}onContentPreOpen(e,t){if(void 0!==e&&e.editedState){ee.workspacesManager.getCurrent().broadcastViewMessage({type:J.WORKSPACE.VIEW_MESSAGE_TYPES.ON_CONTENT_PRE_OPEN,arguments:{viewId:e.id}})}}resetSearch(e,t){const i=JSON.parse(t.properties);e.model.setDisplaySearchExpression(t.query.queryString),e.model.setDisplayTimerangeText(t.query.timeRange),e.model.getSearchViewSettingsModel().setAggregateResultsViewerType(i.aggregateViewerType),e.model.getSearchViewSettingsModel().setAggregateResultsSettings(i.aggregateResultsSettings),e.model.setIsSearchModified(!1),e.model.setAutoParsingInfo(t.autoParsingInfo),e.model.setSearchByReceiptTime(t.byReceiptTime);e.model.getParameterModel().setParameters(t.parameters),e.lastResetRequest=(new Date).getTime();const r=setTimeout((()=>{e.model.setEditedState(!1),e.model.trigger("updateSearchfromModel"),clearTimeout(r)}))}updateTitle(e,t){return new Promise(function(){var i=(0,G.Z)((function*(i,r){if(e.model||((0,Re.ZG)({view:e,context:ae.applicationContext.appContext}),e.model.get("savedSearchId")&&void 0===e.model.getSavedSearch().id&&(yield e.model.updateSavedSearchFromContentItem({referenceId:e.model.get("savedSearchId"),type:"SAVED_SEARCH"}))),e.model.get("isPinned"))e.model.renameQuery(t,(()=>{i(e)}),(()=>{r()}));else if(e.model.get("savedSearchId")){const n=e.model.getSavedSearch();n.name=t;const a=$.extend(!0,{},n);e.model.persistToDb(a,!1,{resolve:i,reject:r})}else i(e)}));return function(e,t){return i.apply(this,arguments)}}())}setDataFromModel(e){(0,V.getAngularInjectable)("$rootScope").$applyAsync((()=>{const t=this.extractDataFromModel(e.model);t.searchExpression&&!_.isBlank(t.searchExpression)&&_.isBlank(t.displaySearchExpression)&&(t.displaySearchExpression=t.searchExpression);const i=e.data&&e.data.isPinned,r=!t.isPinned&&i;e.data=t,e.icon=this.getIcon(e),e.editedState=t.editedState,e.showLoader=(0,De.PG)(t.status),this.updateViewId(e,r),ee.workspacesManager.getCurrent().saveState()}))}updateData(e){this.debouncedSetDataFromModel(e)}getLastSessionRecentSearchData(e){return(this.lastSessionFolderList?Promise.resolve(this.lastSessionFolderList):(0,V.getAngularInjectable)("contentServiceFactory").getInstance().getCachedSearches()).then((t=>(this.lastSessionFolderList=t,_.find(t.list,(t=>!!t.id&&t.id.toString()===e)))))}viewRemoved(e,t){e.model&&e.model.destroy()}getTitle(e){const t=e||V.i18nUtil.get("search.searchWorkspaceViewService.defaultViewTitleTemplate",++this.counter>1?" "+this.counter:"");return t===e?sprintf(t,++this.counter>1?" "+this.counter:""):t}}class Ne{constructor(e,t){this.$scope=e,this.$element=t,(0,K.Z)(this,"data",void 0),(0,K.Z)(this,"state",void 0),(0,K.Z)(this,"actions",void 0),(0,K.Z)(this,"variantCompact",void 0),(0,K.Z)(this,"newItemHint",void 0),(0,K.Z)(this,"maxParamValueLength",J.MAX_PARAM_VALUE_LENGTH),(0,K.Z)(this,"focusOnValue",(()=>{const e=_.find(this.state.parameters,(e=>_.isUndefined(e.value.value)||""===e.value.value));if(e){const t="value-"+e.name;this.$element.find("#"+t).trigger("focus")}}))}$onInit(){this.$scope.$watch("$ctrl.state",(()=>{this.actions.onChange({parameters:ee.searchParametersService.extract(this.state.parameters),isSavedSearchModified:this.state.isSavedSearchModified})}),!0),this.variantCompact=J.DROPDOWN_VARIANTS.compact,this.newItemHint=V.i18nUtil.get("common.newItemHint")}}(0,K.Z)(Ne,"$inject",["$scope","$element"]);const Me={bindings:{state:"<",actions:"<"},controller:Ne,template:'<div class="search-params">\n    <div\n      md-theme="formTheme"\n      class="search-params__form search-params__form-viewer"\n      ng-keyup="$ctrl.actions.onEnterKeypress($event)">\n\n      <div class="search-params__form__item-container"\n        data-sumo-test="search-params__form__item-container"\n        ng-repeat="param in $ctrl.state.parameters">\n        <select-or-create\n          md-input-max-length="$ctrl.maxParamValueLength"\n          update-on-blur="true"\n          id = "param.name"\n          class="search-params__form__item-container__autocomplete"\n          ng-class="{\'err\': $ctrl.state.showValidationTrigger && (!param.value.label || param.value.label.length > $ctrl.mdInputMaxLength)}"\n          data-sumo-test="search-params__form__item"\n          form-ctrl="$ctrl"\n          selected-item="param.value"\n          on-text-change="$ctrl.actions.updateParamValue(param.name, label, fetchMatchPromise)"\n          on-selection-change="$ctrl.actions.updateParamValue(param.name, selection)"\n          on-new-item="$ctrl.actions.updateParamValue(param.name, selection.label)"\n          label="param.name"\n          meta="param"\n          match-request="$ctrl.actions.getMatches"\n          variant="$ctrl.variantCompact"\n          new-item-hint="$ctrl.newItemHint"\n          option-tooltip="true">\n        </select-or-create>\n\n        <md-icon md-svg-icon="question-circle"\n          data-sumo-test="search-params__form__item__desc"\n          ng-class="\'search-params__form__item__desc\'"\n          ng-if="param.desc && !$ctrl.state.manageView"\n          tooltip\n          content-as-html="true"\n          tooltip-content="{{param.desc}}">\n        </md-icon>\n\n        <md-menu md-offset="0 28" md-theme="default" class="search-params__form__item__menu">\n          <md-icon md-svg-icon="menu"\n            md-menu-origin\n            aria-label="Open demo menu"\n            ng-click="$mdMenu.open($event)"\n            data-sumo-test="search-params__form__item__kebab"\n            class="search-params__form__item__kebab">\n          </md-icon>\n          <md-menu-content width="2" class="search-params__form__item__menu__content">\n            <md-menu-item class="search-params__form__item__menu__item"\n              ng-repeat="actionType in $ctrl.state.paramActions">\n              <md-button class="search-params__form__item__menu__item__btn" md-menu-align-target\n                ng-click="$ctrl.actions.onParamMenuItemClick($event, actionType, param.name, $ctrl.actions)">\n                <span> {{:: \'search.parameters.actions.\' + actionType | i18nText }} </span>\n              </md-button>\n            </md-menu-item>\n          </md-menu-content>\n        </md-menu>\n\n      </div>\n    </div>\n  </div>'};class ke{constructor(e){this.$element=e,(0,K.Z)(this,"state",void 0)}$onInit(){this.$element.addClass("share-search-dialog")}}(0,K.Z)(ke,"$inject",["$element"]);const Le={controller:ke,bindings:{state:"<"},template:'<div class="share-search-dialog">\n  <div class="share-search-dialog__container" ng-repeat="contentItemUrl in $ctrl.state.contentItemUrls track by contentItemUrl.i18nKey">\n    <div class="share-search-dialog__label" data-sumo-test="share-search-dialog-label">{{contentItemUrl.i18nKey | i18nText}}</div>\n    <content-item-url url="contentItemUrl.url" test-id="$index"></content-item-url>\n  </div>\n</div>\n  '},Pe=e=>{const{context:t,basicQueryCompletions:i,useComplete:r,usePlaceholder:n,enterStartsSearch:a,initialFocus:s,zIndex:o,queryString:l,queryStringSubject:c,isDisabled:d,disabledText:u,onBlur:p,onInputChange:h}=e,[m,g]=H().useState(l),y=H().useRef(null),[v,f]=H().useState(),_=H().useMemo((()=>e=>{const l={context:t,el:e,basicQueryCompletions:i,bUseComplete:r,bUsePlaceholder:n,bEnterStartsSearch:a,initialFocus:s,zIndex:o,queryStringSubject:c},d=R.searchQueryEditorService.getQueryEditor(l);f(d),d.setValue(m),d.render()}),[t,i,r,n,a,s,o,c,m]);return H().useEffect((()=>{const e={blur(){var e;g(null!==(e=null==v?void 0:v.editor.getValue())&&void 0!==e?e:""),null==p||p()},change(e){null==h||h(e.getValue())}};return null==v||v.editor.on("blur",e.blur),null==v||v.editor.on("change",e.change),d||v?y.current&&(y.current.value=null!=u?u:""):_(y.current),()=>{null==v||v.editor.off("blur",e.blur),null==v||v.editor.off("change",e.change)}}),[p,h,d,u,v,_]),H().createElement("textarea",{ref:y,className:"search-query-expression-editor-textarea",disabled:e.isDisabled})};let Fe=!1;function Ue(){if(Fe)return;Fe=!0;const e="sumoApp.search",t=U.module(e,["sumoApp.logging","sumoApp.utils","sumoApp.search.common","sumoApp.core","sumoApp.utils.backbone","sumoApp.content","ngSanitize","ngMaterial","sumoApp.currentUser.date"]);return t.service("searchWorkspaceViewService",Oe),t.directive("searchQueryExpressionEditor",D),t.component("searchReact",(0,V.strictModeReactToAngular)(P.Z,["searchId","searchData","drilldownData","simpleSearchQuery","transactionDrilldownData","reattachQueryData","onTitleChange","view","broadcastMsg$"])),t.component("searchDummy",(0,V.strictModeReactToAngular)(Q)),t.component("searchParams",Me),t.component("shareSearchDialog",Le),t.component("shareSearchDialogReact",(0,V.strictModeReactToAngular)(z.ShareSearchDialogComponent,["contentItemUrls"])),t.component("searchQueryExpressionEditorReact",(0,V.strictModeReactToAngular)(Pe,["context","zIndex","el","basicQueryCompletions","bUseComplete","bUsePlaceholder","bEnterStartsSearch","initialFocus","queryStringSubject","readOnly","containingView","placeholderText","onBlur","onEditorDomUpdate","onStartSearchQuery","isDisabled","useComplete","usePlaceholder","enterStartsSearch","queryString","disabledText","onInputChange"])),e}var Ve=i(96177),Be=i(1271),$e=i(73751)},72461:function(e,t,i){"use strict";i.d(t,{l:function(){return r}});const r=e=>/\s*(_asocForward|_siemForward)\s*=\s*true(\s|$)/.test(e)},29338:function(e,t,i){"use strict";i.r(t),i.d(t,{fetchEstimatedUsageDetailsByTier:function(){return d},fetchPartitionsSwagger:function(){return u},mapPartitionsWithTier:function(){return p},fetchScheduledViewSwagger:function(){return h},fetchPartitionsJson:function(){return g},hasSearchFinished:function(){return y},shouldShowEstimatedScannedBytes:function(){return v},shouldShowCurrentScannedBytes:function(){return f},getUsageDetailsValueByTier:function(){return _}});var r=i(16471),n=i(86795),a=i(22443),s=i(34074),o=i(50963),l=i(50563),c=i(73166);const d=(e,t,i)=>{(0,o.postWithPromise)("/api/v1/logSearches/estimatedUsageByTier",e).then((e=>{t(e.estimatedUsageDetails)})).catch(i)},u=(e,t)=>{const i=l.applicationContext.currentUserHelper.hasFeatureFlag("UISearchEnableAllViewsOnAutocomplete")?l.applicationContext.currentUserHelper.hasFeatureFlag("UIPartitionDefaultNameV2")?s.allPartitionView+",DefaultView":s.allPartitionView:"Partition";(0,o.getWithPromise)("/api/v1/partitions/tiers?limit=1000&viewTypes="+i).then((t=>{e(p(t.data))})).catch(t)},p=e=>{const t=[],i=[],n=[],s=[];return e.forEach((e=>{e.analyticsTier.toLowerCase()===r.TIER.INFREQUENT||e.analyticsTier.toLowerCase()===r.TIER.SECURITY&&((0,a.isTierEntitledToFeature)((0,a.getTierFromValue)(e.analyticsTier.toLowerCase()),a.TIER_SPECIFIC_FEATURES.CSE_DATA)||l.applicationContext.currentUserHelper.hasFeatureFlag("UISearchSecurityAnalyticsTier"))?t.push(e.name):e.analyticsTier.toLowerCase()===r.TIER.FREQUENT?i.push(e.name):e.analyticsTier.toLowerCase()===r.TIER.CONTINUOUS&&n.push(e.name),e.analyticsTier.toLowerCase()===r.TIER.SECURITY&&s.push(e.name)})),{infrequentPartitions:t,frequentPartitions:i,continuousPartitions:n,securityPartitions:s}},h=(e,t)=>{(0,n.fetchScheduledViewList)({limit:1e3}).then((t=>{e(m(t.data))})).catch(t)},m=e=>{const t=[],i=[];return e.forEach((e=>{e.dataTier.toLowerCase()===r.TIER.INFREQUENT?t.push(e.indexName):e.dataTier.toLowerCase()===r.TIER.CONTINUOUS&&i.push(e.indexName)})),{infrequentSV:t,continuousSV:i}},g=(e,t)=>{(0,o.getWithPromise)("/json/v1/views/rules/list/get").then((t=>{const i=t.rules.filter((e=>{var t;return e.cold&&!e.cachingEnabled||l.applicationContext.currentUserHelper.hasFeatureFlag("UISearchSecurityAnalyticsTier")&&(null===(t=e.analyticsTier)||void 0===t?void 0:t.toLowerCase())===r.TIER.SECURITY})).map((e=>e.viewName));e(i)})).catch(t)},y=e=>{switch(e){case c.default.STATUS_DONE_GATHERING_RESULTS:case c.default.STATUS_HISTOGRAM_COMPLETED:case c.default.STATUS_CANCELLED:case c.default.STATUS_ERROR:return!0;default:return!1}},v=e=>{const t=y(e.status),i=e.status===c.default.STATUS_NOT_STARTED;return(e.displayQueryInfrequentTier||e.displayMatchedDataTier)&&(i||t&&e.searchStateDirty)},f=e=>{const t=y(e.status);return(e.runningMatchedDataTier||e.runningQueryInfrequentTier)&&!(t&&e.searchStateDirty)},_=e=>{let t;return e.showEstimatedScannedBytes?t=e.estimatedUsageDetailsByTier:e.showCurrentScannedBytes&&(t=e.usageDetailsByTier),s.SearchUtils.reduceUsageDetailsByTier(t,r.TIER.INFREQUENT)}},77346:function(e,t,i){var r=i(23278),n=i(15595),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},32632:function(e,t,i){var r=i(23278),n=i(14142),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},79241:function(e,t,i){var r=i(23278),n=i(39578),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},14815:function(e,t,i){var r=i(23278),n=i(53424),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},53513:function(e,t,i){var r=i(23278),n=i(19938),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},85287:function(e,t,i){var r=i(23278),n=i(20634),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},64705:function(e,t,i){var r=i(23278),n=i(83895),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},3957:function(e,t,i){var r=i(23278),n=i(11121),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},55557:function(e,t,i){var r=i(23278),n=i(97314),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},9431:function(e,t,i){var r=i(23278),n=i(3722),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},37487:function(e,t,i){var r=i(23278),n=i(9090),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},77489:function(e,t,i){var r=i(23278),n=i(67062),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},61933:function(e,t,i){var r=i(23278),n=i(79894),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},56367:function(e,t,i){var r=i(23278),n=i(3876),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},14200:function(e,t,i){var r=i(23278),n=i(70),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},74089:function(e,t,i){var r=i(23278),n=i(26492),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},94771:function(e,t,i){var r=i(23278),n=i(18514),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},43626:function(e,t,i){var r=i(23278),n=i(69115),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},75843:function(e,t,i){var r=i(23278),n=i(6937),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},5541:function(e,t,i){var r=i(23278),n=i(22499),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},94168:function(e,t,i){var r=i(23278),n=i(86190),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},3308:function(e,t,i){var r=i(23278),n=i(34963),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},70184:function(e,t,i){var r=i(23278),n=i(19502),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},28529:function(e,t,i){var r=i(23278),n=i(80941),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},6472:function(e,t,i){var r=i(23278),n=i(86995),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},73034:function(e,t,i){var r=i(23278),n=i(88244),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},30987:function(e,t,i){var r=i(23278),n=i(26536),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},22336:function(e,t,i){var r=i(23278),n=i(73212),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},65501:function(e,t,i){var r=i(23278),n=i(14366),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},84472:function(e,t,i){var r=i(23278),n=i(84489),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},44651:function(e,t,i){var r=i(23278),n=i(43178),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},46427:function(e,t,i){var r=i(23278),n=i(90427),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},62508:function(e,t,i){var r=i(23278),n=i(96332),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},61147:function(e,t,i){var r=i(23278),n=i(95914),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},54961:function(e,t,i){var r=i(23278),n=i(47504),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},89148:function(e,t,i){var r=i(23278),n=i(56669),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},69030:function(e,t,i){var r=i(23278),n=i(94710),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},51482:function(e,t,i){var r=i(23278),n=i(15089),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},502:function(e,t,i){var r=i(23278),n=i(55789),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},71063:function(e,t,i){var r=i(23278),n=i(22025),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},93145:function(e,t,i){var r=i(23278),n=i(62320),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},83322:function(e,t,i){var r=i(23278),n=i(7316),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},82758:function(e,t,i){var r=i(23278),n=i(5967),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},40717:function(e,t,i){var r=i(23278),n=i(27263),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},51343:function(e,t,i){var r=i(23278),n=i(8012),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},60047:function(e,t,i){var r=i(23278),n=i(57084),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},79034:function(e,t,i){var r=i(23278),n=i(98473),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},61758:function(e,t,i){var r=i(23278),n=i(34113),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},46458:function(e,t,i){var r=i(23278),n=i(41627),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},33015:function(e,t,i){var r=i(23278),n=i(1519),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},9304:function(e,t,i){var r=i(23278),n=i(47346),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},86531:function(e,t,i){var r=i(23278),n=i(78323),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},27246:function(e,t,i){var r=i(23278),n=i(93652),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},13965:function(e,t,i){var r=i(23278),n=i(24136),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},88790:function(e,t,i){var r=i(23278),n=i(55666),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},10403:function(e,t,i){var r=i(23278),n=i(56526),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},48634:function(e,t,i){var r=i(23278),n=i(1742),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},89385:function(e,t,i){var r=i(23278),n=i(73681),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},68906:function(e,t,i){var r=i(23278),n=i(77443),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},15451:function(e,t,i){var r=i(23278),n=i(86030),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},31651:function(e,t,i){var r=i(23278),n=i(41001),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},1220:function(e,t,i){var r=i(23278),n=i(7121),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},90746:function(e,t,i){var r=i(23278),n=i(51173),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},48137:function(e,t,i){var r=i(23278),n=i(64755),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},55946:function(e,t,i){var r=i(23278),n=i(98793),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},90873:function(e,t,i){var r=i(23278),n=i(89247),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},92933:function(e,t,i){var r=i(23278),n=i(34400),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},25409:function(e,t,i){var r=i(23278),n=i(23166),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},88028:function(e,t,i){var r=i(23278),n=i(52018),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},35431:function(e,t,i){var r=i(23278),n=i(80152),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},24273:function(e,t,i){var r=i(23278),n=i(5840),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},21793:function(e,t,i){var r=i(23278),n=i(72588),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},21317:function(e,t,i){var r=i(23278),n=i(95903),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},53736:function(e,t,i){var r=i(23278),n=i(28692),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},99098:function(e,t,i){var r=i(23278),n=i(24799),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},45394:function(e,t,i){var r=i(23278),n=i(50623),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},9318:function(e,t,i){var r=i(23278),n=i(62175),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},26084:function(e,t,i){var r=i(23278),n=i(26848),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},26727:function(e,t,i){var r=i(23278),n=i(118),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},21051:function(e,t,i){var r=i(23278),n=i(18174),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},36346:function(e,t,i){var r=i(23278),n=i(99398),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},45617:function(e,t,i){var r=i(23278),n=i(58352),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},54367:function(e,t,i){var r=i(23278),n=i(26919),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},3097:function(e,t,i){var r=i(23278),n=i(17861),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},87665:function(e,t,i){var r=i(23278),n=i(65944),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},61415:function(e,t,i){var r=i(23278),n=i(65775),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},8238:function(e,t,i){var r=i(23278),n=i(82212),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},28750:function(e,t,i){var r=i(23278),n=i(29119),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},19929:function(e,t,i){var r=i(23278),n=i(80087),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},13617:function(e,t,i){var r=i(23278),n=i(51207),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},47875:function(e,t,i){var r=i(23278),n=i(3193),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},96072:function(e,t,i){var r=i(23278),n=i(56235),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},87098:function(e,t,i){var r=i(23278),n=i(30948),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},35074:function(e,t,i){var r=i(23278),n=i(3359),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},94995:function(e,t,i){var r=i(23278),n=i(59013),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},12813:function(e,t,i){var r=i(23278),n=i(51032),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},12857:function(e,t,i){var r=i(23278),n=i(48283),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},80602:function(e,t,i){var r=i(23278),n=i(35965),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},17272:function(e,t,i){var r=i(23278),n=i(84241),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},45525:function(e,t,i){var r=i(23278),n=i(84259),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},64712:function(e,t,i){var r=i(23278),n=i(95679),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},50153:function(e,t,i){var r=i(23278),n=i(78823),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},90661:function(e,t,i){var r=i(23278),n=i(57943),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},72359:function(e,t,i){var r=i(23278),n=i(11447),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},83639:function(e,t,i){var r=i(23278),n=i(23845),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},64176:function(e,t,i){var r=i(23278),n=i(36902),a={insert:"head",singleton:!1};r(n=n.__esModule?n.default:n,a);e.exports=n.locals||{}},91089:function(e,t,i){"use strict";let r;i.r(t),i.d(t,{applicationContext:function(){return n}});const n={get SearchQueryData(){return r},set SearchQueryData(e){r=e}}},35479:function(e,t,i){"use strict";i(28413);var r=i(27529),n=i(63205),a=i(89867);i(69897),i(47193),i(74581),i(33730),(0,r.Z)();const s=(0,a.getBentoUrlFromLegacyUrl)(document.location.hash,document.location.search);function o(){rangy&&!rangy.initialized&&rangy.init();const e=l();!function(e){const t=function(e,t){const i=[];_.each(e,((e,t)=>_.isEmpty(e)&&i.push(t)));const r=_.omit(e,[...t,...i]);r.return_to&&(r.return_to=function(e){const t=new RegExp(["javascript"].join("|"),"gi");return e.replace(t,"")}(r.return_to));const n=_.map(r,((e,t)=>"newui"===t?t:`${t}=${encodeURIComponent(e)}`)).join("&");return n?"?"+n:""}(e,["asid","canRememberMfa","forgotPassword","mfa_status","reason","qrUrl","showLogoutMessage"]);window.history.pushState({},"",window.location.href.replace(window.location.search,t))}(e);new(i(63799))({el:$("#bento"),params:e});window.initialViewLoad=new Date,window.performanceLogger=new n.PerformanceLogger}function l(){return location.search.length>0?function(e){"?"===e[0]&&(e=e.slice(1));const t={};return e.split("&").forEach((e=>{const i=e.split("=");t[i[0]]=decodeURIComponent(i[1])})),t}(location.search):{}}!function(){const e=l().next;"string"==typeof e&&e.trim()&&(window.shouldDelayLoad=!0)}(),function e(){window.shouldDelayLoad?window.loadApp=e:s?(window.addEventListener("hashchange",o),window.location.href=`${window.location.protocol}//${window.location.host}/ui/${s}`):o()}()},11671:function(e,t,i){"use strict";i.r(t),i.d(t,{destroyWhitelistTable:function(){return p},renderTable:function(){return d},renderWhitelistTable:function(){return u}});var r=i(21902),n=i(5350),a=i(63541),s=i(53513),o=i.n(s),l=i(13851);class c extends r.Component{constructor(){super(...arguments),this.getTableData=e=>{let t=[];return e&&(t=_.map(e,(e=>({cidr:e.entity,description:e.description})))),t},this.onWhitelistTableRowClick=e=>{this.props.data.editItem(e)}}render(){const e=[{field:"cidr",headerName:l.j.get("account.WHITELIST_TABLE_HEADER_CIDR"),cellRendererFramework:e=>r.createElement("span",{"data-sumo-test":"table-allowlist-cidr-rows"},e.value)},{field:"description",headerName:l.j.get("account.WHITELIST_TABLE_HEADER_DESCRIPTION"),cellRendererFramework:e=>r.createElement("span",{"data-sumo-test":"table-allowlist-description-rows"},e.value)}],t=this.getTableData(this.props.data.swItems);return r.createElement("div",null,r.createElement(a.SearchTable,{className:o().tableContainerStyle,columnOptions:e,data:t,searchOptions:{isEnabled:!0,searchPlaceHolderText:l.j.get("account.WHITELIST_TABLE_PLACEHOLDER_SEARCH"),searchInputProps:{"data-sumo-test":"allowlist-search-input"},clearIconProps:{"data-sumo-test":"allowlist-search-input-clear-icon"}},gridOptions:{paginationPageSize:25,onRowClicked:e=>this.onWhitelistTableRowClick(e),rowActionConfig:{isEnabled:!0,actions:{delete:{show:!0,icon:"trash",onClick:(e,t)=>this.props.data.deleteItem(e,t)}}}}}))}}function d(e,t){const i=document.getElementById(t);i&&n.render(r.createElement(c,{data:e}),i)}function u(e,t){if(!e||!t)return null;d(e,t)}function p(e){n.unmountComponentAtNode(e)}},44801:function(e,t,i){"use strict";i.d(t,{a:function(){return c}});var r=i(21902),n=i(63541),a=i(73034),s=i.n(a),o=i(43472),l=i.n(o);const c=({value:e,enabled:{icon:t="check-circle",color:i="keroppi",hint:a=""}={},disabled:{icon:o="exclamation-circle",color:c="chili",hint:d=""}={},tableMode:u})=>r.createElement("div",{className:l()(s().enabledRuleIcon,{[s().tableMode]:u})},r.createElement(n.Tooltip,{title:e?a:d,placement:"top"},r.createElement(n.Icon,{name:e?t:o,color:e?i:c,"data-sumo-test":e?"enabled-icon":"disabled-icon"})))},57755:function(e,t,i){"use strict";i.d(t,{A:function(){return d},u:function(){return l}});var r=i(89323),n=i(52320),a=i(10788),s=i(78470),o=i(60567);const l={getHomeTabs(){const e=r.Zn;if(a.currentUserHelper.hasFeatureFlag("UIHomeQuickQueries")||delete r.Zn[0].components.home6,!a.currentUserHelper.hasFeatureFlag("UIRootCauseExplorerPage")){const e=r.Zn[0].components.home1.config.tiles,t=e.findIndex((({id:e})=>e===s.Py.NEW_ROOT_CAUSE));-1!==t&&e.splice(t,1)}return(0,o.isKansoEnabled)()&&delete r.Zn[0].layout.header,n.$q.when(e)}};var c=i(38589);const d={logUserAction:e=>{c.G.userTelemetry({module:"home",component:"homeLogService",action:e.action,params:Object.assign({context:"HOME_USER_ACTION"},e)}).catch(_.noop)}}},89323:function(e,t,i){"use strict";i.d(t,{Ry:function(){return y},MZ:function(){return v},AA:function(){return f},Zn:function(){return _}});var r=i(78470),n=i(16471),a=i(88097);const s=i(35946),o=i(57743),l=i(94621),c=i(79302),d=i(19886),u=i(21888),p=i(98688),h=i(82327),m=i(2717),g={home1:{width:24,height:3,minHeight:3,minWidth:4,static:!0},home2:{width:12,height:7,minHeight:6,minWidth:4,maxHeight:10},home3:{width:12,height:7,minHeight:6,minWidth:4,maxHeight:10},homeRecentMetrics:{width:12,height:7,minHeight:6,minWidth:4,maxHeight:10},home4:{width:12,height:7,minHeight:6,minWidth:4,maxHeight:10},home5:{width:12,height:7,minHeight:6,minWidth:4,maxHeight:10},home6:{width:12,height:7,minHeight:6,minWidth:4,maxHeight:10}},y=[{id:"learn1",x:0,y:0,width:24,height:6},{id:"learn2",x:0,y:6,width:8,height:8},{id:"learn3",x:8,y:6,width:8,height:8},{id:"learn4",x:16,y:6,width:8,height:8}],v=[{id:"infoPanel1",x:0,y:0,width:8,height:6},{id:"infoPanel2",x:8,y:0,width:8,height:6},{id:"infoPanel3",x:16,y:0,width:8,height:6}],f={id:"skilljarCertificateHeader",name:"SkilljarCertificateHeader",config:{}},_=[{id:"home",title:"home.home",layout:{id:"home.home",type:a.LayoutTypes.Grid,version:1,header:{id:"homeWelcome",name:r.YJ.HOME_HEADER,config:{}},defaultDimensions:g,containers:[Object.assign({id:"home1",x:0,y:0},g.home1),Object.assign({id:"home2",x:0,y:3},g.home2),Object.assign({id:"home3",x:12,y:3},g.home3),Object.assign({id:"homeRecentMetrics",x:12,y:24},g.homeRecentMetrics),Object.assign({id:"home4",x:0,y:10},g.home4),Object.assign({id:"home5",x:12,y:10},g.home5),Object.assign({id:"home6",x:0,y:17},g.home6)]},components:{home1:{id:"bentoShortcuts",name:r.YJ.HOME_TILE_GRID,label:"home.shortcutButtons",config:{isBig:!1,tiles:[{id:r.Py.NEW_LOG_SEARCH,img:"core:search-view-icon",size:"extralarge"},{id:r.Py.NEW_METRICS,img:"core:metrics-view-icon",size:"extralarge",privilege:"MetricsAccess"},{id:r.Py.TRACE_ANALYTICS,img:"core:traces-view-icon",size:"extralarge",privilege:"TraceAnalyticsAccess"},{id:r.Py.NEW_LIVE_TAIL,img:"core:livetail-view-icon",size:"extralarge"},{id:r.Py.NEW_EXPLORE,img:"core:explorer-view-icon",size:"extralarge"},{id:r.Py.NEW_DASHBOARD,img:"core:new-dashboard-view-icon",size:"extralarge"},{id:r.Py.NEW_ROOT_CAUSE,img:"core:anomalies",size:"extralarge"},{id:r.Py.SETUP_WIZARD,img:"core:setup-wizard",size:"extralarge",permission:"MANAGE_COLLECTORS"}]}},home2:{id:"recentDashboards",label:"content.recentlyOpenedDashboards",name:r.YJ.RECENT_DASHBOARDS_LIST_CARD,config:{limit:25,type:"RECENT_DASHBOARDS_LIST_CARD",headerDataSumo:"recentDashboards"}},home3:{id:"recentSearches",label:"content.recentlyRunSearches",name:r.YJ.RECENT_SEARCHES_LIST_CARD,config:{limit:25,type:"RECENT_SEARCHES_LIST_CARD",headerDataSumo:"recentSearches"}},homeRecentMetrics:{id:"recentMetrics",label:"content.recentlyRunMetrics",name:r.YJ.RECENT_METRICS_LIST_CARD,config:{headerDataSumo:"recentMetrics"}},home4:{id:"recommendedDashboards",label:"content.recommendedDashboards",name:r.YJ.RECOMMENDED_DASHBOARDS_LIST_CARD,config:{limit:25,type:"RECOMMENDED_DASHBOARDS_LIST_CARD",headerDataSumo:"recommendedDashboards"}},home5:{id:"pinnedSearches",label:"content.pinnedSearches",name:r.YJ.PINNED_SEARCH_LIST,config:{limit:25,type:"PINNED_SEARCH_LIST",headerDataSumo:"pinnedSearches"}},home6:{id:"quickQueries",label:"content.quickQueries",name:r.YJ.QUICK_QUERIES_LIST_CARD,config:{queries:n.QUICK_QUERIES,headerDataSumo:"quickQueries"}}}},{id:"learn",title:"home.learn",layout:{id:"home.learn",type:a.LayoutTypes.Grid,version:1,isStatic:!0,containers:[{id:"learn1",x:0,y:0,width:24,height:14},{id:"learn4",x:0,y:24,width:24,height:4}]},components:{learn1:{id:"learnVideos",name:r.YJ.LEARN_VIDEO,config:{cardTitle:"home.quickStartVideos",playlistId:"PLuHsjJUxgM1fBIit-FnUKSdSi_Ey_GHTB"}},learn4:{id:"supportShortcuts",name:r.YJ.HOME_TILE_GRID,config:{tiles:[{id:r.Py.CHEAT_SHEET,img:"home:cheatsheet",size:"extralarge",link:"https://help.sumologic.com/Search/Search_Cheat_Sheets/Search-Operators-Cheat-Sheet"},{id:r.Py.DOCS,img:"home:documentation",size:"extralarge",link:"https://help.sumologic.com"},{id:r.Py.WHATS_NEW,img:"home:whats-new",size:"extralarge",link:"https://www.sumologic.com/whats-new/"},{id:r.Py.ASK_FOR_SUPPORT,img:"home:ask-for-support",size:"extralarge",link:"https://support.sumologic.com"},{id:r.Py.GET_TRAINING,img:"home:get-training",size:"extralarge",link:"https://www.sumologic.com/learn/training/"},{id:r.Py.COMMUNITY,img:"home:community",size:"extralarge",link:"https://support.sumologic.com/hc/en-us/community/topics"}]}}}},{id:"certification",title:"home.certCertification",layout:{id:"home.certCertification",type:a.LayoutTypes.Grid,version:1,isStatic:!0,header:{id:"certificationsHeader",name:"CertificateHeader",config:{}},containers:[{id:"certification1",x:0,y:0,width:6,height:12},{id:"certification2",x:6,y:0,width:6,height:12},{id:"certification3",x:12,y:0,width:6,height:12},{id:"certification4",x:18,y:0,width:6,height:12},{id:"certification5",x:0,y:12,width:6,height:12},{id:"certification7",x:6,y:12,width:6,height:12}]},components:{infoPanel1:{id:"improveSkillsInfoPanel",name:"InfoPanel",config:{iconSrc:h,heading:"certificate.skillsHeading",text:"certificate.skillsText"}},infoPanel2:{id:"advanceCareerInfoPanel",name:"InfoPanel",config:{iconSrc:p,heading:"certificate.careerHeading",text:"certificate.careerText"}},infoPanel3:{id:"joinCommunityInfoPanel",name:"InfoPanel",config:{iconSrc:m,heading:"certificate.communityHeading",text:"certificate.communityText"}},certification1:{id:"proUserCertification",name:"CertificateContainer",config:{id:"1",headerImageUrl:s,level:1,description:"home.certLevel1Desc",examDetails:{numQuestions:30,time:60},prepDetails:{details:[{id:"1",text:"home.certQuickstartWebinar",linkUrl:"https://www.sumologic.com/video/sumo-logic-quickstart-webinar-1903/"},{id:"2",text:"home.certTutorial",linkUrl:"https://help.sumologic.com/Start-Here/Quick-Start-Tutorials/Using_Sumo_Logic_Tutorial"}]},footerText:"home.certValidDurationTwoYears",examButtons:[{text:"home.selfPacedCourse",testId:"148",color:"secondary"},{text:"home.certTakeExam",testId:"132"}],learnMore:{text:"home.certLearnMore",learnMoreText:"home.certLevel1LearnMore"}}},certification2:{id:"powerUserCertification",name:"CertificateContainer",config:{id:"2",headerImageUrl:o,level:2,description:"home.certLevel2Desc",examDetails:{numQuestions:30,time:60},prepDetails:{details:[{id:"3",text:"home.certUsingSumoWebinar",linkUrl:"https://www.sumologic.com/video/level-2-certification-using-sumo-logic/"},{id:"4",text:"home.certHomeHandsOn",linkUrl:"https://help.sumologic.com/01Start-Here/Quick-Start-Tutorials/Hands-on_Labs%3A_Using_Sumo_Logic/00Introduction"}]},footerText:"home.certValidDurationOneYear",examButtons:[{text:"home.selfPacedCourse",testId:"154",color:"secondary"},{text:"home.certTakeExam",testId:"134"}],learnMore:{text:"home.certLearnMore",learnMoreText:"home.certLevel2LearnMore"}}},certification3:{id:"powerAdminCertification",name:"CertificateContainer",config:{id:"3",headerImageUrl:l,level:3,description:"home.certLevel3Desc",examDetails:{numQuestions:30,time:60},prepDetails:{details:[{id:"5",text:"home.certSettingUpSumoWebinar",linkUrl:"https://www.sumologic.com/video/sumo-logic-power-admin-cert-jam/"},{id:"6",text:"home.certTutorial",linkUrl:"https://help.sumologic.com/Start-Here/Quick-Start-Tutorials/Set-Up-Sumo-Logic-Tutorial"}]},footerText:"home.certValidDurationOneYear",examButtons:[{text:"home.selfPacedCourse",testId:"157",color:"secondary"},{text:"home.certTakeExam",testId:"135"}],learnMore:{text:"home.certLearnMore",learnMoreText:"home.certLevel3LearnMore"}}},certification4:{id:"securityCertification",name:"CertificateContainer",config:{id:"4",headerImageUrl:c,level:4,description:"home.certLevel4Desc",examDetails:{numQuestions:30,time:60},prepDetails:{details:[{id:"7",text:"home.certSecurityPrep",linkUrl:"https://www.sumologic.com/video/sumo-logic-security-power-user-cert-jam/"},{id:"8",text:"home.certHomeHandsOn",linkUrl:"https://help.sumologic.com/01Start-Here/Quick-Start-Tutorials/Hands-on_Labs%3A_Security_Analytics/00Introduction"}]},footerText:"home.certValidDurationOneYear",examButtons:[{text:"home.certTakeExam",testId:"136"}],learnMore:{text:"home.certLearnMore",learnMoreText:"home.certLevel4LearnMore"}}},certification5:{id:"advanceMetricsWithK8s",name:"CertificateContainer",config:{id:"5",headerImageUrl:d,level:5,description:"home.certLevel5Desc",examDetails:{numQuestions:30,time:60},prepDetails:{details:[{id:"9",text:"home.montitoringWithK8s",linkUrl:"https://help.sumologic.com/?cid=09052019"}]},footerText:"home.certValidDurationOneYear",examButtons:[{text:"home.certTakeExam",testId:"151"}],learnMore:{text:"home.certLearnMore",learnMoreText:"home.certLevel5LearnMore"}}},certification7:{id:"metricsMastery",name:"CertificateContainer",config:{id:"7",headerImageUrl:u,level:7,description:"home.certLevel7Desc",examDetails:{numQuestions:30,time:60},prepDetails:{details:[{id:"13",text:"home.prepMetricsMastery",linkUrl:"https://help.sumologic.com/?cid=081520192"}]},footerText:"home.certValidDurationOneYear",examButtons:[{text:"home.certTakeExam",testId:"150"}],learnMore:{text:"home.certLearnMore",learnMoreText:"home.certLevel7LearnMore"}}}}}]},34431:function(e,t,i){"use strict";i.r(t),i.d(t,{addTabLayout:function(){return R},default:function(){return k},fetchContentType:function(){return w},getTabEntityCount:function(){return M},loadHomeTabs:function(){return A},onDragStop:function(){return O},onResizeStop:function(){return N},removeTabLayout:function(){return D},switchTab:function(){return C},tabLayoutChanged:function(){return I},updatePanelLoadingState:function(){return T}});var r=i(20646),n=i(78470),a=i(24481),s=i(20407),o=i(65688),l=i(76355);const c=new l.schema.Entity("homePanels"),d=new l.schema.Entity("layouts"),u=[new l.schema.Entity("homeTabs",{layout:d,components:new l.schema.Values(c)})];var p=i(10788),h=i(57755),m=i(91346),g=i(88097);function y(e){return(0,s.entityUpdated)("layouts",e.id,e)}var v=i(89323),f=i(60567);const S={[n.YJ.PINNED_SEARCH_LIST]:o.gX,[n.YJ.RECENT_SEARCHES_LIST_CARD]:o.YO,[n.YJ.RECOMMENDED_DASHBOARDS_LIST_CARD]:o.DU,[n.YJ.RECENT_DASHBOARDS_LIST_CARD]:o.ND};function b(e){return{type:r.z.HOME_SWITCH_TAB,payload:e}}function E(e){e(p.currentUserActions.updateUserSetting({key:"hasSeenLearnTab",value:!0}))}function T(e){return{type:r.z.CONTENT_LOADING_STATE,payload:e}}const x=()=>p.currentUserHelper.getUserSetting("hasSeenLearnTab");function C(e){return(t,i)=>{const r=i(),n=r.entities.homeTabs[e];n&&n.id!==(0,m.cZ)(r)&&(t(b({selectedTabId:e})),h.A.logUserAction({action:"HOME.SWITCH_TAB",target:n.id}),"learn"!==n.id||x()||E(t))}}function A(){return e=>h.u.getHomeTabs().then((t=>{const i=function(e){return(0,l.normalize)(e,u)}(t),s=x()?n.BR.HOME:n.BR.LEARN,o=(0,m.P1)();var c;_.forEach(i.entities.layouts,((e,t)=>{if(p.currentUserHelper.hasFeatureFlag("UIHomeLearnVideosGrid")||"home.learn"!==t){if(p.currentUserHelper.hasFeatureFlag("UISkilljarSSO")&&"home.certCertification"===t)e.containers=v.MZ,e.header=v.AA;else if(o[t]){e.containers=o[t];const i=e.containers.findIndex((e=>"home1"===e.id));if((0,f.isKansoEnabled)())-1!==i&&e.containers.splice(i,1);else if(-1===i){const t=v.Zn[0].layout.containers.find((e=>"home1"===e.id));t&&e.containers.unshift(t)}}}else e.containers=v.Ry})),e((0,a.QB)(i)),e((c=i,{type:r.z.TABS_LOAD_SUCCESS,payload:c.result})),e(b({selectedTabId:s})),x()||E(e)}))}function w(e){return t=>{t(T({[e.type]:{isFetching:!0}})),S[e.type](e.limit)(t).then((()=>{t(T({[e.type]:{isFetching:!1}}))}))}}const I=(e,t)=>i=>{i(y(e)),i(p.currentUserActions.updateUserSetting({key:"homeLayout",value:JSON.stringify({[e.id]:e.containers})})).catch((r=>{i((0,s.entityUpdated)("layouts",e.id,t))}))},R=(e,t,i)=>r=>{const n=(0,g.addToLayout)(e,t);r(I({id:t.id,containers:n},t)),h.A.logUserAction({action:"HOME.SHOW_PANEL",target:i})},D=(e,t,i)=>r=>{const n=(0,g.removeFromLayout)(e,t);r(I({id:t.id,containers:n},t)),h.A.logUserAction({action:"HOME.HIDE_PANEL",target:i})},O=(e,t,i,r)=>{h.A.logUserAction({action:"HOME.DRAG_PANEL",target:r,newPosX:t.x,newPosY:t.y,oldPosX:i.x,oldPosY:i.y})},N=(e,t,i,r)=>{h.A.logUserAction({action:"HOME.RESIZE_PANEL",target:r,newWidth:t.width,newHeight:t.height,oldWidth:i.width,oldHeight:i.height})};function M(e){return(t,i)=>{var r,n;const a=i(),s=a.entities.homeTabs.home.components[e];return null!==(n=null===(r=a.entityResults[s])||void 0===r?void 0:r.length)&&void 0!==n?n:25}}const k={loadHomeTabs:A,switchTab:C,tabLayoutChanged:I,addTabLayout:R,removeTabLayout:D,getTabEntityCount:M}},91346:function(e,t,i){"use strict";i.d(t,{P1:function(){return a},cZ:function(){return l},I0:function(){return p}});var r=i(72650),n=i(10788);const a=()=>n.currentUserHelper.getUserSetting("homeLayout")||{},s=e=>e.entities.homeTabs,o=e=>e.views.home,l=(0,r.createSelector)([o],(e=>e.selectedTabId)),c=(0,r.createSelector)([o,s,e=>e.entities.homePanels,e=>e.entities.layouts],((e,t,i,r)=>{const n=t[e.selectedTabId];if(n){const e=r[n.layout];return Object.assign(Object.assign({},n),{components:_.mapObject(n.components,(e=>i[e])),layout:e})}})),d=(0,r.createSelector)([o],(e=>e.tabs)),u=(0,r.createSelector)([d,s],((e=[],t)=>e.map((e=>t[e])))),p=(0,r.createSelector)([u,c,e=>e.views.home.components],((e,t,i)=>({tabs:e,selectedTab:t,homeComponents:i})))},64596:function(e,t,i){"use strict";i.r(t),i.d(t,{EVENT:function(){return n},MARKS:function(){return a},MEASUREMENTS:function(){return s}});var r=i(16471);const n=Object.assign(Object.assign({},r.EVENT),{module:"DataForwarding",component:"allDestinationController"}),a=r.MARKS,s=r.MEASUREMENTS},59151:function(e,t,i){"use strict";i.d(t,{m:function(){return r},J:function(){return n}});const r={EVENT_NAMES:{TOGGLE_METRICS_ICONS:"toggleMetricsIcons"},MAX_QUERY_ROWS:6,TOKEN_TYPES:{DIMENSION_KEY:"dimension",DIMENSION_VALUE:"value"},AUTOCOMPLETE_CONTENT_TYPE:{DIMENSION_KEY:"Dimension Key",DIMENSION_VALUE:"Dimension Value",DIMENSION_KEY_OR_GRAPHITE_ID:"Dimension Key or Graphite Id",AGGREGATOR_FUNCTION:"Aggregator Function",AGGREGATION_KEY:"Aggregation Key",METRIC_VALUE:"Metric Value"},AGGREGATION_FUNCTIONS:["avg","sum","min","max"],AUTOCOMPLETE_HEADERS:{AGGREGATE_KEY:"GROUP BY",DIMENSION_KEY:"TAGS",DIMENSION_VALUE:"VALUES",FUNCTIONS:"FUNCTIONS",GRAPHITE_METRICS:"MATCHING METRICS",GRAPHITE_SEGMENT:"GRAPHITE",METRIC_NAME:"METRICS"},QUERY_ROW_ID_EMPTY:"",ERROR_TYPES:{ERROR:"error",WARNING:"warning",SUGGESTION:"suggestion"}},n=e=>String.fromCharCode(65+e)},88080:function(e,t,i){"use strict";i.d(t,{U:function(){return r}});class r{static getEntityFromStore(e,t,i){return i.get("entities").get(e).get(t)}static getUIEntityFromStore(e,t,i){return i.get("ui").get(e).get(t)}static getHistoryFromStore(e,t,i){return i.get("history").get(e).get(t)}static getEntityObservable(e,t,i,n,a=Immutable.is){return i.legacy$.map((i=>r.getEntityFromStore(e,t,i))).distinctUntilChanged(n,a)}static getUIEntityObservable(e,t,i){return i.legacy$.map((i=>r.getUIEntityFromStore(e,t,i))).distinctUntilChanged(void 0,Immutable.is)}static getHistoryObservable(e,t,i){return i.legacy$.map((i=>r.getHistoryFromStore(e,t,i))).distinctUntilChanged().map((e=>_.isUndefined(e)?void 0:e.peek()))}}},78042:function(e,t,i){"use strict";i.r(t),i.d(t,{infoTypePageRender:function(){return o},infoTypeAppLoadTime:function(){return l},fFMetadataCount:function(){return c},HeimdallDataHandler:function(){return p},isApplicationLoadMeasured:function(){return h}});var r=i(63205),n=i(41197),a=i(10788),s=i(38589);const o="pageRender",l="appLoad",c=15;let d=!1;const u=window.requestIdleCallback||(e=>{window.setTimeout(e,1)});class p{constructor(){this.onData=e=>{if(this.calculateAndSendDelayed(e),e.type===l&&e.data.loadDetails.metadata.tabActive){const t=this.getSimpleSLIScore(e.data),i=this.getSLIScore(e.data),r=this.getSLIScoreWithoutNetworkScaling(e.data);s.G.userTelemetry(["[sloDynamicPropName=bento_app_load_slo]","[componentName=UiLoadPerformance]",`[networkSpeed=${e.data.networkSpeed}]`,`[measurement=${i}]`,`[measurementWithoutNetworkScaling=${r}]`,`[measurementSimple=${t}]`].join(" ")),Number.isFinite(i)&&n.sliService.sendSLI({measurement:i,sloDynamicPropName:"bento_app_load_slo",componentName:"UiLoadPerformance"})}}}wasInitiallyLoggedIn(e){return!e.loadDetails.metadata.login.loginPageShowDuration}getSimpleSLIScore(e){return e.simpleAppLoadTime}getSLIScoreWithoutNetworkScaling(e){return e.totalAppLoadTime}getSLIScore(e){const{domContentLoadTime:t,appSetupJSTime:i}=e.loadDetails.aspects,{jsDomContentLoadTime:r}=e.loadDetails.metadata.domContentLoad,{totalAppLoadTime:n,cacheRatio:s,networkSpeed:o}=e,l=parseInt(a.currentUserHelper.getDynamicProperty("app_load_sli_network_speed_threshold"));return(t-r)*(o>l?l:o)/(l*(1-s))+r+(n-(t+i))*o/l+i}calculateAndSendDelayed(e){u((()=>{this.calculateAndSend(e)}))}calculateAndSend(e){const t=this.getFormattedLogData(e);t&&s.G.userTelemetry(t);const i=this.getMetricDatapoints(e);i&&(location.hostname.endsWith("localhost")||(0,n.sendDatapoints)(i).catch((e=>{setTimeout((()=>{throw e}))})))}getMetricDatapoints(e){if(e.type===l){const{data:t}=e,i=this.wasInitiallyLoggedIn(t)?"logged_in":"logged_out",r=location.pathname.replace(/index\.html$/,"");let n;return n=0===t.cacheRatio?"uncached":1===t.cacheRatio?"cached":"partially_cached",[{dimensions:{cache_state:n,login_state:i,host:location.host,tab_active:`${t.loadDetails.metadata.tabActive}`,path:r,metric:"ui_total_app_load_time"},value:t.totalAppLoadTime,timestamp:Date.now()}]}}getFormattedLogData(e){return e.type===o?this.processPageRenderInfo(e):e.type===l?(d=!0,this.processAppLoadInfo(e.data)):""}processPageRenderInfo(e){return JSON.stringify({heimdallAnalysis:e})}processAppLoadInfo(e){const t=r.UrlHelper.isPoppedOutDashboard()?"DASHBOARD":"BENTO",i=`${e.noSizeSupport?"COUNTCACHED":"CACHED"}:${e.cacheRatio}`,n=`NETWORK_SPEED:${e.networkSpeed}`,a=`TOTAL:${e.totalAppLoadTime}`,{unknownLoginFlow:s}=e.loadDetails.metadata.login,o="LOGGED"+(this.wasInitiallyLoggedIn(e)?"IN":"OUT"),l=this.getLoadAspectsLogLine(e.loadDetails);let c="";if(!s){c=`${`SUMO_UI_LOAD_TIME:${t}`}:${`${o}:${i}:${n}`}:${l}:${a}`}return c}getLoadAspectsLogLine(e){return`${Object.keys(e.aspects).reduce(((t,i)=>`${t}:LOAD_ASPECT_${i}:${e.aspects[i]}`),"")}:loadMetadata:${JSON.stringify(e.metadata)}`}}function h(){return d}},92826:function(e,t,i){"use strict";i.d(t,{FH:function(){return r},rV:function(){return n},Se:function(){return a},Uh:function(){return s},vG:function(){return o},G5:function(){return l},fb:function(){return c},Qw:function(){return d},jb:function(){return u},P1:function(){return p},tx:function(){return h}});const r={USERS_TAB_CONTENT_CONTAINER:"usersTabContentContainer",ROLES_TAB_CONTENT_CONTAINER:"rolesTabContentContainer",USERS_SIDEBAR_HEADER_COMPONENT:"usersSidebarHeaderComponent",USERS_SIDEBAR_CUSTOM_COMPONENT:"usersSidebarCustomComponent",USERS_CUSTOM_DELETE_COMPONENT:"usersCustomDeleteComponent",USERS_CUSTOM_DESTRUCTIVE_DELETE_COMPONENT:"usersCustomDestructiveDeleteComponent",USERS_CUSTOM_DELETE_V2_COMPONENT:"usersCustomDeleteV2Component",ROLES_SIDEBAR_HEADER_COMPONENT:"rolesSidebarHeaderComponent",ROLES_SIDEBAR_CUSTOM_COMPONENT:"rolesSidebarCustomComponent",ACTIVATE_DEACTIVATE_DIALOG:"activateDeactivateDialog",USERS_RESET_PASSWORD_DIALOG_COMPONENT:"usersResetPasswordDialogComponent",USERS_CHANGE_EMAIL_DIALOG_COMPONENT:"usersChangeEmailDialogComponent",ROLES_ASSIGNED_USERS_DIALOG_COMPONENT:"rolesAssignedUsersDialogComponent",CUSTOM_ROLE_DELETE_DIALOG:"customRoleDeleteDialog"},n={USERS:"/api/v1/users",ROLES:"/api/v1/roles"},a={USERS:"megaUsers",ROLES:"megaRoles"},s={USERS:"views."+a.USERS,ROLES:"views."+a.ROLES},o={VIEW:"sidebarModes.view",EDIT:"sidebarModes.edit",ADD:"sidebarModes.add"},l={ACTIVATE:"activate",DEACTIVATE:"deactivate",RESET_PASSWORD:"reset_password",CHANGE_EMAIL:"change_email",UNLOCK_USER:"unlock_user",DISABLE_TWO_STEP_VERIFICATION:"disable_two_step_verification"};var c,d;!function(e){e.ACTIVATE="tableRowActionActivate",e.DEACTIVATE="tableRowActionsDeactivate",e.RESET_PASSWORD="tableRowActionResetPassword",e.CHANGE_EMAIL="tableRowActionChangeEmail",e.UNLOCK_USER="tableRowActionUnlockUser",e.DISABLE_TWO_STEP_VERIFICATION="tableDisableTwoStepVerification"}(c||(c={})),function(e){e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.DISABLE_TWO_STEP_VERIFICATION="disableTwoStepVerification"}(d||(d={}));const u="https://www.sumologic.com/privacy-statement/";var p,h;!function(e){e.USERS="users.addUserTitle",e.ROLES="roles.addRoleTitle"}(p||(p={})),function(e){e.QUESTION_CIRCLE="question-circle"}(h||(h={}))},27334:function(e,t,i){"use strict";i.r(t),i.d(t,{SumoAppController:function(){return eI},appModuleInfo:function(){return aI},initialize:function(){return nI},moduleServiceNames:function(){return Jw}});var r={};i.r(r),i.d(r,{addColumnToLeft:function(){return Fe},addColumnToRight:function(){return Pe},changeLookupTableCreationMode:function(){return Oe},changeMode:function(){return Me},deleteColumn:function(){return Ue},togglePrimaryKeyField:function(){return $e},updateCSVFileName:function(){return Ne},updateColumns:function(){return Le},updateContentItem:function(){return je},updateContentPath:function(){return qe},updateContentPathAfterMove:function(){return ze},updateHeaderName:function(){return Ve},updateState:function(){return Qe},updateTableData:function(){return We},updateUploadFile:function(){return ke},updateUploadProgress:function(){return He},updateValueType:function(){return Be}});var n={};i.r(n),i.d(n,{dispatchParserFetchSuccess:function(){return Wx},formStateReducer:function(){return Fx.O2},moveStateToStore:function(){return Hx},parserEditors:function(){return Fx.Mm},parsersReducer:function(){return Fx.Is},saveParser:function(){return Qx},selectParserEditorContainerState:function(){return Ce},toggleExpansionPanelIsExpanded:function(){return qx}});var a={};i.r(a),i.d(a,{addFactor:function(){return cC},fetchDataModel:function(){return nC},removeFactor:function(){return dC},saveDataModel:function(){return aC},updateFactorLabel:function(){return pC},updateFactorType:function(){return uC},updateFields:function(){return lC},updateFormFieldValue:function(){return hC},updateMappedSourceTypes:function(){return sC},updateModelFields:function(){return mC},updateRequiredFields:function(){return oC}});var s=i(89131),o=i.n(s),l=i(70099),c=i(28363),d=i(29435),u=i(52015),p=i(63193),h=i(92776);const m=(e,t)=>{const i="ngSrc",r="src";return t[0].link=(t,n,a)=>{a.$set(i,e.getTrustedUrl(a.ngSrc)),a.$observe(i,(e=>{if(!e)return;const t=window.dynamicPublicPath||"";t&&e.length>0&&!e.startsWith("http")?(a.$set(r,t+e),n.one("error",(()=>{a.$set(r,e)}))):a.$set(r,e)}))},t[0].compile=()=>t[0].link,t};var g=i(60567);class y{constructor(e,t,i,r,n,a,s,o,y,v,f,_,S,b){e.customFilter((e=>"MD-TOAST"===e.tagName)),f.trustedResourceUrlList(p.b);const E=new URLSearchParams(document.location.search),T=h.ENVIRONMENT.IS_DEV||E.has("debugAngularJS");a.debugInfoEnabled(T),a.commentDirectivesEnabled(!1),a.cssClassDirectivesEnabled(!1),a.aHrefSanitizationTrustedUrlList(/^\s*(https?|ftp|mailto|tel|file|slack):/),S.hashPrefix(""),b.errorOnUnhandledRejections(!1),s.disableAll(),i.throttle=100,n.openClass="is-open",r.setDefaults({plain:!1,className:"prada ngdialog-theme-sumo",overlay:!0,showClose:!0,closeByEscape:!0,closeByDocument:!1,appendTo:"body",cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,showOk:!0}),y.disableInkRipple(),d.V(l.xc,o),d.K(c.ZP,o),u.v(v),u.H(v,"home"),_.decorator("ngclipboardDirective",["$delegate",e=>{const t=e[0],i=t.link;return t.compile=()=>function(e,t){const r=g.browserHelperService.isCopySupported();if(r)return i.apply(this,arguments);t.css("display","none")},e}]),_.decorator("ngSrcDirective",["$sce","$delegate",m])}}y.$inject=["$animateProvider","$controllerProvider","resizeProvider","ngDialogProvider","uibDropdownConfig","$compileProvider","$mdGestureProvider","$mdThemingProvider","$mdInkRippleProvider","$mdIconProvider","$sceDelegateProvider","$provide","$locationProvider","$qProvider"];var v=i(93942),f=i(22443),S=i(11999),b=i(60512),E=i(66359),T=i(21902),x=i.n(T),C=i(67389);const A=()=>Promise.all([i.e(1654),i.e(5485),i.e(4776),i.e(8831)]).then(i.bind(i,24762)),w=()=>A().then((e=>({default:e.MonitorBrowserContainer}))),I=e=>x().createElement(C.F,{dynamicImportFn:w,moduleName:"unified-monitors",componentProps:e});var R=i(88097),D=i(63205),O=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};class N{constructor(e,t,r,n,a,o,l,c,d,u,p){this.searchWorkspaceViewService=e,this.workspaceOverlayService=t,this.currentUserHelper=n,this.workspacesService=a,this.metricsQueryRowNetworkService=o,this.$window=l,this.$q=c,this.setupWizardService=d,this.drilldownDashboardService=u,this.dashboardWorkspaceViewService=p,this.monitorAddedKey="bMonitorAdded",this.monitorUpdatedKey="bMonitorUpdated",this.initiateWindowCommunication=()=>{g.windowCommunicatorBaseService.initialize(),g.windowCommunicatorBaseService.getWindowMessages$().subscribe(this.handleExternalMessage)},this.onChangePassword=e=>{e.preventDefault();const t=this.currentUserHelper.get().requiresNewPassword;g.changePasswordService.open(t)},this.onDashboardCreated=(e,t,i)=>{this.onDashboardCreatedFn&&this.onDashboardCreatedFn(e,t,i)},this.blinkTitleForExternalMessage=e=>{const{focus:t}=g.windowCommunicatorService;switch(e){case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SEARCH_DRILL_DOWN:t(this.__.drilldown_search_alert_message);break;case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.DASHBOARD_DRILL_DOWN:t(this.__.drilldown_dashboard_alert_message);break;case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.METRICS_DRILL_DOWN:t(this.__.drilldown_metrics_alert_message)}},this.alertExternalMessage=e=>{switch(e){case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SEARCH_DRILL_DOWN:alert(this.__.drilldown_search_alert_message);break;case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.DASHBOARD_DRILL_DOWN:alert(this.__.drilldown_dashboard_alert_message);break;case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.METRICS_DRILL_DOWN:alert(this.__.drilldown_metrics_alert_message)}},this.handleExternalMessage=e=>{const{focus:t}=g.windowCommunicatorService;if(_.isFunction(this[e.name]))this.blinkTitleForExternalMessage(e.name),this[e.name].apply(this,[e.message]);else switch(e.name){case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SEARCH_DRILL_DOWN:t(this.__.drilldown_search_alert_message);break;case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.LOAD_SEARCH:t(this.__.loading_main_window);break;case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SIGN_OUT:return void this.$window.location.reload();case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SIGN_IN:return void(SumoApp.context.ajax.checkAsidCookieMatches()&&this.$window.location.reload());case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.FAVORITE_CHANGED:case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.LIVE_TAIL_UPDATE_PREFS:case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.LIVE_TAIL_STOP:case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.PANEL_UPDATED:case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.PANEL_ADDED:case g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SHOW_UPGRADE_WIZARD:break;default:$.logWarnLocal("UNHANDLED WINDOW COMMUNICATION MESSAGE",e)}},this.setOnDashboardCreatedFunction=e=>{this.onDashboardCreatedFn=e},this.sendBrowserMessage=(e,t)=>{let i=!1;"WebKit"===$.ua.engine.name&&(t.message.skipAlert=!0,i=!0);const r=g.windowCommunicatorBaseService.findWindow(e);return!(!r||i)&&(t.to=r.windowId,g.windowCommunicatorBaseService.message(t))},this.sendLiveTailPopOut=e=>{const t={type:g.WINDOW_COMMUNICATION_CONSTANTS.WINDOW_TYPES.LIVE_TAIL,entityId:Date.now()},i={name:g.WINDOW_COMMUNICATION_CONSTANTS.COMMUNICATOR.MESSAGE_NAMES.LIVE_TAIL_POP_OUT,message:e};let r=D.UrlHelper.getLiveTailPopoutURL(t.entityId);if(this.currentUserHelper.getOrg().typeHelpers.isHeroku){const e=r.split("#");r=`${e[0]}&isHeroku&popout#${e[1]}`}g.windowCommunicatorService.sendMessageWithFallBack(t,i,r)},this.sendFocus=e=>{let t=!1;const i=g.windowCommunicatorBaseService.findWindow(e);return i&&(i.windowId===g.windowCommunicatorBaseService.getThisWindowId()?(this.focus(this.__.focus_message),t=!0):t=g.windowCommunicatorBaseService.message({name:g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.FOCUS,message:this.__.focus_message,to:i.windowId})),t},this.focus=e=>{g.windowCommunicatorService.focus(e)},this.sendSearchDrillDown=(e,t)=>{const i={type:g.WINDOW_COMMUNICATION_CONSTANTS.WINDOW_TYPES.BENTO},r={name:t?g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.METRICS_DRILL_DOWN:g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.SEARCH_DRILL_DOWN,message:_.extend({skipAlert:_.isUndefined(g.windowCommunicatorBaseService.findWindow(i))},e)},n=SumoUtil.getBentoURL();g.windowCommunicatorService.sendMessageWithFallBack(i,r,n)},this.searchDrillDown=(e,t=!1)=>{this.workspaceOverlayService.closeDialog(!1),this.workspacesService.getCurrent().handleSearchDrillDown({data:e,isMetrics:!1,fromMetricsSearch:t})},this.dashboardDrillDown=(e,t)=>{const i=this.workspacesService.getCurrent();return this.drilldownDashboardService.drilldownWithData(e,i,t)},this.dashboardDrilldownOnUpdate=(e,t)=>{const i=e[this.monitorAddedKey]?this.monitorAddedKey:this.monitorUpdatedKey;return this.dashboardDrillDown(e,{params:{changedPanelId:t,updateType:i},focusFunction:this.sendPanelUpdated,focusData:{panelId:t}}).then((r=>{const n={changedPanelId:t,updateType:i};return this.dashboardWorkspaceViewService.updateTempState(e.dashboardKey||e.dashboardId,n),r}))},this.getTrimmedOutlierMonitorQueries=(e,t)=>e.map((e=>e.query.includes(t)?{query:t,rowId:e.rowId}:e)),this.openSloEditorDialog=function({data:e,successMessage:t}){return O(this,void 0,void 0,(function*(){const r=document.getElementById("sumoapp-dialogs-container");if(!r)return;SumoUtil.blockPage();try{const[n,a]=yield Promise.all([Promise.all([i.e(1654),i.e(9792),i.e(5614),i.e(5485),i.e(5681)]).then(i.t.bind(i,30435,23)),i.e(5485).then(i.t.bind(i,63334,23))]);n.initI18n();const{isValid:s,message:o}=yield a.validateQueryInput(e);if(!s)return(0,R.showCriticalNotification)({variant:"critical",message:o,autoDismiss:!0}),void SumoUtil.unblockPage();SumoUtil.unblockPage(),a.openSloEditor(r,((e,i)=>O(this,void 0,void 0,(function*(){if(t&&(0,R.showCasualNotification)({message:t}),i)try{(yield A()).getMonitorEditorService().openEditor(document.getElementById("sumoapp-dialogs-container"),{initializationProps:{sloId:e.id,monitorType:"Slo"}})}catch(e){$.logError(`UIModuleLazyLoadError:unified-monitors:${e}`)}}))),"root","new",void 0,e)}catch(e){$.logError(`UIModuleLazyLoadError:slo-monitors-components:${e}`),SumoUtil.unblockPage()}}))},this.openMonitorEditorDialog=e=>O(this,void 0,void 0,(function*(){if("error"in e)return(0,R.showCriticalNotification)({message:e.error,autoDismiss:!0});try{const t=yield A();SumoUtil.blockPage();try{const i=yield t.validateAndExtractMonitorQueriesParameters({monitorType:e.monitorType,timeRange:"-5m",queries:e.queries}).toPromise(),{isValid:r,errors:n,logsOutlier:a,metricsOutlier:s}=i.response;SumoUtil.unblockPage();const o=document.getElementById("sumoapp-dialogs-container");if(r&&o){const i={initializationProps:e};if(a){const t=(0,S.Z)(a,["direction","window","consecutive","threshold","field"]);i.initializationProps=Object.assign(Object.assign({},(0,b.Z)(i.initializationProps,"timeRange")),{queries:this.getTrimmedOutlierMonitorQueries(e.queries,a.trimmedQuery),detectionMethod:"Outlier",triggerInitializationParams:t})}else s&&(i.initializationProps=Object.assign(Object.assign({},(0,b.Z)(i.initializationProps,"timeRange")),{queries:this.getTrimmedOutlierMonitorQueries(e.queries,s.trimmedQuery),detectionMethod:"Outlier",triggerInitializationParams:{direction:s.direction,baselineWindow:(0,f.convertResolvableTimeRangeToTimeDetails)(s.baselineTimeRangeWindow),threshold:s.threshold}}));t.getMonitorEditorService().openEditor(o,i)}else(0,R.showCriticalNotification)({variant:"critical",message:n[0],autoDismiss:!0})}catch(e){SumoUtil.unblockPage(),$.logError(null==e?void 0:e[0].message)}}catch(e){$.logError(`UIModuleLazyLoadError:unified-monitors:${e}`)}})),this.dillDownToUnifiedMonitor=()=>{SumoApp.getAngularService("$state").go("app.alerts.unified-monitors",{},{})},this.sendPanelUpdated=(e,t)=>this.sendBrowserMessage(e,this.getPanelUpdatedMessage(t)),this.getPanelUpdatedMessage=e=>({name:e.params.updateType===this.monitorAddedKey?g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.PANEL_ADDED:g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.PANEL_UPDATED,message:{panelId:e.focusData.panelId}}),this.metricsDrillDownFromCollection=e=>{this.setupWizardService.launchMetricsQuery(e)},this.metricsDrillDown=e=>{this.workspacesService.getCurrent().handleSearchDrillDown({data:e,isMetrics:!0})},this.onDrilldownSearch=(e,t)=>{this.workspaceOverlayService.closeDialog(!1),this.searchWorkspaceViewService.searchDrillDown(t)},this.onDrilldownSearchMultiple=(e,t)=>{this.workspaceOverlayService.closeDialog(!1),this.searchWorkspaceViewService.searchDrilldownMultiple(t)},this.onTransactionDrilldownSearch=e=>{this.searchWorkspaceViewService.transactionSearchDrillDown(e)},this.reattachQuery=(e,t)=>{this.workspaceOverlayService.closeDialog(!1),this.searchWorkspaceViewService.reattachQuery(t)},this.countWatches=()=>{const e=s.element(this.$window.document.getElementsByTagName("body")),t=[],i=e=>{s.forEach(["$scope","$isolateScope"],(i=>{e.data()&&e.data().hasOwnProperty(i)&&s.forEach(e.data()[i].$$watchers,(e=>{t.push(e)}))})),s.forEach(e.children(),(e=>{i(s.element(e))}))};i(e);const r=[];return s.forEach(t,(e=>{r.indexOf(e)<0&&r.push(e)})),r.length},this.openSetupWizardMetricsFlow=()=>{this.currentUserHelper.hasFeatureFlag("UIMetricsCapability")&&(SumoApp.setupWizardMetrcisFlow=!0,this.setupWizardService.openSetupWizard())},this.checkForMetricsDataIngestion=e=>this.currentUserHelper.getOrg().hasMetricsData?this.$q.when(!0):this.metricsQueryRowNetworkService.getIngestExists(e).then((e=>this.setMetricsIngest(e))).catch((e=>this.setMetricsIngest(!0))),this.setMetricsIngest=e=>(E.currentUserActions.getActionCreators().updateCurrentUserAttr({org:{hasMetricsData:e}}),e),this.__=r.get("bento")}}N.$inject=["searchWorkspaceViewService","workspaceOverlayService","i18n","currentUserHelper","workspacesService","metricsQueryRowNetworkService","$window","$q","setupWizardService","drilldownDashboardService","dashboardWorkspaceViewService"];class M{constructor(e,t){this.dashboardWorkspaceViewService=e,this.workspaceOverlayService=t,this.updateRecentDashboardsList=(e,t)=>{},this.showDashboard=(e,t,i,r)=>{this.workspaceOverlayService.closeDialog(!1),this.dashboardWorkspaceViewService.dashboardDrillDown(r||e)}}}M.$inject=["dashboardWorkspaceViewService","workspaceOverlayService"];var k=i(41197),L=i(34074);class P{constructor(e,t,i,r,n,a,s,o,l,c){this.$timeout=e,this.currentUserHelper=t,this.applicationViewShimService=i,this.dashboardManagerShimService=r,this.workspacesService=n,this.eventService=a,this.tourService=s,this.setupWizardService=o,this.herokuHeaderService=l,this.experimentService=c,this.loadBentoUI=(e,t)=>{this.loadUUPModel(e.context,t),!e.context.userInfo.isDevEnv&&e.context.hasFeature("ui.send.logs.disable")||$.setLoggingSendFn(e.context.logToServer.sendLog);try{location.href.indexOf("logLevelDebug")>-1?($.logInfoLocal("Setting console log level to debug"),$.logSetConsoleLevel(4)):D.UrlHelper.isDevMode()?($.logInfoLocal("Setting console log level to info"),$.logSetConsoleLevel(3)):($.logInfoLocal("Setting console log level to warn"),$.logSetConsoleLevel(2))}catch(e){}e.context.toaster=jQuery.toaster({showTime:5e3}),e.context.errorUtil=new D.ErrorUtilModule,SumoApp.messageBox=t.messageBox,SumoApp.bentoView=t.bentoView,SumoApp.appLoader=t,SumoApp.bentoView.model.initAjax(),SumoApp.applicationView=this.applicationViewShimService,this.applicationViewShimService.initiateWindowCommunication(),SumoApp.context.dashboardManager=this.dashboardManagerShimService,this.workspacesService.getWorkspaceData().then((e=>{const t=e.currentWorkspaceId,i=_.getPath(e,`workspaces.${t}`);i&&(window.workspaceModel=i)})),this.currentUserHelper.getObservable().take(1).subscribe((e=>{this.$timeout((()=>{this.setup()}),1e3)})),e.context.searchCompletionsModel=new L.SearchCompletionsModel({context:e.context}),this.currentUserHelper.hasFeatureFlag("UIOpenTelemetryInstrumentationEnabled")&&(0,k.initializeTracingInstrumentation)(),(0,f.highlightFocusedElement)()},this.loadUUPModel=(e,t)=>{const i=new g.UserPreferencesModelV2;SumoApp.user.userPreferencesModel=i,i.listenTo(SumoApp.user.userPreferencesModel,"change:dataLoaded",(()=>{this.tourService.initTourStates(SumoApp.user.userPreferencesModel.getTours());const t=SumoApp.user.userPreferencesModel.getSessionTimeout();e.ajax.setActivityTimeout(t),this.eventService.publish("updateKeyboardShortcutsPreference")})),SumoApp.user.userPreferencesModel.loadData()},this.shouldSuppressSetupWizard=()=>this.currentUserHelper.hasFeatureFlag("UIShowIntegrationSetupNotification")||this.currentUserHelper.hasFeatureFlag("UIUploadWizard")||this.currentUserHelper.getOrg().typeHelpers.isTrial&&this.currentUserHelper.hasFeatureFlag("UIUploadWizardTrial"),this.setup=()=>{this.setupWizardService.canOpenWizard()&&!this.shouldSuppressSetupWizard()&&this.setupWizardService.openSetupWizard(!0),this.herokuHeaderService.setup();const e=this.currentUserHelper.getOrg().partnerKnobs;e&&e.publishedAppfolderId&&this.applicationViewShimService.dashboardDrillDown({dashboardId:e.defaultDashboardId,dashboardKey:e.defaultDashboardKey})}}}P.$inject=["$timeout","currentUserHelper","applicationViewShimService","dashboardManagerShimService","workspacesService","eventService","tourService","setupWizardService","herokuHeaderService","experimentService"];var F=i(16471);const U={WINDOW_TYPE_TITLE:{dashboard:"Dashboard",search:"Log Search",metrics:"Metrics",livetail:"LiveTail",home:"Home"},duplicateErrorKey:"content1:duplicate_element",ShowBentoLocalStorageKey:"showBento"},V={name:"Global",children:[{keycode:"alt_s",text:"openSearch"},{keycode:"alt_sh_n",text:"duplicateSearch"},{keycode:"alt_sh_d",text:"duplicateOriginalSearch"},{keycode:"alt_sh_q",text:"duplicateSearchTimerange"},{keycode:"alt_sh_t",text:"duplicateTimerange"},{keycode:"alt_sh_p",text:"pauseSearch"},{keycode:"alt_m",text:"openMetrics"},{keycode:"alt_a",text:"openTraceAnalytics"},{keycode:"alt_l",text:"openLivetail"},{keycode:"alt_d",text:"popout"},{keycode:"alt_h",text:"switchHome"},{keycode:"alt_b",text:"switchLib"},{keycode:"alt_num",text:"switchNum"},{keycode:"alt_zero",text:"switchZero"},{keycode:"alt_left",text:"switchLeft"},{keycode:"alt_right",text:"switchRight"},{keycode:"alt_w",text:"closeTab"},{keycode:"alt_t",text:"switchDataSetup"},{keycode:"alt_c",text:"switchDataCfg"},{keycode:"alt_e",text:"switchAlerts"},{keycode:"alt_u",text:"switchUsers"},{keycode:"alt_x",text:"switchSec"},{keycode:"alt_o",text:"switchAcct"},{keycode:"alt_p",text:"switchPrefs"},{keycode:"alt_z",text:"openSetupWizard"}]},B={name:"Extra",children:[{keycode:"qmark",text:"openHelp"}]},H={name:"Query Builder",children:[{keycode:"alt_plus",text:"queryBuilder.newQueryRow"},{keycode:"alt_minus",text:"queryBuilder.deleteQueryRow"},{keycode:"alt_arrow_up_down",text:"queryBuilder.navigateRows"},{keycode:"alt_slash",text:"queryBuilder.hideRow"},{keycode:"alt_shift_a",text:"queryBuilder.switchModes"},{keycode:"alt_shift_plus",text:"queryBuilder.addOperator"}]};class W{constructor(e){this.$mdDialog=e}}W.$inject=["$mdDialog"];const q={bindToController:!0,controller:W,controllerAs:"ctrl",parent:s.element(document.body),template:'\n  <md-dialog class="md-sumo-dialog medium" id="cheatsheet__dlg" flex="none" layout="column">\n    <div class="md-dialog-header">\n      <div class="md-title">{{::\'bento.cheatsheet_title\' | i18nText}}</div>\n    </div>\n    <md-dialog-content>\n      <div ng-if="ctrl.showWarning" class="cheatsheet__warning">\n        <span ng-bind-html="\'bento.shortcutsDisabled\' | i18nText"></span>\n        <a ui-sref="app.preferences"\n          ng-click="ctrl.$mdDialog.hide()"\n          class="sumo-link -plain">{{:: \'bento.shortcutsDisabled_link\' | i18nText }}</a>\n      </div>\n      <div ng-repeat="shortcutGroup in ctrl.shortcuts">\n        <div ng-repeat="shortcut in shortcutGroup.children" class="cheatsheet__row">\n          <div ng-if="ctrl.isWindows" class="cheatsheet__key">{{ ::\'shortcuts.keycodesWin.\' + shortcut.keycode | i18nText }}</div>\n          <div ng-if="!ctrl.isWindows" class="cheatsheet__key">{{ ::\'shortcuts.keycodesOsx.\' + shortcut.keycode | i18nText }}</div>\n          <div class="cheatsheet__text">{{ ::\'shortcuts.keycodeLabels.\' + shortcut.text | i18nText }}</div>\n        </div>\n      </div>\n    </md-dialog-content>\n    <md-dialog-actions>\n      <md-button ng-click="ctrl.$mdDialog.hide(false)" class="md-raised md-primary">\n        {{ ::\'common.done\' | i18nText }}\n      </md-button>\n    </md-dialog-actions>\n  </md-dialog>\n'};function j(e,t,i){return{openCheatsheet:r=>{var n;const a=null===(n=i.getCurrent().currentView)||void 0===n?void 0:n.name;if(t.getUserSetting("keyboardShortcuts")){const i=F.WORKSPACE.VIEWS.NEWBOARD.stateName===a,n=F.WORKSPACE.VIEWS.INVESTIGATION.stateName===a,s=(({appendQueryBuilderShortcuts:e})=>[V,...e?[H]:[],B])({appendQueryBuilderShortcuts:i||n});return e.show(Object.assign(Object.assign({},q),{locals:{shortcuts:s,isWindows:r,showWarning:!t.getUserSetting("keyboardShortcuts")}}))}}}}j.$inject=["$mdDialog","currentUserHelper","workspacesService"];class Q{constructor(e,t,i,r){var n,a,s,o,l;this.currentUserHelper=e,this.$mdDialog=t,this.$window=i,this.i18n=r;const c=r.get("bento.unknownText");this.systemVersion=this.currentUserHelper.get().systemVersion,this.uiVersion=(null===(n=i.document.querySelector("meta[name=version]"))||void 0===n?void 0:n.content)||c,this.buildDate=window.ProjectBuildTime;const d=null===(s=null===(a=i.document.querySelector("meta[name=bento-packages-version]"))||void 0===a?void 0:a.content)||void 0===s?void 0:s.trim(),u=d?d.split(",").map((e=>{const t=e.indexOf(":");return[e.slice(0,t),e.slice(t+1)]})):[],p=u.map((([e])=>e)).sort();this.releaseTag=(null===(l=null===(o=i.document.querySelector("meta[name=release-tag]"))||void 0===o?void 0:o.content)||void 0===l?void 0:l.trim())||c,this.bentoPackagesVersion=u.sort((([e],[t])=>p.indexOf(e)-p.indexOf(t))),this.bentoPackagesVersionJSON=JSON.stringify(u.reduce(((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i})),{})),this.bentoPackagesVersionList=u.map((([e,t])=>`${e}#${t}`)).join(","),this.$mdDialog=t}}Q.$inject=["currentUserHelper","$mdDialog","$window","i18n"];const z={bindToController:!0,controller:Q,controllerAs:"ctrl",parent:s.element(document.body),template:'\n  <md-dialog class="md-sumo-dialog buildInfo__dialog" flex="none" layout="column">\n    <div class="md-dialog-header">\n      <div class="md-title">{{::\'bento.buildInfo_title\' | i18nText}}</div>\n    </div>\n    <md-dialog-content>\n      <div class="buildInfo__ctr">\n        <span class="buildInfo__label">{{ ::\'bento.systemVersion\' | i18nText }}:</span>\n        <span class="buildInfo__val">{{ ctrl.systemVersion }}</span>\n      </div>\n      <div class="buildInfo__ctr">\n        <span class="buildInfo__label">{{ ::\'bento.uiVersion\' | i18nText }}:</span>\n        <span class="buildInfo__val">{{ ctrl.uiVersion }}</span>\n      </div>\n      <div class="buildInfo__ctr">\n        <span class="buildInfo__label">{{ ::\'bento.releaseTag\' | i18nText }}:</span>\n        <span class="buildInfo__val">{{ ctrl.releaseTag }}</span>\n      </div>\n      <div class="buildInfo__ctr" ng-if="ctrl.bentoPackagesVersion.length">\n        <span class="buildInfo__label">{{ ::\'bento.uiPackagesVersion\' | i18nText }}:</span>\n        <div class="buildInfo__val">\n          <table>\n            <thead>\n              <tr class="buildInfo__val__title">\n                <td colspan="3">Package</td>\n                <td colspan="2">Version</td>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="info in ctrl.bentoPackagesVersion track by $index">\n                <td colspan="3">{{info[0]}}</td>\n                <td colspan="2">{{info[1]}}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n      <div class="buildInfo__ctr" ng-if="ctrl.bentoPackagesVersion.length">\n        <span class="buildInfo__label">{{ ::\'bento.uiPackagesVersionJson\' | i18nText }}:</span>\n        <input class="buildInfo__val" type="text" disabled="disabled" ng-value="ctrl.bentoPackagesVersionJSON" />\n      </div>\n      <div class="buildInfo__ctr" ng-if="ctrl.bentoPackagesVersion.length">\n        <span class="buildInfo__label">{{ ::\'bento.uiPackagesVersionList\' | i18nText }}:</span>\n        <input class="buildInfo__val" type="text" disabled="disabled" ng-value="ctrl.bentoPackagesVersionList" />\n      </div>\n      <div class="buildInfo__ctr">\n        <span class="buildInfo__label">{{ ::\'bento.buildDate\' | i18nText }}:</span>\n        <span class="buildInfo__val">{{ ctrl.buildDate }}</span>\n      </div>\n    </md-dialog-content>\n    <md-dialog-actions>\n      <md-button ng-click="ctrl.$mdDialog.cancel()" class="md-raised md-primary">\n        {{ ::\'common.done\' | i18nText }}\n      </md-button>\n    </md-dialog-actions>\n  </md-dialog>\n'};function G(e){return{open:()=>e.show(z)}}G.$inject=["$mdDialog"];i(9880),i(74181),i(99608),i(64646),i(93717);const K=i(89584);const Y=new class{upgrade(e){return(0,D.legacyHttpPost)("/json/v1/account/upgradeRatePlan/amp",e).then((e=>e.error))}};class Z{constructor(e){this.$mdDialog=e,this.STATES={confirming:"confirming",upgrading:"upgrading",upgradeComplete:"upgradeComplete",upgradeError:"UpgradeError"},this.finished=()=>this.$mdDialog.hide(!0),this.enabled=()=>{this.state=this.STATES.upgradeComplete},this.enable=()=>{this.state=this.STATES.upgrading,Y.upgrade({prductRatePlanId:this.planId,volume:this.volume}).then(this.enabled).catch((()=>{this.state=this.STATES.upgradeError}))},this.planId=this.upgradePlanHash.prductRatePlanId,this.volume=this.upgradePlanHash.volume,this.retention=this.upgradePlanHash.retention,this.displayName=this.upgradePlanHash.displayName,this.state=this.STATES.confirming}}Z.$inject=["$mdDialog"];const X={bindToController:!0,controller:Z,controllerAs:"dialogCtrl",locals:{plan:{}},parent:s.element(document.body),template:'\n  <md-dialog class="md-sumo-dialog small" id="awsUpgrade__dlg" ng-cloak flex="none" layout="column">\n    <div class="md-dialog-header">\n      <div class="md-title">{{::\'account.AWS_UPGRADE_CONF_TITLE\' | i18nText}}</div>\n    </div>\n    <md-dialog-content ng-show="dialogCtrl.state === dialogCtrl.STATES.confirming">\n      <div>{{ dialogCtrl.displayName }}</div>\n      <ul>\n        <li>{{ dialogCtrl.volume }} {{ \'account.AWS_UPGRADE_CONF_VOLUME\' | i18nText }}</li>\n        <li>{{ dialogCtrl.retention }} {{ \'account.AWS_UPGRADE_CONF_RETENTION\' | i18nText }}</li>\n      </ul>\n    </md-dialog-content>\n    <md-dialog-content ng-show="dialogCtrl.state === dialogCtrl.STATES.upgrading">\n      <div>{{ \'account.AWS_UPGRADE_IN_PROGRESS\' | i18nText }}</div>\n    </md-dialog-content>\n    <md-dialog-content ng-show="dialogCtrl.state === dialogCtrl.STATES.upgradeError">\n      <div>{{ \'account.AWS_UPGRADE_ERROR\' | i18nText }}</div>\n    </md-dialog-content>\n    <md-dialog-content ng-show="dialogCtrl.state === dialogCtrl.STATES.upgradeComplete">\n      <div ng-bind-html="\'account.AWS_UPGRADE_SUCCESS\' | i18nText"></div>\n    </md-dialog-content>\n    <md-dialog-actions>\n      <md-progress-circular md-mode="indeterminate" md-diameter="36" ng-show="dialogCtrl.state === dialogCtrl.STATES.upgrading">\n      </md-progress-circular>\n      <md-button ng-click="dialogCtrl.$mdDialog.cancel()" class="md-raised md-primary"\n        ng-show="dialogCtrl.state === dialogCtrl.STATES.confirming || dialogCtrl.state === dialogCtrl.STATES.upgradeError">\n        {{::\'account.CANCEL\' | i18nText}}\n      </md-button>\n      <md-button ng-click="dialogCtrl.enable()" class="md-raised md-accent"\n        id="awsUpgrade__submit" ng-show="dialogCtrl.state === dialogCtrl.STATES.confirming">\n        {{::\'account.AWS_UPGRADE_CONF_SUBMIT\' | i18nText}}\n      </md-button>\n      <md-button ng-click="dialogCtrl.finished()" class="md-raised md-accent"\n        ng-show="dialogCtrl.state === dialogCtrl.STATES.upgradeComplete">\n        {{::\'account.AWS_UPGRADE_FINISH\' | i18nText}}\n      </md-button>\n    </md-dialog-actions>\n  </md-dialog>\n'};class J{constructor(e){this.$mdDialog=e}openConfirmation(e){return this.$mdDialog.show(Object.assign({},X,{locals:{upgradePlanHash:e}}))}}J.$inject=["$mdDialog"];var ee=i(29789),te=i(28902);const ie=s.module("sumoApp.account.view",["sumoApp.currentUser","sumoApp.common.components","sumoApp.account","ngMaterial"]);ie.service("activationViewService",class{constructor(){}getActivationModel(e={}){if(e.slaRequired)return new K({slaRequired:!0});{const{token:t,txnId:i}=e;return new K({token:t,txnId:i})}}}),ie.service("awsUpgradeConfirmationService",J);var re=i(50963),ne=i(20586);class ae extends ne.uJ{constructor(){super("appViews")}}const se=[{name:"app.overlay",url:"/overlay/:overlayId",params:{context:null,overlayId:null},onEnter:["workspaceOverlayService","$stateParams","$rootScope",(e,t,i)=>{const r=t.overlayId,n=i.$new(!1);e.openDialog(n,r,t.context)}],views:{app:{template:"<div></div>"}}}];var oe=i(48137),le=i.n(oe);class ce{constructor(e,t,i,r){this.workspacesService=e,this.viewServices=t,this.$timeout=i,this.stateParamsOverrides=r,this.showTabContent=!1,this.applicationState=g.applicationState,this.parseQueryParams=e=>{const t={};if(e&&""!==e){const i=e.split("&");i.length>-1&&_.each(i,(e=>{const i=e.split("=");t[i[0]]=i[1]}))}return t},this.updateTitle=e=>{this.workspace.updateTitle(this.id,e)},this.getViewService=e=>{const t=this.viewServices.getService(e);return t||$.logWarnLocal("No service registered for type: "+e),t},this.workspace=this.workspacesService.getWorkspace(this.getStateParam("workspaceId")),this.id=this.getStateParam("viewId"),this.setupContentView(),$.hideAllToasts&&$.hideAllToasts(),this.setupBroadcastMsg(),this.showNewUserPreferencesPage=E.currentUserHelper.hasFeatureFlag("UIUserPreferencesReact")}get params(){return Object.assign(Object.assign({},g.applicationState.params),this.stateParamsOverrides)}getStateParam(e){return this.stateParamsOverrides[e]||g.applicationState.params[e]}setupContentView(){const e=this.workspace.getViewType(g.applicationState.current.name),t=this.workspace.findView(this.id||e);if(t)t.params=Object.assign(Object.assign({},t.params),this.params),this.workspace.setCurrentView(t),this.view=t;else{const t=this.getViewService(e);this.view=t.createView({id:this.id,isDrillDown:Boolean(this.getStateParam("drillDownDashboardPanel")),params:Object.assign({},this.params)}),this.workspace.addView(this.view)}}setupBroadcastMsg(){const e=this.viewServices.getService(this.view.type);this.broadcastMsg$=e?e.getCurrentWorkspaceViewMessage$():void 0}$onInit(){this.$timeout((()=>{this.showTabContent=!0}))}}ce.$inject=["workspacesService","viewServices","$timeout","stateParamsOverrides"];const de={name:"app.lookup-view",url:"/lookup/:viewId",template:`<div class=${le().lookupTablesContainerRoot}>\n    <lookup-table-creator-container params="vm.view.params" actions="vm.views.actions" class=${le().lookupTablesContainer}></lookup-table-creator-container>\n  </div>`,controller:ce,controllerAs:"vm",params:{initTabName:void 0,path:void 0,mode:void 0,parentFolderId:void 0}};var ue=i(22913);const pe=({name:e,template:t,controllerAs:i,contentType:r})=>({name:e,url:`/csiem/${(0,ue.Z)(r)}/{crudAction:view|new|edit}/:viewId?parentId&contentId`,template:t,controller:ce,controllerAs:i,params:{initTabName:void 0}});var he=i(78899);const me=pe({name:"app.parsers",contentType:he.wF.parser,controllerAs:"vm",template:'\n        <parser-editor-container\n          style="height:100%"\n          params="vm.view.params"\n          actions="vm.views.actions">\n        <parser-editor-container>\n      '});class ge{constructor(){this.state={name:"app.drilldown",params:{context:null},url:"/drilldown",template:"<div></div>",onEnter:ge.$inject.concat([(e,t,i,r)=>this.onEnterHandler(e,t,i,r)])},this.onEnterHandler=(e,t,i,r)=>{let n=e.context;return n?("string"==typeof n&&(n=JSON.parse(decodeURIComponent(n))),t((()=>{i.drilldownQuery(n)}))):t((()=>{g.applicationState.go(F.WORKSPACE.VIEWS.HOME.stateName,{workspaceId:e.workspaceId||r.getCurrent().id})})),!1}}}ge.$inject=["$stateParams","$timeout","drilldownService","workspacesService"];const ye=(new ge).state,{SearchQueryDataModule:ve}=i(34074);class fe{constructor(){this.drilldownQuery=(e,t=!1)=>{let i;e.pinned?(i=new ve({queryId:e.externalId,queryString:e.query,parameters:e.parameters,queryName:e.name,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp,isPinned:e.pinned,autoParsingInfo:e.autoParsingInfo}),SumoApp.applicationView.reattachQuery({},i)):!0===t?SumoApp.applicationView.onDrilldownSearch({},e):(i=new ve({queryString:e.query,timeRange:e.timeRange,executeSearch:!0,parameters:e.parameters,queryName:e.name,autoParsingInfo:e.autoParsingInfo}),SumoApp.applicationView.onDrilldownSearch({},i))},g.windowCommunicatorBaseService.initialize()}}fe.$inject=[];var _e=i(65794),Se=i(31107);class be extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewParams={viewId:"viewId",crudAction:"crudAction",initTabName:"initTabName",parentId:"parentId",contentId:"contentId"},this.modifyViewId=(e,t)=>{var i;if(void 0===t&&(t=null===(i=this.workspacesService.getCurrent().currentView)||void 0===i?void 0:i.id),e&&t&&t!==e){const i=this.workspacesService.getWorkspace(g.applicationState.params.workspaceId).findView(t);(0,re.assertDefined)(i),i.id=e;const r=i.params;r.viewId=e,this.workspacesService.getCurrent().currentView===i&&g.applicationState.go(this.viewInfo.stateName,r,{notify:!1,reload:!1,location:"replace"})}},this.updateViewTitle=(e,t)=>{var i;if(void 0===t&&(t=null===(i=this.workspacesService.getCurrent().currentView)||void 0===i?void 0:i.id),!t)return void $.logWarnLocal("viewId is not defined");if("megacsiem"===t||"logs-config"===t)return;this.workspacesService.getWorkspace(g.applicationState.params.workspaceId).updateTitle(t,e)},this.getDefaultViewTitle=e=>e}newTab(e,t,i){super.newTab(e,t,i);const r=this.createView();e.addView(r,i)}createView(e={}){const t=super.createView(e),i=e.id||""+re.idGeneratorService.generateId(),r=e.title||e.params.initTabName||this.getDefaultViewTitle(e.params.crudAction);return t.id=i,t.title=r,t.isDrillDown=!0,t.params=e.params?e.params:{viewId:i},t}getViewParams(){return[...super.getViewParams(),...Object.keys(this.viewParams)]}}var Ee=i(3789),Te=i(20407),xe=i(2415);const Ce=(e,{params:t})=>e.parsers.parserEditors[t.viewId]||e.parsers.parserEditors.default;const Ae=new class extends be{constructor(){super(...arguments),this.viewInfo=F.WORKSPACE.VIEWS.PARSERS}shouldAllowClose(e){const t=Te.store.getState(),i=Ce(t,{params:e.params});return k.logService.info(JSON.stringify(i)),((e,t=k.logService.info)=>{if(!e)return!0;let i={description:"",name:"",stanzas:"",localStanzas:""};e.meta.resource&&(i=(0,S.Z)(e.meta.resource,Object.keys(i)));const{formState:r}=e,n={description:r.basicDetails.description,name:r.basicDetails.name,stanzas:r.parserConfig.stanzas,localStanzas:r.parserConfig.localStanzas};return t("currentState > >>>>>>>>>>>>>>>>>>>>>>> "+JSON.stringify(n)),t("initialState > >>>>>>>>>>>>>>>>>>>>>>> "+JSON.stringify(i)),(0,xe.Z)(n,i,((e,t)=>{if(!e&&!t)return!0}))})(i)}viewRemoved(e,t){(0,Ee.Og)(e.id,he.wF.parser)}};var we=i(78048),Ie=i(50052),Re=i(99303),De=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Oe=e=>({type:Ie.M2.CHANGE_LOOKUP_TABLE_CREATION_MODE,payload:{mode:e}}),Ne=e=>({type:Ie.M2.UPDATE_CSV_FILE_NAME,payload:{fileName:e}}),Me=e=>({type:Ie.M2.CHANGE_MODE,payload:{mode:e}}),ke=e=>({type:Ie.M2.UPLOAD_FILE_UPDATED,payload:{file:e}}),Le=e=>({type:Ie.M2.UPDATE_COLUMNS,payload:{columns:e}}),Pe=(e,t)=>({type:Ie.M2.ADD_COLUMN_TO_RIGHT,payload:{colId:e,idForColumnToAdd:(0,Re.Z)(),gridColumnWidths:t}}),Fe=(e,t)=>({type:Ie.M2.ADD_COLUMN_TO_LEFT,payload:{colId:e,idForColumnToAdd:(0,Re.Z)(),gridColumnWidths:t}}),Ue=e=>({type:Ie.M2.DELETE_COLUMN,payload:{colId:e}}),Ve=(e,t)=>({type:Ie.M2.UPDATE_HEADER_NAME,payload:{colId:e,headerName:t}}),Be=(e,t)=>({type:Ie.M2.UPDATE_VALUE_TYPE,payload:{colId:e,valueType:t}}),$e=e=>({type:Ie.M2.TOGGLE_PRIMARY_KEY_FIELD,payload:{colId:e}}),He=e=>t=>t({type:Ie.M2.UPLOAD_UPDATE_PROGRESS,payload:e}),We=e=>({type:Ie.M2.UPDATE_DATA,payload:e}),qe=({path:e,parentFolderId:t})=>({type:Ie.M2.UPDATE_CONTENT_PATH,payload:{contentPath:e,parentFolderId:t}}),je=e=>({type:Ie.M2.UPDATE_CONTENT_ITEM,payload:e}),Qe=e=>({type:Ie.M2.UPDATE_STATE,payload:e}),ze=e=>t=>De(void 0,void 0,void 0,(function*(){t(je(e));const{parentId:i}=e;if(!i)throw new TypeError(`parentId is ${i}`);const r=yield(0,g.getFullPath)(i);t({type:Ie.M2.UPDATE_CONTENT_PATH,payload:{parentFolderId:i,contentPath:r}})}));var Ge=i(13851);class Ke extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.LOOKUP_VIEW,this.modifyViewId=(e,t,i)=>{var r;if(void 0===t&&(t=null===(r=g.workspacesManager.getCurrent().currentView)||void 0===r?void 0:r.id),e&&t&&t!==e){const r=g.workspacesManager.getWorkspace(g.applicationState.params.workspaceId).findView(t);(0,re.assertDefined)(r),r.id=e;const n=r.params;return n.viewId=e,n.initTabName=i,g.applicationState.goRelativeToCurrent(this.viewInfo.stateName,n)}},this.updateViewTitle=(e,t)=>{var i;const r=t||(null===(i=g.workspacesManager.getCurrent().currentView)||void 0===i?void 0:i.id);if(!r)return void $.logWarnLocal("viewId is not defined");const n=g.workspacesManager.getWorkspace(g.applicationState.params.workspaceId);e=e.length?e:this.getDefaultViewTitle(),n.updateTitle(r,e)},this.onCreateLookup=(e,t)=>{this.updateViewTitle(e.name,t);const i=this.modifyViewId(e.lookupTableId,t,e.name);return i||Promise.reject(i)},this.getDefaultViewTitle=()=>Ge.j.get("lookupTables.createLookupTableTitle")}newTab(e,t,i){super.newTab(e,t,i);const r=this.createView();e.addView(r,i)}createView(e={}){const t=super.createView(e),i=e.id||""+re.idGeneratorService.generateId(),r=e.title||e.params.initTabName||this.getDefaultViewTitle();return t.id=i,t.title=r,t.params=e.params?e.params:{viewId:i},Object.assign(t.params,{actions:{onCreateLookup:this.onCreateLookup},path:e.params.path}),t}getViewParams(){return[...super.getViewParams(),"viewId"]}getTabIdFromLibraryItem(e){const t=e.id;return(0,g.getHexLookupId)(t)}onContentMove(e,t){return(0,Ee.Lu)(e.id,Te.store.dispatch,he.wF.lookupTable)(ze(t))}viewRemoved(e){return Te.store.dispatch((0,we.removeLookupUIStatesByView)(e.id))}}const Ye=new Ke;class Ze{constructor(e,t,i,r,n,a,s,o,l,c,d,u,p,h,m,g,y,v,f,_,S){this.$uiRouter=S,this.contentTypeWorkspaceViewTypeMapping={[F.CONTENT_TYPES.DASHBOARD]:F.WORKSPACE.VIEWS.DASHBOARD.type,[F.CONTENT_TYPES.NEW_DASHBOARD]:F.WORKSPACE.VIEWS.NEWBOARD.type,[F.CONTENT_TYPES.INVESTIGATION_PAGE]:F.WORKSPACE.VIEWS.INVESTIGATION.type,[F.CONTENT_TYPES.BACKGROUND_SEARCH]:F.WORKSPACE.VIEWS.SEARCH.type,[F.CONTENT_TYPES.SAVED_SEARCH]:F.WORKSPACE.VIEWS.SEARCH.type,[F.CONTENT_TYPES.METRICS]:F.WORKSPACE.VIEWS.METRICS.type,[F.CONTENT_TYPES.LOOKUP]:F.WORKSPACE.VIEWS.LOOKUP_VIEW.type,[F.CONTENT_TYPES.INVESTIGATION_PAGE]:F.WORKSPACE.VIEWS.INVESTIGATION.type},this.viewServices={},this.viewServices[F.WORKSPACE.VIEWS.HOME.type]=o,this.viewServices[F.WORKSPACE.VIEWS.LIBRARY.type]=d,this.viewServices[F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE_LIST.type]=f,this.viewServices[F.WORKSPACE.VIEWS.TRACE_ANALYTICS.type]=_e.traceAnalyticsWorkspaceViewService,this.viewServices[F.WORKSPACE.VIEWS.TRACE_DETAILS.type]=_e.traceDetailsWorkspaceViewService,this.viewServices[F.WORKSPACE.VIEWS.SPANS_ANALYTICS.type]=l,this.viewServices[F.WORKSPACE.VIEWS.SERVICE_MAP.type]=_e.serviceMapWorkspaceViewService,this.viewServices[F.WORKSPACE.VIEWS.PREFERENCES.type]=c,this.viewServices[F.WORKSPACE.VIEWS.DEVELOPERS.type]=p,this.viewServices[F.WORKSPACE.VIEWS.GROUP.type]=a,this.viewServices[F.WORKSPACE.VIEWS.MEGA_USER_AND_ROLES.type]=m,this.viewServices[F.WORKSPACE.VIEWS.MEGA_CSIEM.type]=y,this.viewServices[F.WORKSPACE.VIEWS.APPS.type]=u,this.viewServices[F.WORKSPACE.VIEWS.DASHBOARD.type]=e,this.viewServices[F.WORKSPACE.VIEWS.SEARCH.type]=t,this.viewServices[F.WORKSPACE.VIEWS.METRICS.type]=i,this.viewServices[F.WORKSPACE.VIEWS.INVESTIGATION.type]=r,this.viewServices[F.WORKSPACE.VIEWS.ANOMALIES.type]=n,this.viewServices[F.WORKSPACE.VIEWS.LIVE_TAIL.type]=s,this.viewServices[F.WORKSPACE.VIEWS.EXPLORE.type]=h,this.viewServices[F.WORKSPACE.VIEWS.NEWBOARD.type]=Se.B,this.viewServices[F.WORKSPACE.VIEWS.CREATE_NEWBOARD.type]=Se.B,this.viewServices[F.WORKSPACE.VIEWS.LOOKUP_VIEW.type]=Ye,this.viewServices[F.WORKSPACE.VIEWS.DATA_MODELS.type]=g,this.viewServices[F.WORKSPACE.VIEWS.PARSERS.type]=Ae,this.viewServices[F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE.type]=v,this.viewServices[F.WORKSPACE.VIEWS.SLO_PAGE.type]=_}getService(e){return this.viewServices[e]}getServiceForContentItem(e){return this.getService(this.contentTypeWorkspaceViewTypeMapping[e])}exitStickyView(e){const t=g.applicationState.get(e.name);if(t&&t.sticky){const e=this.$uiRouter.getPlugin("sticky-states");t.name&&e.exitSticky(t.name)}}}Ze.$inject=["dashboardWorkspaceViewService","searchWorkspaceViewService","metricsWorkspaceViewService","investigationViewService","anomaliesWorkspaceViewService","groupWorkspaceViewService","liveTailWorkspaceViewService","homeWorkspaceViewService","spansAnalyticsWorkspaceViewService","preferencesWorkspaceViewService","libraryWorkspaceViewService","appsWorkspaceViewService","developerWorkspaceViewService","exploreWorkspaceViewService","usersAndRolesWorkspaceViewService","dataModelsWorkspaceViewService","megaCSiemWorkspaceViewService","alertResponsePageViewService","alertResponsePageListViewService","sloPageViewService","$uiRouter"];class Xe{constructor(e,t,i){this.sumoDialog=e,this.$window=t,this.$timeout=i,this.goBack=!0,this.overlayViews=s.extend({},F.WORKSPACE.OVERLAY.OVERLAY_VIEWS),this.openDialog=(e,t,i)=>{const r=this,n=this.overlayViews[t]||this.overlayViews[F.WORKSPACE.OVERLAY.defaultView];this.sumoDialog.open({title:"",template:F.WORKSPACE.OVERLAY.templateURL,dialogSize:F.WORKSPACE.OVERLAY.overlaySize,className:F.WORKSPACE.OVERLAY.overlayClasses,scope:e,showOk:!(!_.isNull(n.showOk)&&!_.isUndefined(n.showOk))||n.showOk,controller(){const a=this;return a.overlayId=t,a.context=n.context=i,e.title=n.title||F.WORKSPACE.OVERLAY.defaultTitle,r.$timeout((()=>{a.template=n.template}),1e3),a.setTitle=e=>{a.title=e},a},controllerAs:"vm"}).then((e=>{r.dialog=e,e.closePromise.then((()=>{r.goBack?r.$window.history.back():r.goBack=!0,r.dialog=null}))}))},this.closeDialog=(e=!0)=>{this.dialog&&(this.goBack=e,this.dialog.close())}}}Xe.$inject=["SumoDialog","$window","$timeout"];var Je=i(16826);class et{constructor(e,t,i,r,n,a,s,o){this.$rootScope=e,this.$scope=t,this.$element=i,this.bentoNavService=r,this.libraryTreeServiceFactory=n,this.currentUserHelper=a,this.buildInfoDialogService=s,this.switchViewAndCloseAllTabsService=o,this.isAdminModeEnabled=!1,this.showPartnerHitLogo=!1,this.showPartnerHerLogo=!1,this.showPartnerGstLogo=!1,this.showPartnerEseLogo=!1,this.showRequestUpgrade=!1}$onInit(){this.MSPLogo=this.currentUserHelper.getDarkMspLogo(),this.$element.addClass("bento-side-nav"),this.showRequestUpgrade=this.bentoNavService.showRequestUpgrade();const e=this.currentUserHelper.get().isPradaITUser||"sdijmarescu@sumologic.com"===this.currentUserHelper.get().name;this.showAlbMigrationWarning=!e,this.allowDragDrop=this.currentUserHelper.hasFeatureFlag("UIHibachiSidePanelDragDrop"),this.showPartnerHerLogo=this.currentUserHelper.hasFeatureFlag("UIShowHerjavecLogo"),this.showPartnerEseLogo=this.currentUserHelper.hasFeatureFlag("UIShowEsentireLogo"),this.showPartnerGstLogo=this.currentUserHelper.hasFeatureFlag("UIShowGstLogo"),this.showPartnerHitLogo=D.UrlHelper.isHdsUrl(),this.stateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.renderedOnce||e.isClosed||(this.renderedOnce=!0),this.state=e})).subscribe();const t=this.libraryTreeServiceFactory,i=t.getEnhancedRecentInstance(),r=t.getFavoritesInstance(),n=t.getPersonalInstance(),a=t.getGlobalViewInstance();this.recentContexts=i.getContexts(),this.libraryContexts=a.getContexts(),this.tabs={folder:this.buildTab("folder",a),clock:this.buildTab("clock",i),star:this.buildTab("star",r)},n&&(this.tabs.sumo=this.buildTab("sumo",n),this.personalContexts=n.getContexts()),Je.Observable.merge(..._.pluck(_.values(this.tabs),"state$")).takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>this.tabs[e.name].state=e.state)).subscribe(),this.tabsList=[this.tabs.clock,this.tabs.star,this.tabs.sumo,this.tabs.folder],this.renderedOnce=!1===this.state.isClosed,this.navInfo=this.getNavInfo(),this.navActions=this.bentoNavService.getNavActions(),g.contentAdminModeStateService.syncState(),g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{(this.isAdminModeEnabled!==e||_.isUndefined(this.activeTabIndex))&&(e&&3!==this.activeTabIndex?this.activeTabIndex=3:this.activeTabIndex=this.state.activeTabIndex||0,this.onTabSelect(this.tabsList[this.activeTabIndex].name),this.isAdminModeEnabled=e)})).subscribe(),this.tabsList.forEach(((e,t)=>{e.state$.takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.state.activeContexts[t]!==e.state.context&&this.updateContextForTabIndex(t,e.state.context)})).subscribe()}))}$onDestroy(){this.tabs=void 0}onTabSelect(e){const t=this.tabs[e].service;if(_.each(this.tabs,((t,i)=>{this.tabs[i].isActive=i===e})),this.isAdminModeEnabled)t.initialize(g.LIBRARY_CONTEXTS.SHARED);else{const i=this.tabsList.indexOf(this.tabs[e]);this.switchActiveTab(i),t.initialize(this.state.activeContexts[i]||void 0)}this.openSection=""}switchActiveTab(e=0){this.stateService.setState({activeTabIndex:e}),this.stateService.syncState()}updateContextForTabIndex(e,t){this.isAdminModeEnabled||(this.state.activeContexts[e]=t,this.stateService.setState(this.state),this.stateService.syncState())}openBuildInfo(e){e.shiftKey&&this.buildInfoDialogService.open()}disableAdminMode(){this.switchViewAndCloseAllTabsService.openSwitchViewConfirmationDialog().then((()=>g.contentAdminModeStateService.disableAdminMode()))}getNavInfo(){const e=this.bentoNavService.getNavInfo(),t=_.map(e.manage,(e=>Object.assign(Object.assign({},e),{tooltip:this.getNavModelTooltip(e)}))),i=_.map(e.administration,(e=>Object.assign(Object.assign({},e),{tooltip:this.getNavModelTooltip(e)}))),r=_.map(e.usernamePages,(e=>Object.assign(Object.assign({},e),{tooltip:this.getNavModelTooltip(e)})));return Object.assign(Object.assign({},e),{manage:t,administration:i,usernamePages:r})}getNavModelTooltip(e){let t;if(!_.isUndefined(e.tabs)&&e.tabs.length>0){t=`<div class="bento-nav-tooltip-list">${_.map(e.tabs,(e=>`<div class="bento-nav-tooltip-list__item">${e.title}</div>`)).join("")}</div>`}return t}buildTab(e,t){const i=t.getActions();return{name:e,service:t,state$:t.getState$().map((t=>({name:e,state:t}))),state:void 0,actions:i,isActive:!1}}}et.$inject=["$rootScope","$scope","$element","bentoNavService","libraryTreeServiceFactory","currentUserHelper","buildInfoDialogService","switchViewAndCloseAllTabsService","bootstrapToastService"];const tt={controller:et,bindings:{closeNav:"&",stateService:"<"},template:'\n  <div class="bento-side-nav__header">\n    <div class="bento-side-nav__header__logo" ng-class="{ \'bento-logo_partnerHit\': $ctrl.showPartnerHitLogo }">\n    <div ng-if="$ctrl.showAlbMigrationWarning"><alb-migration-warning-container></alb-migration-warning-container></div>\n    <div class="msp" ng-if="$ctrl.MSPLogo" ng-click="$ctrl.openBuildInfo($event)">\n      <img class="msp__logo" ng-src="{{$ctrl.MSPLogo}}"/>\n      <div class="msp__sumo">\n        <span class="msp__powered">{{ \'bento.powered_by\' | i18nText}}</span>\n        <div class="msp__sumologo"></div>\n      </div>\n    </div>\n    <div class="bento-logo" ng-if="!$ctrl.MSPLogo"\n      ng-class="{\n      \'bento-logo_partnerHer\': $ctrl.showPartnerHerLogo,\n      \'bento-logo_partnerEse\': $ctrl.showPartnerEseLogo,\n      \'bento-logo_partnerGst\': $ctrl.showPartnerGstLogo,\n      }"\n      ng-click="$ctrl.openBuildInfo($event)"></div>\n    </div>\n    <div class="bento-side-nav__header__close" data-sumo-test="bento-side-nav-header-close">\n      <ux-icon-button svg="true" icon="arrow-left" ng-click="$ctrl.closeNav()"></ux-icon-button>\n    </div>\n  </div>\n  <div class="bento-side-nav__library" ng-if="$ctrl.renderedOnce">\n    <uib-tabset type="tabs -bento-side -dark"\n      active="$ctrl.activeTabIndex">\n      \n  <uib-tab select="$ctrl.onTabSelect(\'clock\')" tooltip tooltip-content="{{:: \'content.recent\' | i18nText }}"\n        tooltip-theme="quicktip -light" disable="$ctrl.isAdminModeEnabled" data-sumo-test="bento-nav-recents">\n    <uib-tab-heading>\n      <md-icon md-svg-icon="clock"></md-icon>\n    </uib-tab-heading>\n    <library-tree-view\n      ng-if="$ctrl.tabs.clock.isActive && !$ctrl.state.isClosed && !$ctrl.isAdminModeEnabled"\n      fetch-meta-data="$ctrl.tabs.clock.service.fetchMetaData"\n      state="$ctrl.tabs.clock.state"\n      actions="$ctrl.tabs.clock.actions"\n      contexts="$ctrl.recentContexts"\n    ></library-tree-view>\n  </uib-tab>\n\n      \n  <uib-tab select="$ctrl.onTabSelect(\'star\')" tooltip tooltip-content="{{:: \'content.favorites\' | i18nText }}"\n        tooltip-theme="quicktip -light" disable="$ctrl.isAdminModeEnabled" data-sumo-test="bento-nav-favorites">\n    <uib-tab-heading>\n      <md-icon md-svg-icon="star"></md-icon>\n    </uib-tab-heading>\n    <library-tree-view\n      ng-if="$ctrl.tabs.star.isActive && !$ctrl.state.isClosed && !$ctrl.isAdminModeEnabled"\n      fetch-meta-data="$ctrl.tabs.star.service.fetchMetaData"\n      state="$ctrl.tabs.star.state"\n      actions="$ctrl.tabs.star.actions"\n    ></library-tree-view>\n  </uib-tab>\n\n      \n  <uib-tab select="$ctrl.onTabSelect(\'sumo\')" tooltip tooltip-content="{{:: \'content.personal\' | i18nText }}"\n        tooltip-theme="quicktip -light" disable="$ctrl.isAdminModeEnabled" data-sumo-test="bento-nav-personal">\n    <uib-tab-heading>\n      <md-icon md-svg-icon="myfolder"></md-icon>\n    </uib-tab-heading>\n    <library-tree-view\n      ng-if="$ctrl.tabs.sumo.isActive && !$ctrl.state.isClosed && !$ctrl.isAdminModeEnabled"\n      fetch-meta-data="$ctrl.tabs.sumo.service.fetchMetaData"\n      state="$ctrl.tabs.sumo.state"\n      actions="$ctrl.tabs.sumo.actions"\n      allow-drag-drop="$ctrl.allowDragDrop"\n      contexts="$ctrl.personalContexts"\n    ></library-tree-view>\n  </uib-tab>\n\n      \n  <uib-tab select="$ctrl.onTabSelect(\'folder\')" tooltip tooltip-content="{{:: \'content.library\' | i18nText }}"\n        tooltip-theme="quicktip -light" data-sumo-test="bento-nav-library">\n    <uib-tab-heading>\n      <md-icon md-svg-icon="folder-open"></md-icon>\n    </uib-tab-heading>\n    <div class="content-admin-mode-banner" ng-if="$ctrl.isAdminModeEnabled" data-sumo-test="content-admin-mode-banner">\n        <md-menu>\n          <span class="content-admin-toggle-button" ng-click="$mdMenu.open($event)">\n            <ux-icon-button svg="true" icon="menu" md-menu-origin class="-dark"></ux-icon-button>\n          </span>\n          <md-menu-content>\n           <md-menu-item>\n             <md-button ng-click="$ctrl.disableAdminMode()" aria-label="{{:: \'library.adminModeBannerToggleLabel\' | i18nText }}">\n               {{:: \'library.adminModeBannerToggleLabel\' | i18nText }}\n             </md-button>\n           </md-menu-item>\n         </md-menu-content>\n        </md-menu>\n        {{:: \'library.adminModeBanner\' | i18nText }}\n    </div>\n    <library-tree-view\n      ng-if="$ctrl.tabs.folder.isActive && !$ctrl.state.isClosed"\n      fetch-meta-data="$ctrl.tabs.folder.service.fetchMetaData"\n      state="$ctrl.tabs.folder.state"\n      contexts="$ctrl.libraryContexts"\n      actions="$ctrl.tabs.folder.actions"\n      allow-drag-drop="$ctrl.allowDragDrop"\n    ></library-tree-view>\n  </uib-tab>\n\n    </uib-tabset>\n  </div>\n  <div class="bento-side-nav__menu" ng-if="$ctrl.renderedOnce">\n    <bento-nav-menu nav-info="::$ctrl.navInfo"\n      open-section="$ctrl.openSection"\n      show-progress-view="$ctrl.bentoNavService.showProgressView"\n      show-request-upgrade="::$ctrl.showRequestUpgrade"\n      show-signout="::$ctrl.bentoNavService.showSignout()"\n      show-upgrade="::$ctrl.bentoNavService.showUpgrade()"\n      actions="$ctrl.navActions"></bento-nav-menu>\n  </div>\n  '};class it{constructor(e,t,i,r){this.$element=e,this.$timeout=t,this.intercomService=i,this.currentUserHelper=r,this.hasSanaCsiemAccess=this.currentUserHelper.hasPrivilege("SanaCsiemAccess"),this.hasCSEAccess=this.currentUserHelper.hasPrivilege("CSEAccess"),this.csePhase=parseInt(this.currentUserHelper.getDynamicProperty("cse_phase")||"1"),this.hasCloudSoarAccess=this.currentUserHelper.hasPrivilege("CloudSoarAccess"),this.isKansoFeatureFlagEnabled=r.hasFeatureFlag("UIKansoMode")}$onInit(){this.$element.addClass("bento-nav-menu"),this.intercomService.initializeNotifications()}$onChanges(e){e.openSection&&this.openMenuSection(e.openSection.currentValue)}openMenuSection(e){this.$timeout((()=>s.element(window).triggerHandler("resize")),0),this.openSection=this.openSection===e?"":e,e&&this.intercomService.openMenuSection(this.openSection)}getFormattedTooltip(e,t){return`<div class="attribute-display--compact -dark">\n      <div class="attribute-display__label">${e}</div>\n      <div class="attribute-display__value">${t}</div>\n    </div>`}}it.$inject=["$element","$timeout","intercomService","currentUserHelper"];const rt={controller:it,bindings:{navInfo:"<",actions:"<",openSection:"=",showUpgrade:"<",showRequestUpgrade:"<",showSignout:"<",showProgressView:"<"},template:'\n    \x3c!-- Mini-progress view for Wizard --\x3e\n    <div class="bento-nav-menu__item -single-item -level-0" id="wizard-progress" data-sumo-test="wizard-progress"\n      ng-show="$ctrl.showProgressView"></div>\n    \x3c!-- Install App --\x3e\n    <icon-label class="bento-nav-menu__item -level-0" ui-sref="app.apps.all" data-sumo-test="install-app" role="button"\n      ui-sref-active="is-active" icon="\'apps\'" label="::\'workspaces.installApp\' | i18nText"></icon-label>\n    \x3c!-- Cloud SIEM --\x3e\n    <icon-label class="bento-nav-menu__item -level-0" ui-sref="app.megacsiem" data-sumo-test="csiem-menu" ng-if="::$ctrl.hasSanaCsiemAccess"\n      ui-sref-active="is-active" icon="\'cloud-siem\'" label="::\'workspaces.csiem\' | i18nText"></icon-label>\n\n    \x3c!-- Manage --\x3e\n    <accordion class="bento-nav-menu__group" is-open="$ctrl.openSection === \'manage\'" data-sumo-test="manage">\n      <accordion-header ng-click="$ctrl.openMenuSection(\'manage\')" data-sumo-test="manage-header">\n        <icon-label class="bento-nav-menu__item -level-0" icon="\'stack\'" label="::\'workspaces.manage\' | i18nText"\n        data-sumo-test="manage-header-icon-label">\n        </icon-label>\n      </accordion-header>\n      <div ng-repeat="item in $ctrl.navInfo.manage track by item.id" class="bento-nav-menu__item -sub"\n          ui-sref-active="is-active" ui-sref="{{item.state}}"\n          tooltip tooltip-content="{{item.tooltip}}" content-as-html="true" tooltip-position="right" tooltip-theme="quicktip"\n          data-sumo-test="manage-item-{{item.id}}">\n        <span class="-level-1" ng-bind="::\'workspaces.\' + item.id | i18nText" data-sumo-test="manage-item-{{item.id}}-content"></span>\n      </div>\n    </accordion>\n    \x3c!-- Administration --\x3e\n    <accordion class="bento-nav-menu__group" is-open="$ctrl.openSection === \'administration\'" data-sumo-test="administration">\n      <accordion-header ng-click="$ctrl.openMenuSection(\'administration\')" data-sumo-test="administration-header">\n        <icon-label class="bento-nav-menu__item -level-0" icon="\'admin\'" label="::\'workspaces.administration\' | i18nText"\n        data-sumo-test="administration-header-icon-label"></icon-label>\n      </accordion-header>\n\n      <div ng-repeat="item in $ctrl.navInfo.administration track by item.id" class="bento-nav-menu__item -sub"\n          ui-sref-active="is-active" ui-sref="{{item.state}}"\n          tooltip tooltip-content="{{item.tooltip}}" content-as-html="true" tooltip-position="right" tooltip-theme="quicktip"\n          data-sumo-test="administration-item-{{item.id}}">\n        <span class="-level-1" ng-bind="::\'workspaces.\' + item.id | i18nText"\n          data-sumo-test="administration-item-{{item.id}}-content"></span>\n      </div>\n    </accordion>\n    \x3c!-- Sumo Security --\x3e\n    <div ng-click="$ctrl.actions.openSumoSecurity()" data-sumo-test="sumo-security-header"\n      ng-if="$ctrl.hasCSEAccess && $ctrl.csePhase < 2">\n      <icon-label class="bento-nav-menu__item -level-0 -level-outer" icon="\'cloud-siem-enterprise\'" label="::\'workspaces.sumoSecurity\' | i18nText"\n        data-sumo-test="sumo-security-header-icon-label">\n      </icon-label>\n    </div>\n    <div data-sumo-test="sumo-security-header"\n      ng-if="$ctrl.hasCSEAccess && $ctrl.csePhase >= 2">\n      <a href="/sec" class="bento-nav-menu__link">\n        <icon-label class="bento-nav-menu__item -level-0 -level-outer" icon="\'cloud-siem-enterprise\'" label="::\'workspaces.sumoSecurity\' | i18nText"\n          data-sumo-test="sumo-security-header-icon-label">\n        </icon-label>\n      </a>\n    </div>\n    \x3c!-- Cloud Soar --\x3e\n    <div ng-click="$ctrl.actions.openCloudSoar()" data-sumo-test="cloud-soar-nav-item"\n      ng-if="$ctrl.hasCloudSoarAccess">\n      <icon-label class="bento-nav-menu__item -level-0 -level-outer" icon="\'cloud-soar\'" label="::\'workspaces.incidents\' | i18nText"\n        data-sumo-test="cloud-soar-nav-item-icon-label">\n      </icon-label>\n    </div>\n    \x3c!-- Help --\x3e\n    <accordion class="bento-nav-menu__group" is-open="$ctrl.openSection === \'help\'" data-sumo-test="help">\n      <accordion-header ng-click="$ctrl.openMenuSection(\'help\')" data-sumo-test="help-header">\n        <icon-label class="bento-nav-menu__item -level-0" icon="\'question-circle\'" label="::\'workspaces.help\' | i18nText"\n          data-sumo-test="help-header-icon-label">\n          <status-page-io-icon data-sumo-test="help-header-icon-label-status"></status-page-io-icon>\n        </icon-label>\n      </accordion-header>\n      <div class="bento-nav-menu__item -sub" ng-repeat="item in $ctrl.navInfo.help" ng-click="$ctrl.actions.onHelpItemClick(item)"\n        data-sumo-test="help-item-{{item.id}}">\n        <external-link class="-level-1" label="::\'workspaces.\' + item.id | i18nText" icon="item.linkIcon"\n        data-sumo-test="help-item-{{item.id}}-content"></external-link>\n      </div>\n    </accordion>\n    \x3c!-- Kanso --\x3e\n    <div ng-click="$ctrl.actions.openNewKansoTab()" data-sumo-test="kanso-toggle-on-nav-item" ng-if="$ctrl.isKansoFeatureFlagEnabled">\n      <icon-label class="bento-nav-menu__item -level-0 -level-outer" icon="\'rocketship\'" label="::\'workspaces.kansoToggleOn\' | i18nText"\n        data-sumo-test="kanso-toggle-on-nav-item-icon-label">\n      </icon-label>\n    </div>\n    \x3c!-- Username (Org) --\x3e\n    <accordion class="bento-nav-menu__group" is-open="$ctrl.openSection === \'username\'" data-sumo-test="username">\n      <accordion-header ng-click="$ctrl.openMenuSection(\'username\')"\n        tooltip tooltip-content="{{$ctrl.navInfo.username.name}}" content-as-html="true" tooltip-position="right"\n        tooltip-theme="quicktip" data-sumo-test="username-header">\n        <icon-label class="bento-nav-menu__item -level-0" icon="\'user\'" label="::$ctrl.navInfo.username.name"\n          data-sumo-test="username-header-icon-label">\n       </icon-label>\n       <span class="notification-counter" ng-hide="$ctrl.intercomService.isTopNotificationHidden()"\n        ng-click="$ctrl.actions.showNotifications()" data-sumo-test="username-header-notification-counter">\n          {{$ctrl.intercomService.unreadCount}}\n       </span>\n      </accordion-header>\n        <div class="bento-nav-menu__item -sub" ng-click="$ctrl.actions.showNotifications()"\n          ng-if="$ctrl.intercomService.isIntercomEnabled()" data-sumo-test="username-notification">\n          <span class="-level-1" ng-bind="::\'workspaces.showNotifications\' | i18nText" data-sumo-test="username-notification-content">\n          </span>\n          <span class="notification-counter" ng-hide=$ctrl.intercomService.isNotificationHidden()>{{$ctrl.intercomService.unreadCount}}\n          </span>\n         </div>\n        <div ng-repeat="item in $ctrl.navInfo.usernamePages track by item.id" class="bento-nav-menu__item -sub"\n            ui-sref-active="is-active" ui-sref="{{item.state}}"\n            tooltip tooltip-content="{{item.tooltip}}" content-as-html="true" tooltip-position="right"\n            tooltip-theme="quicktip" data-sumo-test="username-item-{{item.id}}">\n          <span class="-level-1" ng-bind="::\'workspaces.\' + item.id | i18nText" data-sumo-test="username-item-{{item.id}}-content"></span>\n        </div>\n        <div class="bento-nav-menu__item -sub is-disabled" ng-if="$ctrl.navInfo.orgs.length > 1" data-sumo-test="username-changeOrg">\n          <span class="-level-1" ng-bind="::\'workspaces.changeOrg\' | i18nText" data-sumo-test="username-changeOrg-content"></span>\n        </div>\n        <div class="bento-nav-menu__item -sub -level-1" ng-class="::{ \'is-disabled\': org.org.isCurrent || !org.org.isEnabled }"\n          ng-repeat="org in $ctrl.navInfo.orgs track by org.id" ng-click="$ctrl.actions.onOrgItemClick(org)"\n          tooltip tooltip-content="{{::$ctrl.getFormattedTooltip((\'bento.deployment\' | i18nText), org.tooltip)}}"\n          content-as-html="true" tooltip-position="right" tooltip-theme="quicktip" data-sumo-test="username-org-{{org.name}}">\n          <icon-label icon="::org.icon" label="::org.name" data-sumo-test="username-org-{{org.name}}-icon-label"></icon-label>\n        </div>\n        <div class="bento-nav-menu__item -sub" ng-click="$ctrl.actions.signOut()" ng-if="::$ctrl.showSignout"\n          data-sumo-test="username-sign-out">\n          <span class="-level-1" ng-bind="::\'workspaces.signOut\' | i18nText" data-sumo-test="username-sign-out-content"></span>\n        </div>\n        <div class="bento-nav-menu__item -sub" ng-if="::$ctrl.showRequestUpgrade"\n          ui-sref="app.account.manage-plan" ui-sref-active="is-active" data-sumo-test="username-upgrade">\n          <span class="-level-1 md-raised md-accent md-button" ng-bind="::\'workspaces.upgrade\' | i18nText"\n            data-sumo-test="username-upgrade-content"></span>\n        </div>\n    </accordion>\n  '};class nt{constructor(e){this.$element=e}$onInit(){this.$element.addClass("external-link")}}nt.$inject=["$element"];const at={controller:nt,bindings:{linkUrl:"@",label:"<",icon:"<"},template:'\n    <div class="external-link__label" ng-bind="::$ctrl.label" data-sumo-test="external-link-label"></div>\n    <div class="external-link__icon">\n        <md-icon class="size-14" md-svg-icon="{{::$ctrl.icon}}" data-sumo-test="external-link-icon"></md-icon>\n    </div>\n  '};var st=i(75540);class ot{constructor(e,t,i,r,n){this.bentoNavHelperService=e,this.cheatsheetDialogService=t,this.viewServices=i,this.workspacesService=r,this.helpNavigationService=n;const a=st.Bg;this.constantHelpModel=s.extend({},a)}getNavItems(e){return this.bentoNavHelperService.toNavModels(this.getFolderModels(e))}getFolderModels(e){return e?this.constantHelpModel.children.filter((e=>"featureRequests"!==e.id)):this.constantHelpModel.children}run(e){switch(e.id){case st.rz.SERVICE_STATUS:this.helpNavigationService.showServiceStatus();break;case st.rz.COMMUNITY:this.helpNavigationService.showCommunity(e.linkURL);break;case st.rz.FEATURE_REQUESTS:this.helpNavigationService.showFeatureRequests(e.linkURL);break;case st.rz.SUPPORT:this.helpNavigationService.showSupport(e.linkURL);break;case st.rz.PRIVACY_POLICY:this.helpNavigationService.openURL(e.linkURL);break;case st.rz.SHORTCUTS:this.showShortcuts();break;default:const t=-1===e.helpId?this.getHelpTopicId():e.helpId;this.helpNavigationService.showHelp({id:t})}}showShortcuts(){const e=$("html").hasClass("windows");this.cheatsheetDialogService.openCheatsheet(e)}getHelpTopicId(){const e=this.workspacesService.getCurrent().currentView;return this.viewServices.getService(e.type).getHelpId(e)}}ot.$inject=["bentoNavHelperService","cheatsheetDialogService","viewServices","workspacesService","helpNavigationService"];class lt{constructor(e){this.manageResolveService=e}getNavItems(){return this.manageResolveService.resolvePages("manage")}}lt.$inject=["manageResolveService"];class ct{constructor(e){this.manageResolveService=e}getNavItems(){return this.manageResolveService.resolvePages("administration")}}ct.$inject=["manageResolveService"];var dt=i(16193);class ut{constructor(e,t,i,r,n){this.i18n=e,this.manageResolveService=t,this.$window=i,this.savePromptService=r,this.$mdToast=n}getNavItems(){return this.manageResolveService.resolvePages("username")}getUserGroupItem(){const e=E.currentUserHelper.get();return{id:"username",name:`${e.firstName} ${e.lastName} (${e.org.name})`,isGroupHeader:!0}}getOrgItems(){return _.chain(E.currentUserHelper.getSwitchableOrgs()).map((e=>({icon:e.isCurrent?"check":void 0,name:e.displayName,id:e.deploymentId,org:e,tooltip:this.getDeploymentTooltip(e)}))).sortBy((e=>e.name)).value()}signOut(e=!1){if(!e&&this.savePromptService.shouldShowPrompt()){this.savePromptService.goToPromptTab()&&this.savePromptService.openPrompt({dialogTitle:this.i18n.get("content.savePromptSignoutTitle"),confirmText:this.i18n.get("content.savePromptSignoutConfirmText")}).then((e=>{e&&this.signOut(!0)}))}else dt.loginService.signOut()}openSumoSecurity(){const e=E.currentUserHelper.getDynamicProperty("cse_tenant_name");(0,D.legacyHttpGet)(`/json/v1/authentication/generateCseJwt?tenantName=${e}`).then((e=>{this.$window.open(e.returnURL,"_blank","noopener")})).catch((e=>{const t=F.keyedErrors[e.errors[0].key];this.$mdToast.show(this.$mdToast.error().textContent(t))}))}openCloudSoar(){const e=E.currentUserHelper.getDynamicProperty("jwt_integration_cloudSoar_tenant_name");(0,D.legacyHttpGet)(`/json/v1/authentication/generateJwt?integrationName=cloudSoar&tenantName=${e}`).then((e=>{this.$window.open(e.returnURL,"_blank","noopener")})).catch((e=>{var t,i;const r=e.errors[0],n=null!==(t=F.keyedErrors.integration_unlabeled)&&void 0!==t?t:"";let a=n;"string"==typeof r.key&&""!==r.key.trim()?a=null!==(i=F.keyedErrors[r.key])&&void 0!==i?i:n:"string"==typeof r.message&&(a=r.message),this.$mdToast.show(this.$mdToast.error().textContent(a))}))}onOrgItemClick(e,t=!1){const i=e.org,r=!t&&this.savePromptService.shouldShowPrompt();if(r||!i||i.isCurrent){if(r){this.savePromptService.goToPromptTab()&&this.savePromptService.openPrompt({dialogTitle:this.i18n.get("content.savePromptOrgTitle"),confirmText:this.i18n.get("content.savePromptOrgConfirmText")}).then((t=>{t&&this.onOrgItemClick(e,!0)}))}}else this.$window.SumoApp&&(this.$window.SumoApp.isSwitchingContext=!0),(0,D.legacyHttpPost)("/json/v1/authentication/switchOrganization",{organizationId:i.orgId,userId:i.userId,deployment:i.deployment}).then((({redirectUrl:e,destinationUrl:t,jwt:i})=>dt.loginService.signOut(t||e,i))).catch((e=>{this.$window.SumoApp&&(this.$window.SumoApp.isSwitchingContext=!1),$.logWarnLocal("Error switching orgs: ",e)}))}capitalizeFirstWord(e){return _.isString(e)?e.charAt(0).toUpperCase()+e.substring(1):""}getDeploymentTooltip(e){return this.capitalizeFirstWord(e.deployment)+(e.isEnabled?"":this.i18n.get("bento.disabled_deployment"))}}ut.$inject=["i18n","manageResolveService","$window","savePromptService","$mdToast"];class pt{constructor(e,t,i,r,n,a){this.bentoManageNavService=e,this.bentoHelpNavService=t,this.bentoUserNavService=i,this.adminNavService=r,this.currentUserHelper=n,this.intercomService=a,this.updateProgress=e=>{this.showProgressView=e}}showRequestUpgrade(){return this.currentUserHelper.hasPrivilege("RequestUpgradeButton")}showUpgrade(){return this.currentUserHelper.hasPrivilege("AccountUpgradeAccess")}showSignout(){return!this.currentUserHelper.getOrg().typeHelpers.isHeroku}getNavInfo(){return{manage:this.bentoManageNavService.getNavItems(),administration:this.adminNavService.getNavItems(),help:this.bentoHelpNavService.getNavItems(this.currentUserHelper.get().isSupportAccount),username:this.bentoUserNavService.getUserGroupItem(),usernamePages:this.bentoUserNavService.getNavItems(),orgs:this.bentoUserNavService.getOrgItems()}}getFolderModels(){return{}}getNavActions(){return{onHelpItemClick:e=>this.bentoHelpNavService.run(e),signOut:()=>this.bentoUserNavService.signOut(),onOrgItemClick:e=>this.bentoUserNavService.onOrgItemClick(e),showNotifications:()=>this.intercomService.showNotifications(),openSumoSecurity:()=>this.bentoUserNavService.openSumoSecurity(),openCloudSoar:()=>this.bentoUserNavService.openCloudSoar(),openNewKansoTab:()=>(0,g.openNewKansoTab)()}}}pt.$inject=["bentoManageNavService","bentoHelpNavService","bentoUserNavService","adminNavService","currentUserHelper","intercomService"];var ht=i(89867),mt=i(33481),gt=i(15691);const yt=i(16589);const vt=new class{resumeMiniProgressView(e){new yt({txnId:e,launchSearchImmediately:!0,query:{met:""}}).render()}},ft={users:[{id:"users",title:"manage.groups.users.users",privilege:"UsersTabAccess",helpId:1006},{id:"roles",title:"manage.groups.users.roles",privilege:"RolesTabAccess",helpId:5234}],account:[{id:"overview",title:"manage.groups.account.overview",privilege:"AccountOverviewAccess",helpId:2e3},{id:"data-management",title:"manage.groups.account.dataManagement",privilege:"AccountDataManagementAccess",helpId:5115},{id:"manage-payment",title:"manage.groups.account.managePayment",privilege:"ManagePaymentTabAccess",helpId:5437},{id:"manage-plan",title:"manage.groups.account.managePlan",privilege:"AccountUpgradeAccess",helpId:5417},{id:"beta-participation",title:"manage.groups.account.betaParticipation",privilege:"AccountBetaParticipationAccess",helpId:900}],organizations:[{id:"manage-accounts",title:"manage.groups.organizations.manage-accounts",privilege:"ViewOrganizationsAccess"}],collection:[{id:"collection",title:"manage.groups.collection.collection",privilege:"CollectorsAccess",helpId:1005},{id:"status",title:"manage.groups.collection.status",privilege:"CollectorsAccess",helpId:1004},{id:"ingest",title:"manage.groups.collection.ingest",privilege:"IngestAccess",helpId:5235},{id:"archive",title:"manage.groups.collection.archive",privilege:"ArchiveAccess"},{id:"agents",title:"manage.groups.collection.agents",privilege:"AgentsAccess"},{id:"dataForwarding",title:"manage.groups.collection.dataForwarding",privilege:"CollectionDataForwardingAccess"}],config:[{id:"fields",title:"manage.groups.config.fields",privilege:"FieldsViewAccess",helpId:7018},{id:"field-extraction-rules",title:"manage.groups.config.fieldExtractionRules",privilege:"NewFERViewAccess",helpId:7017},{id:"partitions-page",title:"manage.groups.config.partitions",privilege:"PartitionsNewViewAccess",helpId:5231},{id:"scheduled-views",title:"manage.groups.config.scheduledViews",privilege:"ScheduledViewsAccess",helpId:5128},{id:"metrics-rules",title:"manage.groups.config.metricsRules",privilege:"MetricsRulesAccess",helpId:7015},{id:"connections",title:"manage.groups.config.connections",privilege:"ConnectionsViewAccess",helpId:1069},{id:"data-forwarding",title:"manage.groups.config.dataForwarding",privilege:"DataForwardingAccess",helpId:5165},{id:"metrics-extraction",title:"manage.groups.config.metricsExtraction",privilege:"MetricsExtractionAccess",helpId:7015},{id:"metrics-transformation-rules",title:"manage.groups.config.metricsTransformationRules",privilege:"MetricsTransformationRulesAccess",helpId:7019}],"logs-config":[{id:"fields",title:"manage.groups.logsConfig.fields",privilege:"FieldsViewAccess",helpId:7018},{id:"field-extraction-rules",title:"manage.groups.logsConfig.fieldExtractionRules",privilege:"NewFERViewAccess",helpId:7017},{id:"tree-parsers",title:"manage.groups.logsConfig.treeParsers",privilege:"ParsersViewAccess"},{id:"partitions-page",title:"manage.groups.config.partitions",privilege:"PartitionsNewViewAccess",helpId:5231},{id:"scheduled-views",title:"manage.groups.logsConfig.scheduledViews",privilege:"ScheduledViewsAccess",helpId:5128},{id:"data-forwarding",title:"manage.groups.logsConfig.dataForwarding",privilege:"DataForwardingAccess",helpId:5165}],"metrics-config":[{id:"metrics-rules",title:"manage.groups.metricsConfig.metricsRules",privilege:"MetricsRulesAccess",helpId:7015},{id:"metrics-extraction",title:"manage.groups.metricsConfig.metricsExtraction",privilege:"MetricsExtractionAccess",helpId:7015},{id:"metrics-transformation-rules",title:"manage.groups.metricsConfig.metricsTransformationRules",privilege:"MetricsTransformationRulesAccess",helpId:7019}],alerts:[{id:"unified-monitors",title:"manage.groups.alerts.unifiedMonitors",privilege:"UnifiedMonitorsViewAccess"},{id:"slo",title:"manage.groups.alerts.slo",privilege:"CanDisplayMonitoringSLOListView",badgeLabelKey:"common.new"},{id:"connections",title:"manage.groups.alerts.connections",privilege:"AlertsConnectionsViewAccess",helpId:1069},{id:"health-events",title:"manage.groups.alerts.healthEvents",privilege:"HealthEventsAccess"}],security:[{id:"password-policy",title:"manage.groups.security.passwordPolicy",privilege:"PasswordPolicyAccess",helpId:8595},{id:"whitelist",title:"manage.groups.security.whitelist",privilege:"WhitelistAccess",helpId:5454},{id:"access-keys",title:"manage.groups.security.accessKeys",privilege:"AccessKeysAccess",helpId:6690},{id:"policies",title:"manage.groups.security.policies",privilege:"PoliciesAccess",helpId:4041},{id:"saml",title:"manage.groups.security.saml",privilege:"SAMLAccess",helpId:4016},{id:"installation-tokens",title:"manage.groups.security.installationTokens",privilege:"InstallationTokensAccess"}]};var _t=i(68365),St=i(16826);class bt{constructor(e){this.workspace=e,this.state$=new St.BehaviorSubject({activeTabIndex:0,activeContexts:[]})}getState(){return this.state$.getValue()}getState$(){return this.state$.asObservable()}setState(e){this.state$.onNext(Object.assign(Object.assign({},this.getState()),e))}syncState(){this.workspace.actions.saveWorkspaceConfig()}}const{withSpan:Et,streamWithSpan:Tt,instrumentActions:xt}=(0,k.createTelemetry)({namespace:"Bento"});var Ct=i(16826);const At=F.WORKSPACE.PERSISTENT_VIEW_TYPES,wt={"app.lookup-view":"lookupView","app.information-models":"dataModels","app.parsers":"parsers","app.trace.analytics":"traceAnalytics","app.trace.details":"traceDetails","app.trace.spans":"spansAnalytics","app.serviceMap":"serviceMap"};class It{constructor(e,t,i,r,n,a,o,l,c){this.$window=e,this.$timeout=t,this.$q=i,this.$transitions=r,this.currentUserHelper=n,this.viewServices=a,this.logService=l,this.workspaceActions=c,this.views=[],this.currentView=void 0,this.indexedViews=[],this.windowTitleSuffix="Sumo Logic",this.broadcastMessageSubject=new Ct.Subject,this.navState={},this.setupOnWindowClose=()=>{$(window).on("beforeunload",(e=>{this.logService.flush(),k.datapointService.flush()}))},this.saveState=()=>{this.currentView&&"login"!==this.currentView.name&&this.actions.saveWorkspaceConfig()},this.getInitState=e=>e?_.find(this.views,(t=>t.id===e.id)):void 0,this.loadJsonModel=(e,t=!0)=>{this.id=e.id,t?this.views=_(e.views).map((e=>{let t;if(e.type)t=e.type;else if(e.name){t=_.chain(F.WORKSPACE.VIEWS).values().findWhere({stateName:e.name}).value().type}const i=this.viewServices.getService(t),r=i?i.createView(e):{name:"",id:"",title:"",type:"",icon:"",params:{}};return Object.assign(Object.assign({fromLastSession:!0},r),e)})):(e.currentViewState.id="home",this.views=[]),(0,g.isKansoEnabled)()&&(e.currentViewState.id="home");const i=this.getInitState(e.currentViewState);this.indexedViews=e.indexedViews,this.sideNavStateService.setState(e.navState||{isClosed:e.navClosed,width:e.navWidth});i&&i.name&&""!==i.name&&!this.$window.loadedFromURL&&"login"!==i.name&&"default"===this.id&&this.go(i),this.broadcastViewMessage({type:F.WORKSPACE.VIEW_MESSAGE_TYPES.INITIAL_VALUE,arguments:{navClosed:this.navState.isClosed}})},this.onEnter=(e,t,i)=>{const r=t.$to().data;if(r&&r.onEnter){const n=s.copy(r.onEnterInject);n.push(r.onEnter),i.invoke(n,null,{$stateParams:e,$transition$:t})}},this.updateContentItemId=(e,t)=>{this.views=this.views.map((i=>(i.id!==e||(i.params.contentItemId=t),i))),this.saveState()},this.updateTitle=(e,t)=>{const i=this.findView(e);return!!i&&(i.title=t,this.$timeout((()=>{this.coordinateBentoTabs(i)})),this.saveState(),!0)},this.shouldReplaceTempState=(e,t)=>!e||t,this.updateTempStateData=(e,t,i)=>{const r=this.findView(e);r&&(r.tempStateData=this.shouldReplaceTempState(r.tempStateData,i)?t:Object.assign(Object.assign({},r.tempStateData),t))},this.setBrowserTitle=e=>{if(e===this.currentView){const t=U.WINDOW_TYPE_TITLE[e.type],i=[...e.title?[e.title]:[],...t?[t]:[],this.windowTitleSuffix];window.document.title=i.join(" | ")}},this.coordinateBentoTabs=e=>{this.setBrowserTitle(e)},this.viewsOfType=e=>this.views.filter((t=>t.type===e)),this.addView=(e,t,i=!1)=>Et("Workspace.addView",{attributes:{"workspace.view.name":e.name,"workspace.view.title":e.title}},(()=>{let r=this.$q.resolve();if(this.actions.hasReachedMemoryLimit())return void this.handleMaxTabLimitReached(e);const{isDrillDown:n}=e;return this.findView(e.id)||this.insertView(e,n),i?(this.setCurrentView(e),requestAnimationFrame((()=>{null==t||t(e)}))):r=this.go(e).then((()=>{this.setCurrentView(e),requestAnimationFrame((()=>{null==t||t(e)}))})),r})),this.callServiceBeforeRemove=e=>{_.each(e,(e=>{const t=this.viewServices.getService(e.type);t&&_.isFunction(t.beforeRemove)&&t.beforeRemove(e,this)}))},this.callServiceBeforeWindowClose=e=>{_.each(e,(e=>{const t=this.viewServices.getService(e.type);t&&_.isFunction(t.beforeWindowClose)&&t.beforeWindowClose(e)}))},this.findViewById=e=>_.findWhere(this.views,{id:e}),this.removeViewById=e=>{const t=this.findViewById(e);t&&this.removeView(t)},this.removeView=e=>{var t;let i=this.$q.reject();if(!e.notRemoveable){this.callServiceBeforeRemove([e]);let r=this.views.indexOf(e);if(r>=0){this.views=_.without(this.views,e),this.areAllViewsNotRemoveable()?r=0:r>=this.views.length&&r--;const n=e.id===(null===(t=this.currentView)||void 0===t?void 0:t.id);n&&(this.currentView=void 0),i=n?this.go(this.views[r]):this.$q.when(),i=i.then((()=>(this.actions.saveWorkspaceConfig(),e)))}}return i},this.removeAllViews=(e,t)=>{const i=[],r=[];let n,a;for(n of this.views)n.id===F.WORKSPACE.VIEWS.HOME.type&&(a=n),n.notRemoveable||n===e?i.push(n):r.push(n);this.callServiceBeforeRemove(r);return(this.currentView&&_.findWhere(r,{id:this.currentView.id})?this.go(e||a):this.$q.when()).then((()=>{this.views=i,this.actions.saveWorkspaceConfig(),t&&t(r)}))},this.removeViews=(e,t)=>{const i=this.views.filter((t=>t.notRemoveable||e.indexOf(t)<0)),r=Boolean(this.currentView&&this.findView(this.currentView.id))&&e.some((e=>e===this.currentView))?this.go(i[i.length-1]):this.$q.when();return this.callServiceBeforeRemove(e),r.then((()=>{this.views=i,this.actions.saveWorkspaceConfig(),t&&t(e)}))},this.findView=e=>this.views.find((({id:t})=>t===e)),this.findSavedMetricView=e=>this.views.find((({params:{contentItemId:t}})=>t===e)),this.viewExists=e=>!!this.findView(e),this.showView=e=>{g.applicationState.name===e.name&&g.applicationState.params.viewId===e.id||this.go(e,Object.assign({viewId:e.id,subId:""},e.params)).then((()=>{this.setCurrentView(e)}))},this.enterEditMode=(e,t)=>{e.editMode||e.isStatic||(e.tmpTitle=t||e.title,e.editMode=!0,this.showView(e))},this.entityInspectorDrillDown=e=>{switch(e.type){case"search":this.handleSearchDrillDown({data:{title:e.data.title,queryString:e.data.queryString,timeRange:{startMillis:e.data.timeRange.from.epochMillis,endMillis:e.data.timeRange.to.epochMillis},timeZone:(0,ht.getUserTimeZone)()},isMetrics:!1,fromMetricsSearch:!1,fromNewDashboard:!0});break;case"metricsExplorer":this.handleInvestigationDrillDown({title:e.data.title,timeRange:(0,f.convertBeginBoundedTimeRangeToTimeDetails)(e.data.timeRange),visualizationSelectedType:f.VisualizationSelectedType.TIME_SERIES,visualizationSettings:{general:Object.assign({},f.defaultGeneralSettings)},queries:[{type:"AdvancedMetricsQuery",metricsQueryMode:f.QueryModes.ADVANCED,queryString:e.data.queryString,queryType:f.QueryTypes.METRICS,queryKey:"A"}]});break;case"explore":this.handleExploreDrillDown({drillDownId:e.data.drillDownId,drillDownVariables:e.data.drillDownVariables,timeRange:e.data.timeRange?{startTime:e.data.timeRange.from.epochMillis,endTime:e.data.timeRange.to.epochMillis}:void 0,hierarchyId:e.data.hierarchyId,entitiesPath:e.data.entitiesPath});break;case"traces":this.handleTracesDrillDown(e);break;case"spans":this.handleSpansDrillDown(e);break;case"rootCauseExplorer":this.handleRootCauseExplorerDrillDown(e);break;case"serviceMap":this.handleServiceMapDrillDown(e)}},this.handleSearchDrillDown=({data:e,isMetrics:t,fromMetricsSearch:i=!1,fromNewDashboard:r=!1})=>{if(t)this.viewServices.getService(F.WORKSPACE.VIEWS.METRICS.type).drilldown({panel:e,type:r?_t.zr.NEW_DASHBOARD:_t.zr.DASHBOARD},this.id);else{const t=this.viewServices.getService(F.WORKSPACE.VIEWS.SEARCH.type);i?t.simpleSearchDrillDown(e):e.fromLiveTailPopout||r?t.simpleSearchDrillDown(e,e.fromLiveTailPopout):t.panelDrilldown(e)}},this.handleInvestigationDrillDown=e=>{(0,g.drillDownToMetricsExplorer)(e)},this.handleExploreDrillDown=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.EXPLORE.type).drillDown(e)},this.handleTracesDrillDown=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.TRACE_ANALYTICS.type).drillDownFromEntityInspector(e)},this.handleSpansDrillDown=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.SPANS_ANALYTICS.type).drillDownFromEntityInspector(e)},this.handleRootCauseExplorerDrillDown=e=>{this.openRootCauseExplorer(e.data.options)},this.handleServiceMapDrillDown=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.SERVICE_MAP.type).drillDown({title:e.data.title,source:"dashboard",application:e.data.application,pressedService:e.data.service})},this.drillDownToUnifiedMonitors=(e,t)=>{g.applicationState.go("app.alerts.unified-monitors",{selectedRows:e,folderId:t},{inherit:!1})},this.handleInsightContextPageDrillDown=(e,t)=>{this.viewServices.getService(F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE.type).drillDown(e,t)},this.handleAlertPageListDrillDown=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE_LIST.type).drillDown(e)},this.handleSloPageDrillDown=(e,t)=>{this.viewServices.getService(F.WORKSPACE.VIEWS.SLO_PAGE.type).drillDown(e,t)},this.getTabByType=e=>this.views.find((t=>t.type===e)),this.setTabBadge=({value:e,title:t,view:i})=>{i?(i.data=Object.assign(Object.assign({},i.data),{badge:e,badgeTitle:t}),mt.tabBadgeService.updateBadge$.next(i)):$.logWarnLocal("setTabBadge: view is not defined")},this.toggleToDashboard=(e,t,i,r)=>{const n=i||e;if(this.findView(n))return this.openDashboardTab(e,t,i,r)},this.openDashboardTab=(e,t,i,r)=>{const n=i||e;return this.addView({name:F.WORKSPACE.VIEWS.DASHBOARD.stateName,id:n,title:F.WORKSPACE.VIEWS.DASHBOARD.drilldownTitle,params:_.extend({viewId:n},r||{}),type:F.WORKSPACE.VIEWS.DASHBOARD.type,icon:F.WORKSPACE.VIEWS.DASHBOARD.icon,isDrillDown:!0})},this.openNewDashboardTab=(e,t=F.WORKSPACE.VIEWS.NEWBOARD.drilldownTitle,i={isSavedDashboard:!1})=>this.addView({name:F.WORKSPACE.VIEWS.NEWBOARD.stateName,id:e,title:t,params:Object.assign({viewId:e},i),type:F.WORKSPACE.VIEWS.NEWBOARD.type,icon:F.WORKSPACE.VIEWS.NEWBOARD.icon,isDrillDown:!0}),this.beforeWindowClose=()=>{this.callServiceBeforeWindowClose(this.views)},this.setViews=e=>{e.length>0&&(this.views=[...e],this.saveState())},this.actions=c,this.sideNavStateService=new bt(this),this.setupSideNavState();const d=localStorage.getItem("ui.justLoggedIn")&&"true"===localStorage.getItem("ui.justLoggedIn");localStorage.removeItem("ui.justLoggedIn");let u=!0;try{d&&!this.currentUserHelper.getUserSetting("reopenPreviousTabs")&&(u=!1)}catch(e){this.actionsForCurrentUser.updateUserSetting({key:"reopenPreviousTabs",value:!0})}this.actionsForCurrentUser=E.currentUserActions.getActionCreators(),"string"==typeof o?(this.id=o,this.openNav()):this.loadJsonModel(o,u),this.setupAppPulseLogger(),this.setupPersistentTabs(),this.doInitialTasks(),this.setupOnWindowClose(),this.setupMicroserviceViewMessageDispatch()}setupMicroserviceViewMessageDispatch(){this.broadcastMessageSubject.subscribe((e=>{(0,gt.dispatch)({type:gt.constants.messageTypes.VIEW_MESSAGE,payload:e},gt.constants.moduleNames.BROADCAST)}))}setupSideNavState(){this.sideNavStateService.getState$().subscribe((e=>{this.navState=e}))}setupAppPulseLogger(){k.appPulseLogger.subscribeData("workspace",(()=>{var e,t;return{tabs:_.countBy(this.views,(e=>e.type)),leftNav:{width:Math.round(this.navState.width),isOpen:this.navState.isClosed?0:1},activeTab:{id:null===(e=this.currentView)||void 0===e?void 0:e.id,type:null===(t=this.currentView)||void 0===t?void 0:t.type}}}))}closeNav(){this.sideNavStateService.setState({isClosed:!0})}openNav(){this.sideNavStateService.setState({isClosed:!1})}setNavWidth(e){this.sideNavStateService.setState({width:e})}onExit(e){const t=this.$transitions.onExit({},(()=>{e(t)}));return t}getViewType(e){if(wt[e])return wt[e];{const t=e.split(".");return t.length>1?t[1]:t[0]}}checkTabPrivileges(e){if(e.privilege)return this.currentUserHelper.hasPrivilege(e.privilege);const t=ft[e.id]||[];return 0===t.length||t.some((e=>!e.privilege||this.currentUserHelper.hasPrivilege(e.privilege)))}setupPersistentTabs(){const e=this.views.filter((e=>-1===At.indexOf(e.type)&&this.checkTabPrivileges(e))),t=At.filter((e=>e!==F.ALERT_LIST_TYPE||this.currentUserHelper.hasPrivilege("CanDisplayAlertResponsePageListView"))).map((e=>this.viewServices.getService(e).createView()));this.views=t.concat(e)}setCurrentView(e){this.logPageVisit(e),this.currentView=e,this.coordinateBentoTabs(e),this.workspaceActions.saveWorkspaceConfig(),g.headerBarService.resetProps()}insertView(e,t=!1){const i=this.currentView;if(t&&i){const t=_.findIndex(this.views,(e=>e.id===i.id))+1;this.views.splice(t,0,e),this.views=this.views.slice()}else this.views=this.views.concat(e)}handleMaxTabLimitReached(e){let t=this.currentView;this.actions.showMaxTabWarning(),t||(t=this.views[this.views.length]),this.go(t).then((()=>this.viewServices.exitStickyView(e)))}areAllViewsNotRemoveable(){return this.views.every((({notRemoveable:e})=>e))}go(e,t=e.params){this.logPageVisit(e);const i=e.currentStateName?e.currentStateName:e.name;return g.applicationState.go(i,t,{inherit:!1})}openRootCauseExplorer(e){this.viewServices.getService(F.WORKSPACE.VIEWS.ANOMALIES.type).goToNewTab(e)}broadcastViewMessage(e){this.broadcastMessageSubject.onNext(e)}getViewMessage$(){return this.broadcastMessageSubject.asObservable().startWith({type:F.WORKSPACE.VIEW_MESSAGE_TYPES.INITIAL_VALUE,arguments:{navClosed:this.navState.isClosed}})}doInitialTasks(){const e=localStorage.getItem("ui.setupWizard.transactionId");e&&vt.resumeMiniProgressView(e)}logPageVisit(e){const t=e.type?e.type.toLowerCase():"unknown",i={module:"workspaces",component:"workspace",action:"pageVisit",params:Object.assign(Object.assign({},e.params),{page:"group"===t?e.params.groupId:t})};this.logService.user(i)}}function Rt(e,t,i,r,n,a){return{getInstance:(s,o,l)=>new It(e,t,i,r,n,o,s,a,l)}}Rt.$inject=["$window","$timeout","$q","$transitions","currentUserHelper","logService"];class Dt{constructor(e,t){this.$location=t,this.history=[],this.getPrevState=()=>this.history.length>1?this.history[this.history.length-2]:"",this.back=()=>{const e=this.history.length>1?this.history.splice(-2)[0]:"/";this.$location.path(e)},e.$on("$locationChangeSuccess",(()=>{this.history.length>=10&&this.history.shift(),this.history.push(t.$$path)}))}}Dt.$inject=["$rootScope","$location"];class Ot extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.LIBRARY}createView(e={}){const t=super.createView(e),i=t.params.workspaceId=this.getWorkspaceId(e)||"default";return t.title=(0,re.getAngularInjectable)("i18n").get("workspaces.tabNames.library"),t.isStatic=!0,t.notRemoveable=!0,t.params=Object.assign({workspaceId:i,viewId:this.viewInfo.type},e.params),t}getViewParams(){return[...super.getViewParams(),"folderId","q"]}}class Nt extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.GROUP}createView(e){const t=e||{},i=_.getPath(t,"params.groupId")||"",r=t.id||i||(0,re.getAngularInjectable)("i18n").get("workspaces.manageService").defaultId,n=t.title||this.getTitle(r),a=super.createView(e);return a.name=this.viewInfo.stateName+"."+i,a.id=r,a.title=n,a.isStatic=!0,a}getHelpId(e){const t=ft[e.params.groupId]||ft[e.id];return _.find(t,(t=>t.id===e.params.selectedTab)).helpId}sideNavChange(){return this.getCurrentWorkspaceViewMessage$().filter((e=>e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.RESIZE||e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.INITIAL_VALUE))}getViewClassName$(){return this.sideNavChange().map((e=>e.arguments.navClosed?"-navClosed":""))}getTitle(e){const t=(0,re.getAngularInjectable)("i18n").get("workspaces.manageService");return t.manageSections[e]||t.manageSections.default}}class Mt extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.PREFERENCES}createView(e){const t=super.createView(e);return t.title=(0,re.getAngularInjectable)("i18n").get("workspaces.tabNames.preferences"),t.params.workspaceId=this.getWorkspaceId(e),t.params.viewId=this.viewInfo.type,t}getViewParams(){return[...super.getViewParams(),"initialViewParameters"]}isActionDisabled(e,t){let i;switch(t){case F.WORKSPACE.MENU_ACTIONS.rename.action:i=!this.canBeRenamed(e);break;default:i=!1}return i}canBeRenamed(e){return!1}}class kt extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.DEVELOPERS}createView(e){const t=super.createView(e);return t.title=(0,re.getAngularInjectable)("i18n").get("privileges.DEVELOPER_SECTION_TITLE"),t.isStatic=!0,t}}var Lt=i(80103);class Pt{constructor(e,t,i){this.$window=e,this.$rootScope=t,this.currentUserHelper=i,this.shouldHideTopNotification=!0,this.shouldHideNotification=!0,this.unreadCount=0}showNotifications(){this.hideNotificationCounters(),this.$window.Intercom("show")}hideNotificationCounters(){this.shouldHideTopNotification=!0,this.shouldHideNotification=!0}initializeNotifications(){if(this.isIntercomEnabled()){const e=this.$rootScope.$watch((()=>_.isUndefined(_.getPath(this,"$window.Intercom"))),((t,i)=>{if(t!==i){const t=this.onUnreadCountChangeListener.bind(this);this.$window.Intercom("onUnreadCountChange",t),this.$window.Intercom("update"),e()}}))}}onUnreadCountChangeListener(e){e>this.unreadCount?(this.shouldHideNotification=!1,"username"!==this.openSection&&(this.shouldHideTopNotification=!1)):this.hideNotificationCounters(),this.unreadCount=e,this.$rootScope.$applyAsync()}openMenuSection(e){this.openSection=e,"username"===e&&(this.shouldHideTopNotification=!0)}isIntercomEnabled(){return this.currentUserHelper.hasFeatureFlag("UIIntercomWidgetOverride")}isTopNotificationHidden(){return this.shouldHideTopNotification}isNotificationHidden(){return this.shouldHideNotification}}Pt.$inject=["$window","$rootScope","currentUserHelper"];class Ft{constructor(e,t){this.$rootScope=e,this.drilldownDashboardService=t,this.openDashboard=(e,t)=>{this.drilldownDashboardService.forcedPopoutDashboardDrilldown({dashboardKey:e,type:"report"},{params:{}})},this.openLiveTails=e=>{this.$rootScope.$broadcast("popOutLiveTail",e)},g.windowCommunicatorBaseService.initialize()}launchInWindow(e,t){switch(e){case F.WORKSPACE.VIEWS.DASHBOARD.type:this.openDashboard(t);break;case F.WORKSPACE.VIEWS.LIVE_TAIL.type:this.openLiveTails(t)}}}Ft.$inject=["$rootScope","drilldownDashboardService"];class Ut{constructor(e,t,i,r,n){this.hotkeys=e,this.launchService=t,this.setupWizardService=i,this.cheatsheetDialogService=r,this.currentUserHelper=n,this.hasSecurityPageAccess=()=>this.currentUserHelper.hasPrivilege("PasswordPolicyAccess")||this.currentUserHelper.hasPrivilege("WhitelistAccess")||this.currentUserHelper.hasPrivilege("AccessKeysAccess")||this.currentUserHelper.hasPrivilege("PoliciesAccess")||this.currentUserHelper.hasPrivilege("SAMLAccess"),this.hasSettingsAccess=()=>this.currentUserHelper.hasPrivilege("ScheduledViewsAccess")||this.currentUserHelper.hasPrivilege("MetricsRulesAccess")||this.currentUserHelper.hasPrivilege("ConnectionsViewAccess")||this.currentUserHelper.hasPrivilege("DataForwardingAccess")||this.currentUserHelper.hasPrivilege("MetricsExtractionAccess"),this.initHotkeys=(e,t)=>{this.workspace&&t.id===this.workspace.id||(this.workspace=t,this.actions=e,this.buildHotkeys(),this.hotkeyList.forEach((e=>this.hotkeys.add(e))))},this.closeTab=e=>{const t=this.workspace.currentView;t&&(this.pendoTrackShortcut("alt+w","Close the current tab",t.name),this.actions.closeTab(t,e))},this.navigate=e=>{g.applicationState.go(e)},this.openSetupWizard=()=>{this.pendoTrackShortcut("alt+z","Open the Setup Wizard"),this.setupWizardService.openSetupWizard()},this.allowTabSwitchEvent=e=>{const t=e.target;return Boolean("TEXTAREA"!==t.nodeName||(0,re.getClosestElementByAttribute)(t,"data-sumo-container","search-input-code-editor"))},this.moveLeft=e=>{if(this.allowTabSwitchEvent(e)){const e=this.workspace.views,t=this.workspace.currentView;if(!t)return;const i=e.indexOf(t),r=0===i?e.length-1:i-1;this.pendoTrackShortcut("alt+[","Switch to the tab to the left of current tab",e[r].name),this.workspace.showView(e[r])}},this.moveRight=e=>{if(this.allowTabSwitchEvent(e)){const e=this.workspace.views,t=this.workspace.currentView;if(!t)return;const i=e.indexOf(t),r=i===e.length-1?0:i+1;this.pendoTrackShortcut("alt+]","Switch to the tab to the right of current tab",e[r].name),this.workspace.showView(e[r])}},this.duplicateOriginalSearchQuery=()=>{this.pendoTrackShortcut("alt+shift+d","Duplicate both the original query and time range in new tab","search-page"),this._duplicateSearch(!1,!0,F.WORKSPACE.MENU_ACTIONS.duplicateOriginal.action)},this.duplicateSearchQueryTimerange=()=>{this.pendoTrackShortcut("alt+shift+q","Duplicate both the current query and time range in new tab","search-page"),this._duplicateSearch(!1,!0)},this.duplicateSearchQuery=()=>{this.pendoTrackShortcut("alt+shift+n","Duplicate current query in a new tab (search only)","search-page"),this._duplicateSearch(!1)},this.duplicateSearchTimerange=()=>{this.pendoTrackShortcut("alt+shift+t","Duplicate current timerange in a new tab (search only)","search-page"),this._duplicateSearch(!0)},this.openCheatsheet=()=>{this.pendoTrackShortcut("shift+/","Open cheat sheet"),this.cheatsheetDialogService.openCheatsheet(this.isWindows)},this.addSearchView=()=>{this.pendoTrackShortcut("alt+s","Open a new Search tab","search"),this.actions.addView("search",F.WORKSPACE.shortcuts.sourceType)},this.addTraceAnalyticsView=()=>{this.currentUserHelper.hasFeatureFlag("UITraceAnalyticsPage")&&(this.pendoTrackShortcut("alt+a","Open a new Traces tab","traceAnalytics"),this.actions.addView("traceAnalytics",F.WORKSPACE.shortcuts.sourceType))},this.addSpansAnalyticsView=()=>{this.currentUserHelper.hasFeatureFlag("UISpansAnalyticsPage")&&(this.pendoTrackShortcut("alt+n","Open a new Spans Analytics tab","spansAnalytics"),this.actions.addView("spansAnalytics",F.WORKSPACE.shortcuts.sourceType))},this.addServiceMapView=()=>{this.currentUserHelper.hasFeatureFlag("UITraceAnalyticsServiceMap")&&(this.pendoTrackShortcut("alt+i","Open a new Traces Service Map tab","serviceMap"),this.actions.addView("serviceMap",F.WORKSPACE.shortcuts.sourceType))},this.addMetricsView=()=>{const e=this.currentUserHelper.hasUserAcceptedFeatureFlag("UIMetricsPage","prefersClassicMetrics")?F.WORKSPACE.VIEWS.INVESTIGATION.type:F.WORKSPACE.VIEWS.METRICS.type;this.pendoTrackShortcut("alt+m",`Open a new ${e} tab`,e),this.actions.addView(e,F.WORKSPACE.shortcuts.sourceType)},this.addLiveTailView=()=>{this.pendoTrackShortcut("alt+l","Open a new LiveTail tab","livetail"),this.actions.addView("livetail",F.WORKSPACE.shortcuts.sourceType)},this.addNewDashboardView=()=>{this.pendoTrackShortcut("alt+f","Open a new newDashboard tab","newDashboard"),this.actions.addView("newDashboard",F.WORKSPACE.shortcuts.sourceType)},this.addExplorerView=()=>{this.pendoTrackShortcut("alt+g","Open a new Explore tab","explore"),this.actions.addView("explore",F.WORKSPACE.shortcuts.sourceType)},this.addRootCauseExplorerView=()=>{this.pendoTrackShortcut("alt+r","Open a new Anomalies tab","anomalies"),this.actions.addView("anomalies",F.WORKSPACE.shortcuts.sourceType)},this.numkeyHandler=e=>{let t=0;if(e.keyCode)t=e.keyCode-49;else{if(!e.code)return;t=+e.code.replace("Digit","")-1}const i=t+1,r=this.workspace.views;-1===t?this.workspace.showView(r[r.length-1]):t<r.length&&this.workspace.showView(r[t]),this.pendoTrackShortcut("alt+"+i,`Switch to tab ${i}`,r[t].name)},this.pauseSearch=e=>{e.preventDefault(),this.pendoTrackShortcut("alt+shift+p","Pause a running search (current tab only)"),s.element("#search-query-pause").is(":visible")&&s.element("#search-query-pause").trigger("click")},this.popoutDashboard=e=>{const t=this.workspace.currentView;t&&t.type===F.WORKSPACE.VIEWS.DASHBOARD.type&&(this.pendoTrackShortcut("alt+d","Popout to new browser tab (dashboard only)"),this.launchService.launchInWindow(t.type,t.id))},this.isWindows=s.element("html").hasClass("windows"),this.mod=this.isWindows?"g ":"alt+",this.hotkeyList=[],this.hotkeys.includeCheatsheet=!1}pendoTrackShortcut(e,t,i="not specified"){const r={shortcutKeys:e,description:t,appRoute:i};k.logService.userTelemetry(r);try{null===pendo||void 0===pendo||pendo.track("Shortcut",r)}catch(e){console.info("Pendo Not Found")}}buildHotkeys(){let e;e=`${this.mod}l`,this.hotkeyList.push({combo:e,callback:this.addLiveTailView}),e=`${this.mod}s`,this.hotkeyList.push({combo:e,callback:this.addSearchView}),e=`${this.mod}a`,this.hotkeyList.push({combo:e,callback:this.addTraceAnalyticsView}),e=`${this.mod}n`,this.hotkeyList.push({combo:e,callback:this.addSpansAnalyticsView}),e=`${this.mod}i`,this.hotkeyList.push({combo:e,callback:this.addServiceMapView}),e="alt+shift+q",this.hotkeyList.push({combo:e,callback:this.duplicateSearchQueryTimerange}),e="alt+shift+n",this.hotkeyList.push({combo:e,callback:this.duplicateSearchQuery}),e="alt+shift+d",this.hotkeyList.push({combo:e,callback:this.duplicateOriginalSearchQuery}),e="alt+shift+t",this.hotkeyList.push({combo:e,callback:this.duplicateSearchTimerange}),e="alt+shift+p",this.hotkeyList.push({combo:e,callback:this.pauseSearch}),e="shift+/",this.hotkeyList.push({combo:e,callback:this.openCheatsheet}),e=`${this.mod}g`,this.hotkeyList.push({combo:e,callback:this.addExplorerView}),e="alt+[",this.hotkeyList.push({combo:e,callback:this.moveLeft,allowIn:["TEXTAREA"]}),e="alt+]",this.hotkeyList.push({combo:e,callback:this.moveRight,allowIn:["TEXTAREA"]}),e=`${this.mod}w`,this.hotkeyList.push({combo:e,callback:this.closeTab}),e=`${this.mod}d`,this.hotkeyList.push({combo:e,callback:this.popoutDashboard}),e=`${this.mod}z`,this.hotkeyList.push({combo:e,callback:this.openSetupWizard}),this.currentUserHelper.hasPrivilege("MetricsAccess")&&(e=`${this.mod}m`,this.hotkeyList.push({combo:e,callback:this.addMetricsView})),this.currentUserHelper.hasFeatureFlag("UIRootCauseExplorerPage")&&this.hotkeyList.push({combo:`${this.mod}r`,callback:this.addRootCauseExplorerView}),this.hotkeyList.push({combo:`${this.mod}f`,callback:this.addNewDashboardView});const t=`${this.mod}h`;this.hotkeyList.push({combo:t,callback:()=>{this.pendoTrackShortcut(t,"Switch to Home",F.WORKSPACE.shortcuts.routes.home),this.navigate(F.WORKSPACE.shortcuts.routes.home)}});const i=`${this.mod}b`;if(this.hotkeyList.push({combo:i,callback:()=>{this.pendoTrackShortcut(i,"Switch to Library",F.WORKSPACE.shortcuts.routes.library),this.navigate(F.WORKSPACE.shortcuts.routes.library)}}),this.currentUserHelper.hasPrivilege("UsersTabAccess")){const e=`${this.mod}u`;this.hotkeyList.push({combo:e,callback:()=>{this.pendoTrackShortcut(e,"Open the Users tab",F.WORKSPACE.shortcuts.routes.users),this.navigate(F.WORKSPACE.shortcuts.routes.users)}})}const r=`${this.mod}p`;if(this.hotkeyList.push({combo:r,callback:()=>{this.pendoTrackShortcut(r,"Open the Preferences tab",F.WORKSPACE.shortcuts.routes.preferences),this.navigate(F.WORKSPACE.shortcuts.routes.preferences)}}),this.hasSecurityPageAccess()){const e=`${this.mod}x`;this.hotkeyList.push({combo:e,callback:()=>{this.pendoTrackShortcut(e,"Open the Security page",F.WORKSPACE.shortcuts.routes.security),this.navigate(F.WORKSPACE.shortcuts.routes.security)}})}if(this.currentUserHelper.hasPrivilege("CollectorsAccess")){const e=`${this.mod}t`;this.hotkeyList.push({combo:e,callback:()=>{this.pendoTrackShortcut(e,"Open the Collection page",F.WORKSPACE.shortcuts.routes.collection),this.navigate(F.WORKSPACE.shortcuts.routes.collection)}})}if(this.currentUserHelper.hasPrivilege("MetricsAccess")){const e=`${this.mod}e`;this.hotkeyList.push({combo:e,callback:()=>{this.pendoTrackShortcut(e,"Open the Alerts page",F.WORKSPACE.shortcuts.routes.alerts),this.navigate(F.WORKSPACE.shortcuts.routes.alerts)}})}if(this.hasSettingsAccess()){const e=`${this.mod}c`;this.hotkeyList.push({combo:e,callback:()=>{this.pendoTrackShortcut(e,"Open the Settings page",F.WORKSPACE.shortcuts.routes.settings),this.navigate(F.WORKSPACE.shortcuts.routes.settings)}})}const n=`${this.mod}o`;this.hotkeyList.push({combo:n,callback:()=>{this.pendoTrackShortcut(n,"Open the Account page",F.WORKSPACE.shortcuts.routes.account),this.navigate(F.WORKSPACE.shortcuts.routes.account)}});for(let t=0;t<10;t++)e=`alt+${t}`,this.hotkeyList.push({combo:e,callback:this.numkeyHandler})}_duplicateSearch(e,t,i){this.actions.duplicateSearch(e,t,this.workspace.currentView,i)}}Ut.$inject=["hotkeys","launchService","setupWizardService","cheatsheetDialogService","currentUserHelper"];const Vt={name:"app.preferences",url:"/preferences",template:'<preferences-v2 ng-if="$ctrl.showNewUserPreferencesPage"></preferences-v2><preferences ng-if="!$ctrl.showNewUserPreferencesPage"></preferences><activation-overlay selector="preferences"></activation-overlay>',controller:ce,controllerAs:"$ctrl",params:{viewId:"preferences",initialViewParameters:void 0}};class Bt{constructor(e,t){this.currentUserHelper=e,this.$state=t}resetWorkspace(e){e.removeAllViews(),this.$state.go("app.home"),localStorage.removeItem("ui.justLoggedIn")}shouldClosePreviousTabs(){return localStorage.getItem("ui.justLoggedIn")&&"true"===localStorage.getItem("ui.justLoggedIn")&&!this.currentUserHelper.getUserSetting("reopenPreviousTabs")}}Bt.$inject=["currentUserHelper","$state"];class $t{constructor(e){this.workspacesService=e}setupContentView(e,t){const{workspaceId:i}=g.applicationState.params,{name:r}=g.applicationState.current,n=this.workspacesService.getWorkspace(i);if(r){const i=n.getViewType(r),a=n.findView(e||i);!a&&t?n.addView(t):a&&(a.params=Object.assign(Object.assign({},a.params),g.applicationState.params),n.setCurrentView(a))}}}$t.$inject=["workspacesService"];var Ht=i(43472),Wt=i.n(Ht),qt=i(63541),jt=i(83639),Qt=i.n(jt);const zt=({styleProps:e})=>x().createElement(qt.ThemeProvider,{theme:"brandLight"},x().createElement("div",{className:Wt()(null==e?void 0:e.curtain,Qt().curtain)},x().createElement(qt.Loader,{loaderType:"spinner",size:"extraLarge"})));var Gt=i(64176),Kt=i.n(Gt);const Yt=()=>Promise.all([i.e(5131),i.e(7931),i.e(7096),i.e(9346)]).then(i.bind(i,44916)),Zt=()=>Promise.all([i.e(5131),i.e(1654),i.e(7931),i.e(9792),i.e(5614),i.e(7096),i.e(5921),i.e(9346)]).then(i.bind(i,82009));i(38648);var Xt=i(72359),Jt=i.n(Xt);const ei=({title:e,onSaveEdit:t,onStartEdit:i,onExitEdit:r,isValidLabel:n,classes:a,inEditMode:s=!1})=>{const o=(0,T.useRef)(null),l=()=>{var e;const i=(null===(e=null==o?void 0:o.current)||void 0===e?void 0:e.value)||"";n(i)?t(i):o.current&&o.current.focus()},c=()=>{r()};return s?T.createElement(qt.Input,{"data-sumo-test":"inline-edit-input",inputRef:o,autoFocus:!0,fullWidth:!0,defaultValue:e,onBlur:l,className:a,onKeyDown:({keyCode:e})=>{const t={13:l,27:c}[e];"function"==typeof t&&t()}}):T.createElement("div",{className:a,onDoubleClick:()=>{i()}},e)};var ti=i(90661),ii=i.n(ti);const ri=e=>{const t=e.length;return t>=3?ii().badgeSize3:t>=2?ii().badgeSize2:ii().badgeSize1},ni=({children:e,className:t,dot:i=!0,title:r})=>T.createElement("span",{className:Wt()(ii().badge,ri(e),{[ii().badgeDot]:i},t),title:r},e),ai=e=>{const[t]=(0,T.useState)((()=>E.currentUserHelper.hasFeatureFlag("UIMonitorsSubscriptions")));return T.createElement(ni,Object.assign({},e,{dot:t}))},si=()=>!0,oi=({tabClickHandler:e,view:t,selected:i,innerRef:r,isDragging:n,onRenameView:a,dragHandleProps:s={},draggableProps:o={},canBeRenamed:l=!1,isEditing:c=!1,closeClickHandler:d=si,renameValidator:u=si,viewActionItems:p,onViewActionItemClick:h})=>{const{type:m,notRemoveable:g=!1}=t,[y,v]=(0,T.useState)(c),[f,_]=(0,T.useState)([]),[S,b]=(0,T.useState)(!1),[x,C]=(0,T.useState)(null),[A,w]=(0,T.useState)({top:0,left:0}),I=t?m:"",R=Jt()[I]||Jt().normal,D=Wt()("tab-navigator-react__tab",Jt().tab,R,{selected:i,[Jt().dragging]:n,[Jt().selected]:i,[Jt().permanentTab]:g,[`_${m}`]:g});(0,T.useEffect)((()=>{v(c)}),[c]),(0,T.useEffect)((()=>{if(p){let e=!1;const t=p.map((e=>e.isDisabled||Promise.resolve(!1)));return Promise.all(t).then((t=>{e||_(t)})),()=>{e=!0}}}),[p]);return t&&(g?T.createElement("div",{className:Wt()(D,{"parent-badge-hoverable":null===(O=t.data)||void 0===O?void 0:O.badge}),"data-sumo-test":"tab-navigator-permanent-tab",role:"button",onClick:()=>e(t)},T.createElement(qt.Icon,{name:t.icon,className:Jt().tabIcon}),(null===(N=t.data)||void 0===N?void 0:N.badge)&&T.createElement(ai,{title:Ge.j.get("workspaces.alertsTabBadgeTitle",t.data.badgeTitle,mt.ALERT_OBSOLETE_IN_DAYS)},t.data.badge)):(()=>{const n=e=>{C(e.currentTarget),w({top:e.clientY,left:e.clientX}),b(!0),e.stopPropagation(),e.preventDefault()};return T.createElement("div",Object.assign({className:D,"data-sumo-test":"tab-navigator-regular-tab",role:"button",onClick:()=>e(t),ref:r},s,o,{onContextMenu:n}),E.currentUserHelper.hasFeatureFlag("UISearchShowSpinnerOnTab")&&t.showLoader?T.createElement(qt.Loader,{loaderType:"spinner",size:"small"}):T.createElement(qt.Icon,{name:t.icon,className:Jt().tabIcon}),l&&a?T.createElement(ei,{title:t.title,onSaveEdit:e=>{a(e,t),v(!1)},inEditMode:y,onStartEdit:()=>v(!0),onExitEdit:()=>v(!1),isValidLabel:u,classes:Jt().tabText}):T.createElement("div",{className:Jt().tabText},t.title),t.editedState&&T.createElement(qt.Icon,{className:Jt().tabAsterisk,size:"small",color:i?"black-90":"otter",name:"asterisk","data-sumo-test":"asterisk"}),!y&&T.createElement("div",{className:Jt().tabActions},T.createElement(qt.Menu,{anchor:{element:x,position:A,transformOrigin:{vertical:"top",horizontal:"left"}},isOpen:S,"data-sumo-test":"tab-navigator-tab-action-menu",onContextMenu:e=>{C(null),b(!1),e.stopPropagation(),e.preventDefault()},onClose:()=>{C(null),b(!1)}},null==p?void 0:p.map(((e,i)=>T.createElement(qt.Menu.Item,{key:e.id,disabled:!!f.length&&f[i],"data-sumo-test":"tab-navigator-tab-action-menu-item",onClick:i=>{e.itemType!==F.WORKSPACE.MENU_ACTIONS.rename.action?h&&h(t,e,i.nativeEvent):v(!0)}},T.createElement(qt.Menu.Text,null,e.label))))),T.createElement(qt.Icon,{onClick:n,className:Jt().tabActionIcon,name:"kebab","data-sumo-test":"tab-navigator-action-menu-kebab"}),T.createElement(qt.Icon,{onClick:d,className:Jt().tabActionIcon,name:"x","data-sumo-test":"tab-navigator-action-menu-x"})))})());var O,N};var li=i(37222),ci=i(47835),di=i(67488),ui=i(7721),pi=i(74481),hi=i(75346);class mi extends T.Component{constructor(e){super(e),this.componentDidUpdate=e=>{e.tabNavRecalculationSubject!==this.props.tabNavRecalculationSubject&&this.subscribeToTabContainerResize(),this.props.actions.whenSelectedViewChanged(e.selectedView,this.props.selectedView)},this.componentDidMount=()=>{var e;const{tabNavRecalculationSubject:t}=this.props;t&&this.subscribeToTabContainerResize(),this.forceUpdateReactSubscribe=null===(e=this.props.forceUpdateReact)||void 0===e?void 0:e.subscribe((()=>{this.forceUpdate()}))},this.componentWillUnMount=()=>{var e;null===(e=this.forceUpdateReactSubscribe)||void 0===e||e.dispose()},this.getWindowResizeObservable=()=>(0,li.R)(window,"resize").pipe((0,ci.O)(void 0),(0,di.b)(10),(0,ui.U)(this.calculateMaxTabs),(0,pi.x)()),this.subscribeToTabNavRecalculationSubject=()=>{const{tabNavRecalculationSubject:e}=this.props;return e.subscribe((()=>{const e=this.calculateMaxTabs(),{userTabs:t,selectedIndex:i}=this.state,{tabOverflowReached:r,lowerVisibleTabIndex:n}=mi.getTabOverflowAndLowerVisibleIndex(t,i,e,this.state);this.setState({maxTabs:e,tabOverflowReached:r,lowerVisibleTabIndex:n}),this.calculateMaxTabs()}))},this.subscribeToTabContainerResize=()=>{const{subscription:e,selectedIndex:t,userTabs:i}=this.state;e&&"function"==typeof e.dispose&&e.dispose();const r=this.getWindowResizeObservable(),n=this.subscribeToTabNavRecalculationSubject();r.subscribe((e=>{const{tabOverflowReached:r,lowerVisibleTabIndex:n}=mi.getTabOverflowAndLowerVisibleIndex(i,t,e,this.state);this.setState({maxTabs:e,tabOverflowReached:r,lowerVisibleTabIndex:n})})),e!==n&&this.setState({subscription:n})},this.calculateMaxTabs=()=>{const{tabOverflowReached:e,userTabsContainer:t}=this.state,i=e?0:92,r=t.current&&t.current.clientWidth||0,n=Math.max(r-i,0);return Math.floor(n/110)||1},this.tabClickHandler=e=>{this.props.actions.showView(e)},this.closeActionHandler=e=>t=>{const{actions:i}=this.props;i.onCloseTabClick(e,t),t.preventDefault(),t.stopPropagation()},this.getVisibleUserTabs=e=>{const{lowerVisibleTabIndex:t,maxTabs:i}=this.state,{selectedView:r,renameValidator:n,canBeRenamed:a,actions:s,getViewActionItems:o}=this.props,l=[],c=Math.min(e.length,t+i);for(let i=t;i<c;i++){const c=e[i];if(c){const e=o(c);l.push(T.createElement(hi._l,{draggableId:c.id,index:i-t,key:c.id},((t,i)=>T.createElement(oi,{view:c,selected:r&&c.id===r.id,viewActionItems:e,tabClickHandler:this.tabClickHandler,closeClickHandler:this.closeActionHandler(c),innerRef:t.innerRef,renameValidator:n,onRenameView:s.onRenameView,onViewActionItemClick:s.onViewActionItemClick,canBeRenamed:a&&a(c),dragHandleProps:t.dragHandleProps,draggableProps:t.draggableProps,isDragging:i.isDragging}))))}}return l},this.onDragEnd=e=>{const{destination:t,source:i,draggableId:r}=e,{actions:n}=this.props,{userTabs:a,permanentTabs:s,lowerVisibleTabIndex:o}=this.state;if(!t)return;if(t.droppableId===i.droppableId&&t.index===i.index)return;const l=[...a],c=l.find((e=>e.id===r));c&&(l.splice(i.index+o,1),l.splice(t.index+o,0,c)),this.setState({userTabs:l,skipPropsMapping:!0},(()=>{n.setViews([...s,...l])}))},this.getPermanentTabs=e=>{const{selectedView:t}=this.props;return e.map(((e,i)=>e&&T.createElement(oi,{key:`sumo-permanent-tab-react-${i}`,view:e,selected:t&&t.id===e.id,tabClickHandler:this.tabClickHandler})))},this.getSideMenu=e=>!!e.length&&T.createElement(qt.Menu,{btnRenderer:e=>T.createElement("div",{className:`${Jt().sideMenu} ${Jt().tab}`,onClick:e},T.createElement(qt.Icon,{name:"kebab","data-sumo-test":"tab-navigator-side-menu-icon",className:Jt().sideMenuIcon}))},e.map(((e,t)=>T.createElement(qt.Menu.Item,{key:`tnr-menu-item-${t}`,"data-sumo-test":"tab-navigator-side-menu-item",onClick:()=>this.tabClickHandler(e)},T.createElement(qt.Menu.PrimaryAction,null,T.createElement(qt.Icon,{size:"medium",name:e.icon})),T.createElement(qt.Menu.Text,null,e.title))))),this.getAddTabButton=(e,t)=>T.createElement("div",{className:e},T.createElement(qt.Menu,{menuRenderer:e=>{const t=this.props.getNewViewItems();return T.createElement(qt.List,{border:!1},null==t?void 0:t.map(((t,i)=>T.createElement(qt.List.Item,{key:t.id||i,disabled:t.disabled,"data-sumo-test":"tab-navigator-add-tab-menu-items",onClick:()=>{this.props.actions.addViewFromNewTab(t.itemType),e.closeMenu()},styles:{border:"none"}},T.createElement(qt.List.PrimaryAction,null,T.createElement(qt.Icon,{size:"medium",name:t.icon||""})),T.createElement(qt.List.Text,{"data-sumo-test":"tab-navigator-add-tab-menu-items_label"},t.label),T.createElement(qt.List.SecondaryAction,null,t.shortcutLabel)))))},btnRenderer:e=>T.createElement(qt.Button,{icon:"plus",size:"small",color:"primary",className:`tab-navigator-react__button-tab ${Jt().addTabButton}`,"data-sumo-test":"tab-navigator-add-tab-button",onClick:t=>{e(t)},disabled:t},Ge.j.get("common.new"))})),this.state={permanentTabs:[],userTabs:[],tabOverflowReached:!0,userTabsContainer:T.createRef(),lowerVisibleTabIndex:0,maxTabs:10,selectedIndex:0}}static getDerivedStateFromProps(e,t){const{views:i,selectedView:r}=e,n=i.filter((e=>!e.notRemoveable)),a=i.filter((e=>e.notRemoveable)),s=n.findIndex((e=>e.id===(null==r?void 0:r.id))),{tabOverflowReached:o,lowerVisibleTabIndex:l}=mi.getTabOverflowAndLowerVisibleIndex(n,s,t.maxTabs,t),c={permanentTabs:a,selectedIndex:s,tabOverflowReached:o,lowerVisibleTabIndex:l};return t.skipPropsMapping?Object.assign(Object.assign({},c),{skipPropsMapping:!1}):Object.assign(Object.assign({},c),{userTabs:n})}render(){const{userTabs:e,permanentTabs:t,userTabsContainer:i,tabOverflowReached:r}=this.state,{maxTabsReached:n}=this.props,a=Wt()(Jt().addTabButtonContainer,{[Jt().overflowBackground]:r}),s=this.getAddTabButton(a,n);return T.createElement("div",{className:Jt().container},T.createElement("div",{className:Jt().container,"data-sumo-test":"tab-navigator-permanent-tab-container"},this.getPermanentTabs(t)),T.createElement(hi.Z5,{onDragEnd:this.onDragEnd},T.createElement("div",{ref:i,className:Jt().userTabs,"data-sumo-test":"tab-navigator-regular-tab-container"},T.createElement(hi.bK,{droppableId:"id",direction:"horizontal"},(t=>T.createElement("div",Object.assign({ref:t.innerRef,className:Jt().userTabs},t.droppableProps),this.getVisibleUserTabs(e),t.placeholder,!r&&s))))),T.createElement("div",{className:Jt().fixedTabs,"data-sumo-test":"tab-navigator-side-action-container"},r&&s,this.getSideMenu(e)))}}mi.getTabOverflowAndLowerVisibleIndex=(e,t,i,r)=>{const{lowerVisibleTabIndex:n}=r,a=i>0&&e.length>i;let s=Math.max(n,0);return 0!==i&&a?t>=n+i?s=t-i+1:t<n&&(s=t):s=0,{lowerVisibleTabIndex:s,tabOverflowReached:a}};s.module("sumoApp.workspaces.navigation",["sumoApp.components","sumoApp.workspaces","dndLists"]).component("tabNavigatorReact",(0,re.legacyReactToAngular)(mi,["views","actions","maxTabsReached","renameValidator","selectedView","tabNavRecalculationSubject","canBeRenamed","editingView","getViewActionItems","getNewViewItems","forceUpdateReact"]));s.module("sumoApp.workspaces.common",[]).service("routerNamedViewService",class{constructor(){this.isNamedView=e=>_.any(this.routes,(t=>{const i=e.split("."),r=t.routeName.split(".");return _.isEqual(i.slice(0,r.length),r)})),this.routes=_.chain(F.WORKSPACE.namedViews).values().flatten().value()}getNamedViews(e){return F.WORKSPACE.namedViews[e]}});var gi=i(74010);i(52886),i(47132);class yi{constructor(e,t){this.i18n=e,this.$q=t,this.monitorAddedKey="bMonitorAdded",this.monitorUpdatedKey="bMonitorUpdated",this.drilldown=(e,t)=>{const i=e.id,r=e.accessKey,n=e.panelId,a={dashboardId:i,dashboardKey:r,type:"report",bMonitorAdded:!0},s={params:{updateType:"bMonitorAdded",changedPanelId:n},focusData:{panelId:n}};return this.drilldownWithData(a,t,s)},this.drilldownWithData=(e,t,i)=>{let r=this.$q.resolve(!0);const n=_.getPath(i,"params");if(r=t.toggleToDashboard(`${e.dashboardId}`,e.type,e.dashboardKey,n),!r){const a={type:g.WINDOW_COMMUNICATION_CONSTANTS.WINDOW_TYPES.DASHBOARD,entityId:(e.dashboardKey||e.dashboardId)+""},s=this.getDashboardPanelMessage(e,i);if(!g.windowCommunicatorService.sendBrowserMessage(a,s)){const i=e.dashboardId?e.dashboardId.toString():"",a=e.dashboardKey?e.dashboardKey.toString():"";r=t.openDashboardTab(i,e.type,a,n)}}return r},this.forcedPopoutDashboardDrilldown=(e,t)=>{const i=(e.dashboardKey||e.dashboardId)+"",r={type:g.WINDOW_COMMUNICATION_CONSTANTS.WINDOW_TYPES.DASHBOARD,entityId:i},n=this.getDashboardPanelMessage(e,t);return g.windowCommunicatorService.sendMessageWithFallBack(r,n,D.UrlHelper.getSimpleDashboardURL(e.dashboardId,e.dashboardKey)),this.$q.resolve()},this.getDashboardPanelMessage=(e,t)=>e.bMonitorAdded||e.bMonitorUpdated?this.getPanelUpdatedMessage(t):{name:g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.FOCUS,message:this.__.focus_message},this.getPanelUpdatedMessage=e=>({name:e.params.updateType===this.monitorAddedKey?g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.PANEL_ADDED:g.WINDOW_COMMUNICATION_CONSTANTS.MESSAGE_NAMES.PANEL_UPDATED,message:{panelId:e.focusData.panelId}}),this.__=this.i18n.get("bento"),g.windowCommunicatorBaseService.initialize()}}yi.$inject=["i18n","$q"];s.module("sumoApp.drilldown.dashboard",[]).service("drilldownDashboardService",yi);i(96129);const vi="/json/v1/dataForwardSinks";const fi="/json/v1/dataforward/buckets";const{CollectormgmtViewModule:_i}=i(60072),{CollectormgmtModelModule:Si}=i(60072),{FaqWidgetModule:bi}=i(60072);class Ei{constructor(e,t){this.$timeout=e,this.$transitions=t,this.collapseDelay=300,this.scheduleCollapse=()=>{this.collapseTimeout||(this.collapseTimeout=this.$timeout(this.collapseCollectors,this.collapseDelay))},this.collapseCollectors=()=>{this.collapseTimeout=null,this.view.collapseAllCollectors()},this.loadView=e=>{const t=SumoApp.context;t.faqWidget=new bi;const{searchQuery:i=null}=g.applicationState.params;this.$timeout((()=>{const r=new Si({context:t});i&&(r.attributes.searchTerm=i),this.view=new _i({context:t,el:e,model:r})}))}}$onDestroy(){this.inactiveHookRemover&&this.inactiveHookRemover(),this.collapseTimeout&&this.$timeout.cancel(this.collapseTimeout),this.view&&(this.view.destroy(),this.view=null)}}Ei.$inject=["$timeout","$transitions"];const{StatusViewModule:Ti}=i(60072),{StatusModelModule:xi}=i(60072);class Ci{constructor(e){this.groupWorkspaceViewService=e,this.MESSAGE_RESIZE="resize",this.loadView=(e,t)=>{const i=new xi;this.view=new Ti({el:e,model:i}),this.groupWorkspaceViewService.sideNavChange().takeUntilScopeDestroyWithSafeApply(t,(e=>{requestAnimationFrame((()=>this.view.onApplicationResize()))})).subscribe()},this.onMessage=e=>{e&&e.type===this.MESSAGE_RESIZE&&this.view.onApplicationResize()}}}Ci.$inject=["groupWorkspaceViewService"];var Ai=i(5350),wi=i(68368);const Ii=(e,t=Ge.j,i="manage.groups.security.passwordPolicyForm")=>t.get(`${i}.${e}`),Ri=(e,t=Ge.j,i="manage.groups.security.passwordPolicyForm.fragments")=>e.split(" ").map((e=>{var r;return null!==(r=t.get(`${i}.${e.toLowerCase()}`))&&void 0!==r?r:e})).join(" ");var Di=i(55946),Oi=i.n(Di),Ni=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Mi=[-1,30,45,60,90,180,365],ki=(0,wi.Z)(4,11),Li=(0,wi.Z)(3,11),Pi=(0,wi.Z)(1,11),Fi=[30,45,60,120];var Ui;!function(e){e.Requesting="requesting",e.Loading="loading",e.LoadingSuccess="loadingSuccess",e.LoadingError="loadingError",e.SubmitSuccess="submitSuccess",e.SubmitError="submitError"}(Ui||(Ui={}));const Vi=()=>{const{theme:e,styles:t}=(0,qt.useTheme)({light:Oi(),dark:Oi(),brandLight:Oi(),brandDark:Oi()}),[i,r]=(0,T.useState)({}),[n,a]=(0,T.useState)({}),[s,o]=(0,T.useState)(Ui.Requesting),l=(0,T.useRef)({type:R.JsonSchemaPropertyTypes.OBJECT,$id:"password-policy-form",$schema:"http://json-schema.org/draft-07/schema#",properties:{passwordExpiresAfterNDays:{type:R.JsonSchemaPropertyTypes.NUMBER,title:Ii("expiryTime"),enum:Mi,enumNames:Mi.map((e=>Ri(-1===e?"Never":`${e} Days`)))},cannotReuseNOldPasswords:{type:R.JsonSchemaPropertyTypes.NUMBER,title:Ii("reuseAfter"),enum:ki,enumNames:ki.map((e=>Ri(`${e} Changes`)))},mustContainUppercase:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("uppercase")},mustContainLowercase:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("lowercase")},mustContainDigits:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("numbers")},mustContainSpecial:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("special")},minLength:{type:R.JsonSchemaPropertyTypes.NUMBER,title:Ii("length"),minimum:8,maximum:128},numberFailedLoginsAllowed:{type:R.JsonSchemaPropertyTypes.NUMBER,title:Ii("lockedOutAttempts"),enum:Li,enumNames:Li.map((e=>Ri(`${e} Failed Attempts`)))},failedLoginTimeWindowMinutes:{type:R.JsonSchemaPropertyTypes.NUMBER,enum:Pi,enumNames:Pi.map((e=>Ri(`Within ${e} Minutes`)))},accountLockoutMinutes:{type:R.JsonSchemaPropertyTypes.NUMBER,enum:Fi,enumNames:Fi.map((e=>Ri(`For ${e} Minutes`)))},requireMfa:{type:R.JsonSchemaPropertyTypes.STRING,title:Ii("twoStepVerification"),enum:["true","false"],enumNames:[Ri("Required"),Ri("Optional")]},rememberMfa:{type:R.JsonSchemaPropertyTypes.STRING,title:Ii("rememberBrowser"),enum:["true","false"],enumNames:[Ri("30 Days"),Ri("Disabled")]}},required:["passwordExpiresAfterNDays","cannotReuseNOldPasswords","minLength","numberFailedLoginsAllowed","failedLoginTimeWindowMinutes","accountLockoutMinutes","requireMfa","rememberMfa"],ui:{fields:{passwordExpiresAfterNDays:{size:R.StandardFormFieldSizes.SMALL},cannotReuseNOldPasswords:{size:R.StandardFormFieldSizes.SMALL},minLength:{size:R.StandardFormFieldSizes.SMALL,hintText:Ii("lengthHint")},numberFailedLoginsAllowed:{size:R.StandardFormFieldSizes.SMALL},failedLoginTimeWindowMinutes:{size:R.StandardFormFieldSizes.SMALL,hideLabel:!0},accountLockoutMinutes:{size:R.StandardFormFieldSizes.SMALL,hideLabel:!0},requireMfa:{size:R.StandardFormFieldSizes.SMALL},rememberMfa:{size:R.StandardFormFieldSizes.SMALL}},order:["passwordExpiresAfterNDays","cannotReuseNOldPasswords","mustContainGroup","minLength","lockedOutAttemptGroup","requireMfa","rememberMfa"],sections:{lockedOutAttemptGroup:{type:"group",items:[["numberFailedLoginsAllowed","failedLoginTimeWindowMinutes","accountLockoutMinutes"]]},mustContainGroup:{type:"group",title:Ii("mustContain"),styleProps:{customTitleClass:t.mustContainGroupTitle,clusterContainer:t.mustContainGroupContainer},items:["mustContainUppercase","mustContainLowercase","mustContainDigits","mustContainSpecial"]}}}}),c=(0,T.useCallback)((()=>Ni(void 0,void 0,void 0,(function*(){try{const e=yield(0,re.getWithPromise)(D.EndpointConstants.Endpoints.V1_ACCOUNT_GET_PASSWORD_POLICY),t=E.PasswordPolicyAdapter.mapApiDataToLocalData(e);(0,Ai.unstable_batchedUpdates)((()=>{r(t),a(Object.assign(Object.assign({},t),{requireMfa:t.requireMfa.toString(),rememberMfa:t.rememberMfa.toString()})),o(Ui.LoadingSuccess)}))}catch(e){o(Ui.LoadingError)}}))),[]);(0,T.useEffect)((()=>{s===Ui.Requesting&&(o(Ui.Loading),c())}),[c,s]);const d=(0,T.useCallback)((()=>{o(Ui.Requesting)}),[]),[u,p]=(0,T.useState)("default"),h=(0,T.useMemo)((()=>({isVisible:!0,submitButtonProps:{feedbackState:u,feedbackText:{default:Ii("submitStatus.update"),processing:Ii("submitStatus.updating"),success:Ii("submitStatus.updated"),fail:Ii("submitStatus.retry")},"data-sumo-test":"password-policy-submit-button"},secondaryButtonProps:{text:Ii("submitStatus.cancel"),onClick:d},styleProps:{container:t.submitContainer}})),[u,d,t.submitContainer]),m=(0,T.useCallback)((e=>{var t;return!Object.keys(null!==(t=e.errors)&&void 0!==t?t:{}).length}),[]),g=(0,T.useCallback)((e=>Ni(void 0,void 0,void 0,(function*(){var t;const i=E.PasswordPolicyAdapter.mapLocalDataToApiData(e);try{const e=yield(0,re.putWithPromise)(D.EndpointConstants.Endpoints.V1_ACCOUNT_SET_PASSWORD_POLICY,i),n=E.PasswordPolicyAdapter.mapApiDataToLocalData(e);null===(t=E.currentUserActions.getActionCreators())||void 0===t||t.updateCurrentUserAttr({mfaCanDisable:!n.requireMfa,org:{passwordPolicy:{minLength:n.minLength,maxLength:n.maxLength,mustContainLowercase:n.mustContainLowercase,mustContainUppercase:n.mustContainUppercase,mustContainDigits:n.mustContainDigits,mustContainSpecial:n.mustContainSpecial}}}),(0,Ai.unstable_batchedUpdates)((()=>{o(Ui.SubmitSuccess),p("success"),v(!0),r(n)}))}catch(e){(0,Ai.unstable_batchedUpdates)((()=>{o(Ui.SubmitError),p("fail"),v(!0)}))}}))),[]),[y,v]=(0,T.useState)(!1),f=(0,T.useCallback)((e=>{"processing"!==u&&(p("processing"),g(e))}),[u,g]),_=x().createElement(R.ConfigDrivenForm,{jsonSchema:l.current,initialValues:n,isValidCallback:m,onSubmit:f,formGridSize:R.StandardFormGridSizes.MEDIUM,formButtons:h}),S=x().createElement(qt.SkeletonLoadingPanel,{numRows:16,className:t.loadingPanel}),b=(0,T.useRef)({"data-sumo-test":"password-policy-error-overlay-button"}),C=x().createElement(qt.StateOverlay,{"data-sumo-test":"password-policy-error-overlay",iconName:"error-overlay",title:Ii("networkStatus.loadingErrorTitle"),description:Ii("networkStatus.loadingErrorDescription"),buttonText:Ii("networkStatus.loadingErrorButton"),buttonOnClick:d,ButtonProps:b.current}),A=(0,T.useCallback)(((e,t)=>{"clickaway"!==t&&v(!1)}),[]),w=(0,T.useRef)({"data-sumo-test":"password-policy-submit-success-toast"}),I=x().createElement(qt.Toast.CasualToast,{open:y,onClose:A,message:Ii("submitStatus.successToast"),toastProps:w.current}),O=(0,T.useRef)({"data-sumo-test":"password-policy-submit-failure-toast"}),N=x().createElement(qt.Toast.CriticalToast,{open:y,onClose:A,message:Ii("submitStatus.failureToast"),toastProps:O.current});return x().createElement(x().Fragment,null,{[Ui.Requesting]:S,[Ui.Loading]:S,[Ui.LoadingSuccess]:_,[Ui.LoadingError]:C,[Ui.SubmitSuccess]:_,[Ui.SubmitError]:_}[s],(()=>{switch(s){case Ui.SubmitSuccess:return I;case Ui.SubmitError:return N;default:return null}})())};var Bi,$i=i(71157),Hi=i(35865);!function(e){e.Requesting="requesting",e.Loading="loading",e.LoadingSuccess="loadingSuccess",e.LoadingError="loadingError",e.SubmitSuccessAuditLog="submitSuccessAuditLog",e.SubmitSuccessSearchAuditRecord="submitSuccessSearchAuditRecord",e.SubmitSuccessSupportAccount="submitSuccessSupportAccount",e.SubmitSuccessShareDashboards="submitSuccessShareDashboards",e.SubmitSuccessDataAccess="submitSuccessDataAccess",e.SubmitSuccessPerUserConc="submitSuccessPerUserConc",e.SubmitSuccessNoUserConc="submitSuccessNoUserConc",e.SubmitSuccessUserSessonTimeout="submitSuccessUserSessonTimeout",e.SubmitError="submitError"}(Bi||(Bi={}));const Wi=[{key:"enableAuditRecord",endpoint:"V1_ACCOUNT_AUDIT_LOGGING_ENABLED_OPENAPI"},{key:"enableSearchAuditRecord",endpoint:"V1_ACCOUNT_SEARCH_AUDIT_POLICY_OPENAPI"},{key:"enableSupportAccess",endpoint:"V1_ACCOUNT_SUPPORT_STATUS_GET"},{key:"enableDashboardOrgs",endpoint:"V1_ORG_PUBLIC_DASH_ENABLED_OPENAPI"},{key:"enableDataAccess",endpoint:"V1_DASHBOARD_DATA_ACCESS_LEVEL_OPENAPI"},{key:"enableUserConcSession",endpoint:"V1_CONCURRENT_SESSIONS_OPENAPI"},{key:"userTimeout",endpoint:"V1_MAX_USER_SESSION_TIMEOUT_OPENAPI"}],qi={enableAuditRecord:{endpoint:"V1_ACCOUNT_AUDIT_LOGGING_ENABLED_OPENAPI",submitStatus:Bi.SubmitSuccessAuditLog},enableSearchAuditRecord:{endpoint:"V1_ACCOUNT_SEARCH_AUDIT_POLICY_OPENAPI",submitStatus:Bi.SubmitSuccessSearchAuditRecord},enableSupportAccessDisable:{endpoint:"V1_ACCOUNT_SUPPORT_DISABLE",submitStatus:Bi.SubmitSuccessSupportAccount},enableSupportAccessEnable:{endpoint:"V1_ACCOUNT_SUPPORT_ENABLE",submitStatus:Bi.SubmitSuccessSupportAccount},enableDashboardOrgs:{endpoint:"V1_ORG_PUBLIC_DASH_ENABLED_OPENAPI",submitStatus:Bi.SubmitSuccessShareDashboards},enableDataAccess:{endpoint:"V1_DASHBOARD_DATA_ACCESS_LEVEL_OPENAPI",submitStatus:Bi.SubmitSuccessDataAccess},enableUserConcSession:{endpoint:"V1_CONCURRENT_SESSIONS_OPENAPI",submitStatus:Bi.SubmitSuccessPerUserConc},noOfConcUserSessions:{endpoint:"V1_CONCURRENT_SESSIONS_OPENAPI",submitStatus:Bi.SubmitSuccessNoUserConc},userTimeout:{endpoint:"V1_MAX_USER_SESSION_TIMEOUT_OPENAPI",submitStatus:Bi.SubmitSuccessUserSessonTimeout},changeDuration:{endpoint:"V1_ACCOUNT_SUPPORT_ENABLE",submitStatus:Bi.SubmitSuccessSupportAccount}},ji=e=>(0,Hi.Z)(e,"PP 'at' p"),Qi={adaptData:e=>{const t={};return e.forEach((e=>{switch(e.key){case"enableSupportAccess":t.enableSupportAccess=e.response.enabled,t.supportAccessExpirationDate=(0,$i.Z)(e.response.expirationTimestamp)?"Indefinite":ji(new Date(e.response.expirationTimestamp));break;case"enableUserConcSession":t.enableUserConcSession=e.response.enabled,t.noOfConcUserSessions=e.response.maxConcurrentSessions;break;case"userTimeout":t.userTimeout=e.response.maxUserSessionTimeout;break;default:t[e.key]=e.response.enabled}})),t},makeApiCallObject:(e,t,i)=>{let r="",n=Bi.SubmitError,a={};switch(e){case"userTimeout":r=qi[e].endpoint,n=qi[e].submitStatus,a={maxUserSessionTimeout:t};break;case"enableUserConcSession":r=qi[e].endpoint,n=qi[e].submitStatus,a={enabled:t,maxConcurrentSessions:i.noOfConcUserSessions};break;case"noOfConcUserSessions":r=qi[e].endpoint,n=qi[e].submitStatus,a={enabled:!0,maxConcurrentSessions:t};break;case"enableSupportAccess":const s=(e=>{let t={},{endpoint:i}=qi.enableSupportAccessEnable;const{submitStatus:r}=qi.enableSupportAccessEnable;return e?t={expirationTimeInDays:1}:i=qi.enableSupportAccessDisable.endpoint,{endpoint:i,submitStatus:r,apiData:t}})(t);r=s.endpoint,n=s.submitStatus,a=s.apiData;break;case"changeDuration":r=qi[e].endpoint,n=qi[e].submitStatus,a={expirationTimeInDays:t};break;default:r=qi[e].endpoint,n=qi[e].submitStatus,a={enabled:t}}return{endpoint:r,apiData:a,submitStatus:n}},dateFormat:ji};var zi=i(90873),Gi=i.n(zi),Ki=i(92933),Yi=i.n(Ki);const Zi=({fieldConfig:e,value:t})=>e&&x().createElement(qt.InlineNotification,{className:Yi().notificationMargin,text:x().createElement(x().Fragment,null,Ii("supportAccessExpiration",void 0,"manage.groups.security.policiesPage"),": ",x().createElement("b",null,t)),status:"default"});var Xi=i(8243),Ji=i(9724),er=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const tr=[{key:1,value:"1 Day"},{key:7,value:"1 Week"},{key:30,value:"1 Month"},{key:365,value:"1 Year"},{key:-1,value:"Indefinite"}],ir=[{key:"5m",value:"5 Minutes"},{key:"15m",value:"15 Minutes"},{key:"30m",value:"30 Minutes"},{key:"1h",value:"1 Hour"},{key:"2h",value:"2 Hours"},{key:"6h",value:"6 Hours"},{key:"12h",value:"12 Hours"},{key:"1d",value:"1 Day"},{key:"2d",value:"2 Days"},{key:"3d",value:"3 Days"},{key:"5d",value:"5 Days"},{key:"7d",value:"7 Days"}],rr=()=>{const{theme:e,styles:t}=(0,qt.useTheme)({light:Gi(),dark:Gi(),brandLight:Gi(),brandDark:Gi()}),[i,r]=(0,T.useState)({}),[n,a]=(0,T.useState)(Bi.Requesting),[s,o]=(0,T.useState)(!1),l={type:R.JsonSchemaPropertyTypes.OBJECT,$id:"policy-page-form",$schema:"http://json-schema.org/draft-07/schema#",properties:{enableAuditRecord:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("auditRecord",void 0,"manage.groups.security.policiesPage"),hintText:Ii("auditRecordHint",void 0,"manage.groups.security.policiesPage")},enableSearchAuditRecord:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("searchAuditRecord",void 0,"manage.groups.security.policiesPage"),hintText:Ii("searchAuditRecordHint",void 0,"manage.groups.security.policiesPage")},enableSupportAccess:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("supportAccountAccess",void 0,"manage.groups.security.policiesPage"),hintText:Ii("supportAccountAccessHint",void 0,"manage.groups.security.policiesPage")},enableDashboardOrgs:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("dashboardOrgs",void 0,"manage.groups.security.policiesPage"),hintText:Ii("dashboardOrgsHint",void 0,"manage.groups.security.policiesPage")},enableDataAccess:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("dataAccess",void 0,"manage.groups.security.policiesPage"),hintText:Ii("dataAccessHint",void 0,"manage.groups.security.policiesPage")},enableUserConcSession:{type:R.JsonSchemaPropertyTypes.BOOLEAN,title:Ii("userConcSession",void 0,"manage.groups.security.policiesPage"),hintText:Ii("userConcSessionHint",void 0,"manage.groups.security.policiesPage")},userTimeout:{type:R.JsonSchemaPropertyTypes.STRING,title:Ii("sessionTimeout",void 0,"manage.groups.security.policiesPage"),enum:ir.map((({key:e})=>e)),enumNames:ir.map((e=>Ri(e.value,void 0,"manage.groups.security.policiesPage.fragments"))),default:"7d"}},dependencies:{enableSupportAccess:{oneOf:[{properties:{enableSupportAccess:{enum:[!1]}}},{properties:{enableSupportAccess:{enum:[!0]},supportAccessExpirationDate:{type:R.JsonSchemaPropertyTypes.STRING},changeDuration:{type:R.JsonSchemaPropertyTypes.NUMBER,title:Ii("changeDuration",void 0,"manage.groups.security.policiesPage"),enum:tr.map((({key:e})=>e)),enumNames:tr.map((e=>Ri(e.value,void 0,"manage.groups.security.policiesPage.fragments")))}},required:[]}]},enableUserConcSession:{oneOf:[{properties:{enableUserConcSession:{enum:[!1]}}},{properties:{enableUserConcSession:{enum:[!0]},noOfConcUserSessions:{type:R.JsonSchemaPropertyTypes.NUMBER,title:Ii("noOfConcUser",void 0,"manage.groups.security.policiesPage"),minimum:1,maximum:100,default:7}},required:["noOfConcUserSessions"]}]}},required:["userTimeout"],ui:{fields:{enableAuditRecord:{size:R.StandardFormFieldSizes.FULL,learnMoreLabel:Ii("learnMore",void 0,"manage.groups.security.policiesPage"),learnMoreUrl:"https://help.sumologic.com/docs/manage/security/audit-index/",hintTextWrap:!1,styleProps:{hintText:t.hintWidth}},enableSearchAuditRecord:{size:R.StandardFormFieldSizes.FULL,hintTextWrap:!1,learnMoreLabel:Ii("learnMore",void 0,"manage.groups.security.policiesPage"),learnMoreUrl:"https://help.sumologic.com/docs/manage/security/search-audit-index/",styleProps:{hintText:t.hintWidth}},enableSupportAccess:{size:R.StandardFormFieldSizes.FULL,hintTextWrap:!1,styleProps:{hintText:t.hintWidth}},enableDashboardOrgs:{size:R.StandardFormFieldSizes.FULL,hintTextWrap:!1,styleProps:{hintText:t.hintWidth}},enableDataAccess:{size:R.StandardFormFieldSizes.FULL,hintTextWrap:!1,styleProps:{hintText:t.hintWidth}},enableUserConcSession:{size:R.StandardFormFieldSizes.FULL,hintTextWrap:!1,styleProps:{hintText:t.hintWidth}},noOfConcUserSessions:{size:R.StandardFormFieldSizes.SMALL,hintText:Ii("noOfConcUserHint",void 0,"manage.groups.security.policiesPage"),styleProps:{container:Wt()(t.selectPadding,t.selectWidth)}},userTimeout:{size:R.StandardFormFieldSizes.SMALL,styleProps:{container:t.selectWidth}},changeDuration:{size:R.StandardFormFieldSizes.SMALL,styleProps:{container:Wt()(t.selectPadding,t.selectWidth)},indicateIsOptional:!1},supportAccessExpirationDate:{size:R.StandardFormFieldSizes.FULL,componentType:"InlineText"}},sections:{sumoLogicAuditing:{type:"section",title:Ii("sumoLogicAuditingTitle",void 0,"manage.groups.security.policiesPage"),items:["enableAuditRecord","enableSearchAuditRecord"]},supportAccountAccess:{type:"section",title:Ii("supportAccountAccessTitle",void 0,"manage.groups.security.policiesPage"),items:["enableSupportAccess","supportAccessExpirationDate","changeDuration"]},shareDashboardOrgs:{type:"section",title:Ii("shareDashboardOrgsTitle",void 0,"manage.groups.security.policiesPage"),items:["enableDashboardOrgs"]},dataAccessSharedDashboards:{type:"section",title:Ii("dataAccessShareTitle",void 0,"manage.groups.security.policiesPage"),items:["enableDataAccess"]},perUserConcLimit:{type:"section",title:Ii("perUserConcSessionTitle",void 0,"manage.groups.security.policiesPage"),items:["enableUserConcSession","noOfConcUserSessions"]},userSessionTimeout:{type:"section",title:Ii("userSessionTimeoutTitle",void 0,"manage.groups.security.policiesPage"),subtitle:Ii("userSessionSubtitle",void 0,"manage.groups.security.policiesPage"),styleProps:{customSubtitleClass:t.subtitleWidth},items:["userTimeout"]}},order:["sumoLogicAuditing","supportAccountAccess","shareDashboardOrgs","dataAccessSharedDashboards","perUserConcLimit","userSessionTimeout"]}},c=(0,T.useCallback)((()=>er(void 0,void 0,void 0,(function*(){try{const e=yield Promise.all(Wi.map((({key:e,endpoint:t})=>er(void 0,void 0,void 0,(function*(){const i=yield(0,re.getWithPromise)(D.EndpointConstants.Endpoints[t]);return{key:e,response:i}}))))),t=Qi.adaptData(e);(0,Ai.unstable_batchedUpdates)((()=>{r(Object.assign({},t)),a(Bi.LoadingSuccess)}))}catch(e){a(Bi.LoadingError)}}))),[]);(0,T.useEffect)((()=>{n===Bi.Requesting&&(a(Bi.Loading),c())}),[c,n]);const d=(0,T.useCallback)((e=>{var t;return!Object.keys(null!==(t=e.errors)&&void 0!==t?t:{}).length}),[]),[u,p]=(0,T.useState)(!1),h=(0,T.useCallback)((({name:e,value:t})=>er(void 0,void 0,void 0,(function*(){const{endpoint:n,apiData:s,submitStatus:o}=Qi.makeApiCallObject(e,t,i);let l={};try{"enableSupportAccess"===e||"changeDuration"===e?l=yield(0,re.postWithPromise)(D.EndpointConstants.Endpoints[n],s):yield(0,re.putWithPromise)(D.EndpointConstants.Endpoints[n],s),(0,Ai.unstable_batchedUpdates)((()=>{r("changeDuration"===e?Object.assign(Object.assign({},i),{[e]:t,supportAccessExpirationDate:(0,Xi.Z)(l.expirationTimestamp)?"Indefinite":Qi.dateFormat(new Date(l.expirationTimestamp))}):"enableSupportAccess"===e?Object.assign(Object.assign({},i),{[e]:t,supportAccessExpirationDate:(0,Xi.Z)(l.expirationTimestamp)?"Indefinite":Qi.dateFormat(new Date(l.expirationTimestamp))}):Object.assign(Object.assign({},i),{[e]:t})),a(o),p(!0)}))}catch(e){(0,Ai.unstable_batchedUpdates)((()=>{a(Bi.SubmitError),p(!0)}))}}))),[i]),m=x().createElement(R.ConfigDrivenForm,{jsonSchema:l,initialValues:i,isValidCallback:d,formGridSize:R.StandardFormGridSizes.SMALL,customComponentsMap:{InlineText:Zi},onFormChange:({name:e,value:t})=>{"enableSupportAccess"===e&&!1===t?(r(Object.assign(Object.assign({},i),{enableSupportAccess:!1})),o(!0)):h({name:e,value:t})},enableReinitialize:!0}),g=x().createElement(qt.SkeletonLoadingPanel,{numRows:23,className:t.loadingPanel}),y=x().createElement(qt.StateOverlay,{"data-sumo-test":"policies-error-overlay",iconName:"error-overlay",title:Ii("loadingErrorTitle",void 0,"manage.groups.security.policiesPage.network"),description:Ii("loadingErrorDescription",void 0,"manage.groups.security.policiesPage.network")}),v=(0,T.useCallback)(((e,t)=>{"clickaway"!==t&&p(!1)}),[]),f=(0,T.useRef)({"data-sumo-test":"policies-submit-success-toast"}),_=(e,t)=>x().createElement(qt.Toast.CasualToast,{open:u,onClose:v,message:x().createElement(x().Fragment,null,e,t?x().createElement(x().Fragment,null,"",x().createElement("b",null,t),"."):x().createElement(x().Fragment,null)),toastProps:f.current}),S=(0,T.useRef)({"data-sumo-test":"policies-submit-failure-toast"}),b=x().createElement(qt.Toast.CriticalToast,{open:u,onClose:v,message:Ii("failureToast",void 0,"manage.groups.security.policiesPage.submitStatus"),toastProps:S.current}),E=e=>{e?(h({name:"enableSupportAccess",value:!1}),o(!1)):(r(Object.assign(Object.assign({},i),{enableSupportAccess:!0})),o(!1))};return x().createElement(x().Fragment,null,x().createElement(qt.ConfirmDialog,{title:Ii("disableSupportAccessTitle",void 0,"manage.groups.security.policiesPage"),open:s,onAction:E,remove:!0,okButtonText:Ii("disable",void 0,"manage.groups.security.policiesPage"),customSize:{height:"25%",width:"30%"}},x().createElement("div",{className:t.dialogMargin},Ii("disableSupportAccessDetails",void 0,"manage.groups.security.policiesPage")),x().createElement("div",{className:t.dialogMargin},Ii("disableSupportAccessDate",void 0,"manage.groups.security.policiesPage")," ",x().createElement("b",null,i.supportAccessExpirationDate)),x().createElement("div",{className:t.dialogMargin},Ii("disableSupportAccessConfirm",void 0,"manage.groups.security.policiesPage"))),{[Bi.Requesting]:g,[Bi.Loading]:g,[Bi.LoadingSuccess]:m,[Bi.LoadingError]:y,[Bi.SubmitSuccessAuditLog]:m,[Bi.SubmitSuccessSearchAuditRecord]:m,[Bi.SubmitSuccessSupportAccount]:m,[Bi.SubmitSuccessShareDashboards]:m,[Bi.SubmitSuccessDataAccess]:m,[Bi.SubmitSuccessPerUserConc]:m,[Bi.SubmitSuccessNoUserConc]:m,[Bi.SubmitSuccessUserSessonTimeout]:m,[Bi.SubmitError]:m}[n],(()=>{var e;switch(n){case Bi.SubmitSuccessAuditLog:return _(Ri("Audit Logging preferences saved. Audit Logging is now",void 0,"manage.groups.security.policiesPage.fragments"),i.enableAuditRecord?Ii("on",void 0,"manage.groups.security.policiesPage"):Ii("off",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitSuccessSearchAuditRecord:return _(Ri("Search Audit Logging preferences saved. Search Audit Logging is now",void 0,"manage.groups.security.policiesPage.fragments"),i.enableSearchAuditRecord?Ii("on",void 0,"manage.groups.security.policiesPage"):Ii("off",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitSuccessShareDashboards:return _(i.enableDashboardOrgs?Ii("sharingOn",void 0,"manage.groups.security.policiesPage"):Ii("sharingOff",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitSuccessDataAccess:return _(i.enableDataAccess?Ii("dataOn",void 0,"manage.groups.security.policiesPage"):Ii("dataOff",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitSuccessUserSessonTimeout:const t=null===(e=(0,Ji.Z)(ir,{key:i.userTimeout}))||void 0===e?void 0:e.value;return _(Ri("User Session Timeout saved. Session Timeout is set to",void 0,"manage.groups.security.policiesPage.fragments"),Ri(t||"",void 0,"manage.groups.security.policiesPage.fragments"));case Bi.SubmitSuccessPerUserConc:return _(Ri("The Concurrent Sessions Limit is now",void 0,"manage.groups.security.policiesPage.fragments"),i.enableUserConcSession?Ii("on",void 0,"manage.groups.security.policiesPage"):Ii("off",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitSuccessNoUserConc:return _(Ii("concSessionLimit",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitSuccessSupportAccount:return _(Ri("Support Account preferences saved. Support Account Access is now",void 0,"manage.groups.security.policiesPage.fragments"),i.enableSupportAccess?Ii("on",void 0,"manage.groups.security.policiesPage"):Ii("off",void 0,"manage.groups.security.policiesPage"));case Bi.SubmitError:return b;default:return null}})())},nr=i(47355),ar=i(48162);class sr{constructor(){this.loadView=e=>{const t=SumoApp.context,i=new ar({context:t});this.view=new nr({context:t,el:e,model:i})}}}const or=i(73381),lr=i(70321);class cr{constructor(){this.loadView=e=>{const t=SumoApp.context,i=new lr({context:t,showCreator:!0});this.view=new or({context:t,el:e,model:i,showCreator:!0})}}}const dr=i(21506),ur=i(69872),pr=i(86129),hr=i(80153),mr=i(74285),gr=i(57513),yr=i(54444),vr=i(23600),fr=i(11726),_r=i(36760),Sr=i(45829),br=i(92438),Er=i(9374),Tr=i(68799),xr=i(54486),Cr=i(73639);class Ar{constructor(e,t){this.currentUserHelper=t,this.loadView=e=>{this.policySections.forEach(((t,i)=>{if(!t.privilege||this.currentUserHelper.hasPrivilege(t.privilege)){const i=t.title?$(`<div class="account-section-header">${t.title}</div>`):"",r=$(`<div class="sumosupport-section ${t.className||""}"></div>`);e.append(i),e.append(r);const n=SumoApp.context,a=new t.model({context:n});this.view=new t.view({context:n,el:r,model:a})}}))},this.policySections=[{privilege:"AuditLoggingView",model:ur,view:dr,title:e.get("account.AUDIT_LOG_SECTION_TITLE"),className:this.currentUserHelper.hasPrivilege("SearchAuditLoggingView")?"sumosupport-section-noborder":""},{privilege:"SearchAuditLoggingView",model:hr,view:pr},{privilege:"SupportAccountView",model:gr,view:mr,title:e.get("account.SUPPORT_ACCOUNT_SECTION_TITLE")},{privilege:"PublicDashboardView",model:vr,view:yr,title:e.get("account.PUBLIC_DASHBOARD")},{privilege:"DataAccessLevelView",model:fr,view:_r,title:e.get("account.DASHBOARD_DATA_ACCESS_LEVEL_TITLE")},{privilege:"ConcurrentSessionLimitView",model:Sr,view:br,title:e.get("account.CONCURRENT_SESSION_LIMIT_TITLE")},{privilege:"UserSessionTimeoutView",model:Er,view:Tr,title:e.get("account.USER_SESSION_TIMEOUT_TITLE")},{privilege:"CseContentOptInView",model:xr,view:Cr,title:e.get("account.CSE_CONTENT_OPT_IN_TITLE")}]}}Ar.$inject=["i18n","currentUserHelper"];const wr=i(51456);class Ir{constructor(e){this.$timeout=e}$onDestroy(){this.unbindButtons()}loadView(e){const t=SumoApp.context;this.view=new wr({context:t,el:e,exitCallback:e=>this.closeFn(e)}),this.bindConfig()}bindConfig(){this.$timeout((()=>{const e=$("#btn-configure");if(e&&e.length>0){e.off("click");const t=e=>{this.view.onConfigure.call(this.view,e),this.bindButtons()};e.on("click",t)}else this.bindConfig()}),50)}closeFn(e){if(!e){this.view.model.load(),this.view.render.call(this.view);return document.location.hash.indexOf("saml")>0}}bindButtons(){this.unbindButtons(),$("#btn-close").on("click",this.closeFn),$("#btn-cancel").on("click",this.closeFn)}unbindButtons(){$("#btn-close").off("click"),$("#btn-cancel").off("click")}}Ir.$inject=["$timeout"];const Rr=i(11936),Dr=i(68939);class Or{constructor(){this.loadView=e=>{const t=new Dr;this.view=new Rr({model:t,el:e})}}}const Nr=i(36413),Mr=i(79124);class kr{constructor(e){this.loadView=e=>{const t=new Mr({});this.view=new Nr({model:t,el:e})},this.loadView(e)}}kr.$inject=["$element"];const Lr={controller:kr,controllerAs:"upgradeCtrl"},Pr=i(9576),Fr=i(24359);class Ur{constructor(){this.loadView=e=>{const t=SumoApp.context,i=new Fr({context:t});this.view=new Pr({model:i,context:t,el:e})}}}class Vr{constructor(e,t){this.currentUserHelper=e,this.i18n=t}resolvePages(e){const t=_.map({manage:[{id:"collection",state:"app.collection",privilege:"CollectorsAccess"},...E.currentUserHelper&&E.currentUserHelper.hasFeatureFlag("UISplitSettings")?[{id:"logs-config",state:"app.logs-config"},{id:"metrics-config",state:"app.metrics-config"}]:[{id:"config",state:"app.config"}],{id:"alerts",state:"app.alerts"},{id:"developers",state:"app.developers",privilege:"PrivilegesAccess"}],administration:[{id:"account",state:"app.account"},{id:"organizations",state:"app.organizations"},{id:"users",state:"app.megauser"},{id:"security",state:"app.security"}],username:[{id:"preferences",state:"app.preferences"}]}[e],(e=>Object.assign(Object.assign({},e),{tabs:this.resolveTabs(e.id)})));return _.filter(t,(e=>this.hasAccess(e)))}resolveTabs(e){const t=_.map(ft[e],(e=>Object.assign(Object.assign({},e),{title:this.i18n.get(e.title)})));return _.filter(t,(e=>_.isUndefined(e.privilege)||this.currentUserHelper.hasPrivilege(e.privilege)))}hasTabs(e){return _.has(ft,e)}hasAccess(e){return(_.isUndefined(e.privilege)||this.currentUserHelper.hasPrivilege(e.privilege))&&(!this.hasTabs(e.id)||e.tabs.length>0)}}Vr.$inject=["currentUserHelper","i18n"];i(33290),i(64404);class Br{constructor(e){this.isMegaIngestEnabled=e.hasFeatureFlag("UIMegaIngestEnabled")}}Br.$inject=["currentUserHelper"];const $r={bindings:{controller:"<",selectedTab:"<",groupId:"<"},controller:Br,template:'\n    <ingest-budgets-page ng-if="!$ctrl.isMegaIngestEnabled" class="ingest-budgets-page"></ingest-budgets-page>\n    <ingest-budgets-container \n        ng-if="$ctrl.isMegaIngestEnabled" \n        class="ingest-budgets-page" \n        is-selected-tab="$ctrl.groupId === \'collection\' && $ctrl.selectedTab ===\'ingest\'">\n    </ingest-budgets-container>\n  '};var Hr=i(26469),Wr=i(24481),qr=i(76355);const jr=[new qr.schema.Entity("ingestBudgets")];function Qr(e){return(0,qr.normalize)(e,jr)}var zr=i(89531),Gr=i(10788);const Kr=(e="")=>{const[t="",...i]=e.split("=");return{key:t,value:i.join("=")}},Yr=()=>Gr.currentUserHelper.hasFeatureFlag("UIIngestBudgetsV2"),Zr=()=>{Te.store.dispatch((e=>{(0,re.getWithPromise)((0,zr.Vp)()).then((({data:t})=>{const i=t.filter((e=>"Enabled"===e.state)).map((e=>e.fieldName));var r;e((r={customFields:i},{type:Hr.sk.INGEST_BUDGETS_SET_FIELDS,payload:r}))}))}))},Xr=(e,t,i)=>{let r="0",n="";if(i&&i>0){n=(0,re.bytesToSizedString)(i,t,!0,!0);const a=i/e*100;r=`${a>10?Math.round(a).toString():a.toPrecision(2)}%`}return{percentUsage:r,totalUsage:n}},Jr=2e3,en=()=>Yr()?"/api/v2/ingestBudgets":"/api/v1/ingestBudgets";function tn(e){const t={name:e.name,capacityBytes:e.capacityBytes,timezone:e.timezone,resetTime:e.resetTime,description:e.description,action:e.action,auditThreshold:e.auditThreshold};return Yr()?Object.assign(Object.assign({},t),{scope:e.scope}):Object.assign(Object.assign({},t),{fieldValue:e.fieldValue})}function rn(e){return{type:Hr.sk.INGEST_BUDGETS_CRUD_RESULT,payload:e}}function nn(){return e=>{e({type:Hr.sk.INGEST_BUDGETS_CLEAR_TOAST})}}function an(e){return t=>{var i;t((i={isFetching:!0},{type:Hr.sk.INGEST_BUDGETS_FETCH_REQUEST,payload:i})),(0,D.legacyHttpGet)(`${en()}?limit=${e}&token=`).then((e=>{const i=e.data;t(function(e){return{type:Hr.sk.INGEST_BUDGETS_FETCH_SUCCESS,payload:e}}({itemList:i.map((e=>e.id)),token:void 0})),t((0,Wr.QB)(Qr(i)))})).catch((e=>{t(function(e){return{type:Hr.sk.INGEST_BUDGETS_FETCH_FAILURE,payload:e}}({error:e}))}))}}function sn(e){return{type:Hr.sk.INGEST_BUDGETS_COLLECTORS_FETCH_SUCCESS,payload:e}}function on(e){return{type:Hr.sk.INGEST_BUDGETS_COLLECTORS_FETCH_FAILURE,payload:e}}function ln(e){return t=>{(function(e){let t,i,r=[];const n=new Promise(((e,r)=>{t=t=>e(t),i=e=>r(e)}));return function n(a=""){(0,D.legacyHttpGet)(`/api/v1/ingestBudgets/${e}/collectors?limit=1000&token=${a}`).then((e=>{const{next:i,data:a}=e;r=[...r,...a],""!==i?n(i):t({data:r})})).catch((e=>{i(e)}))}(),n})(e).then((e=>{t(sn({response:e}))})).catch((e=>{t(on({error:e}))}))}}var cn=i(72650);const dn=e=>e.entities.ingestBudgets[e.views.ingestBudgets.selectedItemId],un=(0,cn.createSelector)([e=>{var t,i;return null===(i=null===(t=null==e?void 0:e.views)||void 0===t?void 0:t.ingestBudgets)||void 0===i?void 0:i.fields}],(e=>(e=>{var t;const i=[];return Hr.es.forEach((e=>i.push({label:e,value:e,categories:[Ge.j.get("ingestBudgets.builtInFields")]}))),null===(t=null==e?void 0:e.customFields)||void 0===t||t.forEach((e=>i.push({label:e,value:e,categories:[Ge.j.get("ingestBudgets.customFields")]}))),i})(e))),pn=(0,cn.createSelector)([e=>e.entities.ingestBudgets,e=>e.views.ingestBudgets.itemList],((e,t)=>t.map((t=>e[t])).filter((e=>void 0!==e)))),hn=(0,cn.createSelector)([pn],(e=>{return null!==(i=null==(t=e||[])?void 0:t.map((e=>{const t=(0,re.bytesToSizedString)(e.capacityBytes,3,!1,!0),i=e.numberOfCollectors||0;return Object.assign(Object.assign({},e),{capacityBytes:t,numberOfCollectors:i})})))&&void 0!==i?i:[];var t,i}));var mn=i(40717),gn=i.n(mn),yn=i(60047),vn=i.n(yn);const fn=e=>{let t;const i=[{field:"name",headerName:Ge.j.get("ingestBudgets.collectorName"),isResizable:!1}],r={isEnabled:e.isEditMode&&e.removeCollector,actions:{delete:{show:!0,icon:"trash",onClick:(t,i)=>{e.removeCollector(i.id)}}}};return T.createElement("div",{className:gn().assignedCollectorsPage,"data-sumo-test":"ingest-budgets-assigned-collectors"},T.createElement("div",{className:Wt()(gn().assignedCollectorsGroup)},T.createElement("div",{className:vn().labelTitle},e.headerText),T.createElement("div",{className:vn().helpText,"data-sumo-test":"assigned-collectors-help-text"},e.infoText)),T.createElement(qt.SearchTable,{columnOptions:i,data:e.data,searchOptions:{isEnabled:!0,searchPlaceHolderText:Ge.j.get("ingestBudgets.filterCollectorsPlaceHolder")},gridOptions:{rowActionConfig:r,paginationPageSize:5,noScrollOnPageChange:!0,onTableInit:e=>{t||(t=e)},onRowClicked:()=>{t&&(t.deselectFocusedNode(),t.clearFocusedCell())}}}))};var _n=i(82758),Sn=i.n(_n);const bn=e=>{const{handleChange:t,setFieldValue:i,touched:r,errors:n,values:a}=e,{auditType:s,auditThreshold:o}=a,l=s===Ge.j.get("ingestBudgets.auditDefaultType"),c=l?Hr.xW:o;return T.createElement(T.Fragment,null,T.createElement("div",{className:Sn().columnWithTitle},T.createElement("label",{className:Sn().auditLabel},Ge.j.get("ingestBudgets.auditThreshold")),T.createElement("div",{className:Sn().auditThresholdHelpText},Ge.j.get("ingestBudgets.auditThresholdHelpText"))),T.createElement("div",{className:Sn().flex},T.createElement(qt.Form.Field,{name:"auditType",render:({field:e})=>T.createElement(qt.Select,Object.assign({},e,{onChange:e=>{const t=e.target.value,r=t===Ge.j.get("ingestBudgets.auditDefaultType")?Hr.xW:o;i("auditType",t),i("auditThreshold",r)},className:Sn().narrowInput}),[Ge.j.get("ingestBudgets.auditDefaultType"),Ge.j.get("ingestBudgets.auditCustomType")].map((e=>T.createElement(qt.Select.Item,{key:e,value:e},e))))}),T.createElement(qt.Form.Field,{name:"auditThreshold",render:({field:e})=>{const{name:i}=e,a=n[i];return T.createElement(qt.TextField,Object.assign({},e,{error:r[i]&&!!a,hintText:r[i]&&a,className:Sn().narrowInput,onChange:t,disabled:l,value:c}))}})))};var En=i(52800),Tn=i(51343),xn=i.n(Tn);const Cn=(0,En.connect)((e=>({scopeKeyItems:un(e)})),{})((e=>{const{field:{value:t,name:i},form:{setFieldValue:r},budgetVersion:n,scopeKeyItems:a,isAddMode:s}=e,{key:o,value:l}=Kr(t),[c,d]=(0,T.useState)(!1),u=(0,T.useRef)(null);(0,T.useEffect)((()=>{if(c&&u.current){const e=[{text:Ge.j.get("ingestBudgets.scopeWarningText"),multiline:!0,onClose:()=>d(!1)}];(0,R.showInlineNotification)(e,u.current)}}),[c]);const p=(e,t)=>{r(i,`${e}=${t}`),1!==n||c||s||d(!0)};return T.createElement("div",null,T.createElement("div",{className:xn().headerText},T.createElement(qt.Text,{variant:"textHeavy",noWrap:!1},Ge.j.get("ingestBudgets.scope")),T.createElement(qt.Text,{variant:"textSmall",noWrap:!1},Ge.j.get("ingestBudgets.budgetScopeHelpText"))),T.createElement("div",{className:xn().scopeRow},T.createElement(qt.AutoComplete,{className:xn().scopeKey,styleProps:{suggestionBox:xn().suggestionBox},items:a,selectedItems:(h=o,h?[{label:h,value:h}]:[]),onSelectedItemsChange:e=>{var t;const i=(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.value)||"";p(i,"")},label:Ge.j.get("ingestBudgets.scopeKeyLabel")}),T.createElement(qt.Text,{variant:"textSmall",className:xn().equal},"="),T.createElement(qt.TextField,{fullWidth:!0,className:xn().scopeValue,name:"scopeValue",value:l,label:Ge.j.get("ingestBudgets.scopeValueLabel"),onChange:e=>{const t=e.target.value;p(o,t)}})),T.createElement("div",{className:xn().flex,ref:u}));var h})),An=re.TimeZoneService.getTimeZoneDropdownOptions(),wn=e=>{const t=Yr(),i=(0,re.withIndex)(e.initialValues),r={"data-sumo-test":"ingest-budgets-add-update-submit-btn"},n={"data-sumo-test":"ingest-budgets-add-update-cancel-btn"},a=e.collectorData&&(!t||1===i.budgetVersion),s=e.collectorData?e.collectorData.length:0,o=t?Ge.j.get("ingestBudgets.assignedCollectorsV2Header",s):Ge.j.get("ingestBudgets.assignedCollectors"),l=t?Ge.j.get("ingestBudgets.assignedCollectorsInfo",s):Ge.j.get("ingestBudgets.howToAssign");return T.createElement(qt.Form,{key:t?i.scope:i.fieldValue,initialValues:e.initialValues,enableReinitialize:!0,onValidation:(t,r)=>{if(!e.isCancelInProgress){const n=(0,re.withIndex)(r),a=Object.keys(i).some((e=>((e,t)=>t[e]!==i[e])(e,n)));e.validator(t,a,r)}},validationRules:e.validationRules,onSubmit:()=>!0,render:({values:i,errors:s,touched:c,dirty:d,handleChange:u,setFieldValue:p})=>T.createElement("div",{className:Sn().addEditIngestBudget,"data-component":"ingest-budgets-add-edit-panel"},T.createElement("div",{className:Wt()(vn().labelHeader,vn().labelValueGroupOneColumn)},e.title),T.createElement("div",{className:Sn().header},T.createElement(qt.Button,{color:"primary",size:"small",onClick:()=>e.onPrimaryButtonClicked(i),type:"submit",disabled:!e.isPrimaryButtonEnabled&&!e.isSubmitting,buttonProps:r},Ge.j.get(e.saveLabel)),T.createElement(qt.Button,{color:"secondary",size:"small",type:"button",onClick:e.onCancelClicked,buttonProps:n},Ge.j.get("common.cancel"))),T.createElement("div",{className:Sn().formRow},T.createElement("div",{className:Wt()({[vn().labelValueGroupTwoColumn]:!t,[vn().labelValueGroupOneColumn]:t})},T.createElement(qt.Form.Field,{name:"name",render:({field:e})=>{const{name:i}=e,r=s[i];return T.createElement(qt.TextField,Object.assign({},e,{fullWidth:t,error:c[i]&&!!r,hintText:c[i]&&r,onChange:u,label:Ge.j.get("ingestBudgets.name")}))}})),!t&&T.createElement("div",{className:vn().labelValueGroupTwoColumn},T.createElement(qt.Form.Field,{name:"fieldValue",render:({field:e})=>{const{name:t}=e,i=s[t];return T.createElement(qt.TextField,Object.assign({},e,{error:c[t]&&!!i,hintText:c[t]&&i,onChange:u,label:Ge.j.get("ingestBudgets.fieldValue")}))}}))),T.createElement("div",{className:Sn().formRow},T.createElement("div",{className:vn().labelValueGroupOneColumn},T.createElement(qt.Form.Field,{name:"description",render:({field:e})=>{const{name:i}=e,r=s[i];return T.createElement(qt.TextField,Object.assign({},e,{fullWidth:!0,optional:!0,error:c[i]&&!!r,hintText:c[i]&&r,onChange:u,label:t?Ge.j.get("ingestBudgets.optionalDescription"):Ge.j.get("ingestBudgets.description")}))}}))),t&&T.createElement("div",{className:Wt()(Sn().groupForm)},T.createElement(qt.Form.Field,{name:"scope",budgetVersion:i.budgetVersion,isAddMode:e.isAddMode,component:Cn})),T.createElement("div",{className:Wt()(Sn().formRow,{[Sn().budgetCapacityV2Group]:t,[Sn().groupForm]:!t})},T.createElement("div",{className:Sn().columnWithTitle},T.createElement("label",{className:Sn().capacityLabel},Ge.j.get("ingestBudgets.budgetCapacity")),T.createElement("div",{className:Sn().capacityHelpText},Ge.j.get("ingestBudgets.capacityHelpText"))),T.createElement("div",{className:Sn().flex},T.createElement(qt.Form.Field,{name:"capacityAmount",render:({field:e})=>{const{name:t}=e,i=s[t];return T.createElement(qt.TextField,Object.assign({},e,{error:c[t]&&!!i,hintText:c[t]&&i,className:Sn().narrowInput,onChange:u,label:Ge.j.get("ingestBudgets.capacityAmount")}))}}),T.createElement(qt.Form.Field,{name:"capacityUnit",render:({field:e})=>T.createElement(qt.Select,Object.assign({},e,{label:Ge.j.get("ingestBudgets.capacityUnit"),onChange:u,className:Sn().narrowInput}),Hr.qz.map((e=>T.createElement(qt.Select.Item,{key:e,value:e},e))))}))),T.createElement("div",{className:Wt()(Sn().formRow,Sn().groupForm)},T.createElement("div",{className:Sn().columnWithTitle},T.createElement("label",null,Ge.j.get("ingestBudgets.resetEveryDay"))),T.createElement("div",{className:Wt()(vn().labelValueGroupThreeColumn,Sn().timeInputContainer)},T.createElement(qt.Form.Field,{name:"resetDate",render:({field:e})=>T.createElement(qt.TimeInput,{onChange:e=>p("resetDate",e.time.toString()),date:e.value,timeFormat:"short",showDate:!1,label:Ge.j.get("ingestBudgets.resetTimeOfDay")})})),T.createElement("div",{className:vn().labelValueGroupTwoThirdsColumn},T.createElement(qt.Form.Field,{name:"timezone",render:({field:e})=>T.createElement(qt.Select,Object.assign({},e,{onChange:u,label:Ge.j.get("ingestBudgets.timeZone")}),An.map((e=>T.createElement(qt.Select.Item,{key:e.value,value:e.value},e.key))))}))),T.createElement("div",{className:Sn().formRow},T.createElement("div",{className:vn().labelValueGroupOneColumn},T.createElement(qt.Form.Field,{name:"action",render:({field:t})=>T.createElement(qt.Select,Object.assign({},t,{onChange:u,label:Ge.j.get("ingestBudgets.actionTitle")}),e.actionsList.map((e=>T.createElement(qt.Select.Item,{key:e.key,value:e.key},e.label))))}))),Gr.currentUserHelper.hasFeatureFlag("UICustomAudit")&&T.createElement("div",{className:Wt()(Sn().formRow,Sn().groupForm)},T.createElement(bn,{handleChange:u,setFieldValue:p,touched:c,errors:s,values:i})),a&&T.createElement(fn,{headerText:o,infoText:l,data:e.collectorData,isEditMode:!0,removeCollector:e.removeCollector}))})};var In=i(48435);const Rn="^([0]+)?[1-9]{1}([0-9]{1})?$",Dn=new RegExp(Rn),On="^[0-9]{1,4}(\\.[0-9]{1,3})?$",Nn=new RegExp(On),Mn=e=>{const{budget:t,isAddEditPrimaryButtonEnabled:i,isAddMode:r,close:n,addBudget:a,editBudget:s,updateEditPrimaryButtonEnabled:o,removeCollector:l,collectorData:c}=e,d=Yr(),u=Ge.j.get("common.required_error_message"),p={name:[{type:"required",message:(0,In.sprintf)(u,Ge.j.get("ingestBudgets.name"))},{type:"min",value:1,message:Ge.j.get("ingestBudgets.nameMinLength",1)}],fieldValue:[{type:"required",message:(0,In.sprintf)(u,Ge.j.get("ingestBudgets.fieldValue"))},{type:"min",value:1,message:Ge.j.get("ingestBudgets.fieldValueMinLength",1)}],capacityAmount:[{type:"required",message:(0,In.sprintf)(u,Ge.j.get("ingestBudgets.capacityAmount"))},{type:"maxValue",value:1024,message:Ge.j.get("ingestBudgets.maxCapacityAmountExceeded")},{type:"regex",message:Ge.j.get("ingestBudgets.integerRequired"),expr:On}],auditThreshold:[{type:"required",message:Ge.j.get("ingestBudgets.auditThresholdValueInvalid")},{type:"minValue",value:1,message:Ge.j.get("ingestBudgets.auditThresholdValueInvalid")},{type:"maxValue",value:100,message:Ge.j.get("ingestBudgets.auditThresholdValueInvalid")},{type:"regex",message:Ge.j.get("ingestBudgets.auditThresholdValueInvalid"),expr:Rn}],resetDate:[{type:"required",message:(0,In.sprintf)(u,Ge.j.get("ingestBudgets.resetTimeOfDay"))}]},h=[{key:Hr.LO.THROTTLE,label:Ge.j.get("ingestBudgets.throttle")},{key:Hr.LO.AUDIT,label:Ge.j.get("ingestBudgets.audit")}],[m,g]=(0,T.useState)(!1),[y,v]=(0,T.useState)(!1),f={name:"",fieldValue:"",scope:"",description:"",capacityBytes:0,timezone:"Etc/UTC",resetTime:"0:00 AM",auditThreshold:85,action:Hr.LO.AUDIT},_=t||f,S=(0,re.bytesToSizedString)(_.capacityBytes,3,!1,!0),b=Number(S.replace(",","").split(" ")[0]),E=S.split(" ")[1],x=_.auditThreshold===Hr.xW?Ge.j.get("ingestBudgets.auditDefaultType"):Ge.j.get("ingestBudgets.auditCustomType"),C=Number(_.resetTime.split(":")[0]),A=_.resetTime.split(":")[1],w=Number(A.split(" ")[0]),I=new Date(moment().hour(C).minute(w).second(0).toString()),R=r?Ge.j.get("ingestBudgets.createIngestBudget"):Ge.j.get("ingestBudgets.editIngestBudget",_.name),D=r?"common.add":"common.update",O={name:_.name,fieldValue:_.fieldValue||"",scope:_.scope||"",budgetVersion:_.budgetVersion||1,description:_.description||"",capacityUnit:E,capacityAmount:b,resetDate:I,timezone:"UTC"===_.timezone?"Etc/UTC":_.timezone,action:_.action,auditThreshold:_.auditThreshold,auditType:x},N=e=>{const{name:t,fieldValue:i="",capacityAmount:r,scope:n=""}=e,a=""!==t.trim()&&t.trim().length>=1,s=""!==i.trim()&&i.trim().length>=1,o=r>0&&Nn.test(e.capacityAmount.toString())&&r<1024,l=(e=>{let t=!0;return t="string"==typeof e?e.match(/GMT[-+][0-9]+\s\([a-zA-z\s]+\)/)?(0,qt.isValidTimeFormat)((0,qt.formatTime)(new Date(e))):(0,qt.isValidTimeFormat)(e):""!==e.error||(0,qt.isValidTimeFormat)(e.time),t})(e.resetDate),c=Dn.test(e.auditThreshold.toString())&&e.auditThreshold>0&&e.auditThreshold<100,{key:u,value:p}=Kr(n);return l&&o&&a&&c&&(d?!(!u||!p):s)};return r||O.name.length?T.createElement(wn,{initialValues:O,onPrimaryButtonClicked:e=>{g(!0),e.capacityBytes=(0,re.convertStringToByte)(`${e.capacityAmount} ${e.capacityUnit}`,!0),e.resetTime=(e=>{const t="object"==typeof e?e.time:e,i=t.match(/\s/g),r=i?i.length:0;let n,a;0===r?n=t:1===r?[n,a]=t.split(" "):n=t.split(" ")[4];const s=n.split(":");1===s.length&&s.push("00"),2===s.length&&s.push("00"),1===s[0].length&&(s[0]="0"+s[0]),1===s[1].length&&(s[1]="0"+s[1]),1===s[2].length&&(s[2]="0"+s[2]);const o=a&&"pm"===a.toLowerCase(),l=parseInt(s[0]);return o&&l<12?s[0]=(parseInt(s[0],10)+12).toString():l>23&&(s[0]=(l-24).toString()),s.pop(),s.join(":")})(e.resetDate.toString()),r&&a?a(e):s&&s(e),n(!1),g(!1)},onCancelClicked:()=>{v(!0),g(!1),n(!1),v(!1)},validator:(e,t,i)=>{if(e){const e=!!t&&N(i);o(e)}},validationRules:p,isSubmitting:m,isPrimaryButtonEnabled:i,isCancelInProgress:y,title:R,saveLabel:D,actionsList:h,removeCollector:l,collectorData:r?null:c,isAddMode:r}):null};var kn=i(9304),Ln=i.n(kn);class Pn extends T.PureComponent{constructor(){super(...arguments),this.onAction=e=>{const{modalMethods:t,onClose:i,data:r}=this.props;e&&t.deleteAction&&t.deleteAction(!0,r),i()}}render(){const{isOpen:e,data:t}=this.props,i=t,r=i?i.name:"",n=i?`${Ge.j.get("ingestBudgets.deleteConfirmTitle")} ${i.name}`:"";return T.createElement(qt.ConfirmDialog,{title:n,onAction:this.onAction,open:e,sumoTest:"ingest-budgets-delete-dialog",remove:!0},T.createElement("div",{className:Ln().deleteConfirmMessage},Ge.j.get("ingestBudgets.deleteConfirm1")),T.createElement("div",{className:Ln().deleteConfirmMessage},Ge.j.get("ingestBudgets.deleteConfirm3"),T.createElement("span",{className:Ln().deleteConfirmMessageSpan},Ge.j.get("ingestBudgets.deleteConfirm4",r),"?")))}}const Fn=e=>{const{percentUsage:t,usageStatus:i}=e;let r,n,a="";switch(i){case Hr.Jp.APPROACHING:r="exclamation-triangle",a="saki";break;case Hr.Jp.EXCEEDED:r="exclamation-circle",a="coral",n=Ln().usageExceeded}return T.createElement("div",null,T.createElement("span",{className:n},t)," ",r&&T.createElement(qt.Icon,{color:a,name:r}))};var Un=i(46458),Vn=i.n(Un);const Bn=e=>{const{resetTime:t,timezone:i}=Object.assign({},e);return T.createElement("div",null,t," ",T.createElement("span",{className:Vn().timezone},"(",i,")"))};var $n=i(61758),Hn=i.n($n);const Wn=e=>{const{name:t,budgetVersion:i=1}=e;return T.createElement(T.Fragment,null,T.createElement(qt.Text,{variant:"textSmall",noWrap:!0},t),1===i&&T.createElement(qt.Chip,{className:Hn().labelText,readOnly:!0,condensed:!0},Ge.j.get("ingestBudgets.versionLabel")))};var qn=i(33015),jn=i.n(qn);const Qn=e=>{const{percentUsage:t,usageStatus:i,totalUsage:r,isListView:n=!0}=e,{showIcon:a,iconColor:s,textVariant:o}=((e,t)=>{let i,r=!1,n=e?"textSmall":"text";switch(t){case Hr.Jp.APPROACHING:r=!0,i="persimmon";break;case Hr.Jp.EXCEEDED:r=!0,i="coral",n="textSmallHeavy"}return{showIcon:r,iconColor:i,textVariant:n}})(n,i);return n||r?T.createElement("div",{className:jn().usageContent},T.createElement(qt.Text,{variant:o,className:jn().usageText},t),r&&T.createElement(qt.Text,{variant:o,className:jn().usageText},`(${r})`),a&&T.createElement(qt.Icon,{color:s,name:"exclamation-triangle"})):T.createElement(qt.Text,null,Ge.j.get("ingestBudgets.empty"))};var zn=i(79034),Gn=i.n(zn);const Kn=e=>{const{addEnabled:t,openAddEditBudgetCard:i,editBudget:r,deleteBudget:n,budgets:a,tableInit:s,rowSelected:o,editEnabled:l}=e,[c,d]=(0,T.useState)(""),u=(e,t)=>(0,re.convertStringToByte)(e,!0)-(0,re.convertStringToByte)(t,!0),p=Yr(),h=e=>{const{data:t}=e,i=(0,re.convertStringToByte)(t.capacityBytes,!0),r=p?Hr.Ww.V2:Hr.Ww.V1,n=Xr(i,r,t.usageBytes);return Object.assign(Object.assign({},n),{usageStatus:t.usageStatus})},m=e=>{const{data:t}=e;return{resetTime:t.resetTime,timezone:(t.timezone.indexOf("/")>-1?t.timezone.split("/")[1]:t.timezone).replace(/_/g," ")}},g=[{field:"name",headerName:Ge.j.get("ingestBudgets.name"),minWidth:180,sort:"asc",comparator:(e,t)=>e.toLowerCase().localeCompare(t.toLowerCase())},{field:"fieldValue",headerName:Ge.j.get("ingestBudgets.fieldValue"),minWidth:200,comparator:(e,t)=>e.toLowerCase().localeCompare(t.toLowerCase())},{field:"capacityBytes",headerName:Ge.j.get("ingestBudgets.capacityBytes"),minWidth:130,comparator:u},{field:"usageBytes",headerName:Ge.j.get("ingestBudgets.usageBytes"),minWidth:120,customCellRenderer:{component:Fn,props:e=>h(e)}},{field:"numberOfCollectors",headerName:Ge.j.get("ingestBudgets.numCollectors"),minWidth:150},{field:"resetTime",headerName:Ge.j.get("ingestBudgets.resetTime"),minWidth:130,isResizable:!1,customCellRenderer:{component:Bn,props:e=>m(e)}}],y=[{field:"name",headerName:Ge.j.get("ingestBudgets.name"),minWidth:250,sort:"asc",comparator:(e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()),customCellRenderer:{component:Wn,props:e=>e.data}},{field:"scope",headerName:Ge.j.get("ingestBudgets.scope"),minWidth:200,comparator:(e="",t="")=>e.toLowerCase().localeCompare(t.toLowerCase())},{field:"capacityBytes",headerName:Ge.j.get("ingestBudgets.capacityBytes"),minWidth:130,comparator:u},{field:"usageBytes",headerName:Ge.j.get("ingestBudgets.usageBytes"),minWidth:120,customCellRenderer:{component:Qn,props:e=>h(e)}},{field:"resetTime",headerName:Ge.j.get("ingestBudgets.resetTime"),minWidth:130,isResizable:!1,customCellRenderer:{component:Bn,props:e=>m(e)}}],v=x().createElement(qt.Button,{icon:"plus",color:"primary",disabled:!t,buttonProps:{"data-sumo-test":"ingest-budgets-add-budget-btn"},onClick:()=>i(!0)},Ge.j.get("ingestBudgets.addButton")),f=()=>d(""),_={isEnabled:!0,actions:{edit:{show:l,icon:"pencil",onClick:(e,t)=>r(e,t)},delete:{show:!0,icon:"trash",opensModal:!0,onClick:e=>{e.stopPropagation()},ModalComponent:Pn,modalData:{isLoading:!1},modalMethods:{deleteAction:n}}}};return x().createElement(qt.SearchTable,{columnOptions:p?y:g,data:a,searchOptions:{searchText:c,onSearchChangeHandler:e=>{var t;return d((null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)||"")},onSearchClearHandler:f,isEnabled:!0,searchPlaceHolderText:Ge.j.get("ingestBudgets.filterPlaceHolder")},gridOptions:{rowActionConfig:_,paginationPageSize:50,stateOverlayConfig:(()=>{const e=a&&a.length?Hr.GA.NO_ROW:Hr.GA.ZERO_STATE;return{overlayType:e,title:Ge.j.get(`ingestBudgets.${e}.title`),description:Ge.j.get(`ingestBudgets.${e}.description`),buttonText:Ge.j.get(`ingestBudgets.${e}.buttonText`),buttonOnClick:e===Hr.GA.NO_ROW?f:()=>i(!0)}})(),onTableInit:e=>s(e),onRowClicked:e=>{e.event.srcElement.classList.contains("icon")||o(e.data)}},button:v,styleProps:{table:Gn().tableContainer}})};var Yn=i(92826),Zn=i(13422),Xn=i(28243);const Jn=e=>e.megaEntities[Yn.Se.USERS],ea=(0,cn.createSelector)([Jn],(e=>Object.values(e||[]).sort(((e,t)=>{const i=`${e.firstName.toLowerCase()} ${e.lastName.toLowerCase()}`,r=`${t.firstName.toLowerCase()} ${t.lastName.toLowerCase()}`;return i>r?1:i<r?-1:0}))));var ta=i(65593);const ia="USERS_ACTIONS.ACCOUNT_OWNER_FETCH_SUCCESS",ra="USERS_ACTIONS.SUPPORT_ACCOUNTS_FETCH_SUCCESS";function na(e,{payload:{accountOwner:t}}){return Object.assign(Object.assign({},e),{accountOwner:t})}function aa(e,{payload:{supportAccounts:t}}){return Object.assign(Object.assign({},e),{supportAccounts:t})}const sa={accountOwner:"",supportAccounts:[]},oa="ROLES_ACTIONS.CAPABILITY_DATA_LOADED";function la(e,{payload:{capabilities:t,capabilityGroups:i}}){return Object.assign(Object.assign({},e),{capabilities:t,capabilityGroups:i})}const ca={capabilities:{},capabilityGroups:{}};const da={resetPassword:function(e,t){return(0,D.legacyHttpPost)(e+"/"+t+"/password/reset",void 0)},changeEmail:function(e,t,i){return(0,D.legacyHttpPost)(e+"/"+t+"/email/requestChange",i)},unlockUser:function(e,t){return(0,D.legacyHttpPost)(`${e}/${t}/unlock`,void 0)},activateDeactivate:function(e,t,i){return(0,D.legacyHttpPut)(e+"/"+t,i)},disableTwoStepVerification:function(e,t,i){return(0,D.legacyHttpPut)(e+"/"+t+"/mfa/disable",i)},fetchAccountOwner:function(){return(0,D.legacyHttpGet)("/api/v1/account/accountOwner")},fetchSupportAccounts:function(e){return(0,D.legacyHttpGet)(`${e}/supportAccountUsers`)}};const ua={assignUsers:function(e,t,i){return(0,D.legacyHttpPut)(`${e}/${t}`,i)},fetchCapabilities:function(e){return(0,D.legacyHttpGet)("/api/v2/roles/capabilities")}};function pa(e,t){return{type:e+"_"+ia,payload:t}}function ha(e,t){return{type:e+"_"+ra,payload:t}}const ma={resetPassword:function(e,t,i,r){return n=>(n((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:[],feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.PROCESSING,feedbackButtonText:""}})),da.resetPassword(t,i).then((()=>{n((0,Xn.closeShareDialog)(e)),(0,R.showCasualNotification)({message:r,variant:"success"})})).catch((({response:{data:{errors:t}}})=>{n((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:t,feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.DEFAULT,feedbackButtonText:Ge.j.get("usersAndRoles.buttonText.retry")}}))})))},changeEmail:function(e,t,i,r,n){return a=>(a((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:[],feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.PROCESSING,feedbackButtonText:""}})),da.changeEmail(t,i,{email:r}).then((()=>{a((0,Xn.closeShareDialog)(e)),(0,R.showCasualNotification)({message:n,variant:"success"})})).catch((({response:{data:{errors:t}}})=>{a((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:t,feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.DEFAULT,feedbackButtonText:Ge.j.get("usersAndRoles.buttonText.retry")}}))})))},unlockUser:function(e,t,i,r){return n=>{const{id:a}=t;return da.unlockUser(e,a).then((e=>{if(e.errors)throw e;(0,R.showCasualNotification)({message:r,variant:"success"});const a=Object.assign(Object.assign({},t),{isLocked:!1}),s=(0,Xn.normalizeTemplateData)(i,[a]);n((0,Xn.megaEntitiesPartiallyLoaded)(s))})).catch((({response:{data:{errors:e}}})=>{const t=(0,Xn.extractErrorMessagesFromErrors)(e).join(", ");(0,R.showCasualNotification)({message:t,variant:"critical"})}))}},activateDeactivateUser:function(e,t,i,r,n,a){return s=>(s((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:[],feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.PROCESSING,feedbackButtonText:""}})),da.activateDeactivate(i,r,n).then((i=>{const r=(0,Xn.normalizeTemplateData)(t,[i]);s((0,Xn.megaEntitiesPartiallyLoaded)(r)),s((0,Xn.closeSideBar)(e,{userMode:null,selectedId:void 0})),s((0,Xn.closeShareDialog)(e)),(0,R.showCasualNotification)({message:a,variant:"success"})})).catch((({response:{data:{errors:t}}})=>{s((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:t,feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.DEFAULT,feedbackButtonText:Ge.j.get("usersAndRoles.buttonText.retry")}}))})))},disableTwoStepVerification:function(e,t,i,r,n,a,s){return o=>(o((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:[],feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.PROCESSING,feedbackButtonText:""}})),da.disableTwoStepVerification(i,r,{email:n.email,password:a}).then((()=>{const i=Object.assign(Object.assign({},n),{isMfaEnabled:!1}),r=(0,Xn.normalizeTemplateData)(t,[i]);o((0,Xn.megaEntitiesPartiallyLoaded)(r)),o((0,Xn.closeSideBar)(e,{userMode:null,selectedId:void 0})),o((0,Xn.closeShareDialog)(e)),(0,R.showCasualNotification)({message:s,variant:"success"})})).catch((({response:{data:{errors:t}}})=>{o((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:t,feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.DEFAULT,feedbackButtonText:Ge.j.get("usersAndRoles.buttonText.retry")}}))})))},fetchAccountOwner:function(e){return t=>da.fetchAccountOwner().then((({data:i})=>{t(pa(e,{accountOwner:i}))})).catch((({response:{data:{errors:e}}})=>{const t=(0,Xn.extractErrorMessagesFromErrors)(e).join(", ");(0,R.showCasualNotification)({message:t,variant:"critical"})}))},accountOwnerFetchSuccess:pa,supportAccountsFetchSuccess:ha,fetchSupportAccounts:function(e,t){return i=>da.fetchSupportAccounts(t).then((({data:t})=>{i(ha(e,{supportAccounts:t}))})).catch((({response:{data:{errors:e}}})=>{const t=(0,Xn.extractErrorMessagesFromErrors)(e).join(", ");(0,R.showCasualNotification)({message:t,variant:"critical"})}))}},ga=new qr.schema.Entity("capabilityGroups"),ya=new qr.schema.Entity("capabilities",{group:ga},{idAttribute:(e,t,i)=>e.id}),va=new qr.schema.Values(ya);const fa=e=>"Administrator"===e.name;function _a(e,t){return`${t[e].group}.${e}`}function Sa(e,t,i){const r=_a(e,t);if(i.hasOwnProperty(r))return i[r];const n=Object.keys(t).reduce(((i,r)=>t[r].dependsOn.includes(e)?[...i,r]:i),[]);return n.length?(i[r]=n.reduce(((e,r)=>e||Sa(r,t,i)),!1),i[r]):(i[r]=!1,!1)}function ba(e,t,i){const r=i[_a(e,t)],n=((e,t)=>{const i=new Set,r=e=>{const n=t[e].dependsOn.filter((e=>!i.has(e)));return n.forEach((e=>{i.add(e)})),0===n.length?[]:n.reduce(((e,t)=>[...e,t,...r(t)]),[])};return[...new Set(r(e))]})(e,t);if(r)return n.reduce(((e,i)=>Object.assign(Object.assign({},e),{[_a(i,t)]:!0})),{});const a=Object.assign({},i);return function(e,t,i){e.forEach((e=>{delete i[_a(e,t)]}))}(n,t,a),n.forEach((e=>Sa(e,t,a))),a}function Ea(e,t){return e.filter((e=>t.includes(e)))}function Ta(e,t){return{type:e+"_"+oa,payload:t}}function xa(e,t){return i=>ua.fetchCapabilities(t).then((t=>{return i(Ta(e,(r=function(e){const t={};let i=0;const r={};let n=0;const a=e.map((e=>e.id));function s(e){return t.hasOwnProperty(e.id)||(i++,t[e.id]=i),Object.assign(Object.assign({},e),{order:t[e.id]})}return e.map((e=>(r.hasOwnProperty(e.id)||(n++,r[e.id]=n),Object.assign(Object.assign({},e),{dependsOn:Ea(e.dependsOn,a),order:r[e.id],group:s(e.group)}))))}(t.data),(0,qr.normalize)(r,va).entities)));var r})).catch((({response:{data:{errors:e}}})=>{const t=(0,Xn.extractErrorMessagesFromErrors)(e).join(", ");(0,R.showCasualNotification)({message:t,variant:"critical"})}))}const Ca={assignUsersToRoles:function(e,t,i,r,n,a){return s=>(s((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:[],feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.PROCESSING,feedbackButtonText:""}})),ua.assignUsers(i,r,n).then((i=>{const r=(0,Xn.normalizeTemplateData)(t,[i]);s((0,Xn.megaEntitiesPartiallyLoaded)(r)),s((0,Xn.closeShareDialog)(e)),(0,R.showCasualNotification)({message:a,variant:"success"})})).catch((({response:{data:{errors:t}}})=>{s((0,Xn.modifySharedDialogData)(e,{dialogData:{errorMessages:t,feedbackButtonState:Xn.FEEDBACK_BUTTON_STATE.DEFAULT,feedbackButtonText:Ge.j.get("usersAndRoles.buttonText.retry")}}))})))},fetchCapabilities:xa,capabilityDataLoaded:Ta},Aa=(0,cn.createSelector)([e=>e.megaEntities[Yn.Se.ROLES],e=>e.views[Yn.Se.USERS].accountOwner,e=>e.views[Yn.Se.USERS].supportAccounts],((e,t,i)=>({customData:{rolesData:e,accountOwner:t||"",supportAccounts:i||[]}}))),wa=e=>e.views[Yn.Se.ROLES].capabilities,Ia=e=>e.views[Yn.Se.ROLES].capabilityGroups,Ra=(0,cn.createSelector)([e=>e.megaEntities[Yn.Se.USERS],wa,Ia],((e,t,i)=>({customData:{usersData:e,capabilities:t,capabilityGroups:i}})));(()=>{const e=Xn.Template1Container.getReducersAndInitState(Yn.Se.USERS),{initialState:t,reducers:i}=(r=Yn.Se.USERS,{initialState:sa,reducers:{[r+"_"+ia]:na,[r+"_"+ra]:aa}});var r;ta.Z.register({name:Yn.Uh.USERS,initialState:Object.assign(Object.assign({},e.initialState),t),actionHandlers:Object.assign(Object.assign({},e.reducers),i)})})(),(()=>{const e=Xn.Template1Container.getReducersAndInitState(Yn.Se.ROLES),{initialState:t,reducers:i}=(r=Yn.Se.ROLES,{initialState:ca,reducers:{[r+"_"+oa]:la}});var r;ta.Z.register({name:Yn.Uh.ROLES,initialState:Object.assign(Object.assign({},e.initialState),t),actionHandlers:Object.assign(Object.assign({},e.reducers),i)})})();var Da=i(56529);function Oa(e){return e===(0,re.getHexStringFromNumber)(parseInt(Gr.currentUserHelper.get().id))}function Na(e,t){var i;return(null===(i=e.status)||void 0===i?void 0:i.isLocked)&&!t.samlEnabled&&!t.typeHelpers.isHeroku}var Ma=i(50153),ka=i.n(Ma);const La=(0,T.memo)((e=>x().createElement(qt.Text,{className:e.className},Ge.j.get("usersAndRoles.learnAboutCapabilities.rest"),x().createElement(qt.TextLink,{href:"https://help.sumologic.com/Manage/Users-and-Roles/Manage-Roles/Role-Capabilities",external:!0},Ge.j.get("usersAndRoles.learnAboutCapabilities.link")))));var Pa=i(45525),Fa=i.n(Pa),Ua=i(13617),Va=i.n(Ua),Ba=i(49403);const $a=e=>{const{isActive:t=!1,isLocked:i=!1}=e||{};let[r,n]=t?["statusActiveLabel",Xn.STATUS_ICONS.CHECK]:["statusInactiveLabel",Xn.STATUS_ICONS.EXCLAMATION_CIRCLE];return i&&(n=Xn.STATUS_ICONS.LOCK,r=t?"statusLockedActiveLabel":"statusLockedInactiveLabel"),{userStatusLabel:Ge.j.get(`users.${r}`),userStatusIcon:n}},Ha=e=>{const t=$a(e.status);return[{type:Xn.DETAILS_CARD_RENDERER_TYPES.STATUS_INFO,label:Ge.j.get("users.statusFieldLabel"),value:t.userStatusLabel,statusIcon:t.userStatusIcon,dataSumoTest:"user-status",classList:[Fa().statusInfo]},{type:Xn.DETAILS_CARD_RENDERER_TYPES.STATUS_INFO,label:Ge.j.get("users.twoFAFieldLabel"),value:e.mfa?Ge.j.get("usersAndRoles.enabled"):Ge.j.get("usersAndRoles.disabled"),statusIcon:e.mfa?Xn.STATUS_ICONS.CHECK:Xn.STATUS_ICONS.EXCLAMATION_CIRCLE,dataSumoTest:"user-mfa",classList:[Fa().statusInfo]}]},Wa=({entityData:e,rolesData:t,capabilities:i,capabilityGroups:r})=>{const n=e.roleIds;let a="",s=[];if(n&&n.length){const e=n.map((e=>t[e]));a=(e=>{const t=e.reduce(((e,t)=>{if(t){const i=t.filterPredicate;"*"===i?e.unshift(i):""!==i&&e.push(i)}return e}),[]);return(0,Ba.Z)(t).join(" OR ")||"(*)"})(e),s=(e=>{const t=e.reduce(((e,t)=>{if(null==t?void 0:t.capabilities){const i=t.capabilities;e.push(...i)}return e}),[]);return(0,Ba.Z)(t)})(e)}return{items:[[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("users.modifyUserFirstName")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.firstName}]},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("users.modifyUserLastName")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.lastName}]}],[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("users.emailField")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.email}]}],[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("users.modifyUserAssignedRoles")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.CHIPS,list:e.roleNames}]}],Ha(e),[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("users.lastLoginField")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.lastLoginTimestamp}]}],[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("users.searchFilterLabel"),helpInfoIcon:{text:Ge.j.get("roles.searchFilterHelpText.first"),iconName:Yn.tx.QUESTION_CIRCLE,enableThemedStyles:!0}},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:a,classList:[Fa().searchFilterValue]}]}],...ja(s,i,r),(0,Xn.getCreatedModifiedField)(e)]}},qa=(e,t)=>e.reduce(((e,i)=>{const r=t[i];return r&&(e[r.group]||(e[r.group]=[]),e[r.group].push(i)),e}),{}),ja=(e,t,i,r)=>{const n=qa(e,t),a=Object.keys(n).map((e=>((e,t)=>[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,classList:[Fa().capabilityGroup],items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:e},{type:Xn.DETAILS_CARD_RENDERER_TYPES.LIST,classList:[Fa().listWrapper],list:t}]}])(i[e].label,n[e].map((e=>t[e].label))))),s=[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,classList:[Fa().capabilityLabelWrapper],items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.BOLD_FIELD_LABEL,label:Ge.j.get("roles.capabilityListTitle"),classList:[Fa().viewBoldLabel],helpText:T.createElement(La,null)}]}];return a.length||void 0===r?[s,...a]:(s[0].items.push({type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:r,classList:[Va().descriptionText]}),[s])},Qa=()=>(0,Zn.bindActionCreators)({fetchCapabilities:xa,fetchList:Xn.fetchList},Te.store.dispatch);var za=i(64712),Ga=i.n(za);const Ka=({userCount:e,onClick:t})=>T.createElement("div",{style:{display:"inline-flex"},ref:e=>{e&&e.addEventListener("click",(e=>{t(e),e.stopPropagation()}))}},T.createElement(qt.TextButton,{"data-component":"DisplayUsersComponent"},e));class Ya extends Xn.Template1Container{constructor(){super(...arguments),this.handleAssignedUsers=(e,t)=>{const{assignUsersToRoles:i,customData:{usersData:r}}=this.props;this.openSharedDialog(Yn.FH.ROLES_ASSIGNED_USERS_DIALOG_COMPONENT,{currentRole:t,usersData:r},{confirm:e=>{i(this.entityName,this.schema,this.props.endpoint,t[this.entityIdField],Object.assign(Object.assign({},t),{users:e}),Ge.j.get("roles.assignedUsersDialog.successMessage",t.name))}})},this.getSuccessMessage=(e,t)=>Ge.j.get(`roles.successMessages.${e}`,t.name)||""}componentDidMount(){super.componentDidMount(),this.props.fetchUsersList&&this.props.fetchUsersList(),this.props.fetchCapabilities(this.entityName,this.props.endpoint)}transformToFeatureData(e,t={}){return super.transformToFeatureData(e,t).map((e=>Object.assign(Object.assign({},e),{rowActionDetailConfig:this.getTableRowActionConfig(t,e)})))}getColumnLabels(){return[{field:"name",headerName:Ge.j.get("roles.rolesField"),minWidth:52,width:211,undraggable:!0},{field:"description",headerName:Ge.j.get("roles.descriptionField"),minWidth:52,width:331,undraggable:!0},{field:"users",headerName:Ge.j.get("roles.usersField"),width:613,isResizable:!1,undraggable:!0,customCellRenderer:{component:Ka,props:e=>({onClick:t=>this.handleAssignedUsers(t,e.data),userCount:e.data.users.length})},comparator:(e,t)=>e.length-t.length}]}getFilteredDefaultRowActionConfig(e,t){const i=super.getFilteredDefaultRowActionConfig(e,t);return t&&fa(t)&&(delete(0,re.withIndex)(i)[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT],delete(0,re.withIndex)(i)[Xn.TEMPLATE1_ACTIONS_NAMES.DELETE]),i}renderSidebarErrorMessages(){const{sidebarData:{selectedData:e}}=this.props;if(fa(e)){const e={text:Ge.j.get("roles.adminRoleNotification"),status:"default",multiline:!0,className:Ga().defaultNotification};return T.createElement(qt.InlineNotification,Object.assign({},e))}return super.renderSidebarErrorMessages()}getPanelActions(){const e=super.getPanelActions();return Object.assign(Object.assign({},e),{openAssignedUsers:this.handleAssignedUsers})}getDialogContentData(e,t){const i=e.id?"existing":"new",r={contextDescription:Ge.j.get(`roles.discardDialogEntityDescription.${i}`)},n={contextDescription:T.createElement(T.Fragment,null,Ge.j.get("roles.deleteDialogDescription"),T.createElement("strong",null,t.name),"?")};return Object.assign(Object.assign({},super.getDialogContentData(e,t)),{discardDialog:r,defaultDelete:E.currentUserHelper.hasFeatureFlag("UIMegacomponentDeleteDialogV2")?void 0:n})}onTableRowActionDelete(e,t){if(!t.users.length)return super.onTableRowActionDelete(e,t);this.openSharedDialog(Yn.FH.CUSTOM_ROLE_DELETE_DIALOG,{name:t.name})}}const Za=e=>Xn.Template1Container.getSchema(e),Xa=Xn.Template1Container.getActions(),Ja=(e,t)=>{const i=(r=t.entityName,Xn.Template1Container.getSelectors(r).selectEntitiesComposition);var r;return Object.assign(Object.assign({},i(e)),Ra(e))};const es=new class{constructor(){this.entityName=Yn.Se.ROLES,this.schema=Za(this.entityName)}fetchCapabilities(){return Qa().fetchCapabilities(Yn.Se.ROLES,Yn.rV.ROLES)}getCapabilities(){return wa(Te.store.getState())}fetchRolesList(){return Qa().fetchList(this.entityName,this.schema,Yn.rV.ROLES,Xn.FETCH_LIMIT_PARAM)}getRolesList(){return Te.store.getState().megaEntities.megaRoles}getCapabilityGroups(){return Ia(Te.store.getState())}};window.rolesDataService=es;const ts=(e,t)=>e.toUpperCase()<t.toUpperCase()?-1:e.toUpperCase()>t.toUpperCase()?1:0,is=e=>{const{isLocked:t,isActive:i}=e.status,{symbolName:r,symbolColor:n}=t?Xn.STATUS_ICON_DATA.LOCK:i?Xn.STATUS_ICON_DATA.CHECK:Xn.STATUS_ICON_DATA.EXCLAMATION_CIRCLE,{userStatusLabel:a}=$a(e.status);return T.createElement(qt.Tooltip,{title:a,placement:"right"},T.createElement(qt.Icon,{name:r,size:"medium",color:n,className:ka().statusIcon}))};class rs extends Xn.Template1Container{constructor(){super(...arguments),this.getRoleNamesForUser=e=>{var t;const{customData:{rolesData:i,accountOwner:r}}=this.props;return(null===(t=e.roleIds)||void 0===t?void 0:t.length)&&!_.isEmpty(i)?this.getRolesNames(i,e.roleIds,r===e.id):""},this.transformToFeatureData=(e,t={})=>e.map((e=>{const i=this.getRoleNamesForUser(e),r=(n=e.lastLoginTimestamp)?0===Date.parse(n)?Ge.j.get("usersAndRoles.na"):(0,Xn.formatTimestamp)(n):Ge.j.get("usersAndRoles.never");var n;const a={id:e.id,status:{isLocked:e.isLocked,isActive:e.isActive},firstName:e.firstName,lastName:e.lastName,name:this.getNameFromUser(e),email:e.email,roleIds:e.roleIds,roleNames:i,lastLoginTimestamp:r,mfa:e.isMfaEnabled,mfaStatus:e.isMfaEnabled?Ge.j.get("users.mfaEnabledLabel"):"",createdAt:e.createdAt,createdBy:e.createdBy,modifiedAt:e.modifiedAt,modifiedBy:e.modifiedBy},s={rowActionDetailConfig:this.getTableRowActionConfig(t,a)};return Object.assign(Object.assign({},a),s)})).sort(((e,t)=>ts(e.name,t.name))),this.getRolesNames=(e,t,i=!1)=>{const r=[];return i&&r.push(Ge.j.get("users.accountOwnerLabel")),[...r,...t.map((t=>e[t].name)).sort()]},this.haveSameRoles=(e,t)=>{const i=e.roleIds,r=null==t?void 0:t.roleIds;for(const e of i)if(!(null==r?void 0:r.includes(e)))return!1;return!0},this.handleUserDeleteSubmit=(e,t)=>{const{endpoint:i,sidebarData:{selectedData:r}}=this.props,n=this.props.data,a=Ge.j.get(`users.successMessages.${Xn.CrudActions.DELETE}`,this.getNameFromUser(e)),s=Gr.currentUserHelper.hasFeatureFlag("UITransferScheduledView"),o=n.find((e=>{var i;return e.id===(null===(i=t[0])||void 0===i?void 0:i.value)}));if(!t.length||s&&!this.haveSameRoles(e,o)){const n=t.length?{transferTo:t[0].value}:{};this.openSharedDialog(Yn.FH.USERS_CUSTOM_DESTRUCTIVE_DELETE_COMPONENT,{targetUser:e,transferUserName:o&&`${o.firstName} ${o.lastName}`,transferUserRoles:o&&this.getRoleNamesForUser(o)},{onSubmit:()=>this.props.deleteEntity(this.entityName,i,e.id,a,r[this.entityIdField],n)})}else this.props.deleteEntity(this.entityName,i,e.id,a,r[this.entityIdField],{transferTo:t[0].value})},this.getUniqueTransferDeleteParams=(e,t,i)=>{const r=i.find((e=>e.id===t[0].value)),n=`${null==r?void 0:r.firstName} ${null==r?void 0:r.lastName}`;return{successMessage:Ge.j.get("users.deleteDialogV2.transferDeleteOption.successMessage",{name:e,transferName:n}),transferParams:{transferTo:t[0].value}}},this.getUniqueHardDeleteParams=e=>({successMessage:Ge.j.get("users.deleteDialogV2.hardDeleteOption.successMessage",e),transferParams:Object.assign({},Gr.currentUserHelper.hasFeatureFlag("UIUserDeleteContentParam")?{deleteContent:!0}:{})}),this.handleUserDeleteSubmitV2=(e,t)=>{const{endpoint:i,data:r,sidebarData:{selectedData:n}}=this.props,a=`${e.firstName} ${e.lastName}`,{successMessage:s,transferParams:o}=t?this.getUniqueTransferDeleteParams(a,t,r):this.getUniqueHardDeleteParams(a);return this.props.deleteEntity(this.entityName,i,e.id,s,n[this.entityIdField],o)},this.getSuccessMessage=(e,t)=>Ge.j.get(`users.successMessages.${e}`,this.getNameFromUser(t))||""}componentDidMount(){super.componentDidMount(),this.props.fetchRolesList&&this.props.fetchRolesList(),this.props.fetchAccountOwner(this.entityName),this.props.fetchSupportAccounts(this.entityName,this.props.endpoint),es.fetchCapabilities()}getNameFromUser(e){return`${e.firstName} ${e.lastName}`}isAccountOwner(e){const{customData:{accountOwner:t}}=this.props;return e===t}isSupportAccount(e){const{customData:{supportAccounts:t}}=this.props;return t.indexOf(e)>-1}getFilteredDefaultRowActionConfig(e,t){const i=Object.assign({},t||{}),r=super.getFilteredDefaultRowActionConfig(e,t),n=[],a=Gr.currentUserHelper.get(),s=Gr.currentUserHelper.getOrg(),o=this.isAccountOwner(i.id),l=this.isSupportAccount(i.id);return i.status&&(!function(e,t,i,r){return!(i.typeHelpers.isHeroku||t||r||Oa(e.id))}(i,l,s,o)?n.push(Yn.G5.ACTIVATE,Yn.G5.DEACTIVATE):n.push(i.status.isActive?Yn.G5.ACTIVATE:Yn.G5.DEACTIVATE),Na(i,s)||n.push(Yn.G5.UNLOCK_USER)),function(e,t){return!t&&!Oa(e.id)}(i,o)||n.push(Xn.TEMPLATE1_ACTIONS_NAMES.DELETE),function(e,t,i,r,n){return(!i.samlEnabled||i.samlLockdownEnabled)&&!i.typeHelpers.isHeroku&&!n&&(!r||t.overrides.accountOwner)}(0,a,s,o,l)||n.push(Yn.G5.CHANGE_EMAIL),function(e,t,i,r){return!i.samlEnabled&&!Na(e,i)&&!i.typeHelpers.isHeroku&&!t&&(!r||Oa(e.email))}(i,l,s,o)||n.push(Yn.G5.RESET_PASSWORD),i.mfa||n.push(Yn.G5.DISABLE_TWO_STEP_VERIFICATION),n.map((e=>delete(0,re.withIndex)(r)[e])),r}getCustomTableRowActions(){return{}}getCustomSidebarActionMap(){return{[Xn.ROW_ACTION_CONFIG_TEMPLATE_ACTIONS.DELETE]:this.handleDeleteUser,[Yn.fb.ACTIVATE]:this.handleActivateDeactivateUser,[Yn.fb.DEACTIVATE]:this.handleActivateDeactivateUser,[Yn.fb.RESET_PASSWORD]:this.handleResetPassword,[Yn.fb.CHANGE_EMAIL]:this.handleChangeEmail,[Yn.fb.UNLOCK_USER]:this.handleUnlockUser,[Yn.fb.DISABLE_TWO_STEP_VERIFICATION]:this.handleDisableTwoStepVerification}}getCustomTableActionMap(){return{[Xn.ROW_ACTION_CONFIG_TEMPLATE_ACTIONS.DELETE]:this.handleDeleteUser,[Yn.fb.ACTIVATE]:this.handleActivateDeactivateUser,[Yn.fb.DEACTIVATE]:this.handleActivateDeactivateUser,[Yn.fb.RESET_PASSWORD]:this.handleResetPassword,[Yn.fb.CHANGE_EMAIL]:this.handleChangeEmail,[Yn.fb.UNLOCK_USER]:this.handleUnlockUser,[Yn.fb.DISABLE_TWO_STEP_VERIFICATION]:this.handleDisableTwoStepVerification}}getColumnLabels(){return[{field:"status",headerName:Ge.j.get("users.statusField"),minWidth:52,width:84,undraggable:!0,customCellRenderer:{component:is,props:e=>({status:e.data.status})},cellStyle:{textAlign:"center"},comparator:(e,t)=>(e.isActive?-1:1)+(e.isLocked?3:0)-((t.isActive?-1:1)+(t.isLocked?3:0))},{field:"name",headerName:Ge.j.get("users.nameField"),minWidth:52,width:171,undraggable:!0,comparator:ts},{field:"email",headerName:Ge.j.get("users.emailField"),minWidth:52,width:231,undraggable:!0},{field:"roleNames",headerName:Ge.j.get("users.rolesField"),minWidth:52,width:331,suppressSorting:!0,undraggable:!0},{field:"lastLoginTimestamp",headerName:Ge.j.get("users.lastLoginField"),width:271,undraggable:!0,comparator:(e,t)=>{if(e===Ge.j.get("usersAndRoles.never")&&t===Ge.j.get("usersAndRoles.na"))return 1;if(e===Ge.j.get("usersAndRoles.na")&&t===Ge.j.get("usersAndRoles.never"))return-1;if(e===Ge.j.get("usersAndRoles.never")||e===Ge.j.get("usersAndRoles.na"))return 1;if(t===Ge.j.get("usersAndRoles.never")||t===Ge.j.get("usersAndRoles.na"))return-1;return new Date(e)>new Date(t)?1:-1}},{field:"mfaStatus",headerName:Ge.j.get("users.twoFAField"),width:171,isResizable:!1,undraggable:!0}]}handleActivateDeactivateUser(e,t){const i=t.status.isActive?Yn.Qw.DEACTIVATE:Yn.Qw.ACTIVATE;this.openSharedDialog(Yn.FH.ACTIVATE_DEACTIVATE_DIALOG,{userName:t.name,mode:i},{confirm:()=>{const e=(({firstName:e,lastName:t,status:i,roleIds:r,email:n})=>({firstName:e,lastName:t,isActive:i.isActive,roleIds:r,email:n}))(t);this.props.activateDeactivateUser(this.entityName,this.schema,this.props.endpoint,t[this.entityIdField],Object.assign(Object.assign({},e),{isActive:!e.isActive}),Ge.j.get(`users.successMessages.${i}`,this.getNameFromUser(t)))}})}handleDisableTwoStepVerification(e,t){const i=Yn.Qw.DISABLE_TWO_STEP_VERIFICATION;this.openSharedDialog(Yn.FH.ACTIVATE_DEACTIVATE_DIALOG,{userName:t.name,mode:i},{confirm:e=>{const i=this.props.data.find((e=>e[this.entityIdField]===t[this.entityIdField]));this.props.disableTwoStepVerification(this.entityName,this.schema,this.props.endpoint,t[this.entityIdField],i,e,Ge.j.get("users.successMessages.disableTwoStepVerification",this.getNameFromUser(t)))}})}handleDeleteUser(e,t){const i=Gr.currentUserHelper.hasFeatureFlag("UIUserDeleteDialogV2"),r=i?Yn.FH.USERS_CUSTOM_DELETE_V2_COMPONENT:Yn.FH.USERS_CUSTOM_DELETE_COMPONENT,n=i?{users:this.props.data,targetUser:t,rolesData:this.props.customData.rolesData,accountOwnerId:this.props.customData.accountOwner}:{users:this.props.data,targetUser:t},a=i?{onSubmit:this.handleUserDeleteSubmitV2}:{onSubmit:this.handleUserDeleteSubmit};this.openSharedDialog(r,n,a)}handleResetPassword(e,t){this.openSharedDialog(Yn.FH.USERS_RESET_PASSWORD_DIALOG_COMPONENT,{name:t.name,email:t.email},{confirm:()=>{const{entityName:e,endpoint:i,resetPassword:r}=this.props,n=Ge.j.get("users.resetPasswordDialog.sucessMessage");r(e,i,t.id,n)}})}handleChangeEmail(e,t){const i=Ge.j.get("users.changeEmailDialog.successMessage",t.name);this.openSharedDialog(Yn.FH.USERS_CHANGE_EMAIL_DIALOG_COMPONENT,{name:t.name,email:t.email},{confirm:e=>{const{entityName:r,endpoint:n,changeEmail:a}=this.props;a(r,n,t.id,e,i)}})}handleUnlockUser(e,t){const i=this.props.data.filter((e=>e.id===t.id))[0],{endpoint:r,unlockUser:n}=this.props,{name:a}=t,s=Ge.j.get("users.unlockUserSuccessMessage",a);n(r,i,this.schema,s)}getDialogContentData(e,t){const i=e.id?"existing":"new",r={contextDescription:Ge.j.get(`users.discardDialogEntityDescription.${i}`)};return Object.assign(Object.assign({},super.getDialogContentData(e,t)),{discardDialog:r})}}const ns=e=>Xn.Template1Container.getSchema(e),as=Xn.Template1Container.getActions(),ss=(e,t)=>{const i=(r=t.entityName,Xn.Template1Container.getSelectors(r).selectEntitiesComposition);var r;return Object.assign(Object.assign({},i(e)),Aa(e))};const os=new class{constructor(){this.SUMO_LOGIC_SYSTEM_USER_ID="FFFFFFFFFFFFFD66",this.entityName=Yn.Se.USERS,this.schema=ns(this.entityName)}fetchUsersList(){return(0,Zn.bindActionCreators)({fetchList:Xn.fetchList},Te.store.dispatch).fetchList(this.entityName,this.schema,Yn.rV.USERS,Xn.FETCH_LIMIT_PARAM)}getUserIdEmailMapForUsers(){return ea(Te.store.getState()).reduce(((e,t)=>(e[t.email]=t.id,e)),{})}getUsersList(){return ea(Te.store.getState())}getUserNameById(e){const t=Jn(Te.store.getState());if(e===this.SUMO_LOGIC_SYSTEM_USER_ID)return Ge.j.get("usersAndRoles.sumoLogic");if(!t||!Object.values(t).length)return"";const i=t[e]||void 0;return i?`${i.firstName} ${i.lastName}`:Ge.j.get("usersAndRoles.unknownUser")}};window.usersDataService=os;const ls=e=>{var t,i;function r(e){return ht.userDateService.reformatRFC(e)}const n=Yr(),{closePanel:a,onReset:s,editBudget:o,removeBudget:l,deleteComponent:c,budget:d,collectorData:u,removeCollector:p}=Object.assign({},e),h=u?u.length:0,m=n?Ge.j.get("ingestBudgets.assignedCollectorsV2Header",h):Ge.j.get("ingestBudgets.assignedCollectors"),g=n?Ge.j.get("ingestBudgets.assignedCollectorsInfo",h):Ge.j.get("ingestBudgets.howToAssign"),y=n?"name":"fieldValue",v=n?Hr.Ww.V2:Hr.Ww.V1,f=Xr(d.capacityBytes,v,d.usageBytes),_={isEnabled:!0,actions:{edit:{show:!0,icon:"pencil",onClick:(e,t)=>o(e,t)},delete:{show:!0,icon:"trash",opensModal:!0,ModalComponent:c,modalData:{isLoading:!1},modalMethods:{deleteAction:e=>l(e)}}}};return T.createElement("div",{className:vn().ingestBudgetsDetailView,"data-sumo-test":"ingest-budgets-detail-panel"},T.createElement("div",{className:Wt()(vn().labelHeader)},d.name,T.createElement(qt.IconBar,{size:"large"},T.createElement(qt.IconButton,{icon:"x",onClick:a,buttonProps:{"data-sumo-test":"ingest-budgets-close-details-btn"}}))),T.createElement("div",{className:vn().labelValueGroupTwoColumnSimple},T.createElement(qt.Button,{color:"secondary",size:"small",onClick:s,buttonProps:{"data-sumo-test":"ingest-budgets-details-reset-btn"}},Ge.j.get("ingestBudgets.reset"))),T.createElement("div",{className:vn().labelValueGroupTwoColumn},T.createElement("div",{className:vn().headerBarContainer},T.createElement(qt.HeaderBar,{size:"large"},T.createElement(qt.HeaderBar.Row,null,T.createElement(qt.HeaderBar.Column,null,T.createElement(qt.IconBarCtrl,{rowActionConfig:_,isRowConfig:!1,rowIndex:0,data:d})))))),T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().labelValueGroupOneColumn)},T.createElement("label",null,Ge.j.get(`ingestBudgets.${y}`)),T.createElement("span",null,(null==d?void 0:d[y])||Ge.j.get("ingestBudgets.empty"))),T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().labelValueGroupOneColumn,vn().inlineGroup)},T.createElement("label",null,n?Ge.j.get("ingestBudgets.optionalDescription"):Ge.j.get("ingestBudgets.description")),T.createElement("span",null,d.description||Ge.j.get("ingestBudgets.empty"))),n&&T.createElement("div",{className:vn().fieldsSection},T.createElement(qt.Text,{variant:"textHeavy"},Ge.j.get("ingestBudgets.scope")),T.createElement(qt.Text,{variant:"textSmall",noWrap:!1},Ge.j.get("ingestBudgets.budgetScopeHelpText")),T.createElement(qt.Text,{variant:"code",noWrap:!1,className:Wt()(vn().labelValueGroup,vn().budgetScopeText)},d.scope)),T.createElement("div",{className:vn().fieldsSection},T.createElement(qt.Text,{variant:"textHeavy"},Ge.j.get("ingestBudgets.budgetCapacity")),T.createElement(qt.Text,{variant:"textSmall",noWrap:!1},Ge.j.get("ingestBudgets.capacityHelpText")),T.createElement("div",{className:vn().flex},T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().fieldsSectionItem)},T.createElement("label",null,Ge.j.get("ingestBudgets.allocatedBudget")),T.createElement("span",null,d.capacityBytes?(0,re.bytesToSizedString)(d.capacityBytes,3,!1,!0):Ge.j.get("ingestBudgets.empty"))),T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().fieldsSectionItem)},T.createElement("label",null,Ge.j.get("ingestBudgets.currentPeriodUsage")),n?T.createElement(Qn,Object.assign({},f,{isListView:!1})):T.createElement("span",null,d.usageBytes?f.totalUsage:Ge.j.get("ingestBudgets.empty"))),!n&&T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().fieldsSectionItem)},T.createElement("label",null,Ge.j.get("ingestBudgets.numCollectors")),T.createElement("span",null,d.numberOfCollectors)))),T.createElement("div",{className:vn().fieldsSection},T.createElement(qt.Text,{variant:"textHeavy"},Ge.j.get("ingestBudgets.resetEveryDay")),T.createElement("div",{className:vn().flex},T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().resetTimeField)},T.createElement("label",null,Ge.j.get("ingestBudgets.resetTime")),T.createElement("span",null,d.resetTime||"")),T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().fieldsSectionItem)},T.createElement("label",null,Ge.j.get("ingestBudgets.timeZone")),T.createElement("span",null,d.timezone?(S=d.timezone,"(GMT"+ht.userDateService.getTimeOffsetFromTimeZone(S)+") "+S):"")))),T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().labelValueGroupOneColumn)},T.createElement("label",null,Ge.j.get("ingestBudgets.actionTitle")),T.createElement("span",null,d.action===Hr.LO.THROTTLE?Ge.j.get("ingestBudgets.throttle"):Ge.j.get("ingestBudgets.audit"))),Gr.currentUserHelper.hasFeatureFlag("UICustomAudit")&&T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().labelValueGroupOneColumn,vn().inlineGroup)},T.createElement(qt.Text,{variant:"textHeavy",noWrap:!1},Ge.j.get("ingestBudgets.auditThreshold")),T.createElement(qt.Text,{variant:"textSmall",noWrap:!1},Ge.j.get("ingestBudgets.auditThresholdViewText")),T.createElement("span",{className:vn().budgetAmount,"data-sumo-test":"audit-threshold-value"},d.auditThreshold,"%")),T.createElement("div",{className:Wt()(vn().labelValueGroup,vn().flex)},T.createElement("div",{className:vn().fieldsSectionItem},T.createElement("label",null,Ge.j.get("ingestBudgets.lastModifiedBy")),T.createElement("span",null,n?os.getUserNameById(d.modifiedBy||""):os.getUserNameById((null===(t=null==d?void 0:d.modifiedByUser)||void 0===t?void 0:t.id)||"")),T.createElement("span",null,r(d.modifiedAt||""))),T.createElement("div",{className:vn().fieldsSectionItem},T.createElement("label",null,Ge.j.get("ingestBudgets.createdBy")),T.createElement("span",null,n?os.getUserNameById(d.createdBy||""):os.getUserNameById((null===(i=null==d?void 0:d.createdByUser)||void 0===i?void 0:i.id)||"")),T.createElement("span",null,r(d.createdAt||"")))),(!n||1===d.budgetVersion)&&T.createElement(fn,{headerText:m,infoText:g,data:u||[],isEditMode:!0,removeCollector:p}));var S},cs=e=>{const{crudToast:t,clearToast:i}=e,{type:r,message:n}=t;return"CasualToast"===r?T.createElement(qt.Toast.CasualToast,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"},message:n}):"CriticalToast"===r?T.createElement(qt.Toast.CriticalToast,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"},message:n,onClose:()=>{i()}}):T.createElement("span",null)};var ds=i(52320);(0,ds.tl)("ingestBudgets.container.tsx",["sumoApp.account","sumoApp.currentUser.state"]);class us extends T.Component{constructor(){super(...arguments),this.isIngestBudgetV2Enabled=Yr(),this.state={isFetching:!1,isAddMode:!1,crudToast:{message:"",type:""},isDetailVisible:!1,isAddEditBudgetCardVisible:!1,isAddEditPrimaryButtonEnabled:!1,isDeleteDialogVisible:!1,selectedItemId:"",itemList:[],allBudgets:[],selectedCellIndex:-1,monthlyBudget:-1,monthlyBudgetAsStr:"0",collectors:[],doCollectorFetch:!1},this.maxAllowedBudgets=0,this.openAddBudgetCard=e=>{this.props.isAddEditBudgetCardVisible||(this.props.isDetailVisible&&this.props.setDetailPanelVisible(!1),this.setState({isAddMode:!0}),this.props.clearSelectedIngestBudget(),this.updateEditPrimaryButtonEnabled(!1),this.props.setAddEditCardVisible(e))},this.onAddBudget=e=>{this.props.addBudget(e)},this.menuEditBudget=(e,t)=>{e.preventDefault();const i=t.id||"-1",r=t.budgetVersion||1;this.openEditBudgetCard(i,!0,r)},this.onEditBudget=e=>{if(this.props.selectedBudget){const t=Object.assign(Object.assign({},this.props.selectedBudget),e);this.props.updateBudget(this.props.selectedBudget.id,t)}},this.updateEditPrimaryButtonEnabled=e=>{this.props.setAddEditPrimaryButtonEnabled(e)},this.setDeleteDialogVisibility=e=>{this.setState({isDeleteDialogVisible:e})},this.deleteBudget=(e,t)=>{t&&e&&(this.props.setDetailPanelVisible(!1),this.props.setAddEditCardVisible(!1),this.props.deleteBudget(t),this.setState({selectedCellIndex:-1}),this.tableMethods.clearFocusedCell(),this.props.clearSelectedIngestBudget()),this.setDeleteDialogVisibility(!1)},this.rowSelected=e=>{this.tableMethods.getFocusedCell().rowIndex!==this.state.selectedCellIndex?this.setState({selectedCellIndex:this.tableMethods.getFocusedCell().rowIndex}):this.setState({selectedCellIndex:-1}),this.tableMethods.clearFocusedCell(),this.props.isAddEditBudgetCardVisible||(this.props.setDetailPanelVisible(this.props.selectedItemId!==e.id||!this.props.isDetailVisible),this.props.setSelectedIngestBudget(e.id)),this.isIngestBudgetV2Enabled&&1!==e.budgetVersion||this.props.fetchCollectors(e.id?e.id:"0")},this.tableInit=e=>{this.tableMethods=e}}setIngestAmount({dailyBasicIngestMegabytes:e=0,dailyEnhancedIngestMegabytes:t=0}){const i=1024*(e+t)*1024,r=(0,re.bytesToSizedString)(i,1,!1,!0);this.setState({monthlyBudget:i,monthlyBudgetAsStr:r})}componentDidMount(){this.maxAllowedBudgets=parseInt(Gr.currentUserHelper.getDynamicProperty("cocoa_budget_number_limit")),this.props.fetchBudgets(this.maxAllowedBudgets);const e=te.o.getAccountModel();e.loadData().then((()=>{this.setIngestAmount(e.getSubscriptionDetails())})).catch((()=>this.setState({monthlyBudget:-1})))}componentDidUpdate(){this.state.selectedCellIndex>=0&&this.tableMethods.selectNodeByIndex(this.state.selectedCellIndex)}componentWillUnmount(){this.props.setAddEditCardVisible(!1)}openEditBudgetCard(e,t,i){this.props.isAddEditBudgetCardVisible||(this.isIngestBudgetV2Enabled&&1!==i||this.props.fetchCollectors(e),this.props.isDetailVisible&&this.props.setDetailPanelVisible(!1),this.tableMethods.clearFocusedCell(),this.props.setSelectedIngestBudget(e),this.updateEditPrimaryButtonEnabled(!1),this.props.setAddEditCardVisible(t))}onReset(){this.props.selectedBudget&&this.props.resetBudget(this.props.selectedBudget.id||"",this.maxAllowedBudgets)}closePanel(){this.props.setDetailPanelVisible(!1),this.setState({selectedCellIndex:-1})}removeCollector(e){this.props.removeCollectorAction(this.props.selectedItemId,e,this.maxAllowedBudgets)}getTotalAllocated(){let e=0;return this.props.allBudgets.length&&this.props.allBudgets[0]&&this.props.allBudgets.forEach((t=>{e+=t&&t.capacityBytes?t.capacityBytes:0})),e}getAllocatedAsPctOfBudget(){let e=0;if(this.state.monthlyBudget<0)return e;const t=this.getTotalAllocated(),i=this.state.monthlyBudget;return e=i?t/i*100:0,e}isOverAllocated(){return this.getAllocatedAsPctOfBudget()>100}getTotalAllocatedString(){const e=this.getTotalAllocated(),t=(0,re.bytesToSizedString)(e,e>1e3?0:1,!1,!0),i=this.getAllocatedAsPctOfBudget(),r=i<.1?"< 0.1%":`${i.toFixed(2)}%`,n=this.state.monthlyBudgetAsStr;return Ge.j.get("ingestBudgets.allocatedDetails",t,r,n)}renderToast(e){return e.type?T.createElement(cs,{crudToast:e,clearToast:this.props.clearToast}):null}render(){const{isDetailVisible:e,selectedBudget:t,isAddEditPrimaryButtonEnabled:i,isAddEditBudgetCardVisible:r,selectedItemId:n,crudToast:a,transformedBudgets:s=[]}=this.props,o=e?{}:{display:"none"},l=r?{}:{display:"none"},c=s.length<=this.maxAllowedBudgets&&!r,d=this.isOverAllocated()?Ln().overAllocatedText:"";return T.createElement("div",{className:Ln().page},this.renderToast(a),T.createElement(qt.Card,{className:Ln().listCard},T.createElement(qt.Card.Content,{className:Ln().cardContent},T.createElement(Kn,{editEnabled:!r,addEnabled:c,openAddEditBudgetCard:this.openAddBudgetCard,editBudget:this.menuEditBudget,deleteBudget:this.deleteBudget,budgets:s,tableInit:this.tableInit,rowSelected:this.rowSelected}),T.createElement(qt.FooterSummary,{title:Ge.j.get("ingestBudgets.allocatedBudget"),TitleTextProps:{"data-sumo-test":"ingest-budgets-footer-title"},noUsageMessage:Ge.j.get("ingestBudgets.footerNoUsageMessage"),MessageTextProps:{"data-sumo-test":"ingest-budgets-footer-message"},usedCapacity:this.state.monthlyBudget,totalCapacity:this.getTotalAllocated(),children:()=>T.createElement("div",{className:d,"data-sumo-test":"ingest-budgets-footer-message"},this.getTotalAllocatedString())}))),e&&T.createElement(qt.Card,{className:Ln().sidebarCard,style:o},T.createElement(qt.Card.Content,null,t&&T.createElement(ls,{closePanel:()=>{this.closePanel()},editBudget:()=>{this.openEditBudgetCard(n,!0,t.budgetVersion||1)},removeBudget:()=>{this.deleteBudget(!0,t)},deleteComponent:Pn,onReset:()=>{this.onReset()},collectorData:this.props.collectors,removeCollector:e=>{this.removeCollector(e)},budget:t}))),r&&T.createElement(qt.Card,{className:Ln().sidebarCard,style:l},T.createElement(qt.Card.Content,null,T.createElement(Mn,{budget:t,isAddMode:this.state.isAddMode,isAddEditPrimaryButtonEnabled:i,updateEditPrimaryButtonEnabled:this.updateEditPrimaryButtonEnabled,addBudget:this.onAddBudget,editBudget:this.onEditBudget,collectorData:this.props.collectors,removeCollector:e=>{this.removeCollector(e)},close:()=>{this.closeAddEditCard()}}))))}closeAddEditCard(){this.props.setAddEditCardVisible(!1),this.updateEditPrimaryButtonEnabled(!1),this.setState({selectedCellIndex:-1}),this.setState({isAddMode:!1})}}const ps={fetchBudgets:an,addBudget:function(e){return e=tn(e),t=>{(0,D.legacyHttpPost)(en(),e).then((e=>{const i=[e],r=Qr(Object.values(i));var n;t((0,Wr.xT)(r)),t((n=e.id,{type:Hr.sk.INGEST_BUDGETS_ADD_SUCCESS,payload:{id:n}}));const a={message:Ge.j.get("ingestBudgets.resultAddSuccess"),type:"CasualToast"};t(rn(a)),setTimeout((()=>{t(nn())}),Jr)})).catch((e=>{var i;t((i={error:e},{type:Hr.sk.INGEST_BUDGETS_ADD_FAILURE,payload:i}));const r=function(e,t){const i=Ge.j.get(e);if(t.response.data.errors){const e="ingestBudgets."+t.response.data.errors[0].code.split(":")[1],i=Ge.j.get(e);if(i)return i}return i}("ingestBudgets.resultAddFailure",e);t(rn({message:r,type:"CriticalToast"}))}))}},updateBudget:function(e,t){const i=tn(t);return(t,r)=>{(0,D.legacyHttpPut)(`${en()}/${e}`,i).then((i=>{var n;t((n={itemList:i.id,token:void 0},{type:Hr.sk.INGEST_BUDGETS_UPDATE_SUCCESS,payload:{updatedBudgetId:n}}));const a=r().entities.ingestBudgets,s=Object.assign(Object.assign({},a),{[e]:i}),o=Qr(Object.values(s));t((0,Wr.xT)(o));const l={message:Ge.j.get("ingestBudgets.resultUpdateSuccess"),type:"CasualToast"};t(rn(l)),setTimeout((()=>{t(nn())}),Jr)})).catch((e=>{var i;t((i={error:e},{type:Hr.sk.INGEST_BUDGETS_UPDATE_FAILURE,payload:i}));const r={message:Ge.j.get("ingestBudgets.resultUpdateFailure"),type:"CriticalToast"};t(rn(r))}))}},setSelectedIngestBudget:function(e){return{type:Hr.sk.INGEST_BUDGETS_SET_SELECTED,payload:{budgetId:e}}},clearSelectedIngestBudget:function(){return{type:Hr.sk.INGEST_BUDGETS_CLEAR_SELECTED,payload:{}}},resetBudget:function(e,t){return i=>{(0,D.legacyHttpPost)(`${en()}/${e}/usage/reset`,void 0).then((()=>{const e={message:Ge.j.get("ingestBudgets.resetSuccess"),type:"CasualToast"};i(rn(e)),setTimeout((()=>{i(nn()),i(an(t))}),Jr)})).catch((()=>{const e={message:Ge.j.get("ingestBudgets.resetFailure"),type:"CriticalToast"};i(rn(e))}))}},setDetailPanelVisible:function(e){return{type:Hr.sk.INGEST_BUDGETS_SET_DETAIL_VISIBLE,payload:{isVisible:e}}},setAddEditCardVisible:function(e){return t=>{t({type:Hr.sk.INGEST_BUDGETS_SET_DETAIL_DIALOG_VISIBLE,payload:{isAddEditBudgetCardVisible:e}})}},setAddEditPrimaryButtonEnabled:function(e){return t=>{t({type:Hr.sk.INGEST_BUDGETS_SET_ADD_EDIT_PRIMARY_BUTTON_ENABLED,payload:{isAddEditPrimaryButtonEnabled:e}})}},deleteBudget:function(e){return t=>{(0,D.legacyHttpDelete)(`${en()}/${e.id}`,e).then((i=>{var r;t((r={itemList:i.config.id,token:void 0},{type:Hr.sk.INGEST_BUDGETS_DELETE_SUCCESS,payload:{newBudgetId:r}})),t((0,Wr.rU)({entities:{ingestBudgets:[e.id]}}));const n={message:Ge.j.get("ingestBudgets.resultDeleteSuccess"),type:"CasualToast"};t(rn(n)),setTimeout((()=>{t(nn())}),Jr)})).catch((e=>{var i;t((i={error:e},{type:Hr.sk.INGEST_BUDGETS_DELETE_FAILURE,payload:i}));const r={message:Ge.j.get("ingestBudgets.resultDeleteFailure"),type:"CriticalToast"};t(rn(r))}))}},clearToast:nn,fetchCollectors:ln,removeCollectorAction:function(e,t,i){return r=>{(0,D.legacyHttpDelete)(`/api/v1/ingestBudgets/${e}/collectors/${t}`).then((()=>{const t={message:Ge.j.get("ingestBudgets.collectorRemovedSuccess"),type:"CasualToast"};r(rn(t)),r(ln(e)),setTimeout((()=>{r(nn()),r(an(i))}),Jr)})).catch((()=>{const e={message:Ge.j.get("ingestBudgets.collectorRemovedFailure"),type:"CriticalToast"};r(rn(e))}))}}},hs=(0,Te.legacyConnect)((e=>Object.assign(Object.assign({},e.views.ingestBudgets),{allBudgets:pn(e),transformedBudgets:hn(e),selectedBudget:dn(e)})),ps)(us);s.module("sumoApp.ingestBudgets.containers",[]).component("ingestBudgetsPage",(0,re.legacyReactToAngular)(hs));s.module("sumoApp.ingestBudgets.workspace",["sumoApp.ingestBudgets.containers"]).component("ingestBudgetsRoot",$r);var ms=i(94168),gs=i.n(ms);class ys extends T.PureComponent{renderFieldsSummaryFooter(e,t){return e===qt.FooterSummaryState.NO_USAGE?this.renderFieldsSummaryNoUsageMessage():this.renderFieldsSummaryUsageMessage(e,t)}renderFieldsSummaryNoUsageMessage(){return T.createElement(qt.Text,{"data-sumo-test":"footer-summary-message"},Ge.j.get("fields.quotaNoUsageMessage"))}renderFieldsSummaryUsageMessage(e,t){const i=void 0!==this.props.fieldsUsed?this.props.fieldsUsed:0,r=void 0!==this.props.fieldsQuota?this.props.fieldsQuota:1,n=100*i/r;return T.createElement("div",{className:gs().fieldsSummaryItems},T.createElement(qt.Text,{className:Wt()(gs().fieldsSummaryItem,t.className),"data-sumo-test":"footer-summary-message"},Ge.j.getSafeString("fields.quotaUsageMessage",i,parseFloat(n.toFixed(2)),r)))}render(){return T.createElement(qt.FooterSummary,{title:Ge.j.get("fields.quotaTitle"),loadingMessage:Ge.j.get("fields.quotaLoadingMessage"),usedCapacity:this.props.fieldsUsed,totalCapacity:this.props.fieldsQuota,children:(e,t)=>this.renderFieldsSummaryFooter(e,t)})}}var vs=i(60072),fs=i(3618);const _s=e=>e.views.fields,Ss=e=>e.megaEntities.fields,bs=(0,cn.createSelector)([_s],(e=>e.fieldsExtractionRules||{error:void 0})),Es=(0,cn.createSelector)([_s],(e=>e.partitions||{data:void 0,error:void 0})),Ts=(0,cn.createSelector)([_s,Ss],(({deleteField:{fieldId:e}={}},t)=>t&&e?t[e]:void 0)),xs=(0,cn.createSelector)([vs.getReservedFieldsData],(({fields:e})=>({reservedFieldNames:new Set(e.map((e=>e.toLowerCase())))}))),Cs=(0,cn.createSelector)([_s],(e=>e.quota)),As=(0,cn.createSelector)([_s],(({fieldType:e})=>({fieldType:e||f.FieldType.ExistingCustom}))),ws=(0,cn.createSelector)([As,_s,Ts,xs,Cs],(({fieldType:e},{createField:{dropped:t,createdField:i}={},enableField:{fieldName:r="",enable:n=!1,success:a=!1,error:s}={},deleteField:{deletedFieldId:o}={},sidebarData:{feedbackButtonState:l=Xn.FeedbackStateType.DEFAULT}={}},c,{reservedFieldNames:d},u)=>({fieldType:e,createInProgressDroppedFieldName:t&&l===Xn.FeedbackStateType.PROCESSING?t.fieldName:void 0,createdField:i,deletedFieldId:o,enableInProgressFieldName:a||s?void 0:r,enableFieldName:r,enableFieldSuccess:n&&a,enableFieldError:s,disableFieldSuccess:!n&&a,fieldToDelete:c,reservedFieldNames:d,isQuotaExceeded:u&&void 0!==u.fieldsUsed&&u.fieldsUsed===u.fieldsQuota}))),Is=(0,cn.createSelector)([xs],(({reservedFieldNames:e})=>({reservedFields:e}))),Rs=(0,cn.createSelector)([_s,Ss],(({selectedId:e},t)=>void 0!==e&&t?t[e]:void 0)),Ds=(0,cn.createSelector)([bs,e=>e.megaEntities.fieldsExtractionRules],(({error:e},t)=>({data:(0,fs.Z)(t,(e=>e.id)),error:e}))),Os=(0,cn.createSelector)([Es],(({data:e,error:t})=>({data:(0,fs.Z)(e,(e=>e.id)),error:t})));function Ns(e,t,i,r=!1){const n=[];return e&&e[t]&&i&&e[t].forEach((e=>{let a=r?parseInt(e,16):e;a="fieldExtractionRules"===t?a+"-Ingest":a,i[a]&&n.push(i[a])})),n}const Ms=(0,cn.createSelector)([As,_s,Rs,xs,Ds,Os,e=>(0,re.withIndex)(e.megaEntities)[Yn.Se.ROLES]],(({fieldType:e},{collectors:{data:t,error:i}={},sources:{data:r,error:n}={}},a,{reservedFieldNames:s},{data:o,error:l},{data:c,error:d},u)=>({fieldType:e,fers:{data:Ns(a,"fieldExtractionRules",o),error:l},partitions:{data:Ns(a,"partitions",c,!0),error:d},collectors:{data:t,error:i},sources:{data:r,error:n},roles:Ns(a,"roles",u),reservedFieldNames:s}))),ks=(0,cn.createSelector)([_s,Ts],(({dialogData:e},t)=>({data:t,isOpen:void 0!==t,inProgress:e.feedbackButtonState===Xn.FEEDBACK_BUTTON_STATE.PROCESSING,dialogData:e}))),Ls=(0,Te.legacyConnect)(Cs,{})(ys),Ps=()=>{const e=(0,En.useSelector)((e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.views)||void 0===t?void 0:t.fieldsExtractionRules)||void 0===i?void 0:i.usageQuota)||{}})),t=(t,i)=>t===qt.FooterSummaryState.NO_USAGE?x().createElement(qt.Text,{"data-sumo-test":"footer-summary-message"},Ge.j.get("fieldsExtractionRules.quotaNoUsageMessage")):((t,i)=>{const r=(null==e?void 0:e.used)?e.used:0,n=(null==e?void 0:e.total)?e.total:1,a=100*r/n;return x().createElement(qt.Text,{className:i.className,"data-sumo-test":"footer-summary-message"},Ge.j.getSafeString("fieldsExtractionRules.quotaUsageMessage",r,parseFloat(a.toFixed(2)),n))})(0,i);return x().createElement(qt.FooterSummary,{title:Ge.j.get("fieldsExtractionRules.quotaTitle"),loadingMessage:Ge.j.get("fieldsExtractionRules.quotaLoadingMessage"),usedCapacity:e.used,totalCapacity:e.total,children:(e,i)=>t(e,i)})};var Fs=i(17052),Us=i(22336),Vs=i.n(Us),Bs=i(18692),$s=i(44801),Hs=i(30987),Ws=i.n(Hs);const qs=({value:e,data:t})=>T.createElement("div",{className:Ws().nameContainer},T.createElement("div",{className:Ws().nameField},e),((0,Bs.D6)(t)||t.isSystemRule)&&T.createElement("div",{className:Ws().lockIcon},T.createElement(qt.Icon,{name:qt.IconName.Lock,size:"large",color:"dolphin"})));var js=i(87430);class Qs extends Xn.Template1Container{constructor(){super(...arguments),this.SUPPORT_LINK_FIELDS="https://help.sumologic.com/?cid=5154",this.loadRules=()=>{this.props.resetRules(),this.props.fetchList(this.entityName,this.schema,this.props.endpoint,Xn.FETCH_LIMIT_PARAM)},this.transformToFeatureData=(e,t={})=>((e,t)=>e.map((e=>Object.assign(Object.assign({},e),{typeText:e.appliedAt===f.FieldsExtractionRuleType.Ingest?Ge.j.get("fieldsExtractionRules.ingestText"):Ge.j.get("fieldsExtractionRules.dynamicText"),created:e.createdBy===f.SYSTEM_USER.ID?`By ${f.SYSTEM_USER.NAME}`:(0,Fs.Gb)(e.createdAt,(0,re.get)(t,[e.createdBy]),ht.userDateService.prettifyDateTime),modified:e.modifiedBy===f.SYSTEM_USER.ID?`By ${f.SYSTEM_USER.NAME}`:(0,Fs.Gb)(e.modifiedAt,(0,re.get)(t,[e.modifiedBy]),ht.userDateService.prettifyDateTime)}))))(e,this.props.users).map((e=>{const i={rowActionDetailConfig:this.getTableRowActionConfig(t,e)};return Object.assign(Object.assign({},e),i)})),this.getAllowedActionNames=e=>{const t=(0,Bs.D6)(e)||e.isSystemRule?[]:[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT,Xn.TEMPLATE1_ACTIONS_NAMES.DELETE];return e.enabled?t.push(f.ACTIONS_NAMES.DISABLE):t.push(f.ACTIONS_NAMES.ENABLE),t},this.onErrorClose=e=>{const t=this.getErrorMessage(Xn.ERROR_MESSAGE_COMPONENTS.Sidebar).filter((t=>(0,js.Z)(t)!==e.text));this.props.modifySidebarData(this.props.entityName,{sidebarData:{errorMessages:t}})},this.getSuccessMessage=(e,t)=>e===f.BulkRemoveActions.BULK_REMOVE?Ge.j.getSafeString(`fieldsExtractionRules.successMessages.${e}`,t.countRemoved)||"":Ge.j.getSafeString(`fieldsExtractionRules.successMessages.${e}`,t.name)||""}componentDidMount(){super.componentDidMount(),Gr.currentUserHelper.hasPrivilege("FieldsViewAccess")&&this.props.loadFields(),this.props.loadQuota(),this.props.loadFerQuota(),this.props.fetchUsersList()}componentDidUpdate(e){(!e.isSelectedTab&&this.props.isSelectedTab||e.createdIngestRule!==this.props.createdIngestRule||e.editedIngestRule!==this.props.editedIngestRule)&&(Gr.currentUserHelper.hasPrivilege("FieldsViewAccess")&&this.props.loadFields(),this.props.loadQuota()),!e.isSelectedTab&&this.props.isSelectedTab&&this.loadRules(),!e.enableRuleState.success&&this.props.enableRuleState.success&&(0,R.showCasualNotification)({message:this.getSuccessMessage(this.props.enableRuleState.enable?f.EnableActions.ENABLE:f.EnableActions.DISABLE,this.props.enableRuleState),variant:"success"});const t=this.props.enableRuleState.error;e.enableRuleState.error!==t&&this.props.modifySidebarData(this.props.entityName,{sidebarData:{errorMessages:t?[t]:void 0}}),!e.bulkRemoveState.success&&this.props.bulkRemoveState.success&&(0,R.showCasualNotification)({message:this.getSuccessMessage(f.BulkRemoveActions.BULK_REMOVE,this.props.bulkRemoveState),variant:"success"})}getTransformedFeatureData(){const e=[...super.getTransformedFeatureData()];return e.sort(Fs.Ft),e}getColumnLabels(){return(e=>{const t=[];return t.push("fieldNames","parentDataStreams"),e.filter((e=>!t.includes(e.field)))})([{field:"enabled",headerName:Ge.j.get("fieldsExtractionRules.tableColumnStatus"),cellClass:Vs().statusCell,customCellRenderer:{component:$s.a,props:()=>({enabled:{hint:Ge.j.get("fieldsExtractionRules.enabled")},disabled:{hint:Ge.j.get("fieldsExtractionRules.disabled")},tableMode:!0})},suppressSizeToFit:!0,width:74},{field:"name",headerName:Ge.j.get("fieldsExtractionRules.tableColumnRuleName"),cellClass:Vs().nameCells,customCellRenderer:{component:qs},comparator:Fs.IB},{field:"typeText",headerName:Ge.j.get("fieldsExtractionRules.tableColumnType"),infoText:T.createElement("div",{dangerouslySetInnerHTML:{__html:Ge.j.getSafeString("fieldsExtractionRules.ruleTypeDescription")}}),width:106},{field:"scope",cellClass:Vs().scopeCell,headerName:Ge.j.get("fieldsExtractionRules.tableColumnScope"),valueGetter:({data:e})=>(0,Fs.GS)(e),comparator:Fs.IB},{field:"fieldNames",headerName:Ge.j.get("fieldsExtractionRules.tableColumnFields"),valueGetter:({data:e})=>e.fieldNames?e.fieldNames.length:0,cellClass:Vs().centerCell,maxWidth:90},{field:"parentDataStreams",headerName:Ge.j.get("fieldsExtractionRules.tableColumnDataStreams"),valueGetter:({data:e})=>e.parentDataStreams?e.parentDataStreams.length:0,cellClass:Vs().centerCell,maxWidth:130},{field:"created",headerName:Ge.j.get("fieldsExtractionRules.tableColumnCreated")},{field:"modified",headerName:Ge.j.get("fieldsExtractionRules.tableColumnModified")}])}getStateOverlaysTexts(){const e=super.getStateOverlaysTexts(),t=this.hasManagePrivilege?Ge.j.get("fieldsExtractionRules.zeroStateOverlayDescription"):Ge.j.get("fieldsExtractionRules.zeroStateOverlayNoPermission");return Object.assign(Object.assign({},e),{zeroState:Object.assign(Object.assign({},e.zeroState),{description:t})})}getFilteredDefaultRowActionConfig(e,t){if(!this.hasManagePrivilege)return{};if(!t)return super.getFilteredDefaultRowActionConfig(e,t);const i=Object.assign(Object.assign({},super.getFilteredDefaultRowActionConfig(e,t)),e),r=this.getAllowedActionNames(t);return Object.entries(i).reduce(((e,[t,i])=>(r.includes(t)&&(e[t]=i),e)),{})}getCustomSidebarActionMap(){return{[f.CUSTOM_ACTIONS.ENABLE]:this.enableRule,[f.CUSTOM_ACTIONS.DISABLE]:this.disableRule}}getCustomTableActionMap(){return{[f.CUSTOM_ACTIONS.ENABLE]:this.enableRule,[f.CUSTOM_ACTIONS.DISABLE]:this.disableRule}}getCustomGridOptions(){return{getRowClass:({data:e})=>{if((0,Bs.D6)(e)||e.isSystemRule)return Vs().defaultWhitelistingRule}}}getTableComponent(){const e=super.getTableComponent(),t=Gr.currentUserHelper.hasFeatureFlag("UISearchFERQuota");return T.createElement("div",{className:Vs().list},T.createElement(e.type,Object.assign({},e.props)),!t&&Gr.currentUserHelper.hasPrivilege("FieldsViewAccess")&&T.createElement(Ls,null),t&&Gr.currentUserHelper.hasPrivilege("NewFERViewAccess")&&T.createElement(Ps,null))}getDialogContentData(e,t){let i=T.createElement(qt.Text,{noWrap:!1,className:Vs().discardDescription},Ge.j.get("fieldsExtractionRules.addDiscardDialogWarning"));if(e[this.entityIdField]){const t=this.props.data.find((t=>t[this.entityIdField]===e[this.entityIdField]));i=T.createElement(qt.Text,{noWrap:!1,className:Vs().discardDescription},Ge.j.get("fieldsExtractionRules.editDiscardDialogWarning"),T.createElement("strong",null,t.name),".")}return((e,t,i,r)=>{const n=T.createElement(T.Fragment,null,Ge.j.get("fieldsExtractionRules.deleteFieldsWarning"),T.createElement("button",{type:"button",className:Vs().learnMoreButton,onClick:()=>{const e=window.open(r);e?e.focus():(0,g.showCriticalNotification)(Ge.j.get("fieldsExtractionRules.errorMessageOpeningSupport"))}},Ge.j.get("fieldsExtractionRules.learnMore")));return Object.assign(Object.assign({},e),{discardDialog:Object.assign(Object.assign({},e.discardDialog),{contextDescription:i}),defaultDelete:Object.assign(Object.assign({},e.defaultDelete),{contextDescription:T.createElement(T.Fragment,null,n,T.createElement("br",null),T.createElement("br",null),Ge.j.get("template1.deleteText"),T.createElement("strong",null,t.name),"?")})})})(super.getDialogContentData(e,t),t,i,this.SUPPORT_LINK_FIELDS)}getSidebarComponentProps(){var e;const t=super.getSidebarComponentProps();let i={};return this.props.sidebarData.selectedData[this.entityIdField]&&(i=this.transformToFeatureData([this.props.sidebarData.selectedData])[0]),t.sidePanelData.customData={onDrilldownSearch:e=>this.props.applicationViewShimService.onDrilldownSearch(void 0,e),initialEntityData:i,isDefaultRuleEnabled:Boolean(null===(e=this.props.defaultJSONParsingRule)||void 0===e?void 0:e.enabled)},t}getSidebarFormData(){const e=super.getSidebarFormData(),t=(0,Bs.lI)(e.appliedAt)?f.FieldsExtractionRuleType.Ingest:f.FieldsExtractionRuleType.Dynamic;return this.props.setType({appliedAt:t}),((e,t)=>{e=Object.assign(Object.assign({},e),{name:e.name.trim()});const{scopeType:i,basicMode:r,metadataKey:n,metadataValue:a}=e,s=(0,Bs.lI)(e.appliedAt)?f.FieldsExtractionRuleType.Ingest:f.FieldsExtractionRuleType.Dynamic,o=e.parseExpression?(0,f.getParseExpressionParts)(e.parseExpression):[];return e.parseExpression=o[0]+t,(0,Bs.lI)(s)&&(0,Bs.fV)(i)?e.scope="*":r&&(e.scope=n?`${n}=${a}`:null!=a?a:""),s===f.FieldsExtractionRuleType.Ingest?(0,S.Z)(e,[...f.INGEST_TIME_PARAMS,"appliedAt"]):(0,S.Z)(e,[...f.SEARCH_TIME_PARAMS,"appliedAt"])})(e,this.props.parseExpressionFilter)}getLocalisedErrorMessage(e,t,i){return i.map((i=>{if("string"==typeof i)return i;const r=(0,re.get)(i,["meta","reason"])||(0,re.get)(i,["message"]);return r?Ge.j.getSafeString(e,r):Ge.j.get(t)}))}getErrorMessage(e){if(e!==Xn.ERROR_MESSAGE_COMPONENTS.Sidebar)return super.getErrorMessage(e);const{sidebarData:{errorMessages:t=[]}}=this.props;return this.getLocalisedErrorMessage("fieldsExtractionRules.errorMessages.sidebar","fieldsExtractionRules.errorMessages.sidebarGeneric",t)}renderSidebarErrorMessages(){const e=this.getErrorMessage(Xn.ERROR_MESSAGE_COMPONENTS.Sidebar);return(0,R.getInlineNotificationElements)((0,Xn.getInlineErrorProps)(e.map(js.Z),this.onErrorClose))}onTableRowActionEdit(e,t){this.props.setType({appliedAt:t.appliedAt}),super.onTableRowActionEdit(e,t)}onTableRowActionDelete(e,t){this.props.setType({appliedAt:t.appliedAt}),super.onTableRowActionDelete(e,t)}enableRule(e,t){const i={ruleId:t.id.split("-")[0],enabled:!0,appliedAt:t.appliedAt,name:t.name,parseExpression:t.parseExpression,scope:t.scope};this.props.enableRule(i)}disableRule(e,t){const i={ruleId:t.id.split("-")[0],enabled:!1,appliedAt:t.appliedAt,name:t.name,parseExpression:t.parseExpression,scope:t.scope};this.props.enableRule(i)}}var zs=i(54961),Gs=i.n(zs);const{SearchQueryDataModule:Ks}=i(34074);const Ys=({children:e})=>x().createElement("div",{className:Gs().field},e),Zs=({children:e,flexStyle:t})=>x().createElement("div",{className:Wt()(t?Gs().rowFlex:void 0,Gs().marginBottom)},e),Xs=({children:e,className:t="",variant:i="label"})=>x().createElement(qt.Text,{variant:i,className:Wt()(Gs().label,t)},e),Js=({onSearchClick:e})=>x().createElement(qt.Tooltip,{placement:"top",title:Ge.j.get("fieldsExtractionRules.openInSearchHint")},x().createElement(qt.Icon,{name:"open-in-search",className:Gs().searchIcon,onClick:e,enableThemedStyles:!0})),eo=({rule:e,className:t,variant:i})=>x().createElement(Ys,null,x().createElement(Xs,{className:t,variant:i},Ge.j.get("fieldsExtractionRules.formLabelStatus")),x().createElement("div",{className:Gs().rowIconLeft,"data-sumo-test":"fer-status-field"},x().createElement($s.a,{value:e.enabled}),x().createElement(qt.Text,{variant:"text"},e.enabled?Ge.j.get("fieldsExtractionRules.enabled"):Ge.j.get("fieldsExtractionRules.disabled")))),to=({rule:e,className:t,variant:i})=>x().createElement(Ys,null,x().createElement(Xs,{className:t,variant:i},Ge.j.get("fieldsExtractionRules.formLabelType")),x().createElement("div",{className:Gs().rowIconRight},x().createElement(qt.Text,{variant:"text"},e.appliedAt===f.FieldsExtractionRuleType.Ingest?Ge.j.get("fieldsExtractionRules.ingestText"):Ge.j.get("fieldsExtractionRules.dynamicText")),x().createElement(qt.Tooltip,{placement:"top",multiline:!0,title:e.appliedAt===f.FieldsExtractionRuleType.Ingest?Ge.j.get("fieldsExtractionRules.ingestHint"):Ge.j.get("fieldsExtractionRules.dynamicHint")},x().createElement(qt.Icon,{name:"question-circle",enableThemedStyles:!0})))),io=({rule:e,onSearchClick:t,className:i,variant:r})=>{let n=e.scope;return"*"===e.scope.trim()&&(n=e.appliedAt===f.FieldsExtractionRuleType.Dynamic?Ge.j.get("fieldsExtractionRules.allJsonLogs"):Ge.j.get("fieldsExtractionRules.allData")),x().createElement(Ys,null,x().createElement("div",{className:Gs().rowIconRight},x().createElement(Xs,{className:i,variant:r},Ge.j.get("fieldsExtractionRules.formLabelScope")),t&&x().createElement(Js,{onSearchClick:()=>t(e.scope)})),x().createElement(qt.Text,{variant:"text",align:"left",noWrap:!1,className:Gs().scopeField},n))},ro=({rule:e,onSearchClick:t})=>x().createElement(Ys,null,x().createElement("div",{className:Gs().rowIconRight},x().createElement(Xs,null,Ge.j.get("fieldsExtractionRules.formLabelParseExpression")),x().createElement(Js,{onSearchClick:()=>t(`${e.scope} | ${e.parseExpression}`)})),x().createElement(qt.CodeEditor,{language:"sumoql",value:e.parseExpression,height:150,readOnly:!0,options:{lineNumbers:!1},className:Gs().parseExpressionEditor})),no=({rule:e,onSearchClick:t})=>{const i=e.fieldNames||[];return x().createElement(Ys,null,x().createElement("div",{className:Gs().rowIconRight},x().createElement(Xs,null,Ge.j.getSafeString("fieldsExtractionRules.formExtractedFields",i.length)),i.length>0&&x().createElement(Js,{onSearchClick:()=>t(`${e.scope} | ${e.parseExpression}`)})),i.length>0?x().createElement("ul",{className:Gs().fieldsList},i.map((e=>x().createElement("li",{key:`fer-field-${e}`},x().createElement(qt.Text,{className:Gs().fields,variant:"text"},e))))):x().createElement(qt.Text,{variant:"text"},Ge.j.get("fieldsExtractionRules.formNoFields")))},ao=({rule:e,className:t,variant:i})=>x().createElement(Ys,null,x().createElement(Xs,{className:t,variant:i},Ge.j.get("fieldsExtractionRules.formLabelCreatedBy")),x().createElement(qt.Text,{variant:"text"},e.createdBy===f.SYSTEM_USER.ID?f.SYSTEM_USER.NAME:os.getUserNameById(e.createdBy)),e.createdBy!==f.SYSTEM_USER.ID&&x().createElement(qt.Text,{variant:"text"},ht.userDateService.prettifyDateTime(e.createdAt))),so=({rule:e,className:t,variant:i})=>x().createElement(Ys,null,x().createElement(Xs,{className:t,variant:i},Ge.j.get("fieldsExtractionRules.formLabelModifiedBy")),x().createElement(qt.Text,{variant:"text"},e.modifiedBy===f.SYSTEM_USER.ID?f.SYSTEM_USER.NAME:os.getUserNameById(e.modifiedBy)),e.modifiedBy!==f.SYSTEM_USER.ID&&x().createElement(qt.Text,{variant:"text"},ht.userDateService.prettifyDateTime(e.modifiedAt))),oo=({rule:e,onSearchClick:t})=>x().createElement("div",null,x().createElement(Zs,{flexStyle:!0},x().createElement(eo,{rule:e}),x().createElement(to,{rule:e})),x().createElement(Zs,null,x().createElement(io,{rule:e,onSearchClick:t})),x().createElement(Zs,null,x().createElement(ro,{rule:e,onSearchClick:t})),x().createElement(Zs,null,x().createElement(no,{rule:e,onSearchClick:t})),x().createElement(Zs,{flexStyle:!0},x().createElement(ao,{variant:"label",rule:e}),x().createElement(so,{variant:"label",rule:e}))),lo=({rule:e,onSearchClick:t})=>x().createElement("div",null,(0,Bs.D6)(e)&&x().createElement(Zs,null,x().createElement(qt.InlineNotification,{text:Ge.j.get("fieldsExtractionRules.defaultJsonParsingRuleInfoMsg"),status:"default",multiline:!0})),(0,Bs.PW)(e)&&x().createElement(Zs,null,x().createElement(qt.InlineNotification,{text:Ge.j.get("fieldsExtractionRules.systemSecurityParsingRuleInfoMsg"),status:"default",multiline:!0})),x().createElement(Zs,{flexStyle:!0},x().createElement(eo,{rule:e}),x().createElement(to,{rule:e})),x().createElement(Zs,null,x().createElement(io,{rule:e,onSearchClick:t})),x().createElement(Zs,{flexStyle:!0},x().createElement(ao,{variant:"label",rule:e}),x().createElement(so,{variant:"label",rule:e}))),co=e=>e.rule.appliedAt===f.FieldsExtractionRuleType.Ingest?x().createElement(oo,Object.assign({},e)):x().createElement(lo,Object.assign({},e));var uo=i(81740),po=i(11286),ho=i(65501),mo=i.n(ho);const go=e=>e.views.fieldsExtractionRules,yo=e=>e.views.fieldsExtractionRules.bulkRemoveState,vo=(0,cn.createSelector)([go],(e=>e.fields)),fo=(0,cn.createSelector)([go],(e=>e.extractedFields)),_o=e=>new Set(e),So=(0,cn.createSelector)([fo],(e=>_o(e?e.selectedExtractedFieldNames:void 0))),bo=(0,cn.createSelector)([vo],(e=>_o(e?e.data.map((e=>e.fieldName.toLowerCase())):void 0))),Eo=(0,cn.createSelector)([fo,So,bo,Cs],((e,t,i,r)=>{const n=r?r.fieldsUsed:void 0,a=r?r.fieldsQuota:void 0,s=e&&e.extractedFieldNames,o=s?s.reduce(((e,r)=>t.has(r.toLowerCase())&&!i.has(r.toLowerCase())?e+1:e),0):0;return{isAnyFieldSelected:!!s&&s.some((e=>t.has(e.toLowerCase()))),isQuotaExceeded:!(!n||!a)&&n+o>a,areNewFieldsAdded:o>0,nrOfNewFields:o,extractedFieldNames:s,selectedExtractedFieldNames:t,usedFieldNames:i,requestInProgress:!!e&&e.requestInProgress,error:e?e.error:void 0,fieldsUsed:n,fieldsQuota:a}})),To=(0,cn.createSelector)([fo],(e=>{let t="";const i=e&&e.extractedFieldNames,r=e?e.selectedExtractedFieldNames:[];return i&&i.length>0&&i.length!==r.length&&(t=` | fields ${r.join(",")}`),t})),xo=(0,cn.createSelector)([Eo,fo,yo],(({isAnyFieldSelected:e,isQuotaExceeded:t},i,r)=>({selectedExtractedFieldNames:i?i.selectedExtractedFieldNames:[],extractedFieldsRequestInProgress:!!i&&i.requestInProgress,extractedFieldsError:i?i.error:void 0,isAnyFieldSelected:e,isQuotaExceeded:t,bulkRemoveState:r}))),Co=(0,cn.createSelector)([yo],(e=>({bulkRemoveState:e}))),Ao=(0,cn.createSelector)([go,e=>e.views.fieldsExtractionRules.enableRule,yo,e=>e.views.fieldsExtractionRules.defaultJSONParsingRule,e=>(0,re.withIndex)(e.views)[Yn.Se.USERS],e=>(0,re.withIndex)(e.megaEntities)[Yn.Se.USERS],To],(({appliedAt:e,isFetching:t,createdIngestRule:i,editedIngestRule:r},n,a,s,{isFetching:o},l,c)=>({enableRuleState:Object.assign({},n),bulkRemoveState:a,defaultJSONParsingRule:s,users:l,appliedAt:e||f.FieldsExtractionRuleType.Ingest,loadingOverlay:t||o,parseExpressionFilter:c,createdIngestRule:i,editedIngestRule:r})));var wo=i(27379),Io=i(84472),Ro=i.n(Io);class Do extends T.PureComponent{constructor(e){super(e),this.getFieldsSelectedType=()=>{const{selectedExtractedFieldNames:e,extractedFieldNames:t}=this.props;return 0===e.size?R.globalSelectorStates.NONE_SELECTED:t&&e.size===t.length?R.globalSelectorStates.ALL_SELECTED:R.globalSelectorStates.SEMI_SELECTED},this.state={enabledFields:{}}}getFields(){return this.props.error?T.createElement("div",{className:Wt()(Ro().rowItems,Ro().loadingMessageError)},T.createElement(qt.Icon,{className:Ro().rowItem,name:"exclamation-triangle",size:"large",color:"coral"}),T.createElement(qt.AssistiveText,{className:Ro().rowItem,error:!0},this.props.error)):this.props.extractedFieldNames?Gr.currentUserHelper.hasFeatureFlag("UICheckboxSelectionFERPage")?T.createElement(T.Fragment,null,T.createElement(R.GlobalSelectors,{globalSelector:this.getFieldsSelectedType(),handleGlobalSelectors:e=>{e===g.LegendConstantsModuleAll.GlobalSelector.SELECT_ALL?this.props.selectAllFields():this.props.clearAllFields()},visible:this.props.extractedFieldNames.length}),this.props.extractedFieldNames.map((e=>T.createElement("div",{className:Wt()(Ro().rowField,Ro().rowItems),key:e},T.createElement(qt.Checkbox,{label:e,value:e,disabled:this.props.requestInProgress,checked:this.props.selectedExtractedFieldNames.has(e),onChange:(t,i)=>this.props.setSelectedField({name:e,selected:i}),classes:{root:Ro().checkbox}}),!this.props.usedFieldNames.has(e)&&T.createElement(qt.Chip,{className:Ro().newTag,color:"green",disabled:this.props.requestInProgress,readOnly:!0},Ge.j.get("fieldsExtractionRules.formNewField")))))):T.createElement("ul",{className:Ro().fieldsList},this.props.extractedFieldNames.map((e=>T.createElement("li",{key:`fer-field-${e}`},T.createElement("div",{className:Ro().rowItems},T.createElement(qt.Text,{variant:"text"},e),!this.props.usedFieldNames.has(e)&&T.createElement(qt.Chip,{className:Ro().newTag,color:"green",disabled:this.props.requestInProgress,readOnly:!0},Ge.j.get("fieldsExtractionRules.formNewField"))))))):void 0}getFieldsSummary(){if(this.props.requestInProgress||!this.props.extractedFieldNames||this.props.error)return;let e,t;const{nrOfNewFields:i=0}=this.props;return this.props.isAnyFieldSelected?this.props.isQuotaExceeded?(e=T.createElement(qt.AssistiveText,{className:Wt()(Ro().rowItem,Ro().message),error:!0},Ge.j.getSafeString("fieldsExtractionRules.formTooManyNewFields",i,i>1?"s":"",i>1?"":"s",this.props.fieldsUsed,this.props.fieldsQuota)),t="coral"):this.props.areNewFieldsAdded&&(e=T.createElement(qt.Text,{className:Wt()(Ro().rowItem,Ro().message),variant:"textSmall"},Ge.j.getSafeString("fieldsExtractionRules.formAddedFields",i,i>1?"s":"",this.props.fieldsUsed,this.props.fieldsQuota)),t="dolphin"):(e=T.createElement(qt.AssistiveText,{className:Wt()(Ro().rowItem,Ro().message),error:!0},Ge.j.get("fieldsExtractionRules.formNoFields")),t="coral"),e&&T.createElement("div",{className:Wt()(Ro().rowItems,Ro().message),"data-sumo-test":"rule-fields-summary"},T.createElement(qt.Icon,{className:Ro().rowItem,name:"exclamation-triangle",size:"large",color:t}),e)}render(){return T.createElement("div",null,!this.props.requestInProgress&&T.createElement(qt.Text,{variant:"label",className:Ro().header},Ge.j.getSafeString("fieldsExtractionRules.formExtractedFields",this.props.extractedFieldNames?this.props.extractedFieldNames.length:0)),this.props.requestInProgress&&T.createElement("div",{className:Ro().header},T.createElement(qt.Text,{variant:"label",className:Ro().rowItem},Ge.j.get("fieldsExtractionRules.formLoadingExtractedFields")),T.createElement(qt.Loader,{loaderType:"spinner",className:Ro().rowItem})),this.getFields(),this.getFieldsSummary())}}const Oo={setSelectedField:wo.aA,selectAllFields:wo.sE,clearAllFields:wo.Sj},No=(0,Te.legacyConnect)(Eo,Oo)(Do);var Mo=i(38604);class ko extends T.PureComponent{constructor(e){super(e),this.initialValues={},this.initialEntityData={},this.isSubmittable=!1,this.initInitialValues=()=>{const e={name:"",scope:"",parseExpression:"",fieldNames:[],appliedAt:f.FieldsExtractionRuleType.Ingest};this.initialValues=Object.assign(Object.assign({},e),this.props.rule),this.initialEntityData=Object.assign(Object.assign({},e),this.props.initialEntityData),this.initialEntityData=(0,Bs.ui)(this.initialEntityData)},this.isScopeAll=e=>{var t;return void 0===e&&(e=null===(t=this.form)||void 0===t?void 0:t.values.scopeType),e===f.FERScopeType.All},this.isScopeSpecific=e=>{var t;return void 0===e&&(e=null===(t=this.form)||void 0===t?void 0:t.values.scopeType),e===f.FERScopeType.Specific},this.isSearchTime=e=>{var t;return void 0===e&&(e=null===(t=this.form)||void 0===t?void 0:t.values.appliedAt),e===f.FieldsExtractionRuleType.Dynamic},this.isIngestTime=e=>{var t;return void 0===e&&(e=null===(t=this.form)||void 0===t?void 0:t.values.appliedAt),e===f.FieldsExtractionRuleType.Ingest},this.getValidationRules=e=>{var t,i,r,n,a,s,o;switch(e.appliedAt){case f.FieldsExtractionRuleType.Ingest:return a=Object.assign(Object.assign({},this.validationRules),this.dynamicValidationRules(e)),s=this.isScopeAll(e.scopeType),o=null!==(i=null!==(t=e.basicMode)&&void 0!==t?t:this.initialValues.basicMode)&&void 0!==i&&i,s?function(e){return{name:e.name,appliedAt:e.appliedAt,scopeType:e.scopeType,parseExpression:e.parseExpression,fieldNames:e.fieldNames}}(a):function(e,t){const i={name:e.name,appliedAt:e.appliedAt,scopeType:e.scopeType,parseExpression:e.parseExpression,fieldNames:e.fieldNames,scope:e.scope,metadataKey:[],metadataValue:[]};return t&&(i.scope=[],i.metadataKey=e.metadataKey,i.metadataValue=e.metadataValue),i}(a,o);case f.FieldsExtractionRuleType.Dynamic:return function(e,t,i){const r={name:e.name,appliedAt:e.appliedAt,scopeType:[]};return i?(r.metadataKey=e.metadataKey,r.metadataValue=e.metadataValue):r.scope=e.scope,r}(Object.assign(Object.assign({},this.validationRules),this.dynamicValidationRules(e)),this.isScopeSpecific(e.scopeType),null!==(n=null!==(r=e.basicMode)&&void 0!==r?r:this.initialValues.basicMode)&&void 0!==n&&n);default:return{name:this.validationRules.name,appliedAt:this.validationRules.appliedAt,scope:this.validationRules.scope,parseExpression:[],fieldNames:[]}}},this.componentDidMount=()=>{var e;(null===(e=this.props.rule)||void 0===e?void 0:e.parseExpression)?this.updateParseExpression():this.props.resetExtractedFields()},this.componentDidUpdate=e=>{const t=e.rule,i=this.props.rule,r=["isQuotaExceeded","extractedFieldsRequestInProgress"];if(!(0,Mo.Z)((0,S.Z)(e,r),(0,S.Z)(this.props,r))){const e=this.isSubmittable&&!this.props.isQuotaExceeded&&!this.props.extractedFieldsRequestInProgress;this.props.setSidebarSubmitState(e)}this.form&&e.selectedExtractedFieldNames!==this.props.selectedExtractedFieldNames&&this.setFieldNamesValue(this.props.selectedExtractedFieldNames),this.form&&e.initialEntityData.parentDataStreams!==this.props.initialEntityData.parentDataStreams&&this.form.setFieldValue("parentDataStreams",this.props.initialEntityData.parentDataStreams),(0,re.get)(t,[f.ENTITY_ID_FIELD])!==(0,re.get)(i,[f.ENTITY_ID_FIELD])&&this.updateParseExpression(),this.updateBasicModeScopeIfInconsistent()},this.hideToast=()=>{this.setState({toastErrorMsg:""})},this.renderField=({name:e,label:t,multiline:i=!1})=>T.createElement(qt.Form.Field,{name:e,render:({field:r,form:n})=>{const a=r.name,s=!!n.touched[a],o=s?n.errors[a]:void 0;return T.createElement(qt.TextField,Object.assign({},r,{label:t,fullWidth:!0,error:!!o,hintText:"object"==typeof o?void 0:o,multiline:i,onChange:t=>{r.onChange(t),n.setFieldTouched(e,!0)},onBlur:t=>{r.onBlur(t),n.setFieldTouched(e,s)}}))}}),this.renderTypeField=()=>{const e=this.onLearnMoreClick.bind(this,"https://help.sumologic.com/?cid=0011");return T.createElement(qt.Form.Field,{name:"appliedAt",component:Wo,isEditable:this.props.userMode===f.SIDEBAR_MODES.ADD,onLearnMoreClickRunTimeFER:e,isDefaultRuleEnabled:this.props.isDefaultRuleEnabled})},this.renderTemplatesField=()=>T.createElement("div",null,T.createElement(qt.Text,{variant:"label",className:mo().label},Ge.j.get("fieldsExtractionRules.formLabelTemplates")),T.createElement(qt.Text,{"data-sumo-test":"templage-selector-search"},Ge.j.get("fieldsExtractionRules.formFieldTemplates"))),this.renderParsedTemplateField=()=>T.createElement(qt.Form.Field,{component:Bo,onUseTemplateClick:e=>{this.updateParseExpression(e.template)}}),this.renderSelectScopeForm=()=>T.createElement(T.Fragment,null,T.createElement(qt.Form.Field,{name:"scopeType",component:tl}),this.form&&this.isScopeSpecific()&&this.renderSpecificScopeSelection()),this.renderSpecificScopeSelection=()=>{var e;return T.createElement(T.Fragment,null,this.form&&this.form.values.basicMode?T.createElement(Xo,{metaDataOptions:(0,Bs.dk)(null!==(e=this.form.values.appliedAt)&&void 0!==e?e:f.FieldsExtractionRuleType.Ingest),fetchMetaValues:f.$fetchMetaValues}):this.renderField({name:"scope",label:Ge.j.get("fieldsExtractionRules.formLabelScope")}),this.form&&this.renderSwitchModeField())},this.renderSwitchModeField=()=>T.createElement(qt.Form.Field,{name:"basicMode",render:({field:e,form:t})=>this.isBasicModeDisabled(t.values.basicMode,t.values.scope,t.values.appliedAt)?T.createElement(qt.Tooltip,{title:Ge.j.get("fieldsExtractionRules.tooComplexQuery"),placement:"right",multiline:!0},this.getSwitchModeButton({field:e,form:t})):this.getSwitchModeButton({field:e,form:t})}),this.renderScopeComponent=()=>T.createElement("div",null,T.createElement(qt.Text,{variant:"label"},Ge.j.get("fieldsExtractionRules.formLabelScope")),this.isIngestTime()&&this.renderSelectScopeForm(),this.isSearchTime()&&this.renderSpecificScopeSelection()),this.renderScopeField=()=>{let e=!1;return(this.isIngestTime()||this.isSearchTime())&&(e=!0),T.createElement(T.Fragment,null,e?this.renderScopeComponent():this.renderField({name:"scope",label:Ge.j.get("fieldsExtractionRules.formLabelScope")}))},this.extractFields=e=>{const t=(0,Bs.US)(e);this.props.extractFields(t)},this.renderParseExpressionField=()=>T.createElement(qt.Form.Field,{name:"parseExpression",render:({field:e,form:t})=>T.createElement("div",{className:mo().parseExpressionEditor},T.createElement(qt.Text,{variant:"label",className:mo().parseExpressionLabel},Ge.j.get("fieldsExtractionRules.formLabelParseExpression")," *"),T.createElement(qt.CodeEditor,{language:"sumoql",key:this.state.parseExpressionUpdate,value:this.state.parseExpression,height:150,onChange:(i,r,n)=>{n!==e.value&&(t.setFieldValue("parseExpression",n),this.extractFieldsDebounced(n))}}))}),this.renderFieldNamesField=()=>T.createElement(qt.Form.FieldArray,{name:"fieldNames",render:()=>T.createElement(No,null)}),this.onLearnMoreClick=e=>{const t=window.open(e),i=Ge.j.get("fieldsExtractionRules.errorMessageOpeningSupport");t?t.focus():this.setState({toastErrorMsg:i})},this.onFormChange=(e,t,i)=>{if(!e){const e=(0,xe.Z)(this.initialEntityData,t,this.compareFn(null==t?void 0:t.basicMode));this.isSubmittable=!e&&!(!i||0!==Object.keys(i).length);const r={values:!e&&t?Object.assign({},t):{},isSubmittable:this.isSubmittable&&!this.props.isQuotaExceeded&&!this.props.extractedFieldsRequestInProgress,isSubmitting:!1};this.props.onFormChange(r)}},this.onBulkRemoveCloseDialog=e=>{if(!e.length)return void this.props.setBulkRemoveDialogState({isOpen:!1});const{id:t,name:i,enabled:r,appliedAt:n,parseExpression:a,scope:s,parentDataStreams:o}=this.props.rule,l=e.map((e=>e.id)),c=o?o.filter((e=>!l.includes(e))):[];this.props.bulkRemove({ruleId:t,name:i,enabled:r,appliedAt:n,parseExpression:a,parentDataStreams:c,scope:s,countRemoved:l.length})},this.renderIngestForm=()=>{var e;const t=null===(e=this.form)||void 0===e?void 0:e.values.appliedAt;return T.createElement("div",{className:mo().fieldContainer},this.renderField({name:"name",label:Ge.j.get("fieldsExtractionRules.formLabelRuleName")}),this.renderTypeField(),t&&this.renderScopeField(),t&&this.renderParsedTemplateField(),t&&this.renderParseExpressionField(),t&&this.renderFieldNamesField())},this.renderDynamicForm=()=>T.createElement("div",{className:mo().fieldContainer},this.renderField({name:"name",label:Ge.j.get("fieldsExtractionRules.formLabelRuleName")}),this.renderTypeField(),this.renderScopeField(),this.isSearchTime()&&this.renderTemplatesField()),this.renderForm=e=>{this.form=e;const t=this.onLearnMoreClick.bind(this,"https://help.sumologic.com/?cid=5095");return T.createElement("div",{className:mo().form},T.createElement("div",{className:mo().helpText},T.createElement("p",{"data-sumo-test":"add-field-extraction-rule-description"},T.createElement("span",null,Ge.j.get("fieldsExtractionRules.createFormIntroductoryText")),T.createElement("button",{type:"button",onClick:t},Ge.j.get("fieldsExtractionRules.learnMore")))),this.isSearchTime(e.values.appliedAt)?this.renderDynamicForm():this.renderIngestForm())},this.updateParseExpression=(e="")=>{this.props.resetExtractedFields();const t=this.props.rule;!e&&t&&(e=t.parseExpression||""),this.setState((t=>({parseExpression:e,parseExpressionUpdate:t.parseExpressionUpdate+1}))),this.extractFields(e)},this.setFieldNamesValue=e=>{this.form&&this.form.setFieldValue("fieldNames",e)},this.updateBasicModeScopeIfInconsistent=()=>{var e,t,i;const r=(0,Bs.dk)(null!==(t=null===(e=this.form)||void 0===e?void 0:e.values.appliedAt)&&void 0!==t?t:f.FieldsExtractionRuleType.Ingest);(null===(i=this.form)||void 0===i?void 0:i.values.scopeType)===f.FERScopeType.Specific&&this.form.values.basicMode&&this.form.values.metadataKey&&!r.includes(this.form.values.metadataKey)&&this.form.setValues(Object.assign(Object.assign({},this.form.values),{metadataKey:"",metadataValue:""}))},this.state={toastErrorMsg:"",parseExpression:"",parseExpressionUpdate:0};const t={type:"required",message:Ge.j.get("fieldsExtractionRules.validationIsRequired")},i=(e,t="",i)=>({type:"custom",value:r=>(r+t).length>e?i||Ge.j.getSafeString("fieldsExtractionRules.formFieldMaxLengthExceeded",e):null}),r={type:"custom",value:e=>(0,Bs.CY)(e)?Ge.j.get("fieldsExtractionRules.invalidCharactersError",f.VALID_CHARACTERS):null};this.validationRules={name:[t,i(256),r],appliedAt:[{type:"custom",value:e=>[f.FieldsExtractionRuleType.Ingest,f.FieldsExtractionRuleType.Dynamic].includes(e)?null:Ge.j.get("fieldsExtractionRules.validationTypeIsConsistent")}],parseExpression:[Object.assign({},t)],fieldNames:[{type:"custom",value:()=>this.props.isAnyFieldSelected?this.props.extractedFieldsError?[this.props.extractedFieldsError]:null:[Ge.j.get("fieldsExtractionRules.formNoFields")]}],scopeType:[{type:"custom",value:e=>[f.FERScopeType.All,f.FERScopeType.Specific].includes(e)?null:Ge.j.get("fieldsExtractionRules.validationTypeIsConsistent")}],scope:[t,i(2048)],metadataKey:[]},this.dynamicValidationRules=e=>({metadataValue:[t,i(2048,e.metadataKey?`${e.metadataKey}=`:void 0,Ge.j.getSafeString("fieldsExtractionRules.formScopeBasicMaxLengthExceeded",Ge.j.get("fieldsExtractionRules.metadataKeyLabel"),Ge.j.get("fieldsExtractionRules.metadataValueLabel"),2048))]}),this.initInitialValues(),this.extractFieldsDebounced=(0,uo.Z)((e=>{this.extractFields(e),this.setFieldNamesValue([])}),1e3)}isBasicModeDisabled(e=!1,t,i){return!1===e&&!((0,Bs.WX)(t,i)||""===t.trim())}getSwitchModeButton({field:e,form:t}){return T.createElement("span",null,T.createElement(qt.TextButton,{type:"button",disabled:this.isBasicModeDisabled(t.values.basicMode,t.values.scope,t.values.appliedAt),className:mo().switchModeButton,onClick:()=>{var i,r;const n=(0,Bs.dk)(t.values.appliedAt),a=!e.value;if(a){const e=t.values.scope.split("=").map((e=>e.trim())),a=null!==(i=n.find((t=>t.toLowerCase()===e[0].toLowerCase())))&&void 0!==i?i:"",s=1===e.length?e[0]:null!==(r=e[1])&&void 0!==r?r:"";t.setFieldValue("metadataKey",a),t.setFieldValue("metadataValue",s)}else{const e=t.values.metadataKey,i=t.values.metadataValue;let r="";e?r=`${e}=${null!=i?i:""}`:i&&(r=i),t.setFieldValue("scope",r)}t.setFieldValue(e.name,a)},"data-sumo-test":"field-extraction-rule-search-scope-switch"},e.value?Ge.j.get("fieldsExtractionRules.switchAdv"):Ge.j.get("fieldsExtractionRules.switchBasic")))}compareFn(e=!1){return(t,i,r)=>"function"==typeof t&&"function"==typeof i||("scope"===r&&!0===e||(("metadataKey"===r||"metadataValue"===r)&&!1===e||("parentDataStreams"===r||void 0)))}render(){return this.initialValues=(0,Bs.ui)(this.initialValues),T.createElement(T.Fragment,null,T.createElement(qt.Form,{"data-sumo-test":"modify-fer-form",render:this.renderForm,validationRules:this.getValidationRules,initialValues:this.initialValues,onValidation:this.onFormChange,onSubmit:po.Z,enableReinitialize:!0}),T.createElement(qt.Toast.CriticalToast,{open:!!this.state.toastErrorMsg,onClose:this.hideToast,message:this.state.toastErrorMsg}))}}const Lo={akamai:'parse "\\"reqMethod\\":\\"*\\"" as method, "\\"status\\":\\"*\\"" as status, "\\"fwdHost\\":\\"*\\"" as origin \n| parse "\\"bytes\\":\\"*\\"" as bytes, "\\"edgeIP\\":\\"*\\"" as edgeip, "\\"country\\":\\"*\\"" as country, "\\"cookie\\":\\"*\\"" as cookie',apache:'parse regex "^(?<src_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})" \n| parse regex "(?<method>[A-Z]+)\\s(?<url>\\S+)\\sHTTP/[\\d\\.]+\\"\\s(?<status_code>\\d+)\\s(?<size>[\\d-]+)\\s\\"(?<referrer>.*?)\\"\\s\\"(?<user_agent>.+?)\\".*"',tomcat:'parse regex "(?<ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}? )" \n| parse regex "\\]\\s+\\"(?<method>\\w+)\\s+(?<uri>\\S+)\\s+(?<protocol>\\S+)\\"\\s+(?<status>\\d+)\\s+(?<bytes_sent>[\\d-]+)"',awsCTL:'parse "eventSource\\":\\"*\\"" as event_source \n| parse "\\"sourceIPAddress\\":\\"*\\"" as source_ipaddress \n| parse "\\"eventName\\":\\"*\\"" as event_name \n| parse "\\"eventSource\\":\\"*\\"" as event_source \n| parse "awsRegion\\":\\"*\\"" as aws_Region \n| parse "\\"userName\\":\\"*\\"" as user',awsELB:'parse "* * *:* *:* * * * * * * * \\"* *://*:*/* HTTP" as datetime, ELB_Server, clientIP, port, backend, backend_port, requestProc, ba_Response, cli_Response, ELB_StatusCode, be_StatusCode, rcvd, send, method, protocol, domain, server_port, path',awsS3:'parse "* * [*] * * * * * \\"* HTTP/1.1\\" * * * * * * * \\"*\\" *" as bucket_owner, bucket, time, remoteIP, requester, request_ID, operation, key, request_URI, status_code, error_code, bytes_sent, object_size, total_time, turn_time, referrer, user_agent, version_ID',microsoft:'parse regex "(?<server_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}) (?<method>\\S+?) (?<cs_uri_stem>\\S+?) (?<cs_uri_query>\\S+?) (?<s_port>\\S+?) (?<cs_username>\\S+?) (?<c_ip>\\S+?) (?<cs_User_Agent>\\S+?) (?<sc_status>\\S+?) (?<sc_substatus>\\S+?) (?<sc_win32_status>\\S+?) (?<time_taken>\\S+?)$"',nginx:'parse regex "^(?<src_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})" \n| parse regex "(?<method>[A-Z]+)\\s(?<url>\\S+)\\sHTTP/[\\d\\.]+\\"\\s(?<status_code>\\d+)\\s(?<size>[\\d-]+)\\s\\"(?<referrer>.*?)\\"\\s\\"(?<user_agent>.+?)\\".*"',paloAlto6:'parse "*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*" as f1,recvTime,serialNum,type,subtype,f2,genTime,src_ip,dest_ip,natsrc_ip,natdest_ip,ruleName,src_user,dest_user,app,vsys,src_zone,dest_zone,ingress_if,egress_if,logProfile,f3,sessionID,repeatCnt,src_port,dest_port,natsrc_port,natdest_port,flags,protocol,action,misc,threatID,cat,severity,direction,seqNum,action_flags,src_loc,dest_loc,f4,content_type',paloAlto8threat:"csv _raw extract 1 as f1, 2 as Receive_Time, 3 as serialNum, 4 as type, 5 as subtype, 6 as f2, 7 as LogGenerationTime, 8 as src_ip, 9 as dest_ip, 10 as NAT_src_ip, 11 as NAT_dest_ip, 12 as ruleName, 13 as src_user, 14 as dest_user, 15 as app, 16 as vsys, 17 as src_zone, 18 as dest_zone, 19 as inbound_interface, 20 as outbound_interface, 21 as LogAction, 22 as f3, 23 as SessonID, 24 as RepeatCount, 25 as src_port, 26 as dest_port, 27 as NAT_src_port, 28 as NAT_dest_port, 29 as flags, 30 as protocol, 31 as action, 32 as urlORFileName, 33 as Threat_Content_Name, 34 as category, 35 as severity, 36 as direction, 37 as seqNum, 38 as action_flags, 39 as src_country, 40 as dest_country, 41 as f4, 42 as content_type, 43 as pcap_id, 44 as filedigest, 45 as cloud, 46 as url_idx, 47 as user_agent, 48 as filetype, 49 as xff, 50 as referer, 51 as sender, 52 as subject, 53 as recipient, 54 as reportid, 55 as Device_Group_Hierarchy, 56 as vsys_name, 57 as DeviceName, 58 as f5, 59 as Source_VM_UUID, 60 as Destination_VM_UUID, 61 as Parent_Session_ID, 62 as Tunnel_ID_IMSI, 63 as Monitor_Tag_IMEI, 64 as method, 65 as parent_start_time, 66 as Tunnel, 67 as thr_category, 68 as contentver, 69 as f6, 70 as SCTP_Association_ID, 71 as Payload_Protocol_ID, 72 as http_headers",paloAlto8traffic:"csv _raw extract 1 as f1, 2 as Receive_Time, 3 as serialNum, 4 as type, 5 as subtype, 6 as f2, 7 as LogGenerationTime, 8 as src_ip, 9 as dest_ip, 10 as NAT_src_ip, 11 as NAT_dest_ip, 12 as ruleName, 13 as src_user, 14 as dest_user, 15 as app, 16 as vsys, 17 as src_zone, 18 as dest_zone, 19 as inbound_interface, 20 as outbound_interface, 21 as LogAction, 22 as f3, 23 as SessonID, 24 as RepeatCount, 25 as src_port, 26 as dest_port, 27 as NAT_src_port, 28 as NAT_dest_port, 29 as flags, 30 as protocol, 31 as action,32 as bytes, 33 as bytes_sent, 34 as bytes_recv, 35 as Packets, 36 as StartTime, 37 as ElapsedTime, 38 as Category, 39 as f4, 40 as seqNum, 41 as ActionFlags, 42 as src_Country, 43 as dest_country, 44 as pkts_sent, 45 as pkts_received, 46 as session_end_reason, 47 as Device_Group_Hierarchy , 48 as vsys_Name, 49 as DeviceName, 50 as action_source, 51 as Source_VM_UUID, 52 as Destination_VM_UUID, 53 as Tunnel_ID_IMSI, 54 as Monitor_Tag_IMEI, 55 as Parent_Session_ID, 56 as parent_start_time, 57 as Tunnel, 58 as SCTP_Association_ID, 59 as SCTP_Chunks, 60 as SCTP_Chunks_Sent, 61 as SCTP_Chunks_Received",paloAlto8system:"csv _raw extract 1 as f1, 2 as Receive_Time, 3 as serialNum, 4 as type, 5 as subtype, 6 as f2, 7 as LogGenerationTime, 8 as vsys, 9 as eventID, 10 as Object, 11 as f3, 12 as f4, 13 as Module, 14 as severity, 15 as description, 16 as seqNum, 17 as action_flags, 18 as Device_Group_Hierarchy, 19 as vsys_name, 20 as DeviceName",paloAlto8correlatiion:"csv _raw extract 1 as f1, 2 as Receive_Time, 3 as serialNum, 4 as type, 5 as subtype, 6 as f2, 7 as LogGenerationTime, 8 as src_ip, 9 as src_user, 10 as vsys, 11 as Category, 12 as Severity, 13 as Device_Group_Hierarchy, 14 as vsys_name, 15 as DeviceName, 16 as vSysID, 17 as Object_Name, 18 as Object_ID, 19 as Evidence",paloAlto8config:"csv _raw extract 1 as f1, 2 as Receive_Time, 3 as serialNum, 4 as type, 5 as subtype, 6 as f2, 7 as LogGenerationTime, 8 as src_ip, 9 as src_user, 10 as cmd, 11 as admin, 12 as client, 13 as result, 14 as path, 15 as seqno, 16 as action_flags, 17 as vsys, 18 as before_change_detail, 19 as after_change_detail, 20 as Device_Group_Hierarchy, 21 as vsys_name, 22 as DeviceName",microsoftIIS10:'parse regex "(?<server_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}) (?<method>\\S+?) (?<cs_uri_stem>\\S+?) (?<cs_uri_query>\\S+?) (?<s_port>\\S+?) (?<cs_username>\\S+?) (?<c_ip>\\S+?) (?<cs_User_Agent>\\S+?) (?<cs_referer>\\S+?) (?<sc_status>\\S+?) (?<sc_substatus>\\S+?) (?<sc_win32_status>\\S+?) (?<time_taken>\\S+?)$"',microsoftIISerror:'parse regex "(?<c_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}) (?<c_port>\\S+?) (?<server_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}) (?<s_port>\\S+?) (?<protocol_version>\\S+?) (?<verb>\\S+?) (?<cookedurl_query>\\S+?) (?<Protocol_Status>\\S+?) (?<SiteId>\\S+?) (?<Reason_Phrase>\\S+?) (?<Queue_Name>\\S+?)$"',varnish:'parse regex "^(?<src_ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})" \n| parse regex "(?<method>[A-Z]+)\\s(?<url>\\S+)\\sHTTP/[\\d\\.]+\\"\\s(?<status_code>\\d+)\\s(?<size>[\\d-]+)\\s\\"(?<referrer>.*?)\\"\\s\\"(?<user_agent>.+?)\\".*"',cisco:'extract "%[A-Z]{3}-(?<severity>\\d)-(?<msg_code>\\d{6}):(?<action>.+)$" nodrop \r\n| extract " duration (?<duration>[\\d:]+) bytes (?<bytes>\\d+)" nodrop \r\n| extract "(?<connection_count>\\d+ in use, \\d+ most used)" nodrop \r\n| extract "%[A-Z]{3}-\\d-\\d{6}:.+? for (?<src_interface>\\S+):(?<src_host>[\\S ]+)\\/(?<src_port>\\d+) .*?to (?<dest_interface>\\S+):(?<dest_host>\\S+)\\/(?<dest_port>\\d+)" nodrop\r\n| extract "(?<action>Built .+?) (?:for |from )" nodrop \r\n| extract "Built \\w+ (?<protocol>\\w+) (?:translation|connection) " nodrop \r\n| extract " from (?<src_interface>\\S+):(?<src_host>[\\S ]+) to (?<dest_interface>\\S+):(?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract " from (?<src_interface>\\S+):(?<src_host>[\\S ]+)/(?<src_port>\\d+) to (?<dest_interface>\\S+):(?<dest_host>\\S+)/(?<dest_port>\\d+)" nodrop \r\n| extract "(?<action>access-list) (?<acl_id>.+?) (?<access_decision>\\w+) (?<protocol>\\w+) (?<src_interface>\\S+)/(?<src_host>[\\S ]+)\\((?<src_port>\\d+)\\) -[>]{0,1} (?<dest_interface>\\S+)/(?<dest_host>\\S+)\\((?<dest_port>\\d+)\\) hit-cnt (?<hit_cnt>\\d+) (?<hit_cnt_interval>.+?)(?: \\[|$)" nodrop \r\n| extract "(?<action>access-list) (?<acl_id>.+?) (?<access_decision>\\w+) (?<protocol>\\w+) (?<src_interface>\\S+)/(?<src_host>[\\S ]+)\\((?<src_port>\\d+)\\) -[>]{0,1} (?<dest_interface>\\S+)/(?<dest_host>\\S+)\\((?<dest_port>\\d+)\\) hit-cnt (?<hit_cnt>\\d+) \\((?<hit_cnt_interval>.+?)\\)" nodrop \r\n| extract "(?<action>Deny .+?) from (?<src_host>[\\S ]+) to (?<dest_host>\\S+) on interface (?<src_interface>\\S+)(?:\\s|$)"  nodrop \r\n| extract "(?<action>Deny .+?) src (?<src_interface>\\S+):(?<src_host>[\\S ]+) dst (?<dest_interface>\\S+):(?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "Deny (?<protocol>\\w+) (?:reverse path|connection spoof|src )" nodrop \r\n| extract "(?<action>Deny inbound \\(No xlate\\))"  nodrop \r\n| extract "(?<action>Deny inbound \\(No xlate\\)) (?<protocol>\\w+) src (?<src_interface>\\S+):(?<src_host>[\\S ]+) dst (?<dest_interface>\\S+):(?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny inbound \\(No xlate\\)) (?<protocol>\\w+) src (?<src_interface>\\S+):(?<src_host>[\\S ]+)\\/(?<src_port>\\d+) dst (?<dest_interface>\\S+):(?<dest_host>\\S+)\\/(?<dest_port>\\d+)" nodrop \r\n| extract " (?<protocol>\\w+) (?<action>Connection denied by outbound list) (?<acl_id>.+?) src (?<src_host>[\\S ]+) dest (?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny inbound) (?<protocol>\\w+) from (?<src_host>[\\S ]+)/(?<src_port>\\d+) to (?<dest_host>\\S+)/(?<dest_port>\\d+)" nodrop \r\n| extract "(?<action>Deny inbound) (?<protocol>\\w+) from (?<src_host>[\\S ]+)/(?<src_port>\\d+) to (?<dest_host>\\S+)/(?<dest_port>\\d+) on interface (?<src_interface>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny inbound) (?<protocol>\\w+) src (?<src_interface>\\S+):(?<src_host>[\\S ]+)/(?<src_port>\\d+) dst (?<dest_interface>\\S+):(?<dest_host>\\S+)/(?<dest_port>\\d+)" nodrop \r\n| extract "(?<action>Deny IP) from (?<src_host>[\\S ]+) to (?<dest_host>\\S+)(?:,|\\s|$)" nodrop \r\n| extract "(?<action>Dropping echo request) from (?<src_host>[\\S ]+) to PAT address" nodrop \r\n| extract "(?<action>Deny inbound icmp) src (?<src_interface>\\S+):(?<src_host>[\\S ]+) dst (?<dest_interface>\\S+):(?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny TCP \\(no connection\\)) from (?<src_host>[\\S ]+)/(?<src_port>\\d+) to (?<dest_host>\\S+)/(?<dest_port>\\d+) flags (?<flags>.+?) on interface (?<src_interface>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny IP spoof) from \\((?<src_host>[\\S ]+)\\) to (?<dest_host>\\S+) on interface (?<src_interface>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny IP due to Land Attack) from (?<src_host>[\\S ]+) to (?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>ICMP packet type .+? denied by outbound list) (?<acl_id>.+?) src (?<src_host>[\\S ]+) dest (?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Deny IP teardrop fragment .+?) from (?<src_host>[\\S ]+) to (?<dest_host>\\S+)(?:\\s|$)" nodrop \r\n| extract "(?<action>Teardown) (?<protocol>TCP|UDP) connection \\d+ for " nodrop \r\n| extract "%[A-Z]{3}-\\d-\\d{6}: (?<src_host>[\\S ]+) (?<action>Accessed URL) (?<dest_host>[\\d\\.]+):(?<url>.+)$" nodrop\r\n| extract "%[A-Z]{3}-\\d-\\d{6}: (?<user>.+?)@(?<src_host>[\\S ]+) (?<action>Accessed URL) (?<dest_host>\\S+):(?<url>.+)$" nodrop \r\n| extract "(?<action>\\w+ local-host) (?<src_interface>\\S+):(?<src_host>[\\S ]+)$" nodrop \r\n| extract "(?<action>\\w+ local-host) (?<src_interface>\\S+):(?<src_host>[\\S ]+) duration (?<duration>.+)$" nodrop \r\n| extract "%[A-Z]{3}-(?<severity>\\d)-(?<msg_code>\\d{6})[:]{0,1} IPS:(?<ips_num>\\d+) (?<action>.+?) from (?<src_host>[\\S ]+) to (?<dest_host>\\S+) on interface (?<src_interface>\\S+)(?:\\s|$)" nodrop',albLogs:'parse "* * * * * * * * * * * * \\"*\\" \\"*\\" * * * \\"*\\"" as type, datetime, ELB_Server, client, backend, request_processing_time, target_processing_time, response_processing_time, elb_status_code, target_status_code, received_bytes, sent_bytes, request,user_agent,ssl_cipher,ssl_protocol,target_group_arn,trace_id | parse field=request "* *://*:*/* HTTP" as method, protocol, domain, server_port, path | parse field=target_group_arn "* " as target_group_arn nodrop | parse field=client "*:*" as clientIP, port nodrop | parse field=backend "*:*" as backendIP, backend_port nodrop | fields - request, client, backend'};let Po;const Fo={getConfig:()=>(Po||(Po={ingestTime:[{label:Ge.j.get("fieldsExtractionRules.parsedTemplateAkamai"),value:"akamai"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateApacheAccess"),value:"apache"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateApacheTomcat"),value:"tomcat"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateAwsCTL"),value:"awsCTL"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateAWSELB"),value:"awsELB"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateAWSS3"),value:"awsS3"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateMicrosoft"),value:"microsoft"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateNginx"),value:"nginx"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplatePaloAlto6"),value:"paloAlto6"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplatePaloAlto8threat"),value:"paloAlto8threat"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplatePaloAlto8traffic"),value:"paloAlto8traffic"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplatePaloAlto8system"),value:"paloAlto8system"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplatePaloAlto8correlatiion"),value:"paloAlto8correlatiion"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplatePaloAlto8config"),value:"paloAlto8config"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateMicrosoftIIS10"),value:"microsoftIIS10"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateMicrosoftIISerror"),value:"microsoftIISerror"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateVarnish"),value:"varnish"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateCisco"),value:"cisco"},{label:Ge.j.get("fieldsExtractionRules.parsedTemplateAlbLogs"),value:"albLogs"}],searchTime:[{label:Ge.j.get("fieldsExtractionRules.parsedTemplateJSONLogs"),value:"json_logs"}]}),Po),get:e=>Lo[e]};var Uo=i(44651),Vo=i.n(Uo);class Bo extends T.PureComponent{constructor(){super(...arguments),this.state={option:""},this.handleChange=e=>{const t=e.target.value;this.setState({option:t})},this.onUseTemplateClick=e=>{e.preventDefault();const t=this.props.form,i=Fo.get(this.state.option);t.setFieldValue("parseExpression",i),this.props.onUseTemplateClick&&this.props.onUseTemplateClick({template:i})}}compareOptionLabels({label:e},{label:t}){const i=e.trim(),r=t.trim();return i.localeCompare(r)}render(){const e=Fo.getConfig();return T.createElement(T.Fragment,null,T.createElement(qt.Select,{value:this.state.option,label:Ge.j.get("fieldsExtractionRules.formLabelParsedTemplate"),handleChange:this.handleChange,className:Vo().select,optional:!0},[...e.ingestTime].sort(this.compareOptionLabels).map((e=>T.createElement(qt.Select.Item,{key:e.label,value:e.value,dense:!0},e.label)))),this.state.option&&T.createElement("div",{className:Vo().templatePanel},T.createElement(qt.Text,{className:Vo().templateContent,variant:"code",noWrap:!1},Fo.get(this.state.option)),T.createElement("div",{className:Vo().templateRow},T.createElement("div",{className:Vo().templateMsg,dangerouslySetInnerHTML:{__html:Ge.j.getSafeString("fieldsExtractionRules.parsedTemplateWarning")}}),T.createElement(qt.Button,{className:Vo().templateBtn,color:"secondary",size:"small",onClick:this.onUseTemplateClick},Ge.j.get("fieldsExtractionRules.formUseTemplateBtn")))))}}var $o=i(61147),Ho=i.n($o);class Wo extends T.PureComponent{constructor(){super(...arguments),this.renderRadioButton=({value:e,label:t,hint:i,labelDataSumoTest:r,hintDataSumoTest:n})=>{const{field:{name:a,onChange:s,value:o},form:{setFieldTouched:l},isDefaultRuleEnabled:c}=this.props;return T.createElement("div",{className:Ho().radio},T.createElement(qt.Radio,{name:a,onChange:e=>{l(a,!0),s(e)},checked:o===e,label:t,value:e,"data-sumo-test":r}),T.createElement("div",{className:Ho().radioAssistiveText,"data-sumo-test":n},i,e===f.FieldsExtractionRuleType.Dynamic&&T.createElement("button",{type:"button",className:Ho().learnMore,onClick:this.props.onLearnMoreClickRunTimeFER},Ge.j.get("fieldsExtractionRules.learnMore"))),c&&o===f.FieldsExtractionRuleType.Dynamic&&e===o&&T.createElement("div",{className:Ho().defaultRuleEnabledWarning},T.createElement(qt.InlineNotification,{text:Ge.j.get("fieldsExtractionRules.defaultJsonParsingRuleEnabledWarning"),status:"warning",multiline:!0})))},this.renderContent=()=>{const{field:{value:e},isEditable:t}=this.props;if(t)return T.createElement("div",{"data-sumo-test":"field-extraction-rule-type-radio-select"},this.renderRadioButton({value:f.FieldsExtractionRuleType.Ingest,label:Ge.j.get("fieldsExtractionRules.ingestText"),hint:Ge.j.get("fieldsExtractionRules.ingestHint"),labelDataSumoTest:"input-type-ingest",hintDataSumoTest:"hint-type-ingest"}),this.renderRadioButton({value:f.FieldsExtractionRuleType.Dynamic,label:Ge.j.get("fieldsExtractionRules.dynamicText"),hint:Ge.j.get("fieldsExtractionRules.dynamicHint"),labelDataSumoTest:"input-type-dynamic",hintDataSumoTest:"hint-type-dynamic"}));{let t,i;switch(e){case f.FieldsExtractionRuleType.Ingest:i=Ge.j.get("fieldsExtractionRules.ingestText"),t=Ge.j.get("fieldsExtractionRules.ingestHint");break;case f.FieldsExtractionRuleType.Dynamic:i=Ge.j.get("fieldsExtractionRules.dynamicText"),t=Ge.j.get("fieldsExtractionRules.dynamicHint");break;default:i="",t=""}return T.createElement("div",{className:Ho().row,"data-sumo-test":"field-extraction-rule-selected-type"},T.createElement(qt.Text,{variant:"text"},i),T.createElement(qt.Tooltip,{placement:"top",title:t,multiline:!0},T.createElement(qt.Icon,{name:"question-circle",color:"blue",className:Ho().infoIcon})))}}}render(){const{field:{name:e},form:{touched:t,errors:i}}=this.props,r=(0,re.withIndex)(t)[e]&&(0,re.withIndex)(i)[e];return T.createElement("div",null,T.createElement(qt.Text,{variant:"label",className:Ho().label},Ge.j.get("fieldsExtractionRules.formLabelRuleType")),this.renderContent(),r&&T.createElement(qt.AssistiveText,{error:!0,className:Ho().error},r))}}var qo=i(46427),jo=i.n(qo),Qo=i(32630),zo=i(40450);var Go;function Ko(e,t){const{type:i,payload:r}=t;switch(i){case Go.FETCH_INIT:return Object.assign(Object.assign({},e),{isLoading:!0});case Go.FETCH_SUCCESS:return r?Object.assign(Object.assign({},e),{isLoading:!1,data:r}):e;case Go.FETCH_FAILURE:return Object.assign(Object.assign({},e),{isLoading:!1,data:[]});default:return e}}function Yo({field:e,form:t,fetchMetaValues:i,deounceInterval:r=500}){const{name:n,value:a}=e,{touched:s,errors:o,setFieldValue:l,values:{metadataKey:c}}=t,[d,u]=(0,T.useReducer)(Ko,{isLoading:!1,data:[]}),p=function(e,t,i=0){const r=(0,T.useRef)(new Qo.xQ);return(0,T.useEffect)((()=>{r.current.pipe((0,di.b)(i),(0,zo.w)(e)).subscribe(t)}),[e,t,i]),(0,T.useCallback)((e=>r.current.next(e)),[])}(i,(0,T.useCallback)((({autoCompleteValues:e})=>u({type:Go.FETCH_SUCCESS,payload:e})),[]),r);return(0,T.useEffect)((()=>{c&&(u({type:Go.FETCH_INIT}),p({metaKey:c,partialToken:a}))}),[p,c,a]),x().createElement(qt.AutoComplete,{items:d.data,loading:d.isLoading,error:(0,re.withIndex)(s)[n]?(0,re.withIndex)(o)[n]:void 0,label:Ge.j.get("fieldsExtractionRules.metadataValueLabel"),selectedItems:[{label:a,value:a}],onSelectedItemsChange:e=>{e.length&&l("metadataValue",e[0].value)},onSearchTextChange:e=>l("metadataValue",e),dense:!0})}function Zo({field:e,metaDataOptions:t}){return x().createElement(x().Fragment,null,x().createElement(qt.Select,Object.assign({label:Ge.j.get("fieldsExtractionRules.metadataKeyLabel")},e),t.map((e=>x().createElement(qt.Select.Item,{key:e,value:e,dense:!0},e)))))}function Xo({metaDataOptions:e,fetchMetaValues:t}){return x().createElement("div",{className:jo().basicMode},x().createElement(qt.Form.Field,{name:"metadataKey",component:Zo,metaDataOptions:e}),x().createElement(qt.Form.Field,{name:"metadataValue",component:Yo,fetchMetaValues:t}))}!function(e){e.FETCH_INIT="init",e.FETCH_SUCCESS="success",e.FETCH_FAILURE="failure"}(Go||(Go={}));var Jo=i(62508),el=i.n(Jo);class tl extends x().Component{render(){const{form:e,field:{name:t,onChange:i}}=this.props;return x().createElement("div",{className:el().scopeTypes},x().createElement(qt.Radio,{name:t,value:f.FERScopeType.All,checked:e.values.scopeType===f.FERScopeType.All,label:Ge.j.get("fieldsExtractionRules.allData"),onChange:e=>{i(e)},"data-sumo-test":"field-extraction-rule-scope-all"}),x().createElement(qt.Radio,{name:t,value:f.FERScopeType.Specific,checked:e.values.scopeType===f.FERScopeType.Specific,label:Ge.j.get("fieldsExtractionRules.specificData"),onChange:e=>{i(e)},"data-sumo-test":"field-extraction-rule-scope-specific"}))}}var il=i(48456),rl=i(9757),nl=i(51961),al=i.n(nl);const sl={appliedAt:f.FieldsExtractionRuleType.Ingest,enableRule:{name:void 0,enable:!1,success:!1,error:void 0},bulkRemoveState:{isOpen:!1,processing:!1,success:!1,error:void 0,countRemoved:0},fields:{data:[]},extractedFields:{requestInProgress:!1,extractedFieldNames:void 0,selectedExtractedFieldNames:[],error:void 0},createdIngestRule:void 0,editedIngestRule:void 0,defaultJSONParsingRule:void 0},ol={[rl.a.ENABLE_RULE]:(e,{payload:t})=>al()(e,{enableRule:{$merge:{name:t.name,enable:t.enabled,success:!1,error:void 0}}}),[rl.a.ENABLE_RULE_SUCCESS]:e=>al()(e,{enableRule:{$merge:{success:!0,error:void 0}}}),[rl.a.ENABLE_RULE_FAILURE]:(e,{payload:t})=>al()(e,{enableRule:{$merge:{success:!1,error:t}}}),[rl.a.BULK_REMOVE_REQUEST]:e=>al()(e,{bulkRemoveState:{$merge:{success:!1,processing:!0,error:void 0,countRemoved:0}}}),[rl.a.BULK_REMOVE_SUCCESS]:(e,{payload:t})=>al()(e,{bulkRemoveState:{$merge:{isOpen:!1,processing:!1,success:!0,error:void 0,countRemoved:t}}}),[rl.a.BULK_REMOVE_FAILURE]:(e,{payload:t})=>al()(e,{bulkRemoveState:{$merge:{processing:!1,success:!1,error:t,countRemoved:0}}}),[rl.a.LOAD_FIELDS_REQUEST]:e=>{var t;return(null===(t=e.extractedFields)||void 0===t?void 0:t.error)?e:al()(e,{extractedFields:{$merge:{requestInProgress:!0}}})},[rl.a.LOAD_FIELDS_SUCCESS]:(e,{payload:t})=>al()(e,{extractedFields:{$merge:{requestInProgress:!1}},fields:{$merge:{data:t.data}}}),[rl.a.LOAD_FIELDS_FAILURE]:e=>al()(e,{extractedFields:{$merge:{requestInProgress:!1}}}),[rl.a.EXTRACT_FIELDS_REQUEST]:e=>al()(e,{extractedFields:{$merge:{requestInProgress:!0,error:void 0}}}),[rl.a.EXTRACT_FIELDS_SUCCESS]:(e,{payload:t})=>{t.selectedFieldNames=t.selectedFieldNames.map((e=>e.toLowerCase()));const i=_o(e.extractedFields&&e.extractedFields.extractedFieldNames),r=_o(e.extractedFields&&e.extractedFields.selectedExtractedFieldNames),n=_o(t.selectedFieldNames),a=[];return t.fieldNames.forEach((e=>{const t=e.toLowerCase();(!i.has(t)&&n.has(t)||r.has(t))&&a.push(t)})),al()(e,{extractedFields:{$merge:{requestInProgress:!1,extractedFieldNames:t.fieldNames,selectedExtractedFieldNames:a}}})},[rl.a.EXTRACT_FIELDS_FAILURE]:(e,{payload:t})=>al()(e,{extractedFields:{$merge:{requestInProgress:!1,extractedFieldNames:void 0,selectedExtractedFieldNames:[],error:t}}}),[rl.a.RESET_EXTRACTED_FIELDS]:e=>al()(e,{extractedFields:{$merge:{requestInProgress:!1,extractedFieldNames:void 0,selectedExtractedFieldNames:[],error:void 0}}}),[rl.a.SET_SELECTED_FIELD]:(e,{payload:t})=>{const i=_.clone(e.extractedFields&&e.extractedFields.selectedExtractedFieldNames||[]),r=e.extractedFields&&e.extractedFields.extractedFieldNames||[],n=i.indexOf(t.name);return t.selected&&-1===n?i.push(t.name):!t.selected&&n>-1&&i.splice(n,1),al()(e,{extractedFields:{$merge:{selectedExtractedFieldNames:_.sortBy(i,(e=>r.indexOf(e)))}}})},[rl.a.SELECT_ALL_FIELDS]:e=>al()(e,{extractedFields:{$merge:{selectedExtractedFieldNames:_.clone(e.extractedFields&&e.extractedFields.extractedFieldNames||[])}}}),[rl.a.CLEAR_ALL_FIELDS]:e=>al()(e,{extractedFields:{$merge:{selectedExtractedFieldNames:[]}}}),[rl.a.SET_TYPE]:(e,{payload:t})=>al()(e,{$merge:{appliedAt:t.appliedAt}}),[rl.a.SET_SIDEBAR_SUBMIT_STATE]:(e,{payload:t})=>al()(e,{isSidebarSubmitEnabled:{$set:t}}),[rl.a.SET_BULK_REMOVE_DIALOG_STATE]:(e,{payload:t})=>al()(e,{bulkRemoveState:{$merge:t}}),[rl.a.LOAD_QUOTA_SUCCESS]:(e,{response:t})=>{const{quota:i,remaining:r}=t;return al()(e,{usageQuota:{$set:{total:i,used:i-r}}})},[Xn.MEGA_ENTITIES_ACTIONS.ENTITIES_PARTIALLY_LOADED]:(e,{payload:{entities:t,result:i}})=>{var r;const n=(0,re.get)(i,[0],""),a=(0,re.get)(t,[f.ENTITY_NAME,n]);if((null==a?void 0:a.appliedAt)===f.FieldsExtractionRuleType.Ingest)return al()(e,{createdIngestRule:{$set:a}});const s=null!==(r=(0,re.get)(t,[f.ENTITY_NAME]))&&void 0!==r?r:{},o=Object.keys(s).find((e=>(0,Bs.D6)(s[e])));return o?al()(e,{defaultJSONParsingRule:{$set:s[o]}}):e},[Xn.MEGA_ENTITIES_ACTIONS.ENTITIES_LOADED]:(e,{payload:{entities:t}})=>{const i=(0,re.get)(t,[f.ENTITY_NAME]);if(!i)return e;const r=Object.keys(i).find((e=>(0,Bs.D6)(i[e])));return r?al()(e,{defaultJSONParsingRule:{$set:i[r]}}):e},[Xn.MEGA_ENTITY_ACTIONS.ENTITY_UPDATED]:(e,{payload:{id:t,type:i,newEntityAttrs:r}})=>{var n;return i!==f.ENTITY_NAME?e:e.appliedAt===f.FieldsExtractionRuleType.Ingest?al()(e,{editedIngestRule:{$set:r}}):(null===(n=e.defaultJSONParsingRule)||void 0===n?void 0:n.id)===t?al()(e,{defaultJSONParsingRule:{$merge:r}}):e}};i(45179);(()=>{const e=Xn.Template1Container.getReducersAndInitState(f.ENTITY_NAME);ta.Z.register({name:f.SLICE_NAME,initialState:Object.assign(Object.assign({},e.initialState),sl),actionHandlers:Object.assign(Object.assign({},e.reducers),ol)})})();var ll=i(89148),cl=i.n(ll);const dl=e=>{const{panelData:{userMode:t,entityData:{name:i}={name:""}}}=e;let r="";r=t===f.SIDEBAR_MODES.VIEW?i:t===f.SIDEBAR_MODES.EDIT?Ge.j.get("fieldsExtractionRules.editHeaderPanel"):Ge.j.get("fieldsExtractionRules.createHeaderPanel");const{elemRef:n,isOverflowing:a}=function(e){const t=(0,T.useRef)(null),[i,r]=(0,T.useState)(!1);return(0,T.useEffect)((()=>{const e=t.current,n=e?e.clientWidth:0,a=(e?e.scrollWidth:0)>n;a!==i&&r(a)}),[t,e,i]),{elemRef:t,isOverflowing:i}}(r),s=T.createElement(qt.Text,{variant:"page",className:cl().resetTitle},T.createElement("div",{ref:n,className:cl().viewHeader},r));return a?T.createElement(qt.Tooltip,{title:r,placement:"left",multiline:!0},s):s},ul={setBulkRemoveDialogState:wo.Lj,bulkRemove:wo.h},pl=(0,Te.connect)(Co,ul)((({rule:e,onDrilldownSearch:t,bulkRemoveState:i,bulkRemove:r,setBulkRemoveDialogState:n})=>x().createElement("div",null,x().createElement(co,{rule:e,onSearchClick:e=>{const i=class{static create(e){const t=new Ks;return t.setQueryString(e),t.setExecuteSearch(!0),t}}.create(e);t(i)},setBulkRemoveDialogState:n,bulkRemove:r})))),hl={extractFields:wo.aq,resetExtractedFields:wo.HK,setSidebarSubmitState:wo.ZX,setBulkRemoveDialogState:wo.Lj,bulkRemove:wo.h},ml=(0,Te.connect)(xo,hl)(ko),gl=e=>{const{panelData:{userMode:t,entityData:i,customData:{onDrilldownSearch:r,isDefaultRuleEnabled:n,initialEntityData:a}}}=e;switch(t){case f.SIDEBAR_MODES.VIEW:return T.createElement(pl,{rule:i,onDrilldownSearch:r});case f.SIDEBAR_MODES.ADD:return T.createElement(ml,{rule:i,initialEntityData:a,userMode:f.SIDEBAR_MODES.ADD,onFormChange:e.panelActions.onFormChange,isDefaultRuleEnabled:n});case f.SIDEBAR_MODES.EDIT:return T.createElement(ml,{rule:i,initialEntityData:a,userMode:f.SIDEBAR_MODES.EDIT,onFormChange:e.panelActions.onFormChange,isDefaultRuleEnabled:n});default:return T.createElement(T.Fragment,null)}};var yl=i(6472),vl=i.n(yl);const fl=({text:e})=>e?T.createElement(qt.Text,{noWrap:!1,variant:"text",className:vl().textRow},e):null,_l=({isOpen:e,dialogData:{contextDescription:t,title:i,warningText:r,errorMessages:n=[],feedbackButtonState:a,feedbackButtonText:s},dialogMethods:o})=>{const l=e=>{e?o.confirm():o.closeDialog()},c=a===f.FEEDBACK_BUTTON_STATE.PROCESSING,d=n.length>0?n[0]:"";return T.createElement(qt.Dialog,{onClose:()=>l(!1),open:e,disableBackdropClick:c,dialogSize:qt.DialogSizes.Regular},T.createElement(qt.Dialog.Title,{titleTooltip:!0,className:vl().resetTitle},i),T.createElement(qt.Dialog.Content,null,d&&T.createElement(qt.InlineNotification,{text:n,status:"error",multiline:!0,className:vl().errorNotification}),T.createElement(fl,{text:t}),T.createElement(fl,{text:r})),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",disabled:c,onClick:()=>l(!1)},Ge.j.get("fieldsExtractionRules.cancelButtonText")),T.createElement(qt.FeedbackButton,{feedbackState:null!=a?a:"default",feedbackText:{default:s},color:"primary",onClick:()=>l(!0),disabled:c})))},Sl=[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT,Yn.G5.UNLOCK_USER,Yn.G5.ACTIVATE,Yn.G5.DEACTIVATE,Yn.G5.RESET_PASSWORD,Yn.G5.CHANGE_EMAIL,Yn.G5.DISABLE_TWO_STEP_VERIFICATION,Xn.TEMPLATE1_ACTIONS_NAMES.DELETE],bl=()=>({[Yn.G5.UNLOCK_USER]:{id:Yn.G5.UNLOCK_USER,show:!0,icon:"blank",label:"users.actions.unlock",events:{onClick:Yn.fb.UNLOCK_USER}},[Yn.G5.ACTIVATE]:{id:Yn.G5.ACTIVATE,show:!0,icon:"blank",label:"users.actions.activate",events:{onClick:Yn.fb.ACTIVATE}},[Yn.G5.DEACTIVATE]:{id:Yn.G5.DEACTIVATE,show:!0,icon:"blank",label:"users.actions.deactivate",events:{onClick:Yn.fb.DEACTIVATE}},[Yn.G5.RESET_PASSWORD]:{id:Yn.G5.RESET_PASSWORD,show:!0,icon:"refresh",label:"users.actions.resetPassword",events:{onClick:Yn.fb.RESET_PASSWORD}},[Yn.G5.CHANGE_EMAIL]:{id:Yn.G5.CHANGE_EMAIL,show:!0,icon:"blank",label:"users.actions.changeEmail",events:{onClick:Yn.fb.CHANGE_EMAIL}},[Yn.G5.DISABLE_TWO_STEP_VERIFICATION]:{id:Yn.G5.DISABLE_TWO_STEP_VERIFICATION,show:!0,icon:"blank",label:"users.actions.disableTwoStepVerification",events:{onClick:Yn.fb.DISABLE_TWO_STEP_VERIFICATION}}}),El={id:"megauser",title:"Users and Roles",route:"app.megauser",defaultActiveTab:"users",tabs:[{id:"users",title:"usersAndRoles.users",privilege:"UsersTabAccess",helpId:1006,tabContent:{component:Yn.FH.USERS_TAB_CONTENT_CONTAINER,componentProps:{templateSidebarProps:{headerComponent:Yn.FH.USERS_SIDEBAR_HEADER_COMPONENT,customComponent:Yn.FH.USERS_SIDEBAR_CUSTOM_COMPONENT,customActionsMap:bl()},templateTableProps:{gridOptions:{paginationPageSize:20},templateSearchProps:{placeholder:"usersAndRoles.searchUsers"},searchTableActionProps:{visible:!0,addButtonText:"usersAndRoles.addUserButtonText"},customActionsMap:bl()},endpoint:Yn.rV.USERS,entityName:Yn.Se.USERS,order:Sl,actionMenuProps:{menuStyle:Xn.ActionMenuStyle.DENSE},activationOverlay:!0,theme:Xn.THEMES.BRAND_LIGHT}}},{id:"roles",title:"usersAndRoles.roles",privilege:"RolesTabAccess",helpId:5234,tabContent:{component:Yn.FH.ROLES_TAB_CONTENT_CONTAINER,componentProps:{templateSidebarProps:{headerComponent:Yn.FH.ROLES_SIDEBAR_HEADER_COMPONENT,customComponent:Yn.FH.ROLES_SIDEBAR_CUSTOM_COMPONENT,customActionsMap:{}},templateTableProps:{gridOptions:{paginationPageSize:20},templateSearchProps:{placeholder:"usersAndRoles.searchRoles"},searchTableActionProps:{visible:!0,addButtonText:"usersAndRoles.addRoleButtonText"}},endpoint:Yn.rV.ROLES,entityName:Yn.Se.ROLES,activationOverlay:!0,deleteTypeName:"roles.deleteDialog.typeName",theme:Xn.THEMES.BRAND_LIGHT}}}]};class Tl extends T.Component{constructor(){super(...arguments),this.getAllowedTabIds=()=>(this.props.config.tabs||[]).reduce(((e,t)=>((void 0===t.privilege||Gr.currentUserHelper.hasPrivilege(t.privilege))&&e.push(t.id),e)),[])}render(){const{config:e,selectedTab:t}=this.props,i=(0,Xn.GetMegaWrapperContainer)();return T.createElement(i,Object.assign({},e,{selectedTab:t,allowedTabIds:this.getAllowedTabIds()}))}}s.module("sumoApp.usersAndRoles.containers",[]).component("usersAndRolesPage",(0,re.legacyReactToAngular)(Tl,["config","selectedTab"]));const xl=e=>{const t=e.addTitle?Ge.j.get(e.addTitle):"",{panelData:i}=e,r=e.panelData.entityData[i.entityNameField],n=`${Ge.j.get("usersAndRoles.edit")} ${r}`;switch(i.userMode){case Yn.vG.VIEW:return T.createElement(qt.Tooltip,{title:r,placement:"left",type:"default",multiline:!0},T.createElement(qt.Text,{variant:"title"},r));case Yn.vG.ADD:return T.createElement(qt.Text,{variant:"page"},t);case Yn.vG.EDIT:return T.createElement(qt.Tooltip,{title:n,placement:"left",type:"default",multiline:!0},T.createElement(qt.Text,{variant:"title"},n));default:return T.createElement(T.Fragment,null)}},Cl=e=>t=>T.createElement(xl,Object.assign({},t,{addTitle:e}));var Al=i(61415),wl=i.n(Al);const Il=({href:e,external:t=!1,classNames:i=[],children:r,dataSumoTest:n})=>{const a=t?"_blank":"_top";return T.createElement("a",{href:e,target:a,className:Wt()(wl().link,...i),"data-sumo-test":n},r)};var Rl=i(80602),Dl=i.n(Rl);const Ol=(e=[],t)=>e.map((e=>({value:e,label:t[e].name})));class Nl extends T.PureComponent{constructor(e){super(e),this.onAutoCompleteChange=e=>{this.setState({selectedRoles:e})},this.onChange=e=>{e.componentType===R.IFormFieldComponentTypes.AUTOCOMPLETE&&this.onAutoCompleteChange(e.value)},this.renderFn=e=>{const{errors:t}=e,i=this.getFormConfig();return T.createElement("div",{"data-sumo-test":"modifyUserFormContainer",className:Wt()(Dl().modifyUserFormContainer,"modify-user-form-container-overrides")},(0,R.renderFieldRows)({rows:i,formProps:e,onChange:this.onChange,touchFieldsOnBlur:!0}))},this.onUserFormValidation=(e,t,i)=>{if(!e){const e=(t.selectedRoles||[]).map((e=>e.value)),{data:r={}}=this.props,n=r.status&&r.status.isActive,a={values:{id:t.id||"",firstName:t.firstName,lastName:t.lastName,email:t.email,roleIds:e,isActive:n},isSubmittable:0===Object.keys(i).length,isSubmitting:!1};this.props.onChange(a)}};const{data:t={},rolesData:i}=this.props;this.rolesItems=(e=>Object.values(e).map((({id:e,name:t})=>({value:e,label:t}))))(i),this.state={selectedRoles:Ol(t.roleIds,i)};const r={type:"required",message:Ge.j.get("users.modifyUserFieldRequired")};this.validationRules={firstName:[Object.assign({},r)],lastName:[Object.assign({},r)],email:[Object.assign({},r),{type:"email",message:Ge.j.get("users.modifyUserInvalidEmailFormat")}],selectedRoles:[{type:"custom",value:e=>e.length?null:Ge.j.get("users.modifyUserFieldRequired")}]}}static getDerivedStateFromProps(e){const{data:t={},rolesData:i}=e;return{selectedRoles:Ol(t.roleIds,i)}}getFormConfig(){const{data:e}=this.props,t=!(!Object.keys(e).length||!e.hasOwnProperty("status"));return[[{name:"firstName",label:Ge.j.get("users.modifyUserFirstName"),optional:!1,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD,inputProps:{autoFocus:!0,maxLength:Xn.MAX_LENGTH.NAME,tabIndex:"1"},className:Dl().textFieldClass},{name:"lastName",label:Ge.j.get("users.modifyUserLastName"),optional:!1,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD,inputProps:{maxLength:Xn.MAX_LENGTH.NAME,tabIndex:"1"},className:Dl().textFieldClass}],[{name:"email",label:Ge.j.get("users.modifyUserEmail"),optional:!1,multiline:!0,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD,inputProps:{maxLength:Xn.MAX_LENGTH.DESCRIPTION,tabIndex:"1"},disabled:t,className:Dl().textFieldClass}],[{name:"selectedRoles",label:Ge.j.get("users.modifyUserAssignedRoles"),optional:!1,componentType:R.IFormFieldComponentTypes.AUTOCOMPLETE,items:this.rolesItems,inputProps:{tabIndex:1},defaultValue:[],onChangeFnName:R.OnChangeFn.AUTOCOMPLETE,className:Dl().rolesFieldClass}]]}getFormInitialValues(e){const{selectedRoles:t}=this.state;return{id:e.id||"",firstName:e.firstName,lastName:e.lastName,email:e.email,selectedRoles:t}}render(){const{data:e={}}=this.props,t=this.getFormInitialValues(this.props.data);return T.createElement("div",{className:Dl().modifyUserWrapper},T.createElement(qt.Form,{render:this.renderFn,validationRules:this.validationRules,onValidation:(0,uo.Z)(this.onUserFormValidation,200),validateOnBlur:!1,initialValues:t,onSubmit:po.Z,containerProps:{autoComplete:"off"}}),(e=>{if(!Object.keys(e).length||!e.hasOwnProperty("status"))return null;const t={status:e.status,mfa:e.mfa},i={dataSumoTest:"modify-user-status-container",items:[Ha(t)]};return T.createElement(Xn.DetailsCard,Object.assign({},i))})(e))}}var Ml=i(87098),kl=i.n(Ml);const Ll=()=>x().createElement("div",{className:kl().footerWrapper},x().createElement(Il,{href:Yn.jb,external:!0,dataSumoTest:"privacy-policy"},x().createElement(qt.Icon,{className:kl().lockIcon,name:"lock",size:"small"}),x().createElement("span",{className:kl().privacyPolicy},Ge.j.get("usersAndRoles.privacyPolicy")))),Pl=e=>{const{panelData:t,panelActions:i}=e,{userMode:r,entityData:n,customData:a}=t,{rolesData:s}=a,{onFormChange:o}=i,l=es.getCapabilities(),c=es.getCapabilityGroups();switch(r){case Yn.vG.VIEW:return T.createElement("div",{className:Fa().detailsView,"data-sumo-test":"user-details"},T.createElement(Xn.DetailsCard,Object.assign({},Wa({entityData:n,rolesData:s,capabilities:l,capabilityGroups:c}))),T.createElement(Ll,null));case Yn.vG.ADD:case Yn.vG.EDIT:return T.createElement(T.Fragment,null,T.createElement(Nl,{data:n,onChange:o,rolesData:s}),T.createElement(Ll,null));default:return T.createElement(T.Fragment,null)}};var Fl=i(12813),Ul=i.n(Fl);const Vl=(0,i(32722).Z)({paper:{overflow:"initial"}})(qt.Dialog);class Bl extends T.PureComponent{constructor(){super(...arguments),this.state={selectedUser:[],notificationCollapsed:!1},this.onSelectedItemsChange=e=>{this.setState((()=>({selectedUser:e})))},this.handleUserSubmit=()=>{this.props.dialogMethods.onSubmit(this.props.dialogData.targetUser,this.state.selectedUser)},this.collapseNotification=()=>{this.setState((()=>({notificationCollapsed:!0})))},this.selectedItemComparator=(e,t)=>t.some((t=>t.value===e.value))}render(){const e=Gr.currentUserHelper.hasFeatureFlag("UITransferScheduledView"),{isOpen:t,dialogData:i,dialogMethods:r}=this.props,{users:n=[],targetUser:a={},feedbackButtonState:s,feedbackButtonText:o}=i,{notificationCollapsed:l,selectedUser:c}=this.state,d=n.reduce(((e,t)=>(t.email===a.email||e.push({label:`${t.firstName} ${t.lastName}`,value:t.id,assistiveText:t.email}),e)),[]),u=a.name,p=s===Xn.FEEDBACK_BUTTON_STATE.PROCESSING,h=Ge.j.get("users.deleteUser",u);return T.createElement(Vl,{disableBackdropClick:p,open:t,onClose:r.closeDialog,"data-sumo-test":"delete-user-dialog",dialogSize:qt.DialogSizes.Regular},T.createElement(qt.Dialog.Title,{titleTooltip:!0,className:Ul().resetTitle},h),T.createElement(qt.Dialog.Content,null,l&&T.createElement(qt.InlineNotification,{className:Ul().fullWidth,status:"error",text:Ge.j.get("users.deleteUserTransferError"),isCollapsed:l,multiline:!0,onClose:this.collapseNotification}),T.createElement("div",{className:Ul().descriptionWrapper},T.createElement(qt.Text,{className:Ul().transferMessageTopMargin,noWrap:!1,variant:"text"},Ge.j.get("users.deleteUserTransferMessage",u)),e&&T.createElement(qt.Text,{className:Ul().transferTextTopMargin,variant:"textHeavy",noWrap:!1},Ge.j.get("users.deleteUserTransferTextHeader",{username:u})),T.createElement(qt.Text,{noWrap:!1,variant:"text"},e?Ge.j.get("users.deleteUserTransferTextNew",{username:u}):Ge.j.get("users.deleteUserTransferText",{username:u})),e&&T.createElement(T.Fragment,null,T.createElement(qt.Text,{noWrap:!1,className:Ul().transferTextTopMargin,variant:"textHeavy"},Ge.j.get("users.deleteUserTransferSchViewDashboardHeader")),T.createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get("users.deleteUserTransferSchViewDashboardText",{username:u})))),T.createElement(qt.AutoComplete,{className:Ul().autocomplete,items:d,selectedItems:c,onSelectedItemsChange:this.onSelectedItemsChange,selectedItemComparator:this.selectedItemComparator,placeholder:Ge.j.get("users.transferContentTo")})),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:r.closeDialog,disabled:p,buttonProps:{"data-sumo-test":"dialog-cancel-button"}},Ge.j.get("usersAndRoles.buttonText.cancel")),T.createElement(qt.FeedbackButton,{feedbackState:s||"default",feedbackText:{default:o||Ge.j.get("usersAndRoles.buttonText.delete")},color:"destructive",onClick:this.handleUserSubmit,buttonProps:{"data-sumo-test":"dialog-delete-button"}})))}}const $l=e=>{const{isOpen:t,dialogData:i,dialogMethods:r}=e,{targetUser:{name:n="",roleNames:a=[]},transferUserName:s,transferUserRoles:o,errorMessages:l=[]}=i,c=Gr.currentUserHelper.hasFeatureFlag("UITransferScheduledView");return T.createElement(qt.DestructiveDialog,{open:t,matchValue:Ge.j.get("users.delete"),destructiveMessage:c&&s?"":Ge.j.get("users.destructiveMessage"),title:Ge.j.get("users.deleteUserTitle",n),actionButtonText:Ge.j.get("users.destructiveDeleteActionButtonText"),errorMessage:l.join(","),onSubmit:r.onSubmit,onCancel:r.closeDialog,"data-sumo-test":"user-destructive-dialog",dialogSize:qt.DialogSizes.Regular},c&&s?T.createElement(T.Fragment,null,T.createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get("users.destructiveDeleteContent.warningTextSchTransfer",{deletedUserName:n,deletedUserRole:a.join(", "),transferUserName:s,transferUserRole:o.join(", ")})),T.createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get("users.destructiveDeleteContent.typeConfirm"))):T.createElement(T.Fragment,null,T.createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get("users.destructiveDeleteContent.allOf"),T.createElement(qt.Text,{noWrap:!1,className:Ul().inline,variant:"textHeavy"},n),Ge.j.get("users.destructiveDeleteContent.warningText")),T.createElement(qt.Text,{noWrap:!1,variant:"text"},T.createElement("br",null),Ge.j.get("users.destructiveDeleteContent.schedViewWarningMessage"))))};var Hl=i(52316),Wl=i(96114),ql=i.n(Wl),jl=i(19929),Ql=i.n(jl),zl=i(8238),Gl=i.n(zl);const Kl=({headerComponent:e,dense:t=!1,isExpanded:i,onClick:r=po.Z,children:n})=>{const a=void 0!==i,[s,o]=(0,T.useState)(!1),l=a?i:s,c=l?"caret-down":"caret-right";return x().createElement("div",null,x().createElement("div",{className:Wt()(Gl().expansionPanelSummary,t&&Gl().expansionPanelSummaryDense),onClick:()=>{a||o((e=>!e)),r()}},x().createElement(qt.Icon,{name:c,size:"large",className:Gl().expansionPanelSummaryIcon}),e),l&&x().createElement("div",{className:Wt()(Gl().expansionPanelContent,t&&Gl().expansionPanelContentDense)},n))};var Yl,Zl;!function(e){e.None="none",e.View="view",e.Manage="manage",e.Admin="admin"}(Yl||(Yl={})),function(e){e.View="monitorsV2.viewMonitorsV2",e.Manage="monitorsV2.manageMonitorsV2",e.Admin="monitorsV2.adminMonitorsV2"}(Zl||(Zl={}));const Xl={[Yl.None]:[],[Yl.View]:[Zl.View],[Yl.Manage]:[Zl.View,Zl.Manage],[Yl.Admin]:[Zl.View,Zl.Manage,Zl.Admin]},Jl={[Zl.View]:0,[Zl.Manage]:1,[Zl.Admin]:2},ec={[Zl.View]:Yl.View,[Zl.Manage]:Yl.Manage,[Zl.Admin]:Yl.Admin},tc=e=>{const t=Object.values(Zl).filter((t=>e[t]));if(0===t.length)return Yl.None;{const e=t.reduce(((e,t)=>Jl[t]>Jl[e]?t:e));return ec[e]}},ic=e=>Object.keys(e).reduce(((t,i)=>(e[i].dependsOn.forEach((r=>{t[r]||(t[r]=[]),t[r].push(_a(i,e))})),t)),{}),rc=(e,t,i)=>{var r;const n=e[t];return null!==(r=null==n?void 0:n.some((e=>i[e])))&&void 0!==r&&r},nc=(e,t,i,r)=>(n,a)=>{const{name:s,value:o}=a,l=()=>{const i=Object.assign(Object.assign({},n.values),{[s]:o}),a=Object.assign({[s]:o},ba(e,t,i));n.setValues(Object.assign(Object.assign({},n.values),a)),r()},c=t[e];c.message&&o?(n.setValues(Object.assign(Object.assign({},n.values),{[s]:!o})),i(Xn.MEGA_SHARED_COMPONENTS.CONFIRMATION_DIALOG,{title:Ge.j.get("roles.permissionChangeConfirmationDialog.title"),message:c.message,okButtonText:Ge.j.get("roles.permissionChangeConfirmationDialog.okButtonText"),cancelButtonText:Ge.j.get("roles.permissionChangeConfirmationDialog.cancelButtonText")},{confirm:l})):l()},ac=({formProps:e,mainCheckboxProps:t,nestedListProps:i,onChange:r})=>{const[n,a]=(0,T.useState)({}),[s,o]=(0,T.useState)({checkedStateMap:{},intermediateStateMap:{}});(0,T.useEffect)((()=>{const t=Object.keys(e.values).filter((e=>e.includes(".")&&Object.keys(i.data).includes(e.split(".")[1]))).reduce(((t,r)=>(0,qt.getUpdatedStateMaps)(r.split(".")[1],e.values[r],t,i.data)),{checkedStateMap:{},intermediateStateMap:{}});o(t)}),[e.values,i.data]);const l=e=>{a((t=>Object.assign(Object.assign({},t),{[e]:!n[e]})))};return x().createElement(x().Fragment,null,x().createElement("div",{className:Ql().capabilityCheckbox},x().createElement(qt.Checkbox,Object.assign({},t))),e.values[t.name]&&x().createElement(qt.NestedList,Object.assign({openListMap:n,onCaretClick:l,itemRenderer:(t,n)=>{const a=`${n.parent}.${n.id}`;return x().createElement(x().Fragment,null,x().createElement(qt.Checkbox,{label:n.isGroup?void 0:n.label,checked:n.isGroup?s.checkedStateMap[n.id]||!1:e.values[a]||!1,indeterminate:n.isGroup&&s.intermediateStateMap[n.id],onChange:t=>{((t,n)=>{const a=(0,qt.getUpdatedStateMaps)(t.id,n,s,i.data);if(t.isGroup&&t.children){const i=t.children.reduce(((e,i)=>(e[`${t.id}.${i}`]=n,e)),{});e.setValues(Object.assign(Object.assign({},e.values),i))}if(!t.isGroup){const i=`${t.parent}.${t.id}`;r(e,{name:i,value:n})}o(a)})(n,t.target.checked)}}),t,n.isGroup&&x().createElement(qt.List.Text,{onClick:()=>l(n.id)},n.label))},styleProps:{listItem:Ql().nestedListRow},disableActiveStyles:!0},i)))};var sc,oc=i(18357),lc=i(52238);!function(e){e.allIndex="allIndex",e.allowSomeIndex="allowSomeIndex",e.denySomeIndex="denySomeIndex"}(sc||(sc={}));const cc=e=>{const{indexList:t}=e,[i,r]=x().useState(sc.allIndex),[n,a]=x().useState([]),[s,o]=x().useState([]),[l,c]=x().useState(null),d=e=>{r(e.target.value)},u=e=>{c(e.currentTarget)},p=x().useMemo((()=>t.map((e=>({label:e.name,value:e.name,chipProps:{iconButtonProps:{icon:qt.IconName.Filter,size:"small",onClick:u}}})))),[t]);return x().createElement("div",{className:Ql().indexAccessContainer},x().createElement(qt.Text,{variant:"textHeavy",className:Ql().fgpCapabilitiesTitle},Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.title")),x().createElement(qt.AssistiveText,null,Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.subtitle")),x().createElement("div",{className:Ql().radioButtonsContainer},x().createElement("div",{className:Ql().radioButtonContainer},x().createElement(qt.Radio,{label:Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.allIndexes"),checked:i===sc.allIndex,value:sc.allIndex,onChange:d})),x().createElement("div",{className:Ql().radioButtonContainer},x().createElement(qt.Radio,{label:Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.fewIndexes"),checked:i===sc.allowSomeIndex,value:sc.allowSomeIndex,onChange:d}),x().createElement(oc.Z,{in:i===sc.allowSomeIndex},x().createElement("div",{className:Ql().autocompleteContainer},x().createElement(qt.AutoComplete,{label:Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.inputLabel"),items:p,selectedItems:n,inputLabelProps:{shrink:!0},onSelectedItemsChange:e=>{a(e)},multiselect:!0})))),x().createElement("div",{className:Ql().radioButtonContainer},x().createElement(qt.Radio,{label:Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.denyIndexes"),checked:i===sc.denySomeIndex,value:sc.denySomeIndex,onChange:d}),x().createElement(oc.Z,{in:i===sc.denySomeIndex},x().createElement("div",{className:Ql().autocompleteContainer},x().createElement(qt.AutoComplete,{label:Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.inputLabel"),items:p,selectedItems:s,inputLabelProps:{shrink:!0},onSelectedItemsChange:e=>{o(e)},multiselect:!0}))))),x().createElement(lc.Z,{open:Boolean(l),anchorEl:l},x().createElement("div",{className:Ql().popperContainer},x().createElement(qt.Text,{variant:"textHeavy",className:Ql().popperTitle},Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.filterFurther")),x().createElement(qt.CodeEditor,{language:"sumoql",value:"",onChange:(e,t,i)=>i,height:170,autoCursor:!1,options:{lineNumbers:!0}}),x().createElement("div",{className:Ql().popperButtonContainer},x().createElement(qt.Button,{onClick:()=>c(null),color:"primary",size:"small"},Ge.j.get("roles.addEditRole.fieldLabels.indexAccess.apply"))))))},dc=[{name:"yan_test",routingExpression:"",analyticsTier:"continuous",retentionPeriod:90,isCompliant:!1,newRetentionPeriod:null,retentionEffectiveAt:null,createdAt:"2014-01-20T20:53:48.057Z",createdBy:"FFFFFFFFFFFFFFFF",modifiedAt:"2021-09-06T13:19:04.533Z",modifiedBy:"FFFFFFFFFFFFFD66",id:"0000000000000118",totalBytes:0,isActive:!1,indexType:"Partition",dataForwardingId:null},{name:"BLM_Test_Apache",routingExpression:"",analyticsTier:"continuous",retentionPeriod:90,isCompliant:!1,newRetentionPeriod:null,retentionEffectiveAt:null,createdAt:"2014-02-07T23:29:32.611Z",createdBy:"FFFFFFFFFFFFFFFF",modifiedAt:"2021-09-06T13:19:10.171Z",modifiedBy:"FFFFFFFFFFFFFD66",id:"00000000000001CB",totalBytes:0,isActive:!1,indexType:"Partition",dataForwardingId:null},{name:"count",routingExpression:"",analyticsTier:"continuous",retentionPeriod:90,isCompliant:!1,newRetentionPeriod:null,retentionEffectiveAt:null,createdAt:"2014-02-28T06:29:48.863Z",createdBy:"FFFFFFFFFFFFFFFF",modifiedAt:"2021-09-06T13:19:02.659Z",modifiedBy:"FFFFFFFFFFFFFD66",id:"00000000000002D0",totalBytes:0,isActive:!1,indexType:"Partition",dataForwardingId:null},{name:"sumologic_anomaly_events",routingExpression:"",analyticsTier:"continuous",retentionPeriod:90,isCompliant:!1,newRetentionPeriod:null,retentionEffectiveAt:null,createdAt:"2014-03-12T13:26:08.229Z",createdBy:"FFFFFFFFFFFFFFFF",modifiedAt:"2014-03-12T13:26:08.229Z",modifiedBy:"FFFFFFFFFFFFFFFF",id:"0000000000000461",totalBytes:0,isActive:!0,indexType:"AuditIndex",dataForwardingId:null},{name:"sumologic_volume",routingExpression:"",analyticsTier:"continuous",retentionPeriod:90,isCompliant:!1,newRetentionPeriod:null,retentionEffectiveAt:null,createdAt:"2014-03-14T04:35:17.404Z",createdBy:"FFFFFFFFFFFFFFFF",modifiedAt:"2014-03-14T04:35:17.404Z",modifiedBy:"FFFFFFFFFFFFFFFF",id:"00000000000004FB",totalBytes:71159237745,isActive:!0,indexType:"AuditIndex",dataForwardingId:null}];var uc=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function pc(e,t){const i=new Set(Object.values(t).filter((e=>e.parentId)).map((e=>e.parentId))),r=Object.values(e).filter((e=>t[e.group].parentId)),n=Object.values(e).filter((e=>i.has(e.group)&&null===t[e.group].parentId)),a=[...r,...n],s=new Set(a.map((e=>e.id))),o=(0,Hl.Z)(e,((e,t)=>!s.has(t))),l=[],c=Object.values(t).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:[]})),{});Object.values(t).forEach((e=>{var t;e.parentId&&(null===(t=c[e.parentId])||void 0===t||t.push(e.id))}));const d=qa(Object.keys(e),e);return n.forEach((i=>{const r={},n=c[i.group].map((e=>t[e]));n.forEach((t=>{r[t.id]={isGroup:!0,id:t.id,label:t.label,children:Object.values(e).filter((e=>e.group===t.id)).map((e=>e.id))}}));n.reduce(((t,i)=>[...t,...d[i.id].map((t=>e[t]))]),[]).forEach((e=>{r[e.id]={isGroup:!1,id:e.id,label:e.label,parent:e.group}}));const a=n.map((e=>e.id));l.push({data:r,rootIds:a,rootCapability:i})})),[o,l]}function hc(e,t=!1){return x().createElement(x().Fragment,null,Ge.j.get(`roles.capabilityLabelTooltipInfo.${e}`)?x().createElement(qt.Tooltip,{placement:"top",multiline:!0,title:x().createElement("div",{dangerouslySetInnerHTML:{__html:ql().sanitize(Ge.j.get(`roles.capabilityLabelTooltipInfo.${e}.tooltipText`))}}),className:Ql().capabilityToolTip},x().createElement(qt.Icon,{name:qt.IconName.QuestionCircle,className:t?Ql().oldUiTooltipIcon:Ql().tooltipIcon,size:"medium"})):null)}function mc(e,t){const i=ic(e),[r,n]=pc(e,t),a=Gr.currentUserHelper.hasFeatureFlag("UICSECapabilitySubgroups")?qa(Object.keys(r),r):qa(Object.keys(e),e),s=Object.keys(a).map((r=>{const n=a[r];return[{name:r,label:t[r].label,componentType:R.IFormFieldComponentTypes.INPUT_LIST,onChangeFnName:R.OnChangeFn.INPUT_LIST,listItems:n.map((t=>{return{name:t,label:(r=e[t].id,n=e[t].label,x().createElement("div",{className:Ql().capabilityCheckboxLabel},x().createElement("span",null,n),hc(r,!0))),componentType:R.IFormFieldComponentTypes.CHECKBOX,onChangeFnName:R.OnChangeFn.CHECKBOX,conditionals:{disabled:{rule:"OR",check:i[t]||[],successValue:!0,failureValue:!1}}};var r,n}))}]}));return Gr.currentUserHelper.hasFeatureFlag("UICSECapabilitySubgroups")&&n.forEach((r=>{const{data:n,rootIds:a,rootCapability:o}=r;s.push([{componentType:R.IFormFieldComponentTypes.NESTED_INPUT_LIST,onChangeFnName:R.OnChangeFn.NESTED_INPUT_LIST,name:t[o.group].id,label:t[o.group].label,dependencyMap:i,mainCheckboxInfo:{componentType:R.IFormFieldComponentTypes.CHECKBOX,onChangeFnName:R.OnChangeFn.CHECKBOX,name:_a(o.id,e),label:o.label,conditionals:{disabled:{rule:"OR",check:i[o.id]||!1,successValue:!0,failureValue:!1}}},nestedListProps:{data:n,rootIds:a,collapse:!0,border:!0}}])})),s}const gc=e=>({name:[{type:"required",message:Ge.j.get("roles.fieldRequiredError")}]});function yc(e,t){const i=function(e,t){return e.filter((e=>!!e)).reduce(((e,i)=>t[i]?Object.assign(e,{[_a(i,t)]:!0}):e),{})}(e.capabilities||[],t);return Object.assign({id:e.id||"",name:e.name||"",description:e.description||"",searchFilter:e.searchFilter||e.filterPredicate||""},i)}const vc=e=>{const t=(t,i)=>{i.fieldConfig.onChangeFnName===R.OnChangeFn.RADIO_BTN_GROUP?t.setValues(Object.assign(Object.assign({},t.values),{[i.name]:i.value})):i.fieldConfig.onChangeFnName===R.OnChangeFn.CHECKBOX&&((t,i)=>{const r=i.name.split(".")[1],n=e.capabilities[r],a=()=>{const n=Object.assign(Object.assign({},t.values),{[i.name]:i.value}),a=Object.assign({[i.name]:i.value},ba(r,e.capabilities,n));t.setValues(Object.assign(Object.assign({},t.values),a)),e.closeSharedDialog()};n.message&&i.value?(t.setValues(Object.assign(Object.assign({},t.values),{[i.name]:!i.value})),e.openSharedDialog(Xn.MEGA_SHARED_COMPONENTS.CONFIRMATION_DIALOG,{title:Ge.j.get("roles.permissionChangeConfirmationDialog.title"),message:n.message,okButtonText:Ge.j.get("roles.permissionChangeConfirmationDialog.okButtonText"),cancelButtonText:Ge.j.get("roles.permissionChangeConfirmationDialog.cancelButtonText")},{confirm:a})):a()})(t,i)},i=t=>{const{capabilities:i,capabilityGroups:r}=e,{values:n}=t,a=ic(i),[s,o]=pc(i,r),l=Gr.currentUserHelper.hasFeatureFlag("UICSECapabilitySubgroups")?s:i,c=qa(Object.keys(l),l),d=Object.keys(c).map((s=>{const o=c[s].filter((e=>!Object.values(Zl).includes(_a(e,l)))).map((r=>{const s=_a(r,l),o=i[r].id,c=nc(r,i,e.openSharedDialog,e.closeSharedDialog);return x().createElement("div",{className:Ql().capabilityCheckbox},x().createElement(qt.Checkbox,{name:s,label:i[r].label,checked:n[s]||!1,onChange:e=>{const i={name:s,value:!n[s]};c(t,i)},disabled:rc(a,r,n)}),hc(o,!1))}));return x().createElement(Kl,{headerComponent:x().createElement(x().Fragment,null,r[s].label),dense:!0},x().createElement("div",{className:Ql().monitorSection},"monitorsV2"===s&&(()=>{const e=[{value:Yl.None,label:Ge.j.get("roles.monitorsCapabilitySelect.none.label"),assistiveText:Ge.j.get("roles.monitorsCapabilitySelect.none.assistiveText")},{value:Yl.View,label:Ge.j.get("roles.monitorsCapabilitySelect.view.label"),assistiveText:Ge.j.get("roles.monitorsCapabilitySelect.view.assistiveText")},{value:Yl.Manage,label:Ge.j.get("roles.monitorsCapabilitySelect.manage.label"),assistiveText:Ge.j.get("roles.monitorsCapabilitySelect.manage.assistiveText")},{value:Yl.Admin,label:Ge.j.get("roles.monitorsCapabilitySelect.admin.label"),assistiveText:Ge.j.get("roles.monitorsCapabilitySelect.admin.assistiveText")}];return x().createElement("div",{className:Ql().monitorSelectContainer},x().createElement(qt.Select,{value:tc(n),label:Ge.j.get("roles.monitorsCapabilitySelect.label"),inline:!0,handleChange:e=>{const i=e.target.value;((e,t)=>{const i=Object.assign({},e.values);Object.values(Zl).forEach((e=>{delete i[e]})),Xl[t].forEach((e=>{i[e]=!0})),e.setValues(i)})(t,i)}},e.map((e=>x().createElement(qt.Select.Item,{key:e.value,value:e.value,assistiveText:e.assistiveText},e.label)))))})(),o.length>0&&x().createElement("div",null,o)))}));return Gr.currentUserHelper.hasFeatureFlag("UICSECapabilitySubgroups")&&o.forEach((n=>{const{data:s,rootIds:o,rootCapability:l}=n,c=_a(l.id,i),u=nc(l.id,i,e.openSharedDialog,e.closeSharedDialog),p=x().createElement(Kl,{headerComponent:x().createElement(x().Fragment,null,r[l.group].label),dense:!0},x().createElement(ac,{formProps:t,nestedListProps:{data:s,rootIds:o,collapse:!0},onChange:u,mainCheckboxProps:{label:l.label,name:c,checked:t.values[c]||!1,disabled:rc(a,l.id,t.values),onChange:()=>{const e={name:c,value:!t.values[c]};u(t,e)}}}));d.push(p)})),d};return x().createElement(qt.Form,{enableReinitialize:!0,render:r=>{const n=(a=e.capabilities,s=e.capabilityGroups,[{items:[[{name:"name",label:Ge.j.get("roles.addEditRole.fieldLabels.name"),optional:!1,inputProps:{autoFocus:!0,maxLength:Xn.MAX_LENGTH.NAME},componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD,className:Ql().nameTextField}],[{name:"description",label:Ge.j.get("roles.addEditRole.fieldLabels.description"),optional:!0,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,inputProps:{maxLength:Xn.MAX_LENGTH.DESCRIPTION},onChangeFnName:R.OnChangeFn.TEXTFIELD,className:Ql().descriptionTextField}]]},{label:Ge.j.get("roles.addEditRole.fieldLabels.searchFilter"),labelClass:Ql().searchFilterLabel,helpText:x().createElement(qt.Text,{className:Ql().searchFilterHelpText,noWrap:!1},Ge.j.get("roles.addEditRole.fieldLabels.searchFilterHelpText")),items:Gr.currentUserHelper.hasFeatureFlag("UISearchRbacIndexes")?[[{name:"searchFilter",label:Ge.j.get("roles.addEditRole.fieldLabels.searchFilter"),componentType:R.IFormFieldComponentTypes.CODE_EDITOR,defaultValue:"",onChangeFnName:R.OnChangeFn.CODE_EDITOR,options:{lineNumbers:!0,height:150,language:"sumoql",expansionPanelProps:{title:Ge.j.get("roles.addEditRole.fieldLabels.logDataFilter"),defaultState:!1,tooltip:Ge.j.get("roles.addEditRole.fieldLabels.logDataFilterTooltip")}}}],[{name:"newSearchFilter.logDataFilter",label:Ge.j.get("roles.addEditRole.fieldLabels.searchFilter"),componentType:R.IFormFieldComponentTypes.CODE_EDITOR,defaultValue:"",onChangeFnName:R.OnChangeFn.CODE_EDITOR,options:{lineNumbers:!0,height:150,language:"sumoql",expansionPanelProps:{title:Ge.j.get("roles.addEditRole.fieldLabels.auditDataFilter"),defaultState:!1,tooltip:Ge.j.get("roles.addEditRole.fieldLabels.auditDataFilterTooltip")}}}],[{name:"newSearchFilter.securityDataFilter",label:Ge.j.get("roles.addEditRole.fieldLabels.searchFilter"),componentType:R.IFormFieldComponentTypes.CODE_EDITOR,defaultValue:"",onChangeFnName:R.OnChangeFn.CODE_EDITOR,options:{lineNumbers:!0,height:150,language:"sumoql",expansionPanelProps:{title:Ge.j.get("roles.addEditRole.fieldLabels.securityDataFilter"),defaultState:!1,tooltip:Ge.j.get("roles.addEditRole.fieldLabels.securityDataFilterTooltip")}}}]]:[[{name:"searchFilter",label:Ge.j.get("roles.addEditRole.fieldLabels.searchFilter"),componentType:R.IFormFieldComponentTypes.CODE_EDITOR,defaultValue:"",onChangeFnName:R.OnChangeFn.CODE_EDITOR,options:{lineNumbers:!0,height:150,language:"sumoql"}}]]},...Gr.currentUserHelper.hasFeatureFlag("UICMFFineGrainedPermissions")?[]:[{label:Ge.j.get("roles.capabilityListTitle"),labelClass:Ql().capabilitiesLabel,helpText:x().createElement(La,{className:Ql().capabilitiesHelpText}),items:mc(a,s)}]]);var a,s;return x().createElement("div",{"data-sumo-test":"modifyRoleFormContainer"},(0,R.renderFormSections)({sections:n,formProps:r,onChange:e=>t(r,e),touchFieldsOnChange:!0}),Gr.currentUserHelper.hasFeatureFlag("UISearchRbacIndexes")&&x().createElement(x().Fragment,null,x().createElement(cc,{indexList:dc})),Gr.currentUserHelper.hasFeatureFlag("UICMFFineGrainedPermissions")&&x().createElement(x().Fragment,null,x().createElement("div",{className:Ql().capabilitiesTitleRow},x().createElement(qt.Text,{variant:"textHeavy",className:Ql().fgpCapabilitiesTitle},Ge.j.get("roles.capabilityListTitle")),x().createElement(qt.InteractiveTooltip,{placement:"right",multiline:!0,title:Ge.j.get("roles.capabilityInfoTooltip.desc"),bottomLinkProps:{linkTitle:Ge.j.get("roles.capabilityInfoTooltip.link"),linkType:"bottomTextLink",componentProps:{href:"https://help.sumologic.com/Manage/Users-and-Roles/Manage-Roles/01_Role-Based_Access_Control",external:!0}}},x().createElement(qt.Icon,{name:qt.IconName.QuestionCircle,size:"medium"}))),x().createElement("div",{className:Ql().fgpCapabilitiesExpansionPanels},x().createElement(qt.ThemeProvider,{theme:"brandLight"},i(r)))))},validationRules:gc,onValidation:function(t,i,r){if(!t){const t={values:function(e,t){const{id:i,name:r,description:n,searchFilter:a}=e,s=uc(e,["id","name","description","searchFilter"]),o=[];return Object.keys(s).forEach((e=>{(0,re.withIndex)(s)[e]&&o.push(e.split(".")[1])})),{id:i,name:r,description:n,searchFilter:a,filterPredicate:a,capabilities:o,users:t.users||[]}}(i,e.data),isSubmittable:!Object.keys(r).length,isSubmitting:!1};e.onChange(t)}},initialValues:yc(e.data,e.capabilities),onSubmit:po.Z,containerProps:{autoComplete:"off"}})};var fc=i(96072),_c=i.n(fc);const Sc=({entityData:e,panelActions:t,capabilities:i,capabilityGroups:r})=>T.createElement(T.Fragment,null,T.createElement(Xn.DetailsCard,Object.assign({},(({entityData:e})=>({items:[[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("roles.sidebarFieldLabels.name")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.name}]}],[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("roles.sidebarFieldLabels.description")},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.description||Ge.j.get("roles.sidebarFieldLabels.emptyDescriptionLabel"),classList:[e.description?"":Va().disabledText]}]}],[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_LABEL,label:Ge.j.get("roles.sidebarFieldLabels.searchFilter"),helpInfoIcon:{text:T.createElement("div",null,T.createElement("div",null,Ge.j.get("roles.searchFilterHelpText.first")),T.createElement("br",null),T.createElement("div",null,Ge.j.get("roles.searchFilterHelpText.second"))),iconName:Yn.tx.QUESTION_CIRCLE,enableThemedStyles:!0}},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:e.filterPredicate||Ge.j.get("roles.sidebarFieldLabels.emptySearchFilterLabel"),classList:[e.filterPredicate?Va().codeInput:Va().disabledText]}]}],[{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_BOX,classList:[Fa().usersLabelWrapper],items:[{type:Xn.DETAILS_CARD_RENDERER_TYPES.BOLD_FIELD_LABEL,classList:[Fa().viewBoldLabel],label:Ge.j.get("roles.sidebarFieldLabels.users",(e.users||[]).length)},{type:Xn.DETAILS_CARD_RENDERER_TYPES.FIELD_VALUE,label:Ge.j.get("roles.sidebarFieldLabels.usersDescription",(e.users||[]).length||Ge.j.get("roles.sidebarFieldLabels.noLabel")),classList:[Va().descriptionText]}]}]]}))({entityData:e}))),T.createElement("div",null,T.createElement(qt.TextButton,{className:_c().viewUserButton,"data-sumo-test":"view-users-button",onClick:i=>{const r=(0,re.withIndex)(t).openAssignedUsers;r&&r(i,e)}},Ge.j.get("roles.viewUsersButtonLabel"))),T.createElement(Xn.DetailsCard,{items:ja(e.capabilities,i,r,Ge.j.get("roles.sidebarFieldLabels.emptyCapabilityLabel"))})),bc=e=>{const{panelData:t,panelActions:i}=e,{userMode:r,entityData:n,customData:a}=t,{capabilities:s,capabilityGroups:o}=a,{onFormChange:l,openSharedDialog:c,closeSharedDialog:d}=i;switch(r){case Yn.vG.VIEW:return T.createElement("div",{className:Fa().detailsView,"data-sumo-test":"role-details"},T.createElement(Sc,{capabilities:s,capabilityGroups:o,entityData:n,panelActions:i}),T.createElement(Ll,null));case Yn.vG.ADD:case Yn.vG.EDIT:return T.createElement(T.Fragment,null,T.createElement(vc,{capabilities:s,capabilityGroups:o,data:n,onChange:l,openSharedDialog:c,closeSharedDialog:d}),T.createElement(Ll,null));default:return T.createElement(T.Fragment,null)}};var Ec=i(35074),Tc=i.n(Ec);const{inline:xc}=Tc(),Cc=({isOpen:e,dialogData:t,dialogMethods:i})=>{const{feedbackButtonState:r,feedbackButtonText:n,errorMessages:a,entityName:s}=t,o=a||[],l=`users.activateDeactivateDialog.${t.mode}`,c=r===Xn.FEEDBACK_BUTTON_STATE.PROCESSING,[d,u]=(0,T.useState)(""),p=e=>{e?i.confirm(d):i.closeDialog()},h=e=>{const t=o.filter((t=>t!==e.text));i.modifySharedDialogData(s,{errorMessages:t})},m=e=>{u(e.target.value||"")},g=Ge.j.get("users.activateDeactivateDialog.title");return x().createElement(qt.Dialog,{"aria-labelledby":g,"data-sumo-test":"activate-deactivate-dialog",onClose:()=>p(!1),open:e,disableBackdropClick:c,dialogSize:qt.DialogSizes.Regular},x().createElement(qt.Dialog.Title,null,g),x().createElement(qt.Dialog.Content,null,x().createElement("div",{style:{display:"flex",flexDirection:"column"},ref:e=>{e&&(0,R.showInlineNotification)((0,Xn.getInlineErrorProps)(o,h),e)}}),x().createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get(`${l}.description`)),x().createElement("br",null),t.mode===Yn.Qw.DISABLE_TWO_STEP_VERIFICATION?x().createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get(`${l}.actionWarning`)," ",x().createElement(qt.Text,{noWrap:!1,className:xc,variant:"textHeavy"},t.userName),", ",Ge.j.get(`${l}.actionSuggestion`)):x().createElement(qt.Text,{noWrap:!1,variant:"text"},Ge.j.get(`${l}.actionWarning`)," ",x().createElement(qt.Text,{noWrap:!1,className:xc,variant:"textHeavy"},t.userName,"?")),(e=>e===Yn.Qw.DISABLE_TWO_STEP_VERIFICATION?x().createElement(x().Fragment,null,x().createElement("br",null),x().createElement(qt.TextField,{type:"password",fullWidth:!0,autoComplete:"off",label:Ge.j.get(`${l}.passwordLabel`),value:d,onChange:m})):null)(t.mode)),x().createElement(qt.Dialog.Actions,null,x().createElement(qt.Button,{color:"secondary",onClick:()=>p(!1),disabled:c,buttonProps:{"data-sumo-test":"dialog-cancel-button"}},Ge.j.get("usersAndRoles.buttonText.cancel")),x().createElement(qt.FeedbackButton,{feedbackState:r||"default",feedbackText:{default:n||Ge.j.get(`${l}.okButtonText`)},color:"primary",onClick:()=>p(!0),buttonProps:{"data-sumo-test":`dialog-${t.mode}-button`},disabled:(e=>e===Yn.Qw.DISABLE_TWO_STEP_VERIFICATION&&!d)(t.mode)})))};var Ac=i(17272),wc=i.n(Ac);const Ic=({isOpen:e,dialogData:t,dialogMethods:i})=>{const{feedbackButtonState:r,feedbackButtonText:n,name:a,errorMessages:s,entityName:o}=t,l=Ge.j.get("users.resetPasswordDialog.title")+a,c=s||[],d=r===Xn.FEEDBACK_BUTTON_STATE.PROCESSING,u=e=>{const t=c.filter((t=>t!==e.text));i.modifySharedDialogData(o,{errorMessages:t})},p=e=>{e?i.confirm():i.closeDialog()};return T.createElement(qt.Dialog,{"aria-labelledby":l,"data-sumo-test":"reset-password-dialog",disableBackdropClick:d,onClose:()=>p(!1),open:e,dialogSize:qt.DialogSizes.Regular},T.createElement(qt.Dialog.Title,{titleTooltip:!0,className:wc().resetTitle},l),T.createElement(qt.Dialog.Content,null,T.createElement("div",{style:{display:"flex",flexDirection:"column"},ref:e=>{e&&(0,R.showInlineNotification)((0,Xn.getInlineErrorProps)(c,u),e)}}),T.createElement(qt.Text,{variant:"text",noWrap:!1},Ge.j.get("users.resetPasswordDialog.description"),t.email),T.createElement("br",null),T.createElement(qt.Text,{variant:"text",noWrap:!1},Ge.j.get("users.resetPasswordDialog.confirmText"),T.createElement(qt.Text,{noWrap:!1,className:wc().inline,variant:"textHeavy"},t.name,"?"))),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:()=>p(!1),disabled:d,buttonProps:{"data-sumo-test":"dialog-cancel-button"}},Ge.j.get("usersAndRoles.buttonText.cancel")),T.createElement(qt.FeedbackButton,{feedbackState:r||"default",feedbackText:{default:n||Ge.j.get("users.resetPasswordDialog.buttonText")},color:"primary",onClick:()=>p(!0),buttonProps:{"data-sumo-test":"dialog-reset-button"}})))};var Rc=i(70910),Dc=i(94995),Oc=i.n(Dc);const Nc=(0,Rc.default)((()=>[[{name:"currentEmail",label:Ge.j.get("users.changeEmailDialog.currentEmail"),optional:!1,disabled:!0,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD}],[{name:"email",label:Ge.j.get("users.changeEmailDialog.newEmail"),optional:!1,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,inputProps:{maxLength:Xn.MAX_LENGTH.DESCRIPTION},onChangeFnName:R.OnChangeFn.TEXTFIELD}]])),Mc=e=>{const[t,i]=(0,T.useState)(""),{isOpen:r,dialogData:n,dialogMethods:a}=e,{feedbackButtonState:s,feedbackButtonText:o,entityName:l}=n,c=Ge.j.get("users.changeEmailDialog.title")+n.name,d=n.errorMessages||[],u=s===Xn.FEEDBACK_BUTTON_STATE.PROCESSING,p=e=>{e?a.confirm(t):a.closeDialog()},h=e=>{const t=d.filter((t=>t!==e.text));a.modifySharedDialogData(l,{errorMessages:t})},m={type:"required",message:Ge.j.get("users.changeEmailDialog.fieldRequired")},g={email:[Object.assign({},m),{type:"email",message:Ge.j.get("users.changeEmailDialog.invalidEmail")}]},y={currentEmail:n.email,email:""};return x().createElement(qt.Dialog,{"aria-labelledby":c,"data-sumo-test":"change-email-dialog",onClose:()=>p(!1),open:r,disableBackdropClick:u,dialogSize:qt.DialogSizes.Regular},x().createElement(qt.Dialog.Title,{titleTooltip:!0,className:Oc().resetTitle},c),x().createElement(qt.Dialog.Content,null,x().createElement("div",{style:{display:"flex",flexDirection:"column"},ref:e=>{e&&(0,R.showInlineNotification)((0,Xn.getInlineErrorProps)(d,h),e)}}),x().createElement(qt.Form,{render:e=>x().createElement("div",{"data-sumo-test":"changeEmailFormContainer"},(0,R.renderFieldRows)({rows:Nc(),formProps:e,touchFieldsOnBlur:!0})),validationRules:g,onValidation:(e,t,r)=>{e||i(t.email)},initialValues:y,onSubmit:po.Z,containerProps:{autoComplete:"off"}})),x().createElement(qt.Dialog.Actions,null,x().createElement(qt.Button,{color:"secondary",onClick:()=>p(!1),disabled:u,buttonProps:{"data-sumo-test":"dialog-cancel-button"}},Ge.j.get("usersAndRoles.buttonText.cancel")),x().createElement(qt.FeedbackButton,{feedbackState:s||"default",feedbackText:{default:o||Ge.j.get("users.changeEmailDialog.buttonText")},disabled:!t,color:"primary",onClick:()=>p(!0),buttonProps:{"data-sumo-test":"dialog-save-button"}})))},kc=e=>{const{isOpen:t,dialogData:{name:i},dialogMethods:{closeDialog:r}}=e,n=`${Ge.j.get("template1.deleteTitle")} ${i}`,a=T.createElement(qt.Text,{variant:"text",noWrap:!1},Ge.j.get("roles.deletionNotAllowedMessage"),T.createElement("strong",null,i),".");return T.createElement(qt.SimpleDialog,{title:n,open:t,dialogSize:qt.DialogSizes.Regular,onAction:r,"data-sumo-test":"custom-role-delete-dialog"},a)};var Lc=i(12857),Pc=i.n(Lc);const Fc=(e,t,i)=>{var r;return(null===(r=null==e?void 0:e.roleIds)||void 0===r?void 0:r.length)&&!_.isEmpty(t)?((e,t,i=!1)=>[...i?[Ge.j.get("users.accountOwnerLabel")]:[],...t.map((t=>e[t].name)).sort()])(t,e.roleIds,i===e.id):[]},Uc=(e,t)=>{const i=e.toUpperCase(),r=t.toUpperCase();return i<r?-1:i>r?1:0},Vc=e=>{const{isOpen:t,dialogData:i,dialogMethods:r}=e,{users:n=[],targetUser:a={},rolesData:s,accountOwnerId:o}=i,[l,c]=(0,T.useState)({isTransferDelete:!0,selectedUser:[],deleteTyped:!1}),{isTransferDelete:d,selectedUser:u,deleteTyped:p}=l,[h,m]=(0,T.useState)({isSubmitting:!1,didSubmitFail:!1}),g=e=>{c((t=>Object.assign(Object.assign({},t),{selectedUser:e}))),m((e=>Object.assign(Object.assign({},e),{didSubmitFail:!1})))},y=()=>{m((()=>({isSubmitting:!0,didSubmitFail:!1}))),r.onSubmit(a,u).catch((()=>{m((()=>({isSubmitting:!1,didSubmitFail:!0})))}))},v=()=>{m((()=>({isSubmitting:!0,didSubmitFail:!1}))),r.onSubmit(a).catch((()=>{m((()=>({isSubmitting:!1,didSubmitFail:!0})))}))},f=(0,T.useMemo)((()=>((e,t)=>e.reduce(((e,i)=>(i.email!==t.email&&e.push({label:`${i.firstName} ${i.lastName} (${i.email})`,suggestionsLabel:`${i.firstName} ${i.lastName}`,value:i.id.toString(),assistiveText:i.email}),e)),[]).sort(((e,t)=>e.suggestionsLabel&&t.suggestionsLabel?Uc(e.suggestionsLabel,t.suggestionsLabel):Uc(e.value,t.value))))(n,a)),[n,a]);return x().createElement(qt.ThemeProvider,{theme:"brandLight"},x().createElement(qt.Dialog,{open:t,dialogSize:"regular","data-sumo-test":"delete-user-dialog"},x().createElement(qt.Dialog.Title,{titleTooltip:!0},Ge.j.get("users.deleteDialogV2.title"),x().createElement("span",{className:Pc().bold},a.name)),x().createElement(qt.Dialog.Content,null,x().createElement(qt.Radio,{classes:{formControlLabelRoot:Pc().radio},label:Ge.j.get("users.deleteDialogV2.transferDeleteOption.radioLabel"),checked:d,onChange:()=>{c((e=>Object.assign(Object.assign({},e),{isTransferDelete:!0,deleteTyped:!1})))},"data-sumo-test":"delete-dialog-transfer-radio"}),d&&(()=>{var e;const t=(r=n,(c=l.selectedUser).length>0?r.find((e=>{var t;return e.id===(null===(t=c[0])||void 0===t?void 0:t.value)})):void 0);var r,c;const d=t?`${t.firstName} ${t.lastName}`:Ge.j.get("users.deletDialogV2.userUnknown"),p=l.selectedUser.length>0,m=p&&!((e,t)=>{const i=t.roleIds,r=null==e?void 0:e.roleIds;for(const e of i)if(!(null==r?void 0:r.includes(e)))return!1;return!0})(t,a),y=Fc(t,s,o),v=m?"warning":"default",_=m?((e,t,i,r)=>x().createElement(x().Fragment,null,x().createElement("span",{className:Pc().bold},`${e}${Ge.j.get("users.deleteDialogV2.role")} (${t})`),Ge.j.get("users.deleteDialogV2.transferDeleteOption.scheduledViewWarn1"),x().createElement("span",{className:Pc().bold},`${i}${Ge.j.get("users.deleteDialogV2.role")} (${r})`),Ge.j.get("users.deleteDialogV2.transferDeleteOption.scheduledViewWarn2")))(a.name,a.roleNames.join(", "),d,y.join(", ")):Ge.j.get(Gr.currentUserHelper.hasFeatureFlag("UISLOListEnabled")?"users.deleteDialogV2.transferDeleteOption.descriptionV2":"users.deleteDialogV2.transferDeleteOption.description",{name:a.name}),S=!m&&{text:Ge.j.get("users.deleteDialogV2.transferDeleteOption.learnMore"),href:"https://help.sumologic.com/Manage/Users-and-Roles/Manage-Users/11-Delete-a-User",external:!0},b=p&&t&&!((e,t,i)=>t.some((t=>{var r;return null===(r=e[t])||void 0===r?void 0:r.capabilities.includes(i)})))(s,t.roleIds,"viewMonitorsV2");return x().createElement("div",{className:Pc().optionContent},x().createElement(qt.InlineNotification,{status:v,text:_,className:Pc().inlineNotification,multiline:!0,link:S}),b&&x().createElement(qt.InlineNotification,{status:"warning",text:Ge.j.get("users.deleteDialogV2.transferDeleteOption.monitorCapabilityWarning"),className:Pc().inlineNotification,multiline:!0}),h.didSubmitFail&&(null===(e=i.errorMessages)||void 0===e?void 0:e.length)>0&&x().createElement(qt.InlineNotification,{status:"error",text:i.errorMessages[0],className:Pc().inlineNotification,"data-sumo-test":"delete-failure-notification",multiline:!0}),x().createElement(qt.AutoComplete,{placeholder:Ge.j.get("users.deleteDialogV2.transferDeleteOption.autocompletePlaceholder"),items:f,selectedItems:u,onSelectedItemsChange:g,dataSumoTest:{input:"delete-dialog-user-autocomplete"}}))})(),x().createElement(qt.Radio,{classes:{formControlLabelRoot:Pc().radio},label:Ge.j.get("users.deleteDialogV2.hardDeleteOption.radioLabel"),checked:!d,onChange:()=>{c((e=>Object.assign(Object.assign({},e),{isTransferDelete:!1})))},"data-sumo-test":"delete-dialog-delete-radio"}),!d&&x().createElement("div",{className:Pc().optionContent},x().createElement(qt.InlineNotification,{status:"warning",text:Ge.j.get("users.deleteDialogV2.hardDeleteOption.description"),className:Pc().inlineNotification,multiline:!0}),h.didSubmitFail&&(null===(_=i.errorMessages)||void 0===_?void 0:_.length)>0&&x().createElement(qt.InlineNotification,{status:"error",text:i.errorMessages[0],className:Pc().inlineNotification,"data-sumo-test":"delete-failure-notification",multiline:!0}),x().createElement(qt.TextField,{placeholder:Ge.j.get("users.deleteDialogV2.hardDeleteOption.textfieldPlaceholder"),fullWidth:!0,onChange:e=>{p||"DELETE"!==e.target.value.toUpperCase()?p&&c((e=>Object.assign(Object.assign({},e),{deleteTyped:!1}))):c((e=>Object.assign(Object.assign({},e),{deleteTyped:!0})))},"data-sumo-test":"delete-dialog-confirm-textfield"}))),x().createElement(qt.Dialog.Actions,null,(()=>{const e={color:"destructive","data-sumo-test":"dialog-delete-button",onClick:d?y:v,disabled:h.isSubmitting||d?!u.length:!p,feedbackText:{default:d?Ge.j.get("users.deleteDialogV2.transferDeleteOption.confirmBtn"):Ge.j.get("users.deleteDialogV2.hardDeleteOption.confirmBtn"),fail:Ge.j.get("users.deleteDialogV2.retry")},feedbackState:h.isSubmitting?"processing":h.didSubmitFail?"fail":"default"};return x().createElement(x().Fragment,null,x().createElement(qt.Button,{color:"secondary","data-sumo-test":"dialog-cancel-button",onClick:r.closeDialog},Ge.j.get("users.deleteDialogV2.cancelBtn")),x().createElement(qt.FeedbackButton,Object.assign({},e)))})())));var _};var Bc,$c=i(28750),Hc=i.n($c),Wc=i(47875),qc=i.n(Wc);!function(e){e.EMPTY_USER_LIST_VIEW="emptyUserListView",e.NO_SEARCH_RESULT_VIEW="noSearchResultView"}(Bc||(Bc={}));const jc=(e,t)=>t.filter((t=>{const i=t.label.toLowerCase(),r=(t.value||"").toLowerCase(),n=e.toLowerCase();return i.includes(n)||r.includes(n)})),Qc=e=>`${e.firstName} ${e.lastName}`,zc=(e,t,i)=>x().createElement(qt.SearchBar,{className:qc().usersSearchBox,onClear:i,isStandalone:!0},x().createElement(qt.SearchBar.Input,{placeholder:Ge.j.get("roles.assignedUsersDialog.serachBarPlaceholder"),value:e,onChange:t})),Gc=(e,t)=>{const i=`roles.assignedUsersDialog.${e}`;let r=null,n="error-overlay";return e===Bc.NO_SEARCH_RESULT_VIEW&&(r=x().createElement(qt.Button,{className:qc().resetButton,color:"primary",onClick:t,buttonProps:{"data-sumo-test":"assign-users-dialog-reset-search-btn"}},Ge.j.get("usersAndRoles.buttonText.reset")),n="no-search-result"),x().createElement("div",{className:qc().zeroState},Kc(n,i),r)},Kc=(e,t)=>x().createElement(x().Fragment,null,x().createElement(qt.Icon,{name:e,size:"tile",className:qc().emptyIcon}),x().createElement(qt.Text,{className:qc().emptyText,variant:"titleSmall",align:"center"},Ge.j.get(`${t}.title`)),x().createElement(qt.Text,{className:qc().emptySubText,variant:"text",align:"center",noWrap:!1},Ge.j.get(`${t}.subtitle`))),Yc=(e,t,i)=>{const r=e.sort(((e,t)=>ts(e.label,t.label))).map((e=>((e,t)=>x().createElement(qt.List.Item,{className:qc().userListItem,"data-sumo-test":"selected-users-list-item",key:e.value},x().createElement(qt.List.Text,{title:e.value},e.label,x().createElement(qt.Text,{className:qc().subText,variant:"textSmall"},e.value)),x().createElement(qt.List.SecondaryAction,null,x().createElement(qt.IconButton,{className:qc().removeIcon,buttonProps:{"data-sumo-test":"delete-selected-user-button"},icon:"trash",onClick:()=>t(e)}))))(e,t)));return r.length?x().createElement(qt.List,{border:!1},r):Gc(Bc.NO_SEARCH_RESULT_VIEW,i)},Zc=({currentRole:e,usersData:t,onChange:i})=>{const[r,n]=(0,T.useState)(""),[a,s]=(0,T.useState)(((e,t)=>(e.users||[]).reduce(((e,i)=>{const r=t[i];return r&&e.push({label:Qc(r),value:r.email,assistiveText:r.email}),e}),[]))(e,t)),[o,l]=(0,T.useState)(((e,t)=>{const i=e.users;return Object.values(t).reduce(((e,t)=>(-1===i.indexOf(t.id)&&e.push({label:Qc(t),value:t.email,assistiveText:t.email}),e)),[]).sort(((e,t)=>ts(e.label,t.label)))})(e,t)),c=e=>{const r=e.map((e=>Object.values(t).find((t=>t.email===e.value)).id));i(r)};return x().createElement(x().Fragment,null,x().createElement(qt.AutoComplete,{className:qc().usersAutocomplete,label:Ge.j.get("roles.assignedUsersDialog.assignUsers"),onSelectedItemsChange:e=>{const t=a.concat(e);s(t);const i=o.indexOf(e[0]);o.splice(i,1);const r=o.slice(0);l(r),c(t)},items:o,selectedItems:[]}),(({selectedUsers:e,handleUserRemoval:t,searchInputValue:i,handleSearchInputChange:r,handleClearSearch:n})=>{const[a,s]=e.length?[Yc(jc(i,e),t,n),zc(i,r,n)]:[Gc(Bc.EMPTY_USER_LIST_VIEW),null];return x().createElement("div",{className:qc().listDisplayWrapper},s,x().createElement("div",{className:qc().selectedListWrapper,"data-sumo-test":"selected-users-list"},a))})({selectedUsers:a,handleUserRemoval:e=>{const t=a.indexOf(e);a.splice(t,1);const i=a.slice(0);s(i);const r=o.concat(e);l(r),c(i)},searchInputValue:r,handleSearchInputChange:e=>n(e.target.value),handleClearSearch:()=>n("")}))},Xc=({isOpen:e,dialogData:t,dialogMethods:i})=>{const{currentRole:r,usersData:n,feedbackButtonState:a,feedbackButtonText:s,errorMessages:o,entityName:l}=t,{confirm:c,closeDialog:d,modifySharedDialogData:u}=i,[p,h]=(0,T.useState)(!0),[m,g]=(0,T.useState)(r.users),y=Ge.j.get("roles.assignedUsersDialog.title",r.name),v=o||[],f=a===Xn.FEEDBACK_BUTTON_STATE.PROCESSING,_=e=>{const t=v.filter((t=>t!==e.text));u(l,{errorMessages:t})},S=e=>{e&&(0,R.showInlineNotification)((0,Xn.getInlineErrorProps)(v,_),e)},b=e=>{h(!1),g(e)},E={feedbackState:a||"default",feedbackText:{default:s||Ge.j.get("usersAndRoles.buttonText.save")}};return x().createElement(qt.Dialog,{"aria-labelledby":y,"data-sumo-test":"assigned-users-dialog",dialogSize:qt.DialogSizes.Regular,open:e,disableBackdropClick:f},x().createElement(qt.Dialog.Title,{noWrap:!0},y),x().createElement(qt.Dialog.Content,null,x().createElement(x().Fragment,null,x().createElement("div",{className:Hc().errorWrapper,ref:S}),x().createElement(qt.Text,{variant:"text",noWrap:!1},Ge.j.get("roles.assignedUsersDialog.description"),x().createElement("strong",null,r.name),"."),x().createElement(qt.Text,{variant:"text",noWrap:!1},Ge.j.get("roles.assignedUsersDialog.subDescription")),x().createElement(Zc,{usersData:n,currentRole:r,onChange:b}))),x().createElement(qt.Dialog.Actions,null,x().createElement(qt.Button,{color:"secondary",onClick:d,disabled:f,buttonProps:{"data-sumo-test":"dialog-cancel-button"}},Ge.j.get("usersAndRoles.buttonText.cancel")),x().createElement(qt.FeedbackButton,Object.assign({},E,{color:"primary",disabled:p,onClick:()=>c(m),buttonProps:{"data-sumo-test":"dialog-save-button"}}))))},Jc=()=>{v.u.register(Yn.FH.USERS_TAB_CONTENT_CONTAINER,(()=>{const e=Object.assign(Object.assign(Object.assign({},as),ma),Da.s.get(Yn.Se.ROLES));return(0,Te.legacyConnect)(ss,e)(rs)})()),v.u.register(Yn.FH.ROLES_TAB_CONTENT_CONTAINER,(()=>{const e=Object.assign(Object.assign(Object.assign({},Xa),Ca),Da.s.get(Yn.Se.USERS));return(0,Te.legacyConnect)(Ja,e)(Ya)})()),v.u.register(Yn.FH.USERS_SIDEBAR_HEADER_COMPONENT,Cl(Yn.P1.USERS)),v.u.register(Yn.FH.USERS_SIDEBAR_CUSTOM_COMPONENT,Pl),v.u.register(Yn.FH.ROLES_SIDEBAR_HEADER_COMPONENT,Cl(Yn.P1.ROLES)),v.u.register(Yn.FH.ROLES_SIDEBAR_CUSTOM_COMPONENT,bc),v.u.register(Yn.FH.ACTIVATE_DEACTIVATE_DIALOG,Cc),v.u.register(Yn.FH.USERS_CUSTOM_DELETE_COMPONENT,Bl),v.u.register(Yn.FH.USERS_CUSTOM_DESTRUCTIVE_DELETE_COMPONENT,$l),v.u.register(Yn.FH.USERS_RESET_PASSWORD_DIALOG_COMPONENT,Ic),v.u.register(Yn.FH.USERS_CHANGE_EMAIL_DIALOG_COMPONENT,Mc),v.u.register(Yn.FH.ROLES_ASSIGNED_USERS_DIALOG_COMPONENT,Xc),v.u.register(Yn.FH.CUSTOM_ROLE_DELETE_DIALOG,kc),v.u.register(Yn.FH.USERS_CUSTOM_DELETE_V2_COMPONENT,Vc)};(()=>{const e=Yn.Se.USERS,t=Yn.Se.ROLES,i=Yn.rV.USERS,r=Yn.rV.ROLES,n=ns(e),a=Za(t),s={fetchUsersList:()=>t=>{t(as.fetchList(e,n,i,Xn.FETCH_LIMIT_PARAM))}},o={fetchRolesList:()=>e=>{e(Xa.fetchList(t,a,r,Xn.FETCH_LIMIT_PARAM))}};Da.s.register(Yn.Se.USERS,s),Da.s.register(Yn.Se.ROLES,o)})(),Jc();const ed=[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT,f.ACTIONS_NAMES.ENABLE,f.ACTIONS_NAMES.DISABLE,Xn.TEMPLATE1_ACTIONS_NAMES.DELETE],td={[f.ACTIONS_NAMES.ENABLE]:{id:f.ACTIONS_NAMES.ENABLE,show:!0,icon:"check",label:"fieldsExtractionRules.enableRuleText",events:{onClick:f.CUSTOM_ACTIONS.ENABLE}},[f.ACTIONS_NAMES.DISABLE]:{id:f.ACTIONS_NAMES.DISABLE,show:!0,icon:"disabled",label:"fieldsExtractionRules.disableRuleText",events:{onClick:f.CUSTOM_ACTIONS.DISABLE}}};v.u.register(f.COMPONENTS.SIDEBAR_HEADER_COMPONENT,dl),v.u.register(f.COMPONENTS.SIDEBAR_CUSTOM_COMPONENT,gl),v.u.register(f.COMPONENTS.CONFIRMATION_DIALOG,_l);const id=(e,t)=>{if(!e)return;const i=e=>t.success||t.error||t.name!==e.name?Xn.FeedbackStateType.DEFAULT:Xn.FeedbackStateType.PROCESSING;e[f.ACTIONS_NAMES.ENABLE].feedbackButtonState=i,e[f.ACTIONS_NAMES.DISABLE].feedbackButtonState=i},rd=Object.assign(Object.assign(Object.assign({},Xn.Template1Container.getActions()),v.s.get(Yn.Se.USERS)),{fetchList:wo.mE,createEntity:wo.JP,enableRule:wo.gi,loadFields:wo.lm,resetRules:wo.om,loadQuota:il.v3,setType:wo.Cw,updateEntity:wo.i8,deleteEntity:wo.Ks,loadFerQuota:wo.ao}),nd=(0,Te.legacyConnect)((e=>{const t=Xn.Template1Container.getSelectors(f.ENTITY_NAME),i=Ao(e),r=(e=>({templateSidebarProps:{headerComponent:f.COMPONENTS.SIDEBAR_HEADER_COMPONENT,customComponent:f.COMPONENTS.SIDEBAR_CUSTOM_COMPONENT,customActionsMap:td},templateTableProps:{gridOptions:{paginationPageSize:100},templateSearchProps:{placeholder:"fieldsExtractionRules.toolbarFilterPlaceholder"},searchTableActionProps:{addButtonText:"fieldsExtractionRules.addRule",isInteractiveTooltip:!0,tooltipPlacement:"bottom"},customActionsMap:td},order:ed,endpoint:e,entityName:f.ENTITY_NAME,managePrivilege:"NewFERManageAccess",deleteTypeName:"fieldsExtractionRules.deleteDialog.typeName"}))((0,Fs.O3)(i.appliedAt));return id(r.templateSidebarProps.customActionsMap,i.enableRuleState),id(r.templateTableProps.customActionsMap,i.enableRuleState),Object.assign(Object.assign(Object.assign({},t.selectEntitiesComposition(e)),r),i)}),rd)(Qs);s.module("sumoApp.fieldExtractionRules",["sumoApp.currentUser"]).component("fieldExtractionRulesPageContainer",(0,re.legacyReactToAngular)(nd,["isSelectedTab"],["applicationViewShimService"]));let ad=!1;const sd=()=>i.e(779).then(i.bind(i,63741)).then((e=>(ad||(e.initPartitions(ta.Z,Te.store),ad=!0),{default:e.default})));s.module("sumoApp.partitions",["sumoApp.currentUser"]).component("partitionsContainer",(0,re.legacyReactToAngular)((e=>x().createElement(x().Fragment,null,e.isSelectedTab&&x().createElement(C.F,{dynamicImportFn:sd,moduleName:"partitions"}))),["isSelectedTab"]));let od=!1;const ld=()=>Promise.all([i.e(5131),i.e(2812)]).then(i.bind(i,68327)).then((e=>(od||(e.initScheduledViews(ta.Z,Te.store),od=!0),{default:e.default})));s.module("sumoApp.scheduledViews",["sumoApp.currentUser"]).component("scheduledViewsPage",(0,re.legacyReactToAngular)((e=>x().createElement(x().Fragment,null,e.isSelectedTab&&x().createElement(C.F,{dynamicImportFn:ld,moduleName:"scheduledViews"}))),["isSelectedTab"]));let cd=!1;const dd=()=>Promise.all([i.e(5131),i.e(1466)]).then(i.bind(i,61708)).then((e=>(cd||(e.initDataForwardingView(ta.Z,Te.store),cd=!0),{default:e.default}))),ud=[{id:"users",title:"Users",privilege:"UsersTabAccess",helpId:1006},{id:"roles",title:"Roles",privilege:"RolesTabAccess",helpId:5234}],pd={renderPath:{start:"start",dataFetchStart:"dataFetchStart",dataRetrieved:"dataRetrieved",rendered:"rendered"}},hd=(pd.renderPath.start,pd.renderPath.dataFetchStart,pd.renderPath.dataFetchStart,pd.renderPath.dataRetrieved,pd.renderPath.dataRetrieved,pd.renderPath.rendered,{renderPath:{start:"start",dataFetchStart:"dataFetchStart",dataRetrieved:"dataRetrieved",rendered:"rendered"}});hd.renderPath.start,hd.renderPath.dataFetchStart,hd.renderPath.dataFetchStart,hd.renderPath.dataRetrieved,hd.renderPath.dataRetrieved,hd.renderPath.rendered;var md=i(64596);const{EVENT:gd,MARKS:yd}=F.CollectionPerformanceConstants,vd={users:{users:{EVENT:{module:"usersPage",action:"load",id:""},MARKS:pd},roles:{EVENT:{module:"rolesPage",action:"load",id:""},MARKS:hd}},config:{"data-forwarding":{EVENT:md.EVENT,MARKS:md.MARKS},connections:{EVENT:F.CONNECTIONS_EVENT,MARKS:F.CONNECTIONS_MARKS}},collection:{collection:{EVENT:gd,MARKS:yd}}};class fd{constructor(e,t,i,r,n){this.$scope=t,this.groupWorkspaceViewService=r,this.transitionHooks=[],this.tabsList={users:ud},this.onDestroy=()=>{this.clearRenderPerformanceMarks(),_.each(this.transitionHooks,(e=>e()))},this.workspace=i.getWorkspace(g.applicationState.params.workspaceId),this.params=g.applicationState.params,this.groupId=g.applicationState.params.groupId,this.tabs=n.resolveTabs(this.groupId)||this.tabsList[this.groupId]||[],this.selectedTab=this.getSelectedTabIndex(g.applicationState.params.selectedTab),this.markRenderInitialization(),t.$on("$destroy",this.onDestroy),this.transitionHooks.push(e.onBefore({to:this.getGroupedStateRoutes()},(e=>{const{redirectTo:t}=e.to();t&&g.applicationState.go(t),this.clearRenderPerformanceMarks();const i=this.getSelectedTabIndex(e.params().selectedTab);this.markRenderInitialization(i)}))),this.transitionHooks.push(e.onSuccess({to:this.getGroupedStateRoutes()},(e=>{this.view.params&&(this.view.params.selectedTab=e.params().selectedTab),this.selectedTab=this.getSelectedTabIndex(e.params().selectedTab)})));const a=this.workspace.findView(this.groupId);_.isUndefined(a)?(this.view=r.createView({currentStateName:g.applicationState.name,params:g.applicationState.params}),this.workspace.addView(this.view,void 0,!0)):(a.params=Object.assign(Object.assign({},a.params),g.applicationState.params),this.workspace.setCurrentView(a),this.view=a),this.setupBroadcastListen()}clearRenderPerformanceMarks(){const e=this.tabs[this.selectedTab].id,t=vd[this.groupId]?vd[this.groupId][e]:void 0;if(t){const e=Object.keys(t.MARKS.renderPath).map((e=>t.MARKS.renderPath[e]));k.performanceLogService.clearMarks(t.EVENT,e)}}markRenderInitialization(e=this.selectedTab){const t=this.tabs[e].id,i=vd[this.groupId],r=i?i[t]:void 0;r&&k.performanceLogService.mark(r.EVENT,r.MARKS.renderPath.start)}$onDestroy(){this.onDestroy()}setupBroadcastListen(){this.groupWorkspaceViewService.getViewClassName$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.containerSizeClass=e})).subscribe()}getViewType(e){return"group"}updateTitle(e){}getViewService(e){return this.groupWorkspaceViewService}getSelectedTabIndex(e){return _.findIndex(this.tabs,(t=>t.id===e))}getGroupedStateRoutes(){const e=g.applicationState.current.name,t=g.applicationState.params.groupId;return e.substring(0,e.indexOf(t)+t.length)+".**"}}fd.$inject=["$transitions","$scope","workspacesService","groupWorkspaceViewService","manageResolveService"];class _d extends fd{constructor(e,t,i,r){super(e,t,g.workspacesManager,i,r),t.isSelectedTab=()=>"logs-config"===this.params.groupId&&"data-forwarding"===this.tabs[this.selectedTab].id,t.isOldView=()=>!E.currentUserHelper.hasFeatureFlag("UISearchDataForwardingMC")}}_d.$inject=["$transitions","$scope","groupWorkspaceViewService","manageResolveService"];const Sd=s.module("sumoApp.dataForwarding",["sumoApp.currentUser"]);Sd.component("dataforwarding",(0,re.strictModeReactToAngular)((e=>x().createElement(x().Fragment,null,e.isSelectedTab&&x().createElement(C.F,{dynamicImportFn:dd,moduleName:"dataForwarding"}))),["isSelectedTab"])),Sd.controller("dataForwardingBaseController",_d),Sd.component("dataforwardingwrapper",{template:'<div style="height:100%" ng-controller="dataForwardingBaseController" >\n                <div class="prada" ng-if="isOldView()">\n                    <div id="collectormgmt-view">\n                      <div id="view-center" ng-controller="MainDestinationController">\n                        <div class="view-header">\n                          Data Forwarding\n                        </div>\n                        <div ng-if="perPartitionDataForwardingOn" id="collectors-view"\n                          class="view alt-search full-size"\n                          ng-controller="AllDestinationController as destinationCtrl"\n                          >\n                          <div ng-include="\'js/features/manage/views/destinations.html\'"></div>\n                        </div>\n                        <div ng-if="!perPartitionDataForwardingOn" id="collectors-view"\n                          class="view alt-search full-size"\n                          ng-controller="DestinationController as destinationCtrl"\n                          >\n                          <div ng-include="\'js/features/manage/views/destinations.html\'"></div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n               <dataforwarding is-selected-tab="isSelectedTab()" ng-if="!isOldView()"></dataforwarding>\n         </div>'});var bd=i(5541),Ed=i.n(bd),Td=i(75843),xd=i.n(Td),Cd=i(23130),Ad=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};const wd=e=>{var{onClick:t,isLoading:i,color:r="primary",children:n}=e,a=Ad(e,["onClick","isLoading","color","children"]);return T.createElement(qt.Button,Object.assign({onClick:t,disabled:i,color:r},a),i?T.createElement(g.LoadPlaceHolder,{isLoaded:!1}):n)};var Id=i(69030),Rd=i.n(Id);class Dd extends T.PureComponent{constructor(){super(...arguments),this.onClose=()=>{const{onClose:e}=this.props;e&&e()},this.onDelete=()=>{const{onDelete:e,data:t}=this.props;e&&t&&e(t)},this.renderErrorMessages=e=>T.createElement("div",{className:Rd().errorMsg},e.map((e=>T.createElement(qt.InlineNotification,{text:`${e.message}. ${e.meta.reason}`,status:"error",multiline:!0}))))}render(){var e;const{isOpen:t,inProgress:i,error:r,data:n,modalData:{title:a,message:s,cancelBtnText:o,deleteBtnText:l,children:c},dialogData:d}=this.props;return n?T.createElement(qt.Dialog,{open:t,onClose:this.onClose,dialogSize:"regular","data-sumo-test":"delete-action-dialog"},T.createElement(qt.Dialog.Title,null,a),T.createElement(qt.Dialog.Content,null,d&&(null===(e=null==d?void 0:d.errorMessages)||void 0===e?void 0:e.length)>0&&this.renderErrorMessages(null==d?void 0:d.errorMessages),T.createElement("div",null,s),c&&c(n),T.createElement("div",{className:Rd().error},r)),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:this.onClose,disabled:i,"data-sumo-test":"delete-action-dialog-btn-cancel"},o),T.createElement(wd,{color:"destructive",onClick:this.onDelete,isLoading:i,"data-sumo-test":"delete-action-dialog-btn-delete"},(null==d?void 0:d.feedbackButtonText)||l))):null}}class Od extends T.PureComponent{constructor(){super(...arguments),this.ROLES_LINK="https://help.sumologic.com/Manage/Users-and-Roles/Manage-Roles/About-Roles",this.onLearnMoreClick=()=>{window.open(this.ROLES_LINK,"_blank","noopener")}}renderModalWarning(e,t){return this.props.data?T.createElement(qt.Dialog,{open:this.props.isOpen,dialogSize:"regular"},T.createElement(qt.Dialog.Title,null,Ge.j.get("fields.deleteWarningTitle")),T.createElement(qt.Dialog.Content,null,T.createElement("div",{className:xd().modalText,dangerouslySetInnerHTML:{__html:Ge.j.getSafeString(e,this.props.data.fieldName)}}),t),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"primary",onClick:this.props.onClose},Ge.j.get("fields.deleteWarningDoneBtnText")))):null}render(){const{data:e}=this.props;return e?e.fieldExtractionRules&&e.fieldExtractionRules.length>0?this.renderModalWarning("fields.deleteUsedByFerWarning"):e.roles&&e.roles.length>0?this.renderModalWarning("fields.deleteUsedByRBACWarning",T.createElement("button",{className:xd().learnMoreButton,onClick:this.onLearnMoreClick},Ge.j.get("fields.learnMore"))):e.partitions&&e.partitions.length>0?this.renderModalWarning("fields.deleteUsedByPartitionsWarning"):e.collectorsCount>0?this.renderModalWarning("fields.deleteUsedByCollectorsWarning"):e.sourcesCount>0?this.renderModalWarning("fields.deleteUsedBySourcesWarning"):T.createElement(Dd,Object.assign({},this.props,{onDelete:this.props.modalData.onDelete||this.props.onDelete})):null}}const Nd={onClose:()=>(0,il.j1)({})},Md=(0,Te.legacyConnect)(ks,Nd)(Od);class kd extends Xn.Template1Container{constructor(e){super(e,{enableToastsMessage:""}),this.init=(e=!0)=>{this.invalidateCache(),e&&this.loadFields(),this.loadSupportiveData()},this.invalidateCache=(e=[f.FieldType.ExistingCustom,f.FieldType.ExistingBuiltIn,f.FieldType.Dropped])=>{for(const t of e)(0,Xn.invalidateListCache)(t.toString())},this.loadFields=()=>{this.props.resetFields(),this.props.fetchList(this.entityName,this.schema,this.getEndpoint(),Xn.FETCH_LIMIT_PARAM,this.props.fieldType.toString())},this.loadSupportiveData=()=>{this.props.loadRules({includeDynamicRules:!1}),this.props.loadQuota(),this.props.loadReservedFields(),this.props.loadPartitions(),this.props.fetchRolesList()},this.getEndpoint=()=>(0,Cd.O)(this.props.fieldType),this.isTableButtonDisabled=()=>super.isTableButtonDisabled()||!this.canAddField()||this.props.isQuotaExceeded,this.getTableButtonHint=()=>this.canAddField()?this.props.isQuotaExceeded?Ge.j.get("fields.addFieldExceededHint"):void 0:Ge.j.get("fields.addFieldCustomAddingHint"),this.canAddField=()=>this.props.fieldType===f.FieldType.ExistingCustom,this.transformToFeatureData=(e,t={})=>e.map((e=>{var i,r,n,a,s,o,l,c;const{fieldExtractionRules:d,roles:u,partitions:p}=e,h={fieldId:e.fieldId,fieldName:e.fieldName,name:e.fieldName,state:e.state,enabled:"Enabled"===e.state,dataType:e.dataType,fieldExtractionRules:null!==(i=e.fieldExtractionRules)&&void 0!==i?i:[],fieldExtractionRulesCount:null!==(r=null==d?void 0:d.length)&&void 0!==r?r:0,roles:null!==(n=e.roles)&&void 0!==n?n:[],rolesCount:null!==(a=null==u?void 0:u.length)&&void 0!==a?a:0,partitions:null!==(s=e.partitions)&&void 0!==s?s:[],partitionsCount:null!==(o=null==p?void 0:p.length)&&void 0!==o?o:0,collectorsCount:null!==(l=e.collectorsCount)&&void 0!==l?l:0,sourcesCount:null!==(c=e.sourcesCount)&&void 0!==c?c:0},m={rowActionDetailConfig:this.getTableRowActionConfig(t,h)};return Object.assign(Object.assign({},h),m)})),this.getTableComponent=()=>{const e=super.getTableComponent();return e.props.searchTableActionProps.secondaryNode=this.getFieldTypeSelect(),T.createElement("div",{className:Ed().list},T.createElement(e.type,Object.assign({},e.props)),T.createElement(Ls,null))},this.getSuccessMessage=(e,t)=>Ge.j.getSafeString(`fields.successMessages.${e}`,t.fieldName)||"",this.handleFieldTypeChange=e=>{const t=parseInt(e.target.value);this.props.fieldType!==t&&(this.closeSidebar(),this.props.setFieldType({fieldType:t}))},this.getFieldTypeSelect=()=>{const e=[{value:f.FieldType.ExistingCustom,label:Ge.j.get("fields.existingCustomFields")},{value:f.FieldType.ExistingBuiltIn,label:Ge.j.get("fields.existingBuiltInFields")},{value:f.FieldType.Dropped,label:Ge.j.get("fields.droppedFields")}];return T.createElement("div",{className:Ed().fieldTypeSelect},T.createElement(qt.Select,{value:this.props.fieldType,handleChange:this.handleFieldTypeChange,disabled:this.props.userMode===zr.vG.ADD||this.props.loadingOverlay,"data-sumo-test":"fields-type-select"},e.map((e=>T.createElement(qt.Select.Item,{value:e.value,key:e.value},e.label)))))},this.getAllowedActionNames=e=>{const{fieldType:t}=this.props,i=[];switch(t){case f.FieldType.ExistingCustom:i.push(e.enabled?zr.Co.DISABLE:zr.Co.ENABLE,Xn.TEMPLATE1_ACTIONS_NAMES.DELETE);break;case f.FieldType.Dropped:i.push(zr.Co.CREATE_DROPPED)}return i},this.render=()=>T.createElement(T.Fragment,null,this.renderDeleteActionModal(),super.render())}static getDerivedStateFromProps(e){const t={};return(e.enableFieldSuccess||e.disableFieldSuccess)&&(t.enableToastsMessage=Ge.j.get(e.enableFieldSuccess?"fields.successMessages.enable":"fields.successMessages.disable",e.enableFieldName)),t}componentDidMount(){(0,f.$fetchQuota)().then((({remaining:e,quota:t})=>{e===t?(this.init(!1),this.props.setFieldType({fieldType:f.FieldType.ExistingBuiltIn})):this.init()}))}componentDidUpdate(e,t){e.entityIdField!==this.props.entityIdField&&(this.entityIdField=this.props.entityIdField,this.schema=this.getSchema()),!e.isSelectedTab&&this.props.isSelectedTab&&this.init(),e.fieldType!==this.props.fieldType&&(this.tableColumnLables=this.getColumnLabels(),this.loadFields()),e.createdField!==this.props.createdField&&(this.props.fieldType===f.FieldType.Dropped&&this.props.createdField?(this.invalidateCache([f.FieldType.ExistingCustom,f.FieldType.Dropped]),this.props.fieldDeleted({fieldId:this.props.createdField.fieldName})):(this.invalidateCache([f.FieldType.ExistingCustom]),this.props.loadQuota())),e.deletedFieldId!==this.props.deletedFieldId&&(this.invalidateCache([f.FieldType.ExistingCustom]),this.props.loadQuota()),this.state.enableToastsMessage&&t.enableToastsMessage!==this.state.enableToastsMessage&&(this.invalidateCache([f.FieldType.ExistingCustom]),(0,R.showCasualNotification)({message:this.state.enableToastsMessage,variant:"success"}));const i=this.props.enableFieldError;e.enableFieldError!==i&&this.props.modifySidebarData(this.props.entityName,{sidebarData:{errorMessages:i?[i]:void 0}})}getColumnLabels(){const e=this.props.fieldType===f.FieldType.ExistingCustom,t=this.props.fieldType===f.FieldType.Dropped,i={field:"enabled",headerName:Ge.j.get("fields.columnStatus"),cellClass:Ed().statusCell,customCellRenderer:{component:$s.a,props:()=>({enabled:{hint:t?"":Ge.j.get("fields.enabled")},disabled:{icon:t?"exclamation-triangle":void 0,color:t?"apricot":void 0,hint:t?Ge.j.get("fields.new"):Ge.j.get("fields.disabled")},tableMode:!0})},suppressSizeToFit:!0,width:68};if(t)return[i,{field:"name",headerName:Ge.j.get("fields.columnName")}];const r=[i,{field:"name",headerName:Ge.j.get("fields.columnName")},{field:"dataType",headerName:Ge.j.get("fields.columnDataType")},{field:"fieldExtractionRulesCount",headerName:Ge.j.get("fields.columnFieldExtractionRulesCount")},{field:"rolesCount",headerName:Ge.j.get("fields.columnRoleBasedAccessControlCount")},{field:"partitionsCount",headerName:Ge.j.get("fields.columnPartitionsCount")}];return e&&r.push({field:"collectorsCount",headerName:Ge.j.get("fields.columnCollectorsCount")},{field:"sourcesCount",headerName:Ge.j.get("fields.columnSourcesCount")}),r}getStateOverlaysTexts(){const e=super.getStateOverlaysTexts();return Gr.currentUserHelper.hasPermission("MANAGE_EXTRACTION_RULES")?e:Object.assign(Object.assign({},e),{zeroState:Object.assign(Object.assign({},e.zeroState),{description:Ge.j.get("fields.zeroStateOverlayNoPermission")})})}getCustomSidebarActionMap(){return{[zr.jV.CREATE_DROPPED]:this.createFieldFromDropped,[zr.jV.ENABLE]:this.enableField,[zr.jV.DISABLE]:this.disableField}}getCustomTableActionMap(){return{[zr.jV.CREATE_DROPPED]:this.createFieldFromDropped,[zr.jV.ENABLE]:this.enableField,[zr.jV.DISABLE]:this.disableField}}createFieldFromDropped(e,t){this.props.changeDroppedFieldToCreate({field:t}),this.props.createEntity(this.entityName,this.schema,(0,Cd.O)(f.FieldType.ExistingCustom),t,this.getSuccessMessage(Xn.CrudActions.CREATE,t))}enableField(e,t){this.props.enableField({fieldId:(0,Cd.d)(t),fieldName:t.fieldName,enabled:!0})}disableField(e,t){this.props.enableField({fieldId:(0,Cd.d)(t),fieldName:t.fieldName,enabled:!1})}getFilteredDefaultRowActionConfig(e,t){if(!this.hasManagePrivilege)return{};if(!t)return super.getFilteredDefaultRowActionConfig(e,t);const i=Object.assign(Object.assign({},super.getFilteredDefaultRowActionConfig(e,t)),e),r=this.getAllowedActionNames(t);return Object.entries(i).reduce(((e,[t,i])=>(r.includes(t)&&(e[t]=i),e)),{})}onTableRowActionDelete(e,t){this.props.changeFieldToDelete({fieldId:(0,Cd.d)(t)}),this.props.clearDialogData(this.entityName)}renderDeleteActionModal(){return T.createElement(Md,{modalData:{title:Ge.j.get("fields.deleteConfirmDialogTitle"),cancelBtnText:Ge.j.get("common.cancel"),deleteBtnText:Ge.j.get("common.DELETE"),children:(e={})=>T.createElement("div",{className:xd().modalText,dangerouslySetInnerHTML:{__html:Ge.j.getSafeString("fields.deleteConfirmDialogText",{name:e.fieldName})}}),onDelete:e=>{const{endpoint:t,sidebarData:{selectedData:i}}=this.props;this.props.deleteEntity(this.entityName,t,e[this.entityIdField],this.getSuccessMessage(Xn.CrudActions.DELETE,e),i[this.entityIdField],{})}}})}}var Ld=i(28529),Pd=i.n(Ld);const Fd={enableField:il.h5},Ud=(0,Te.legacyConnect)(Ms,Fd)((e=>{var t;const{panelData:i}=e;switch(i.userMode){case zr.vG.VIEW:return T.createElement(qt.Text,{variant:"page",className:Pd().headerText},null===(t=null==i?void 0:i.entityData)||void 0===t?void 0:t.fieldName);case zr.vG.ADD:return T.createElement(qt.Text,{variant:"page",className:Pd().headerText},Ge.j.get("fields.addFieldTitle"));default:return T.createElement(T.Fragment,null)}}));var Vd=i(70184),Bd=i.n(Vd);const $d=({children:e})=>T.createElement("div",{className:Wt()(Gs().field,Gs().marginBottom)},e),Hd=({children:e,dataSumoTest:t})=>T.createElement(qt.Text,{variant:"label",className:Bd().labelPrimary,"data-sumo-test":t},e),Wd=({messageKey:e})=>T.createElement("div",{className:Bd().messageItems},T.createElement(qt.Loader,{className:Bd().messageItem,loaderType:"spinner"}),T.createElement(qt.Text,{className:Bd().messageItem},Ge.j.get(e))),qd=({field:e,fieldType:t})=>{const i=t===f.FieldType.Dropped,r="Enabled"===e.state;return T.createElement($d,null,T.createElement(Hd,{dataSumoTest:"field-status-heading"},Ge.j.get("fields.formLabelStatus")),T.createElement("div",{className:Gs().rowIconLeft},T.createElement($s.a,{value:r,disabled:{icon:i?"exclamation-triangle":void 0,color:i?"apricot":void 0}}),T.createElement(qt.Text,{"data-sumo-test":"field-status-message"},i?Ge.j.get("fields.new"):r?Ge.j.get("fields.enabled"):Ge.j.get("fields.disabled"))))},jd=({labelKey:e,dataSumoTestKey:t,loadingMessageKey:i,messageKey:r,noElementsMessageKey:n,count:a})=>{const s=`field-${t}-heading`,o=`field-${t}-message`;let l=null;return l=void 0===a?T.createElement(Wd,{messageKey:i}):a?T.createElement(qt.Text,{className:Bd().messageItems,"data-sumo-test":o},Ge.j.getSafeString(r,a)):T.createElement(qt.Text,{className:Bd().messageItems,"data-sumo-test":o},Ge.j.get(n)),T.createElement($d,null,T.createElement(Hd,{dataSumoTest:s},Ge.j.get(e)),l)},Qd=({data:e,count:t,nameField:i,dataSumoTestKey:r,error:n,field:a,baseTranslations:s,detailTranslations:o,showDetails:l=!0})=>{if(!Gr.currentUserHelper.hasFeatureFlag("UIFieldsDetails")||!l)return T.createElement(jd,{labelKey:s.label,dataSumoTestKey:r,loadingMessageKey:s.loadingMessage,messageKey:s.message,noElementsMessageKey:s.noElementsMessage,count:t});let c=null;return c=0===t?T.createElement(qt.Text,{className:Bd().messageItems,"data-sumo-test":`field-${r}-message`},Ge.j.get(o.noUsedData)):n?T.createElement(qt.AssistiveText,{className:Bd().errorText,error:!0},n):e?T.createElement(qt.Table,{data:e,columnOptions:[{field:i,headerName:Ge.j.get(o.nameColumn)}],gridOptions:{paginationPageSize:5,density:"dense"},className:Bd().table}):T.createElement(Wd,{messageKey:s.loadingMessage}),T.createElement($d,null,T.createElement(Hd,{dataSumoTest:`field-${r}-heading`},Ge.j.get(s.label)),t>0&&!n&&e&&T.createElement(qt.Text,{variant:"textSmall",className:Wt()(Bd().labelPrimary,Bd().labelSecondary)},Ge.j.getSafeString("fields.formLabelCountData",e.length,t)),c)},zd=({fers:{data:e,error:t}={},field:i})=>T.createElement(Qd,{field:i,nameField:"name",dataSumoTestKey:"field-extraction-rules",data:e,count:i.fieldExtractionRules.length,error:t,baseTranslations:{label:"fields.formLabelFers",message:"fields.formFers",noElementsMessage:"fields.formNoUsedFers",loadingMessage:"fields.formLoadingFers"},detailTranslations:{noUsedData:"fields.formNoUsedFers",nameColumn:"fields.tableColumnFerName"}}),Gd=({roles:e,field:t})=>{const i=Gr.currentUserHelper.hasPermission("MANAGE_USERS_AND_ROLES");return T.createElement(Qd,{field:t,nameField:"name",dataSumoTestKey:"role-based-access-control",data:i?e:[],count:t.roles.length,error:void 0,baseTranslations:{label:"fields.formLabelRbac",message:"fields.formRbac",noElementsMessage:"fields.formNoUsedRbac",loadingMessage:"fields.formLoadingRbac"},detailTranslations:{noUsedData:"fields.formNoUsedRbac",nameColumn:"fields.tableColumnRbacName"},showDetails:i})},Kd=({partitions:{data:e,error:t}={},field:i})=>T.createElement(Qd,{field:i,nameField:"viewName",dataSumoTestKey:"partitions",data:e,count:i.partitions.length,error:t,baseTranslations:{label:"fields.formLabelPartitions",message:"fields.formPartitions",noElementsMessage:"fields.formNoUsedPartitions",loadingMessage:"fields.formLoadingPartitions"},detailTranslations:{noUsedData:"fields.formNoUsedPartitions",nameColumn:"fields.tableColumnPartitionName"}}),Yd=({collectors:{data:e,error:t}={},field:i})=>{const r=Gr.currentUserHelper.hasPrivilege("CollectorsAccess");return T.createElement(Qd,{field:i,nameField:"collectorName",dataSumoTestKey:"collectors",data:i.collectorsCount?e:[],count:i.collectorsCount,error:t,baseTranslations:{label:"fields.formLabelCollectors",message:"fields.formCollectors",noElementsMessage:"fields.formNoUsedCollectors",loadingMessage:"fields.formLoadingCollectors"},detailTranslations:{noUsedData:"fields.formNoUsedCollectors",nameColumn:"fields.tableColumnCollectorName"},showDetails:r})},Zd=({sources:{data:e,error:t}={},field:i})=>{const r=Gr.currentUserHelper.hasPrivilege("CollectorsAccess");return T.createElement(Qd,{field:i,nameField:"sourceName",dataSumoTestKey:"sources",data:i.sourcesCount?e:[],count:i.sourcesCount,error:t,baseTranslations:{label:"fields.formLabelSources",message:"fields.formSources",noElementsMessage:"fields.formNoUsedSources",loadingMessage:"fields.formLoadingSources"},detailTranslations:{noUsedData:"fields.formNoUsedSources",nameColumn:"fields.tableColumnSourceName"},showDetails:r})};class Xd extends T.PureComponent{componentDidMount(){if(!Gr.currentUserHelper.hasFeatureFlag("UIFieldsDetails"))return;const e=this.props.fieldType===f.FieldType.ExistingCustom;e&&this.props.field.collectorsCount&&this.props.loadCollectors({fieldId:(0,Cd.d)(this.props.field)}),e&&this.props.field.sourcesCount&&this.props.loadSources({fieldId:(0,Cd.d)(this.props.field)})}renderExistingField(){const e=this.props.fieldType===f.FieldType.ExistingCustom;return T.createElement("div",null,T.createElement(qd,{field:this.props.field,fieldType:this.props.fieldType}),T.createElement(zd,{field:this.props.field,fers:this.props.fers}),T.createElement(Gd,{field:this.props.field,roles:this.props.roles}),T.createElement(Kd,{field:this.props.field,partitions:this.props.partitions}),e&&T.createElement(Yd,{field:this.props.field,collectors:this.props.collectors}),e&&T.createElement(Zd,{field:this.props.field,sources:this.props.sources}))}renderDroppedField(){return T.createElement(qd,{field:this.props.field,fieldType:this.props.fieldType})}render(){return[f.FieldType.ExistingBuiltIn,f.FieldType.ExistingCustom].includes(this.props.fieldType)?this.renderExistingField():this.renderDroppedField()}}const Jd={enableField:il.h5,changeFieldToDelete:il.j1,loadCollectors:il.YC,loadSources:il.AW},eu=(0,Te.legacyConnect)(Ms,Jd)(Xd);var tu=i(3308),iu=i.n(tu);class ru extends T.PureComponent{constructor(e){super(e),this.formChangeData={values:{},isSubmittable:!1,isSubmitting:!1},this.onFormChange=(e,t,i)=>{e||(void 0!==t&&(this.formChangeData.values=t),void 0!==i&&(this.formChangeData.isSubmittable=0===Object.keys(i).length),this.props.onFormChange(this.formChangeData))},this.renderField=({name:e,label:t})=>T.createElement(qt.Form.Field,{name:e,render:({field:e,form:i})=>{const r=e.name,n=i.touched[r]?i.errors[r]:void 0;return T.createElement(qt.TextField,Object.assign({},e,{label:t,fullWidth:!0,error:!!n,hintText:"object"==typeof n?void 0:n,"data-sumo-test":"field-name"}))}}),this.initialValues={fieldName:""};const t={type:"required",message:Ge.j.get("fields.formFieldRequired")},i={type:"custom",value:e=>e.length>255?Ge.j.getSafeString("fields.formFieldMaxLengthExceeded",255):null},r={type:"custom",value:e=>this.props.reservedFields.has(e.toLowerCase())?Ge.j.get("fields.formFieldReserved"):null};this.validationRules={fieldName:[t,i,r]},this.onFormChange()}renderForm(){return T.createElement(T.Fragment,null,this.renderField({name:"fieldName",label:Ge.j.get("fields.formLabelName")}),T.createElement("div",{className:iu().helpText},Ge.j.get("fields.createFormInfoText")))}render(){return T.createElement(qt.Form,{render:()=>this.renderForm(),initialValues:this.initialValues,validationRules:this.validationRules,onValidation:this.onFormChange,onSubmit:po.Z})}}const nu=(0,Te.legacyConnect)(Is,{})((e=>{const{panelData:t}=e;switch(t.userMode){case zr.vG.VIEW:return T.createElement(eu,{field:t.entityData});case zr.vG.ADD:return T.createElement(ru,{reservedFields:e.reservedFields,onFormChange:e.panelActions.onFormChange});default:return T.createElement(T.Fragment,null)}})),au=[zr.Co.CREATE_DROPPED,zr.Co.ENABLE,zr.Co.DISABLE,Xn.TEMPLATE1_ACTIONS_NAMES.DELETE],su=()=>({[zr.Co.CREATE_DROPPED]:{id:zr.Co.CREATE_DROPPED,show:!0,icon:"plus",label:"fields.formButtonCreateField",events:{onClick:zr.jV.CREATE_DROPPED}},[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT]:{id:Xn.TEMPLATE1_ACTIONS_NAMES.EDIT,show:!1},[zr.Co.ENABLE]:{id:zr.Co.ENABLE,show:!0,icon:"check",label:"fields.enableFieldText",events:{onClick:zr.jV.ENABLE}},[zr.Co.DISABLE]:{id:zr.Co.DISABLE,show:!0,icon:"disabled",label:"fields.disableFieldText",events:{onClick:zr.jV.DISABLE}}});v.u.register(zr.KC.SIDEBAR_HEADER_COMPONENT,Ud),v.u.register(zr.KC.SIDEBAR_CUSTOM_COMPONENT,nu);var ou=i(50320);const lu={fieldType:f.FieldType.ExistingCustom,quota:{fieldsUsed:void 0,fieldsQuota:void 0},fieldsExtractionRules:{error:void 0},partitions:{data:void 0,error:void 0},collectors:{data:void 0,error:void 0},sources:{data:void 0,error:void 0},createField:{dropped:void 0,createdField:void 0},enableField:{fieldName:void 0,enable:!1,success:!1,error:void 0},deleteField:{fieldId:void 0,deletedFieldId:void 0}},cu={[ou.a.LOAD_QUOTA_REQUEST]:e=>al()(e,{quota:{$merge:{fieldsUsed:void 0,fieldsQuota:void 0}}}),[ou.a.LOAD_QUOTA_SUCCESS]:(e,{payload:t})=>al()(e,{quota:{$merge:{fieldsUsed:t.quota?t.quota.fieldsUsed:void 0,fieldsQuota:t.quota?t.quota.fieldsQuota:void 0}}}),[rl.a.LIST_FETCHED]:(e,{payload:t})=>al()(e,{fieldsExtractionRules:{$merge:{error:t.fetchError}}}),[ou.a.LOAD_PARTITIONS_REQUEST]:e=>al()(e,{partitions:{$merge:{data:void 0,error:void 0}}}),[ou.a.LOAD_PARTITIONS_SUCCESS]:(e,{payload:t})=>al()(e,{partitions:{$merge:{data:t.rules}}}),[ou.a.LOAD_PARTITIONS_FAILURE]:(e,{payload:t})=>al()(e,{partitions:{$merge:{error:t}}}),[ou.a.LOAD_COLLECTORS_REQUEST]:e=>al()(e,{collectors:{$merge:{data:void 0,error:void 0}}}),[ou.a.LOAD_COLLECTORS_SUCCESS]:(e,{payload:t})=>al()(e,{collectors:{$merge:{data:t.data}}}),[ou.a.LOAD_COLLECTORS_FAILURE]:(e,{payload:t})=>al()(e,{collectors:{$merge:{error:t}}}),[ou.a.LOAD_SOURCES_REQUEST]:e=>al()(e,{sources:{$merge:{data:void 0,error:void 0}}}),[ou.a.LOAD_SOURCES_SUCCESS]:(e,{payload:t})=>al()(e,{sources:{$merge:{data:t.data}}}),[ou.a.LOAD_SOURCES_FAILURE]:(e,{payload:t})=>al()(e,{sources:{$merge:{error:t}}}),[ou.a.ENABLE_FIELD]:(e,{payload:t})=>al()(e,{enableField:{$merge:{fieldName:t.fieldName,enable:t.enabled,success:!1,error:void 0}}}),[ou.a.ENABLE_FIELD_SUCCESS]:e=>al()(e,{enableField:{$merge:{success:!0,error:void 0}}}),[ou.a.ENABLE_FIELD_FAILURE]:(e,{payload:t})=>al()(e,{enableField:{$merge:{success:!1,error:t}}}),[ou.a.SET_DROPPED_FIELD_TO_CREATE]:(e,{payload:{field:t}})=>al()(e,{createField:{dropped:{$set:t}}}),[ou.a.SET_FIELD_TO_DELETE]:(e,{payload:{fieldId:t}})=>al()(e,{deleteField:{$merge:{fieldId:t}}}),[ou.a.SET_FIELD_TYPE]:(e,{payload:{fieldType:t}})=>al()(e,{$merge:{fieldType:t}}),[Xn.MEGA_ENTITIES_ACTIONS.ENTITIES_PARTIALLY_LOADED]:(e,{payload:{entities:t,result:i}})=>{const r=(0,re.get)(i,[0],""),n=(0,re.get)(t,["fields",r]);return n?al()(e,{createField:{$set:{dropped:void 0,createdField:n}}}):e},[Xn.MEGA_ENTITY_ACTIONS.ENTITY_DELETED]:(e,{payload:{type:t,id:i}})=>{const r=t===zr.X5?i:void 0;return r?al()(e,{deleteField:{deletedFieldId:{$set:r}}}):e}};(()=>{const e=Xn.Template1Container.getReducersAndInitState(zr.X5);ta.Z.register({name:zr.QS,initialState:Object.assign(Object.assign({},e.initialState),lu),actionHandlers:Object.assign(Object.assign({},e.reducers),cu)})})();const du=(e,t,i)=>{e&&(e[zr.Co.CREATE_DROPPED].feedbackButtonState=e=>e.fieldName===t?Xn.FeedbackStateType.PROCESSING:Xn.FeedbackStateType.DEFAULT,e[zr.Co.ENABLE].feedbackButtonState=e=>e.fieldName===i?Xn.FeedbackStateType.PROCESSING:Xn.FeedbackStateType.DEFAULT,e[zr.Co.DISABLE].feedbackButtonState=e=>e.fieldName===i?Xn.FeedbackStateType.PROCESSING:Xn.FeedbackStateType.DEFAULT)},uu=Object.assign(Object.assign(Object.assign({},Xn.Template1Container.getActions()),Da.s.get(Yn.Se.ROLES)),{createEntity:il.Gr,deleteEntity:il.AK,loadRules:wo.G$,loadQuota:il.v3,loadPartitions:il.Y7,loadReservedFields:vs.loadReservedFields,changeDroppedFieldToCreate:il.K4,enableField:il.h5,changeFieldToDelete:il.j1,fieldDeleted:il.Wc,resetFields:il.ts,setFieldType:il.eX,clearDialogData:il.U$}),pu=(0,Te.legacyConnect)((e=>{const t=Xn.Template1Container.getSelectors(zr.X5),i=ws(e),{fieldType:r,createInProgressDroppedFieldName:n,enableInProgressFieldName:a}=i,s=((e,t)=>({templateSidebarProps:{headerComponent:zr.KC.SIDEBAR_HEADER_COMPONENT,customComponent:zr.KC.SIDEBAR_CUSTOM_COMPONENT,customActionsMap:su()},templateTableProps:{gridOptions:{paginationPageSize:100},templateSearchProps:{placeholder:"fields.searchFields"},searchTableActionProps:{addButtonText:"fields.addFieldButtonText"},customActionsMap:su()},order:au,endpoint:t,entityName:zr.X5,entityIdField:e,managePrivilege:"FieldsManageAccess"}))(r!==f.FieldType.Dropped?"fieldId":"fieldName",(0,Cd.O)(r));return du(s.templateSidebarProps.customActionsMap,n,a),du(s.templateTableProps.customActionsMap,n,a),Object.assign(Object.assign(Object.assign({},t.selectEntitiesComposition(e)),i),s)}),uu)(kd);s.module("sumoApp.fields",["sumoApp.currentUser"]).component("fieldsPageContainer",(0,re.legacyReactToAngular)(pu,["isSelectedTab"]));const hu="metricsTransformationRules",mu=`views.${hu}`,gu={SIDEBAR_HEADER_COMPONENT:`${hu}.SidebarHeaderComponent`,SIDEBAR_CUSTOM_COMPONENT:`${hu}.SidebarCustomComponent`};var yu,vu;!function(e){e.ENABLE="enable",e.DISABLE="disable"}(yu||(yu={})),function(e){e.ENABLE="tableRowActionEnable",e.DISABLE="tableRowActionsDisable"}(vu||(vu={}));const fu=Xn.Template1Container.getReducersAndInitState(hu);ta.Z.register({name:mu,initialState:fu.initialState,actionHandlers:fu.reducers});const _u=e=>{const{panelData:t}=e,i=t.entityData,r=((e,t)=>{switch(e){case Xn.SIDEBAR_MODES.VIEW:return(0,re.get)(t,["name"],Ge.j.get("metricsTransformationRules.panelHeaderNoTitle"));case Xn.SIDEBAR_MODES.ADD:return Ge.j.get("metricsTransformationRules.addPanelHeader");case Xn.SIDEBAR_MODES.EDIT:return Ge.j.getSafeString("metricsTransformationRules.panelHeaderEditRule",(0,re.get)(t,["name"],""));default:return""}})(t.userMode,i);return T.createElement(qt.Text,{variant:"page"},r)};var Su,bu,Eu;!function(e){e.AggregateOn="AggregateOnTransformation",e.AddOrReplace="AddOrReplaceTransformation",e.Drop="DropTransformation"}(Su||(Su={})),function(e){e[e.NO_STORE=0]="NO_STORE",e[e.SHORT=15]="SHORT",e[e.DEFAULT=400]="DEFAULT"}(bu||(bu={})),function(e){e[e.NO_STORE=0]="NO_STORE",e[e.SHORT_15_D=15]="SHORT_15_D",e[e.SHORT_30_D=30]="SHORT_30_D",e[e.DEFAULT_D=400]="DEFAULT_D"}(Eu||(Eu={}));const Tu=(e,t,i)=>{if(!e)return"";const r=i(e);if(t){const{firstName:e,lastName:i}=t;return Ge.j.getSafeString("metricsTransformationRules.formattedUserAndTime",r,e,i)}return r},xu=(0,Rc.default)((()=>({name:"",selector:"",retention:Eu.DEFAULT_D,transformedMetricsRetention:Eu.DEFAULT_D,aggregationTransformation:[],addOrReplaceTransformations:[]}))),Cu=e=>{const t=e.aggregationTransformation,i=e.addOrReplaceTransformations,r={enabled:!0,ruleDefinition:{name:e.name,selector:e.selector,retention:Du(e.retention),transformedMetricsRetention:0,dimensionTransformations:[]}};if(t.length>0){const n={transformationType:Su.AggregateOn,aggregateOn:t};r.ruleDefinition.dimensionTransformations.push(n),r.ruleDefinition.transformedMetricsRetention=e.transformedMetricsRetention,i.forEach((([e,t])=>{const i={transformationType:Su.AddOrReplace,dimensionToReplace:e,value:t};r.ruleDefinition.dimensionTransformations.push(i)}))}return r},Au=new re.Dict([[Eu.SHORT_15_D,"metricsTransformationRules.retentionShort15"],[Eu.SHORT_30_D,"metricsTransformationRules.retentionShort30"],[Eu.DEFAULT_D,"metricsTransformationRules.retentionDefault"],[Eu.NO_STORE,"metricsTransformationRules.retentionDoNotStore"]]),wu=(e,t=!0)=>Ge.j.get(e===Eu.NO_STORE&&t?"metricsTransformationRules.retentionDoNotStore":Au.getOr(e,"metricsTransformationRules.retentionUnknown")),Iu=[{apiValue:bu.NO_STORE,formValue:Eu.NO_STORE},{apiValue:bu.DEFAULT,formValue:Eu.DEFAULT_D},{apiValue:bu.SHORT,formValue:Eu.SHORT_15_D}],Ru=e=>{var t;if(30===Gr.currentUserHelper.getIntDynamicProperty("ui_metric_retention_period_short_term_days")&&e===bu.SHORT)return Eu.SHORT_30_D;const i=null===(t=Iu.find((({apiValue:t})=>t===e)))||void 0===t?void 0:t.formValue;return(0,re.ensureDefined)(i)},Du=e=>{var t;if(30===Gr.currentUserHelper.getIntDynamicProperty("ui_metric_retention_period_short_term_days")&&e===Eu.SHORT_30_D)return bu.SHORT;const i=null===(t=Iu.find((({formValue:t})=>t===e)))||void 0===t?void 0:t.apiValue;return(0,re.ensureDefined)(i)};var Ou=i(68708),Nu=i(35431),Mu=i.n(Nu);const ku=()=>({type:"required",message:Ge.j.get("common.fieldRequired")}),Lu=e=>[Eu.SHORT_15_D,Eu.SHORT_30_D,Eu.DEFAULT_D].includes(e),Pu=()=>({type:"custom",value:e=>e.length>200?Ge.j.getSafeString("common.fieldMaxLengthExceeded",200):null}),Fu=({choice:e,isExtended:t})=>{const i=new re.Dict([[Eu.NO_STORE,!t]]);return{label:Ge.j.get(Au.getOr(e,"")),value:e,disabled:i.getOr(e,!1)}},Uu=()=>T.createElement("div",null,T.createElement(qt.Text,{variant:"textSmall",noWrap:!1,className:Wt()(Mu().hintText,Mu().bottomMargin)},Ge.j.getSafeString("metricsTransformationRules.aggregateTransformationsHelpText")),T.createElement(qt.Text,{variant:"textSmall",noWrap:!1,htmlTagName:"span",className:Wt()(Mu().hintText,Mu().inline)},Ge.j.get("metricsTransformationRules.formHelpText")),T.createElement(qt.TextLink,{href:"https://help.sumologic.com/Metrics/Introduction-to-Metrics/Metric_Quantization",external:!0,fontType:"small"},Ge.j.get("metricsTransformationRules.learnMore"))),Vu=({isExtended:e})=>{const t={name:"name",label:Ge.j.get("metricsTransformationRules.name"),defaultValue:xu().name,optional:!1,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Ou.Z)((()=>[ku(),Pu()]))},i={name:"selector",label:Ge.j.get("metricsTransformationRules.selector"),hintText:Ge.j.get("metricsTransformationRules.selectorHelpText"),defaultValue:xu().selector,optional:!1,componentType:R.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:R.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Ou.Z)((()=>[ku(),Pu()]))},r=(e=>({name:"retention",label:Ge.j.get("metricsTransformationRules.retention"),defaultValue:xu().retention,componentType:R.IFormFieldComponentTypes.SELECT,onChangeFnName:R.OnChangeFn.SELECT,optional:!1,hintText:Ge.j.get("metricsTransformationRules.retentionHelpText"),choices:[Eu.NO_STORE,30===Gr.currentUserHelper.getIntDynamicProperty("ui_metric_retention_period_short_term_days")?Eu.SHORT_30_D:Eu.SHORT_15_D,Eu.DEFAULT_D].map((t=>Fu({choice:t,isExtended:e}))),validationRulesFn:(0,Ou.Z)((()=>[{type:"custom",value:(e,t,i)=>Lu(e)||Bu(i.aggregationTransformation)?null:Ge.j.get("metricsTransformationRules.invalidOption")}]))}))(e),n={name:"transformedMetricsRetention",label:Ge.j.get("metricsTransformationRules.aggregationRetention"),defaultValue:xu().transformedMetricsRetention,componentType:R.IFormFieldComponentTypes.SELECT,onChangeFnName:R.OnChangeFn.SELECT,optional:!1,hintText:Ge.j.get("metricsTransformationRules.aggregateRetentionHelpText"),choices:[30===Gr.currentUserHelper.getIntDynamicProperty("ui_metric_retention_period_short_term_days")?Eu.SHORT_30_D:Eu.SHORT_15_D,Eu.DEFAULT_D].map((e=>Fu({choice:e,isExtended:!0}))),validationRulesFn:(0,Ou.Z)((()=>[{type:"custom",value:(e,t,i)=>!Lu(e)&&Bu(i.aggregationTransformation)?Ge.j.get("metricsTransformationRules.invalidOption"):null}]))},a={name:"aggregationTransformation",label:Ge.j.get("metricsTransformationRules.formLabelAggregationTransformation"),defaultValue:xu().aggregationTransformation,componentType:R.IFormFieldComponentTypes.TEXT_INPUT_LIST,addButtonLabel:Ge.j.get("metricsTransformationRules.addTextInputButtonLabel"),textInputPlaceholder:Ge.j.get("metricsTransformationRules.aggregateTextInputPlaceholder"),onChangeFnName:R.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Ou.Z)((()=>[{type:"custom",value:e=>{const t={};return e.forEach(((e,i)=>{0===e.trim().length&&(t[i]=Ge.j.get("common.fieldRequired"))})),0===Object.keys(t).length?null:t}}])),hintText:Uu},s={name:"addOrReplaceTransformations",label:Ge.j.get("metricsTransformationRules.formLabelAddOrReplaceTransformations"),defaultValue:xu().addOrReplaceTransformations,componentType:R.IFormFieldComponentTypes.TEXT_INPUT_PAIRS_LIST,addButtonLabel:Ge.j.get("metricsTransformationRules.addTextInputButtonLabel"),firstTextInputPlaceholder:Ge.j.get("metricsTransformationRules.addOrReplaceFirstTextInputPlaceholder"),secondTextInputPlaceholder:Ge.j.get("metricsTransformationRules.addOrReplaceSecondTextInputPlaceholder"),onChangeFnName:R.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Ou.Z)((()=>[{type:"custom",value:e=>{const t={};return e.forEach(((e,i)=>{0===e[0].trim().length&&(t[i]={first:Ge.j.get("common.fieldRequired")}),0===e[1].trim().length&&(t[i]=Object.assign({},t[i],{second:Ge.j.get("common.fieldRequired")}))})),0===Object.keys(t).length?null:t}}])),hintText:Ge.j.get("metricsTransformationRules.addOrReplaceTransformationsHelpText")};return e?[t,i,r,a,n,s]:[t,i,r,a]},Bu=e=>e.filter((e=>!!e.trim())).length>0;var $u=i(24273),Hu=i.n($u);const Wu=({children:e})=>T.createElement("div",{className:Hu().field},e),qu=({children:e})=>T.createElement("div",{className:Hu().row},e),ju=({rule:e})=>T.createElement(Wu,null,T.createElement(R.Label,null,Ge.j.get("metricsTransformationRules.formLabelStatus")),T.createElement("div",{className:Hu().rowIconLeft},T.createElement($s.a,{value:e.enabled}),T.createElement(qt.Text,{variant:"text"},e.enabled?Ge.j.get("metricsTransformationRules.enabled"):Ge.j.get("metricsTransformationRules.disabled")))),Qu=({rule:e,changeView:t})=>T.createElement(Wu,null,T.createElement(R.Label,{hintText:Ge.j.get("metricsTransformationRules.selectorHelpText"),drilldownOptions:{tooltipHint:Ge.j.get("metricsTransformationRules.openInMetrics"),onClick:()=>{t(e.name,[e.selector])}}},Ge.j.get("metricsTransformationRules.formLabelSelector")),T.createElement(qt.Text,{variant:"text"},e.selector)),zu=({rule:e})=>T.createElement(Wu,null,T.createElement(R.Label,{hintText:Ge.j.get("metricsTransformationRules.retentionHelpText")},Ge.j.get("metricsTransformationRules.formLabelRetention")),T.createElement(qt.Text,{variant:"text"},wu(e.retention))),Gu=({rule:e,changeView:t})=>{const i=(0,re.get)(e,["aggregationTransformation","aggregateOn"],[]);return 0===i.length?null:T.createElement(qu,null,T.createElement(Wu,null,T.createElement(R.Label,{hintText:Uu,drilldownOptions:{tooltipHint:Ge.j.get("metricsTransformationRules.openInMetrics"),onClick:()=>{const r=`${e.selector} | avg by ${i.join(", ")}`;t(e.name,[r])}}},Ge.j.get("metricsTransformationRules.formLabelAggregationTransformation")),T.createElement("ul",{className:Hu().fieldsList},i.map((e=>T.createElement("li",{key:`aggregate-on-${e}`},T.createElement(qt.Text,{variant:"text"},e)))))))},Ku=({rule:e})=>e.aggregationTransformation&&0!==e.aggregationTransformation.aggregateOn.length?T.createElement(qu,null,T.createElement(Wu,null,T.createElement(R.Label,{hintText:Ge.j.get("metricsTransformationRules.aggregateRetentionHelpText")},Ge.j.get("metricsTransformationRules.formLabelAggregateRetention")),T.createElement(qt.Text,{variant:"text"},wu(e.transformedMetricsRetention,!1)))):null,Yu=({rule:e})=>e.aggregationTransformation&&0!==e.aggregationTransformation.aggregateOn.length&&0!==e.addOrReplaceTransformations.length?T.createElement(qu,null,T.createElement(Wu,null,T.createElement(R.Label,{hintText:"metricsTransformationRules.addOrReplaceTransformationsHelpText"},Ge.j.get("metricsTransformationRules.formLabelAddOrReplaceTransformations")),T.createElement("ul",{className:Hu().fieldsList},e.addOrReplaceTransformations.map(((e,t)=>T.createElement("li",{key:`aggregate-on-${t}`},T.createElement(qt.Text,{variant:"text"},e.dimensionToReplace," "," ",e.value))))))):null,Zu=({rule:e,prettifyDateTime:t})=>T.createElement(Wu,null,T.createElement(R.Label,null,Ge.j.get("metricsTransformationRules.formLabelCreatedBy")),T.createElement(qt.Text,{variant:"text"},Tu(e.createdAt,e.createdByUser,t))),Xu=({rule:e,prettifyDateTime:t})=>T.createElement(Wu,null,T.createElement(R.Label,null,Ge.j.get("metricsTransformationRules.formLabelModifiedBy")),T.createElement(qt.Text,{variant:"text"},Tu(e.modifiedAt,e.modifiedByUser,t))),Ju=({rule:e,prettifyDateTime:t,changeView:i})=>T.createElement("div",null,T.createElement(qu,null,T.createElement(ju,{rule:e})),T.createElement(qu,null,T.createElement(Qu,{rule:e,changeView:i})),T.createElement(qu,null,T.createElement(zu,{rule:e})),T.createElement(Gu,{rule:e,changeView:i}),T.createElement(Ku,{rule:e}),T.createElement(Yu,{rule:e}),T.createElement(qu,null,T.createElement(Zu,{rule:e,prettifyDateTime:t})),T.createElement(qu,null,T.createElement(Xu,{rule:e,prettifyDateTime:t})));var ep=i(48009);const tp=(e,t,i)=>({values:e,isSubmittable:t,isSubmitting:i}),ip=({rule:e,onFormChange:t})=>{const i=(0,re.useDebounce)(t,500),r=(0,T.useMemo)((()=>Vu({isExtended:!1})),[]),n=(0,T.useMemo)((()=>Vu({isExtended:!0})),[]),{initialValues:a,validationRules:s}=n.reduce(((t,i)=>{const r=i.name,n=i.defaultValue,a=e&&!(0,ep.Z)(e)?((e,t)=>{switch(e){case"aggregationTransformation":return(0,re.get)(t,["aggregationTransformation","aggregateOn"]);case"addOrReplaceTransformations":if(!t.addOrReplaceTransformations)return;return t.addOrReplaceTransformations.map((e=>[e.dimensionToReplace,e.value]));default:return(0,re.get)(t,[e])}})(r,e):void 0;return t.initialValues[r]=void 0===a?n:a,(0,f.updateFieldValidationRules)(t.validationRules,i),t}),{initialValues:{},validationRules:{}});return T.createElement(qt.Form,{"data-sumo-test":"metrics-transformation-rules-form",render:e=>{const t=t=>{const r=e.values;i(tp(Cu(Object.assign(Object.assign({},r),{[t.name]:t.value})),!0,!1))},a=Bu(e.values.aggregationTransformation)?n:r;return T.createElement(T.Fragment,null,a.map((i=>T.createElement("div",{className:Mu().field,key:i.name},(0,R.renderFormFieldFromConfig)({fieldConfig:i,formProps:e,onChange:t,touchFieldsOnChange:!0})))))},initialValues:a,validationRules:s,onValidation:(e,t,r)=>{e||i(tp(Cu(t),0===Object.keys(r).length,!1))},onSubmit:po.Z})},rp=e=>{const{panelData:t}=e;switch(t.userMode){case Xn.SIDEBAR_MODES.VIEW:return T.createElement(Ju,{rule:t.entityData,prettifyDateTime:t.customData.prettifyDateTime,changeView:t.customData.changeView});case Xn.SIDEBAR_MODES.ADD:case Xn.SIDEBAR_MODES.EDIT:return T.createElement(ip,{rule:(0,re.get)(t,["entityData"]),onFormChange:e.panelActions.onFormChange});default:return null}},np=[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT,yu.ENABLE,yu.DISABLE,Xn.TEMPLATE1_ACTIONS_NAMES.DELETE],ap=()=>({[yu.ENABLE]:{id:yu.ENABLE,show:!0,icon:"check-circle",label:"metricsTransformationRules.enable",events:{onClick:vu.ENABLE}},[yu.DISABLE]:{id:yu.DISABLE,show:!0,icon:"exclamation-circle",label:"metricsTransformationRules.disable",events:{onClick:vu.DISABLE}}});v.u.register(gu.SIDEBAR_HEADER_COMPONENT,_u),v.u.register(gu.SIDEBAR_CUSTOM_COMPONENT,rp);class sp extends Xn.Template1Container{constructor(){super(...arguments),this.getSuccessMessage=(e,t)=>{const i=(0,re.get)(t,["ruleDefinition","name"])||(0,re.get)(t,["name"]);return i?Ge.j.get(`metricsTransformationRules.successMessages.${e}`,i):""}}componentDidMount(){super.componentDidMount(),this.props.fetchUsersList()}transformToFeatureData(e,t={}){return((e,t)=>e.map((e=>{var i,r;return{id:(0,re.ensureDefined)(null!==(i=e.id)&&void 0!==i?i:e.ruleId),ruleId:(0,re.ensureDefined)(null!==(r=e.id)&&void 0!==r?r:e.ruleId),enabled:e.enabled,name:e.ruleDefinition.name,selector:e.ruleDefinition.selector,aggregationTransformation:e.ruleDefinition.dimensionTransformations.find((e=>e.transformationType===Su.AggregateOn)),addOrReplaceTransformations:e.ruleDefinition.dimensionTransformations.filter((e=>e.transformationType===Su.AddOrReplace)),dropTransformation:e.ruleDefinition.dimensionTransformations.find((e=>e.transformationType===Su.Drop)),transformedMetricsRetention:e.ruleDefinition.transformedMetricsRetention,retention:Ru(e.ruleDefinition.retention),createdAt:e.createdAt,createdByUser:(0,re.get)(t,[e.createdBy]),modifiedAt:e.modifiedAt,modifiedByUser:(0,re.get)(t,[e.modifiedBy])}})))(e,this.props.users).map((e=>Object.assign(Object.assign({},e),{rowActionDetailConfig:this.getTableRowActionConfig(t,e)})))}getFilteredDefaultRowActionConfig(e,t){if(!Gr.currentUserHelper.hasPermission("METRICS_TRANSFORMATION"))return{};if(!t)return Object.assign(Object.assign({},(0,Xn.getDefaultRowActionConfigForTemplate1)()),e);const i=Object.entries(e).reduce(((e,[i,r])=>((t.enabled&&i!==yu.ENABLE||!t.enabled&&i!==yu.DISABLE)&&(e[i]=r),e)),{}),r=Object.assign(Object.assign({},(0,Xn.getDefaultRowActionConfigForTemplate1)()),i);return(null==t?void 0:t.dropTransformation)&&(r[yu.DISABLE]&&(r[yu.DISABLE].show=!1),r[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT]&&(r[Xn.TEMPLATE1_ACTIONS_NAMES.EDIT].show=!1)),r}handleEnableRule(e,t){this.props.enableRule(t,!0)}handleDisableRule(e,t){this.props.enableRule(t,!1)}getCustomSidebarActionMap(){return{[vu.ENABLE]:this.handleEnableRule,[vu.DISABLE]:this.handleDisableRule}}getCustomTableActionMap(){return{[vu.ENABLE]:this.handleEnableRule,[vu.DISABLE]:this.handleDisableRule}}getStateOverlaysTexts(){const e=super.getStateOverlaysTexts();return Gr.currentUserHelper.hasPermission("METRICS_TRANSFORMATION")?e:Object.assign(Object.assign({},e),{zeroState:Object.assign(Object.assign({},e.zeroState),{description:Ge.j.get("metricsTransformationRules.zeroStateOverlayNoPermission")})})}getColumnLabels(){return e=ht.userDateService.prettifyDateTime,[{field:"enabled",headerName:"",customCellRenderer:{component:$s.a,props:()=>({tableMode:!0})},suppressSizeToFit:!0,width:50},{field:"name",headerName:Ge.j.get("metricsTransformationRules.name")},{field:"selector",headerName:Ge.j.get("metricsTransformationRules.selector"),infoText:Ge.j.get("metricsTransformationRules.selectorHelpText")},{field:"retention",headerName:Ge.j.get("metricsTransformationRules.retention"),valueGetter:({data:{retention:e}})=>wu(e),infoText:Ge.j.get("metricsTransformationRules.retentionHelpText")},{field:"aggregationTransformation",headerName:Ge.j.get("metricsTransformationRules.aggregationTransformation"),valueGetter:({data:{aggregationTransformation:e}})=>{var t;return null!==(t=null==e?void 0:e.aggregateOn.join(", "))&&void 0!==t?t:""},infoText:Ge.j.get("metricsTransformationRules.aggregateTransformationsHelpText")},{field:"transformedMetricsRetention",headerName:Ge.j.get("metricsTransformationRules.aggregationRetention"),valueGetter:({data:{aggregationTransformation:e,transformedMetricsRetention:t}})=>e?wu(t,!1):"",infoText:Ge.j.get("metricsTransformationRules.aggregateRetentionHelpText")},{field:"createdAt",headerName:Ge.j.get("metricsTransformationRules.createdAt"),valueGetter:({data:{createdAt:t,createdByUser:i}})=>Tu(t,i,e)},{field:"modifiedAt",headerName:Ge.j.get("metricsTransformationRules.modifiedAt"),valueGetter:({data:{modifiedAt:t,modifiedByUser:i}})=>Tu(t,i,e)}];var e}}const op=(0,cn.createSelector)([e=>(0,re.withIndex)(e.megaEntities)[Yn.Se.USERS],e=>(0,re.withIndex)(e.views)[Yn.Se.USERS],e=>(0,re.withIndex)(e.views)[hu]],((e,{isFetching:t},{isFetching:i})=>({users:e,loadingOverlay:t||i})));var lp=i(98429);const cp=Object.assign(Object.assign(Object.assign({},Xn.Template1Container.getActions()),v.s.get(Yn.Se.USERS)),{enableRule:lp.gi}),dp=(0,Te.legacyConnect)((e=>{const t=Xn.Template1Container.getSelectors(hu);return Object.assign(Object.assign(Object.assign({},t.selectEntitiesComposition(e)),{templateSidebarProps:{headerComponent:gu.SIDEBAR_HEADER_COMPONENT,customComponent:gu.SIDEBAR_CUSTOM_COMPONENT,customActionsMap:ap()},templateTableProps:{gridOptions:{paginationPageSize:100},templateSearchProps:{placeholder:"metricsTransformationRules.searchRules"},searchTableActionProps:{visible:Gr.currentUserHelper.hasPermission("METRICS_TRANSFORMATION"),addButtonText:"metricsTransformationRules.searchTableActionBtn"},customActionsMap:ap()},order:np,endpoint:"/api/v1/transformationRules",entityName:hu,entityIdField:Gr.currentUserHelper.hasFeatureFlag("UIMetricsTransformationRulesApiV2")?"id":"ruleId",deleteTypeName:"metricsTransformationRules.deleteDialog.typeName"}),op(e))}),cp,((e,t,i)=>Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i),{customData:{prettifyDateTime:ht.userDateService.prettifyDateTime,changeView:(e,t)=>{Gr.currentUserHelper.hasUserAcceptedFeatureFlag("UIMetricsPage","prefersClassicMetrics")?(0,g.drillDownAdvancedMetricsQueries)({metricsQueries:t}):g.applicationState.go("app.metrics-new",{drilldownInfo:{panel:{metricsQueryModel:{queryRows:t.map(((e,t)=>({queryString:e,rowId:String.fromCharCode("A".charCodeAt(0)+t)})))},title:e},type:_t.zr.TRANSFORMATION_RULES},viewId:re.idGeneratorService.generateId(!1,!0)})}}})))(sp);s.module("sumoApp.metricsTransformationRules",["sumoApp.currentUser"]).component("metricsTransformationRulesContainer",(0,re.legacyReactToAngular)(dp,[],["investigationViewService"]));s.module("sumoApp.awsS3",[]).service("cloudFormationTemplateService",class{getCfTemplate(e){return(0,D.legacyHttpGet)(`/json/v1/dataforward/cf/getIamRoleCloudFormationTemplate?bucketName=${encodeURIComponent(e)}`)}launchCfConsole(){window.open("https://console.aws.amazon.com/cloudformation","_blank","noopener")}download(e,t){const i=e||"cloudformation-template";g.DownloadTextAsFileService.downloadText(i,t,"text/yaml",".yaml",1111)}});i(87665);s.module("sumoApp.unifiedMonitors",["sumoApp.currentUser"]).component("unifiedMonitorsPage",(0,re.legacyReactToAngular)((function(e){return x().createElement(I,Object.assign({},e))}),["folderId","selectedRows"]));var up=i(75669);let pp=!1;const hp=()=>Promise.all([i.e(1654),i.e(9792),i.e(5614),i.e(5485),i.e(5681)]).then(i.bind(i,71922)).then((e=>(pp||(e.initSLOList(ta.Z,up.G),pp=!0),e)));s.module("sumoApp.sloList.workspace",[]).component("sloListContainer",(0,re.strictModeReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:hp,moduleName:"slo-list",componentProps:e})),["folderId","selectedRows","getMonitorEditorService"]));let mp=!1;const gp=()=>Promise.all([i.e(1654),i.e(9792),i.e(5614),i.e(5485),i.e(5681)]).then(i.bind(i,1145)).then((e=>(mp||(e.initSLOPage(ta.Z,up.G),mp=!0),e))),yp={name:F.WORKSPACE.VIEWS.SLO_PAGE.stateName,url:"/slo/:viewId?:relativeRef",params:{viewId:void 0,relativeRef:{dynamic:!0,inherit:!1},sloName:void 0},controller:ce,controllerAs:"$ctrl",template:'\n  <load-placeholder loading="$ctrl.showTabContent">\n  <slo-page-container class="slo-page-container-global" params="$ctrl.view.params"></slo-page-container>\n</load-placeholder>\n  '};class vp extends g.BaseViewService{constructor(e,t,i,r){super(e,t),this.workspacesService=e,this.i18n=i,this.currentUserHelper=r,this.viewInfo=F.WORKSPACE.VIEWS.SLO_PAGE}newTab(e,t="",i){super.newTab(e,t,i);const r=this.createView();e.addView(r)}createView(e={}){const t=e.params,i=t.viewId,r=t.relativeRef,n=e.title||e.params.sloName||re.i18nUtil.get("slo.sloTitle",i).trim()||`SLO ${i}`,a=super.createView(e);this.canViewSloPage()||((0,R.showCriticalNotification)({variant:"warning",autoDismiss:!0,message:this.i18n.get("common.noPermissionNotification")}),setTimeout((()=>this.removeViewById(i))));const s={viewId:i,relativeRef:r};return Object.assign(Object.assign({},a),{id:i,title:n,params:s})}viewRemoved(e,t){super.viewRemoved(e,t),Te.store.dispatch({type:"SloPage.DestroyPage",sloId:e.id})}getViewParams(){return[...super.getViewParams(),"viewId"]}drillDown(e,t){const i={viewId:e,sloName:null==t?void 0:t.sloName,relativeRef:null==t?void 0:t.relativeRef};return g.applicationState.go(this.viewInfo.stateName,i)}removeViewById(e){this.workspacesService.getCurrent().removeViewById(e)}changeTitle(e,t){this.workspacesService.getCurrent().updateTitle(e,t)}canViewSloPage(){return this.currentUserHelper.hasFeatureFlag("UISLOListEnabled")}}vp.$inject=["workspacesService","logService","i18n","currentUserHelper"];const fp=s.module("sumoApp.sloPage.workspace",[]);fp.service("sloPageViewService",vp),fp.config(["$stateProvider",e=>{e.state(yp)}]),fp.component("sloPageContainer",(0,re.strictModeReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:gp,moduleName:"slo-page",componentProps:e})),["params"]));let _p=!1;const Sp=()=>i.e(711).then(i.bind(i,6014)).then((e=>(_p||(e.registerAccessKeysReducers(),e.combineAccessKeysEpics(),_p=!0),{default:e.AccessKeysListContainer})));s.module("sumoApp.accessKeys",[]).component("accessKeysListContainer",(0,re.strictModeReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:Sp,moduleName:"accessKeys",componentProps:e})),[]));const bp="TreeParsersTabContainer",Ep="tree-parsers";var Tp=i(20702);class xp extends Xn.TreeTemplateContainer{getColumnOptions(){return(0,Xn.getColumnOptions)(this.props.entityIcon)}getSidebarCustomComponentProps(){const{sidebarData:{selectedIds:e=[]}}=this.props;return(0,Xn.getViewDetailsProps)("ParsersLibrary",e[0])}getCurrentWorkspaceSettings(e){return Object.assign(Object.assign({},super.getCurrentWorkspaceSettings(e)),(0,Gr.selectWorkspaceConfigSetting)(e.getState()))}getInitTabName(e,t,i){return(0,Tp.Sy)({editorMode:e,contentName:t?t.name:"",contentType:i})}}const Cp=Xn.TreeTemplateContainer.getActions(),Ap=(0,Te.legacyConnect)(((e,t)=>Xn.TreeTemplateContainer.getSelectors(t.entityName).selectEntitiesComposition),Cp)(xp),wp={id:Ep,title:"manage.groups.csiem.parsers",privilege:"ParsersViewAccess",tabContent:{component:bp,componentProps:{templateTableProps:{gridOptions:{},columnOptions:[]},templateActionBarProps:{templateSearchProps:{placeholder:"treeParsers.searchParsers"},templateActionProps:{addEntityList:[{id:"addObject",label:"treeParsers.newParser",icon:qt.IconName.Parser,routeName:"app.parsers"}]}},endpoint:"/api/v1/parsers/",entityName:Ep,entityObjectType:"Parsers",entityIcon:qt.IconName.Parser,routes:{base:"app.megacsiem",contentPage:"app.parsers"},managePrivilege:"ParsersViewAccess",deleteTypeName:"treeParsers.deleteDialog.typeName"}}},Ip=s.module("sumoApp.treeParsers",[]),Rp=Object.assign(Object.assign({},wp.tabContent.componentProps),{routes:{base:"app.logs-config.tree-parsers",contentPage:"app.parsers"}}),Dp=Object.keys(Rp);Dp.forEach((e=>{Ip.constant(e,Rp[e])})),Ip.component("treeParsersContainer",(0,re.strictModeReactToAngular)(Ap,["key","folderId"],Dp));const Op=i(47006),Np=i(11700),Mp=i(37014),kp=i(58948),Lp=s.module("sumoApp.manage",["sumoApp.account.components","sumoApp.core","sumoApp.users.view","sumoApp.tour","smart-table","sumoApp.workspaces.common","sumoApp.saml.view","sumoApp.ingestBudgets.workspace","sumoApp.fieldExtractionRules","sumoApp.fields","sumoApp.metricsTransformationRules","sumoApp.awsS3","sumoApp.partitions","sumoApp.scheduledViews","sumoApp.dataForwarding","sumoApp.unifiedMonitors","sumoApp.sloList.workspace","sumoApp.sloPage.workspace","sumoApp.accessKeys","sumoApp.treeParsers"]);Lp.service("destinationsService",class{list(){return(0,D.legacyHttpGet)(`${vi}/dataForwardSinks/listOfsinks`)}remove(e){return(0,D.legacyHttpDelete)(`${vi}/dataForwardSinks/${e}`)}create(e,t){return(0,D.legacyHttpPost)(`${vi}/create${e}DataForwardSink`,t)}update(e,t){return(0,D.legacyHttpPut)(`${vi}/update${e}DataForwardSink`,t)}}),Lp.service("s3DestinationsService",class{list(){return(0,D.legacyHttpGet)(fi)}remove(e){return _.isObject(e)&&(e=e.bucketName),(0,D.legacyHttpDelete)(`/json/v1/dataforward/buckets?bucketName=${e}`)}create(e){return(0,D.legacyHttpPost)("/json/v1/dataforward/buckets",e)}}),Lp.service("s3RulesService",class{list(e){return(0,D.legacyHttpGet)(`/json/v1/dataforward/getRulesForBucket?s3BucketId=${e}`)}}),Lp.service("s3ForwardingService",class{list(e){return(0,D.legacyHttpGet)(`/json/v1/cdr/bucket?customerId=${e}`)}remove(e){return _.isObject(e)&&(e=e.customerId),(0,D.legacyHttpDelete)(`/json/v1/cdr/bucket?customerId=${e}`)}create(e){return(0,D.legacyHttpPost)("/json/v1/cdr/bucket",e)}}),Lp.service("s3RegionService",class{list(){return(0,D.legacyHttpGet)("/json/v1/collector/getCloudCollectorSupportRegions")}}),Lp.service("manageResolveService",Vr),Lp.directive("status",(function(){return{scope:{bentoView:"="},restrict:"E",controller:Ci,controllerAs:"statusCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t,e)}}})),Lp.directive("collection",(function(){return{scope:{},restrict:"E",controller:Ei,controllerAs:"collectionCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t)}}})),Lp.component("passwordPolicyV3",(0,re.strictModeReactToAngular)((()=>x().createElement(qt.ThemeProvider,{theme:"brandLight"},x().createElement(Vi,null))))),Lp.component("policyPageV2",(0,re.strictModeReactToAngular)((()=>x().createElement(qt.ThemeProvider,{theme:"brandLight"},x().createElement(rr,null))))),Lp.directive("whitelist",(function(){return{scope:{},restrict:"E",controller:sr,controllerAs:"whitelistCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t)}}})),Lp.directive("accessKeys",(function(){return{scope:{},restrict:"E",controller:cr,controllerAs:"accessKeysCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t)}}})),Lp.directive("policies",(function(){return{scope:{},restrict:"E",controller:Ar,controllerAs:"policiesCtrl",bindToController:!0,link(e,t,i,r){const n=$('<div class="list-view-main"></div>');t.append(n),r.loadView(n)}}})),Lp.directive("saml",(function(){return{scope:{},restrict:"E",controller:Ir,controllerAs:"samlCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t)}}})),Lp.directive("bentoDataManagement",(function(){return{scope:{},restrict:"E",controller:Or,controllerAs:"dataManagementCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t)}}})),Lp.directive("billing",(function(){return{scope:{},restrict:"E",controller:Ur,controllerAs:"billingCtrl",bindToController:!0,link(e,t,i,r){r.loadView(t)}}})),Lp.component("upgrade",Lr),Lp.controller("AllDestinationController",Op),Lp.controller("DestinationController",Np),Lp.controller("MainDestinationController",Mp),Lp.controller("S3Controller",kp);const Pp=i(19290);class Fp{constructor(e,t,i,r,n,a,s){this.$element=e,this.currentUserHelper=t,this.dashboardWorkspaceViewService=i,this.contentDashboardService=r,this.workspacesService=n,this.$scope=a,this.$timeout=s,this.BACKBONE_MODEL_CHANGE_TRIGGERS=["dashboardActions"],this.postInitialize=e=>{const t=this.view.tempStateData;if(this.setupModelTriggers(),t&&t.changedPanelId){const i={panelId:t.changedPanelId};t.updateType&&(i[t.updateType]=!0),this.dashboardView.refreshDashboard(i,e),this.dashboardWorkspaceViewService.clearTempStateData(this.view.id)}this.view.params&&this.view.params.openInEditMode&&(this.dashboardView.switchMode({},!0),g.applicationState.go(this.view.currentStateName||this.view.name,Object.assign(Object.assign({},this.view.params),{openInEditMode:!1})))},this.setupModelTriggers=()=>{this.modelValuesChanged(),this.view.model&&this.BACKBONE_MODEL_CHANGE_TRIGGERS.forEach((e=>{this.view.model.on("change:"+e,this.modelValuesChanged,this)}))},this.removeModelTriggers=()=>{this.view.model&&this.BACKBONE_MODEL_CHANGE_TRIGGERS.forEach((e=>{this.view.model.off("change:"+e,this.modelValuesChanged,this)}))},this.modelValuesChanged=()=>{this.$scope.$evalAsync((()=>{this.dashboardWorkspaceViewService.updateData(this.view)}))},this.$onDestroy=()=>{this.setDormant(!0,this.dashboardView.model),this.$timeout((()=>{this.removeModelTriggers(),this.broadcastListenerDisposable&&this.broadcastListenerDisposable.dispose();const e=this.isViewInWorkspace();this.dashboardView.destroy(e),this.dashboardView=null}),1e3)},this.updateTitle=e=>{this.onTitleChange&&(this.updatingTo=e,this.onTitleChange({title:e}))},this.setDormant=(e,t)=>{t&&t.setDormant(e)}}$onInit(){const e={module:"dashboard",action:"dashboard",id:(new Date).getTime().toString()};this.perfComponentLoad=k.performanceLogService.createMark(e,"dashboardPageLoadStart"),this.setupBroadcastListen()}setupBroadcastListen(){this.broadcastListenerDisposable=this.broadcastMsg$?this.broadcastMsg$.subscribe((e=>{if(e&&e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.RESIZE){const t=this.dashboardView?this.dashboardView.getLayoutView():void 0;t&&t.onResize(e)}})):void 0}init(e,t){SumoUtil.setEntityType(!0);const i=this.view.model;this.setDormant(!1,i);try{this.dashboardView=new Pp({el:e,dashboardId:this.dashboardId,dashboardType:"report",openInLiveMode:_.getPath(this,"view.params.openInLiveMode"),onTitleChange:this.updateTitle,model:i,paramType:SumoUtil.getEntityType()})}catch(e){return void $.logWarnLocal("Sumo.Ui.Base.DashboardLoader.loadDashboardUI - Error: %s",e,e)}this.view&&(t.$watch((()=>_.getPath(this,"dashboardView.model.id")),((e,t)=>{e&&e!==t&&this.contentDashboardService.markAsUsed(this.dashboardView.model.id).then((e=>{g.contentActionNotificationService.notify({actionType:re.ContentActionType.OPEN,items:[e]})}))})),this.view.model=this.dashboardView.model,this.postInitialize(!i)),this.dashboardWorkspaceViewService.setDashboardModel(this.dashboardView.model,this.view)}isViewInWorkspace(){const e=_.findWhere(this.workspacesService.getCurrent().views,{id:this.view.id});return!_.isUndefined(e)}$postLink(){this.$element.addClass("backbone-dashboard"),this.init(this.$element,this.$scope);let e="-1";_.getPath(this,"dashboardView.model")&&(e=this.dashboardView.model.getPanels().length),this.perfComponentLoad.mark("dashboardPageLoadEnd");const t={panelSize:e};this.perfComponentLoad.measure("dashboardPageLoadStart","dashboardPageLoadEnd","dashboardPageLoad",t)}}Fp.$inject=["$element","currentUserHelper","dashboardWorkspaceViewService","contentDashboardService","workspacesService","$scope","$timeout"];const Up={bindings:{dashboardId:"@",onTitleChange:"&",view:"=?",broadcastMsg$:"=?"},controller:Fp,controllerAs:"dashboardCtrl"},Vp="/json/v1/dashboard/get/%s",Bp="/json/v1/content/item/%s?contentType=dashboard",$p="/json/v1/reports?folderId=%s",Hp={id:"",title:"",description:"",columns:[""],properties:'{"layoutType":"gridster"}'},Wp="Spline",qp="Spline Area",jp="Single Value Viewer",Qp="Gauge",zp="Sparkline",Gp=(0,Rc.default)((()=>[...(0,f.getCartesianChartChoices)(),...(0,f.getDistributionChartChoices)(),{label:Wp,value:R.ChartType.SPLINE,icon:"line-chart"},{label:qp,value:R.ChartType.SPLINE_AREA,icon:"area-chart"},{label:jp,value:f.SingleValueTypes.COLOR,icon:"single-value-viewer"},{label:Qp,value:f.SingleValueTypes.GAUGE,icon:""},{label:zp,value:f.SingleValueTypes.SPARKLINE,icon:""}]));class Kp extends g.BaseViewService{constructor(e,t,i,r,n,a,s){super(t,i),this.$q=e,this.i18n=r,this.drilldownDashboardService=n,this.$mdToast=a,this.currentUserHelper=s,this.viewInfo=F.WORKSPACE.VIEWS.DASHBOARD,this.counter=0,this.monitorAddedKey="bMonitorAdded",this.monitorUpdatedKey="bMonitorUpdated",this.setDashboardModel=(e,t)=>{let i;const r=this.workspacesService.getCurrent().views.filter((e=>e.type===this.viewInfo.type&&e!==t&&e.model&&!e.model.getPanelDataCleared()));if(r.length===this.viewInfo.maxCachedTabs){i=r[0];for(let e=1;e<r.length;e++)i=i.lastUsed>r[e].lastUsed?r[e]:i;this.destroyDashboardModel(i,!0)}t.model=e,t.lastUsed=Date.now()},this.destroyDashboardModel=(e,t)=>{e.model&&(t?e.model.clearAllPanelResults():(e.model.destroy(),e.model=null))},this.createDashboard=e=>(0,D.legacyHttpPost)(sprintf($p,SumoApp.user.getUserRootFolder()),e),this.getModel=()=>this.dashboardModel,this.setModel=e=>{this.dashboardModel=e},this.getContext=()=>this.dashboardContext,this.setContext=e=>{this.dashboardContext=e},this.getDashboardDefinition=e=>(0,D.legacyHttpGet)(sprintf(Vp,e)),this.getDashboardMetadata=e=>(0,D.legacyHttpGet)(sprintf(Bp,e)).then((e=>{const t=e.folderable;return{contentLibraryId:t.id,description:t.description,dashboardActions:t.actions,sharingStatus:t.sharingStatus,isFavorite:t.favorite,visibility:t.visibility,useViewerRbac:t.useViewerRbac,sharer:{name:t.sharerName,id:t.sharerId},owner:{name:t.ownerName,id:t.ownerId}}})),this.composeDashboard=e=>{const t=e[0].dashboard;return t.libraryInfo=e[1],t},this.get=e=>{const t=this.getDashboardDefinition(e),i=this.getDashboardMetadata(e);return this.$q.all([t,i]).then(this.composeDashboard)},this.getDefaultViewTitle=()=>this.__.defaultViewTitle,this.dashboardDrillDown=e=>{const t=this.workspacesService.getCurrent();g.applicationState.go(this.viewInfo.stateName,{workspaceId:t.id,viewId:e})},this.getDashboardObject=({report:{title:e},panels:t})=>({accessKey:"",title:`Mewboard ${e}`,description:"",rootPanel:{panelType:"ContainerPanel",id:"",key:"panel1",title:"",visualSettings:null,keepVisualSettingsConsistentWithParent:!0,layout:this.layoutGenerator(t),panels:t.map(this.panelConverter),variables:[],coloringRules:null},folderId:null}),this.__=r.get("backboneDashboard.service"),this.dashboardEndpoint=this.currentUserHelper.hasFeatureFlag("UIDashboardv2Api")?"v2/dashboards":"v1alpha/dashboard"}newTab(e,t,i){const r=re.idGeneratorService.generateId(!1,!0),n=Object.assign({},Hp,{id:r,title:sprintf(this.__.defaultViewTitle,this.counter>1?" "+this.counter:"")});this.createDashboard(n).then((r=>{g.applicationState.go(this.viewInfo.stateName,{workspaceId:e.id,viewId:r.id}),this.logNewTab(t),i&&i()}),(r=>{_.find(r.keyedErrors,(e=>e.key===U.duplicateErrorKey))&&(this.counter++,this.newTab(e,t,i))}))}viewRemoved(e,t){this.destroyDashboardModel(e)}beforeWindowClose(e){const t=e.model;if(t){t.getQueryManager().stop(!0)}}cloneView(e,t){const i=e.model.getContentItem();g.libraryActionsService.runAction({actionType:re.ContentActionType.COPY,event:t,meta:{triggeredFrom:"tabContextMenu"}},i).then((e=>{e&&g.libraryActionsService.runAction({actionType:re.ContentActionType.OPEN},e.items[0])}))}createView(e={}){const t=super.createView(e),i=e.id||""+re.idGeneratorService.generateId(!1,!0),r=e.title||_.getPath(e,"params.initTabName")||this.getTitle(),n=_.getPath(e,"params.openInEditMode"),a=_.getPath(e,"params.openInLiveMode");return t.id=i,t.title=r,t.params={viewId:i,openInEditMode:n,openInLiveMode:a},t}getViewParams(){return[...super.getViewParams(),"viewId"]}getTabIdFromLibraryItem(e){return e.accessKey}onContentEdit(e,t){e.model&&e.model.titleExternalUpdate(t.name),this.workspacesService.getCurrent().updateTitle(e.id,t.name)}onContentUpdate(e){const t=this.workspacesService.getCurrent(),i=e.panelId,r=e.accessKey,n={changedPanelId:i,updateType:this.monitorAddedKey};this.drilldownDashboardService.drilldown(e,t).then((()=>{this.updateTempState(r,n)})),this.$mdToast.show(this.$mdToast.success().textContent(this.i18n.get("dashboard.panelAdded")).parent($(".ws-content")))}onContentCreate(e){this.onContentUpdate(e)}updateTitle(e,t){const i=this.$q.defer();return e.model.updateDashboardTitle(t,i),i.promise}updateData(e){e.model&&(e.data={canBeEdited:e.model.canBeEdited()})}isActionDisabled(e,t){let i;switch(t){case F.WORKSPACE.MENU_ACTIONS.rename.action:i=!this.canBeRenamed(e);break;default:i=!1}return i}canBeRenamed(e){return e.data&&e.data.canBeEdited}getTitle(){return sprintf(this.__.defaultViewTitleTemplate,++this.counter>1?" "+this.counter:"")}panelConverter({title:e,viewerType:t,queryString:i,metricsQueries:r=[],timeRange:n},a){const s={id:`${a}`,key:`panel${a}`,title:`${e}`,visualSettings:"",keepVisualSettingsConsistentWithParent:!0};let o=[{queryString:i,queryType:"Logs",queryKey:"A"}];let l;if("title"===t||"text"===t)l={panelType:"TextPanel",text:""};else{r.length&&(o=r.map((({query:e,rowId:t})=>({queryString:e,queryKey:t,queryType:"Metrics"}))));l={panelType:"SumoSearchPanel",queries:o,description:"",timerange:n,coloringRules:null,linkedDashboards:[],visualSettings:`{"general":{"type":"${Gp().find((({value:e})=>e===t))?t:"line"}"}}`}}return Object.assign(Object.assign({},s),l)}layoutGenerator(e){return{layoutType:R.LayoutTypes.Grid,layoutStructures:e.map((({x:e,y:t,width:i,height:r},n)=>({key:`panel${n}`,structure:`{"height":${r},"width":${i},"x":${e-1},"y":${t}}`})))}}}Kp.$inject=["$q","workspacesService","logService","i18n","drilldownDashboardService","$mdToast","currentUserHelper"];const Yp=s.module("sumoApp.backboneDashboard",["sumoApp.drilldown.dashboard"]);Yp.component("backboneDashboard",Up),Yp.service("dashboardWorkspaceViewService",Kp);class Zp extends g.BaseViewService{constructor(e,t,i,r,n,a){super(r,t),this.i18n=i,this.workspacesService=r,this.metricsSearchScratchpadHelper=n,this.metricsPageService=a,this.viewInfo=F.WORKSPACE.VIEWS.METRICS,this.counter=0,this.drilldown=(e,t="default",i=this.generateId(),r)=>g.applicationState.go(this.viewInfo.stateName,{workspaceId:t,viewId:i,drilldownInfo:e,title:r}),this.reloadPageForMetricsSearchConversion=(e,t,i="default")=>{g.applicationState.go(this.viewInfo.stateName,{workspaceId:i,viewId:t,drilldownInfo:e},{location:"replace"})},this.getDefaultViewTitle=()=>this.i18n.get("metrics.defaultViewTitle"),this.metricsSearchScratchpadActions=e.getActionCreators()}isOptionHidden(){return Gr.currentUserHelper.hasUserAcceptedFeatureFlag("UIMetricsPage","prefersClassicMetrics")}generateId(){return re.idGeneratorService.generateId(!1,!0).toString()}newTab(e,t,i){const r=e.id,n=this.generateId();g.applicationState.go(this.viewInfo.stateName,{workspaceId:r,viewId:n,fromNewTab:!0}),this.logNewTab(t),i&&i()}viewRemoved(e,t){super.viewRemoved(e,t),this.metricsSearchScratchpadActions.requestDelete(parseInt(e.id,10))}getViewParams(){return[...super.getViewParams(),"viewId","contentItemId"]}cloneView(e){const t=this.metricsSearchScratchpadHelper.load(e.id),i=this.getTitle(!1);g.applicationState.go("app.metrics-new",{drilldownInfo:{panel:{metricsQueryModel:t.metricsQueryModel,title:i,timeRange:t.timeRange,quantization:t.quantization},type:_t.zr.DUPLICATE_METRICS},viewId:re.idGeneratorService.generateId()})}createView(e={}){const t=super.createView(e),i=e.id||""+re.idGeneratorService.generateId(),r=e.title||this.getTitle(!0);return t.id=i,t.title=r,t.params=Object.assign({viewId:i},e.params),t.name=e.currentStateName,t}updateTitle(e,t){return this.metricsSearchScratchpadActions.renameMetricsSearch(parseInt(e.id,10),t).then((()=>e))}getTitle(e,t){let i;i=e?++this.counter>1?" "+this.counter:"":this.counter+1>1?" "+(this.counter+1):"";return t||this.i18n.get("metrics.metricsTitleWithParam",{suffix:i})}}Zp.$inject=["metricsSearchScratchpadActions","logService","i18n","workspacesService","metricsSearchScratchpadHelper","metricsPageService"];class Xp{constructor(e,t){this.workspacesService=e,this.metricsWorkspaceViewService=t}createActualTabInWorkspace(e,t,i){const r=this.workspacesService.getWorkspace(g.applicationState.params.workspaceId);let n=i?r.findSavedMetricView(i):r.findView(e.toString());return void 0===n?(n=this.metricsWorkspaceViewService.createView(Object.assign({id:e.toString(),isDrillDown:!!g.applicationState.params.drillDownDashboardPanel,currentStateName:g.applicationState.name,params:Object.assign(Object.assign({},g.applicationState.params),{contentItemId:i})},t?{title:t}:{})),r.addView(n)):(n.params=Object.assign(Object.assign({},n.params),g.applicationState.params),n.currentStateName=g.applicationState.name,r.setCurrentView(n)),n}}Xp.$inject=["workspacesService","metricsWorkspaceViewService"];const Jp=[{name:"app.metrics-new",url:"/metrics/create/:viewId?startTime&endTime&monitorId",params:{drilldownInfo:void 0,monitor:void 0,fromNewTab:void 0,viewId:void 0,contentLibraryMetrics:void 0},component:"metricsLoadContainer",resolve:{drilldownInfo:["$transition$",e=>{const t=e.params();let i=t.drilldownInfo;return t.monitorId&&(i={panel:{id:t.monitorId,startTime:t.startTime,endTime:t.endTime,permissions:t.permissions},type:_t.zr.MONITOR}),i}],fromNewTab:["$transition$",e=>e.params().fromNewTab],viewId:["$transition$",e=>e.params().viewId],contentLibraryMetrics:["$transition$",e=>e.params().contentLibraryMetrics]}},{name:"app.metrics",url:"/metrics/{viewId:[0-9]{1,14}}/?startTime&endTime&monitorId",params:{metricsSearchId:void 0,drilldownInfo:void 0},component:"metricsPageContainer",resolve:{metricsSearchId:["$transition$","workspace",e=>{const t=e.params().viewId;return parseInt(t,10)}]}},{name:"app.metrics-share",url:"/metrics/{shortCode:[0-9a-zA-Z]{40}}",params:{shortCode:void 0,viewId:void 0},component:"metricsShareContainer",resolve:{viewId:()=>re.idGeneratorService.generateId(!1,!0),shortCode:["$transition$",e=>e.params().shortCode]}},{name:"app.metrics-content-item-share",url:"/metrics/shared/:contentItemId",params:{viewId:void 0,contentItemId:void 0},component:"metricsShareContainer",resolve:{viewId:()=>re.idGeneratorService.generateId(!1,!0),contentItemId:["$transition$",e=>parseInt(e.params().contentItemId)]}}],eh=s.module("sumoApp.metrics.workspace",["sumoApp.metrics","sumoApp.workspaces","ui.router"]);eh.service("metricsWorkspaceViewService",Zp),eh.service("metricsWorkspaceHelperService",Xp),eh.config(["$stateProvider",e=>{Jp.forEach((t=>e.state(t)))}]);var th=i(97302);const ih={name:F.WORKSPACE.VIEWS.INVESTIGATION.stateName,url:`/${F.INVESTIGATION_ROUTE_PATH}/:viewId/:sectionId`,params:{title:void 0,viewId:void 0,sectionId:{value:null,squash:!0,dynamic:!0},className:F.WORKSPACE.VIEWS.INVESTIGATION.type,viewName:`${F.WORKSPACE.VIEWS.INVESTIGATION.type}View`,contentItem:void 0,isNewTab:!1,variableValues:{},drillDownInfo:void 0},controller:ce,controllerAs:"$ctrl",template:'\n    <load-placeholder loading="$ctrl.showTabContent">\n        <metrics-explorer-container class="metrics-explorer-container" params="$ctrl.view.params"></metrics-explorer-container>\n    </load-placeholder>\n  '};var rh=i(70761),nh=i(74081);const ah={get i18n(){return SumoApp.getAngularService("i18n")}};var sh=i(91019),oh=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const lh=e=>{var t,i,r,n,a,s;const o=null===(i=null===(t=e.chart)||void 0===t?void 0:t.global)||void 0===i?void 0:i.chartType,{visualizationSelectedType:l,visualSettingsMode:c,visualSettingsType:d}=((e="Line")=>{switch(e){case"Area":return{visualizationSelectedType:f.VisualizationSelectedType.TIME_SERIES,visualSettingsMode:"timeSeries",visualSettingsType:f.VisualSettingsType.AREA};case"Line":return{visualizationSelectedType:f.VisualizationSelectedType.TIME_SERIES,visualSettingsMode:"timeSeries",visualSettingsType:f.VisualSettingsType.LINE};case"Single":return{visualizationSelectedType:f.VisualizationSelectedType.SINGLE_VALUE_METRICS,visualSettingsMode:"singleValueMetrics",visualSettingsType:f.VisualSettingsType.SVP}}})(o),u=(0,sh.Z)((0,f.getDefaultJSONTabVisualSettings)(d));if((null==u?void 0:u.general)&&(u.general.mode=c),"Single"===o){const t=null===(n=null===(r=e.chart)||void 0===r?void 0:r.singleValueSettings)||void 0===n?void 0:n.visualization.kind;if("Gauge"===t){const e=u;(null===(a=null==e?void 0:e.svp)||void 0===a?void 0:a.gauge)&&(e.svp.gauge.show=!0)}if("Sparkline"===t){const e=u;(null===(s=null==e?void 0:e.svp)||void 0===s?void 0:s.sparkline)&&(e.svp.sparkline.show=!0)}}return{visualizationSelectedType:l,visualizationSettings:u}},ch=e=>{var t;const{logQuery:i,metricsQueryModel:{queryRows:r},timeRange:n}=e,a=r.map((({queryString:e,rowId:t})=>{const i=e.trim();return""===i?{metricsQueryData:(0,f.createEmptyMetricsQueryData)(),metricsQueryMode:f.QueryModes.BASIC,queryKey:t,queryString:i,queryType:f.QueryTypes.METRICS,type:"BasicMetricsQuery"}:{metricsQueryMode:f.QueryModes.ADVANCED,queryKey:t,queryString:i,queryType:f.QueryTypes.METRICS,type:"AdvancedMetricsQuery"}}));if(null==i?void 0:i.trim()){const e=(0,rh.Z)(r),t=e?(0,re.getRowNextUniqueKey)(e.rowId):g.FIRST_QUERY_KEY;a.push({queryKey:t,queryString:i,queryType:f.QueryTypes.LOGS,type:"LogsQuery"})}return Object.assign({queries:a,timeRange:null!==(t=n.details)&&void 0!==t?t:F.TIMERANGE_STUB_RELATIVE_STRING},lh(e))};var dh=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};class uh extends g.BaseViewService{constructor(e,t,i,r,n){super(e,t),this.workspacesService=e,this.i18n=i,this.metricsWorkspaceViewService=r,this.contentMetricsService=n,this.REMOVE_VIEW_DELAY=100,this.counter=0,this.viewInfo=F.WORKSPACE.VIEWS.INVESTIGATION,this.metricsSearchId=0,this.getTitle=()=>{const e=++this.counter>1?this.counter:"";return`${this.i18n.get("workspaces.tabNames.metrics")} ${e}`.trim()}}cloneView(e){return dh(this,void 0,void 0,(function*(){const t=this.generateId(),{getMetricsExplorerStorageService:i}=yield(0,th.K)();i().save(t,{version:(0,re.ensureDefined)((0,rh.Z)(F.INVESTIGATION_PAGE_STATE_VERSIONS)),data:Object.assign(Object.assign({},e),{savingToContentLibraryStatus:{type:"empty"}})}),g.applicationState.go(this.viewInfo.stateName,{viewId:t,isNewTab:!1,contentItem:void 0,drillDownInfo:void 0})}))}setMetricsSearchId(e){this.metricsSearchId=e}isOptionHidden(){return!E.currentUserHelper.hasUserAcceptedFeatureFlag("UIMetricsPage","prefersClassicMetrics")}getViewParams(){return[...super.getViewParams(),"viewId"]}newTab(e,t="",i){super.newTab(e,t,i);const r=this.createView();return r.params.isNewTab=!0,r.params.contentItem=void 0,k.datapointService.sendDatapoint(Object.assign({module:"investigation",metric:"ui_event_count",event:"new_tab"},(0,k.getOrgDimensions)()),1),e.addView(r)}viewRemoved(e,t){super.viewRemoved(e,t),Te.store.dispatch({type:"PassToInvestigationTabs",_action:{type:"DestroyPage",tabId:e.id}})}fallBackToOldPage(e,t,i,r){var n,a,s,o,l,c,d,u,p,h;k.datapointService.sendDatapoint(Object.assign({module:"investigation",metric:"ui_event_count",event:"classic_metrics_fallback"},(0,k.getOrgDimensions)()),1);const{queries:m,timeRange:y,visualizationSettings:v}=t,_=m.filter((e=>(0,f.isMetricsQuery)(e)&&!(0,f.isEmptyQuery)(e)));_.length||_.push(Object.assign(Object.assign({},(0,f.createEmptyAdvancedMetricsQuery)(g.FIRST_QUERY_KEY)),{queryString:ah.i18n.get("newMetrics.convertingToClassicMetricsEmptyQueryPlaceholder")}));const S=this.generateId(),b=null!==(a=null===(n=t.visualizationSettings.general)||void 0===n?void 0:n.mode)&&void 0!==a?a:"timeSeries",E=null!==(o=null===(s=t.visualizationSettings.general)||void 0===s?void 0:s.type)&&void 0!==o?o:f.VisualSettingsType.LINE,T=E===f.VisualSettingsType.SVP&&null!==(d=null===(c=null===(l=v.svp)||void 0===l?void 0:l.gauge)||void 0===c?void 0:c.show)&&void 0!==d&&d,x=E===f.VisualSettingsType.SVP&&null!==(h=null===(p=null===(u=v.svp)||void 0===u?void 0:u.sparkline)||void 0===p?void 0:p.show)&&void 0!==h&&h;Promise.resolve().then((()=>this.metricsWorkspaceViewService.drilldown({type:_t.zr.NEW_METRICS,queries:_,timeRange:y,hiddenQueryKeys:v.hiddenQueryKeys,visualSettingsMode:b,visualSettingsType:E,isSingleValueWithGauge:T,isSingleValueWithSparkline:x},"default",S,e.title))).then((()=>this.convertNewMetricsToClassicMetricsInContentLibrary({pageState:e,timeRange:y,queries:_,item:r,newViewId:S}))).then((()=>{this.removeViewById(i)})).catch((e=>{const t=ah.i18n.get("newMetrics.convertingToClassicMetricsFailed");(0,R.showCriticalNotification)({message:(null==e?void 0:e.message)?`${t}\n${e.message}`:t})}))}refreshContentLibrary(e,t){g.contentActionNotificationService.notify({items:[e],actionType:t,destinationFolderId:e.parentId})}getMetricsSearchFromStore(){var e,t;return null===(t=null===(e=Te.store.getImmutableState())||void 0===e?void 0:e.getIn(["entities",_t.yG,String(this.metricsSearchId)]))||void 0===t?void 0:t.toJS()}convertNewMetricsToClassicMetricsInContentLibrary({newViewId:e,pageState:t,timeRange:i,queries:r,item:n}){if(void 0===n)return $.logWarnLocal("convertNewMetricsToClassicMetricsInContentLibrary: item is not defined"),Promise.resolve(void 0);(0,re.assertDefined)(n.id),(0,re.assertDefined)(n.parentId),(0,re.assertDefined)(n.owner);const a=n.id,s=n.parentId;let o;return Promise.resolve().then((()=>dh(this,void 0,void 0,(function*(){o=yield g.contentItemService.fetchPermissions(n)})))).then((()=>this.contentMetricsService.delete(a))).then((()=>this.contentMetricsService.create((({newViewId:e,pageState:t,queries:i,timeRange:r})=>{var n,a,s;return{description:null!==(n=t.description)&&void 0!==n?n:"",desiredQuantizationInSecs:0,logQuery:null!==(s=null===(a=i.find((e=>"LogsQuery"===e.type)))||void 0===a?void 0:a.queryString)&&void 0!==s?s:"",metricsQueries:i.map((e=>({queryString:e.queryString,rowId:e.queryKey}))),properties:{},scratchpadId:Number(e),timeRange:ht.timeRangeUtil.parseTimeRangeDetails(r),title:t.title}})({newViewId:e,pageState:t,timeRange:i,queries:r}),s))).then((e=>{const t=this.getMetricsSearchFromStore();t&&Te.store.dispatch({payload:(0,nh._2)(Object.assign(Object.assign({},t),{title:e.name,contentLibraryItemId:e.id})),type:_t.Bm.REQUEST_UPDATE}),this.refreshContentLibrary(n,re.ContentActionType.DELETE),this.refreshContentLibrary(e,re.ContentActionType.CREATE);const i=String(this.metricsSearchId),r=this.workspacesService.getCurrent();return r.updateTitle(i,e.name),r.updateContentItemId(i,e.id),e})).then((e=>dh(this,void 0,void 0,(function*(){yield g.contentItemService.updatePermissions(e,{add:[...o.explicit,...o.implicit],remove:[]})}))))}convertClassicMetricsSearchesToNewMetricsInContentLibrary({item:e}){const t=e.contentLibraryItemId;if("number"!=typeof t)return $.logWarnLocal("convertClassicMetricsSearchesToNewMetricsInContentLibrary: classicMetricsId is not a number"),(0,g.drillDownToMetricsExplorer)(Object.assign(Object.assign({},ch(e)),{title:e.title})).then((()=>{var e;this.removeViewById(null===(e=this.workspacesService.currentWorkspace.currentView)||void 0===e?void 0:e.id)})),Promise.resolve(void 0);let i,r;return Promise.resolve().then((()=>this.contentMetricsService.fetchContentItem(t))).then((e=>dh(this,void 0,void 0,(function*(){i=e,r=yield g.contentItemService.fetchPermissions(e)})))).then((()=>this.contentMetricsService.delete(t))).then((()=>((e,t)=>oh(void 0,void 0,void 0,(function*(){const{queries:i,timeRange:r,visualizationSettings:n}=ch(e),{getMetricsExplorerInitialState:a,getMetricsExplorerSearchInitialState:s}=yield(0,th.K)();return Object.assign(Object.assign({},a()),{title:e.title,description:e.description,section:Object.assign(Object.assign({},s((0,f.createSectionId)(t.accessKey))),{queries:i,visualizationSettings:n}),timeRange:r})})))(e,i))).then((e=>dh(this,void 0,void 0,(function*(){var t;const{MetricsExplorerNetworkService:r,getPageId:n}=yield(0,th.K)(),a=yield r.createMetricsExplorer(e,null===(t=i.parentId)||void 0===t?void 0:t.toString(16));return r.fetchMetricsExplorerContentItem(n(a))})))).then((e=>((0,re.assertDefined)(e),this.workspacesService.currentWorkspace.insertView(this.createView({id:e.accessKey,params:{viewId:e.accessKey}}),!0),this.refreshContentLibrary(i,re.ContentActionType.DELETE),this.refreshContentLibrary(e,re.ContentActionType.CREATE),e))).then((e=>dh(this,void 0,void 0,(function*(){return yield g.contentItemService.updatePermissions(e,{add:[...r.explicit,...r.implicit],remove:[]}),e}))))}upgradeToNewPage(e){k.datapointService.sendDatapoint(Object.assign({module:"investigation",metric:"ui_event_count",event:"new_metrics_opt_in"},(0,k.getOrgDimensions)()),1),Promise.resolve().then((()=>this.convertClassicMetricsSearchesToNewMetricsInContentLibrary({item:e}))).catch((e=>{const t=ah.i18n.get("newMetrics.convertingToNewMetricsTabFailed");(0,R.showCriticalNotification)({message:(null==e?void 0:e.message)?`${t}\n${e.message}`:t})}))}createView(e={}){var t,i,r;const n=super.createView(e),a=e.id||this.generateId(),{params:s={}}=e,o=null!==(r=null!==(t=s.title||void 0)&&void 0!==t?t:null===(i=s.drillDownInfo)||void 0===i?void 0:i.title)&&void 0!==r?r:this.getTitle();return Object.assign(Object.assign({},n),{id:a,title:o,params:Object.assign(Object.assign({},s),{viewId:a,title:o})})}removeViewById(e){e?setTimeout((()=>this.workspacesService.getCurrent().removeViewById(e)),this.REMOVE_VIEW_DELAY):$.logWarnLocal("viewId is not defined")}getTabIdFromLibraryItem(e){return e.accessKey}updateTitle(e,t){const i={type:"PassToInvestigationTabs",_action:{type:"UpdateContentItem",investigationViewService:this,title:t,tabId:e.id}};return Te.store.dispatch(i),Promise.resolve(e)}saveWorkspaceState(){this.workspacesService.getCurrent().saveState()}maybeGoToUpdatedView(e){const t=this.workspacesService.getCurrent().currentView;if(t&&t.id!==e){t.id=e;const i=t.params;return i.viewId=e,g.applicationState.go(this.viewInfo.stateName,i,{notify:!1,reload:!1,location:"replace"})}}onContentCreate(e,t){this.maybeGoToUpdatedView(e.accessKey),this.updateViewTitle(e.name)}onContentUpdate(e,t){this.updateViewTitle(e.name)}generateId(){return re.idGeneratorService.generateId(!1,!0).toString()}}uh.$inject=["workspacesService","logService","i18n","metricsWorkspaceViewService","contentMetricsService"];const ph=s.module("sumoApp.newmetrics.workspace",[]);ph.service("investigationViewService",uh),ph.component("metricsExplorerContainer",(0,re.legacyReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:th.K,moduleName:"metrics-explorer",componentProps:e})),["params"],["investigationViewService","applicationViewShimService","createDashboardPanelActionService"])),ph.config(["$stateProvider",e=>{e.state(ih)}]);var hh=i(84098),mh=i(62788),gh=i(45617),yh=i.n(gh);const vh=(0,T.memo)((()=>x().createElement("div",{className:yh().container},x().createElement(qt.Loader,{loaderType:"spinner",size:"large"})))),fh=()=>Promise.all([i.e(1654),i.e(3134)]).then(i.t.bind(i,88998,23)),_h=(0,T.memo)((e=>{const t=(0,hh.useAsync)(mh.pC,[]).result,i=(0,hh.useAsync)(fh,[]).result;let r;if(t&&i){const{RootCauseExplorer:n,ReduxStoreContext:a}=i;r=x().createElement(a.Provider,{value:Te.store},x().createElement(n,Object.assign({tsatCommon:t},e)))}else r=x().createElement(vh,null);return x().createElement(qt.ThemeProvider,{theme:"brandLight"},r)})),Sh={initialAwsFilters:void 0,initialEoiTypes:void 0,initialK8sFilters:void 0,initialTimeRange:void 0,initialTraceFilters:void 0,toggleTimeline:void 0},bh=[{name:F.WORKSPACE.VIEWS.ANOMALIES.stateName,url:"/root-cause",params:Sh,sticky:!0,views:{anomalies:{controller:ce,controllerAs:"$ctrl",template:'\n        <root-cause-explorer-component\n          initial-aws-filters="$ctrl.params.initialAwsFilters"\n          initial-eoi-types="$ctrl.params.initialEoiTypes"\n          initial-k8s-filters="$ctrl.params.initialK8sFilters"\n          initial-time-range="$ctrl.params.initialTimeRange"\n          initial-trace-filters="$ctrl.params.initialTraceFilters"\n          toggle-timeline="$ctrl.params.toggleTimeline"\n        ></root-cause-explorer-component>\n      '}}}];class Eh extends g.BaseViewService{constructor(e,t,i,r){super(e,t),this.$state=i,this.i18n=r,this.viewInfo=F.WORKSPACE.VIEWS.ANOMALIES}createView(e){const t=super.createView(e);return t.title=this.i18n.get("workspaces.tabNames.anomalies"),t}goToNewTab(e){this.$state.go(this.viewInfo.stateName,e,{reload:!0})}newTab(e,t,i){super.newTab(e,t,i);const r=this.createView();e.addView(r,i)}}Eh.$inject=["workspacesService","logService","$state","i18n"];i(14815);const Th=o().module("sumoApp.anomalies.workspace",["sumoApp.currentUser","sumoApp.workspaces"]);Th.service("anomaliesWorkspaceViewService",Eh),Th.component("rootCauseExplorerComponent",(0,re.strictModeReactToAngular)(_h,["initialAwsFilters","initialEoiTypes","initialK8sFilters","initialTimeRange","initialTraceFilters","toggleTimeline"],["anomaliesWorkspaceViewService"])),Th.config(["$stateProvider",e=>{for(const t of bh)e.state(t)}]);var xh=i(47570),Ch=(i(55492),i(16243));class Ah extends Ch.q{constructor(e,t,i,r,n,a,o,l,c,d,u){super(e,t,i,r,n,a,o,l,d),this.liveTailConfig=e,this.bentoLiveTailStateService=t,this.liveTailPreferencesService=i,this.tourService=r,this.i18n=n,this.eventService=a,this.dialogService=o,this.$scope=l,this.liveTailWorkspaceViewService=c,this.$timeout=d,this.workspacesService=u,this.getJsonData=()=>_.map(this.tabPanels,(e=>this.getJsonPanel(e))),this.getJsonPanel=e=>e?{liveTailTabId:e.liveTailTabId,id:e.id,session:this.getJsonSession(e.id,e.session)}:e,this.getJsonSession=(e,t)=>t?s.copy(t):{wasUndefined:!0},this.updateTabPanels=e=>{this.tabPanels=_.where(e,{liveTailTabId:this.$scope.liveTailWorkspaceCtrl.id}),this.tabPanels.length>0&&(this.initialPanelConstructed=!0),this.initialPanelConstructed&&0===this.tabPanels.length&&this.workspacesService.getCurrent().removeView(this.$scope.liveTailWorkspaceCtrl.view)},this.hasMaxSessions=()=>this.bentoLiveTailStateService.hasMaxPanels(),this.addPanel=e=>{this.tabPanels.length!==this.maxSessions?this.bentoLiveTailStateService.addPanel({liveTailTabId:this.$scope.liveTailWorkspaceCtrl.id,session:e}):this.hasMaxSessions()||this.liveTailWorkspaceViewService.newTab(this.$scope.liveTailWorkspaceCtrl.workspace,"",null,{options:{sessions:[e]}})},this.hasMaxPopOuts=()=>!1,this.stopAll=()=>{alert("stop all")},this.stopAllClick=this.stopAll,this.panels=t.getPanels(),this.tabPanels=_.where(this.panels,{liveTailTabId:this.$scope.liveTailWorkspaceCtrl.id}),this.tabPanels.length>0&&(this.initialPanelConstructed=!0),this.updateAddPanelWatcher(),l.$watchCollection((()=>this.panels),this.updateTabPanels);const p=l.liveTailWorkspaceCtrl.view;let h=p.params.sessions;p.data&&(h=[],_.each(p.data,(e=>{_.getPath(e,"session.filter")&&h.push(e.session)}))),h&&(_.each(h,((e,t)=>{const i=this.tabPanels[t];i?this.bentoLiveTailStateService.setPanelSession(e,i.id):this.addPanel(e)})),delete p.params.sessions),this.$timeout((()=>{0===this.tabPanels.length&&this.addPanel()})),this.tourService.runTopPriorityTour("live_tail",SumoApp.user)}}Ah.$inject=["liveTailConfig","bentoLiveTailStateService","liveTailPreferencesService","tourService","i18n","eventService","dialogService","$scope","liveTailWorkspaceViewService","$timeout","workspacesService"];var wh=i(85049);const{SearchQueryDataModule:Ih}=i(34074);class Rh extends wh.p{constructor(e,t,i,r,n,a,s,o,l,c,d){super(e,t,i,r,n,a,s,o,l,c),this.liveTailConfig=e,this.liveTailService=t,this.bentoLiveTailStateService=i,this.logService=r,this.eventService=n,this.i18n=a,this.$timeout=s,this.$window=o,this.$scope=l,this.$q=c,this.$rootScope=d,this.openInSearch=()=>{const e=this.filter||this.state.filter;if(_.isBlank(e))this.state.warning=this.liveTailConfig.WARNINGS["lt.empty_query"];else{const t=new Ih;t.setQueryString(e),t.setQueryName(F.WORKSPACE.VIEWS.SEARCH.drilldownLivetailTitle),t.setExecuteSearch(!0),SumoApp.applicationView.onDrilldownSearch({},t)}},this.hasMaxSessions=()=>this.bentoLiveTailStateService.hasMaxPanels(!0),this.removePanel=()=>{this.stop(),this.$scope.liveTailCtrl.removePanel(this.panel.id,!0),this.clearState()},this.addOrRemovePanel=()=>{const e=this.$scope.liveTailCtrl;e.tabPanels.length<2?this.state.addPanel!==this.liveTailConfig.ADD_PANEL_BUTTON_STATES.MAX&&e.addPanel():this.removeClick()},this.updateAddPanelOption=e=>{this.$scope.liveTailCtrl.tabPanels.length<2&&(e?(this.state.addPanel=this.liveTailConfig.ADD_PANEL_BUTTON_STATES.MAX,this.state.addPanelDisabledTooltip=this.i18n.get("liveTail.addPanelDisabledTooltip")):(this.state.addPanel=this.liveTailConfig.ADD_PANEL_BUTTON_STATES.REGULAR,this.state.addPanelDisabledTooltip=""))},this.openPreferences=()=>{this.$scope.liveTailCtrl.openPreferences()},this.onPopOutLiveTailMessage=(e,t)=>{this.panel.liveTailTabId===t&&(this.popOutClick(),this.removePanel())},this.popOut=()=>{if(!this.$scope.liveTailCtrl.hasMaxPopOuts()){const e=this.filter||this.state.filter,t=this.state.highlight;SumoApp.applicationView.sendLiveTailPopOut({filter:e,highlight:t}),this.stopAndClear()}},this.$scope.__=this.$rootScope.__,this.openInSearchClick=this.wrapLogging(this.openInSearch,this.USER_ACTIONS.OPEN_IN_SEARCH),this.popOutClick=this.wrapLogging(this.popOut,this.USER_ACTIONS.POP_OUT),this.removeClick=this.wrapLogging(this.removePanel,this.USER_ACTIONS.STOP_CLICK),l.$watch(this.hasMaxSessions,this.updateAddPanelOption),this.updateAddPanelOption(this.hasMaxSessions()),this.$rootScope.$on("popOutLiveTail",this.onPopOutLiveTailMessage)}}Rh.$inject=["liveTailConfig","liveTailService","bentoLiveTailStateService","logService","eventService","i18n","$timeout","$window","$scope","$q","$rootScope"];var Dh=i(80993);class Oh extends Dh.m{constructor(e,t,i,r){super(e,t,i),this.liveTailConfig=e,this.liveTailService=t,this.$window=i,this.workspacesService=r,this.setPanelSession=(e,t)=>{const i={error:void 0},r=this.findPanelById(t);return _.isUndefined(r)?i.error=this.ERRORS.PANEL_NOT_FOUND:(this.stopSessionIfNeeded(r.session),r.session=e),this.setBentoViewSession(t,e),i},this.getCurrentWorkspace=()=>this.workspacesService.getCurrent()||{views:[]},this.setBentoViewSession=(e,t)=>{let i;this.workspacesService.getCurrent().views.forEach((t=>{t.data&&_.isArray(t.data)&&t.data.forEach((t=>{i=t.id===e?t:i}))})),i&&(i.session=t)},this.hasMaxPanels=e=>(e?this.panels.length:_.where(this.getCurrentWorkspace().views,{type:"livetail"}).length)>=this.liveTailConfig.MAX_BENTO_SESSIONS}}Oh.$inject=["liveTailConfig","liveTailService","$window","workspacesService"];class Nh extends g.BaseViewService{constructor(e,t,i,r,n){super(r,n),this.bentoLiveTailStateService=e,this.liveTailTabOpenBlockedService=t,this.i18n=i,this.viewInfo=F.WORKSPACE.VIEWS.LIVE_TAIL,this.counter=0,this.getDefaultViewTitle=()=>this.__.bentoLivetailTitle,this.addPanel=e=>{const t=this.bentoLiveTailStateService.getPanels();let i;t.length&&(i=t.find((e=>_.isUndefined(e.session)))),!i&&this.bentoLiveTailStateService.hasMaxPanels()&&(i=t[0]),i?(this.bentoLiveTailStateService.setPanelSession(e,i.id),g.applicationState.go(this.viewInfo.stateName,{viewId:i.liveTailTabId})):this.newTab(this.workspacesService.getCurrent(),"",null,[e],!0)},this.isOptionDisabled=()=>this.bentoLiveTailStateService.hasMaxPanels(),this.getDisabledTooltip=()=>this.__.addPanelDisabledTooltip,this.__=i.get("liveTail")}newTab(e,t,i,r,n){super.newTab(e,t,i);const a=this.createView({options:{sessions:r},isDrillDown:n});a&&e.addView(a)}viewRemoved(e,t){super.viewRemoved(e,t);const i=_.where(this.bentoLiveTailStateService.getPanels(),{liveTailTabId:e.id});_.each(i,(e=>{this.bentoLiveTailStateService.removePanel(e.id,!0)}))}createView(e={}){let t;if(this.bentoLiveTailStateService.hasMaxPanels())this.liveTailTabOpenBlockedService.showMessage();else{t=super.createView(e);const i=e.id||""+re.idGeneratorService.generateId(),r=e.title||this.getTitle(this.i18n.get("liveTail.liveTail")+"%s");t.id=i,t.title=r,t.params={viewId:i,sessions:_.getPath(e,"options.sessions")}}return t}cloneView(e){const t=this.workspacesService.getCurrent(),i=""+re.idGeneratorService.generateId(),r=this.i18n.get("liveTail.liveTail"),n=e.title.match(new RegExp(`${r} [0-9]`))?r:e.title,a=this.getTitle(n+"%s"),s=this.bentoLiveTailStateService.getPanels().filter((t=>!_.isUndefined(t.session)&&t.liveTailTabId===e.id)).map((e=>e.session));t.addView(this.createView({id:i,title:a,options:{sessions:s},params:{viewId:i}}))}isActionDisabled(e,t){return t===F.WORKSPACE.MENU_ACTIONS.duplicate.action&&this.isOptionDisabled()}canBeRenamed(e){return!0}getViewParams(){return[...super.getViewParams(),"viewId"]}getHelpId(e){return F.WORKSPACE.VIEWS.LIVE_TAIL.helpId}getTitle(e){return sprintf(e,++this.counter>1?" "+this.counter:"")}}Nh.$inject=["bentoLiveTailStateService","liveTailTabOpenBlockedService","i18n","workspacesService","logService"];i(32991);s.module("sumoApp.liveTail.workspace",["sumoApp.i18n","sumoApp.liveTail"]).controller("BentoLiveTailCtrl",Ah).controller("BentoLiveTailSessionCtrl",Rh).service("bentoLiveTailStateService",Oh).service("liveTailWorkspaceViewService",Nh);class Mh extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.HOME}createView(e){const t=this.getWorkspaceId(e),i={viewId:this.viewInfo.type,workspaceId:t},r=super.createView(e);return r.params=Object.assign(Object.assign({},r.params),i),r.title=(0,re.getAngularInjectable)("i18n").get("workspaces.tabNames.home"),r.isStatic=!0,r.notRemoveable=!0,r}}class kh{constructor(e,t,i){this.persistRouterTransition=e=>(this.view.currentStateName=e.to,this.view.params=Object.assign({},e.params),!0),this.workspace=t.getWorkspace(e.params.workspaceId);const r=this.workspace.findView(F.WORKSPACE.VIEWS.HOME.type);this.view=r||i.createView({currentStateName:e.$current.name,params:e.params}),this.workspace.setCurrentView(this.view);const n={to:e.$current.name,params:e.params};this.persistRouterTransition(n)}}kh.$inject=["$state","workspacesService","homeWorkspaceViewService"];const Lh={name:"app.home",url:"/home",template:"<home-container></home-container>",controller:kh};var Ph=i(78470),Fh=i(34431),Uh=i(91346),Vh=i(71063),Bh=i.n(Vh);var $h=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function Hh(e,t=""){return Object.assign(Object.assign({},e),{className:Wt()(e.className,t)})}class Wh extends T.Component{render(){const e=this.props,{children:t=null}=e,i=$h(e,["children"]);return T.createElement("div",Object.assign({},Hh(i," simple-list")),t)}}Wh.Item=e=>{var{children:t=null}=e,i=$h(e,["children"]);return T.createElement("div",Object.assign({},Hh(i," simple-list__item")),t)};var qh=i(9431),jh=i.n(qh);class Qh extends T.Component{render(){const{children:e=null}=Object.assign({},this.props);return T.createElement("div",{className:Wt()(jh().card,this.props.className)},e)}}Qh.Content=({children:e=null})=>e?T.createElement("div",{className:"flex-card__content",style:{minHeight:"auto"}},e):null,Qh.Header=({children:e=null,title:t="",headerDataSumo:i})=>T.createElement("div",{className:Wt()(jh().cardHeader,"flex-card__header"),"data-sumo-test":i},t,e?T.createElement("div",{className:"flex-card__header__actions"},e):null);var zh=i(56367),Gh=i.n(zh),Kh=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class Yh extends T.Component{constructor(){super(...arguments),this.state={on:this.props.defaultOn},this.toggle=()=>{const{onToggle:e,disabled:t}=this.props;this.setState((({on:e})=>({on:!e})),(()=>e(this.state.on,t)))},this.getTogglerProps=(e={})=>Object.assign(Object.assign({},e),{disabled:this.props.disabled,onClick:this.toggle}),this.getTogglerContainerProps=(e={})=>Object.assign({className:""},e)}render(){return this.props.render({on:this.state.on,getTogglerProps:this.getTogglerProps,getTogglerContainerProps:this.getTogglerContainerProps})}}Yh.Switch=e=>{var{on:t,disabled:i,onClick:r,className:n=""}=e,a=Kh(e,["on","disabled","onClick","className"]);return T.createElement("div",{className:Wt()(Gh().toggleBtn,{[Gh().disableOff]:i&&!t,[Gh().disableOn]:i&&t},n)},T.createElement("input",{"data-sumo-test":"toggle-switch-container",className:Gh().toggleCheck,type:"checkbox",checked:t,readOnly:!0}),T.createElement("button",Object.assign({"data-sumo-test":"toggle-switch-container-button",disabled:i,onClick:r,className:Wt()(Gh().slider,Gh().round)},a)))},Yh.defaultProps={onToggle:()=>({}),defaultOn:!1,disabled:!1,render:({})=>null};i(77489);i(61933);var Zh=i(37487),Xh=i.n(Zh);const Jh=i(38209),em=e=>{const{message:t,title:i,height:r}=e,n=r?{height:r}:null;return T.createElement("div",{className:Xh().emptyPlaceholder,style:n},T.createElement("div",{className:Xh().container},T.createElement("img",{className:Xh().sumoJi,src:Jh,"data-sumo-test":"empty-page-sumoji"}),T.createElement("div",{className:Xh().title,"data-sumo-test":"empty-page-title"},i),T.createElement("div",{className:Xh().message,"data-sumo-test":"empty-page-message"},t)))};class tm extends T.PureComponent{constructor(e){super(e),this.checkNewContainer=(e,t)=>{if(e.length>t.length){const t=e[e.length-1].id,i=this.panelRefs[t];i&&i.scrollIntoView({behavior:"instant"})}},this.tabClickHandler=e=>{const t=e;this.props.switchTab(t)},this.renderContainer=({container:e})=>{const{selectedTab:t,homeComponents:i}=this.props,r=t.components[e.id],n=i[r.name],a="bentoShortcuts"===r.id;return T.createElement("div",{className:Wt()(Bh().homeTabContainer,{[Bh().addOverflow]:a})},this.renderComponentDefinition(r,Object.assign(Object.assign({},n),"bentoShortcuts"===r.id&&{isScrollable:!0})))},this.renderEmptyPlaceholder=()=>{const{selectedTab:e}=this.props;return e.layout.containers.length<=1?T.createElement(em,{title:Ph.MN.title,message:Ph.MN.message}):null},this.getContainerProps=e=>{const{selectedTab:t}=this.props,i=t.components[e.i];return(null==i?void 0:i.name)===Ph.YJ.HOME_TILE_GRID?{isResizable:!1}:void 0},this.onDragStop=(e,t,i)=>{const r=this.props.selectedTab.components[t.id].id;this.props.onDragStop(e,t,i,r)},this.onResizeStop=(e,t,i)=>{const r=this.props.selectedTab.components[t.id].id;this.props.onResizeStop(e,t,i,r)},this.onResizeStart=(e,t)=>{if(t.id){const i=this.props.getTabEntityCount(t.id);t.maxHeight=Math.max(t.minHeight?t.minHeight:1,t.height,i);for(const i of e)i.i===t.id&&(i.maxH=t.maxHeight)}},this.getSelectedTabLayout=()=>{const{selectedTab:e}=this.props;if(!e)return null;if(!Gr.currentUserHelper.hasFeatureFlag("UIHomeQuickQueries")){const t=e.layout.containers.map((e=>e.id)).indexOf("home6");if(-1!==t)return al()(e.layout,{containers:{$splice:[[t,1]]}})}if(!Gr.currentUserHelper.hasFeatureFlag("UIMetricsQueryHistory")){const t=e.layout.containers.map((e=>e.id)).indexOf("homeRecentMetrics");if(-1!==t)return al()(e.layout,{containers:{$splice:[[t,1]]}})}return e.layout},this.panelRefs={}}componentDidUpdate(e,t){const i=this.props.selectedTab.layout.containers;e.selectedTab&&e.selectedTab.id===this.props.selectedTab.id&&this.checkNewContainer(i,e.selectedTab.layout.containers)}renderComponentDefinition(e,t){const i=v.u.get(e.name);return T.createElement(i,Object.assign({},e.config,t))}renderHeader(){const{selectedTab:{layout:e,components:t},removeTabLayout:i,addTabLayout:r}=this.props,n=v.u.get(e.header.name),a={layout:e,components:t,removeTabLayout:i,addTabLayout:r};return n?T.createElement(n,Object.assign({},a)):null}render(){const{tabs:e,selectedTab:t,tabLayoutChanged:i}=this.props,r=Gr.currentUserHelper.hasFeatureFlag("UILazy"),n=this.getSelectedTabLayout();if(!n)return null;const a=()=>T.createElement("div",{className:Bh().homeTab},T.createElement(R.LayoutLazy,{layout:n,onLayoutChange:i,onDragStop:this.onDragStop,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,headerComponent:t.layout.header?this.renderHeader():null,getContainerProps:this.getContainerProps,className:Bh().layoutContainer,render:({layout:e})=>e.containers.map((e=>T.createElement("div",{className:"react-grid-item__resizableHandle",key:e.id,ref:t=>{this.panelRefs[e.id]=t},id:e.id},this.renderContainer({container:e})))),renderEmptyPlaceholder:_.noop,isLazyEnabled:r}),this.renderEmptyPlaceholder()),s=e.map((e=>({label:Ge.j.get(e.title),value:e.id,component:a()})));return _.isEmpty(e)?null:T.createElement("div",{className:"home-tabset ux-tabset"},T.createElement(qt.Tabs,{styleProps:{tabsSection:Bh().tabPadding,tabContent:Bh().flex},tabs:s,onTabClick:this.tabClickHandler,activeTab:t.id}))}}var im=i(51482),rm=i.n(im);class nm extends T.PureComponent{constructor(){super(...arguments),this.onToggleSwitch=(e,t)=>{const{props:{layout:i,components:r}}=this;t?this.props.addTabLayout(e,i,r[e].name):this.props.removeTabLayout(e,i,r[e].name)}}renderPanelSettings(){const{props:{layout:{containers:e},components:t}}=this,i=Gr.currentUserHelper.hasFeatureFlag("UIMetricsQueryHistory")?t:_.omit(t,["homeRecentMetrics"]);return T.createElement("div",{className:rm().itemContainer},_.map(i,((t,i)=>{const r=e.find((e=>e.id===i));return T.createElement(qt.Toggle,{defaultToggled:!!r,key:i,className:rm().componentItem,onToggle:this.onToggleSwitch.bind(this,i),"data-sumo-test":"toggle-switch"},t.label&&Ge.j.get(t.label))})))}render(){return T.createElement("div",{className:Wt()(rm().container,this.props.className)},T.createElement("div",null,T.createElement("div",{className:rm().title},Ge.j.get("home.homePanels")),this.renderPanelSettings()),T.createElement(qt.Button,{className:Wt()("md-raised md-accent md-button",rm().settingsButton),onClick:this.props.onClickDone,"data-sumo-test":"panel-settings-done"},Ge.j.get("common.done")))}}var am=i(502),sm=i.n(am);class om extends T.PureComponent{constructor(){super(...arguments),this.state={isSettingsMode:!1},this.toggleSettings=()=>{this.setState((e=>({isSettingsMode:!e.isSettingsMode})))},this.removeToggleOptions=(e,t)=>_.reduce(e,((e,i,r)=>(t.includes(i.id)||(e[r]=i),e)),{})}renderInfoHeader(){return T.createElement("div",{className:sm().container},T.createElement("div",{onClick:this.toggleSettings},T.createElement(qt.Icon,{name:"gear",color:"dolphin",className:sm().icon})))}render(){const{state:{isSettingsMode:e}}=this,t=e?sm().homeHeaderOpen:sm().homeHeaderClosed;return T.createElement("div",{className:Wt()(sm().homeHeader,t)},e?T.createElement(nm,Object.assign({},this.props,{components:this.removeToggleOptions(this.props.components,Ph.sC),className:sm().settingsComponent,onClickDone:this.toggleSettings})):this.renderInfoHeader())}}var lm=i(83322),cm=i.n(lm);function dm(e){const{title:t=""}=e;return T.createElement("div",{className:cm().title,"data-sumo-test":"video-thumbnail-title"},t)}function um(e){const{video:t,thumbnail:i,className:r,openVideo:n,isVerticalLayout:a=!1}=e,{id:s="",title:o=""}=t,[l,c]=T.useState(!1),d=Wt()("video-layout-space",{"video-thumbnail":!a,"video-thumbnail-vertical":a});return T.createElement("div",{className:r||d},T.createElement("div",{className:Wt()("video-thumbnail-layout__image",{"video-thumbnail-layout__image__vertical":a}),onClick:()=>{c(!0),n(t)}},T.createElement("img",{className:Wt()({"video-thumbnail-small":a}),src:i||e.video.thumbnails.default.url,alt:o,"data-sumo-test":"video-thumbnail-image"})),T.createElement(dm,{title:o}),T.createElement(qt.Dialog,{open:l,size:"fullscreen"},T.createElement(qt.Dialog.Title,{titleTooltip:o},o),T.createElement(qt.Dialog.Content,null,T.createElement("iframe",{src:`https://www.youtube.com/embed/${s}`,"data-sumo-test":"video-thumbnail-image",title:o,frameBorder:"0",width:"1200px",height:"500px",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"primary",onClick:()=>c(!1),"data-sumo-test":"done-button"},Ge.j.get("home.done")))))}class pm extends T.Component{renderVideoList(e){return T.createElement("div",{className:Wt()("video-list",cm().videoList)},e.map((e=>T.createElement("div",{key:e.id,className:"video-list__item","data-sumo-test":"video-list-item"},T.createElement(um,{video:e,thumbnail:e.thumbnails.medium.url,className:"layout-padding-right video-thumbnail",openVideo:this.props.openVideo})))))}renderVideoGrid(e,t){return T.createElement("div",{className:"video-grid"},T.createElement("div",{key:e[0].id,className:Wt()("video-grid__main",cm().mainVideo)},T.createElement(um,{video:e[0],thumbnail:e[0].thumbnails.maxres.url,openVideo:this.props.openVideo})),T.createElement("div",{className:"video-grid__side"},T.createElement("div",{className:"compact-video-grid"},e.slice(1).map((e=>T.createElement(um,{video:e,thumbnail:e.thumbnails.medium.url,openVideo:this.props.openVideo,isVerticalLayout:!0}))))))}render(){const{title:e,isList:t=!0}=this.props,i=this.props.videos.filter((e=>{var t;return null===(t=null==e?void 0:e.thumbnails)||void 0===t?void 0:t.medium}));return T.createElement(qt.Card,{className:cm().fullWidth},T.createElement(qt.Card.Header,{type:"panel",text:e}),T.createElement(qt.Card.Content,null,_.isEmpty(i)?T.createElement(g.LoadPlaceHolder,{isLoaded:!1}):T.createElement(g.LoadPlaceHolder,{className:"-row",isLoaded:!0},t?this.renderVideoList(i):this.renderVideoGrid(i,e))))}}var hm=i(93145),mm=i.n(hm);const gm=e=>{const{tiles:t=[],onTileClick:i,isBig:r,isScrollable:n}=e,a=(e=>{const t=Gr.currentUserHelper.hasFeatureFlag("UIUploadWizard")||Gr.currentUserHelper.getOrg().typeHelpers.isTrial&&Gr.currentUserHelper.hasFeatureFlag("UIUploadWizardTrial");return e.filter((e=>(!t||"home.setupWizard"!==e.id)&&(e.privilege?Gr.currentUserHelper.hasPrivilege(e.privilege):!e.permission||Gr.currentUserHelper.hasPermission(e.permission))))})(t);return T.createElement("div",{className:Wt()(mm().tileGrid,{[mm().tileGridScrollable]:n})},a.map((e=>{const[,t]=e.img.split(":"),n="home-tile-"+t;return T.createElement(qt.TileButton,{key:e.id,"data-sumo-test":n,className:mm().tileGridItem,size:r?"regular":"small",onClick:t=>i(t,e),label:Ge.j.get(e.id)},T.createElement(qt.TileButton.Icon,{id:t,name:t}))})))};v.u.register(Ph.YJ.HOME_HEADER,om);class ym extends T.Component{constructor(){super(...arguments),this.windowTitleSuffix="Sumo Logic"}componentDidMount(){_.isEmpty(this.props.tabs)&&this.props.loadHomeTabs(),document.title=U.WINDOW_TYPE_TITLE.home+" | "+this.windowTitleSuffix,g.privacyPolicyService.showPrivacyPolicy()}render(){return T.createElement(tm,Object.assign({},this.props,{onDragStop:Fh.onDragStop,onResizeStop:Fh.onResizeStop}))}}const vm=(0,Te.legacyConnect)(Uh.I0,Fh.default)(ym),fm=[new qr.schema.Entity("videos")];var _m=i(60801);const Sm=({snippet:e})=>{const t=e.resourceId.videoId;return{id:t,title:e.title,description:e.description,thumbnails:e.thumbnails,link:`https://www.youtube.com/watch?v=${t}`}},bm=e=>(0,D.legacyHttpGet)(`https://www.googleapis.com/youtube/v3/playlistItems?playlistId=${e.playlistId}&part=snippet&key=${h.ENVIRONMENT.GOOGLE_API_KEY}`,{headers:null,withCredentials:!1}).then((e=>e.items.map(Sm)));var Em=i(57755);function Tm(e){Em.A.logUserAction({action:"HOME.OPEN_VIDEO",connector:Ph.D0.VIDEO_LIST,videoPanelType:"list",target:e.id,targetDescription:e.title,videoTitle:e.title,videoId:e.id})}i(4459);const xm=(0,cn.createSelector)([e=>e.views.learnVideos,e=>e.entities.videos],((e,t)=>e.map((e=>t[e]))));class Cm extends T.Component{componentDidMount(){const{playlistId:e,videos:t}=this.props;_.isEmpty(t)&&this.props.getPlaylist({playlistId:e})}isList(){return!Gr.currentUserHelper.hasFeatureFlag("UIHomeLearnVideosGrid")}render(){const{videos:e,cardTitle:t=""}=this.props;return T.createElement(pm,{isList:this.isList(),videos:e,title:Ge.j.get(t),openVideo:Tm})}}const Am={getPlaylist:function(e){return t=>bm(e).then((e=>{const i=(e=>(0,qr.normalize)(e,fm))(e);var r;return t((0,Te.entitiesLoaded)(i)),t((r=i.result,{type:_m.k.PLAYLIST_FETCH_SUCCESS,payload:r})),e})).catch((()=>{var e;t((e=[],{type:_m.k.PLAYLIST_FETCH_FAILURE,payload:e}))}))}},wm=(0,Te.legacyConnect)((e=>({videos:xm(e)})),Am)(Cm);class Im{constructor(e,t){this.workspacesService=e,this.viewServices=t}openNewTab(e,t){const i=this.workspacesService.getCurrent(),r=this.viewServices.getService(e);r&&r.newTab(i,t)}}Im.$inject=["workspacesService","viewServices"];const Rm=s.module("sumoApp.workspaces.data",["sumoApp.workspaces"]);let Dm;Rm.service("temporaryNewTabManagementService",Im),Rm.run(["$injector",e=>{Dm=e.get("temporaryNewTabManagementService")}]);const Om=i(38822),Nm=i(15777);class Mm{constructor(e,t){this.$mdDialog=e,this.$timeout=t,this.preload=()=>{E.currentUserHelper.hasFeatureFlag("UIOnboardingCustomIntegrationKubernetes")?(0,E.getUserInterests)().then((e=>{this.load({isUserInterestedInKubernetes:e.includes(E.UserInterest.Kubernetes)})})):this.load({isUserInterestedInKubernetes:!1})},this.load=e=>{const t=new Nm(e);this.view=new Om({el:"#dialogContent_setupWizard__dlg",model:t})},this.$timeout((()=>{this.preload()}))}}Mm.$inject=["$mdDialog","$timeout"];const km={bindToController:!0,controller:Mm,controllerAs:"dialogCtrl",parent:s.element(document.body),template:'\n  <md-dialog class="md-sumo-dialog fullscreen no-transition" id="setupWizard__dlg" flex="none" layout="column" aria-label="Setup Wizard dialog">\n    <md-dialog-content>\n    </md-dialog-content>\n  </md-dialog>\n',dialogSize:"fullpage"},Lm={REPORT:"report",DASHBOARD:"dashboard",METRICS_QUERY:"metricsQuery",METRICS:"metrics",LOG_SEARCH:"logSearch"};(0,re.withIndex)({collectorName:"collector.name",sourceCategory:"category",accessKey:"sumo.accesskey",accessId:"sumo.accessid",ephemeral:"ephemeral",skipRegistration:"skipRegistration",syncSources:"syncSources",disableActionSource:"disableActionSource",disableScriptSource:"disableScriptSource",disableUpgrade:"disableUpgrade",timezone:"timeZone",targetCpuPercent:"targetCPU",proxyHost:"proxy.host",proxyPort:"proxy.port"});class Pm{constructor(e,t,i,r,n,a,s,o,l){this.$mdDialog=e,this.$mdToast=t,this.i18n=i,this.$q=r,this.currentUserHelper=n,this.bentoNavService=a,this.temporaryNewTabManagementService=s,this.contentManagementServiceFactory=o,this.metricsQueryRowParserService=l,this.updateProgress=e=>{this.bentoNavService.updateProgress(e)},this.openSetupWizard=e=>e&&!this.currentUserHelper.get().isInitialSetupRequired?this.$q.resolve():this.canOpenWizard()?(this.updateProgress(!1),k.logService.userTelemetry(`inside SetupWizardService.openSetupWizard with openedFromLaunch=${e} - displaying Setup Wizard to the user`),this.$mdDialog.show(km)):this.$mdToast.show(this.$mdToast.error().textContent(this.i18n.get("contentLibrary.no_manage_collector_permissions"))),this.closeWizard=()=>this.$mdDialog.hide(),this.txnError=e=>{const t=this.$mdToast.error().htmlContent(e);this.$mdToast.show(t)},this.notification=e=>{let t=this.i18n.get("collector.wizard_search_launched");switch(e){case Lm.DASHBOARD:t=this.i18n.get("collector.wizard_dashboard_launched");break;case Lm.METRICS:t=this.i18n.get("collector.wizard_metrics_launched");break;case Lm.METRICS_QUERY:t=this.i18n.get("collector.wizard_query_launched")}const i=this.$mdToast.success().textContent(t);this.$mdToast.show(i)},this.launchMetricsQuery=e=>{g.applicationState.go("app.metrics-new",{drilldownInfo:{panel:{metricsQueryModel:this.metricsQueryRowParserService.buildQueryModel(e.metricsQueryModel),title:e.title},type:_t.zr.WIZARD},viewId:re.idGeneratorService.generateId(!1,!0)}),this.notification(Lm.METRICS_QUERY)},this._launchDashboard=(e,t)=>{const i=e.getRoute(t);i.params.openInLiveMode=!0,g.applicationState.go(i.stateName,i.params),this.notification(Lm.DASHBOARD)},this.launchDashboard=e=>{const t=this.contentManagementServiceFactory.getInstance().getService(F.CONTENT_TYPES.DASHBOARD);t.fetchContentItem(e.id).then(_.partial(this._launchDashboard,t))},this.navigate=(e,t)=>{const i=!(!t||!_.getPath(t,"skipNotification"))&&t.skipNotification;switch(e){case Lm.DASHBOARD:this.launchDashboard(t);break;case Lm.METRICS:this.temporaryNewTabManagementService.openNewTab(e),i||this.notification(Lm.METRICS);break;case Lm.METRICS_QUERY:i||this.notification(Lm.METRICS_QUERY),this.launchMetricsQuery(t)}this.closeWizard()}}canOpenWizard(){const e=this.currentUserHelper.hasFeatureFlag("UIOrganizationsV1");return this.currentUserHelper.hasPermission("MANAGE_COLLECTORS")&&!e}}Pm.$inject=["$mdDialog","$mdToast","i18n","$q","currentUserHelper","bentoNavService","temporaryNewTabManagementService","contentManagementServiceFactory","metricsQueryRowParserService"];var Fm=i(72334);i(10526);class Um{static createDomSafeId(e){return e.replace(/[^a-z0-9]/g,"")}}Um.$inject=[];class Vm{constructor(){this.getIngestExists=(e=3e3)=>{const t=Vm.BASE_URL+"/ingest/exists";return(0,D.legacyHttpGet)(t,{timeout:e}).then((e=>_.isUndefined(_.getPath(e,"exists"))||e.exists))}}}Vm.BASE_URL="/sumo/v1/metrics";var Bm=i(65998);const{ThemeUtilModule:$m}=i(60567);class Hm{constructor(e,t,i){this.userTracking=t,this.currentUserHelper=i,this.$onInit=()=>{this.trackPageView()},this.$onDestroy=()=>{this.trackPageLeave(),$m.resetTheme()},this.getAnnouncementURL=()=>{const e=this.currentUserHelper.getDynamicProperty("ui_metrics_announcement_url")||"https://info.sumologic.com/Ongoing-Website-ULMSLFProductRequest_ProductSign-UpLP.html",t=this.currentUserHelper.get();return`${e}?Email=${encodeURIComponent(t.name)}&orgid=${encodeURIComponent(t.org.id)}`},this.metricsModeStatus=this.currentUserHelper.hasFeatureFlag("UIMetricsCapability")?"ENABLED":"DISABLED",this.announcementURL=e.trustAsResourceUrl(this.getAnnouncementURL()),$m.setTheme("light-theme")}trackPageView(){this.currentUserHelper.hasFeatureFlag("UIMetricsCapability")?this.userTracking.trackUser("Viewing Metrics Query Page",{action:"view",component:"metrics",component_name:"Metrics"},!1,!0):this.userTracking.trackUser("Viewing Metrics Early Access Page",{action:"view",component:"metrics_marketing",component_name:"Metrics Marketing Page"})}trackPageLeave(){this.currentUserHelper.hasFeatureFlag("UIMetricsCapability")?this.userTracking.trackUser("Leaving Metrics Query Page",{action:"exit",component:"metrics",component_name:"Metrics"}):this.userTracking.trackUser("Leaving Metrics Early Access Page",{action:"exit",component:"metrics_marketing",component_name:"Metrics Marketing Page"})}}Hm.$inject=["$sce","metricsUserTracking","currentUserHelper"];class Wm{constructor(e){this.$element=e,this.$onInit=()=>this.$element.addClass("metrics-dashboard-loading")}}Wm.$inject=["$element"];const qm={bindings:{dashboardTitle:"<?",showSpinner:"<?"},controller:Wm,controllerAs:"metricsDashboardCtrl",template:'\n    <md-card class="metrics-dashboard-loading__card">\n      <md-progress-linear md-mode="query" class="metrics-panel__progress md-accent"\n      ng-class="{ \'start\': !metricsDashboardCtrl.showSpinner }"></md-progress-linear>\n      <md-card-header class="metrics-panel__header">\n        <md-card-header-text class="metrics-panel__header__title">\n          <span class="metrics-dashboard-loading__title">{{metricsDashboardCtrl.dashboardTitle}}</span>\n        </md-card-header-text>\n      </md-card-header>\n      <md-card-content>\n      </md-card-content>\n    </md-card>\n  '},jm=[{title:"Avg",visible:!0},{title:"Min",visible:!0},{title:"Max",visible:!0}],Qm={title:"LABEL",visible:!0};class zm{constructor(e,t,i,r,n,a){this.$scope=e,this.i18n=t,this.$timeout=i,this.currentUserHelper=r,this.metricsLegendService=n,this.$filter=a,this.masterSwitch=null,this.sortInReverse=null,this.extractAllSettingsFromSeries=(e,t)=>{const i=e.series.defaults[t];let r={};return _.each(i.dimensions,(e=>{r[e.key]=e})),this.baseColumns.map((e=>e.title)).forEach((e=>{r=_.setPath(r,i[e.toLowerCase()],[e,"value"],{})})),Object.assign(this.metricsLegendService.extractVariableSettingsForSeries(e,t),{id:t,dimensions:i.dimensions,dimensionsTable:r,domSafeId:Um.createDomSafeId(t)})},this.getGridOptions=e=>{if(this.metricsLegendService.isSameCollection(e,this.gridOptions.safeData))_.each(this.gridOptions.safeData,(t=>{const i=this.metricsLegendService.extractVariableSettingsForSeries(e,t.id);Object.assign(t,i)}));else{const t=[],i={};_.each(e.series.defaults,((r,n)=>{e.getSeriesBlockVisibility(n)&&t.push(this.extractAllSettingsFromSeries(e,n)),_.each(r.dimensions,(e=>{_.has(i,e.key)||(i[e.key]=!0)}))})),this.gridOptions.safeData=this.filterLegendByText(t,this.filterText),this.gridOptions.safeData=null===this.sortInReverse?this.metricsLegendService.sortGridDataByQueryName(this.gridOptions.safeData):this.$filter("orderBy")(this.gridOptions.safeData,(e=>e.dimensionsTable[this.sortKey].value),this.sortInReverse);const r=_.getPath(e,"legendSettings");if(!_.isUndefined(_.getPath(r,"columns"))&&r.columns.length>0){const e=_.indexBy(this.baseColumns,"title"),t=r.columns.filter((t=>_.has(i,t.title)||_.has(e,t.title)));_.each(r.columns,(e=>{_.has(i,e.title)&&delete i[e.title]})),this.gridOptions.columns=t.concat(this.metricsLegendService.normalizeDimensionForColumn(i))}else this.gridOptions.columns=this.baseColumns.concat(this.metricsLegendService.normalizeDimensionForColumn(i))}},this.onChartSettingsChange=(e,t,i)=>{e&&i&&i.legendCtrl&&this.$timeout(this.updateGridOptions,400,!0,i.legendCtrl.chart,i.legendCtrl.legend)},this.updateGridOptions=e=>{e&&this.getGridOptions(e)},this.toggleMasterSwitch=e=>{this.resetAllSeriesVisibility(e)},this.onLegendItemClick=e=>{_.getPath(this.chart,"uiSettings.focusedSeriesIds")&&this.safeActions.chartModel.removeSeriesSelection(this.chart.id),this.safeActions.seriesSettings.updateSeriesVisibility(e.id,!e.serieVisibility)},this.openRowSettings=(e,t)=>{const i=_.getPath(this,"metricsSearchUi.seriesSettingsOpenRow")!==t;this.safeActions.seriesSettings&&this.safeActions.seriesSettings.showSeriesSettings&&this.safeActions.seriesSettings.showSeriesSettings(t,i)},this.onRowMouseEnter=e=>{this.safeActions.chartModel.highlightSeries(this.chart.id,e)},this.onRowMouseLeave=()=>{this.safeActions.chartModel.unhighlightSeries(this.chart.id)},this.updateLegendSettings=e=>{this.safeActions.chartModel.updateLegendSettings&&this.safeActions.chartModel.updateLegendSettings(this.chart.id,e)},this.updateFilterText=e=>{this.safeActions.metricsLegendSettings.setMetricsLegendFilterText(e)},this.filterLegendByText=(e,t)=>{if(_.isUndefined(t))return e;const i=SumoUtil.escapeRegExp(t),r=new RegExp(i,"i"),n=this.gridOptions.columns;return e.filter((e=>{if(_.isUndefined(r))return!0;for(const t of n){const i=_.isUndefined(e.dimensionsTable[t.title])?"":e.dimensionsTable[t.title].value;if(t.visible&&!_.isUndefined(i)&&i.toString().search(r)>=0)return!0}return!1}))},this.shouldShowCustomLabel=this.currentUserHelper.hasFeatureFlag("UIMetricsCustomLabel"),this.baseColumns=this.shouldShowCustomLabel?[Qm].concat(jm):jm,this.gridOptions={gridData:[],safeData:[],maxRows:6,minRows:6,overlayMessage:this.i18n.get("charts.noResultsStateText"),usePagination:!1,scrollRow:{index:null},columns:[]}}get safeActions(){return(0,re.ensureDefined)(this.actions)}$onChanges(e){if(e.chart&&e.chart.isFirstChange()&&(this.updateGridOptions(this.chart),this.$scope.$watch((()=>_.getPath(this,"chart.update")),this.onChartSettingsChange,!0)),e.chart){const t=_.getPath(e,"chart.previousValue.series.defaults"),i=_.getPath(e,"chart.currentValue.series.defaults"),r=_.getPath(e,"chart.previousValue.series.custom"),n=_.getPath(e,"chart.currentValue.series.custom");if(!(_.isUndefined(t)||_.isUndefined(r)||s.equals(t,i)&&s.equals(r,n))){const e=this.metricsLegendService.checkAllSeriesVisibility(this.chart.series.defaults,this.chart.series.custom);this.masterSwitchStatus=_t.xC[e],this.masterSwitch=e!==_t.xC.ALLOFF}}if(e.metricsSearchUi){const t=_.getPath(e,"metricsSearchUi.currentValue.metricsLegendSettings.filterText");_.isUndefined(t)||(this.filterText=t,this.updateGridOptions(this.chart))}}$onDestroy(){this.sortInReverse=null}resetAllSeriesVisibility(e=!0){this.safeActions.chartModel.resetAllSeriesVisibility(this.chart.id,this.chart.series.defaults,e);const t=_.getPath(this.chart,"uiSettings.tempSeriesVisibility");t&&this.safeActions.chartModel.unsetSelectedSeries(this.chart.id,t)}sortBy(e,t=!1){this.sortKey=e,this.sortInReverse=t,this.updateGridOptions(this.chart)}}zm.$inject=["$scope","i18n","$timeout","currentUserHelper","metricsLegendService","$filter"];const Gm={bindings:{chart:"<",actions:"<",selectedChartLineId:"<",metricsSearchUi:"<",isLegendReady:"<"},controller:zm,controllerAs:"legendCtrl",template:'\n    <div class="metrics-legend-container">\n      <div class="table-card">\n        <div class="table-card__header">\n          <search-box icon="search" callback="legendCtrl.updateFilterText(text)"\n              placeholder="{{:: \'metrics.filterLegendSeries\' | i18nText}}"\n              on-return-only="true">\n          </search-box>\n        </div>\n        <legend-table\n          master-switch="legendCtrl.masterSwitch"\n          master-switch-status="legendCtrl.masterSwitchStatus"\n          is-legend-ready="legendCtrl.isLegendReady"\n          should-show-custom-label="legendCtrl.shouldShowCustomLabel"\n          active-row="legendCtrl.metricsSearchUi.seriesSettingsOpenRow"\n          grid-options="legendCtrl.gridOptions"\n          open-row-settings="legendCtrl.openRowSettings"\n          show-row-settings="legendCtrl.actions.seriesSettings.showSeriesSettings !== undefined"\n          on-row-mouseenter="legendCtrl.onRowMouseEnter(seriesId)"\n          on-row-mouseleave="legendCtrl.onRowMouseLeave(seriesId)"\n          on-legend-item-click="legendCtrl.onLegendItemClick(row)"\n          toggle-master-switch="legendCtrl.toggleMasterSwitch(status)"\n          update-legend-settings="legendCtrl.updateLegendSettings(settings)"\n          sort-by="legendCtrl.sortBy(sortKey, reverse)">\n         </legend-table>\n     </div>\n    </div>'};class Km{constructor(e){this.$element=e,this.canExpandIsKnown=!1,this.isTextOverflown=()=>{const e=this.$element.find(".legend-time-series-wrapper").get(0);return e.offsetWidth<e.scrollWidth},this.showToggle=()=>{this.canExpand||this.canExpandIsKnown||(this.canExpandIsKnown=!0,this.canExpand=this.isTextOverflown())},this.toggleOpenState=()=>{this.canExpand&&!rangy.getSelection().toString()&&(this.isOpen=!this.isOpen)}}$onInit(){this.isOpen=!1;let e="",t="",i="";this.boldPreview=!0,this.dimensions.forEach((r=>{const n=`${r.key}=${r.value} `;e+=n,r.legend?t+=n:i+=n,this.boldPreview=!this.boldPreview||!r.legend,this.canExpand=this.canExpand||!r.legend})),_.isBlank(t)&&(t=i,i=""),this.title=e,this.dimensionsPreview=t,this.dimensionsExtra=i}}Km.$inject=["$element"];const Ym={bindings:{dimensions:"<",faded:"<"},controller:Km,controllerAs:"legendDimensionsCtrl",template:'\n  <div class="legend-time-series-wrapper" title="{{legendDimensionsCtrl.title}}"\n    ng-class="{\'is-open\': legendDimensionsCtrl.isOpen, faded: !legendDimensionsCtrl.faded, \'show-expand\': legendDimensionsCtrl.canExpand }"\n    ng-click="legendDimensionsCtrl.toggleOpenState()"\n    ng-mouseenter="legendDimensionsCtrl.showToggle()">\n      <span class="dimension-key is-preview">\n        {{::legendDimensionsCtrl.dimensionsPreview}}\n      </span>\n      <span class="dimension-key">\n        {{::legendDimensionsCtrl.dimensionsExtra}}\n      </span>\n    <span class="expand-icon"></span>\n  </div>'};class Zm{constructor(e,t){this.$scope=e,this.metricsLogMessagesService=t,this.$onChanges=e=>{if(_.getPath(e,"queryString")){const t=_.getPath(e,"queryString");t.previousValue!==t.currentValue&&this.cleanMessages()}},this.convertTimestamp=e=>ht.userDateService.formatDateTimeSmart(Number(e)),this.createLogSearch=(e,t)=>{this.isLoading=!0,this.messages=[],this.metricsLogMessagesService.startPolling(this.queryString,e,t).then((e=>{this.searchQueryId=e.searchQueryId,this.metricsLogMessagesService.pollStatus(this.searchQueryId,this.getMessages)}))},this.getMessages=(e=!1)=>{const t={offset:this.messages.length,length:10,highlight:!0};return this.metricsLogMessagesService.getRawMessages(this.searchQueryId,t).then((t=>{this.isLoading=!1,this.messages=e?this.messages.concat(t):t}))},this.onPageDown=e=>(this.isLoading=!0,this.getMessages(!0))}$onInit(){this.isLoading=!1,this.messages=[],this.$scope.$watch("$ctrl.selectedTimeslice",((e,t)=>{if(e){const{startTime:t,endTime:i}=e;t&&i?this.createLogSearch(t,i):this.cleanMessages()}}))}cleanMessages(){this.messages=[]}}Zm.$inject=["$scope","metricsLogMessagesService"];const Xm={bindings:{selectedTimeslice:"<",queryString:"<"},controller:Zm,template:'\n    <div class="metrics-log-messages-container">\n      <table class="ux-grid" st-table="displayMessages" st-safe-src="$ctrl.messages">\n        <thead>\n          <tr class="table-header">\n            <th class="grid-cell metrics-log-message__index" column-header="\'metrics.metricsLogMessagesHeaderIndex\' | i18nText"></th>\n            <th class="grid-cell metrics-log-message__timestamp" column-header="\'metrics.metricsLogMessagesHeaderTime\' | i18nText"></th>\n            <th class="grid-cell metrics-log-message__message" column-header="\'metrics.metricsLogMessagesHeaderMessages\' | i18nText"></th>\n          </tr>\n        </thead>\n        <tbody class="table-body"\n          infinite-scroll\n          infinite-scroll-enabled="true"\n          on-page-down="$ctrl.onPageDown(scrollState)">\n          <tr ng-repeat="row in displayMessages track by $index"\n            class="grid-row">\n            <td class="grid-cell metrics-log-message__index" cell-content="$index+1"></td>\n            <td class="grid-cell metrics-log-message__timestamp" cell-content="$ctrl.convertTimestamp(row._messagetime)"></td>\n            <td class="grid-cell metrics-log-message__message">\n              <div ng-bind-html="row._raw"></div>\n              <showmore max-height="165px"></showmore>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div ng-if="$ctrl.isLoading" class="card-overlay">\n        <span class="spinner is-visible"></span>\n      </div>\n      <div ng-if="!$ctrl.isLoading && $ctrl.messages.length === 0" class="card-overlay">\n        <span >{{:: \'metrics.metricsLogMessagesEmpty\' | i18nText}}</span>\n      </div>\n    </div>\n  '},Jm={key:void 0,value:void 0,keyAutocompleteData:void 0,valueAutocompleteData:void 0},eg=["_collector","_index","_source","_sourceCategory","_sourceHost","_sourceName","_view"];class tg{constructor(e,t,i,r,n,a,s,o){this.$scope=e,this.$timeout=t,this.currentUserHelper=i,this.metricsLogQueryRowService=r,this.i18n=n,this.safeApplyWrapper=a,this.$templateCache=s,this.$q=o,this.clearQuery=()=>{this.metadataPairs=[_.clone(Jm)];this.displayQueryString="",this.updateAndRunQuery()},this.onKeyup=()=>{this.checkMetadataDropdownState()},this.onValueChanges=(e,t)=>{const i=e.getDoc().getValue(),r=$(e.getWrapperElement()).closest(".metadataPair.-value").attr("data-id");if(this.metadataPairs[r]){const t=this.metadataPairs[r].key;if(_.isEmpty(t))return;{const n=this.getValueCompletions(t,i),a=tg.convertToSuggestions(n,null!=r?r:"");this.updateValueAutocompleteData(e,r,t,a)}}},this.isValid=()=>{this.warnings=[];let e=!0;return e=e&&this.validateHasMetricsQuery(),e=e&&this.validateLogQuery(),e},this.$postLink=()=>{this.metricsDashboardPanelSettingsCtrl&&this.metricsDashboardPanelSettingsCtrl.registerInputControl(this)},this.onQueryRowMouseEnter=()=>{this.showQueryInputs=!0},this.onQueryRowMouseLeave=()=>(this.isMetadataOpen||(this.updateQueryString(),this.showQueryInputs=""!==this.displayQueryString||void 0!==this.metadataPairs[0].key),this.$q.when(!0)),this.onMetadataOpen=()=>{this.isMetadataOpen=!0},this.onMetadataClose=()=>(this.isMetadataOpen=!1,this.updateQueryString(),this.$q.when(!0)),this.onMetadataChange=e=>{""===this.metadataPairs[e].key&&(this.metadataPairs.splice(e,1),this.checkMetadataDropdownState())},this.parseOutMetadataPair=e=>{const t=e.match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g);return _.chain(t).map((e=>{const t=e.trim();if(t.indexOf("=")>0){const[e,i]=t.split("=");return eg.includes(e)?void this.metadataPairs.push({key:e,value:i,keyAutocompleteData:void 0,valueAutocompleteData:void 0}):t}return t})).compact().value().join(" ")},this.applySuggestion=(e,t,i,r)=>{if(t){const i=e.getDoc();e.operation((()=>{i.setValue(t.replacement.text),i.setCursor(0,t.replacement.pos)})),this.highlightedItem=null;const r=this.metadataPairs[t.metadataPairIndex];r.keyAutocompleteData=null,r.valueAutocompleteData=null,this.$timeout(this.checkMetadataDropdownState,250)}},this.checkMetadataDropdownState=()=>{const e=_(this.metadataPairs).reject(tg.pairIsComplete);_.isEmpty(e)&&this.metadataPairs.push(_.clone(Jm))},this.constructQueryString=()=>`${_(this.metadataPairs).reduce(((e,t)=>_.isEmpty(t.key)||_.isEmpty(t.value)?e:`${e} ${t.key}=${t.value}`),"")} ${this.displayQueryString}`,this.getValueCompletions=(e,t)=>{let i=this.metricsLogQueryRowService.getCompletions(e);if(!_.isEmpty(t)){const e=t.toLowerCase();i=_(i).filter((t=>0===t.toLowerCase().indexOf(e)))}return i},this.highlightFn=e=>{this.highlightedItem=e},this.updateQueryString=()=>{this.queryString=this.constructQueryString()},this.handleKeyup=(e,t)=>{switch(t.keyCode){case re.NAVIGATION_KEYS.ENTER.keyCode:this.updateAndRunQuery();break;default:return}this.checkMetadataDropdownState()},this.updateAndRunQuery=()=>{this.updateQueryString(),this.$timeout((()=>{this.$scope.$emit("runQuery")}),100)},this.validateHasMetricsQuery=()=>!_.isBlank(_.getPath(this.metricsQueryModel,"queryRows[0].queryString"))||(this.warnings=[{message:this.i18n.get("metrics.logQueryRequiresMetricsQuery")}],!1),this.validateLogQuery=()=>!(this.displayQueryString.indexOf("|")>-1)||(this.warnings=[{message:this.i18n.get("metrics.logQueryInvalid")}],!1),this.updateValueAutocompleteData=(e,t,i,r)=>{if(_.isEmpty(r))this.metadataPairs[t].valueAutocompleteData=void 0;else{const n=_.partial(this.applySuggestion,e);this.metadataPairs[t].valueAutocompleteData={applyFn:n,highlightFn:this.highlightFn,data:{suggestions:r},editor:e,highlightText:"",prepareViewAllSuggestionsFn:()=>{const e=this.getValueCompletions(i,null);return tg.convertToSuggestions(e,t)}}}},this.handleValueFocus=(e,t)=>{if(!t)return;const i=$(t.target).closest(".metadataPair.-value").attr("data-id"),r=this.metadataPairs[i].key;if(!r)return;const n=e.getDoc().getValue(),a=this.getValueCompletions(r,n),s=tg.convertToSuggestions(a,null!=i?i:"");this.updateValueAutocompleteData(e,i,r,s)}}static convertToSuggestions(e,t){const i=_(e).map((e=>(/\s/.test(e)&&(e=`"${e}"`),{count:-1,display:e,docId:"docId",replacement:{text:e,pos:e.length},metadataPairIndex:parseInt(t,10)})));return _.isEmpty(i)?[]:[{sectionName:void 0,sectionType:void 0,items:i}]}static pairIsComplete(e){return!_.isEmpty(e.key)&&!_.isEmpty(e.value)}$onInit(){const e=_.clone(this.queryString);this.metadataPairs=[],e?(this.displayQueryString=this.parseOutMetadataPair((0,_t.w4)(e)),this.showQueryInputs=!0):(this.displayQueryString="",this.showQueryInputs=!1),this.metadataPairs.push(_.clone(Jm)),this.codeMirrorHandlers={changes:this.safeApplyWrapper(this.$scope,this.onValueChanges),keyup:this.safeApplyWrapper(this.$scope,this.handleKeyup),focus:this.safeApplyWrapper(this.$scope,this.handleValueFocus),blur:this.safeApplyWrapper(this.$scope,this.updateQueryString),mousedown:()=>{}},this.editorOptions={keyMap:"default",lineWrapping:!0,onLoad:e=>{this.editor=e,e.setOption("autoRefresh",!0),e.setOption("extraKeys",{Enter:$.noop,Tab:!1,"Shift-Tab":!1}),e.setOption("placeholder","Keywords and Fields"),e.setOption("tabindex",3),e.on("keyup",this.codeMirrorHandlers.keyup),e.on("blur",this.codeMirrorHandlers.blur)}},this.valueEditorOptions={onLoad:e=>{this.valueEditor=e,e.setOption("autoRefresh",!0),e.setOption("extraKeys",{Enter:$.noop,Tab:!1,"Ctrl-Space":this.safeApplyWrapper(this.$scope,this.handleValueFocus),"Shift-Tab":!1}),e.setOption("placeholder","Value"),e.setOption("tabindex",3),e.on("changes",this.codeMirrorHandlers.changes),e.on("keyup",this.codeMirrorHandlers.keyup),e.on("focus",this.codeMirrorHandlers.focus),e.on("blur",this.codeMirrorHandlers.blur),e.on("mousedown",this.codeMirrorHandlers.mousedown)}},this.warnings=[],this.validMetadata=eg,this.isMetadataOpen=!1}$onDestroy(){this.editor&&(this.editor.off("keyup",this.codeMirrorHandlers.keyup),this.editor.off("blur",this.codeMirrorHandlers.blur),this.editor=void 0),this.valueEditor&&(this.valueEditor.off("changes",this.codeMirrorHandlers.changes),this.valueEditor.off("keyup",this.codeMirrorHandlers.keyup),this.valueEditor.off("focus",this.codeMirrorHandlers.focus),this.valueEditor.off("blur",this.codeMirrorHandlers.blur),this.valueEditor.off("mousedown",this.codeMirrorHandlers.mousedown),this.valueEditor=void 0)}}tg.$inject=["$scope","$timeout","currentUserHelper","metricsLogQueryRowService","i18n","safeApplyWrapper","$templateCache","$q"];const ig={bindings:{queryString:"=",metricsQueryModel:"<?"},controller:tg,require:{metricsDashboardPanelSettingsCtrl:"^?metricsDashboardPanelSettings"},template:'\n    <query-row class="is-on log-query-row"\n      ng-mouseenter="$ctrl.onQueryRowMouseEnter()"\n      ng-mouseleave="$ctrl.onQueryRowMouseLeave()">\n      <query-row-icon class="query-row-icon"\n        ng-class="{ \'is-clickable\': vm.actions.blockSettings.toggleQueryRowVisible }">\n        <div class="colored-box -logs">\n          <md-icon\n              md-svg-icon="log-search"\n              style="height: 25px; width: 25px;"></md-icon>\n        </div>\n      </query-row-icon>\n\n      <query-row-actions class="query-row-actions">\n        <ux-icon-button\n          data-sumo-test="trash-icon"\n          tooltip\n          tooltip-content="{{ ::\'metrics.metricsQueryRowDeleteIconTooltip\' | i18nText }}"\n          icon="trash"\n          svg="true"\n          click-callback="$ctrl.clearQuery()">\n        </ux-icon-button>\n\n        \x3c!-- A spacer is needed because of the Intercom icon--\x3e\n        <div class="spacer"></div>\n      </query-row-actions>\n\n      <div class="log-query-row__empty-container" ng-if="!$ctrl.showQueryInputs">\n        <span class="log-query-row__empty-container__text">{{:: \'metrics.emptyQueryLabel\' | i18nText}}</span>\n      </div>\n      <div class="log-query-row__container" ng-if="$ctrl.showQueryInputs">\n        <div ng-repeat="pair in $ctrl.metadataPairs track by $index"\n          class="log-query-row__metadata-container">\n          <md-input-container md-no-float md-theme="formTheme">\n            <md-select\n              placeholder="{{:: \'metrics.metadataLabel\' | i18nText}}"\n              aria-label="_"\n              ng-attr-aria-label="metadata-field-{{$index}}"\n              name="metadata-field-{{$index}}"\n              class="metadataPair -key"\n              data-sumo-test="metadata-field-{{$index}}"\n              data-id="{{$index}}"\n              ng-model="pair.key"\n              md-select-preview-pane="{{$ctrl.helpPreviewUrl}}"\n              tabindex="3"\n              md-on-open="$ctrl.onMetadataOpen()"\n              md-on-close="$ctrl.onMetadataClose()"\n              ng-change="$ctrl.onMetadataChange($index)">\n              <md-option\n                class="remove-metadata"\n                value="">\n                {{ :: \'metrics.removeOption\' | i18nText }}\n              </md-option>\n              <md-option\n                ng-repeat="validMetadataField in $ctrl.validMetadata"\n                value="{{ ::validMetadataField }}">\n                {{ ::validMetadataField }}\n              </md-option>\n            </md-select>\n          </md-input-container>\n          <div>\n            {{ ::\'metrics.metricsLogQueryRowMetadataSeparator\' | i18nText }}\n          </div>\n          <div\n            class="metadataPair -value"\n            data-sumo-test="metadata-value-{{$index}}"\n            data-id="{{$index}}"\n            ui-codemirror\n            ui-codemirror-opts="$ctrl.valueEditorOptions"\n            ng-model="pair.value"\n          </div>\n        </div>\n\n        <div\n          data-sumo-test="query"\n          ui-codemirror\n          ui-codemirror-opts="$ctrl.editorOptions"\n          ng-model="$ctrl.displayQueryString"\n          class="log-query-row__query">\n        </div>\n      </div>\n    </query-row>\n    <ul class="mqb__warnings-container" ng-show="$ctrl.warnings.length > 0">\n      <li ng-repeat="warning in $ctrl.warnings" compile="warning.message">\n      </li>\n    </ul>\n  '};var rg=i(59151);function ng(){return{restrict:"E",scope:{queryModelId:"@",queryModel:"<",actions:"<",advancedMode:"<",chart:"<",timeRange:"<",metricsSearchUi:"<"},controller:ag,controllerAs:"vm",bindToController:!0,link:function(e,t,i,r){t.addClass("metrics-query-builder"),r&&r.registerInputControl(e.vm)},templateUrl:"js/features/metrics/views/metricsQueryBuilder/metrics-query-builder.html",transclude:!0,require:"^?metricsDashboardPanelSettings"}}ng.$inject=[];class ag{constructor(e,t,i,r){this.$scope=e,this.$timeout=t,this.i18n=i,this.currentUserHelper=r,this.convertIndexToRowId=rg.J,this.$onChanges=e=>{e.queryModel&&this.recalculateQueriesWithTimeshift()},this.getResults=()=>{this.$scope.$emit("runQuery")},this.isValid=()=>!0,this.onQueryUpdate=e=>{this.recalculateQueriesWithTimeshift(),this.queryModelActions.updateRow(this.queryModelId,e)},this.addQueryRow=e=>({queryString:"",rowId:e,rowVars:[]}),this.checkIsTagAutofocus=()=>_(this.queryModel.queryRows).all((e=>0===e.queryString.trim().length)),this.addMetricsQuery=e=>{if(this.debounceAddNewRow){const t=this.addQueryRow(e);this.debounceAddNewRow(this.queryModelId,t)}},this.removeOrResetQueryRow=(e,t)=>{this.actions.metricsSearch.removeQueryRowAndConsolidateRowIds(this.queryModelId,e.rowId)},this.shouldShowQueryRowLetter=e=>{let t=document.activeElement;for(;null!==t&&!t.hasAttribute("expose-scope");)t=t.parentElement;if(null!==t){const e=s.element(t)[0].scope().vm;if(e&&e.editor){const t=e.editor.getDoc(),i=t.getCursor("from").ch;if(i>0&&"#"===t.getValue().substr(i-1,1))return!0}}return!1},this.removeQuery=(e,t)=>{this.removeOrResetQueryRow(e,t)},this.checkQueryRowsState=()=>{const e=_(this.queryModel.queryRows).filter((e=>0===e.queryString.trim().length));let t;if(0===this.queryModel.queryRows.length)t="A";else if(0===e.length&&this.queryModel.queryRows.length<rg.m.MAX_QUERY_ROWS){const e=_(this.queryModel.queryRows).last().rowId;t=(0,re.getRowNextUniqueKey)(e)}t&&this.addMetricsQuery(t)},this.toggleQueryRowVisibility=e=>{const t=_.getPath(this,"actions.blockSettings.toggleQueryRowVisible");if(_.isFunction(t)){let i=_.getPath(this,`chart.blockSettings[${e}].visible`);i=void 0===i||i,t(e,!i);_.getPath(this.chart,"uiSettings.focusedSeriesIds")&&this.actions.chartModel&&this.actions.chartModel.removeSeriesSelection(this.chart.id),this.warnings&&this.warnings.some((e=>"metrics:too_many_query_results"===e.key))&&this.getResults()}},this.containsTimeshiftOperator=e=>(!_.isEmpty(e.rowVars)?this.queryModel.queryRows:[e]).some((e=>!_.isEmpty(e.queryString)&&e.queryString.toLowerCase().includes("timeshift"))),this.handleErrors=(e=[],t)=>{const i=e.reduce(((e,t)=>(t.values.rowId.length>0?e.rowInfo.push(t):e.generalInfo.push(t),e)),{generalInfo:[],rowInfo:[]});this.errors=_.groupBy(i.rowInfo,(e=>e.values.rowId)),this.warnings=i.generalInfo}}$onInit(){this.__=this.i18n.get("metrics"),this.hasErrors=!1,this.isTagAutofocus=this.checkIsTagAutofocus,this.toggleTooltipContent="",this.isNewDashboardUi=!0,this.queryModelActions=_.isUndefined(this.actions.queryModel)?this.actions:this.actions.queryModel,this.queryModelActions.addRow&&(this.debounceAddNewRow=_.debounce(this.queryModelActions.addRow,300)),this.$scope.$watch("vm.queryModel.queryRows",this.checkQueryRowsState),this.$scope.$watch("vm.queryModel.errors",this.handleErrors),this.$scope.$on("$destroy",(()=>this.queryModelActions.update(this.queryModel)))}openRowSettings(e,t){const i=_.getPath(this,"metricsSearchUi.rowSettingsOpenRow")!==t;this.actions.blockSettings.showRowSettings(t,i)}recalculateQueriesWithTimeshift(){this.queriesWithTimeshift=this.queryModel.queryRows.filter((e=>this.containsTimeshiftOperator(e))).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.rowId]:!0})),{})}}ag.$inject=["$scope","$timeout","i18n","currentUserHelper"];class sg{constructor(e,t,i,r,n){this.scope=e,this.i18n=t,this.metricsQueryRowStyleService=i,this.metricsQueryRowParserService=r,this.currentUserHelper=n,this.handleInputRead=(e,t)=>{this.tokenizeQueryRow(t,e)},this.handleDelete=(e,t)=>{this.tokenizeQueryRow(t,e)},this.handleSpace=(e,t)=>{this.tokenizeQueryRow(t,e)},this.tokenizeQueryRow=(e,t,i=!0)=>{i&&this.debounceStyleQuery(e,t,this.queryRowModel),this.onQueryUpdate&&this.onQueryUpdate()(this.queryRowModel)},this.syncQueryModels=e=>{const t=this.metricsQueryRowParserService.buildQueryRowModel(e);_.extend(this.queryRowModel,t)}}$onInit(){this.__=this.i18n.get("metrics"),this.hasFocus=!1,this.isHover=!1,this.visibility=!!_.isUndefined(this.blockSettings)||this.blockSettings.visible,this.debounceStyleQuery=_.debounce(this.metricsQueryRowStyleService.styleQuery,25),this.shouldShowQueryRowId=!!_.isUndefined(this.shouldShowQueryRowId)||this.shouldShowQueryRowId,this.editorOptions={keyMap:"default",lineWrapping:!0,mode:"text/x-metrics",autofocus:this.isLast&&this.isFirst&&_.isEmpty(this.queryRowModel.queryString.trim()),onLoad:e=>{this.editor=e}},this.ghostEditorOptions={keyMap:"default",lineWrapping:!0,mode:"text/x-metrics",readOnly:"nocursor",onLoad:e=>{this.ghostEditor=e}}}$onDestroy(){this.editor=void 0,this.ghostEditor=void 0}}sg.$inject=["$scope","i18n","metricsQueryRowStyleService","metricsQueryRowParserService","currentUserHelper"];var og=i(16826);function lg(e,t,i){return{restrict:"E",scope:{checkQueryRowsState:"&",cleanupQueryRows:"&",getMetricsResults:"&",id:"@",index:"=",isFirst:"=",isNewDashboardUi:"=",isLast:"=",onQueryUpdate:"&",queryModelId:"@",queryRowModel:"=",rowErrors:"=",shouldShowQueryRowId:"=",timerange:"=",type:"=",visibility:"<",actions:"="},controller:"MetricsQueryRowController",controllerAs:"vm",bindToController:!0,link:function(t,r,n,a){const s=_.debounce(m,250);let o;t.firstShow=!1;let l,c=!1;a.$ghostQueryBox=r.find(".metrics-query-input-box.ghost-text"),a.$queryBox=r.find(".metrics-query-input-box:not(.ghost-text)"),a.$codemirrorBox=a.$queryBox.find(".CodeMirror"),a.$codemirrorLines=a.$codemirrorBox.find(".CodeMirror-lines"),e((()=>{if(!_.isUndefined(a.$ghostQueryBox)){const e=a.$ghostQueryBox.position().left;a.$queryBox.css("left",`${e}px`),function(){const e=r.find(".metrics-query-row__actions").width();a.$codemirrorLines.css("padding-right")!==e&&a.$codemirrorLines.css("padding-right",`${e}px`)}()}}));const d=a.__;o=a.editor;const u=function(){const e={beforeChange:i(t,p),completionPick:i(t,h),focus:i(t,f),cursorActivity:i(t,s)};o.on("beforeChange",e.beforeChange),o.on("completionPick",e.completionPick),o.on("focus",e.focus),o.on("cursorActivity",e.cursorActivity);const r=og.Observable.fromEvent(o,"keyup",((...e)=>e[1]));return{onKeyUpSubscription:r.debounce(250).filter(g).subscribe(y),handlers:e}}();function p(e,t){const i=t.text.join("").replace(/\n/g,"");return t.update&&t.update(t.from,t.to,[i]),!0}function h(e){e.isHeader||s()}function m(){if(!_.isUndefined(o)&&o.hasFocus()){o.setOption("placeholder",d.metricsQueryRowRawPlaceholder);const e=o.getDoc();let t=e.getValue();const i=e.getCursor("from").ch,r=e.getCursor("to").ch;let n=r;if(i!==r){const e=t.substring(0,i),a=t.substring(r);t=e+a,n=i}const s={queryId:a.queryModelId,query:t,pos:n,queryStartTime:a.timerange.startTime,queryEndTime:a.timerange.endTime,apiVersion:"0.2.0"};a.handleInputRead(o,a.queryModelId,a.timerange,s),v()}}function g(e){switch(e.keyCode){case $.ui.keyCode.ENTER:case $.ui.keyCode.BACKSPACE:case $.ui.keyCode.DELETE:case $.ui.keyCode.SPACE:case $.ui.keyCode.ESCAPE:return!0;default:return!1}}function y(e){switch(e.keyCode){case $.ui.keyCode.ENTER:e.altKey||e.shiftKey||function(){c||(a.tokenizeQueryRow(a.queryModelId,o,true),v(),a.getMetricsResults());c=!1}();break;case $.ui.keyCode.BACKSPACE:case $.ui.keyCode.DELETE:break;case $.ui.keyCode.SPACE:a.handleSpace(o,a.queryModelId,a.timerange),v();break;default:return}}function v(){l&&l.clear();const e=o.getDoc().getValue(),t=e.indexOf("//");if(t>-1){const i=e.length,r=o.getDoc().markText({line:0,ch:t},{line:0,ch:i},{className:"comment",startStyle:"comment-start",endStyle:"comment-end",clearOnEnter:!1});l=r}}function f(){a.$codemirrorBox.removeClass("-error"),a.hasFocus=!0,!_.isNull(a.autocompleteData)&&_.getPath(a.autocompleteData,"data.suggestions")||s()}o.setOption("autoRefresh",!0),o.setOption("extraKeys",{Enter:$.noop,Tab:!1,"Shift-Tab":!1,Up:$.noop,Down:$.noop,"Ctrl-Space":m}),o.setOption("placeholder",d.metricsQueryRowRawPlaceholder),o.setOption("tabindex",1),t.$watch("vm.queryRowModel.queryString",(function(t,i){a.syncQueryModels({queryString:t,rowId:a.queryRowModel.rowId}),a.isLast&&a.index<rg.m.MAX_QUERY_ROWS&&t.trim().length>0&&e(a.checkQueryRowsState,250),a.tokenizeQueryRow(a.queryModelId,o),v()})),t.$watch("vm.rowErrors",(function(e,t){e!==t&&(e&&e.length>0&&!a.$codemirrorBox.hasClass(".CodeMirror-focused")?a.$codemirrorBox.addClass("-error"):a.$codemirrorBox.removeClass("-error"))})),t.$on("$destroy",(()=>{u.onKeyUpSubscription&&u.onKeyUpSubscription.dispose(),o.off("beforeChange",u.handlers.beforeChange),o.off("completionPick",u.handlers.completionPick),o.off("focus",u.handlers.focus),o.off("cursorActivity",u.handlers.cursorActivity),_.getPath(o,"state.completionActive")&&o.state.completionActive.close(),o=void 0,a.$ghostQueryBox=void 0,a.$queryBox=void 0,a.$codemirrorBox=void 0,a.$codemirrorLines=void 0}))},templateUrl:"js/features/metrics/views/metricsQueryBuilder/metricsQueryRow/raw-metrics-query-row.html",transclude:!0}}lg.$inject=["$timeout","currentUserHelper","safeApplyWrapper"];class cg{constructor(e,t,i,r,n,a,s,o,l,c,d){this.metricsPageHelper=e,this.metricsSearchScratchpadActions=t,this.metricsActions=i,this.metricsWorkspaceHelperService=r,this.$element=n,this.$scope=a,this.metricsWorkspaceViewService=s,this.logService=o,this.$mdToast=l,this.i18n=c,this.metricsPageService=d,this.performanceEvents={componentLoad:void 0},this.setPage=e=>{_.isUndefined(e)||_.isEmpty(e)||(this.page=e)}}$onInit(){this.logLoadStart(),this.pageActions=this.metricsActions.getActionCreators(),this.actions=this.metricsSearchScratchpadActions.getActionCreators();const e=this.metricsPageHelper.get(this.metricsSearchId);e.metricsSearch?(this.view=this.createView(this.metricsSearchId.toString()),this.setPage(e)):this.actions.request(this.metricsSearchId).then((()=>{this.view=this.createView(this.metricsSearchId.toString())})).catch((()=>{this.pageActions.convertDashboardToDrilldownInfo(this.metricsSearchId).then((e=>{e&&(this.view=this.createView(this.metricsSearchId.toString()),this.view.name="app.metrics-new",this.view.id=this.metricsWorkspaceViewService.generateId(),this.metricsWorkspaceViewService.reloadPageForMetricsSearchConversion(Object.assign(Object.assign({},e),{type:_t.zr.CONVERT_DASHBOARD_TO_METRICS}),this.view.id),this.logService.info({module:"metrics",component:"metrics",action:"convertDashboardScratchpadToMetricsSearch",id:this.metricsSearchId}))})).catch((()=>{this.metricsPageService.handleNotFoundError()}))})),this.metricsPageHelper.getObservable(this.metricsSearchId).takeUntilScopeDestroyWithSafeApply(this.$scope,this.setPage).subscribe(),this.$element.addClass("metrics-page-container"),this.logLoadEnd()}createView(e){return this.metricsWorkspaceHelperService.createActualTabInWorkspace(e)}logLoadStart(){const e={module:"metrics",component:"metricsDashboardContainer",action:"componentLoad",id:this.metricsSearchId.toString()};this.performanceEvents.componentLoad=k.performanceLogService.createMark(e,"loadStart")}logLoadEnd(){const e={metricsSearchId:this.metricsSearchId,isActive:!0};this.performanceEvents.componentLoad.mark("loadEnd"),this.performanceEvents.componentLoad.measure("loadStart","loadEnd","load",e)}}cg.$inject=["metricsPageHelper","metricsSearchScratchpadActions","metricsActions","metricsWorkspaceHelperService","$element","$scope","metricsWorkspaceViewService","logService","$mdToast","i18n","metricsPageService"];const dg={bindings:{metricsSearchId:"<?"},controller:cg,controllerAs:"pageCtrl",template:'\n    <metrics-page\n      dashboard-title="pageCtrl.view.title"\n      metrics-search-id="pageCtrl.metricsSearchId"\n      page="pageCtrl.page"\n      page-actions="pageCtrl.pageActions">\n    </metrics-page>\n  '};var ug=i(9403),pg=i(6771);class hg{constructor(e,t,i,r){this.$element=e,this.chartLineTypesHelper=t,this.currentUserHelper=i,this.chartColorFamilyHelper=r}$onInit(){this.assignAxisOptions=_.cloneDeep(pg.g),this.lineTypeOptions=ug.chartLines.CHART_LINE_TYPES.map((e=>({html:this.chartLineTypesHelper.getSVGElement(e),type:e}))),this.shouldShowCustomLabel=this.currentUserHelper.hasFeatureFlag("UIMetricsCustomLabel"),this.interpolationMethodOptions=_.cloneDeep(pg.MY),this.colorFamilyOptions=_.cloneDeep(pg.Je),this.colorPaletteTemplateMap=this.chartColorFamilyHelper.buildColorPaletteOptionsTemplate(),this.$element.addClass("metrics-row-settings")}$onDestroy(){this.settings=void 0,this.rowId=void 0,this.actions=void 0}saveLabel(){this.cleanIfEmpty("customLabel"),this.actions.updateQueryRowCustomLabel(this.rowId,this.settings.customLabel)}saveLineType(){this.cleanIfEmpty("lineType"),this.actions.updateQueryRowLineType(this.rowId,this.settings.lineType)}saveAxisAssignation(){this.cleanIfEmpty("yAxisIndex"),this.actions.updateQueryRowYAxis(this.rowId,this.settings.yAxisIndex)}saveColorFamily(){this.cleanIfEmpty("colorFamily"),this.actions.updateQueryRowColorFamily(this.rowId,this.settings.colorFamily)}saveInterpolationMethod(){this.cleanIfEmpty("interpolationMethod"),(this.settings.interpolationMethod!==ug.ChartInterpolationMethod.FIXED||this.settings.interpolationFixedValue)&&this.actions.updateQueryRowInterpolationMethod(this.rowId,this.settings.interpolationMethod)}saveInterpolationFixedValue(){this.cleanIfEmpty("interpolationFixedValue"),this.rowSettings.interpolationFixedValue.$valid&&(this.actions.updateQueryRowInterpolationMethod(this.rowId,this.settings.interpolationMethod,!1),this.actions.updateQueryRowInterpolationFixedValue(this.rowId,this.settings.interpolationFixedValue))}closeSettings(){this.actions.showRowSettings(void 0,!1)}cleanIfEmpty(e){""===_.getPath(this.settings,[e])&&(this.settings[e]=void 0)}}hg.$inject=["$element","chartLineTypesHelper","currentUserHelper","chartColorFamilyHelper"];const mg={bindings:{settings:"<?",rowId:"<",pointerPosition:"@",actions:"<"},controller:hg,controllerAs:"rowSettingsCtrl",template:'\n    <div sumo-card class="row-settings-panel" pointer="{{rowSettingsCtrl.pointerPosition}}">\n      <span class="icon--x close-settings" ng-click="rowSettingsCtrl.closeSettings()"></span>\n      <div layout="column" ng-cloak class="md-inline-form sumo-form" md-theme="formTheme">\n        <md-content layout-padding>\n          <form name="rowSettingsCtrl.rowSettings">\n            <md-input-container ng-if="rowSettingsCtrl.shouldShowCustomLabel">\n              <label>{{ ::\'charts.chartSeriesLabel\' | i18nText }}</label>\n              <input\n                name="customLabel"\n                ng-model="rowSettingsCtrl.settings.customLabel"\n                ng-model-options="{ updateOn: \'change blur\', trackBy: \'$value\'}"\n                ng-change="rowSettingsCtrl.saveLabel()"\n                hint-text\n              />\n              <div class="hint" ng-if="rowSettingsCtrl.rowSettings.customLabel.$hint">\n                {{ ::\'charts.chartSeriesLabelHintText\' | i18nText }}\n              </div>\n            </md-input-container>\n            <md-input-container class="sumo-material-select">\n              <label>{{ ::\'charts.chartColorFamilyFieldLabel\' | i18nText }}</label>\n              <md-select\n                ng-model="rowSettingsCtrl.settings.colorFamily"\n                ng-value="{{rowSettingsCtrl.settings.colorFamily}}"\n                ng-change="rowSettingsCtrl.saveColorFamily()">\n                <md-option value="">{{ ::\'charts.defaultOptionLabel\' | i18nText }}</md-option>\n                <md-option\n                  ng-repeat="colorFamily in rowSettingsCtrl.colorFamilyOptions track by colorFamily.key"\n                  value="{{ ::colorFamily.value }}"\n                  ng-bind-html="rowSettingsCtrl.colorPaletteTemplateMap[colorFamily.key]"\n                  >\n                </md-option>\n              </md-select>\n            </md-input-container>\n\n            <md-input-container class="sumo-material-select">\n              <label class="label-standard-select">Line Type</label>\n              <md-select name="lineType"\n                ng-model="rowSettingsCtrl.settings.lineType"\n                ng-change="rowSettingsCtrl.saveLineType()">\n                <md-option ng-repeat="lineType in rowSettingsCtrl.lineTypeOptions" value="{{lineType.type}}" ng-bind-html="lineType.html">\n                </md-option>\n              </md-select>\n            </md-input-container>\n\n            <md-input-container class="sumo-material-select">\n              <label>{{ ::\'charts.chartAssignAxisFieldLabel\' | i18nText }}</label>\n              <md-select\n                ng-model="rowSettingsCtrl.settings.yAxisIndex"\n                ng-model-options="{ trackBy: \'$value\'}"\n                ng-change="rowSettingsCtrl.saveAxisAssignation()"\n                >\n                <md-option value="">{{ ::\'charts.defaultOptionLabel\' | i18nText }}</md-option>\n                <md-option\n                  ng-repeat="assignAxis in rowSettingsCtrl.assignAxisOptions track by assignAxis.key"\n                  value="{{ ::assignAxis.value }}"\n                  >\n                  {{ ::(\'charts.chartAssignAxisOption-\' + assignAxis.key) | i18nText }}\n                </md-option>\n              </md-select>\n            </md-input-container>\n            <md-input-container class="sumo-material-select">\n              <label>{{ ::\'charts.chartInterpolationMethodFieldLabel\' | i18nText }}</label>\n              <md-select\n                ng-model="rowSettingsCtrl.settings.interpolationMethod"\n                ng-model-options="{ trackBy: \'$value\'}"\n                ng-change="rowSettingsCtrl.saveInterpolationMethod()"\n                >\n                <md-option value="">{{ ::\'charts.defaultOptionLabel\' | i18nText }}</md-option>\n                <md-option\n                  ng-repeat="interpolationMethod in rowSettingsCtrl.interpolationMethodOptions track by interpolationMethod.key"\n                  value="{{ ::interpolationMethod.value }}"\n                  >\n                  {{ ::(\'charts.chartInterpolationMethodOption-\' + interpolationMethod.key) | i18nText }}\n                </md-option>\n              </md-select>\n            </md-input-container>\n            <md-input-container\n              ng-show="rowSettingsCtrl.settings.interpolationMethod === \'Fixed\'"\n              class="interpolation-fixed-value-input-container">\n              <label>{{:: \'charts.chartInterpolationFixedValueFieldLabel\' | i18nText }}</label>\n              <input\n                name="interpolationFixedValue"\n                ng-model="rowSettingsCtrl.settings.interpolationFixedValue"\n                ng-model-options="{ updateOn: \'blur\' }"\n                ng-change="rowSettingsCtrl.saveInterpolationFixedValue()"\n                number-validate\n                ng-required="rowSettingsCtrl.settings.interpolationMethod === \'Fixed\'"\n                />\n              <div ng-messages="rowSettingsCtrl.rowSettings.interpolationFixedValue.$error">\n                <div ng-message="required">{{:: \'charts.errorInterpolationEmpty\' | i18nText}}</div>\n                <div ng-message="numberValidate">{{:: \'charts.errorInterpolationEmpty\' | i18nText}}</div>\n              </div>\n            </md-input-container>\n          </form>\n        </md-content>\n      </div>\n    </div>'};var gg=i(40231);class yg{constructor(e,t,i,r,n){this.$element=e,this.$timeout=t,this.$mdMenu=i,this.$mdSelect=r,this.currentUserHelper=n,this.$onInit=()=>this.$element.addClass("metrics-row-settings"),this.$onChanges=e=>{!e.settings&&_.isUndefined(this.settings)&&(this.settings={});const t=_.isUndefined(this.settings)?void 0:this.settings.color;this.colorFamilyOptions=this.buildColorFamilyOptions(t),this.$timeout((()=>this.customColor=t),170)},this.customColorInputHandling=e=>{e.stopPropagation(),e.keyCode===$.ui.keyCode.ENTER&&(this.colorFamilyOptions=this.buildColorFamilyOptions(this.customColor),this.$timeout((()=>this.saveColor(this.customColor)),170))},this.saveColor=e=>{this.$mdSelect.hide(),this.$mdMenu.hide(),this.cleanIfEmpty("color"),this.actions.updateSeriesColor(this.rowId,e)},this.closeSettings=()=>{this.actions.showSeriesSettings(void 0,!1)},this.buildColorFamilyOptions=e=>{let t=gg.W.buildCustomColorOptionsTemplate(60);return e&&(t=_(t).reject((t=>t===e)),t.push(e)),t},this.cleanIfEmpty=e=>{""===_.getPath(this.settings,[e])&&(this.settings[e]=void 0)}}}yg.$inject=["$element","$timeout","$mdMenu","$mdSelect","currentUserHelper"];const vg={bindings:{settings:"<?",rowId:"<",pointerPosition:"@",actions:"<"},controller:yg,template:'\n    <div sumo-card class="row-settings-panel" pointer="{{$ctrl.pointerPosition}}">\n      <span class="icon--x close-settings" ng-click="$ctrl.closeSettings()"></span>\n      <div layout="column" ng-cloak class="md-inline-form sumo-form" md-theme="formTheme">\n        <md-content layout-padding>\n          <form name="metricsSeriesSettingsForm">\n            <md-input-container class="sumo-material-select">\n              <label>{{ ::\'charts.chartColorFamilyFieldLabel\' | i18nText }}</label>\n              <md-select\n                md-container-class="color-select"\n                ng-model="$ctrl.customColor"\n                ng-model-option="{trackBy: \'$value\' }">\n                <md-optgroup>\n                  <md-option\n                    value=""\n                    ng-click="$ctrl.saveColor()"\n                    class="default-label">\n                    {{ ::\'charts.defaultOptionLabel\' | i18nText }}\n                  </md-option>\n                  <md-option\n                    class="color-icon"\n                    ng-repeat="color in $ctrl.colorFamilyOptions track by color"\n                    value="{{ ::color }}">\n                    <span ng-click="$ctrl.saveColor(color)"\n                      class=\'color-dot -selectable\'\n                      style=\'background-color: {{color}};\'></span>\n                  </md-option>\n                </md-optgroup>\n                <md-select-header>\n                  <span ng-click="$ctrl.saveColor($ctrl.customColor)"\n                    class=\'color-dot -selectable -custom\'\n                    style=\'background-color: {{$ctrl.customColor}};\'></span>\n                  <md-input-container md-no-float>\n                    <input placeholder="Custom Color"\n                      name="customColor"\n                      hint-text\n                      ng-model="$ctrl.customColor"\n                      ng-keydown="$ctrl.customColorInputHandling($event)"\n                      ng-pattern="/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i"/>\n                    <div class="hint" ng-if="metricsSeriesSettingsForm.customColor.$hint">\n                       {{ ::\'charts.chartColorCustomHintLabel\' | i18nText }}\n                    </div>\n                    <div ng-messages="metricsSeriesSettingsForm.customColor.$error" md-auto-hide="false">\n                      <div ng-message="pattern" class="error">\n                        {{ ::\'charts.chartColorCustomErrorLabel\' | i18nText }}\n                      </div>\n                    </div>\n                  </md-input-container>\n                </md-select-header>\n              </md-select>\n            </md-input-container>\n          </form>\n        </md-content>\n      </div>\n    </div>'};function fg(e,t,i){t.ruleMapping=[{expression:"$_1"}];const r=this;e.load("metrics").then((e=>{r.__metrics=e})),r.removeField=e=>{t.ruleMapping.length<=1?t.ruleMapping=[{name:"",expression:""}]:t.ruleMapping=_.without(t.ruleMapping,e)},r.addField=()=>{t.ruleMapping.push({name:"",expression:""}),i((()=>{$(".extract-name:last-of-type").trigger("focus")}),300)}}function _g(){return{restrict:"A",controller:fg,template:'\n<div class="rem-wrapper">\n  <div ng-repeat="item in ruleMapping" rem rule="item"></div>\n  <button text="Add Variable" class="-secondary add-row add-variable-button" ng-click="vm.addField()">\n    <div class="ux-icon-button is-default icon--plus add-variable-button__icon"></div>\n    <div class="add-variable-button__text">{{ ::vm.__metrics.ruleManagerAddVariable}}</div>\n    </button>\n</div>',controllerAs:"vm",scope:{ruleMapping:"="},replace:!0}}function Sg(e){return{require:"^^rem-wrapper",restrict:"A",templateUrl:"js/features/metrics/views/ruleManager/extract-row.html",scope:{rule:"="},replace:!0,link(t,i,r,n){t.vm=n,t.ruleChanged=t=>{delete t.errorName,delete t.errorValue,t.error=[],e.publish("metricsRuleChanged",t)},t.ruleRemoved=i=>{e.publish("metricsRuleChanged",i),t.vm.removeField(i)}}}}fg.$inject=["i18n","$scope","$timeout"],_g.$inject=[],Sg.$inject=["eventService"];class bg{constructor(e){this.$mdDialog=e}}bg.$inject=["$mdDialog"];class Eg{constructor(e){this.$mdDialog=e}launch(e,t){return this.$mdDialog.show({bindToController:!0,controller:bg,controllerAs:"dialogCtrl",locals:{panel:t},parent:s.element(document.body),targetEvent:e,template:Eg.TEMPLATE})}}Eg.$inject=["$mdDialog"],Eg.TEMPLATE='\n    <md-dialog class="md-sumo-dialog" ng-cloak flex="none" layout="column">\n      <div class="md-dialog-header">\n        <div class="md-title">\n          {{::$root.__.metrics.metricsChartInfo}}\n        </div>\n      </div>\n      <md-dialog-content class="view-info">\n        <div class="view-info__attr" ng-show="dialogCtrl.panel.sessionId">\n          <div class="view-info__attr__label">{{::$root.__.metrics.session}}</div>\n          <div class="view-info__attr__value">{{dialogCtrl.panel.sessionId}}</div>\n        </div>\n\n        <div class="view-info__attr">\n          <div class="view-info__attr__label">{{::$root.__.metrics.title}}</div>\n          <div class="view-info__attr__value">{{dialogCtrl.panel.title}}</div>\n        </div>\n\n        <div class="view-info__attr">\n          <div class="view-info__attr__label">{{::$root.__.metrics.timeRangeExpression}}</div>\n          <div class="view-info__attr__value">{{dialogCtrl.panel.timeRange.value}}</div>\n        </div>\n\n        <div class="view-info__attr" ng-show="dialogCtrl.panel.timeRange.startTime">\n          <div class="view-info__attr__label">{{::$root.__.metrics.timeRangeStart}}</div>\n          <div class="view-info__attr__value">{{dialogCtrl.panel.timeRange.startTime | userDateFormat:\'DATE_TIME\'}}</div>\n        </div>\n\n        <div class="view-info__attr" ng-show="dialogCtrl.panel.timeRange.endTime">\n          <div class="view-info__attr__label">{{::$root.__.metrics.timeRangeEnd}}</div>\n          <div class="view-info__attr__value">{{dialogCtrl.panel.timeRange.endTime | userDateFormat:\'DATE_TIME\'}}</div>\n        </div>\n\n      </md-dialog-content>\n      <md-dialog-actions>\n        <md-button class="md-raised md-primary" ng-click="dialogCtrl.$mdDialog.cancel()">\n          {{::$root.__.metrics.done}}\n        </md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  ';class Tg{constructor(e){this.$mdDialog=e}isSavedInContentLibrary(e){return Boolean(e.contentLibraryItemId)}}Tg.$inject=["$mdDialog"];class xg{constructor(e){this.$mdDialog=e}launch(e,t){return this.$mdDialog.show({bindToController:!0,controller:Tg,controllerAs:"dialogCtrl",locals:{panel:t},parent:s.element(document.body),targetEvent:e,template:xg.TEMPLATE})}}xg.$inject=["$mdDialog"],xg.TEMPLATE='\n    <md-dialog class="md-sumo-dialog" ng-cloak flex="none" layout="column">\n      <div class="md-dialog-header">\n        <div class="md-title">\n          {{:: \'metrics.dialogOptIn.title\' | i18nText }}\n        </div>\n      </div>\n      <md-dialog-content class="view-info">\n        <p\n          ng-show="dialogCtrl.isSavedInContentLibrary(dialogCtrl.panel)"\n          ng-bind-html="\'metrics.dialogOptIn.bodySaved\' | i18nText"\n        ></p>\n        <p\n          ng-hide="dialogCtrl.isSavedInContentLibrary(dialogCtrl.panel)"\n          ng-bind-html="\'metrics.dialogOptIn.bodyUnsaved\' | i18nText"\n        ></p>\n      </md-dialog-content>\n      <md-dialog-actions>\n        <md-button\n          class="md-raised md-primary"\n          ng-click="dialogCtrl.$mdDialog.cancel()"\n          data-sumo-test="cancel-button"\n        >\n          {{:: \'metrics.dialogOptIn.cancelButton\' | i18nText }}\n        </md-button>\n        <md-button\n          class="md-raised md-accent"\n          ng-click="dialogCtrl.$mdDialog.hide()"\n          data-sumo-test="ok-button"\n        >\n          {{:: \'metrics.dialogOptIn.okButton\' | i18nText }}\n        </md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  ';class Cg{constructor(){this.getResults=e=>{const t=Cg.BASE_URL+"/results";return(0,D.legacyHttpPost)(t,e)}}}Cg.BASE_URL="/sumo/v1/metrics";var Ag=i(21286);class wg{constructor(e,t,i,r,n){this.$scope=e,this.$timeout=t,this.currentUserHelper=i,this.helpNavigationService=r,this.i18n=n,this.BLOCKED_SOURCES_POLL_DELAY=3e5,this.BLOCKED_SOURCES_PAGINATION_UNIT=7,this.blacklistedGridOptions={columns:[{field:"id",title:"Source ID"},{field:"name",title:"Source Name"}],maxRows:this.BLOCKED_SOURCES_PAGINATION_UNIT,minRows:1,usePagination:!1},this.blacklistedSourcesGridOptions={columns:[{field:"sourceId",title:this.i18n.get("metrics.blacklistedSourceId"),headerCellClass:"source-id-cell",rowCellClass:"source-id-cell",disableSort:!0},{field:"info",title:this.i18n.get("metrics.blacklistedSourcesAdditionalData"),rowCellTemplate:"js/features/metrics/views/blacklistedSources/blacklistedSourcesInfoCellTemplate.html",disableSort:!0}],minRows:1,usePagination:!1},this.startBlockedSourcesPoll=()=>{this.blockedSourcesPollSubscription=(0,Ag.F)(this.BLOCKED_SOURCES_POLL_DELAY).pipe((0,ci.O)({})).subscribe((()=>this.actions.requestBlacklistedSources()))},this.openBlacklistedDialog=e=>{if(e){const e=this.currentUserHelper.hasPermission("READ_COLLECTORS"),t=this.currentUserHelper.hasPermission("MANAGE_COLLECTORS");let i,r="";e&&(r='\n          <div class="metrics-blklisted-sources-container">\n            <div data-click-id="show-blacklisted-sources"\n            class="bl-learn-more-link show-list">\n              Show Blacklisted Sources\n            </div>\n          </div>',i={"loadmore-blacklisted-sources":this.loadMoreBlacklistedSourceNames,"show-blacklisted-sources":this.triggerShowBlacklistedSourceNames,"learn-more":this.openBlacklistLearnMore});const n=t?sprintf(this.i18n.get("metrics.blacklistExplanation"),r):sprintf(this.i18n.get("metrics.blacklistExplanationForNoPermission"),r),a=t?SumoApp.userMessage.question:SumoApp.userMessage.info,o={cancelCallback:this.setBlacklistedSourcesDialogClosed,cancelText:"Done",clickResponses:i,displayType:"msgbox",isHTML:!0,okBtnClasses:"re-enable-sources",okCallback:this.actions.requestUnBlacklistSources,okText:t?"Re-Enable Sources":"Done",title:"Missing Metrics Data",useTitleIcon:!1,waitOnOk:!0};this.blacklistedDialog=a.call(SumoApp.userMessage,n,o),this.blacklistedSourcesGridOptions.safeData=this.blacklistedSources.sources;const l="<ux-grid grid-options='blacklistedSourcesController.blacklistedSourcesGridOptions'></ux-grid>",c=s.element(l);this.blacklistedDialog.changeContent(".metrics-blklisted-sources-container",c),SumoApp.ngCompile(c,this.$scope,!0)}},this.loadMoreBlacklistedSourceNames=()=>{this.blacklistedDialog.changeContent(".bl-load-more",'Load More <div class="spinner metrics-dialog-spinner"></div>'),this.actions.getBlacklistedSourceNames(this.blacklistedSources,this.BLOCKED_SOURCES_PAGINATION_UNIT)},this.triggerShowBlacklistedSourceNames=()=>{this.blacklistedDialog.changeContent(".bl-learn-more-link.show-list",'Show Blacklisted Sources <div class="spinner metrics-dialog-spinner"></div>'),_.getPath(this.blacklistedSources,"names.loadedCount")?this.showBlacklistedSourceNames(!0):this.actions.getBlacklistedSourceNames(this.blacklistedSources,this.BLOCKED_SOURCES_PAGINATION_UNIT)},this.openBlacklistLearnMore=()=>{this.helpNavigationService.showHelp({id:1084})},this.setBlacklistedSourcesDialogClosed=()=>{this.actions.setOpenBlacklistedSourceDialog(!1)},this.showBlacklistedSourceNames=e=>{if(this.blacklistedDialog&&e){this.blacklistedGridOptions.gridData=this.blacklistedGridOptions.safeData=this.blacklistedSources.names.list;let e="<ux-grid grid-options='blacklistedSourcesController.blacklistedGridOptions'></ux-grid>";const t="<div data-click-id='loadmore-blacklisted-sources' class='bl-load-more'></div>";this.blacklistedSources.names.loadedCount!==this.blacklistedSources.ids.length&&(e+=t);const i=s.element(e);this.blacklistedDialog.changeContent(".metrics-blklisted-sources-container",i),SumoApp.ngCompile(i,this.$scope,!0),this.$timeout((()=>{this.blacklistedDialog.changeContent(".bl-load-more","Load More")}),100)}},this.openBlacklistResetDialog=e=>{!0===e&&this.blacklistedDialog&&(this.blacklistedDialog.close(),this.blacklistedDialog=null,SumoApp.userMessage.info(this.i18n.get("metrics.blacklistResetSuccess"),{displayType:"msgbox",isHTML:!0,okText:"Done",title:"Sources Successfully Re-Enabled",clickResponses:{"learn-more":this.openBlacklistLearnMore}}))},this.blacklistResetFailure=e=>{!0===e&&(this.blacklistedDialog.close(),this.blacklistedDialog=null,SumoApp.userMessage.error("Failed to reset Blacklisted Sources. Please try again."))},this.$onDestroy=()=>{this.blockedSourcesPollSubscription.unsubscribe()}}$onInit(){this.startBlockedSourcesPoll(),this.$scope.$watch("blacklistedSourcesController.blacklistedSources.dialogOpen",this.openBlacklistedDialog),this.$scope.$watch("blacklistedSourcesController.blacklistedSources.resetSuccess",this.openBlacklistResetDialog),this.$scope.$watch("blacklistedSourcesController.blacklistedSources.resetFailure",this.blacklistResetFailure),this.$scope.$watch("blacklistedSourcesController.blacklistedSources.names.getSuccess",this.showBlacklistedSourceNames),SumoApp.metricsOpenBlacklistedLearnMore&&(delete SumoApp.metricsOpenBlacklistedLearnMore,this.actions.setOpenBlacklistedSourceDialog(!0))}}wg.$inject=["$scope","$timeout","currentUserHelper","helpNavigationService","i18n"];const Ig={bindings:{actions:"<",blacklistedSources:"<"},controller:wg,controllerAs:"blacklistedSourcesController",template:'\n    <div class="blacklisted-sources"\n         ng-show="blacklistedSourcesController.blacklistedSources &&\n                  (blacklistedSourcesController.blacklistedSources.ids.length ||\n                   blacklistedSourcesController.blacklistedSources.sources.length)">\n        <span>\n          <span class="icon--exclamation-triangle blacklisted-icon"></span>\n          {{::\'metrics.blacklistedNotification\' | i18nText}}\n          <span ng-click="blacklistedSourcesController.actions.setOpenBlacklistedSourceDialog(true)"\n                class="blklist-link">\n            {{::\'metrics.learnMore\' | i18nText}}\n          </span>\n        </span>\n    </div>\n  '};class Rg{constructor(e){this.$timeout=e,this.startPolling=(e,t,i)=>{const r=SumoApp.dateUtil.formatDateTime(),n=`${r(t)} to ${r(i)}`,a={queryString:e,startMillis:t,endMillis:i,timeZone:SumoApp.dateUtil.getDefaultTimeZone(),autoPauseCount:100,isAllTime:!1,fromSavedSearch:!1,savedSearchId:null,messageLocators:"-1",timeRange:n,nameOverride:null};return(0,D.legacyHttpPost)("/json/v2/searchquery/create",a)},this.getRawMessages=(e,t)=>{const i=`/json/v2/searchquery/${e}/messages/raw`;return(0,D.legacyHttpGet)(i,{params:t}).then((e=>_.chain(e.messages.messages).map((e=>_.object(e.keys,e.values))).value()))},this.pollStatus=(e,t)=>{const i=`/json/v2/searchquery/${e}/status`;(0,D.legacyHttpGet)(i).then((i=>{switch(i.searchQueryStatus.state){case SumoUtil.SearchStatusCode.DONE_GATHERING_RESULTS:case SumoUtil.SearchStatusCode.FORCE_PAUSED:case SumoUtil.SearchStatusCode.MANUALLY_PAUSED:case SumoUtil.SearchStatusCode.ERROR:case SumoUtil.SearchStatusCode.CANCELLED:return void t();default:this.$timeout(_.partial(this.pollStatus,e,t),500)}}))}}}Rg.$inject=["$timeout"];class Dg{constructor(e,t,i){this._$element=e,this.userTracking=t,this.dataInterceptorService=i,this.$onInit=()=>{this.hideLegends=!0,this.isSidePanelOpen=!1,this.quantizationVisible=!0},this.openSidePanel=()=>{this.isSidePanelOpen=!0},this.closeSidePanel=()=>{this.isSidePanelOpen=!1}}}Dg.$inject=["$element","metricsUserTracking","dataInterceptorService"];const Og={bindings:{actions:"<",panel:"<",panelDataSource:"<",containerSelector:"@"},controller:Dg,controllerAs:"$ctrl",template:'\n    <div ux-sliding-panel is-open="$ctrl.isSidePanelOpen" style="flex: 1 1 auto;">\n      <metrics-panel class="metrics-panel" main-panel\n          panel="$ctrl.panel"\n          actions="$ctrl.actions"\n          container-selector="{{$ctrl.containerSelector}}"\n          quantization-visible="$ctrl.quantizationVisible">\n        <panel-actions>\n          <ux-icon-button class="external-actions" svg="true" icon="outlier"\n          theme="pink" click-callback="$ctrl.openSidePanel()"></ux-icon-button>\n        </panel-actions>\n        <metrics-chart hide-legends="$ctrl.hideLegends"\n            panel="$ctrl.panel"\n            chart-settings="$ctrl.panel.chart"\n            chart-data-source="$ctrl.panelDataSource"\n            chart-actions="$ctrl.actions.chartModel"\n            interceptor-for-data="$ctrl.dataInterceptorService.metricsInterceptor"\n            chart-id="{{ $ctrl.panel.chart.id }}"\n            user-tracking="$ctrl.userTracking"></metrics-chart>\n      </metrics-panel>\n\n      <caret-panel class="-small" sliding-panel caret-title="{{ ::\'charts.outlierSettingsFormTitle\' | i18nText }}"\n          actions="{close: $ctrl.closeSidePanel }">\n        <chart-outliers chart-settings="$ctrl.panel.chart" actions="$ctrl.actions.chartModel">\n        </chart-outliers>\n      </caret-panel>\n    </div>\n  '};var Ng=i(38755),Mg=i(50955),kg=i(14920),Lg=i(955),Pg=i(64753),Fg=i(93249),Ug=i(73442);function Vg(e){return Te.store.$$.pipe((0,ui.U)((e=>{var t,i;return null===(i=null===(t=e.immutable)||void 0===t?void 0:t.getIn(["entities",_t.yG]))||void 0===i?void 0:i.toJS()})),(0,ui.U)((t=>((0,re.assertDefined)(e,"metricsSearchId is not defined yet"),t[e]))),(0,Ug.h)((e=>!!e&&(!("progress"in e)||100===e.progress))),(0,kg.q)(1))}class Bg{constructor(e,t,i,r,n,a,s,o,l){this.$element=e,this.$scope=t,this.currentUserHelper=i,this.applicationViewShimService=r,this.logService=n,this.$mdToast=a,this.i18n=s,this.contentMetricsService=o,this.contentLoggingNotificationService=l,this.hasRunQuery=!1,this.hasContentItemEditPermission=!1,this.isSaving=!1,this.isShortcodeDialogOpen=!1,this.UIAngularTreReplaceFF=!1,this.$onInit=()=>{this.treInputActions={onTimeRangeChange:this.onTimeRangeChange},this.treModalParent=this.containerSelector;const e=this.panel.id;_.isBlank(this.treModalParent)&&(this.treModalParent=`.dashboard-container-${e}`),this.$element.addClass(`metrics-panel-${e}`),this.showUpdateToDashboardBtn=Bg.shouldUpdateToDashboardBtnBeShown(_.getPath(this.panel,"ui.drilldownOriginReference")),Vg(e).subscribe((()=>{this.setupContentItemCache()}),(e=>{$.logWarnLocal(e)})),this.renderReactTre(this.panel)},this.renderReactTre=e=>{this.UIAngularTreReplaceFF&&(0,f.createTreOnElement)(this.$element.find("#tre-container")[0],{name:"metrics-tre",timeRange:e.timeRange.details,suppressInitialOnChange:!1,updateTimeRange:e=>{this.onTimeRangeChange(ht.timeRangeUtil.parseTimeRangeDetails(e))}})},this.$onDestroy=()=>{this.contentItemSubscription&&this.contentItemSubscription.unsubscribe(),this.UIAngularTreReplaceFF&&(0,f.destroyTreOnElement)(this.$element.find("#tre-container")[0])},this.onTimeRangeChange=e=>{this.actions.metricsSearch.onTimeRangeChange(e)},this.updatePanel=()=>{const e={module:"metrics",component:"metricsPanel",action:"updateToDashboard"};this.logService.user(e),this.actions.metricsSearch.updateToDashboard().then(this.sendDashboardUpdateMessage).catch(_.noop)},this.requestRefresh=()=>{if(_.getPath(this,"actions.metricsSearch.requestRefresh")){const e={module:"metrics",component:"metricsPanel",action:"requestRefresh"};this.logService.user(e),this.actions.metricsSearch.requestRefresh()}},this.createOrUpdateSavedMetrics=()=>{this.panel.contentLibraryItemId?this.contentItem$.pipe((0,kg.q)(1)).subscribe((()=>{this.hasContentItemEditPermission?(this.isSaving=!0,this.contentMetricsService.update((0,nh.w$)(Object.assign(Object.assign({},this.panel),{properties:(0,nh.Gl)(this.panel)}))).then((e=>{this.isSaving=!1;const t=[e];return this.contentLoggingNotificationService.logAndNotify({actionType:re.ContentActionType.EDIT},t,{actionType:re.ContentActionType.EDIT,items:t})})).then(this.showSuccessToast).catch(this.showErrorToast)):this.createMetrics()})):this.createMetrics()},this.showSuccessToast=()=>{const e=this.$mdToast.success().textContent(this.i18n.get("content.savedMetrics.successSave"));this.$mdToast.show(e)},this.showErrorToast=({response:{data:{errors:[{message:e=this.i18n.get("unknown:error")}]=[{}]}={}}={}})=>{const t=this.$mdToast.error().textContent(e);this.$mdToast.show(t),this.isSaving=!1},this.setupContentItemCache=()=>{this.panel.contentLibraryItemId?(this.contentItem$=(0,Ng.D)((0,g.wrapNgPromise)(this.contentMetricsService.fetchContentItem(this.panel.contentLibraryItemId))).pipe((0,Lg.b)((e=>this.hasContentItemEditPermission=!e||e.permissions.includes(F.ContentPermission.Edit))),(0,Pg.d)(1),(0,Fg.K)((({errors:[{key:e="unknown:error"}]=[{}]})=>{this.panel.contentLibraryItemId=void 0,this.hasContentItemEditPermission=!0;const t=this.$mdToast.warn().textContent(this.i18n.get(`metrics.savedMetric.${e}`));return this.$mdToast.show(t),this.isSaving=!1,(0,Mg.of)(void 0)}))),this.contentItemSubscription=this.contentItem$.subscribe()):this.hasContentItemEditPermission=!0},this.sendDashboardUpdateMessage=e=>{if(e){const t=this.$mdToast.success();t.textContent(this.i18n.get("dashboard.panelUpdated"));const i=document.querySelector(".ws-content");i&&t.parent(i),this.$mdToast.show(t),this.applicationViewShimService.dashboardDrilldownOnUpdate({dashboardId:e.parentId,dashboardKey:e.parentAccessKey,type:"report"},e.id)}},this.openShortcodeDialog=e=>{this.panel.contentLibraryItemId?this.contentItem$.pipe((0,kg.q)(1)).subscribe((t=>{void 0===t?this.openUnsavedShortcodeDialog():g.libraryActionsService.runAction({actionType:re.ContentActionType.SHARE,event:e},t)})):this.openUnsavedShortcodeDialog()},this.saveMetricsShortcode=e=>{let t=this.panel;return e&&(t=this.getAbsoluteTimeRangePanel(t)),this.actions.metricsSearch.saveMetricsSearchWithShortCode(t)},this.handleShortcodeDialogClose=()=>{this.$scope.$apply((()=>{this.isShortcodeDialogOpen=!1}))},this.UIAngularTreReplaceFF=i.hasFeatureFlag("UIAngularTreReplace")}static shouldUpdateToDashboardBtnBeShown(e){if(!e)return!1;const{permissions:t=[],parentType:i}=e;return t.includes(F.ContentPermission.Edit)&&i!==f.PanelParentType.DASHBOARD}getIsSaveButtonShown(){return this.hasContentItemEditPermission&&this.actions.metricsSearch.createMetrics}getIsSavingDisabled(){return this.panel.metricsQueryModel.queryRows.every((e=>""===e.queryString))}getIsShareButtonShown(){return this.actions.metricsSearch.saveMetricsSearchWithShortCode}$onChanges(e){if(e.panel){const t=e.panel.currentValue||{},i=t.quantization||{},r=i.actual;if(this.hasRunQuery=this.hasRunQuery||100===t.progress,this.hasQuantizationBeenSelected&&this.panel.metricsQueryModel.isValid){const e=i.desired;if(void 0!==e&&e!==r){const e=this.$mdToast.warn().textContent(this.i18n.get("components.quantizationInput.quantizationNotMatched"));this.$mdToast.show(e)}this.hasQuantizationBeenSelected=!1}const n=t.chart;_.isUndefined(n)||_.isUndefined(n.series)||(this.hasInvisibleSeries=_.some(n.series.defaults,((e,t)=>n.getSeriesBlockVisibility(t)&&!n.getSeriesVisibility(t)))),this.showUpdateToDashboardBtn=Bg.shouldUpdateToDashboardBtnBeShown(_.getPath(t,"ui.drilldownOriginReference")),this.renderReactTre(t)}}quantizationSelected(e){this.actions.metricsSearch.onQuantizationChange({desired:e,actual:_.getPath(this.panel,"quantization.actual")}),this.hasQuantizationBeenSelected=!0;this.logService.user({module:"metrics",component:"metricsPanel",action:"metricsQuantizationSelected"})}resetAllSeriesVisibility(e=!0){this.actions.chartModel.resetAllSeriesVisibility(this.panel.chart.id,this.panel.chart.series.defaults,e);const t=_.getPath(this.panel,"chart.uiSettings.tempSeriesVisibility");t&&this.actions.chartModel.unsetSelectedSeries(this.panel.chart.id,t)}createMetrics(){return this.actions.metricsSearch.createMetrics().then(this.setupContentItemCache)}openUnsavedShortcodeDialog(){this.actions.metricsSearch.saveMetricsSearchWithShortCode(this.getAbsoluteTimeRangePanel(this.panel)).then((()=>{this.isShortcodeDialogOpen=!0}))}getAbsoluteTimeRangePanel(e){let t=e;return"absolute"!==e.timeRange.type&&(t=Object.assign(Object.assign({},t),{timeRange:ht.timeRangeUtil.convertRelativeToAbsolute(t.timeRange)})),t}getShortcodeUrl(){return`${document.location.protocol}//${document.location.host}/ui/#/metrics/${this.panel.shortcode}`}getIsTimerangeToggleShown(){return"absolute"!==this.panel.timeRange.type}}Bg.$inject=["$element","$scope","currentUserHelper","applicationViewShimService","logService","$mdToast","i18n","contentMetricsService","contentLoggingNotificationService"];const $g={bindings:{actions:"<",panel:"<",containerSelector:"@",quantizationVisible:"<"},controller:Bg,transclude:{panelActions:"?panelActions"},template:'\n    <md-card class="panel-card-basis">\n      <md-progress-linear md-mode="query"\n       ng-class="{ \'done\': $ctrl.panel.progress === 100, \'start\': !$ctrl.panel.isFetching }"\n       class="metrics-panel__progress md-accent"></md-progress-linear>\n\n      <md-card-header class="metrics-panel__header">\n        <md-card-header-text flex class="metrics-panel__header__title">\n          {{$ctrl.panel.title}}\n        </md-card-header-text>\n        <md-card-actions class="metrics-panel__header__actions inline-flex">\n            <div class="inline-flex__element">\n              <button ux-label-button label="{{::$root.__.metrics.resetSeries}}"\n                class="-small"\n                button-type="secondary"\n                ng-show="!$ctrl.panel.chart.isSingleValueChart() && $ctrl.hasInvisibleSeries"\n                ng-click="$ctrl.resetAllSeriesVisibility()">\n              </button>\n            </div>\n            <div class="inline-flex__element">\n              <span class="sumo-link update-to-dashboard"\n                role="button"\n                aria-label="Update to Dashboard"\n                ng-show="$ctrl.showUpdateToDashboardBtn"\n                ng-click="$ctrl.updatePanel()">{{::$root.__.metrics.metricsUpdateToDashboard}}</span>\n            </div>\n            <div class="inline-flex__element">\n              <quantization-input\n                ng-show="$ctrl.quantizationVisible && $ctrl.hasRunQuery"\n                quantization="$ctrl.panel.quantization"\n                quantization-selected="$ctrl.quantizationSelected(desiredQuantization)">\n              </quantization-input>\n            </div>\n            <div class="inline-flex__element">\n              <div id="tre-container" ng-if="$ctrl.UIAngularTreReplaceFF"></div>\n              <tre-input ng-if="!$ctrl.UIAngularTreReplaceFF" tre-id="$ctrl.panel.id" text="$ctrl.panel.timeRange.value"\n                actions="$ctrl.treInputActions"\n                modal-parent="{{$ctrl.treModalParent}}">\n              </tre-input>\n            </div>\n            <metrics-icon-toolbar\n              create-or-update-saved-metrics="$ctrl.createOrUpdateSavedMetrics"\n              has-run-query="$ctrl.hasRunQuery"\n              is-save-button-shown="$ctrl.getIsSaveButtonShown()"\n              is-saving="$ctrl.isSaving"\n              is-saving-disabled="$ctrl.getIsSavingDisabled()"\n              is-share-unsaved-metrics-enabled="$ctrl.getIsShareButtonShown()"\n              open-shortcode-dialog="$ctrl.openShortcodeDialog"\n              request-refresh="$ctrl.requestRefresh"\n              shortcode-dialog-props="{\n                shortcodeUrl: $ctrl.getShortcodeUrl(),\n                isOpen: $ctrl.isShortcodeDialogOpen,\n                handleClose: $ctrl.handleShortcodeDialogClose,\n                saveMetricsShortcode: $ctrl.saveMetricsShortcode,\n                isTimerangeToggleShown: $ctrl.getIsTimerangeToggleShown(),\n              }"\n            ></metrics-icon-toolbar>\n            <div class="inline-flex__element" ng-transclude="panelActions"></div>\n            <div class="inline-flex__element">\n              <metrics-panel-menu\n                panel="$ctrl.panel"\n                has-run-query="$ctrl.hasRunQuery"\n                actions="$ctrl.actions.metricsSearch">\n              </metrics-panel-menu>\n            </div>\n        </md-card-actions>\n      </md-card-header>\n\n      <div class="metrics-panel__body">\n        <div ng-transclude class="metrics-panel__body__height"></div>\n      </div>\n    </md-card>\n  '};var Hg=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Wg=["saveAs","addToDashboard","viewInfo","switchToNewMetrics"];class qg{constructor(e,t,i){this.$element=e,this.contentMetricsService=t,this.metricsOptInDialog=i,this.shortcodeUrl="",this.isShortcodeDialogOpen=!1,this.hasRunQuery=!1,this.isSyncDone=!1,this.isSavedInContentLibrary=!1,this.isContentOwner=!1,this.$onInit=()=>{this.$element.addClass("metrics-panel__menu"),Vg(this.actions.metricsSearchId).subscribe((e=>{this.setupContentOwnerStatus(e)}),(e=>{$.logWarnLocal(e)}))},this.shouldShow=e=>{var t,i,r,n,a;return null!==(a={saveAs:this.hasRunQuery,addToDashboard:this.hasRunQuery&&(null===(i=null===(t=this.panel)||void 0===t?void 0:t.ui)||void 0===i?void 0:i.canAddToDashboard)&&Boolean(this.actions.addToDashboard),viewInfo:this.hasRunQuery&&Boolean(this.actions.showInfo),switchToNewMetrics:null===(n=null===(r=this.panel)||void 0===r?void 0:r.ui)||void 0===n?void 0:n.canSwitchToNewMetrics}[e])&&void 0!==a&&a},this.shouldShowMenu=()=>Wg.some((e=>this.shouldShow(e)))}setupContentOwnerStatus(e){var t;return Hg(this,void 0,void 0,(function*(){if("number"==typeof e.contentLibraryItemId)try{const i=yield this.contentMetricsService.fetchContentItem(e.contentLibraryItemId);this.isSavedInContentLibrary=Boolean(i),this.isContentOwner=!!(null==i?void 0:i.owner)&&(null===E.currentUserHelper||void 0===E.currentUserHelper?void 0:E.currentUserHelper.get().id)===String(null===(t=null==i?void 0:i.owner)||void 0===t?void 0:t.id)}catch(e){this.isSavedInContentLibrary=!1,this.isContentOwner=!1}this.isSyncDone=!0}))}shouldDisableSwitchToNewMetricsMenuItem(){return!this.isSyncDone||!this.isContentOwner&&this.isSavedInContentLibrary}switchToNewMetrics(e){this.metricsOptInDialog.launch(e,this.panel).then((()=>{this.actions.switchToNewMetrics()}))}}qg.$inject=["$element","contentMetricsService","metricsOptInDialog"];const jg={bindings:{actions:"<",hasRunQuery:"<",panel:"<"},controller:qg,template:'\n    <md-menu md-theme="default" ng-if="$ctrl.shouldShowMenu()">\n      <ux-icon-button\n        icon="menu"\n        data-sumo-test="metrics-panel-menu"\n        ng-click="$mdMenu.open($event)"></ux-icon-button>\n      <md-menu-content>\n        <md-menu-item ng-show="$ctrl.shouldShow(\'saveAs\')">\n          <md-button ng-click="$ctrl.actions.saveAs()" data-sumo-test="save-as-option">\n            {{::\'common.save_as\' | i18nText}}\n          </md-button>\n        </md-menu-item>\n        <md-menu-item ng-show="$ctrl.shouldShow(\'addToDashboard\')">\n          <md-button ng-click="$ctrl.actions.addToDashboard()" data-sumo-test="add-to-dashboard-option">\n            {{::\'metrics.metricsAddToDashboard\' | i18nText}}\n          </md-button>\n        </md-menu-item>\n        <md-menu-item ng-show="$ctrl.shouldShow(\'viewInfo\')">\n          <md-button ng-click="$ctrl.actions.showInfo($event)" data-sumo-test="metrics-panel__menu__view-info">\n            {{::\'metrics.metricsViewInfo\' | i18nText}}\n          </md-button>\n        </md-menu-item>\n        <md-menu-item ng-show="$ctrl.shouldShow(\'switchToNewMetrics\')">\n          <md-button\n            ng-disabled="$ctrl.shouldDisableSwitchToNewMetricsMenuItem()"\n            ng-click="$ctrl.switchToNewMetrics($event)"\n            data-sumo-test="metrics-panel__menu__switch-to-new-metrics"\n          >\n            {{::\'metrics.metricsSwitchToNewMetrics\' | i18nText}}\n          </md-button>\n        </md-menu-item>\n      </md-menu-content>\n    </md-menu>\n  '};class Qg{constructor(e){this.$element=e,this.$onInit=()=>{this.$element.addClass("query-row")}}}Qg.$inject=["$element"];const zg={bindings:{actions:"<",row:"<"},controller:Qg,transclude:{queryRowIcon:"?queryRowIcon",queryRowActions:"?queryRowActions"},template:'\n    <div class="query-row__icon" ng-transclude="queryRowIcon"></div>\n    <div ng-transclude class="query-row__editor"></div>\n    <div class="query-row__actions" ng-transclude="queryRowActions"></div>\n  '};class Gg{constructor(){this.searchCompletionsModel=_.getPath(SumoApp,"context.searchCompletionsModel")}getCompletions(e){let t;switch(e){case"_collector":t="getCollectors";break;case"_index":t="getViewNames";break;case"_source":t="getSources";break;case"_sourceCategory":t="getSourceCategories";break;case"_sourceHost":t="getSourceHosts";break;case"_sourceName":t="getSourceNames";break;case"_view":t="getViewNames";break;default:return[]}return _.getPath(this.searchCompletionsModel,t)?this.searchCompletionsModel[t]():[]}}Gg.$inject=[];class Kg{constructor(e){this.chartLineTypesHelper=e,this.normalizeDimensionForColumn=e=>Object.keys(e).map((e=>({title:e,visible:!0}))),this.extractVariableSettingsForSeries=(e,t)=>{const i=e.getSeriesVisibility(t),r=i?e.getSeriesColor(t):ug.DISABLED_LINE_COLOR_CODE,n=e.series.defaults[t],a=_.isUndefined(_.getPath(e,"global.lineWidth"))?"2":e.global.lineWidth.toString();return{lineHTML:'<svg height="4" width="100">'+this.chartLineTypesHelper.getSVGPathHTML(e.getSeriesLineType(t),r,a)+"</svg>",queryRowName:n.displayRowId?n.displayRowId:e.getSeriesRowLabel(t),serieVisibility:i,hasData:e.seriesHasData(t),label:n.label}},this.sortGridDataByQueryName=e=>_.sortBy(e,(e=>e.queryRowName)),this.isSameCollection=(e,t)=>{let i=!0;const r=_.size(_.getPath(e,"series.defaults"));if(r!==t.length&&(i=!1),i)for(let n=0;n<r;n++)if(!e.series.defaults[t[n].id]||e.getSeriesBlockVisibility(t[n].id)!==t[n].queryRowVisibility){i=!1;break}return i}}checkAllSeriesVisibility(e,t){let i=0;return _.forEach(e,((e,r)=>{t.hasOwnProperty(r)?_.has(t[r],"visible")&&!t[r].visible||i++:e.visible&&i++})),0===i?_t.xC.ALLOFF:i===Object.keys(e).length?_t.xC.ALLON:_t.xC.PARTIALON}}Kg.$inject=["chartLineTypesHelper"];class Yg{constructor(e,t,i){this.$q=e,this.i18n=t,this.$mdToast=i,this.handleNotFoundError=()=>{const e=this.$mdToast.error().textContent(this.i18n.get("metrics.metricsSearchNotFound")).hideDelay(5e3);this.$mdToast.show(e),g.applicationState.go("app.home")}}}Yg.$inject=["$q","i18n","$mdToast"];i(10091);var Zg=i(4900),Xg=i(37243),Jg=i(13573);const ey=Object.assign(Object.assign({},F.EVENT),{module:"Metrics",component:"metricsLoadContainer"}),ty=F.MARKS,iy=F.MEASUREMENTS;class ry{constructor(e,t,i,r,n){this.metricsActions=e,this.metricsWorkspaceHelperService=t,this.logService=i,this.currentUserHelper=r,this.investigationViewService=n}static getChartTypeFromMetricsDrilldownInfo(e){const{isSingleValueWithGauge:t,isSingleValueWithSparkline:i,visualSettingsMode:r,visualSettingsType:n}=e;return r===f.VisualSettingsModeType.TIME_SERIES&&n===f.VisualSettingsType.AREA?"Area":n===f.VisualSettingsType.SVP?t?Zg.L.GAUGE:i?Zg.L.SPARKLINE:"Single":"Line"}$onInit(){this.actions=this.metricsActions.getActionCreators();const{title:e,id:t}=this.contentLibraryMetrics||{};let i;if(k.performanceLogService.mark(ey,ty.renderPath.start),this.view=this.metricsWorkspaceHelperService.createActualTabInWorkspace(this.viewId,e,t),this.drilldownInfo){switch(k.performanceLogService.mark(ey,ty.renderPath.dataFetchStart),this.drilldownInfo.type){case _t.zr.DASHBOARD:i=this.actions.buildTemporaryDrilldownMetrics(this.drilldownInfo.panel);break;case _t.zr.NEW_DASHBOARD:i=this.actions.buildTemporaryMetrics(this.getMetricsSearch(Jg.gM,this.drilldownInfo),!0,this.drilldownInfo.panel);break;case _t.zr.NEW_METRICS:i=this.actions.buildTemporaryMetrics(this.getMetricsSearch(Jg.gM,this.drilldownInfo));break;case _t.zr.WIZARD:default:i=this.actions.buildTemporaryMetrics(this.drilldownInfo.panel)}this.logNewMetricsTab(this.drilldownInfo.type)}else this.fromNewTab?(k.performanceLogService.mark(ey,ty.renderPath.dataFetchStart),i=this.actions.buildTemporaryMetrics(Object.assign(Object.assign({},Jg.gM),{title:this.view.title}))):t&&(i=this.actions.buildScratchpadFromSavedMetrics(t));i?i.then((e=>{this.actions.createMetricsPage(e).then((e=>{k.performanceLogService.mark(ey,ty.renderPath.dataRetrieved),this.view.id=e.id.toString(),this.displayMetricsPage(this.view.id)}))})):this.displayMetricsPage(this.view.id)}getMetricsSearch(e,t){var i,r;switch(t.type){case _t.zr.NEW_METRICS:const n=ry.getChartTypeFromMetricsDrilldownInfo(t),a=null===(i=t.hiddenQueryKeys)||void 0===i?void 0:i.reduce(((e,t)=>(e[t]={visible:!1},e)),{}),s=Object.assign(Object.create(ug.SumoChartSettingsObject.prototype),{blockSettings:a,global:{},id:"0",singleValueSettings:{}});return Object.assign(Object.assign({},e),{chart:(0,Xg.Q)(n,s),metricsQueryModel:Object.assign(Object.assign({},e.metricsQueryModel),{queryRows:t.queries.map((({queryKey:e,queryString:t})=>({queryString:t,rowId:e})))}),timeRange:ht.timeRangeUtil.parseTimeRangeDetails(t.timeRange)});default:return Object.assign(Object.assign({},e),null!==(r=t.panel)&&void 0!==r?r:{})}}displayMetricsPage(e){this.view.name="app.metrics",g.applicationState.go(this.view.name,Object.assign(Object.assign({},this.view.params),{viewId:e}),{location:"replace"})}logNewMetricsTab(e){const t={module:"metrics",component:"metrics",action:"drilldown",params:{type:e}};this.logService.user(t)}}ry.$inject=["metricsActions","metricsWorkspaceHelperService","logService","currentUserHelper","investigationViewService"];const ny={bindings:{viewId:"<",drilldownInfo:"<?",fromNewTab:"<?",contentLibraryMetrics:"<?"},controller:ry,template:'\n    <div class="spinner"></div>\n  '};var ay=i(16826);class sy{constructor(e,t){this.dashboardResultNormalizer=e,this.$q=t,this.getResults=(e,t,i)=>{const r=_.map([t],(e=>`sid=${e}`)).join("&");return(0,D.legacyHttpGet)(`/json/v1/metricssearch/${e}/sessionids?${r}`).then((e=>{let r=_.mapObject(e.queryResults,(e=>this.convertQueryRowId(e,i)));r=_.mapObject(r,this.appendSessionIdToQueryResults);const n=r[t];return _.isNull(n.logResult)?n.logResult=void 0:_.isNull(n.metricsResult)&&(n.metricsResult=void 0),this.dashboardResultNormalizer.normalize(n)}))},this.getResultsStream=(e,t)=>{const i=this.toServiceMetricsSearch(e);i.timeZone=(0,ht.getUserTimeZone)(),i.properties=void 0,i.logQuery=e.logQuery;return ay.Observable.fromPromise(this.createSessions(e.id,i)).map((t=>[t.results[e.id].searchQueryId])).flatMapLatest(_.partial(this.pollResults,e.id,t))},this.fetchSavedMetrics=e=>{},this.pollResults=(e,t,i)=>{const r=e=>_.some(e.queryResults,(e=>!e.metadata.state.done));return ay.Observable.fromPromise(_.partial(this.getResults,e,i,t)).map((e=>{if(this.isMetricsApiError(e.errors))throw e;return e})).repeatWhen((e=>e.delay(1e3))).publish((e=>e.takeWhile(r).merge(e.skipWhile(r).take(1))))},this.toServiceMetricsSearch=e=>{const t={id:e.id,title:e.title,description:e.description,metricsQueries:(0,nh.kG)(_.getPath(e,"metricsQueryModel.queryRows")),properties:(0,nh.Kt)(e),timeRange:this.toServiceTimeRange(e.timeRange),desiredQuantizationInSecs:_.getPath(e,"quantization.desired")},i=_.getPath(e,"quantization.desired");return i&&(t.desiredQuantizationInSecs=i),t},this.toServiceTimeRange=e=>e.details,this.handleEmptyResponse=e=>_.isEmpty(e.results)?this.$q.reject({id:void 0,key:"unknown.error",keyedErrors:void 0,message:"There's a connection issue preventing us from returning search results. Please try again. If this message continues to appear, please contact Support.",status:200}):e}list(){return(0,D.legacyHttpGet)("/json/v1/metricssearch")}get(e){return(0,D.legacyHttpGet)(`/json/v1/metricssearch/${e}`).then(nh.$f)}create(e){const t=this.toServiceMetricsSearch(e);return(0,D.legacyHttpPost)("/json/v1/metricssearch",t).then(nh.$f)}update(e){const t=e.id;(0,re.assertDefined)(t);const i=this.toServiceMetricsSearch(e);return(0,D.legacyHttpPut)(`/json/v1/metricssearch/${t}`,i).then((()=>e))}delete(e){return(0,D.legacyHttpDelete)(`/json/v1/metricssearch/${e}`)}createSessions(e,t){return(0,D.legacyHttpPost)(`/json/v1/metricssearch/${e}/sessionids`,t).then(this.handleEmptyResponse)}stopSession(e,t){const i=_.map([t],(e=>`sid=${e}`)).join("&");return(0,D.legacyHttpDelete)(`/json/v1/metricssearch/${e}/sessionids?${i}`)}appendSessionIdToQueryResults(e,t){const i=_.getPath(e,"metricsResult");return _.isUndefined(i)||(i.sessionId=t),e}convertQueryRowId(e,t){const i=_.getPath(e,"metricsResult.response");return _(i).each((e=>{e.displayRowId=e.rowId,e.rowId=t[e.rowId]})),e}isMetricsApiError(e){const t=["metrics:api_failed","metrics:query_timeout"];return!_.isUndefined(_.find(e,(e=>_.contains(t,e.key))))}}sy.$inject=["dashboardResultNormalizer","$q"];var oy=i(16826);class ly extends ne.pn{constructor(e,t){super("metricsSearches"),this.currentUserHelper=e,this.queryModelHelper=t,this.getSimpleQueries=e=>{let t;return _.isUndefined(e)||(t=_.chain(e.queryRows).pluck("queryString").filter((e=>!_.isBlank(e))).value()),t}}getObservableWithDashboardSave(e,t,i){return oy.Observable.combineLatest(this.getObservable(e),this.getCanAddToDashboardObservable(e,t,i),((e,t)=>Object.assign(Object.assign({canAddToDashboard:t},{canSwitchToNewMetrics:this.currentUserHelper.hasFeatureFlag("UIMetricsPage")}),e)))}getCanAddToDashboardObservable(e,t,i){const r=t.debounce(500).map(this.getSimpleQueries).startWith(this.getSimpleQueries(this.queryModelHelper.get(e))),n=i.map((e=>this.getSimpleQueries(_.getPath(e,"metricsQueryModel")))),a=oy.Observable.combineLatest(r,n,((e,t)=>_.isEqual(e,t))).distinctUntilChanged(),s=i.map((e=>!0===_.getPath(e,"metricsQueryModel.isValid"))).distinctUntilChanged();return oy.Observable.combineLatest([a,s],((...e)=>_.all(e))).distinctUntilChanged().startWith(!1).share()}}ly.$inject=["currentUserHelper","queryModelHelper"];var cy=i(62121),dy=i(30576);class uy extends dy.h{constructor(){super("metricsSearches")}}class py{constructor(e,t,i,r,n){this.$scope=e,this.$element=t,this.$timeout=i,this.chartEventNotificationService=r,this.currentUserHelper=n,this.selectedTab=0,this.hasData=!1,this.LEGENDS_TAB_INDEX=2,this.LOG_MESSAGES_TAB_INDEX=3,this.subscriptions=[],this.isLegendReady=!1,this.calculateRowPosition=()=>{this.$timeout((()=>{if(this.panel.ui&&this.panel.ui.rowSettingsOpenRow){const e=this.panel.metricsQueryModel.queryRows,t=_.where(e,{rowId:this.panel.ui.rowSettingsOpenRow})[0],i=e.indexOf(t),r=this.$element.find(`.query-row:eq(${i}) .metrics-query-row__settings-btn`);this.rowPosition=r.offset().top-this.$element.offset().top-24-8}}),200)},this.calculateSeriesPosition=()=>{this.$timeout((()=>{if(_.getPath(this,"panel.ui.seriesSettingsOpenRow")){const e=Um.createDomSafeId(this.panel.ui.seriesSettingsOpenRow),t=this.$element.find(`#${e}`),i=this.$element.find(".table-header").height();this.rowPosition=t.position().top+(null!=i?i:0)}}),200)},this.changeTab=e=>{this.selectedTab=e},this.triggerReflow=()=>{const e=_.getPath(this,"panel.chart.id");e&&_.isFunction(this.actions.chartModel.reflow)&&this.actions.chartModel.reflow(e)},this.handleChartClick=e=>{this.shouldPerformSeriesSelection()&&this.$scope.$evalAsync((()=>{if(e.event.point&&!_.getPath(e.event,"point.series.options.linkedTo")){this.selectedChartLineId=_.getPath(e.event,"point.series.options.id"),this.selectedChartLineId.indexOf(ug.OUTLIER_SERIES_BASE_NAME)>=0&&(this.selectedChartLineId=_.getPath(e.event,"point.sumoMetadata.seriesMetadata.id"));const t=_.getPath(this.panel,"chart.uiSettings.focusedSeriesIds");if(void 0===t||!_.contains(t,this.selectedChartLineId)){const e=_.keys(this.panel.chart.series.defaults),t={};e.forEach((e=>{t[e]={visible:this.panel.chart.getSeriesVisibility(e)}})),this.actions.chartModel.setSelectedSeries(this.panel.chart.id,t,this.selectedChartLineId)}}else{this.selectedChartLineId=void 0;const e=_.getPath(this.panel,"chart.uiSettings.tempSeriesVisibility");e&&this.actions.chartModel.unsetSelectedSeries(this.panel.chart.id,e)}}))},this.onLogOverlayFocusPeriodChange=(e,t)=>{!s.equals(e,t)&&e&&e.startTime&&(document.activeElement.blur(),this.changeTab(this.LOG_MESSAGES_TAB_INDEX))},this.registerInputControl=e=>{this.inputControls.push(e)},this.run=e=>{this.inputControls.reduce(((e,t)=>e&&t.isValid()),!0)&&(this.actions.metricsSearch.updateLogQuery?this.actions.metricsSearch.updateLogQuery(this.panel.logQuery):this.actions.queryModel.run(this.panel.metricsQueryModel))}}openSettingsPanel(e){this.$timeout((()=>{this.isLegendReady="legend"===e}))}closeSettingsPanel(e){"legend"===e&&(this.isLegendReady=!1),this.actions.blockSettings.showRowSettings&&this.actions.blockSettings.showRowSettings(void 0,!1),_.getPath(this,"actions.seriesSettings.showSeriesSettings")&&this.actions.seriesSettings.showSeriesSettings(this.panel.ui.seriesSettingsOpenRow,!1)}$onInit(){const e=this.chartEventNotificationService.getObservable([`${this.panel.chart.id}`],["chart","series"],["click"]);this.subscriptions.push(e.subscribe(this.handleChartClick)),this.showLogOverlay&&this.$scope.$watch("settingsCtrl.panel.ui.logOverlayFocusPeriod",this.onLogOverlayFocusPeriodChange),this.$scope.$watch("settingsCtrl.panel.ui.rowSettingsOpenRow",this.calculateRowPosition),this.$scope.$watch("settingsCtrl.panel.ui.seriesSettingsOpenRow",this.calculateSeriesPosition),this.$scope.$watch("settingsCtrl.panel.chart.series.defaults",(e=>{this.hasData=!_.isEmpty(e)})),this.$scope.$on("runQuery",this.run),this.inputControls=[],this.$element.addClass("metrics-dashboard-panel-settings"),this.changeTab(this.initialSettingsTabNumber||0)}$onDestroy(){_.each(this.subscriptions,(e=>e.dispose()))}isTimebasedChart(){return!!this.panel.chart&&!this.panel.chart.isSingleValueChart()}shouldPerformSeriesSelection(){return!(!_.getPath(this,"actions.chartModel.setSelectedSeries")||!_.getPath(this,"actions.chartModel.unsetSelectedSeries"))}}py.$inject=["$scope","$element","$timeout","chartEventNotificationService","currentUserHelper"];const hy={bindings:{panel:"<",actions:"<",showLogOverlay:"<",initialSettingsTabNumber:"<?"},controller:py,controllerAs:"settingsCtrl",template:'\n    <div class="metrics-dashboard-panel-settings__container" layout="row">\n      <uib-tabset active="settingsCtrl.selectedTab" flex>\n        <uib-tab heading="{{ ::\'metrics.metricsSettingsTabsQueryTitle\' | i18nText }}" index="0"\n            deselect="settingsCtrl.closeSettingsPanel()">\n          <div ng-if="settingsCtrl.showLogOverlay" class="metrics-dashboard-panel-settings__queries-pane">\n            <metrics-query-builder ng-if="settingsCtrl.panel.metricsQueryModel"\n                query-model="settingsCtrl.panel.metricsQueryModel"\n                query-model-id="{{settingsCtrl.panel.metricsQueryModel.id}}"\n                actions="settingsCtrl.actions"\n                advanced-mode="true"\n                chart="settingsCtrl.panel.chart"\n                time-range="settingsCtrl.panel.timeRange"\n                metrics-search-ui="settingsCtrl.panel.ui">\n            </metrics-query-builder>\n\n            <metrics-log-query-row ng-if="settingsCtrl.isTimebasedChart()"\n                query-string="settingsCtrl.panel.logQuery"\n                metrics-query-model="settingsCtrl.panel.metricsQueryModel">\n            </metrics-log-query-row>\n          </div>\n\n          <div ng-if="!settingsCtrl.showLogOverlay" class="metrics-dashboard-panel-settings__queries-pane">\n            <metrics-query-builder ng-if="settingsCtrl.panel.metricsQueryModel"\n                query-model="settingsCtrl.panel.metricsQueryModel"\n                query-model-id="{{settingsCtrl.panel.metricsQueryModel.id}}"\n                actions="settingsCtrl.actions"\n                advanced-mode="true"\n                chart="settingsCtrl.panel.chart"\n                time-range="settingsCtrl.panel.timeRange"\n                metrics-search-ui="settingsCtrl.panel.ui">\n            </metrics-query-builder>\n          </div>\n        </uib-tab>\n\n        <uib-tab heading="{{ ::\'metrics.metricsSettingsTabsSettingsTitle\' | i18nText }}" index="1">\n          <panel-global-settings\n              chart-settings="settingsCtrl.panel.chart"\n              query-model="settingsCtrl.panel.metricsQueryModel"\n              actions="settingsCtrl.actions.chartModel"></panel-global-settings>\n        </uib-tab>\n\n        <uib-tab heading="{{ ::\'metrics.metricsSettingsTabsLegendTitle\' | i18nText }}" index="2"\n            select="settingsCtrl.openSettingsPanel(\'legend\')"\n            deselect="settingsCtrl.closeSettingsPanel(\'legend\')">\n          <metrics-legend\n              chart="settingsCtrl.panel.chart"\n              actions="settingsCtrl.actions"\n              selected-chart-line-id="settingsCtrl.selectedChartLineId"\n              metrics-search-ui="settingsCtrl.panel.ui"\n              is-legend-ready="settingsCtrl.isLegendReady">\n          </metrics-legend>\n\n        </uib-tab>\n\n        <uib-tab ng-if="settingsCtrl.showLogOverlay" heading="{{ ::\'metrics.metricsSettingsTabsLogMessages\' | i18nText }}" index="3">\n          <metrics-log-messages\n              query-string="settingsCtrl.panel.logQuery"\n              selected-timeslice="settingsCtrl.panel.ui.logOverlayFocusPeriod">\n          </metrics-log-messages>\n        </uib-tab>\n      </uib-tabset>\n\n      <div class="metrics-dashboard-panel-settings__row-settings"\n           flex="none"\n           ng-class="{ \'open\': settingsCtrl.panel.ui.rowSettingsOpenRow }">\n        <metrics-row-settings\n            rows="settingsCtrl.panel.metricsQueryModel.queryRows"\n            settings="settingsCtrl.panel.chart.blockSettings[settingsCtrl.panel.ui.rowSettingsOpenRow]"\n            row-id="settingsCtrl.panel.ui.rowSettingsOpenRow"\n            pointer-position={{settingsCtrl.rowPosition}}\n            actions="settingsCtrl.actions.blockSettings">\n        </metrics-row-settings>\n      </div>\n\n      <div class="metrics-dashboard-panel-settings__row-settings"\n           flex="none"\n           ng-class="{ \'open\': settingsCtrl.panel.ui.seriesSettingsOpenRow }">\n        <metrics-series-settings\n            settings="settingsCtrl.panel.chart.series.custom[settingsCtrl.panel.ui.seriesSettingsOpenRow]"\n            row-id="settingsCtrl.panel.ui.seriesSettingsOpenRow"\n            pointer-position={{settingsCtrl.rowPosition}}\n            actions="settingsCtrl.actions.seriesSettings"></metrics-series-settings>\n      </div>\n    </div>\n  '};class my{constructor(e,t,i){this.$element=e,this.$timeout=t,this.currentUserHelper=i,this.state="LOADING",this.updateState=()=>{_.hasPath(this.page,["metricsSearch","ui"])&&!_.isBlank(this.page.metricsSearch.ui.criticalError)?this.state="ERROR":this.page.metricsSearch?this.state="READY":this.state="LOADING"},this.$onInit=()=>{this.showPlaceholder=!0,this.page&&this.updateState(),this.$element.addClass("metrics-page"),this.$timeout((()=>{k.performanceLogService.mark(ey,ty.renderPath.rendered),this.finalizePerformanceMeasurement()}))},this.$onDestroy=()=>{const e=Object.keys(ty.renderPath).map((e=>ty.renderPath[e]));k.performanceLogService.clearMarks(ey,e)}}$onChanges(e){e.page&&e.page.currentValue&&this.updateState()}finalizePerformanceMeasurement(){s.forEach(iy.renderPath,(e=>k.performanceLogService.measure(ey,e)));const e={memState:g.browserHelperService.getMemoryUseInfo()};s.forEach(iy.renderPath,(t=>k.performanceLogService.send(ey,t,e)))}}my.$inject=["$element","$timeout","currentUserHelper"];const gy={bindings:{actions:"<",page:"<",dashboardTitle:"<?",pageActions:"<",metricsSearchId:"<"},controller:my,template:'\n    <div ng-switch="$ctrl.state" class="vertical-flex-auto">\n      <div ng-switch-when="ERROR">\n        <unavailable-pane error-title="::\'metrics.nothingToSee\' | i18nText"\n          reason="$ctrl.page.metricsSearch.ui.criticalError"\n          image="images/svg/landscapes/desert.svg">\n          <button ux-label-button type="button" label="::\'metrics.close\' | i18nText"\n          ng-click="$ctrl.actions.onClose()"></button>\n        </unavailable-pane>\n      </div>\n\n      <metrics-dashboard-loading ng-switch-when="LOADING"\n        dashboard-title="$ctrl.dashboardTitle"\n        show-spinner="$ctrl.page.metricsSearch.ui.isFetchingSlow"\n        class="is-visible">\n      </metrics-dashboard-loading>\n\n      <div ng-switch-default class="vertical-flex-auto">\n        <blacklisted-sources-notification blacklisted-sources="$ctrl.page.blacklistedSources"\n          actions="$ctrl.pageActions">\n        </blacklisted-sources-notification>\n\n        <metrics-search-container\n          ng-if="$ctrl.page.metricsSearch"\n          metrics-search-id="$ctrl.metricsSearchId"\n          blacklisted-sources="$ctrl.page.blacklistedSources">\n        </metrics-search-container>\n      </div>\n    </div>\n  '};class yy{static createQueryDataDescriptor(e,t,i,r){return{queryId:e,metric:t,dimensionName:i,queryResults:_.map(r,(e=>yy.createSimpleDataDescriptor(e)))}}static createDataDescriptor([e=300,t=3,i=1,r=0,n=0,a=0]){return{length:e,digits:t,multiplier:i,seed:r,base:n,outlierPercent:a}}static createSimpleDataDescriptor([e=300,t=0,i=1e3,r=0,n=0]){return{length:e,min:t,max:i,seed:r,outlierPercent:n}}static getBaseDescriptor(){return[yy.createQueryDataDescriptor("A","cpu-nice","node",[[300,30,40,400,.04],[300,0,20,430],[300,0,20,42],[300,0,20,20],[300,0,30,1400],[300,0,100,320]]),yy.createQueryDataDescriptor("B","cpu-system","node",[[300,0,100,234],[300,0,100,90],[300,0,100,452],[300,0,100,620],[300,0,100,10],[300,0,100,820]]),yy.createQueryDataDescriptor("C","cpu-idle","node",[[300,0,100,627],[300,0,100,846],[300,0,100,92],[300,0,100,2847],[300,0,100,395],[300,0,100,562]]),yy.createQueryDataDescriptor("D","cpu-interrupt","node",[[300,0,100,49],[300,0,100,482],[300,0,100,492],[300,0,100,3209],[300,0,100,582],[300,0,100,2395]]),yy.createQueryDataDescriptor("E","cpu-user","node",[[300,0,100,235],[300,0,100,594],[300,0,100,305],[300,0,100,285],[300,0,100,202],[300,0,100,502]]),yy.createQueryDataDescriptor("F","cpu-steal","node",[[300,0,100,92],[300,0,100,395],[300,0,100,205],[300,0,100,9289],[300,0,100,395],[300,0,100,239]])]}static getDescriptor(e){return yy.descriptors[e]||yy.getBaseDescriptor()}static digitsNeded(e){return e<0&&(e*=-1),e<10?1:1+yy.digitsNeded(e/10)}static multiplier(e,t){const i=Math.abs(t-e);return i/Math.pow(10,yy.digitsNeded(i))}static convertSimpleDataDescriptor(e){const t=e.max-e.min;return yy.createDataDescriptor([e.length,yy.digitsNeded(t),yy.multiplier(e.min,e.max),e.seed,e.min,e.outlierPercent])}}yy.descriptors={outlier1:[yy.createQueryDataDescriptor("A","cpu","node",[[100,70,90,8372,.1],[90,70,90,8237,.1]]),yy.createQueryDataDescriptor("B","cpu-system","region",[[80,70,90,8936,.1],[70,70,90,8526,.1],[60,70,90,8001,.1]])]};const vy="7296667108705262650282472586664979207607859297394687419118439802548616542651043355186424968824093714349034448965829421173787853735696082992860863349322209007296629042503085983654487367202818466172577742223300921548284160847532398772809270045228951530969770880244362994543359612911282955229350816786519011822894052922720589061928746624635795941366901124028772514275722428918335236747210115240512375408552993681636251581361554589888277099627771389870387315805638066649055061692164571221026305223609119300005895340134455363215710528879782442314664931204019056542697335110681323496371117360663256114859408265267759352225507913492792995209087890175701111908789331063602509663906970864892363508883719456280415427224526187077324788407247360977037788920667154721283800313595298263348939056348094826129636131220034861340255103412234477240169579349296054341124731477274056437997129099384539624459281318180864729455816363387733860245759541869775487844839335467982874339335720450433242351672809113221893001482806312949946034982273804821811160858822866526051328345909566923239430265467598386675908940258303944770029749952688909378129037576671204056687128384808483283511987168416549588969485536021262807868222662628077125490174973942668810007429508485487849285349180505933403886009453885374657340510734684876807460637705415881965198708264264199728059756916190885515330985315155080569001923205459547162261565107815308966003731494510714768962936949572810471352331457476946780845882808813348999474799133987964145986643571428743448884543941688150224683889157041154254201830508330113277091513028377325323318565102693992369216170607527718227207242432532547829506557014103452299232781969844089451199718885755675796720051663436851822936969776362494602530543342280664088237201673028645207330590332654943530741539923665557880404413413095030042445772125903617038836507837015403801011383837998211924380940309355167114203216409206500056108032441135434317258381356977269400800725118318407492482346391685903036261334680789266428627888267029330878162677503553345167000909435514348558564073780919144977959944666122950831631741460687789984594884004904622762258104081199969921970786846068141206190613396480509725104196821282929219314410568332667194673896225521682778378144578117654120220229568940267470541806403190135785698988097973511438956509820419303577381293998796802793099519702955441652353284712993398425656905949466091489064979770971362385673039789297286431419026614343367231923282403946792195039604291587068371297418954463205887192562483123341788490779567407914393432839562155193163106238473689935535336196366934779916790113093268625847119209599876741891381136359138621439093696593329187943188213111459455710016543862538003573581062204626730978927702883740095458686056033040506106388407223824649618530207010810441961526600402239988495870817315926897495693302405025059441996656825640262722073003649610540907658637940754677591979478606782831015803984157758897759455309992386880138945513549725952596101528839785412200406103571751241289270927782243568916289755136161926165004206851719060537463129778818599303962910204195502928830083634043041818146440186211829346523315546950322101717734159521834498912928136485532881318623974619273674760824845365764580643525657016330734015433059012204614140668300117659467685986998741706912690483080233205558969013870750605452974212981017992412016369107287295167157928065411739659817248450422861547157653905916415977263398114683106243791374809484380532771168373177546167533465273156584417248778779567004376652599460613793012591226670003716136230711159719453201287222441374402594886342688278805361211260659460424552419330870136905475211674958476354752256359462614327543865399262660249792486215111346941499704577128197896783824191358224436342979176030232749960372750830020277663431343194310106834156102535237853820872950325586153741837243818903347416629249735758431897287374338195862381217488683357468553861170344187672877085594675460188455551665639154811757534191533673827315908380291368758703104768277309305543683818276271838554857031878612300273698967611768520914683094884539611864469777224243341409928802333418445653296147446442325904384502612690743617609084616293006898952273699583321169659593468975245730918469650772284178170805662570094594242004965059668757209550166270479740463145340833122588723205721188453428478008176040549791870333550376581241030228049671123273817263298545287800326824306774896318415007967364504575576912642366256692711514906038940998828298266924407244718098884560150495583777730596896848700089761016218738302268801636220691926169775425799753904956944976553361585301562481809642390338950468458451306543375828628820308275568174011319576663125566923527163794026772958710112059552055339918023027194398538563579374746442650836341930059327316332340195998672145746814514805530884870496455377243554135763541001153963115017976883730886753797478261327345269893557320810812839299420167878178853325227446712209102022303781742089783686914135166626776165312970534132401245265430696395003078482844354232270451508271251913445781226869067120945414116206933212678562841746959020201340590348374358179751867111095080926137463397114948956716866382463253685187830979642626582984821686703338602579783738622280410027907880754170084950056114329263586228017408036857850807481943326407452778616420488974356992231254754471506467442614267724800909827047432463045129651468763919890627146303758524050713012152035417562494017995233303701601925049214322094242291174480423538927163910415148384981301247051329102842932132786213543700182174058498029685191162812841658867063393219803136336122294598389732454922319042144206508336918392657770847248348703247156491052178824848776793523774207144425118464974181390093415566933502768768091860108945984464045586032982066389849420353443974029913310349879027478641999213062210391995047821898266951733777211709415534867710836497771376874872794841589604921186803994458788430989716252406567975363839334368137562761298536876333641685849901605737748815074765205029355851309442726463468334234803342236766256594116591796037194723008699399632048665119082707612566784941568669704765052748828336140053609084924973332805712929397752842823612184967708424678058458510210277023783787525124482698411483035412032607009144251693278358792387788336517831935841145765353778708496053387558603422821316553822102007801609872555006834744847773983078341141091197136796939019335736356981105831164223889953739633649019846948369360927788968035143859863980231960496076455299942298467296770744167585560749086182616003017546798988962139241317544937474741669672884987982281510129055917183448204361451811149354111783648074512479111431764512146325474571747081797555079202181235806880024236128544916373446250174155337567262262848372996365910585490336343884926764983428837390480515720117161004777716355912845953918344922729237329038230683353896752307913451450357081765694368828336409028235289399752389220244257646078372240485256783643937326662023220371278734487054723418349434013301220369021742894180503075741931791535798593904893011915799295018875159808255442610464735532862507234057195254306197087579932388144653952681713168897217139480396285690151337959191669926180245584451085340421108509805338514889652884299346385086260952480026200773524463537676493055523559591840939094771766478158453558974319929950463937345716232015715105075185560545483613022286416167298179470138120050728533204568820201965716525805007130787766941989345050325806299438361141332173754660532348469002216775207206870092303475412910005037474524591504404275791268968821335637755720505876223156851398336935676801049276892132131163212343912360615654088460544175798173428811810371991325480049492018353901554452995019481635999742064736580832766105514612819796837089128096337435650621350222526405755019428910908945787082235391847470779380169704463917978043189694342342359456289352864434643690934632752887786130166488467988352399853203176319655032709928219928500199085355653681997755168609347373234648270728784468484526831738612753864537147613979306558695395907316201598207950263840402390764120052776105427998496572936481601313560665366891821844908015588508515129425604974436124009883133685378705679960464471617466674884468697748863599740462690500270657856316328248530418029829649973482683661060516999144157145191335514232510567439326195207557259350171996370536690298028242489575252882534934965902995667321967005493698879541825573135768598327915254145572292753432808894248069925553851574348138260902161018904808063952104597840792683139193787193535912161354926507998291137700282625686587536301155396186173262578423908125237910733818015799689322648954691923741796155072096734487156802995975587724476748196524029443240978678586570380598683661834862319465786165569251237232108007058207250469046078041179002531225907807088841749826619613444847627302918378030504535814042554813363944417636843162528747836754955057655072271918063821967474485352573552779159057461562495053997513381782134158317304400898713582417665877772332984787828580677475516506814214604891577190725922555803803937730563414884198722004430962080964043855134576792016554161244888995319949145011196745415735295602925404989832053520319344631839190799737983281641992998806877072740050159240755738089916342594673321356718915319629483886400768659146642307817593563866963276076431893851787304229381620053983492795992870371591895853597473434681013869124435399020386281656768571332763832946921732703469637401774822062472461158963578293328276298902114459867711421565415781349370107297606651047808921936045342257730574638022425617927700783505270185288197073125052698349593408691122973683495591209272933191211583536620167997753350446443338055859099352656631092407099956350820536978670883891786498810811281618222386544864245156173939607756247287764462591625730591023146835321164690435478191473138658086315534136598294714768662741258865880525648399027150424063593948637310057785782219283396391290316561392090101038779451190892291364339268348276295964592783758317364668125930060552898628807",fy={logResult:null,metricsResult:{error:!1,errorMessage:null,errorInstanceId:null,errorKey:null,keyedErrors:[],dataSource:"MetricsSource",controlCode:"",state:9,response:void 0,queryInfo:{startTime:1468903054159,endTime:1468903954159}},keyedErrors:[],error:!1,errorMessage:"",errorInstanceId:"",errorKey:"",resultTraitLog:"false:"},_y={datapoints:{count:[],avg:[],min:[],max:[],value:[],outlierParams:[],timestamp:[]},metric:{algoId:1,dimensions:[{key:"metric",legend:!0,value:"_unit"},{key:"node",legend:!0,value:"node-x"},{key:"category",legend:!0,value:"demo-data"}],name:""}};class Sy{static getRandom(e){return 1e-4*parseInt(vy.slice(e+1e3,e+4+1e3),10)}static generateArrayOfNumbers({length:e,digits:t=1,seed:i=0,multiplier:r=1,base:n=0,outlierPercent:a=0}){return _.times(e,(e=>{let s=parseInt(vy.slice(i+e,i+e+t),10)*r;return Sy.getRandom(i+e)<a&&(s*=s%2==0?-1:2),n+s}))}static generateMetricsResult(e){return _.map(e,(e=>({results:_.map(e.queryResults,Sy.generateSingleMetricsResult),rowId:e.queryId})))}static generateMetricsResponse(e){const t=s.copy(fy);return t.metricsResult.response=Sy.generateMetricsResult(e),t}static generateChartSeriesData(e,t={startTime:147683694e4,endTime:147683784e4}){const i=[];return _.each(e,(e=>{const r=Sy.createSeriesBaseName(e);_.each(e.queryResults,((n,a)=>{const s=Sy.createSeriesData(e.queryId,r+a,n,t),o=Sy.getOutliersFromData(_.map(s.data,(e=>e.y)));_.each(s.data,((e,t)=>e.sumoMetadata.outlierParams=o[t])),i.push(s)}))})),i}static getDemoData(e){const t=yy.getDescriptor(""),i=_.filter(e.metricsQueryModel.queryRows,(e=>!_.isEmpty(e.queryString))).length,r=Sy.generateMetricsResponse(t.slice(0,i)),n=e.timeRange.startTime,a=e.timeRange.endTime;return r.metricsResult.queryInfo.startTime=n,r.metricsResult.queryInfo.endTime=a,_.each(e.metricsQueryModel.queryRows,((e,t)=>{_.isEmpty(e.queryString)||_.each(r.metricsResult.response[t].results,((e,i)=>{const s=Math.floor((a-n)/e.datapoints.value.length);let o;for(let a=0;a<e.datapoints.value.length;a++){o=n+a*s;Sy.getRandom(e.datapoints.value[a]%1e3)<.1&&(o+=Math.floor(s/2)),r.metricsResult.response[t].results[i].datapoints.timestamp.push(o)}}))})),r}static createSeriesData(e,t,i,r){const n=yy.convertSimpleDataDescriptor(i),a=Sy.generateArrayOfNumbers(n),s=(r.endTime-r.startTime)/(i.length-1);return{id:`${e}_${t}`,data:_.map(a,((i,n)=>Sy.createDatapoint(e,t,i,r.startTime+n*s)))}}static createSeriesBaseName(e){const t=e.dimensionName||"node";return`$metric=${e.metric},category=demo_data,${t}=${t}-`}static createDatapoint(e,t,i,r){const n=Math.floor(r);return{x:n,y:i,sumoMetadata:Sy.createDatapointMetadata(e,t,i,n)}}static createDatapointMetadata(e,t,i,r=0){return{x:r,y:i,avg:i,min:i,max:i,count:1,isClientInterpolated:!1,seriesMetadata:Sy.createSeriesMetadata(e,t),outlierParams:[0,0,0]}}static createSeriesMetadata(e,t){return{blockId:e,id:`${e}_${t}`,name:t}}static getOutliersFromData(e){return _.map(e,((t,i)=>{let r=0,n=0,a=t;if(i>=20){const{median:s,stdDev:o}=Sy.getStdDevAndMedian(e.slice(i-20,i));r=o,n=Math.abs(t-s)/r,a=s}return[n,a,r]}))}static getStdDevAndMedian(e){const t=_.reduce(e,((e,t)=>e+t),0)/e.length,i=Math.sqrt(_.reduce(e,((e,i)=>e+Math.pow(i-t,2)),0)/(e.length-1));return{median:t,stdDev:i}}}Sy.generateSingleMetricsResult=(e,t)=>{const i=yy.convertSimpleDataDescriptor(e),r=s.copy(_y),n=_.defaults(i.length,0);r.metric.dimensions[0].value="cpu",r.metric.dimensions[1].value=`node-${t}`,r.datapoints.count=_.times(n,(()=>1)),r.datapoints.value=Sy.generateArrayOfNumbers(i);let a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;r.datapoints.value.forEach((e=>{a+=e,e<o&&(o=e),e>l&&(l=e)}));const c=a/r.datapoints.value.length;return r.horAggs={avg:c,min:o,max:l},r.datapoints.outlierParams=Sy.getOutliersFromData(r.datapoints.value),r};var by=i(80545),Ey=i(16826);class Ty{constructor(e,t,i,r,n,a,o,l,c,d,u,p,h,m,g,y,v,S,b){this.currentUserHelper=e,this.dashboardService=t,this.metricsSearchNetworkService=i,this.metricsSearchHelper=r,this.chartModelActions=n,this.queryModelActions=a,this.queryModelHelper=o,this.metricsViewInfoDialog=l,this.dashboardResultNormalizer=c,this.$mdToast=d,this.dashboardConflictResolutionService=u,this.pageBlock=p,this.$q=h,this.dashboardActionsService=m,this.$timeout=g,this.i18n=y,this.metricsSearchActionConstants=v,this.metricsShortcodeNetworkService=S,this.contentMetricsService=b,this.request=e=>(t,i)=>{const r=this.metricsSearchHelper.get(e);if(!_.isUndefined(r)&&r.isFetching)return;const n=this.$timeout((()=>t(this.markFetchSlow(e))),500);return this.metricsSearchNetworkService.get(e).then(_.partial(this.handleFetchSuccess,t)).catch(_.partial(this.handleFetchError,t,e)).finally((()=>this.$timeout.cancel(n)))},this.requestCreate=e=>(t,i)=>this.metricsSearchNetworkService.create(e).then((e=>{const i=(0,nh._2)(e);return t({payload:i,type:this.metricsSearchActionConstants.FETCH_SUCCESS}),e})),this.requestDelete=e=>(t,i)=>(t(this.deleteMetricsSearch(e)),this.metricsSearchNetworkService.delete(e)),this.run=e=>{let t={};return(i,r)=>{const n=this.metricsSearchHelper.load(e);if(this.isQueryModelEmpty(n.metricsQueryModel))return void this.handleEmptyPanelRun(n,i);{const e=_(_.range(rg.m.MAX_QUERY_ROWS)).map(rg.J),i=_.pluck(n.metricsQueryModel.queryRows,"rowId");t=_.object(e.slice(0,i.length),i)}if(n.timeRange.errors>0)return void this.handleInvalidTimeRange(n,i);i(this.clearData(n.id));const a=i(this.requestUpdate(n));i(this.requestRunPanelStart((0,nh._2)(n)));return Ey.Observable.fromPromise(a).switchMap((()=>this.currentUserHelper.hasFeatureFlag("UIMetricsDemoData")&&_.some(n.metricsQueryModel.queryRows,(e=>"metric=__demo__"===e.queryString))?Ey.Observable.of(this.dashboardResultNormalizer.normalize(Sy.getDemoData(n))):this.metricsSearchNetworkService.getResultsStream(n,t))).subscribe((t=>{const r=this.calculatePanelProgress(t),a={id:e,progress:r,sessionId:_.getPath(t,"queryResults[0].metadata.sessionId")};if(i(this.requestRunPanelProgress(a)),i(this.requestRunPanelData(e,t)),i(this.updateQuantization(e,{desired:_.getPath(n,"quantization.desired"),actual:_.getPath(t,"queryResults[0].metadata.actualQuantization")})),100===r){const r=this.convertResultsToQueryModelUpdate(t);i(this.requestRunPanelComplete(e,n,r))}}),(t=>{const r=this.convertResultsToQueryModelUpdate(t);i(this.requestRunPanelFailure(e,n,r)),i(this.requestRunPanelData(e,{}))}))}},this.updateLogQuery=(e,t)=>(i,r)=>{let n;const a=this.metricsSearchHelper.load(e);if(void 0===t||_.isEmpty(t.trim()))n=void 0;else if(t.indexOf("timeslice")>-1)n=t;else{const e=a.timeRange,i=e.endTime-e.startTime;n=moment.duration(i,"milliseconds").asHours()>3?`${t} ${_t.XZ}`:`${t} ${_t.E8}`}const s={payload:{metricsSearchId:e,logQuery:n},type:this.metricsSearchActionConstants.UPDATE_LOG_QUERY},o=_.getPath(a,"chart.id")||e;return i(this.chartModelActions.updateLogOverlaySettings(o,{queryString:n})),i(s),s},this.updateTimeRange=(e,t)=>({payload:{metricsSearchId:e,timeRange:t},type:this.metricsSearchActionConstants.UPDATE_TIME_RANGE}),this.updateQuantization=(e,t)=>({payload:{metricsSearchId:e,quantization:t},type:this.metricsSearchActionConstants.UPDATE_QUANTIZATION}),this.requestUpdate=e=>(t,i)=>(t(this.startRequestUpdate((0,nh._2)(e))),this.metricsSearchNetworkService.update(e).then((()=>e)).catch((e=>{const t=e.errors[0];let i=this.i18n.get(`keyederrors.${t.key}`);return i||(i=e.message),this.$mdToast.show(this.$mdToast.error().textContent(i).parent(s.element(".metrics-page"))),this.$q.reject(e)}))),this.renameMetricsSearch=(e,t)=>(i,r)=>{const n=this.metricsSearchHelper.load(e);if(_.isUndefined(n))return i(this.request(e)).then((e=>{const r=Object.assign(Object.assign({},e),{title:t});return i(this.requestUpdate(r))})).then((e=>e.contentLibraryItemId?this.updateContentItem(e):e));{const e=Object.assign(Object.assign({},n),{title:t});return i(this.requestUpdate(e)).then((e=>e.contentLibraryItemId?this.updateContentItem(e):e))}},this.updateContentItem=e=>this.contentMetricsService.updateAndNotify((0,nh.w$)(e)),this.toggleQueryRowVisible=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockVisibility(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateQueryRowColorFamily=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockColorFamily(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateQueryRowCustomLabel=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockCustomLabel(e,t,i))},this.updateQueryRowLineType=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockLineType(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateQueryRowChartType=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockChartType(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateQueryRowYAxis=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockYAxisType(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateQueryRowInterpolationMethod=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockInterpolationMethod(e,t,i))},this.updateQueryRowInterpolationFixedValue=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setBlockInterpolationFixedValue(e,t,i))},this.updateSeriesColor=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setSeriesColor(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateSeriesVisibility=(e,t,i)=>(r,n)=>{r(this.chartModelActions.setSeriesVisibility(e,t,i)),r(this.requestUpdateLatestPanel(e))},this.updateLegendSettings=(e,t)=>(i,r)=>{i(this.chartModelActions.setLegendSettings(e,t)),i(this.requestUpdateLatestPanel(e))},this.deleteSettings=(e,t)=>(i,r)=>{i(this.chartModelActions.deleteSettings(e,t))},this.removeQueryRowAndConsolidateRowIds=(e,t,i)=>(r,n)=>{const a=this.queryModelHelper.get(e.toString()),s={};_.chain(a.queryRows).filter((e=>e.rowId!==i)).each(((e,t)=>{const i=String.fromCharCode("A".charCodeAt(0)+t),r=e.rowId;i!==r&&(s[r]=i)})),_.isFunction(this.queryModelActions.removeRow)&&(r(this.chartModelActions.deleteSettings(e,i,s)),r(this.queryModelActions.removeRow(t,i,s)))},this.mergeSettingsAndRedraw=(e,t)=>(i,r)=>{i(this.chartModelActions.mergeSettingsAndRedraw(t)),i(this.requestUpdateLatestPanel(e))},this.mergeSingleValueSettingsAndRedraw=(e,t,i)=>(r,n)=>{r(this.chartModelActions.mergeSingleValueSettingsAndRedraw(t,i)),r(this.requestUpdateLatestPanel(e))},this.mergeSettings=(e,t)=>(i,r)=>{i(this.chartModelActions.mergeSettings(t)),i(this.requestUpdateLatestPanel(e))},this.updateYAxes=(e,t,i)=>(r,n)=>{r(this.chartModelActions.updateYAxes(t,i)),r(this.requestUpdateLatestPanel(e))},this.updateToDashboard=(e,t)=>(this.pageBlock.blockPage(),(i,r)=>{if(t.parentType===f.PanelParentType.DASHBOARD)return this.pageBlock.unblockPage(),i(this.updateDashboard(e,t));{const r=this.$q.reject();if(!t.parentAccessKey||!t.version||!t.parentId)return this.pageBlock.unblockPage(),r;const n={accessKey:t.parentAccessKey,id:t.parentId,type:"DASHBOARD",modifiedAt:t.version.modifiedAt,modifiedBy:t.version.lastModifier.name};return this.dashboardConflictResolutionService.onDashboardUpdateAction(n).then((n=>{if("CREATE"!==n.action)return"OVERWRITE"===n.action?(this.pageBlock.unblockPage(),i(this.updateDashboard(e,t))):(this.pageBlock.unblockPage(),r);this.addToDashboardFromSource(e)}))}}),this.addToDashboardFromSource=e=>{var t,i,r,n;const a={metricsQueries:(0,nh.kG)(_.getPath(e,"metricsQueryModel.queryRows")),properties:(0,nh.Kt)(e),queryString:void 0,timeRange:e.timeRange.details,title:e.title,viewerType:null!==(n=null===(r=null===(i=null===(t=e.chart)||void 0===t?void 0:t.global)||void 0===i?void 0:i.chartType)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:"",quantization:e.quantization,type:"metrics",isTimeseries:!0};return this.addToDashboard(a)},this.addToDashboard=(e,t)=>this.dashboardActionsService.runAction({actionType:by.fD.CREATE,event:null,params:{type:t||F.CONTENT_APP_DATA_SOURCE_TYPES.METRICS,payload:e}}).then((e=>{if(e.items){return e.items[0]}})),this.showInfo=(e,t)=>{this.metricsViewInfoDialog.launch(e,t)},this.onSwitchToNewMetrics=()=>e=>{e(E.currentUserActions.updateUserSetting({key:"prefersClassicMetrics",value:"false"}))},this.drillDownSearchQuery=(e,t,i)=>{const r=this.metricsSearchHelper.load(e);let n="";r.logQuery&&(n=(0,_t.w4)(r.logQuery));const a=ht.userDateService.formatDateTime(t)+" to "+ht.userDateService.formatDateTime(i);SumoApp.applicationView.searchDrillDown({id:r.id,queryString:n,skipAlert:!0,executeSearch:!0,timeRange:a},!0)},this.buildMonitorErrorMessage=(e,t)=>{$.logWarnLocal("there was an error!",e,t)},this.getMetricsSearchByShortCode=e=>(t,i)=>this.metricsShortcodeNetworkService.get(e),this.saveMetricsSearchWithShortCode=e=>(t,i)=>this.metricsShortcodeNetworkService.save(e).then((i=>{t(this.saveShortcode(e.id,i))})),this.fetchSavedMetrics=e=>()=>this.metricsSearchNetworkService.fetchSavedMetrics(e),this.handleEmptyPanelRun=(e,t)=>{const i=e.id;t(this.requestRunPanelFailure(i,e,{errors:void 0,isValid:!1})),t(this.requestUpdate(e)),t(this.requestRunPanelData(i,void 0)),t(this.chartModelActions.setPristineState(i))},this.updateDashboard=(e,t)=>(i,r)=>{const n=t.parentType===f.PanelParentType.DASHBOARD;let a=this.convertToDashboardPanel(e,n);a=Object.assign(Object.assign({},a),{id:t.id,parentId:t.parentId,parentAccessKey:t.parentAccessKey,viewerType:t.viewerType,width:t.width,height:t.height,x:t.x,y:t.y,key:t.key,parentType:t.parentType});const o={queryRows:e.metricsQueryModel.queryRows};a.metricsQueryModel=o,a.queryString=void 0;return(n?this.dashboardActionsService.updateNewDashboardPanel(a):this.dashboardService.updatePanel(a.parentId,a)).then((()=>a)).catch((e=>(this.$mdToast.show(this.$mdToast.error().textContent(e.message).parent(s.element(".metrics-page"))),this.$q.reject(e))))},this.convertToDashboardPanel=(e,t)=>({id:e.id,title:e.title,queryString:e.logQuery,properties:e.properties,metricsQueryModel:e.metricsQueryModel,chart:e.chart,timeRange:t?e.timeRange.details:e.timeRange,quantization:e.quantization}),this.handleInvalidTimeRange=(e,t)=>{const i=e.id;t(this.requestRunPanelFailure(i,e,{errors:e.timeRange.errorMessages,isValid:!1})),this.$mdToast.show(this.$mdToast.error().textContent("Invalid Time Range.").parent(s.element(".metrics-page")))},this.calculatePanelProgress=e=>_.all(e.queryResults,(e=>!0===_.getPath(e,"metadata.state.done")))?100:0,this.handleFetchSuccess=(e,t)=>(e(this.fetchSuccess(t)),t),this.handleFetchError=(e,t,i)=>{const r=this.i18n.get("metrics.metricsSearchNotFound");return e(this.fetchFailure(t,r)),this.$q.reject(i)},this.markFetchSlow=e=>({type:this.metricsSearchActionConstants.FETCH_SLOW,payload:{id:e}}),this.fetchFailure=(e,t)=>({type:this.metricsSearchActionConstants.FETCH_FAILURE,error:!0,payload:{[e]:{criticalError:t}}}),this.fetchSuccess=e=>({payload:(0,nh._2)(e),type:this.metricsSearchActionConstants.FETCH_SUCCESS}),this.deleteMetricsSearch=e=>({type:this.metricsSearchActionConstants.REQUEST_DELETE,payload:{entities:{metricsSearches:{[e]:{id:e}},queryModels:{id:e},charts:{id:e}},ui:{metricsSearches:{id:e}}}}),this.saveShortcode=(e,t)=>({type:this.metricsSearchActionConstants.SAVE_SHORTCODE,payload:{metricsSearchId:e,shortcode:t}})}getActionCreators(){return(0,Zn.bindActionCreators)({request:this.request,requestCreate:this.requestCreate,requestDelete:this.requestDelete,requestUpdate:this.requestUpdate,renameMetricsSearch:this.renameMetricsSearch,clearData:this.clearData,deleteSettings:this.deleteSettings,requestRunPanel:this.run,toggleQueryRowVisible:this.toggleQueryRowVisible,updateQueryRowColorFamily:this.updateQueryRowColorFamily,updateQueryRowCustomLabel:this.updateQueryRowCustomLabel,updateQueryRowLineType:this.updateQueryRowLineType,updateQueryRowChartType:this.updateQueryRowChartType,updateQueryRowYAxis:this.updateQueryRowYAxis,updateQueryRowInterpolationMethod:this.updateQueryRowInterpolationMethod,updateQueryRowInterpolationFixedValue:this.updateQueryRowInterpolationFixedValue,updateSeriesColor:this.updateSeriesColor,updateSeriesVisibility:this.updateSeriesVisibility,updateLogQuery:this.updateLogQuery,updateTimeRange:this.updateTimeRange,updateQuantization:this.updateQuantization,mergeSettingsAndRedraw:this.mergeSettingsAndRedraw,mergeSingleValueSettingsAndRedraw:this.mergeSingleValueSettingsAndRedraw,mergeSettings:this.mergeSettings,updateYAxes:this.updateYAxes,updateToDashboard:this.updateToDashboard,removeQueryRowAndConsolidateRowIds:this.removeQueryRowAndConsolidateRowIds,updateLegendSettings:this.updateLegendSettings,getMetricsSearchByShortCode:this.getMetricsSearchByShortCode,saveMetricsSearchWithShortCode:this.saveMetricsSearchWithShortCode,fetchSavedMetrics:this.fetchSavedMetrics,onSwitchToNewMetrics:this.onSwitchToNewMetrics},Te.store.dispatch)}fetchVersion(e){return g.contentItemService.fetchVersion(e)}requestUpdateLatestPanel(e){return this.requestUpdate(this.metricsSearchHelper.load(e))}convertResultsToQueryModelUpdate(e){const t=_.pluck(e.queryResults,"errors"),i=_.compact([].concat(e.errors,_.flatten(t)));return{errors:i,isValid:(r=i,_.isUndefined(r)||_.isEmpty(r)||!_.some(r,(e=>e.values.type===rg.m.ERROR_TYPES.ERROR)))};var r}requestRunPanelStart(e){return{payload:e,type:this.metricsSearchActionConstants.REQUEST_RUN_PANEL}}clearData(e){return{type:this.metricsSearchActionConstants.CLEAR_DATA,payload:{entities:{metricsSearches:{id:e}}}}}requestRunPanelData(e,t){return{type:this.metricsSearchActionConstants.UPDATE_DATA,payload:{data:{metricsSearches:{[e]:t}}}}}requestRunPanelProgress(e){return{type:this.metricsSearchActionConstants.UPDATE,payload:{entities:{metricsSearches:{[e.id]:e}}}}}requestRunPanelFailure(e,t,i){const r=Object.assign({},t.metricsQueryModel,i),n=Object.assign({},t,{metricsQueryModel:r});return{type:this.metricsSearchActionConstants.REQUEST_RUN_PANEL_FAILURE,error:!0,payload:{entities:{metricsSearches:{[e]:{isFetching:!1}},queryModels:{[e]:i}},history:{metricsSearches:{[e]:n}}}}}requestRunPanelComplete(e,t,i){const r=Object.assign({},t.metricsQueryModel,i),n=Object.assign({},t,{metricsQueryModel:r});return{type:this.metricsSearchActionConstants.REQUEST_RUN_PANEL_SUCCESS,payload:{entities:{metricsSearches:{[e]:{isFetching:!1}},queryModels:{[e]:i}},history:{metricsSearches:{[e]:n}}}}}startRequestUpdate(e){return{payload:e,type:this.metricsSearchActionConstants.REQUEST_UPDATE}}isQueryModelEmpty(e){return _.chain(_.getPath(e,"queryRows")).pluck("queryString").all(_.isBlank).value()}}var xy=i(83396);class Cy extends xy.b{constructor(e,t,i){super(i),this.chartModelHelper=e,this.queryModelHelper=t}toDomainModel(e){let t;if(!_.isUndefined(e)){const i=this.queryModelHelper.load(e.metricsQueryModel),r=this.chartModelHelper.load(e.chart);t=Object.assign({},e,{metricsQueryModel:i,chart:r})}return t}}function Ay(e,t,i,r,n,a,s,o,l,c,d,u,p,h,m,g,y,v,f){return new Ty(e,t,i,r,n,a,s,o,l,c,d,u,p,h,m,g,y,v,f)}function wy(e,t,i){return new Cy(e,t,i)}Ay.$inject=["currentUserHelper","dashboardService","metricsSearchNetworkService","metricsSearchHelper","chartModelActions","queryModelActions","queryModelHelper","metricsViewInfoDialog","dashboardResultNormalizer","$mdToast","dashboardConflictResolutionService","pageBlock","$q","dashboardActionsService","$timeout","i18n","metricsSearchActionConstants","metricsShortcodeNetworkService","contentMetricsService"],wy.$inject=["chartModelHelper","queryModelHelper","metricsSearchStoreName"];var Iy=i(16826);class Ry{constructor(e,t){this.metricsSearchHelper=e,this.stateStoreModelName=t,this.getUIObservable=e=>Te.store.legacy$.map((t=>this.getUI(e))).distinctUntilChanged(void 0,Immutable.is).merge(Iy.Observable.of(this.getUI(e))).map(this.toJS),this._get=e=>{if(Immutable.Iterable.isIterable(e))return e.get("ui").get("metrics")},this.getUI=e=>Te.store.getImmutableState().getIn(["ui",this.stateStoreModelName,e.toString()])}getObservable(e){const t=this.metricsSearchHelper.getObservable(e).startWith(void 0),i=this.getUIObservable(e),r=Te.store.legacy$.map(this._get).distinctUntilChanged(void 0,Immutable.is).map((e=>e.toJS()));return Iy.Observable.combineLatest(i,r,t,((e,t,i)=>Object.assign(Object.assign({ui:e},t),{metricsSearch:i})))}get(e){const t=this._get(Te.store.getImmutableState()).toJS();return t.metricsSearch=this.metricsSearchHelper.get(e),t}load(e){return this.get(e)}toJS(e){return!_.isUndefined(e)&&_.isFunction(e.toJS)?e.toJS():e}}function Dy(e,t,i,r,n,a,s,o,l,c,d,u,p,h,m,g,y,v,f,_){let S;return S=e.hasFeatureFlag("UIMetricsScratchpadMock")?r:i,new Ty(e,t,S,n,a,s,o,l,c,d,u,p,h,m,g,y,v,f,_)}function Oy(e,t,i,r,n,a,s,o,l){return new Jg.Kl(e,t,i,r,n,a,s,o,l)}function Ny(e,t,i){return new Cy(e,t,i)}function My(e,t){return new Ry(e,t)}Dy.$inject=["currentUserHelper","dashboardService","metricsSearchScratchpadNetworkService","metricsSearchScratchpadNetworkServiceMock","metricsSearchScratchpadHelper","chartModelActions","queryModelActions","queryModelHelper","metricsViewInfoDialog","dashboardResultNormalizer","$mdToast","dashboardConflictResolutionService","pageBlock","$q","dashboardActionsService","$timeout","i18n","metricsSearchScratchpadActionConstants","metricsShortcodeNetworkService","contentMetricsService"],Oy.$inject=["currentUserHelper","metricsSearchScratchpadActions","dashboardPanelActions","metricsPageService","metricsSearchUIActions","$mdToast","$q","i18n","dashboardService"],Ny.$inject=["chartModelHelper","queryModelHelper","metricsSearchScratchpadStoreName"],My.$inject=["metricsSearchScratchpadHelper","metricsSearchScratchpadStoreName"];var ky=i(16826);class Ly{constructor(e,t){this.dashboardResultNormalizer=e,this.$q=t,this.getResults=(e,t,i)=>{const r=_.map([t],(e=>`sid=${e}`)).join("&");return(0,D.legacyHttpGet)(`/json/v1/metricssearch/scratchpad/${e}/sessionids?${r}`).then((e=>{let r=_.mapObject(e.queryResults,(e=>this.convertQueryRowId(e,i)));r=_.mapObject(r,this.appendSessionIdToQueryResults);const n=r[t];return _.isNull(n.logResult)?n.logResult=void 0:_.isNull(n.metricsResult)&&(n.metricsResult=void 0),this.dashboardResultNormalizer.normalize(n)}))},this.getResultsStream=(e,t)=>{const i=this.toServiceMetricsSearch(e);i.timeZone=(0,ht.getUserTimeZone)(),i.logQuery=e.logQuery;return ky.Observable.fromPromise(this.createSessions(e.id,i)).map((t=>[t.results[e.id].searchQueryId])).flatMapLatest(_.partial(this.pollResults,e.id,t))},this.fetchSavedMetrics=e=>(0,D.legacyHttpGet)(`${_t.Au}/${e.toString(16)}`).then((e=>(0,nh.lf)(e))),this.pollResults=(e,t,i)=>{const r=e=>_.some(e.queryResults,(e=>!e.metadata.state.done));return ky.Observable.fromPromise(_.partial(this.getResults,e,i,t)).map((e=>{if(this.isMetricsApiError(e.errors))throw e;return e})).repeatWhen((e=>e.delay(1e3))).publish((e=>e.takeWhile(r).merge(e.skipWhile(r).take(1))))},this.toServiceMetricsSearch=e=>{const t={id:e.id,title:e.title,description:e.description,metricsQueries:(0,nh.kG)(_.getPath(e,"metricsQueryModel.queryRows")),properties:(0,nh.Kt)(e),timeRange:this.toServiceTimeRange(e.timeRange),timeZone:(0,ht.getUserTimeZone)(),logQuery:e.logQuery,desiredQuantizationInSecs:_.getPath(e,"quantization.desired"),contentLibraryItemId:e.contentLibraryItemId},i=_.getPath(e,"quantization.desired");return i&&(t.desiredQuantizationInSecs=i),t},this.toServiceTimeRange=e=>e.details,this.handleEmptyResponse=e=>_.isEmpty(e.results)?this.$q.reject({id:void 0,key:"unknown.error",keyedErrors:void 0,message:"There's a connection issue preventing us from returning search results. Please try again. If this message continues to appear, please contact Support.",status:200}):e}list(){return(0,D.legacyHttpGet)("/json/v1/metricssearch/scratchpad")}get(e){return(0,D.legacyHttpGet)(`/json/v1/metricssearch/scratchpad/${e}`).then(nh.$f)}create(e){const t=this.toServiceMetricsSearch(e);return(0,D.legacyHttpPost)("/json/v1/metricssearch/scratchpad",t).then(nh.$f)}update(e){const t=e.id;(0,re.assertDefined)(t);const i=this.toServiceMetricsSearch(e);return(0,D.legacyHttpPut)(`/json/v1/metricssearch/scratchpad/${t}`,i).then((()=>e))}delete(e){return(0,D.legacyHttpDelete)(`/json/v1/metricssearch/scratchpad/${e}`)}createSessions(e,t){return(0,D.legacyHttpPost)(`/json/v1/metricssearch/scratchpad/${e}/sessionids`,t).then(this.handleEmptyResponse)}stopSession(e,t){const i=_.map([t],(e=>`sid=${e}`)).join("&");return(0,D.legacyHttpDelete)(`/json/v1/metricssearch/scratchpad/${e}/sessionids?${i}`)}appendSessionIdToQueryResults(e,t){const i=_.getPath(e,"metricsResult");return _.isUndefined(i)||(i.sessionId=t),e}convertQueryRowId(e,t){const i=_.getPath(e,"metricsResult.response");return _(i).each((e=>{e.displayRowId=e.rowId,e.rowId=t[e.rowId]})),e}isMetricsApiError(e){const t=["metrics:api_failed","metrics:query_timeout"];return!_.isUndefined(_.find(e,(e=>_.contains(t,e.key))))}}Ly.$inject=["dashboardResultNormalizer","$q"];const Py=(new g.ResultsViewerSettingsModel).toJSON();class Fy{constructor(e,t){this.$q=e,this.hipsterIpsumService=t,this.toServiceMetricsSearch=e=>{const t={id:e.id,title:e.title,description:e.description,metricsQueries:(0,nh.kG)(_.getPath(e,"metricsQueryModel.queryRows")),properties:(0,nh.Kt)(e),timeRange:this.toServiceTimeRange(e.timeRange),desiredQuantizationInSecs:_.getPath(e,"quantization.desired")},i=_.getPath(e,"quantization.desired");return i&&(t.desiredQuantizationInSecs=i),t},this.toServiceTimeRange=e=>e.details,this.metricsSearchHash={}}list(){return this.$q.when(void 0)}get(e){let t;return this.metricsSearchHash[e]?t=this.metricsSearchHash[e]:(t=(0,nh.$f)({metricsSearch:this.createServiceMetricsSearch(e)}),this.metricsSearchHash[e]=t),this.$q.when({metricsSearch:this.toServiceMetricsSearch(t)}).then(nh.$f)}create(e){const t=Object.assign(Object.assign({},e),{id:Object.keys(this.metricsSearchHash).length}),i=this.toServiceMetricsSearch(t);return this.$q.when({metricsSearch:i}).then(nh.$f).then((e=>(this.metricsSearchHash[e.id]=e,e)))}update(e){return this.$q.when(e)}delete(e){return this.$q.when(!0)}createSessions(e,t){return this.$q.when(!0)}createServiceMetricsSearch(e){return{id:e,title:this.hipsterIpsumService.word(10),description:this.hipsterIpsumService.sentence(5),properties:JSON.stringify(Py),metricsQueries:[{rowId:"A",query:"metric=__demo__"}],timeRange:JSON.stringify([{t:"relative",d:-9e5}])}}}Fy.$inject=["$q","hipsterIpsumService"];const Uy=e=>{let t;return e&&(t={message:"Add Metrics Chart To Dashboard",action:"addToDashboard",component:"metricsPanel",queries:JSON.stringify(e.metricsQueries),timeRange:e.timeRange}),t};class Vy{constructor(e,t,i,r,n,a,s,o,l){this.metricsSearchActions=e,this.boundMetricsSearchActions=t,this.boundMetricsSearchUIActions=i,this.metricsUserTracking=r,this.getMetricsSearch=n,this.metricsSearchId=a,this.workspacesService=s,this.run=o,this.investigationViewService=l,this.addToDashboard=this.metricsUserTracking.trackFunction((()=>{this.metricsSearchActions.addToDashboardFromSource(this.getMetricsSearch())}),Uy),this.updateMetricsPanel=this.boundMetricsSearchActions.requestUpdate,this.requestRefresh=this.run,this.requestRunPanel=this.boundMetricsSearchActions.requestRunPanel,this.saveMetricsSearchWithShortCode=this.boundMetricsSearchActions.saveMetricsSearchWithShortCode,this.investigationViewService.setMetricsSearchId(a)}getLibraryAction(e,t={}){return g.libraryActionsService.runAction({actionType:e,params:{type:F.CONTENT_TYPES.METRICS,payload:Object.assign(Object.assign({},this.getMetricsSearch()),this.getMetricsSearch()?{properties:(0,nh.Gl)(this.getMetricsSearch())}:{}),actions:t}})}updateLogQuery(e){this.boundMetricsSearchActions.updateLogQuery(this.metricsSearchId,e),this.run()}updateToDashboard(){return this.boundMetricsSearchActions.updateToDashboard(this.getMetricsSearch(),(0,re.ensureDefined)((0,re.ensureDefined)(this.getMetricsSearch()).ui).drilldownOriginReference)}onTimeRangeChange(e){this.boundMetricsSearchActions.updateTimeRange(this.metricsSearchId,e),0===e.errors&&this.run()}onQuantizationChange(e){this.boundMetricsSearchActions.updateQuantization(this.metricsSearchId,e),this.run()}showInfo(e){this.metricsSearchActions.showInfo(e,this.getMetricsSearch())}switchToNewMetrics(){this.boundMetricsSearchActions.onSwitchToNewMetrics();const e=this.getMetricsSearch();this.investigationViewService.upgradeToNewPage(e)}removeQueryRowAndConsolidateRowIds(e,t){this.boundMetricsSearchUIActions.showRowSettings(void 0,!1),this.boundMetricsSearchActions.removeQueryRowAndConsolidateRowIds(this.metricsSearchId,e,t),this.run()}createMetrics(){return this.getLibraryAction(re.ContentActionType.CREATE,{updateMetricsPanel:e=>{if(!e.id)throw new Error("MetricsSearch is missing id");if(!e.contentLibraryItemId)throw new Error("MetricsSearch is missing contentLibraryItemId");this.boundMetricsSearchActions.requestUpdate(e);const t=this.workspacesService.getCurrent();t.updateTitle(e.id.toString(),e.title),t.updateContentItemId(e.id.toString(),e.contentLibraryItemId)}})}saveAs(){return this.getLibraryAction(re.ContentActionType.COPY)}}var By=i(16826);class $y{constructor(e,t,i,r,n,a,s,o,l,c,d,u,p,h,m){this.$element=e,this.metricsSearchScratchpadHelper=t,this.metricsSearchUIHelper=i,this.metricsSearchHistoryHelper=r,this.queryModelHelper=n,this.chartModelHelper=a,this.metricsSearchDataHelper=s,this.metricsSearchScratchpadActions=o,this.queryModelActions=l,this.chartModelActions=c,this.metricsSearchUIActions=d,this.metricsUserTracking=u,this.currentUserHelper=p,this.workspacesService=h,this.investigationViewService=m,this.performanceEvents={componentLoad:void 0},this.initialSettingsTabNumber=0,this.run=()=>{this.disposeRunningQuery(),this.queryResultSubscription=this.actions.metricsSearch.requestRunPanel(this.metricsSearchId)},this.setMetricsSearch=e=>{this.metricsSearch=Object.assign({},e)},this.setLastRunPanel=e=>{this.lastRunPanel=e},this.$onInit=()=>{var e;this.logLoadStart(),this.showOutliers=this.currentUserHelper.hasFeatureFlag("UIMetricsOutliers"),this.lastRunPanel=this.metricsSearchHistoryHelper.peek(this.metricsSearchId),this.subscriptions=[];const t=this.metricsSearchScratchpadActions.getActionCreators(),i=this.queryModelActions.getActionCreators(),r=this.chartModelActions.getActionCreators(),n=this.metricsSearchUIActions.getActionCreators();this.actions={blockSettings:this.getBlockSettingsActions(t,n),chartModel:this.getChartActions(this.metricsSearchScratchpadActions,r,t,n),metricsSearch:new Vy(this.metricsSearchScratchpadActions,t,n,this.metricsUserTracking,(()=>this.metricsSearch),this.metricsSearchId,this.workspacesService,this.run,this.investigationViewService),queryModel:this.getMetricsQueryBuilderActions(i),seriesSettings:this.getSeriesSettingsActions(t,n),metricsLegendSettings:this.getMetricsLegendSettingsActions(n)},this.dataSource=this.metricsSearchDataHelper.getMetricsSearchObservableWithCurrent(this.metricsSearchId),this.connect(),this.metricsSearchDataHelper.hasData(this.metricsSearchId)||this.run();const a=g.applicationState.params.drilldownInfo;(null===(e=null==a?void 0:a.panel)||void 0===e?void 0:e.fromSettings)&&(this.initialSettingsTabNumber=1),this.$element.addClass("metrics-panel-container"),this.logLoadEnd()},this.$onDestroy=()=>{this.disposeRunningQuery(),_.each(this.subscriptions,(e=>e.dispose()))},this.connect=()=>{const e=this.metricsSearchScratchpadHelper.getObservable(this.metricsSearchId),t=this.chartModelHelper.getObservable(this.metricsSearchId),i=this.queryModelHelper.getObservable(this.metricsSearchId).share(),r=By.Observable.combineLatest(e,i,t,((e,t,i)=>Object.assign(Object.assign({},e),{metricsQueryModel:t,chart:i}))).share(),n=this.metricsSearchHistoryHelper.getObservable(this.metricsSearchId).startWith(void 0).share(),a=this.metricsSearchUIHelper.getObservableWithDashboardSave(this.metricsSearchId,i,n),s=By.Observable.combineLatest(r,a,((e,t)=>Object.assign(Object.assign({},e),{ui:t})));this.subscriptions.push(s.subscribe(this.setMetricsSearch)),this.subscriptions.push(n.subscribe(this.setLastRunPanel))},this.disposeRunningQuery=()=>{this.queryResultSubscription&&this.queryResultSubscription.dispose()}}get isLogOverlayShown(){return!(this.metricsSearch&&this.metricsSearch.chart&&this.metricsSearch.chart.isSingleValueChart())}getMetricsQueryBuilderActions(e){return{run:t=>{e.set(t),this.run()},removeRow:e.removeRow,addRow:e.addRow,update:e.set,updateRow:e.setRow}}getChartActions(e,t,i,r){return{mergeSettings:t.mergeSettings,reflow:t.reflow,replaceDataSettings:t.replaceDataSettings,setBlockColorFamily:t.setBlockColorFamily,setBlockCustomLabel:t.setBlockCustomLabel,setBlockLineType:t.setBlockLineType,setBlockVisibility:t.setBlockVisibility,setBlockYAxisType:t.setBlockYAxisType,setMultipleSeriesVisibility:t.setMultipleSeriesVisibility,setSeriesVisibility:t.setSeriesVisibility,setSelectedSeries:t.setSelectedSeries,resetAllSeriesVisibility:t.resetAllSeriesVisibility,unsetSelectedSeries:t.unsetSelectedSeries,removeSeriesSelection:t.removeSeriesSelection,highlightSeries:t.highlightSeries,unhighlightSeries:t.unhighlightSeries,mergeSingleValueSettingsAndRedraw:(e,t)=>i.mergeSingleValueSettingsAndRedraw(this.metricsSearchId,e,t),mergeSettingsAndRedraw:e=>i.mergeSettingsAndRedraw(this.metricsSearchId,e),mergeSettingsAndUpdatePanel:e=>i.mergeSettings(this.metricsSearchId,e),updateYAxisSettings:(e,t)=>i.updateYAxes(this.metricsSearchId,e,t),selectLogOverlayFocusPeriod:r.selectLogOverlayFocusPeriod,drillDownSearchQuery:e.drillDownSearchQuery,updateLegendSettings:i.updateLegendSettings}}getBlockSettingsActions(e,t){return{showRowSettings:(e,i)=>t.showRowSettings(this.metricsSearchId,e,i),deleteSettings:t=>e.deleteSettings(this.metricsSearchId,t),toggleQueryRowVisible:(t,i)=>e.toggleQueryRowVisible(this.metricsSearchId,t,i),updateQueryRowColorFamily:(t,i)=>e.updateQueryRowColorFamily(this.metricsSearchId,t,i),updateQueryRowCustomLabel:(t,i)=>{e.updateQueryRowCustomLabel(this.metricsSearchId,t,i),this.run()},updateQueryRowLineType:(t,i)=>e.updateQueryRowLineType(this.metricsSearchId,t,i),updateQueryRowChartType:(t,i)=>e.updateQueryRowChartType(this.metricsSearchId,t,i),updateQueryRowYAxis:(t,i)=>e.updateQueryRowYAxis(this.metricsSearchId,t,i),updateQueryRowInterpolationMethod:(t,i,r=!0)=>{const n=e.updateQueryRowInterpolationMethod(this.metricsSearchId,t,i);return r&&this.run(),n},updateQueryRowInterpolationFixedValue:(t,i)=>{const r=e.updateQueryRowInterpolationFixedValue(this.metricsSearchId,t,i);return this.run(),r}}}getSeriesSettingsActions(e,t){return{showSeriesSettings:(e,i)=>t.showSeriesSettings(this.metricsSearchId,e,i),updateSeriesColor:(t,i)=>e.updateSeriesColor(this.metricsSearchId,t,i),updateSeriesVisibility:(t,i)=>e.updateSeriesVisibility(this.metricsSearchId,t,i)}}getMetricsLegendSettingsActions(e){return{setMetricsLegendFilterText:t=>e.setMetricsLegendFilterText(this.metricsSearchId,t)}}logLoadStart(){const e={module:"metrics",component:"metricsSearchContainer",action:"componentLoad",id:this.metricsSearchId.toString()};this.performanceEvents.componentLoad=k.performanceLogService.createMark(e,"loadStart")}logLoadEnd(){const e={metricsSearchId:this.metricsSearchId};this.performanceEvents.componentLoad.mark("loadEnd"),this.performanceEvents.componentLoad.measure("loadStart","loadEnd","load",e)}}$y.$inject=["$element","metricsSearchScratchpadHelper","metricsSearchUIHelper","metricsSearchHistoryHelper","queryModelHelper","chartModelHelper","metricsSearchDataHelper","metricsSearchScratchpadActions","queryModelActions","chartModelActions","metricsSearchUIActions","metricsUserTracking","currentUserHelper","workspacesService","investigationViewService"];const Hy={bindings:{blacklistedSources:"<",metricsSearchId:"<"},controller:$y,template:'\n    <outlier-metrics-panel\n      class="metrics-panel-container__panel"\n      panel="$ctrl.metricsSearch"\n      actions="$ctrl.actions"\n      panel-data-source="$ctrl.dataSource"\n      show-outliers="$ctrl.showOutliers">\n    </outlier-metrics-panel>\n    <metrics-search-settings\n      class="metrics-panel-container__settings"\n      panel="$ctrl.metricsSearch"\n      actions="$ctrl.actions"\n      show-log-overlay="$ctrl.isLogOverlayShown"\n      initial-settings-tab-number="$ctrl.initialSettingsTabNumber">\n    </metrics-search-settings>\n  '};class Wy{constructor(e,t,i,r,n,a,s){this.metricsActions=e,this.metricsSearchScratchpadActions=t,this.metricsWorkspaceHelperService=i,this.$mdToast=r,this.i18n=n,this.workspacesService=a,this.metricsPageService=s}$onInit(){return this.actions=this.metricsActions.getActionCreators(),this.metricsSearchActions=this.metricsSearchScratchpadActions.getActionCreators(),k.performanceLogService.mark(ey,ty.renderPath.start),this.shortCode?this.metricsSearchActions.getMetricsSearchByShortCode(this.shortCode).then((e=>(this.view=this.metricsWorkspaceHelperService.createActualTabInWorkspace(this.viewId),e))).then(this.actions.createMetricsPage).then((({id:e,title:t})=>{if(!e)throw new Error("New MetricsSearch id cannot be undefined.");k.performanceLogService.mark(ey,ty.renderPath.dataRetrieved),this.view.title=t,this.view.id=e.toString(),this.displayMetricsPage(e)})).catch((()=>{this.metricsPageService.handleNotFoundError()})):this.contentItemId?g.contentItemService.fetchByReferenceId(this.contentItemId,"metrics").then((({name:e})=>{if(!this.contentItemId)throw new Error("contentItemId cannot be undefined");return this.view=this.metricsWorkspaceHelperService.createActualTabInWorkspace(this.viewId,e,this.contentItemId),this.actions.buildScratchpadFromSavedMetrics(this.contentItemId)})).then(this.actions.createMetricsPage).then((({id:e})=>{if(!e)throw new Error("New MetricsSearch id cannot be undefined.");this.view.id=e.toString(),this.displayMetricsPage(e)})).catch((()=>g.applicationState.go("app.home"))):void g.applicationState.go("app.home")}displayMetricsPage(e){this.view.name="app.metrics",g.applicationState.go(this.view.name,Object.assign(Object.assign({},this.view.params),{viewId:e}),{location:"replace"})}}Wy.$inject=["metricsActions","metricsSearchScratchpadActions","metricsWorkspaceHelperService","$mdToast","i18n","workspacesService","metricsPageService"];const qy={bindings:{shortCode:"<",viewId:"<",contentItemId:"<"},controller:Wy,template:'\n    <div class="spinner"></div>\n  '};i(38589),i(91418),i(49015),i(15686);var jy=i(25409),Qy=i.n(jy),zy=i(88028),Gy=i.n(zy);class Ky extends T.Component{constructor(){var e;super(...arguments),this.state={useAbsoluteTimeRange:null===(e=this.props.useAbsoluteTimeRange)||void 0===e||e,isSavingMetricsShortcode:!1,copied:!1},this.copy=()=>{const e=document.querySelector(".url-text input");e.focus(),e.select();document.execCommand("copy")&&this.setState({copied:!0})},this.onToggleAbsoluteTimeRange=e=>{const t=e;this.setState({useAbsoluteTimeRange:t,isSavingMetricsShortcode:!0,copied:!1}),this.props.saveMetricsShortcode(t).then((()=>{this.setState({isSavingMetricsShortcode:!1})}))},this.onClose=()=>{this.setState({useAbsoluteTimeRange:!0,copied:!1})}}render(){const{shortcodeUrl:e,isOpen:t,handleClose:i}=this.props;return T.createElement(qt.Dialog,{open:t,onClose:()=>{i(),this.onClose()},"aria-labelledby":"metrics-share-shortcode-dialog",className:Gy().metricsShareShortcodeDialog,maxWidth:"md"},T.createElement(qt.Dialog.Title,{className:Gy().header,"data-sumo-test":"shortcode-dialog-header"},ah.i18n.get("metrics.shareShortcodeHeader")),T.createElement(qt.Dialog.Content,{className:Gy().body},this.props.isTimerangeToggleShown&&T.createElement(qt.Toggle,{toggled:this.state.useAbsoluteTimeRange,onToggle:this.onToggleAbsoluteTimeRange,"data-sumo-test":"absolute-timerange-toggle"},T.createElement("div",{"data-sumo-test":"absolute-timerange-toggle-label"},ah.i18n.get("metrics.useAbsoluteTimeRange"))),T.createElement("div",{className:Gy().urlTextGroup},T.createElement(qt.TextField,{value:e,fullWidth:!0,inline:!0,"data-sumo-test":"shortcode-url-text",className:Wt()(Gy().urlText,"url-text")}),T.createElement(qt.Button,{color:"secondary",onClick:this.copy,disabled:this.state.isSavingMetricsShortcode,"data-sumo-test":"shortcode-copy-button"},this.state.copied?ah.i18n.get("metrics.copied"):ah.i18n.get("metrics.copy")))),T.createElement(qt.Dialog.Actions,{className:Gy().actions},T.createElement(qt.Button,{color:"primary",onClick:()=>{i(),this.onClose()},"data-sumo-test":"shortcode-done-button"},ah.i18n.get("common.done"))))}}const Yy=i(58541),Zy=i(43803),Xy=i(43803),Jy=i(66504),ev=i(52405),tv=s.module("sumoApp.metrics",["sumoApp.core","sumoApp.logging","sumoApp.components","sumoApp.queries","sumoApp.dashboard","sumoApp.chartSettings","sumoApp.help.common","sumoApp.currentUser.state","sumoApp.metrics.shortCode","dndLists","ui.router"]);tv.value("metricsSearchStoreName",_t.IA),tv.value("metricsSearchScratchpadStoreName",_t.yG),tv.value("metricsSearchActionConstants",_t.hu),tv.value("metricsSearchScratchpadActionConstants",_t.Bm),tv.controller("MetricsCtrl",Hm),tv.controller("MetricsQueryRowController",sg),tv.controller("EditRuleDialogCtrl",Jy),tv.controller("RuleManagerCtrl",ev),tv.directive("metricsQueryBuilder",ng),tv.directive("rawMetricsQueryRow",lg),tv.directive("remWrapper",_g),tv.directive("rem",Sg),tv.component("metricsDashboardLoading",qm),tv.component("metricsPanel",$g),tv.component("outlierMetricsPanel",Og),tv.component("metricsPanelMenu",jg),tv.component("metricsSearchSettings",hy),tv.component("metricsLegend",Gm),tv.component("metricsLegendDimensions",Ym),tv.component("metricsLogMessages",Xm),tv.component("metricsLogQueryRow",ig),tv.component("metricsRowSettings",mg),tv.component("metricsSeriesSettings",vg),tv.component("blacklistedSourcesNotification",Ig),tv.component("queryRow",zg),tv.component("metricsLoadContainer",ny),tv.component("metricsPageContainer",dg),tv.component("metricsShareContainer",qy),tv.component("metricsPage",gy),tv.component("metricsSearchContainer",Hy),tv.component("metricsIconToolbar",(0,re.legacyReactToAngular)((e=>T.createElement(T.Fragment,null,e.hasRunQuery&&T.createElement("div",{className:"inline-flex__element"},T.createElement(qt.IconButton,{className:Qy().toolbarIcon,icon:"refresh",onClick:e.requestRefresh})),e.isSaveButtonShown&&T.createElement("div",{className:"inline-flex__element","ng-show":"$ctrl.showSaveButton"},T.createElement(g.LoadPlaceHolder,{isLoaded:!e.isSaving},T.createElement(qt.IconButton,{className:Qy().toolbarIcon,icon:qt.IconName.Save,onClick:e.createOrUpdateSavedMetrics,disabled:e.isSavingDisabled,buttonProps:{"data-sumo-test":"metrics-save-button"}}))),T.createElement("div",{className:"inline-flex__element"},T.createElement(qt.IconButton,{className:Qy().toolbarIcon,icon:"share",onClick:e.openShortcodeDialog,buttonProps:{"data-sumo-test":"share-unsaved-metrics-option"}}),T.createElement(Ky,Object.assign({},e.shortcodeDialogProps))))),["createOrUpdateSavedMetrics","hasRunQuery","isSaveButtonShown","isSaving","openShortcodeDialog","requestRefresh","shortcodeDialogProps","isSavingDisabled"])),tv.component("textButton",(0,re.legacyReactToAngular)(qt.TextButton,["colorType","fontType","disabled","isLight","iconLeft","iconRight","type","onClick","onContextMenu","innerRef","inputRef","ref","styles","classes","theme","className","styleProps","style","themeOverride"])),tv.factory("metricsNetworkService",(function(){return new Cg})),tv.service("metricsViewInfoDialog",Eg),tv.service("metricsOptInDialog",xg),tv.service("metricsQueryRowNetworkService",Vm),tv.service("metricsUserTracking",class{constructor(){this.trackUser=(e,t,i=!1,r=!1)=>{E.currentUserHelper.hasFeatureFlag("UIMetricsUserTrackingEnabled")&&Bm.X.trackUser(e,Object.assign({area:"metrics"},t),i,r)},this.trackFunction=(e,t)=>{const i=this,r=_.partial(this.track,t);return(...t)=>{const n=e.apply(null,t);return r.apply(i,[n].concat(t)),n}},this.track=function(e){_.isFunction(e)&&(e=e.apply(null,Array.prototype.slice.call(arguments,1))),_.isUndefined(e)||this.trackUser(e.message,e,e.chatty)}}}),tv.factory("metricsActions",Oy),tv.service("metricsPageHelper",My),tv.service("metricsLegendHelper",Um),tv.service("metricsLogQueryRowService",Gg),tv.service("metricsLogMessagesService",Rg),tv.service("previewNetworkService",Yy),tv.service("rulesNetworkService",Zy),tv.service("rulesNetworkMockService",Xy),tv.service("metricsLegendService",Kg),tv.service("metricsPageService",Yg),tv.service("metricsSearchNetworkService",sy),tv.service("metricsSearchScratchpadNetworkService",Ly),tv.service("metricsSearchScratchpadNetworkServiceMock",Fy),tv.service("metricsSearchHelper",wy),tv.service("metricsSearchScratchpadHelper",Ny),tv.service("metricsSearchUIHelper",ly),tv.service("metricsSearchHistoryHelper",uy),tv.service("metricsSearchDataHelper",class{constructor(){this.getMetricsSearchObservable=e=>Te.store.legacy$.map((t=>this.findMetricsSearchData(t,e))).distinctUntilChanged(void 0,Immutable.is),this.getMetricsSearchObservableWithCurrent=e=>this.getMetricsSearchObservable(e).startWith(this.findMetricsSearchData(Te.store.getImmutableState(),e)),this.getPanelData=e=>this.findMetricsSearchData(Te.store.getImmutableState(),e),this.hasData=e=>!_.isUndefined(this.getPanelData(e)),this.findMetricsSearchData=(e,t)=>e.getIn(["data",_t.yG,t.toString()])}}),tv.factory("metricsSearchActions",Ay),tv.factory("metricsSearchScratchpadActions",Dy),tv.service("metricsSearchUIActions",cy.K),window.fromServiceResponse=nh.$f,window.getMetricsSearchProperties=nh.Kt,window.metricsQueryRowsToMetricsQueries=nh.kG;const iv=s.module("sumoApp.setupWizard",["sumoApp.i18n","sumoApp.content","sumoApp.metrics","sumoApp.queries","sumoApp.workspaces","sumoApp.workspaces.data","sumoApp.currentUser.state","ngMaterial"]);let rv;iv.service("setupWizardService",Pm),iv.run(["$injector",e=>{rv=e.get("setupWizardService")}]);class nv extends T.PureComponent{constructor(){super(...arguments),this.tileClickHandlers={[Ph.Py.NEW_LOG_SEARCH]:e=>this.openWorkspaceView("search"),[Ph.Py.NEW_METRICS]:()=>this.openMetricsView(),[Ph.Py.NEW_EXPLORE]:()=>this.openExplore(),[Ph.Py.NEW_ROOT_CAUSE]:()=>this.openRootCause(),[Ph.Py.TRACE_ANALYTICS]:()=>this.openTraceAnalyticsView(),[Ph.Py.NEW_LIVE_TAIL]:e=>this.openWorkspaceView("livetail"),[Ph.Py.SETUP_WIZARD]:e=>rv.openSetupWizard(),[Ph.Py.NEW_DASHBOARD]:()=>this.openNewDashboardView(),[Ph.Py.ASK_FOR_SUPPORT]:e=>gi.o.showSupport(e.link),[Ph.Py.DOCS]:e=>gi.o.showHelp({id:Ph.Ln}),[Ph.Py.COMMUNITY]:e=>gi.o.showCommunity(e.link)},this.openWorkspaceView=e=>{Dm.openNewTab(e,"HOME_CONNECTOR")},this.tileClickHandler=(e,t)=>{e.stopPropagation(),e.preventDefault();const i=this.tileClickHandlers[t.id];i?i(t):window.open(t.link,"_blank","noopener"),Em.A.logUserAction({action:"HOME.OPEN_SHORCUT",connector:Ph.D0.SHORTCUT_TILES,target:t.id,targetDescription:t.link,tileId:t.id,tileLink:t.link})}}openMetricsView(){this.openWorkspaceView(Gr.currentUserHelper.hasUserAcceptedFeatureFlag("UIMetricsPage","prefersClassicMetrics")?F.WORKSPACE.VIEWS.INVESTIGATION.type:F.WORKSPACE.VIEWS.METRICS.type)}openExplore(){this.openWorkspaceView(F.WORKSPACE.VIEWS.EXPLORE.type)}openRootCause(){this.openWorkspaceView(F.WORKSPACE.VIEWS.ANOMALIES.type)}openTraceAnalyticsView(){this.openWorkspaceView(F.WORKSPACE.VIEWS.TRACE_ANALYTICS.type)}openNewDashboardView(){this.openWorkspaceView(F.WORKSPACE.VIEWS.NEWBOARD.type)}render(){const{tiles:e,isBig:t=!0,isScrollable:i=!1}=this.props;return T.createElement(gm,{tiles:e,isBig:t,isScrollable:i,onTileClick:(e,t)=>this.tileClickHandler(e,t)})}}var av=i(65688);i(79241);class sv extends T.Component{constructor(){super(...arguments),this.getDashboardTitle=e=>"DASHBOARD"===e.type&&e.owner?`${e.owner.name} | ${e.name}`:e.name}getFolderableListItems(e){const t=this.props.open;return e.map((e=>{const i=T.createElement(qt.List.Item,{className:"simple-list__item",key:e.id,title:this.getDashboardTitle(e),onClick:i=>t(i,e),"data-sumo-test":"folderable-list-item"},T.createElement(qt.List.PrimaryAction,null,T.createElement(qt.Icon,{name:e.typeIcon,size:"large"})),T.createElement(qt.List.Text,{title:this.getDashboardTitle(e),"data-sumo-test":this.props.type},e.name));return(0,g.isKansoEnabled)()?T.createElement(qt.Linkify,{url:(0,g.getKansoUrlForContentItem)(e).toString()},i):i}))}getFolderableList(e){return T.createElement(qt.List,null," ",this.getFolderableListItems(e)," ")}render(){const{cardTitle:e="",list:t=[],emptyState:i,about:r="",isLoaded:n,headerDataSumo:a}=this.props;return T.createElement(qt.Card,{className:"full-width",draggableHandle:"layout-draggable-handle","data-sumo-test":"folderable-list"},T.createElement(qt.Card.Header,{wrap:!0,type:"panel","data-sumo-test":a,border:!0},T.createElement(qt.Text,{variant:"panel",noWrap:!1},e),r?T.createElement(qt.Tooltip,{placement:"bottom",title:Ge.j.get(r),multiline:!0},T.createElement("div",{className:"tooltip-content"},T.createElement(qt.Icon,{name:"question-circle",size:"large",className:"folderable-item__icon-title"}))):null),T.createElement(qt.Card.Content,null,T.createElement("div",{className:"flex full-height"},T.createElement(g.LoadPlaceHolder,{isLoaded:n,className:n?"folderable-load-placeholder":""},t.length>0?this.getFolderableList(t):T.createElement(g.UnavailablePane,{className:"-padding-12",image:i.image,reason:Ge.j.get(i.description),errorTitle:Ge.j.get(i.message)})))))}}const ov=i(55511),lv={PINNED_SEARCH_LIST:{message:"content.noPinnedSearches",description:"content.noPinnedSearchesDescription",image:ov},RECENT_DASHBOARDS_LIST_CARD:{message:"content.noRecentDashboards",description:"content.noRecentDashboardsDescription",image:ov},RECENT_SEARCHES_LIST_CARD:{message:"content.noRecentSearches",description:"content.noRecentSearchesDescription",image:ov},RECOMMENDED_DASHBOARDS_LIST_CARD:{message:"content.noRecommendedDashboards",description:"content.noRecommendedDashboardsDescription",image:ov}},cv={RECOMMENDED_DASHBOARDS_LIST_CARD:"content.recommendedDashboards",RECENT_SEARCHES_LIST_CARD:"content.recentlyRunSearches",RECENT_DASHBOARDS_LIST_CARD:"content.recentlyOpenedDashboards",PINNED_SEARCH_LIST:"content.pinnedSearches"},dv={RECOMMENDED_DASHBOARDS_LIST_CARD:"content.recommendedDashboardsAbout"};class uv extends T.Component{constructor(){super(...arguments),this.openContentItem=(e,t)=>g.libraryActionsService.runAction({actionType:re.ContentActionType.OPEN,event:e,meta:{triggeredFrom:"HOME",component:Ph.YJ[this.props.type],context:"HOME_USER_ACTION",id:"HOME_USER_ACTION"}},t)}componentDidMount(){const{limit:e,type:t}=this.props;this.props.fetchContentType({limit:e,type:Ph.YJ[t]})}render(){const{isFetching:e,type:t,contentList:i,headerDataSumo:r}=this.props;return T.createElement(sv,{cardTitle:Ge.j.get(cv[t]),list:i,about:dv[t],open:this.openContentItem,emptyState:lv[t],isLoaded:!e,type:Ph.YJ[t],headerDataSumo:r})}}const pv={fetchContentType:Fh.fetchContentType},hv=(0,Te.legacyConnect)(((e,t)=>({contentList:(0,av.s_)(e,t)})),pv)(uv),mv=i(55511);s.module("sumoApp.home.containers",["sumoApp.tour"]).component("homeContainer",(0,re.legacyReactToAngular)(vm)),v.u.register(Ph.YJ.LEARN_VIDEO,wm),v.u.register(Ph.YJ.HOME_TILE_GRID,nv),v.u.register(Ph.YJ.RECENT_DASHBOARDS_LIST_CARD,hv),v.u.register(Ph.YJ.RECOMMENDED_DASHBOARDS_LIST_CARD,hv),v.u.register(Ph.YJ.RECENT_SEARCHES_LIST_CARD,hv),v.u.register(Ph.YJ.RECENT_METRICS_LIST_CARD,(()=>{const e=((0,f.getMetricsQueryHistory)()||[]).map((e=>({typeIcon:"metrics-view-icon",name:e.query.queryString,query:e.query,variables:e.variables})));return x().createElement(sv,{cardTitle:Ge.j.get("content.recentlyRunMetrics"),list:e,open:(e,t)=>{const{query:i,variables:r}=t;let n=i;r&&(n=(0,f.getQueryWithVariablesValues)(n,r)),(0,f.updateMetricsQueryHistory)([n],null),g.applicationState.go("app.investigation",{isNewTab:!0,viewId:re.idGeneratorService.generateId(!1,!0),drillDownInfo:{title:"Metrics Explorer",timeRange:'[{"t":"relative","d":-900000}]',queries:[n]}})},emptyState:{message:"content.noRecentMetrics",description:"content.noRecentMetricsDescription",image:mv},type:"recentMetricsListCard",headerDataSumo:"recentMetrics",isLoaded:!0})})),v.u.register(Ph.YJ.PINNED_SEARCH_LIST,hv),v.u.register(Ph.YJ.QUICK_QUERIES_LIST_CARD,xh.QuickQueryListContainer);const gv=s.module("sumoApp.home.workspace",["sumoApp.home.containers","sumoApp.currentUser","sumoApp.workspaces"]);gv.service("homeWorkspaceViewService",Mh),gv.config(["$stateProvider",e=>{e.state(Lh)}]);const yv=[{abstract:!0,name:"app.trace"},{name:F.WORKSPACE.VIEWS.TRACE_ANALYTICS.stateName,url:"/traces/:viewId",params:{viewId:void 0,drillDownInfo:void 0,className:F.WORKSPACE.VIEWS.TRACE_ANALYTICS.type,isNewTab:!1,tabIdToDuplicate:void 0},controller:ce,controllerAs:"$ctrl",template:'<trace-analytics-component view="$ctrl.view" broadcast-msg$="$ctrl.broadcastMsg$" drill-down-info="$ctrl.view.params.drillDownInfo"></trace-analytics-component>'},{name:F.WORKSPACE.VIEWS.TRACE_DETAILS.stateName,url:"/trace/:traceId",params:{traceId:void 0,className:F.WORKSPACE.VIEWS.TRACE_DETAILS.type},controller:ce,controllerAs:"$ctrl",resolve:{stateParamsOverrides:["$transition$",e=>({viewId:e.params().traceId})]},template:'<trace-details-component params="$ctrl.view.params" broadcast-msg$="$ctrl.broadcastMsg$"></trace-details-component>'},{name:F.WORKSPACE.VIEWS.SPANS_ANALYTICS.stateName,url:"/spans/:viewId",params:{viewId:void 0,className:F.WORKSPACE.VIEWS.SPANS_ANALYTICS.type,drillDownEIInfo:void 0,drillDownInfo:void 0,tabIdToDuplicate:void 0},controller:ce,controllerAs:"$ctrl",template:'<spans-analytics-component view="$ctrl.view"></spans-analytics-component>'},{name:F.WORKSPACE.VIEWS.SERVICE_MAP.stateName,url:"/serviceMap/:viewId",params:{viewId:void 0,className:F.WORKSPACE.VIEWS.SERVICE_MAP.type},controller:ce,controllerAs:"$ctrl",template:'<service-map-component view="$ctrl.view" broadcast-msg$="$ctrl.broadcastMsg$"></service-map-component>'}];class vv extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.counter=0,this.viewInfo=F.WORKSPACE.VIEWS.SPANS_ANALYTICS,this.isOptionDisabled=()=>!1}newTab(e,t="",i){super.newTab(e,t,i);const r=this.createView();r&&e.addView(r)}cloneView(e){const t=re.idGeneratorService.generateId(!1,!0);g.applicationState.go(this.viewInfo.stateName,{viewId:t,tabIdToDuplicate:e.id})}getViewParams(){return[...super.getViewParams(),"viewId"]}generateAccessKey(){return re.idGeneratorService.generateId(!1,!0)}createView(e={}){var t,i,r,n;const a=e.id||""+this.generateAccessKey(),{params:s={}}=e,o=s.title||(null===(i=null===(t=e.params)||void 0===t?void 0:t.drillDownEIInfo)||void 0===i?void 0:i.data.title)||(null===(n=null===(r=e.params)||void 0===r?void 0:r.drillDownInfo)||void 0===n?void 0:n.title)||this.getTitle();return Object.assign(Object.assign({},super.createView(e)),{id:a,title:o,params:Object.assign(Object.assign({},s),{viewId:a,title:o})})}drillDownFromEntityInspector(e){g.applicationState.go(this.viewInfo.stateName,{viewId:re.idGeneratorService.generateId(!1,!0),drillDownEIInfo:e})}viewRemoved(e,t){Te.store.dispatch({type:"PassToSpansAnalyticsTabs",_action:{type:"DestroyPage",tabId:e.id}})}getTitle(){return(0,re.getAngularInjectable)("i18n").get("workspaces.tabNames.spansAnalytics")+(++this.counter>1?" "+this.counter:"")}}var fv=i(42818);const _v=s.module("sumoApp.tracing.workspace",["sumoApp.currentUser","sumoApp.workspaces"]);_v.service("spansAnalyticsWorkspaceViewService",vv),_v.component("traceAnalyticsComponent",(0,re.legacyReactToAngular)(fv.OS,["view","broadcastMsg$","drillDownInfo"],["logService"])),_v.component("traceDetailsComponent",(0,re.legacyReactToAngular)(fv.cm,["params","broadcastMsg$"])),_v.component("spansAnalyticsComponent",(0,re.legacyReactToAngular)(fv.rP,["view"],["spansAnalyticsWorkspaceViewService","createDashboardPanelActionService"])),_v.component("serviceMapComponent",(0,re.legacyReactToAngular)(fv.Tm,["view","broadcastMsg$"])),_v.config(["$stateProvider",e=>{_.each(yv,(t=>e.state(t)))}]);s.module("sumoApp.newboard.workspace",["sumoApp.newboard.containers","sumoApp.workspaces.common","sumoApp.common.components","sumoApp.libraryCommon"]).service("newDashboardService",Se.C);var Sv=i(63455);const bv={title:void 0,viewId:void 0,className:"new-dashboard",viewName:"newDashboard",variableValues:{},isSavedDashboard:!1,dashboardTimerange:"",from:{dynamic:!0,inherit:!1},to:{dynamic:!0,inherit:!1},variables:{dynamic:!0,inherit:!1},startTime:{dynamic:!0,inherit:!1},endTime:{dynamic:!0,inherit:!1},useDefaultTimeRange:{dynamic:!0,inherit:!1}},Ev={name:"app.create-newboard",url:"/create-dashboard",params:bv,controller:ce,controllerAs:"$ctrl",template:'\n    <load-placeholder loading="$ctrl.showTabContent" class="new-dashboard-root">\n      <create-new-dashboard-container class="new-dashboard-container" params="$ctrl.view.params"></create-new-dashboard-container>\n    </load-placeholder>'},Tv={name:F.WORKSPACE.VIEWS.NEWBOARD.stateName,url:"/dashboardv2/:viewId?variables&from&to&useDefaultTimeRange",params:bv,controller:ce,controllerAs:"$ctrl",template:'\n    <load-placeholder loading="$ctrl.showTabContent" class="new-dashboard-root">\n      <new-dashboard-container class="new-dashboard-container" params="$ctrl.view.params"></new-dashboard-container>\n      <div id="singlePaneEditor"></div>\n    </load-placeholder>'},xv=s.module("sumoApp.newboard.containers",[]);xv.component("newDashboardContainer",(0,re.legacyReactToAngular)((e=>T.createElement(En.Provider,{store:Te.store},T.createElement(C.F,{dynamicImportFn:Sv.$,moduleName:"dashboard",componentProps:e}))),["params"],["applicationViewShimService"])),xv.component("createNewDashboardContainer",(0,re.strictModeReactToAngular)((e=>T.createElement(En.Provider,{store:Te.store},T.createElement(C.F,{dynamicImportFn:Sv.e,moduleName:"create-dashboard",componentProps:e}))),["params"],["applicationViewShimService"])),xv.config(["$stateProvider",e=>{e.state(Ev),e.state(Tv)}]);const Cv={bindings:{template:"<"},template:"<pre>{{$ctrl.template}}</pre>"};s.module("sumoApp.collector.view",["sumoApp.currentUser.state","sumoApp.core","ui.router"]).component("cloudFormationTemplate",Cv);const Av=[{name:"app.explore",url:"/explore/:viewId",params:{viewId:void 0,viewName:"explore",drillDownInfo:void 0},resolve:{id:["$transition$",e=>12345..toString()]},controller:ce,controllerAs:"$ctrl",template:'<load-placeholder loading="$ctrl.showTabContent" class="explore-root">\n      <explore view-params="$ctrl.view.params" id-or-encoded-data="$ctrl.view.params.viewId" view-name="$ctrl.view.params.viewName" drill-down-info="$ctrl.view.params.drillDownInfo"></explore>\n    </load-placeholder>'}];var wv=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Iv="Explore";class Rv extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.counter=0,this.viewInfo=F.WORKSPACE.VIEWS.EXPLORE}newTab(e,t,i,r){super.newTab(e,t,i);const n=this.createView({options:{sessions:r}});n&&e.addView(n)}metricsDrillDown(e,t=!0,i=!0){this.workspacesService.getCurrent().handleSearchDrillDown({data:Object.assign(Object.assign({},e),{timeZone:(0,ht.getUserTimeZone)()}),isMetrics:t,fromMetricsSearch:i,fromNewDashboard:!0})}drillDown(e){g.applicationState.go(this.viewInfo.stateName,{viewId:re.idGeneratorService.generateId(!1,!0),drillDownInfo:e})}getViewParams(){return[...super.getViewParams(),"viewId"]}createView(e={}){const t=super.createView(e),i=e.id||""+re.idGeneratorService.generateId(!1,!0),r=e.title||this.getTitle();return t.id=i,t.title=r,t.params=Object.assign({viewId:i},e.params),t}viewRemoved(e){return wv(this,void 0,void 0,(function*(){const{removeDashboardUIStatesByView:t}=yield(0,Sv.$)();return(0,re.removePersistedStateForAllComponents)(e.id),Te.store.dispatch(t(`${e.type}_${e.id}`))}))}generateId(){return re.idGeneratorService.generateId(!1,!0).toString()}getTitle(){return Iv}}const Dv=s.module("sumoApp.explore.workspace",["sumoApp.explore","sumoApp.workspaces","ui.router"]);let Ov;Dv.service("exploreWorkspaceViewService",Rv),Dv.config(["$stateProvider",e=>{Av.forEach((t=>e.state(t)))}]),Dv.run(["$injector",e=>{Ov=e.get("exploreWorkspaceViewService")}]);var Nv=i(25165);function Mv(e,t){$.logError(`Drilldown failed with payload=${e}`,t),(0,R.showCriticalNotification)({message:"Invalid drilldown",autoDismiss:!0}),g.applicationState.go(F.WORKSPACE.VIEWS.HOME.stateName)}const kv=[{name:"app.drilldowns",url:"/drilldowns?:data",params:{data:void 0},onEnter:["$stateParams",function(e){const t=Nv.A.read(e.data,Mv);switch(null==t?void 0:t.type){case"simple_search":(0,re.getAngularInjectable)("searchWorkspaceViewService").simpleSearchDrillDown(t.data);break;case"search":{const e=(0,re.getAngularInjectable)("searchWorkspaceViewService"),i=new L.SearchQueryDataModule(t.data);e.searchDrillDown(i);break}case"metrics":(0,g.drillDownToMetricsExplorer)(t.data);break;case"traces":{const e=re.idGeneratorService.generateId(!1,!0);g.applicationState.go(F.WORKSPACE.VIEWS.TRACE_ANALYTICS.stateName,{viewId:e,drillDownInfo:t.data});break}case"dashboard":{const e=t.data;g.workspacesManager.getCurrent().openNewDashboardTab(...e);break}case"spans":{const e=re.idGeneratorService.generateId(!1,!0);g.applicationState.go(F.WORKSPACE.VIEWS.SPANS_ANALYTICS.stateName,{viewId:e,drillDownInfo:t.data});break}case"serviceMap":{const e=t.data;_e.serviceMapWorkspaceViewService.drillDown(e);break}case"liveTail":{const e=t.data;(0,re.getAngularInjectable)("liveTailWorkspaceViewService").addPanel(e);break}}return!1}],template:"<div></div>"}];s.module("sumoApp.drilldowns",["ui.router"]).config(["$stateProvider",e=>{kv.forEach((t=>e.state(t)))}]);const Lv={controller:class{},template:"\n      <div class=\"switchViewAndCloseTabs\">\n        {{::'library.switchViewConfirmPopupContentText' | i18nText}}\n      </div>\n      <div>\n        {{::'library.switchViewConfirmPopupContentSubText' | i18nText}}\n      </div>\n    "};class Pv{constructor(e,t){this.dialogService=e,this.i18n=t,this.openSwitchViewConfirmationDialog=()=>{const e=this.getSwitchViewButtons();return this.dialogService.show(this.dialogService.preset("simple").title(this.i18n.get("library.switchViewConfirmPopupHeadText")).contentComponent({name:"switchViewAndCloseAllTabs"}).buttons(e))}}getSwitchViewButtons(){return this.dialogService.buttons().cancel().ok().text(this.i18n.get("library.switchViewConfirmButtonText"))}}Pv.$inject=["dialogService","i18n"];const Fv=s.module("sumoApp.workspaces.workspacesCommon",["sumoApp.common.components","sumoApp.i18n"]);Fv.service("switchViewAndCloseAllTabsService",Pv),Fv.component("switchViewAndCloseAllTabs",Lv);i(83784);const Uv=pe({name:"app.information-models",contentType:he.wF.informationModel,template:'<model-editor\n              style="height:100%"\n              params="vm.view.params"\n              actions="vm.views.actions">\n            </model-editor>',controllerAs:"vm"}),Vv=e=>(e=>e.dataModels)(e).dataModelBuilderPanels;var Bv=i(94006),$v=i(33407);const Hv=e=>(0,Bv.y)(e.editorState);const Wv=s.module("sumoApp.dataModels.workspace",[]);let qv;Wv.service("dataModelsWorkspaceViewService",class extends be{constructor(){super(...arguments),this.viewInfo=F.WORKSPACE.VIEWS.DATA_MODELS,this.getDefaultViewTitle=e=>{if(e)switch(e){case"view":return Ge.j.get("dataModels.viewModel");case"edit":return Ge.j.get("dataModels.editModel");case"new":return Ge.j.get("dataModels.createModel")}return Ge.j.get("dataModels.defaultTabName")}}viewRemoved(e){(0,Ee.Og)(e.id,he.wF.informationModel)}shouldAllowClose(e){const t=Te.store.getState();return((e,t=$.logInfo)=>{if(!e)return!0;if(!e.meta.resource){const i=Hv(e);t("currentEditorState: >>>>>>>>>>>>>.",JSON.stringify(i));const r=Hv($v.E);return t("initialEditorState: >>>>>>>>>>>>>.",JSON.stringify(r)),(0,Mo.Z)(i,r)}const i=Hv(e);t("editorState>>>>>>>>",JSON.stringify(i));const r=(0,S.Z)(e.meta.resource,["name","description","modelDetails"]);return t("resource>>>>>>>>>>>>>>>>>>>>>>>>",JSON.stringify(r)),(0,Mo.Z)(i,r)})(Vv(t)[e.id])}}),Wv.run(["$injector",e=>{qv=e.get("dataModelsWorkspaceViewService")}]),Wv.config(["$stateProvider",e=>{e.state(Uv)}]);var jv=i(42019);s.module("sumoApp.healthEvents",["sumoApp.currentUser"]).component("healthEventsContainer",(0,re.legacyReactToAngular)(jv.HealthEventsAppContainer,["selectedIdViaRoute"],[]));let Qv=!1;const zv=()=>Promise.all([i.e(5131),i.e(7931),i.e(9346),i.e(3823)]).then(i.bind(i,70024)).then((e=>(!1===Qv&&(e.initializeCollection({reducerRegistry:ta.Z,store:Te.store,entityUpdated:()=>{}}),Qv=!0),e)));s.module("sumoApp.archive",[]).component("archiveContainer",(0,re.legacyReactToAngular)((e=>{const t={store:Te.store,reducerRegistry:ta.Z,componentsFactory:v.u};return x().createElement(C.F,{dynamicImportFn:zv,moduleName:"logsToArchive",componentProps:t})})));let Gv=!1;const Kv=()=>Promise.all([i.e(5131),i.e(7931),i.e(9346),i.e(3823)]).then(i.bind(i,40339)).then((e=>(!1===Gv&&(e.initializeCollection({reducerRegistry:ta.Z,store:Te.store,entityUpdated:()=>{}}),Gv=!0),e)));function Yv(e){return{type:F.NAVIGATION_ACTIONS.SET_SAVE_PROMPT,payload:e}}s.module("sumoApp.collectionDataForwarding",[]).component("collectionDataForwardingContainer",(0,re.strictModeReactToAngular)((e=>{const t={store:Te.store,reducerRegistry:ta.Z,componentsFactory:v.u};return x().createElement(C.F,{dynamicImportFn:Kv,moduleName:"collectionDataForwarding",componentProps:t})})));class Zv extends T.Component{render(){const{dialogTitle:e,confirmText:t,open:i,onAction:r}=this.props;return T.createElement(qt.ConfirmDialog,{"data-sumo-test":"save-prompt-dialog",title:e||Ge.j.get("content.savePromptTitle"),okButtonText:t||Ge.j.get("content.savePromptConfirmText"),cancelButtonText:Ge.j.get("content.savePromptCancelText"),open:!!i,onAction:r},Ge.j.get("content.savePromptDescription"))}}Zv.defaultProps={onAction:po.Z};const Xv={setSavePrompt:Yv},Jv=(0,Te.legacyConnect)((e=>Object.assign({},e.navigation.savePrompt)),Xv)(Zv);class ef{constructor(e){this.viewServices=e,this.setWorkspace=e=>{this.workspace=e,window.addEventListener("beforeunload",(e=>{if(this.shouldShowPrompt()){this.goToPromptTab()&&(e.returnValue="",e.preventDefault())}}))},this.goToPromptTab=()=>{const e=this.workspace&&this.workspace.views.find((e=>this.shouldShowPrompt([e])));return!(!e||!this.workspace)&&(this.workspace.showView(e),!0)},this.shouldShowPrompt=e=>(e=e||this.workspace&&this.workspace.views,dt.loginService.isLoggedIn()&&e&&e.some((e=>!this.getViewService(e.type).shouldAllowClose(e)))),this.openPrompt=({confirmText:e,dialogTitle:t}={})=>new Promise((i=>{Te.store.dispatch(Yv({open:!0,confirmText:e,dialogTitle:t,onAction:i}))})).finally((()=>{Te.store.dispatch(Yv({open:!1}))})),this.getViewService=e=>{const t=this.viewServices.getService(e);return t||$.logWarnLocal("No service registered for type: "+e),t}}}ef.$inject=["viewServices"];const tf=s.module("sumoApp.shared.savePrompt",[]);tf.component("savePrompt",(0,re.legacyReactToAngular)(Jv)),tf.service("savePromptService",ef);let rf=!1;const nf=()=>Promise.all([i.e(1654),i.e(4776),i.e(1979)]).then(i.bind(i,55669)).then((e=>(rf||(e.initAlertResponsePage(ta.Z,up.G),rf=!0),e))),af={name:F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE.stateName,url:"/alert/:viewId",params:{viewId:void 0,alertName:void 0},controller:ce,controllerAs:"$ctrl",template:'\n    <load-placeholder loading="$ctrl.showTabContent">\n      <alert-response-page-container class="alert-response-page-container-global" params="$ctrl.view.params"></alert-response-page-container>\n    </load-placeholder>\n  '};class sf extends g.BaseViewService{constructor(e,t,i,r){super(e,t),this.workspacesService=e,this.i18n=i,this.currentUserHelper=r,this.viewInfo=F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE}newTab(e,t="",i){super.newTab(e,t,i);const r=this.createView();e.addView(r)}createView(e={}){const t=e.params.viewId,i=e.title||e.params.alertName||re.i18nUtil.get("alertResponsePage.alertTitle",t).trim()||`Alert ${t}`,r=super.createView(e);this.canViewAlertResponsePage()||((0,R.showCriticalNotification)({variant:"warning",autoDismiss:!0,message:this.i18n.get("common.noPermissionNotification")}),setTimeout((()=>this.removeViewById(t))));const n={viewId:t};return Object.assign(Object.assign({},r),{id:t,title:i,params:n})}viewRemoved(e,t){super.viewRemoved(e,t),Te.store.dispatch({type:"AlertResponsePage.DestroyPage",alertId:e.id})}getViewParams(){return[...super.getViewParams(),"viewId"]}drillDown(e,t){const i={viewId:e,alertName:null==t?void 0:t.alertName};return g.applicationState.go(this.viewInfo.stateName,i)}removeViewById(e){this.workspacesService.getCurrent().removeViewById(e)}canViewAlertResponsePage(){return this.currentUserHelper.hasPrivilege("CanDisplayAlertResponsePageListView")}}sf.$inject=["workspacesService","logService","i18n","currentUserHelper"];const of=s.module("sumoApp.alertResponsePage.workspace",[]);of.service("alertResponsePageViewService",sf),of.config(["$stateProvider",e=>{e.state(af)}]),of.component("alertResponsePageContainer",(0,re.legacyReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:nf,moduleName:"alert-response-page",componentProps:e})),["params"],[]));let lf=!1;const cf=()=>Promise.all([i.e(1654),i.e(4776),i.e(1979)]).then(i.bind(i,36963)).then((e=>(lf||(e.initAlertResponsePageList(ta.Z,up.G),lf=!0),e))),df={name:F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE_LIST.stateName,url:"/alert-list?monitorId",params:{monitorId:void 0},controller:ce,controllerAs:"$ctrl",template:'\n    <load-placeholder loading="$ctrl.showTabContent">\n      <alert-response-page-list-container class="alert-response-page-list-container-global" params="$ctrl.view.params"></alert-response-page-list-container>\n    </load-placeholder>\n  '};class uf extends g.BaseViewService{constructor(e,t,i,r){super(e,t),this.workspacesService=e,this.i18n=i,this.currentUserHelper=r,this.viewInfo=F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE_LIST,this.stopUpdatingAlertsCount=po.Z,this.initializeAlertsCount=(0,Ou.Z)((()=>{this.currentUserHelper.getUserSetting$("displayAlertBadge").subscribe((()=>{this.stopUpdatingAlertsCount(),this.stopUpdatingAlertsCount=this.startUpdatingAlertsCount()}))}))}createView(e){const t=this.getWorkspaceId(e),i={viewId:this.viewInfo.type,workspaceId:t},r=super.createView(e);return r.params=Object.assign(Object.assign({},r.params),i),r.title=this.i18n.get("workspaces.tabNames.alertList"),r.isStatic=!0,r.notRemoveable=this.canViewAlertList(),this.canViewAlertList()||setTimeout((()=>this.removeViewById(r.id))),this.initializeAlertsCount(),r}removeViewById(e){this.workspacesService.getCurrent().removeViewById(e)}drillDown(e){const t={monitorId:e};return g.applicationState.go(this.viewInfo.stateName,t)}canViewAlertList(){return this.currentUserHelper.hasPrivilege("CanDisplayAlertResponsePageListView")}startUpdatingAlertsCount(){if(!this.canShowAlertsBadge())return po.Z;this.updateAlertsCount();const e=setInterval((()=>{this.updateAlertsCount()}),6e4),t=()=>{this.updateAlertsCount()};return document.addEventListener("visibilitychange",t),()=>{clearInterval(e),document.removeEventListener("visibilitychange",t),(0,F.clearTabBadge)()}}canShowAlertsBadge(){const e=this.canViewAlertList()&&this.hasFeatureFlagUIAlertsCountInTabBadge();return this.hasFeatureFlagUIMonitorsSubscriptions()?e&&this.shouldDisplayAlertBadge():e}hasFeatureFlagUIAlertsCountInTabBadge(){return this.currentUserHelper.hasFeatureFlag("UIAlertsCountInTabBadge")}hasFeatureFlagUIMonitorsSubscriptions(){return this.currentUserHelper.hasFeatureFlag("UIMonitorsSubscriptions")}shouldNotifyOnlyAboutSubscribedMonitors(){return!0===this.currentUserHelper.getUserSetting("notifyOnlyAboutSubscribedMonitors")}shouldDisplayAlertBadge(){return!0===this.currentUserHelper.getUserSetting("displayAlertBadge")}updateAlertsCount(){if("visible"!==document.visibilityState)return;const e={};this.hasFeatureFlagUIMonitorsSubscriptions()&&this.shouldNotifyOnlyAboutSubscribedMonitors()&&(e.onlySubscribed=!0),(0,F.getAlertsCount)(e).then(F.setNumericTabBadge).catch((e=>{$.logErrorLocal("getAlertsCount failed",e)}))}}uf.$inject=["workspacesService","logService","i18n","currentUserHelper"];const pf=s.module("sumoApp.alertResponsePageList.workspace",[]);pf.service("alertResponsePageListViewService",uf),pf.config(["$stateProvider",e=>{e.state(df)}]),pf.component("alertResponsePageListContainer",(0,re.strictModeReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:cf,moduleName:"alert-list",componentProps:e})),["params"]));const hf=ye;(0,xh.createSearchNgModule)();const mf=s.module("sumoApp.workspaces",["ui.router","ngMaterial","sumoApp.currentUser","sumoApp.workspaces.common","sumoApp.workspaces.navigation","sumoApp.account.components","sumoApp.bentoApp","sumoApp.help.common","sumoApp.login.view","sumoApp.drilldown.dashboard","sumoApp.utils","sumoApp.dashboard","sumoApp.manage","sumoApp.backboneDashboard","sumoApp.metrics.workspace","sumoApp.newmetrics.workspace","sumoApp.anomalies.workspace","sumoApp.explore.workspace","sumoApp.drilldowns","sumoApp.search","sumoApp.liveTail.workspace","sumoApp.home.workspace","sumoApp.tracing.workspace","sumoApp.newboard.workspace","sumoApp.usersAndRoles.workspace","sumoApp.megaCSiem.workspace","angularResizable","sumoApp.logging","sumoApp.core","sumoApp.collector.view","cfp.hotkeys","sumoApp.setupWizard","sumoApp.common.components","sumoApp.workspaces.workspacesCommon","sumoApp.currentUser.common","sumoApp.dataModels.workspace","sumoApp.shared.savePrompt","sumoApp.alertResponsePage.workspace","sumoApp.alertResponsePageList.workspace"]);mf.config(["$stateProvider",e=>{[Vt,de,me,...se].forEach((t=>e.state(t)))}]),mf.service("reopenPreviousTabsHelper",Bt),mf.service("workspaceFactory",Rt),mf.service("workspacesService",g.WorkspacesService),mf.service("libraryWorkspaceViewService",Ot),mf.service("groupWorkspaceViewService",Nt),mf.service("drilldownService",fe),mf.service("preferencesWorkspaceViewService",Mt),mf.service("developerWorkspaceViewService",kt),mf.service("viewServices",Ze),mf.service("appsWorkspaceViewService",Lt.AppsWorkspaceViewService),mf.service("appViewHelper",ae),mf.service("bentoNavHelperService",class{constructor(){this.constructStateParams=e=>{const t={workspaceId:"default",context:"drilldown"===e.itemType?this.getDrilldownString(e):e.context};return _.each(e.params,(e=>{t[e.key]=e.id})),t},this.getDrilldownString=e=>encodeURIComponent(JSON.stringify(e))}toNavModels(e){return _.map(e,(e=>{let t,i;return!_.isUndefined(e.appPath)&&(t=`${e.appPath}${e.itemType}(${JSON.stringify(this.constructStateParams(e))})`),e.children&&e.children.length>0&&(i=this.toNavModels(_.compact(e.children))),{state:t,id:e.id,name:e.name,isGroupHeader:e.staticData,icon:e.iconType,children:i,linkURL:e.helpURL,linkTarget:e.helpTarget,linkIcon:e.linkIcon,helpId:e.helpId}}))}}),mf.service("bentoManageNavService",lt),mf.service("adminNavService",ct),mf.service("bentoHelpNavService",ot),mf.service("bentoUserNavService",ut),mf.service("bentoNavService",pt),mf.service("intercomService",Pt),mf.service("launchService",Ft),mf.service("shortcutsService",Ut),mf.service("routerHistoryService",Dt),mf.service("workspaceViewService",$t),mf.service("workspaceOverlayService",Xe),mf.component("unifiedNav",(0,re.strictModeReactToAngular)((()=>{const[e,t]=(0,T.useState)(!0),i=(0,T.useCallback)((()=>{t(!1)}),[]),[r,n]=(0,T.useState)(!1),a=(0,T.useCallback)((e=>{n(e)}),[n]),s=(0,T.useMemo)((()=>({curtain:e?void 0:Kt().curtainFadeout})),[e]),o=(0,T.useMemo)((()=>({onInit:i,onCollapseChange:a,userPrivileges:E.currentUserHelper.getPrivileges()})),[i,a]),l=(0,T.useMemo)((()=>x().createElement("div",{className:Kt().navContainer},x().createElement(C.F,{dynamicImportFn:Yt,componentProps:o,moduleName:"sumoApp.workspaces"}))),[o]);return x().createElement(x().Fragment,null,x().createElement(zt,{styleProps:s}),x().createElement("div",{className:Kt().navPlaceholderToolbar}),x().createElement("div",{className:Wt()(Kt().navPlaceholderSidebar,{[Kt().navPlaceholderSidebarCollapsed]:r})}),l)}))),mf.component("headerBarContainer",(0,re.strictModeReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:Zt,componentProps:e,moduleName:"kanso-header-bar"})))),mf.component("bentoSideNav",tt),mf.component("bentoNavMenu",rt),mf.component("externalLink",at),mf.constant("stateParamsOverrides",{});const gf=s.module("sumoApp.bentoApp",["sumoApp.core","sumoApp.components","sumoApp.utils","sumoApp.currentUser","sumoApp.partners","sumoApp.account.view","sumoApp.workspaces","sumoApp.help.common","sumoApp.currentUser.common"]);gf.service("applicationViewShimService",N),gf.service("dashboardManagerShimService",M),gf.service("bentoBootstrapService",P),gf.service("cheatsheetDialogService",j),gf.service("buildInfoDialogService",G),gf.service("bootstrapToastService",class{constructor(){(0,g.checkUpcomingPasswordExpiry)(E.currentUserHelper.get()),E.currentUserHelper.hasFeatureFlag("UISupportAccountNotification")&&(0,g.checkSupportAccountAccessExpiry)({currentUserHelper:E.currentUserHelper})}});i(51234);const yf={name:"app.developers",url:"/developers/:selectedTab",params:{selectedTab:"feature-flags"},template:'<developer-tabs selected-tab="$ctrl.view.params.selectedTab" style="height: 100%"></developer-tabs>',controller:ce,controllerAs:"$ctrl"};let vf=!1;const ff=()=>i.e(4881).then(i.bind(i,70003)).then((e=>(vf||(e.initApp({componentsFactory:v.u,reducerRegistry:ta.Z}),vf=!0),{default:e.DeveloperTabsContainer,messages:e.messages}))),_f=s.module("sumoApp.developer.workspace",[]);_f.component("developerTabs",(0,re.strictModeReactToAngular)((e=>x().createElement(C.F,{dynamicImportFn:ff,moduleName:"developer-tabs",componentProps:e})),["selectedTab"])),_f.config(["$stateProvider",e=>{e.state(yf)}]);i(33155),i(10592);const Sf=()=>i.e(2758).then(i.bind(i,52586));s.module("sumoApp.accountOverview",[]).component("accountOverview",(0,re.legacyReactToAngular)((()=>{const e={accountStatus:Gr.currentUserHelper.get().accountStatusInfo};return x().createElement(C.F,{dynamicImportFn:Sf,moduleName:"account-overview",componentProps:e})})));let bf=!1;const Ef=()=>Promise.all([i.e(8471),i.e(3823)]).then(i.bind(i,21420)).then((e=>(bf||(e.initMessages(),bf=!0),{default:e.default,messages:e.messages})));s.module("sumoApp.managePlan",[]).component("managePlan",(0,re.strictModeReactToAngular)((()=>{const e={billingHost:(0,D.getBillingHost)(Gr.currentUserHelper.getOrg().deployment),ZuoraService:window.Z,userEmailId:Gr.currentUserHelper.get().name,basicPerformanceMeasurement:k.basicPerformanceMeasurement,accountStatusInfo:Gr.currentUserHelper.get().accountStatusInfo};return x().createElement(C.F,{dynamicImportFn:Ef,moduleName:"manage-plan",componentProps:e})})));const Tf=()=>Promise.all([i.e(8471),i.e(3823)]).then(i.bind(i,40965));s.module("sumoApp.managePayment",[]).component("managePayment",(0,re.legacyReactToAngular)((()=>{const e={billingHost:(0,D.getBillingHost)(Gr.currentUserHelper.getOrg().deployment),ZuoraService:window.Z};return x().createElement(C.F,{dynamicImportFn:Tf,moduleName:"manage-payment",componentProps:e})})));const xf=()=>i.e(6834).then(i.bind(i,13477));var Cf=i(15604);class Af extends Cf.Gt{constructor(e,t,i,r){super(t,i,r),this.$scope=e,this.$element=t,this.currentUserHelper=i,this.deployment="",this.email=""}$onInit(){this.deployment=this.currentUserHelper.get().org.deployment,this.email=this.currentUserHelper.get().name}}Af.$inject=["$scope","$element","currentUserHelper","routerNamedViewService"];const wf={bindings:{tabs:"<",selectedTab:"<"},controller:Af,template:Cf.aq},If=s.module("sumoApp.organizations",[]);If.component("organizationsGroup",wf),If.component("manageOrganizationAccounts",(0,re.strictModeReactToAngular)((e=>{const t=Gr.currentUserHelper.getSwitchableOrgs(),i=Gr.currentUserHelper.getDynamicProperty("ui_organizations_api_endpoint")||"",r=Gr.currentUserHelper.getDynamicProperty("ui_organizations_trial_baselines")||"{}",n=Gr.currentUserHelper.hasFeatureFlag("UICSEAutoProvisioning"),a=Gr.currentUserHelper.hasFeatureFlag("UIPromotionalCreditsSupportInSumoOrgs"),s={deployment:e.deployment,email:e.email,store:Te.store,reducerRegistry:ta.Z,componentsFactory:v.u,switchableOrganizations:t,basicPerformanceMeasurement:k.basicPerformanceMeasurement,hasPrivilege:e=>Gr.currentUserHelper.hasPrivilege(e),apiEndPoint:i,trialBaselines:r,isCSEAutoProvisioningEnabled:n,isPromoCreditsSupportEnabled:a};return x().createElement(C.F,{dynamicImportFn:xf,moduleName:"organizations",componentProps:s})}),["deployment","email"])),If.run(["$injector",e=>{}]);const Rf=()=>Promise.all([i.e(8471),i.e(3823)]).then(i.bind(i,15085));s.module("sumoApp.requestUpgrade",[]).component("requestUpgradeV2",(0,re.strictModeReactToAngular)((()=>x().createElement(C.F,{dynamicImportFn:Rf,moduleName:"request-upgrade-v2"}))));const Df=[{name:"app.collection",url:"/collection",deepStateRedirect:{fn:(e,t)=>{if(!t)return;const i=Object.assign(t._params,{searchQuery:null});return Object.assign(t,i)}},sticky:!0,params:{selectedTab:{value:"collection",dynamic:!0},groupId:{value:"collection"}},views:{collection:{template:'<manage-group view="$manageCtrl.view" tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab" background="true"></manage-group>',controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.collection.collection",url:"/collection?:searchQuery",params:{selectedTab:{value:"collection"}},resolve:{params:["$stateParams",e=>Object.assign({},e,{searchQuery:e.searchQuery?decodeURIComponent(e.searchQuery):void 0})]},sticky:!0,views:{collection:{template:'<div class="padded"><collection></collection></div>'}}},{name:"app.collection.status",url:"/status",params:{selectedTab:{value:"status"}},sticky:!0,views:{status:{template:'<div class="padded"><status bento-view="$ctrl.view"></status></div>'}}},{name:"app.collection.ingest",url:"/ingest",params:{selectedTab:{value:"ingest"}},sticky:!0,views:{ingest:{template:'<div style="display: flex; flex: 1 1 auto; background-color: #f2f4f5;">\n                    <ingest-budgets-root class="ingest-budgets-root" selected-tab="$manageCtrl.tabs[$manageCtrl.selectedTab].id" group-id="$manageCtrl.params.groupId"></ingest-budgets-root>\n                </div>',controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.collection.archive",url:"/archive",params:{selectedTab:{value:"archive"}},views:{archive:{template:'<archive-container style="height: 100%; display: flex; background-color: #f2f4f5;"></archive-container>'}}},{name:"app.collection.agents",url:"/agents",params:{selectedTab:{value:"agents"}},views:{agents:{template:'<agents-container style="height: 100%; display: flex; background-color: #f2f4f5;"></agents-container>'}}},{name:"app.collection.dataForwarding",url:"/data-forwarding",params:{selectedTab:{value:"dataForwarding"},searchKeyword:null},views:{dataForwarding:{template:'<collection-data-forwarding-container style="height: 100%; display: flex; background-color: #f2f4f5;"></collection-data-forwarding-container>'}}}],Of=[{name:"app.config",url:"/config",params:{selectedTab:{value:"fields",dynamic:!0},groupId:{value:"config"}},deepStateRedirect:!0,sticky:!0,views:{config:{template:'<manage-group view="$manageCtrl.view" tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab"></manage-group>',controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.config.partitions-page",url:"/partitions-page",params:{selectedTab:{value:"partitions-page"}},sticky:!0,views:{"partitions-page":{template:"<partitions-container is-selected-tab=\"$manageCtrl.params.groupId === 'config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'partitions-page'\"></partitions-container>",controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.config.scheduled-views",url:"/scheduled-views",params:{selectedTab:{value:"scheduled-views"}},sticky:!0,views:{"scheduled-views":{template:"<scheduled-views-page is-selected-tab=\"$manageCtrl.params.groupId === 'config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'scheduled-views'\"></scheduled-views-page>",controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.config.metrics-rules",url:"/metrics-rules",params:{selectedTab:{value:"metrics-rules"}},sticky:!0,views:{"metrics-rules":{template:'<div id="rule-manager" class="" ng-controller="RuleManagerCtrl as ruleManagerCtrl">\n    <div sumo-toolbar\n         data-sumo-test="rule-manager-toolbar"\n         search-callback="ruleManagerCtrl.updateDisplayData(text)"\n         search="true"\n         search-box-width="500"\n         button-bar="ruleManagerCtrl.addRuleButtonOption"\n         buttonbar-minwidth="70"\n         search-placeholder="{{::\'metrics.ruleManagerFilterRules\' | i18nText}}"\n         no-hide="true">\n    </div>\n    <ux-grid ng-if="ruleManagerCtrl.gridOptions" grid-options="ruleManagerCtrl.gridOptions"></ux-grid>\n  </div>'}}},{name:"app.config.metrics-extraction",url:"/metrics-extraction",views:{"metrics-extraction":{component:"metricsExtractionPageContainer"},"metrics-extraction-list@app.config.metrics-extraction":{component:"metricsExtractionListPageContainer"}},sticky:!0,params:{selectedTab:{value:"metrics-extraction"}}},{name:"app.config.metrics-extraction.add",url:"/add",views:{"":{component:"metricsExtractionEditPageContainer"}}},{name:"app.config.metrics-extraction.edit",url:"/edit/:ruleId",component:"metricsExtractionEditPageContainer",resolve:{ruleId:["$transition$",e=>e.params().ruleId]},params:{ruleId:{squash:!0,value:null}}},{name:"app.config.connections",url:"/connections",params:{selectedTab:{value:"connections"}},sticky:!0,views:{connections:{component:"connections"}}},{name:"app.config.data-forwarding",url:"/data-forwarding",params:{selectedTab:{value:"data-forwarding"}},sticky:!0,views:{"data-forwarding":{template:'<div class="prada">\n    <div id="collectormgmt-view">\n      <div id="view-center" ng-controller="MainDestinationController">\n        <div class="view-header">\n          Data Forwarding\n        </div>\n        <div ng-if="perPartitionDataForwardingOn" id="collectors-view"\n          class="view alt-search full-size"\n          ng-controller="AllDestinationController as destinationCtrl"\n          >\n          <div ng-include="\'js/features/manage/views/destinations.html\'"></div>\n        </div>\n        <div ng-if="!perPartitionDataForwardingOn" id="collectors-view"\n          class="view alt-search full-size"\n          ng-controller="DestinationController as destinationCtrl"\n          >\n          <div ng-include="\'js/features/manage/views/destinations.html\'"></div>\n        </div>\n      </div>\n    </div>\n  </div>'}}},{name:"app.config.field-extraction-rules",url:"/field-extraction-rules",views:{"field-extraction-rules":{template:"<field-extraction-rules-page-container is-selected-tab=\"$manageCtrl.params.groupId === 'config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'field-extraction-rules'\"></field-extraction-rules-page-container>",controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"field-extraction-rules"}},sticky:!0},{name:"app.config.fields",url:"/fields",views:{fields:{template:"<fields-page-container is-selected-tab=\"$manageCtrl.params.groupId === 'config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'fields'\"></fields-page-container>",controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"fields"}},sticky:!0},{name:"app.config.metrics-transformation-rules",url:"/metrics-transformation-rules",views:{"metrics-transformation-rules":{component:"metricsTransformationRulesContainer"}},params:{selectedTab:{value:"metrics-transformation-rules"}},sticky:!0}],Nf=[{name:"app.logs-config",url:"/logs-config",params:{selectedTab:{value:"fields",dynamic:!0},groupId:{value:"logs-config"}},deepStateRedirect:!0,sticky:!0,views:{"logs-config":{template:'<manage-group view="$manageCtrl.view" tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab"></manage-group>',controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.logs-config.partitions-page",url:"/partitions-page",params:{selectedTab:{value:"partitions-page"}},sticky:!0,views:{"partitions-page":{template:"<partitions-container is-selected-tab=\"$manageCtrl.params.groupId === 'logs-config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'partitions-page'\"></partitions-container>",controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.logs-config.scheduled-views",url:"/scheduled-views",params:{selectedTab:{value:"scheduled-views"}},sticky:!0,views:{"scheduled-views":{template:"<scheduled-views-page is-selected-tab=\"$manageCtrl.params.groupId === 'logs-config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'scheduled-views'\"></scheduled-views-page>",controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.logs-config.data-forwarding",url:"/data-forwarding",params:{selectedTab:{value:"data-forwarding"},searchKeyword:null},sticky:!0,views:{"data-forwarding":{template:"<dataforwardingwrapper></dataforwardingwrapper>"}}},{name:"app.logs-config.field-extraction-rules",url:"/field-extraction-rules",views:{"field-extraction-rules":{template:"<field-extraction-rules-page-container is-selected-tab=\"$manageCtrl.params.groupId === 'logs-config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'field-extraction-rules'\"></field-extraction-rules-page-container>",controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"field-extraction-rules"}},sticky:!0},{name:"app.logs-config.fields",url:"/fields",views:{fields:{template:"<fields-page-container is-selected-tab=\"$manageCtrl.params.groupId === 'logs-config' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === 'fields'\"></fields-page-container>",controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"fields"}},sticky:!0},{name:"app.logs-config.tree-parsers",url:"/parsers/:folderId",resolve:{params:["$stateParams",e=>({folderId:e.folderId||null})]},params:{selectedTab:{value:"tree-parsers"},folderId:null},sticky:!0,views:{"tree-parsers":{template:'<tree-parsers-container is-selected-tab="$manageCtrl.params.groupId === \'logs-config\' && $manageCtrl.tabs[$manageCtrl.selectedTab].id === \'tree-parsers\'" folder-id="$manageCtrl.params.folderId" key="$manageCtrl.params.folderId"></tree-parsers-container>',controller:fd,controllerAs:"$manageCtrl"}}}],Mf=[{name:"app.metrics-config",url:"/metrics-config",params:{selectedTab:{value:"metrics-rules",dynamic:!0},groupId:{value:"metrics-config"}},deepStateRedirect:!0,sticky:!0,views:{"metrics-config":{template:'<manage-group view="$manageCtrl.view" tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab"></manage-group>',controller:fd,controllerAs:"$manageCtrl"}}},{name:"app.metrics-config.metrics-rules",url:"/metrics-rules",params:{selectedTab:{value:"metrics-rules"}},sticky:!0,views:{"metrics-rules":{template:'<div id="rule-manager" class="" ng-controller="RuleManagerCtrl as ruleManagerCtrl">\n    <div sumo-toolbar\n         data-sumo-test="rule-manager-toolbar"\n         search-callback="ruleManagerCtrl.updateDisplayData(text)"\n         search="true"\n         search-box-width="500"\n         button-bar="ruleManagerCtrl.addRuleButtonOption"\n         buttonbar-minwidth="70"\n         search-placeholder="{{::\'metrics.ruleManagerFilterRules\' | i18nText}}"\n         no-hide="true">\n    </div>\n    <ux-grid ng-if="ruleManagerCtrl.gridOptions" grid-options="ruleManagerCtrl.gridOptions"></ux-grid>\n  </div>'}}},{name:"app.metrics-config.metrics-extraction",url:"/metrics-extraction",views:{"metrics-extraction":{component:"metricsExtractionPageContainer"},"metrics-extraction-list@app.metrics-config.metrics-extraction":{component:"metricsExtractionListPageContainer"}},sticky:!0,params:{selectedTab:{value:"metrics-extraction"}}},{name:"app.metrics-config.metrics-extraction.add",url:"/add",views:{"":{component:"metricsExtractionEditPageContainer"}}},{name:"app.metrics-config.metrics-extraction.edit",url:"/edit/:ruleId",component:"metricsExtractionEditPageContainer",resolve:{ruleId:["$transition$",e=>e.params().ruleId]},params:{ruleId:{squash:!0,value:null}}},{name:"app.metrics-config.metrics-transformation-rules",url:"/metrics-transformation-rules",views:{"metrics-transformation-rules":{component:"metricsTransformationRulesContainer"}},params:{selectedTab:{value:"metrics-transformation-rules"}},sticky:!0}];var kf=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Lf="app.alerts",Pf={name:Lf,url:"/monitoring",params:{selectedTab:{value:"unified-monitors",dynamic:!0},groupId:{value:"alerts"}},deepStateRedirect:!0,views:{alerts:{template:'<manage-group view="$manageCtrl.view" tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab"></manage-group>',controller:fd,controllerAs:"$manageCtrl"}}},Ff="app.alerts.connections",Uf={name:Ff,url:"/connections",params:{selectedTab:{value:"connections"}},sticky:!0,views:{connections:{component:"connections"}}},Vf="app.alerts.health-events",Bf={name:Vf,url:"/healthEvents/:selectedIdViaRoute",views:{"health-events":{template:'<health-events-container selected-id-via-route="$manageCtrl.params.selectedIdViaRoute" style="height: 100%; display: flex;"></health-events-container>',controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"health-events"},selectedIdViaRoute:{value:""}}},$f="app.alerts.unified-monitors",Hf={name:$f,url:"/unified-monitors/:folderId?:selectedRows",views:{"unified-monitors":{template:'<unified-monitors-page folder-id="$manageCtrl.params.folderId" selected-rows="$manageCtrl.params.selectedRows" style="height: 100%; display: flex;"></unified-monitors-page>',controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"unified-monitors"},selectedRows:{value:void 0,dynamic:!0},folderId:null}},Wf=[Pf,Uf,Bf,Hf,{name:"app.alerts.slo",url:"/slo/:folderId?:selectedRows",views:{slo:{template:'<slo-list-container get-monitor-editor-service="$manageCtrl.params.getMonitorEditorService" folder-id="$manageCtrl.params.folderId" selected-rows="$manageCtrl.params.selectedRows" style="height: 100%; display: flex; flex-direction: column;"></slo-list-container>',controller:fd,controllerAs:"$manageCtrl"}},params:{selectedTab:{value:"slo"},selectedRows:{value:void 0,dynamic:!0},folderId:null,getMonitorEditorService:function(){return kf(this,void 0,void 0,(function*(){return(yield A()).getMonitorEditorService()}))}()}},Object.assign(Object.assign({},Pf),{name:"AppAlertsLegacy",url:"/alerts",redirectTo:{state:Lf}}),Object.assign(Object.assign({},Uf),{name:"AppAlertsLegacy.connections",redirectTo:{state:Ff}}),Object.assign(Object.assign({},Bf),{name:"AppAlertsLegacy.health-events",redirectTo:{state:Vf}}),Object.assign(Object.assign({},Hf),{name:"AppAlertsLegacy.unified-monitors",redirectTo:{state:$f}})];class qf{constructor(e){this.isMegaAccessKeysEnabled=e.hasFeatureFlag("UIMegaAccessKeys")}}qf.$inject=["currentUserHelper"];const jf=[{name:"app.security",url:"/security",template:'<manage-group view="$manageCtrl.view" tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab" background="true"></manage-group>',controller:fd,controllerAs:"$manageCtrl",params:{selectedTab:{value:"password-policy",dynamic:!0},groupId:{value:"security"}},onEnter:["$stateParams","currentUserHelper",(e,t)=>{const i=e.selectedTab,r=t.hasPrivilege("PasswordPolicyAccess"),n=t.hasPrivilege("AccessKeysAccess"),a=t.hasPrivilege("WhitelistAccess"),s=t.hasPrivilege("PoliciesAccess"),o=t.hasPrivilege("SAMLAccess"),l=t.hasPrivilege("InstallationTokensAccess");if("password-policy"===i&&r||"access-keys"===i&&n||"whitelist"===i&&a||"policies"===i&&s||"saml"===i&&o||"installation-tokens"===i&&l)return;let c;r?c="password-policy":n?c="access-keys":a?c="whitelist":s?c="policies":o?c="saml":l&&(c="installation-tokens");const d=`app.security.${c}`;g.applicationState.go(d)}]},{name:"app.security.password-policy",url:"/password-policy",template:'<div class="padded">\n    <password-policy-v3 class="password-policy-view-v3"></password-policy-v3>\n    <activation-overlay selector="password-policy"></activation-overlay>\n  </div>',params:{selectedTab:{value:"password-policy"}}},{name:"app.security.whitelist",url:"/allowlist",template:'<div class="padded">\n    <whitelist class="global-policy-view-v2" id="global-policy-view-v2"></whitelist>\n    <activation-overlay selector="whitelist"></activation-overlay>\n  </div>',params:{selectedTab:{value:"whitelist"}}},{name:"app.security.access-keys",url:"/access-keys",controller:qf,controllerAs:"$accessKeysCtrl",template:'<div ng-if="!$accessKeysCtrl.isMegaAccessKeysEnabled" class="padded">\n    <access-keys class="global-policy-view-v2 api-accessKey-section" id="global-policy-view-v2"></access-keys>\n    <activation-overlay selector="access-keys"></activation-overlay>\n  </div>\n  <access-keys-list-container\n    ng-if="$accessKeysCtrl.isMegaAccessKeysEnabled"\n    class="global-policy-view-v2 api-accessKey-section"\n    id="global-policy-view-v2">\n  </access-keys-list-container>',params:{selectedTab:{value:"access-keys"}}},{name:"app.security.policies",url:"/policies",controller:class{constructor(){this.areCDFPoliciesEnabled=E.currentUserHelper.hasFeatureFlag("UIPoliciesCDF")}},controllerAs:"$policiesCtrl",template:'<div class="padded">\n    <policies ng-if="!$policiesCtrl.areCDFPoliciesEnabled" class="global-policy-view-v2 global-policy-section"></policies>\n    <policy-page-v2 ng-if="$policiesCtrl.areCDFPoliciesEnabled"/>\n    <activation-overlay selector="policies"></activation-overlay>\n  </div>',params:{selectedTab:{value:"policies"}}},{name:"app.security.saml",url:"/saml",template:'\n    <ui-view class="saml-ui-view">\n      <saml-container-view></saml-container-view>\n    </ui-view>\n  ',params:{selectedTab:{value:"saml"},samlSection:{value:"list",squash:""},squash:""}},{name:"app.security.installation-tokens",url:"/installation-tokens",template:'<installation-tokens-container class="installationTokenView"></installation-tokens-container>',params:{selectedTab:{value:"installation-tokens"}}}],Qf=[{name:"app.account",url:"/account",template:'<account-group tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab"></account-group>',controller:fd,controllerAs:"$manageCtrl",params:{selectedTab:{value:"overview",dynamic:!0},groupId:{value:"account"}}},{name:"app.account.overview",url:"/overview",template:"<account-overview></account-overview>",params:{selectedTab:{value:"overview"}}},{name:"app.account.data-management",url:"/data-management",template:'<div class="padded">\n    <div ng-if="$ctrl.awaitingResponse" class="spin-wrapper spin-wrapper-centered">\n      <span data-spinner="">\n        <div class="spinner-message  is-visible">\n          <div class="spinner  is-visible"></div>\n          <div class="spinner-message__message">Loading Account Data...</div>\n        </div>\n      </span>\n    </div>\n    <bento-data-management ng-if="!$ctrl.awaitingResponse"></bento-data-management>\n  </div>',params:{selectedTab:{value:"data-management"}}},{name:"app.account.manage-payment",url:"/manage-payment",template:'\n    <manage-payment ng-if="$ctrl.newUpgradePage"></manage-payment>\n    <div class="padded" ng-if="!$ctrl.newUpgradePage">\n      <div ng-if="$ctrl.awaitingResponse" class="spin-wrapper spin-wrapper-centered">\n        <span data-spinner="">\n          <div class="spinner-message  is-visible">\n            <div class="spinner  is-visible"></div>\n            <div class="spinner-message__message">Loading Account Data...</div>\n          </div>\n        </span>\n      </div>\n      <billing ng-if="!$ctrl.awaitingResponse"></billing>\n    </div>',params:{selectedTab:{value:"manage-payment"}}},{name:"app.account.manage-plan",url:"/manage-plan",template:'<div class="padded" ng-if="$ctrl.showSelfServiceUpgrade">\n      <upgrade ng-if="!$ctrl.newUpgradePage"></upgrade>\n      <manage-plan ng-if="$ctrl.newUpgradePage"></manage-plan>\n    </div>\n    <div class="padded" ng-if="$ctrl.showRequestUpgrade">\n      <request-upgrade ng-if="!$ctrl.newRequestUpgradePage" id="request-upgrade-div"></request-upgrade>\n      <request-upgrade-v2 ng-if="$ctrl.newRequestUpgradePage" id="request-upgrade-div"></request-upgrade-v2>\n    </div>\n  ',params:{selectedTab:{value:"manage-plan"}}},{name:"app.account.beta-participation",url:"/beta-participation",template:"<div><beta-participation></beta-participation></div>",params:{selectedTab:{value:"beta-participation"}}},{name:"app.account.upgrade",url:"/upgrade",template:"",redirectTo:"app.account.manage-plan"},{name:"app.account.billing",url:"/billing",template:"",redirectTo:"app.account.manage-payment"}],zf=[{name:"app.organizations",url:"/organizations",template:'<organizations-group tabs="$manageCtrl.tabs" selected-tab="$manageCtrl.selectedTab"></organizations-group>',controller:fd,controllerAs:"$manageCtrl",params:{selectedTab:{value:"manage-accounts",dynamic:!0},groupId:{value:"organizations"}}},{name:"app.organizations.manage-accounts",url:"/manage-accounts",template:'<manage-organization-accounts\n                  deployment="$ctrl.deployment"\n                  email="$ctrl.email"></manage-organization-accounts>',params:{selectedTab:{value:"manage-accounts"}}}],Gf=s.module("sumoApp.manage.workspace",["ui.router"]);Gf.config(["$stateProvider",e=>{[...Df,...Of,...Nf,...Mf,...Wf,...jf,...Qf,...zf].forEach((t=>{e.state(t)}))}]),Gf.run(["$transitions","currentUserHelper","tourService","manageResolveService",(e,t,i,r)=>{const n=["app.collection","app.config","app.logs-config","app.metrics-config","app.security","app.account","app.organizations"],a={to:e=>_.contains(n,e.name)};e.onBefore({},(e=>{if(t.hasFeatureFlag("UISelfserviceV2")){const i="app.account.manage-plan",r="RESTRICTED"===t.get().accountStatusInfo.applicationUse;if(r&&e.from().name===i)return!1;if(r&&e.to().name!==i)return e.router.stateService.target(i)}})),e.onBefore(a,(e=>{const t=e.params().selectedTab||"users";return e.router.stateService.target(e.$to().name+"."+t,e.params())}));const s={to:e=>n.filter((t=>e.name.includes(t)))};e.onBefore(s,(e=>{const i=e.$to().name.split(".");let n="app";i.length>2&&(n=i.pop());const a=i.pop(),s=ft[a];if(t.hasFeatureFlag("UISplitSettings")&&"config"===a){const t={fields:"app.logs-config.fields",extraction:"app.logs-config.extraction","field-extraction-rules":"app.logs-config.field-extraction-rules","partitions-page":"app.logs-config.partitions-page","scheduled-views":"app.logs-config.scheduled-views","metrics-rules":"app.metrics-config.metrics-rules",connections:"app.alerts.connections","data-forwarding":"app.logs-config.data-forwarding","metrics-extraction":"app.metrics-config.metrics-extraction","metrics-transformation-rules":"app.metrics-config.metrics-transformation-rules"}[n];return e.router.stateService.target(t)}if(void 0===s)return!0;const o=s.find((t=>t.id===e.params().selectedTab));if(void 0===o||void 0===o.privilege)return!0;if(!t.hasPrivilege(o.privilege)){if(r.hasTabs(a)){const t=r.resolveTabs(a);if(t.length>0)return e.router.stateService.target(`app.${a}.${t[0].id}`)}return e.router.stateService.target("app.home")}}));const o={to:e=>_.contains(["app.alerts","app.metrics"],e.name)};e.onBefore(o,(e=>{const r=e.params().selectedTab;return SumoApp.applicationView.checkForMetricsDataIngestion(1e4).then((e=>{if(!e){const e=t.hasPermission("MANAGE_COLLECTORS")?"metricsFirstSource":"metricsNonAdminNoData";i.initialize(e,!0)}})),!r||e.router.stateService.target(e.$to().name+"."+r,e.params())}));e.onBefore({to:"**",from:"app.config.metrics-rules"},(e=>e.params().selectedTab));e.onBefore({from:"**",to:"app.config.metrics-rules"},(e=>e.params().selectedTab));e.onBefore({to:"**",from:"app.collection.collection"},(e=>{(0,vs.stopPollingUniversalSourceStatus)()}));e.onBefore({to:"app.collection.collection",from:"**"},(e=>{(0,vs.pollUniversalSourceStatus)()}));e.onBefore({to:"app.collection.ingest",from:"**"},(e=>{Yr()&&!t.hasFeatureFlag("UIMegaIngestEnabled")&&Zr()}))}]);s.module("sumoApp.manage.view",["sumoApp.workspaces"]).component("manageGroup",Cf.Z9);var Kf=i(64705),Yf=i.n(Kf);const Zf=({open:e,isSigned:t,agreementText:i,closeDialogCallback:r,submitDialogCallback:n})=>{const[a,s]=T.useState(!1),o=t?[T.createElement(qt.Button,{key:"done",color:"primary",onClick:()=>r(),"data-sumo-test":"done-button"},Ge.j.get("betaParticipation.dialogDoneBtn"))]:[T.createElement(qt.Button,{key:"cancel",color:"secondary",onClick:()=>{r(),s(!1)},"data-sumo-test":"cancel-button"},Ge.j.get("betaParticipation.dialogCancelBtn")),T.createElement(qt.Button,{key:"submit",color:"primary",disabled:!a,onClick:()=>{n(),r(),s(!1)},"data-sumo-test":"submit-button"},Ge.j.get("betaParticipation.dialogSubmitBtn"))];return T.createElement(qt.Dialog,{open:e,dialogSize:qt.DialogSizes.Large},T.createElement(qt.Dialog.Title,{"data-sumo-test":"beta-participation-dialog-title"},Ge.j.get("betaParticipation.dialogTitle")),T.createElement(qt.Dialog.Content,{"data-sumo-test":"beta-participation-dialog-content"},!t&&T.createElement(qt.Text,{noWrap:!1,className:Yf().dialogText},Ge.j.get("betaParticipation.dialogText")),T.createElement("div",{className:Yf().agreementContainer},i),!t&&T.createElement("div",{className:Yf().checkbox},T.createElement(qt.Checkbox,{label:Ge.j.get("betaParticipation.dialogCheckboxLabel"),"data-sumo-test":"beta-participation-dialog-checkbox",onChange:e=>s(e.target.checked)}))),T.createElement(qt.Dialog.Actions,null,o))};var Xf=i(85287),Jf=i.n(Xf),e_=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const t_=()=>e_(void 0,void 0,void 0,(function*(){return yield(0,D.legacyHttpGet)("/api/v1/org/settings?keys=betaAgreementSigned")})),i_=e=>{const t=e.data[0].value,[i,r,n,...a]=t.split(",");return"signed"===i?{isSigned:i,signedBy:r,signedDate:n,agreementText:a.join(",")}:{isSigned:!1,signedBy:void 0,signedDate:void 0,agreementText:t}},r_=(e,t,i)=>e_(void 0,void 0,void 0,(function*(){return yield(0,D.legacyHttpPut)("/api/v1/org/settings",{data:[{key:"betaAgreementSigned",value:`signed,${e},${t},${i}`}]})})),n_=e=>{var t;const i=Ge.j.get("betaParticipation.defaultError");if(null===(t=e.errors)||void 0===t?void 0:t.length){return e.errors[0].message||i}return i};s.module("sumoApp.betaParticipation",[]).component("betaParticipation",(0,re.legacyReactToAngular)((()=>{const[e,t]=T.useState(void 0),[i,r]=T.useState(!1);return e||t_().then((e=>t(i_(e)))).catch((e=>(0,R.showCasualNotification)({variant:"critical",message:n_(e)}))),T.createElement("div",{className:Jf().betaParticipation},T.createElement(qt.Text,{variant:"subtitle","data-sumo-test":"beta-participation-title"},Ge.j.get("betaParticipation.title")),T.createElement(qt.Text,{className:Jf().subText,"data-sumo-test":"beta-participation-info"},Ge.j.get("betaParticipation.subText")),e&&T.createElement(T.Fragment,null,e.isSigned?T.createElement("div",{className:Jf().acceptanceInfoContainer,"data-sumo-test":"acceptance-info"},T.createElement(qt.TextButton,{onClick:()=>r(!0)},Ge.j.get("betaParticipation.viewTermsBtn")),T.createElement(qt.Text,{className:Jf().acceptanceText},Ge.j.get("betaParticipation.infoOptedInBy"),T.createElement(qt.Text,{variant:"textHeavy",className:Jf().acceptanceTextItalic},e.signedBy),Ge.j.get("betaParticipation.infoOn"),T.createElement(qt.Text,{variant:"textHeavy",className:Jf().acceptanceTextItalic},e.signedDate))):T.createElement(qt.Button,{color:"primary",onClick:()=>r(!0),"data-sumo-test":"opt-in-btn"},Ge.j.get("betaParticipation.optInBtn")),T.createElement(Zf,{open:i,closeDialogCallback:()=>r(!1),submitDialogCallback:()=>{r_(Gr.currentUserHelper.get().name,(new Date).toLocaleDateString(),e.agreementText).then((e=>t(i_(e)))).catch((e=>(0,R.showCasualNotification)({variant:"critical",message:n_(e)})))},agreementText:e.agreementText,isSigned:e.isSigned})))})));i(75498);const a_=i(35848),s_=i(51871);s.module("sumoApp.summarizeDelta",["sumoApp.core","sumoApp.components"]).controller("CustomDeltaDialogCtrl",a_).directive("summarizeDeltaButton",s_);var o_=i(86795);const{SearchQueryDataModule:l_}=i(34074),c_={timeshiftVal:1,timeshiftUnit:"d",timePeriods:0,aggregation:"individual"};class d_{constructor(e,t,i,r,n,a){this.$q=t,this.$element=i,this.sumoDialog=r,this.$scope=n,this.currentUserHelper=a,this.QUERY_PREFIX="| compare with timeshift ",this.generateOptions=()=>{this.DEFAULT_OPTION_LABEL=this.timeCompare.deltaDefaultOptionLabel,this.options=[{label:this.timeCompare.compareOneHour,timeshift:"1h"},{label:this.timeCompare.compareThreeHour,timeshift:"3h"},{label:this.timeCompare.compareOneDay,timeshift:"1d"},{label:this.timeCompare.compareSevenDays,timeshift:"7d"},{label:this.timeCompare.compareCustom,action:()=>{this.openCustomCompareDialog()}}]},this.executeDefaultAction=()=>{this.launchSearch("1d",void 0,void 0)},this.launchSearch=(e,t,i)=>{const r=this.QUERY_PREFIX+e+(t?" "+t:"")+(_.isUndefined(i)?"":" "+i);this.launch||(this.launch=_.debounce(this.debouncedSearch,250,!0)),this.launch(r)},this.lastTransposeIndex=()=>{const e=(0,re.findPartsOfQuery)(this.getQueryExpression());let t="",i=0;return e.map((e=>{"normal"===e.type&&e.val.includes("|")&&(t=e.val,i=e.startIndex)})),t.includes("transpose")?i:-1},this.debouncedSearch=e=>{this.requestSearchQueryModel().then((t=>{this.originalQuery=t.getSearchExpression();let i=this.getQueryExpression()||"*";const r=new l_,n=this.lastTransposeIndex();i=n>-1?i.slice(0,n)+e+" "+i.slice(n):SumoUtil.appendToSearchExpression(i,e).trim(),r.setQueryString(i),r.setTimeRange(t.getTimerangeText()),r.setSearchByReceiptTime(t.getSearchByReceiptTime()),r.setExecuteSearch(!0),r.setAutoParsingInfo(t.getAutoParsingInfo());const a=t.getParameterModel();a&&(r.setParameters(a.getParameters()),r.setParamViewState(g.searchParametersService.getParamViewState(!0,!0,!1)));SumoApp.applicationView.onDrilldownSearch(null,r)}))},this.requestSearchQueryModel=()=>(this.sqmDeferred&&this.sqmDeferred.reject("canceling"),this.sqmDeferred=this.$q.defer(),this.$element.trigger("getSearchQueryModel"),this.sqmDeferred.promise),this.onSearchQueryModelProvided=(e,t)=>{this.sqmDeferred&&this.sqmDeferred.resolve(t)},this.getQueryExpression=()=>this.sqUtil.removeCompare(this.originalQuery),this.openCustomCompareDialog=()=>{this.requestSearchQueryModel().then((e=>{this.originalQuery=e.getSearchExpression(),this.customValues=_.cloneDeep(c_),this.customDialog=this.sumoDialog.open(this.getDialogOptions())}))},this.getDialogOptions=()=>({title:this.timeCompare.compareDialogTitle,template:"js/features/timeCompare/views/custom-compare-dialog.html",controller:"CustomCompareDialogController",controllerAs:"vm",bindToController:!0,scope:this.$scope,className:"prada ngdialog ngdialog-theme-sumo",closeByDocument:!1,name:"CustomCompare",showOk:!1,showCancel:!1,preCloseCallback:this.onDialogClose}),this.onDialogClose=e=>{if("$ok"===e){const e=this.customValues;this.formatAndLaunchCustom(e)}else"$cancel"===e&&(this.customValues=_.cloneDeep(c_))},this.formatAndLaunchCustom=e=>{const t=e.timeshiftVal.toString()+e.timeshiftUnit,i=0==+e.timePeriods?void 0:+e.timePeriods,r="individual"===e.aggregation||!i||i<1?void 0:e.aggregation;this.launchSearch(t,i,r)},e.load("timeCompare").then((e=>{this.timeCompare=e,this.generateOptions()})),this.sqUtil=new o_.SearchQueryUtil,i.on("searchQueryModelProvided",this.onSearchQueryModelProvided),n.$on("$destroy",(function(){i.off("searchQueryModelProvided",this.onSearchQueryModelProvided)}))}}d_.$inject=["i18n","$q","$element","SumoDialog","$scope","currentUserHelper"];const u_={bindings:{},templateUrl:"js/features/timeCompare/views/time-compare-btn.html",controller:d_,controllerAs:"tcbCtrl"},p_={w:4,d:30,h:720};class h_{constructor(e,t,i,r){this.$scope=e,this.frequencyOptions=i,this.aggregationOptions=r,this.isTotalTimeValid=(e,t)=>{const i=this;return!(e>p_[t])||(i.errorMessage=i.timeCompare.errorMaxTimeShift,!1)},this.isComparisonValid=(e,t,i)=>{const r=+i,n=this;return!(r>0&&e*r>p_[t])||(n.errorMessage=n.timeCompare.errorMaxComparison,!1)},this.isTimeShiftValValid=e=>{const t=this;return!(_.isNaN(+e)||e<1||!SumoUtil.isInteger(e))||(t.errorMessage=t.timeCompare.errorInvalidTimeshift,!1)},this.isRepeatValValid=e=>{const t=this;return!(_.isNaN(+e)||_.isNumber(e)&&(e<0||e>7||!SumoUtil.isInteger(e)))||(t.errorMessage=t.timeCompare.errorInvalidRepeats,!1)},this.isFormValid=()=>{const e=this,t=this.$scope.$parent.$parent.tcbCtrl.customValues,i=t.timeshiftVal,r=t.timeshiftUnit,n=t.timePeriods;return e.errorMessage="",e.hasError=!(e.isRepeatValValid(n)&&e.isTimeShiftValValid(i)&&e.isTotalTimeValid(i,r)&&e.isComparisonValid(i,r,n)),!e.hasError};const n=this;n.frequencyOptions=i,n.aggregationOptions=r,t.load("timeCompare").then((e=>{n.timeCompare=e}))}}h_.$inject=["$scope","i18n","frequencyOptions","aggregationOptions"];const m_=s.module("sumoApp.timeCompare",["sumoApp.core","sumoApp.components"]);m_.component("timeCompareBtn",u_),m_.controller("CustomCompareDialogController",h_),m_.constant("frequencyOptions",[{id:"h",name:"hour(s)"},{id:"d",name:"day(s)"},{id:"w",name:"week(s)"}]),m_.constant("aggregationOptions",[{id:"individual",name:"Individual"},{id:"avg",name:"Average"},{id:"min",name:"Min"},{id:"max",name:"Max"}]);class g_{constructor(e,t){this.$element=e,this.i18n=t,this.folderPath=[],this.libraryFolderRef={id:0,name:this.i18n.get("content.library")}}getFolderPath(){const e=this.state&&this.state.folder;if(e)return e.path?(this.folderPath.length=0,this.folderPath.push(this.libraryFolderRef,...e.path),this.folderPath):e.path}$onInit(){this.actionMenuContext=F.ACTION_MENU_CONTEXTS.LIBRARY_FOLDER,this.$element.addClass("library-browser"),this.folderListViewActions={onRowClick:this.actions.select,onRowNameClick:this.actions.open,onContextMenuOpen:this.actions.runChildrenContextMenuAction,runAction:this.actions.runAction},this.libraryHeaderActions={showNewFolderDialog:this.actions.showNewFolderDialog,showImportDialog:this.actions.showImportDialog,search:this.actions.search,changeContext:this.actions.changeContext,runContextMenuAction:this.actions.runHeaderContextMenuAction,isRootFolder:this.actions.isRootFolder,showSelectionMenu:this.actions.showSelectionMenu}}}g_.$inject=["$element","i18n"];const y_={controller:g_,bindings:{state:"<",actions:"<"},template:'\n    <div ux-sliding-panel is-open="$ctrl.state.selectedItems.length > 0" class="library-sliding-panel">\n      <md-card main-panel class="vertical-flex-auto library-sliding-panel__main">\n        <div class="library-browser__header">\n          <library-header state="$ctrl.state" actions="$ctrl.libraryHeaderActions"></library-header>\n        </div>\n        <div class="library-browser__nav">\n          <ux-breadcrumb items="$ctrl.getFolderPath($ctrl.state.folder)"\n            on-item-click="$ctrl.actions.openFolderById(item.id)"\n            on-item-right-click="$ctrl.actions.showFolderMenu($event, item)">\n          </ux-breadcrumb>\n        </div>\n        <div class="library-browser__content">\n          <folder-list-view\n            action-menu-context="$ctrl.actionMenuContext"\n            items="$ctrl.state.folder.children"\n            data-sumo-test="library-folders"\n            mode="$ctrl.state.mode"\n            actions="$ctrl.folderListViewActions"\n            selected="$ctrl.state.selectedItems">\n            <load-placeholder loading="$ctrl.state.folder.children">\n              <unavailable-pane error-title="$ctrl.state.emptyState.message | i18nText"\n              reason="$ctrl.state.emptyState.description | i18nText"\n              image="{{ $ctrl.state.emptyState.image }}">\n              </unavailable-pane>\n            </load-placeholder>\n          </folder-list-view>\n        </div>\n      </md-card>\n      <md-card sliding-panel class="library-sliding-panel__side" close-x="$ctrl.actions.clearSelection()">\n        <content-item-details-wrapper items="$ctrl.state.selectedItems" actions="$ctrl.actions"></content-item-details-wrapper>\n      </md-card>\n    </div>\n  '};class v_{constructor(e,t,i){this.$element=e,this.currentUserHelper=t,this.i18n=i,this.doNewAction=e=>{this.currentUserHelper.hasPrivilege("LookupContentAccess")&&this.actions.showSelectionMenu?this.actions.showSelectionMenu(e):this.actions.showNewFolderDialog&&this.actions.showNewFolderDialog(e)}}$onInit(){this.$element.addClass("library-header"),this.newActionText=this.currentUserHelper.hasPrivilege("LookupContentAccess")?"library.addNew":"library.newFolder"}isCreateEnabled(){const e=_.getPath(this.state,"folder.actions")&&this.state.folder.actions.some((e=>"CREATE"===e.type));return _.getPath(this.state,"isAdminModeEnabled")?e:e||this.actions.isRootFolder()}getTooltipText(){if(!this.isCreateEnabled())return this.i18n.get("library.noPermissionToAdd")}getTooltipTextForMenu(){if(!_.getPath(this.state,"folder.actions")||!this.state.folder.actions.some((e=>"CREATE"===e.type)))return this.i18n.get("library.noPermissionToEdit")}}v_.$inject=["$element","currentUserHelper","i18n"];const f_={controller:v_,bindings:{actions:"<",state:"<"},template:'\n    <div class="library-header__search">\n      <content-search query="{{$ctrl.state.searchString}}" actions="$ctrl.actions"></content-search>\n    </div>\n    <div class="library-header__actions">\n      <div tooltip tooltip-sync="false" tooltip-content="{{$ctrl.getTooltipText()}}"\n      tooltip-position="top">\n        <md-button class="md-raised md-accent md-button library-header__actions__item md-icon-label-button"\n          ng-click="$ctrl.doNewAction($event)"\n          ng-disabled="!$ctrl.isCreateEnabled()"\n          data-sumo-test="library-add-new-folder">\n          <md-icon md-svg-icon="plus" class="md-icon-label-button__icon size-14"></md-icon>{{:: $ctrl.newActionText | i18nText}}\n        </md-button>\n      </div>\n      <div class="library-header__actions__item {{($ctrl.state.folder.actions | containsAction:\'CREATE\') ? \'\' : \'disabled\'}}"\n      tooltip tooltip-sync="false" tooltip-content="{{$ctrl.getTooltipTextForMenu()}}"\n      tooltip-position="top">\n        <ux-icon-button\n          svg="true"\n          icon="menu"\n          ng-click="($ctrl.state.folder.actions | containsAction:\'CREATE\') &&\n           $ctrl.actions.runContextMenuAction($event, $ctrl.state.folder)"\n          data-sumo-test="library-menu-icon"></ux-icon-button>\n      </div>\n    </div>\n  '};class __{constructor(e,t,i,r,n){this.$rootScope=e,this.$scope=t,this.$element=i,this.libraryService=r,this.switchViewAndCloseAllTabsService=n,this.canEnableAdminMode=g.contentAdminModeStateService.hasManageContentCapability(),this.isKansoEnabled=(0,g.isKansoEnabled)(),this.toggleAdminView=()=>{let e;e=this.state.isAdminModeEnabled?g.contentAdminModeStateService.enableAdminMode():this.switchViewAndCloseAllTabsService.openSwitchViewConfirmationDialog().then((()=>g.contentAdminModeStateService.disableAdminMode())),e&&e.catch((()=>this.resetAdminMode()))},this.toggleAdminViewAfterFolder=()=>{this.toggleAdminAfterFolderUnbind||(this.toggleAdminAfterFolderUnbind=this.$scope.$watch("$ctrl.state.folder",(e=>{e&&(this.toggleAdminView(),this.toggleAdminAfterFolderUnbind(),this.toggleAdminAfterFolderUnbind=void 0)})))},this.onAdminViewChange=()=>{this.state.folder?this.toggleAdminView():this.toggleAdminViewAfterFolder()},this.resetAdminMode=()=>{this.state.isAdminModeEnabled=!this.state.isAdminModeEnabled},this.setAdminMode=e=>{this.state.isAdminModeEnabled=e}}$onInit(){g.contentAdminModeStateService.syncState().then((()=>this.isAdminModeOn=this.state&&this.state.isAdminModeEnabled)),this.libraryService.getState$().startWith(this.libraryService.getState()).takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.state=e})).subscribe(),this.actions=this.libraryService.getLibraryActions(),this.libraryService.isAtState(this.params.timestamp)||this.libraryService.navigate(this.params),g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{if(!_.isUndefined(this.isAdminModeOn)&&e!==this.isAdminModeOn)return this.libraryService.clearContentServiceHttpBucket(),this.isAdminModeOn=e,this.libraryService.navigate({timestamp:this.params.timestamp})})).subscribe(),this.$element.addClass("library-browser-container")}$onDestroy(){this.toggleAdminAfterFolderUnbind&&this.toggleAdminAfterFolderUnbind()}}__.$inject=["$rootScope","$scope","$element","libraryService","switchViewAndCloseAllTabsService"];const S_={controller:__,bindings:{params:"<?"},template:'\n    <load-placeholder loading="$ctrl.state">\n      <ng-form md-theme="formTheme">\n        <div class="library-browser-container__view-as">\n          <view-as-select\n            can-enable-admin-mode="$ctrl.canEnableAdminMode"\n            is-admin-mode-enabled="$ctrl.state.isAdminModeEnabled"\n            on-admin-view-change="$ctrl.onAdminViewChange"\n            set-admin-mode="$ctrl.setAdminMode"\n            ng-if="$ctrl.isKansoEnabled"\n            ng-show="false">\n          </view-as-select>\n          <span ng-if="$ctrl.canEnableAdminMode && !$ctrl.isKansoEnabled">\n            <span>\n              {{:: \'library.viewAs\' | i18nText }} &nbsp;\n            </span>\n            <md-select name="viewAs" class="library-browser-container__view-as__dropdown"\n              aria-label="{{:: \'library.viewAs\' | i18nText }}"\n              ng-model="$ctrl.state.isAdminModeEnabled" ng-change="$ctrl.onAdminViewChange()">\n              <md-option ng-value="false"> {{:: \'library.viewAsMe\' | i18nText }} </md-option>\n              <md-option ng-value="true"> {{:: \'library.viewAsContentAdmin\' | i18nText }} </md-option>\n            </md-select>\n          </span>\n        </div>\n      </ng-form>\n      <library-browser state="$ctrl.state" actions="$ctrl.actions"></library-browser>\n    </load-placeholder>\n  '};class b_{constructor(e,t){this.persistRouterTransition=e=>(this.view.currentStateName=e.to,this.view.params=Object.assign({},e.params),!0),this.workspace=e.getWorkspace(g.applicationState.params.workspaceId);const i=this.workspace.findView(F.WORKSPACE.VIEWS.LIBRARY.type);this.view=i||t.createView({currentStateName:g.applicationState.name,params:g.applicationState.params}),this.workspace.setCurrentView(this.view);const r={to:g.applicationState.name,params:g.applicationState.params};this.persistRouterTransition(r)}}b_.$inject=["workspacesService","libraryWorkspaceViewService"];const E_=["$stateParams",e=>Object.assign({},e,{contextType:"users"===e.folderId?"folder":"root",folderId:e.folderId?"users"===e.folderId?e.folderId:parseInt(e.folderId,10):void 0,selectedItemId:e.selectedItemId?parseInt(e.selectedItemId,10):void 0,timestamp:e.timestamp?e.timestamp:-1,q:e.q?decodeURIComponent(e.q):void 0})],T_=[{name:"app.library",url:"/library",template:'<div class="library-tab"><div class="library-tab__view" ui-view></div></div>',defaultSubstate:"app.library.root",controller:b_,params:{timestamp:-1}},{name:"app.library.root",url:"/:selectedItemId",component:"libraryBrowserContainer",resolve:{params:E_},params:{context:"personal",selectedItemId:{value:null,squash:!0}}},{url:"/org",name:"app.library.org",component:"libraryBrowserContainer",resolve:{params:E_},params:{context:"org"}},{name:"app.library.search",url:"/search/{context:personal|org}?:q",resolve:{params:E_},params:{context:"personal"},component:"libraryBrowserContainer"},{name:"app.library.folder",url:"/folder/:folderId/:selectedItemId",resolve:{params:E_},params:{selectedItemId:{value:null,squash:!0}},component:"libraryBrowserContainer"}],x_=[{display:"Folders",query:"type:folder",regex:"type:folder",icon:F.CONTENT_TYPE_ICONS.FOLDER},{display:"Log Searches",query:"type:search",regex:"type:search",icon:F.CONTENT_TYPE_ICONS.SAVED_SEARCH},{display:"Metrics",query:"type:metrics",regex:"type:metrics",icon:F.CONTENT_TYPE_ICONS.METRICS},{display:"Scheduled Searches",query:"is:scheduled",regex:"is:scheduled",icon:F.CONTENT_TYPE_ICONS.SCHEDULED_SEARCH},{display:"Dashboards",query:"type:dashboard",regex:"type:dashboard",icon:F.CONTENT_TYPE_ICONS.DASHBOARD},{display:"Dashboards (New)",query:"is:dashboard-new",regex:"is:dashboard-new",icon:F.CONTENT_TYPE_ICONS.NEWBOARD},{display:"Public Dashboards",query:"is:world",regex:"is:world",icon:F.CONTENT_TYPE_ICONS.DASHBOARD},{display:"Allowlist Dashboards",query:"is:allowlist",regex:"is:allowlist",icon:F.CONTENT_TYPE_ICONS.DASHBOARD}],C_={display:"Lookup Tables",query:"type:lookups",regex:"type:lookups",icon:F.CONTENT_TYPE_ICONS.LOOKUP},A_={display:"Created By",query:"createdBy:",regex:"createdBy:[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*",icon:"user"},w_={display:"Shared With",query:"sharedWith:",regex:"sharedWith:[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*",icon:"users"},I_=[A_,w_],R_=["type:","is:","createdBy:","in:","sharedWith:"],D_={ROOT:{message:"library.emptyRoot",description:"library.emptyRootDescription",image:"images/svg/landscapes/desert.svg"},ORG:{message:"library.emptyRoot",description:"library.emptyOrgDescription",image:"images/svg/landscapes/desert.svg"},PERSONAL:{message:"library.emptyPersonal",description:"library.emptyPersonalDescription",image:"images/library/desert-small.png"},FOLDER:{message:"library.emptyFolder",description:"library.emptyFolderDescription",image:"images/library/desert-small.png"},SEARCH:{message:"library.emptySearchResults",description:"library.emptySearchResultsDescription",image:"images/svg/landscapes/desert.svg"},FAVORITES:{message:"library.emptyFavorites",description:"library.emptyFavoritesDescription",image:"images/library/no-favorites.png"},RECENT:{message:"library.emptyRecent",description:"library.emptyRecentDescription",image:"images/svg/landscapes/desert.svg"},RECENT_SHARED:{message:"library.emptyRecentShared",description:"library.emptyRecentSharedDescription",image:"images/svg/landscapes/desert.svg"}},O_=[{display:"Me",regex:"",query:"me"},{display:"Org",regex:"",query:"org"}],N_=1,M_=2,k_=3,L_=4,P_=[{itemType:"folder",icon:"folder",label:"New Folder",id:"folder"},{itemType:"lookup",icon:"lookups",label:"New Lookup",id:"lookups"}];var F_=i(59922);var U_=i(70501),V_=i(16826);const B_={root:{contextType:"root",mode:"folder",emptyState:D_.PERSONAL},org:{contextType:"root",mode:"folder",emptyState:D_.ORG},folder:{contextType:"folder",mode:"folder",emptyState:D_.FOLDER},search:{contextType:"search",mode:"search",emptyState:D_.SEARCH}},$_=_.indexBy(T_,(({name:e=""})=>e.split(".").pop()||""));class H_{constructor(e,t,i,r,n,a,s,o){this.contentServiceFactory=e,this.libraryPathHelper=t,this.$q=i,this.$mdToast=r,this.logService=n,this.httpBucketServiceFactory=a,this.i18n=s,this.menuService=o,this.clearContentServiceHttpBucket=()=>{this.contentServiceFactory.getInstance().clearBucket()},this.goToSearch=e=>{this.navigate({q:e,context:this.state.context})},this.changeContext=e=>this.navigate({context:e,q:this.state.searchString,folderId:void 0}),this.open=e=>{if(e.type===F.CONTENT_TYPES.FOLDER)this.navigate({folderId:e.id<0?e.name.toLowerCase():e.id});else{const t=this.contentServiceFactory.getInstance().getRoute(e);this.logService.user({module:"library",action:"openItem",source:"library"}),g.contentActionNotificationService.notify({actionType:re.ContentActionType.PRE_OPEN,items:[e]}),g.applicationState.go(t.stateName,t.params)}return this.state},this.openFolderById=e=>{this.navigate({folderId:e,selectedItemId:null})},this.showFolderMenu=(e,t)=>{if(e.stopPropagation(),t.id){return this.contentServiceFactory.getInstance().getFolder(t.id).then((t=>this.runChildrenContextMenuAction(e,t)))}},this.isLookupLimitExceeded=e=>Boolean(e.tableCapacityRemaining<=0),this.changeLookupMenuStatus=(e,t)=>{if(t){const i=e.findIndex((e=>"lookup"===e.itemType));this.isLookupLimitExceeded(t)?(e[i].shortcutLabel=this.i18n.get("lookupTables.lookupLimit.limitExceeded"),e[i].isDisabled=Promise.resolve(!0),e[i].helperText=0===Number(t.tablesCreated-t.totalTableCapacity)?this.i18n.get("lookupTables.lookupLimit.lookupsJustExceededTooltip",t.totalTableCapacity):this.i18n.get("lookupTables.lookupLimit.lookupsAlreadyExceededTooltip",t.totalTableCapacity,Number(t.tablesCreated-t.totalTableCapacity))):(e[i].shortcutLabel=this.i18n.get("lookupTables.lookupLimit.lookupsCapactiyRemaining",null==t?void 0:t.tableCapacityRemaining),e[i].isDisabled=Promise.resolve(!1),e[i].helperText=this.i18n.get("lookupTables.lookupLimit.lookupsRemainingTooltip",null==t?void 0:t.totalTableCapacity,null==t?void 0:t.tablesCreated))}},this.showSelectionMenu=e=>{const t=e.currentTarget;return this.getDestinationFolder().then((i=>{const r={folder:()=>{this.showNewFolderDialog(e)},lookup:()=>{(e=>{const t=(0,re.idGenerator)("lt-xxxxxxxx");(0,F_.T8)("app.lookup-view",{viewId:t,path:e&&e.path,parentFolderId:e&&e.parentFolderId})})({path:i.path,parentFolderId:i.id})}},n=E.currentUserHelper.hasFeatureFlag("UILookupContentLimit"),a={offset:{top:t.offsetHeight+16,left:n?t.offsetWidth-240:t.offsetWidth-180},width:"initial",positionMode:{left:"target",top:"target"}},s=[...P_];if(E.currentUserHelper.hasFeatureFlag("UILookupContentLimit"))return(0,U_.Vz)().then((e=>{this.changeLookupMenuStatus(s,e)})).finally((()=>this.menuService.showMenu(e,s,a).then((e=>r[e.itemType]()))));return this.menuService.showMenu(e,s,a).then((e=>r[e.itemType]()))}))},this.searchContent=(e,t)=>this.contentServiceFactory.getInstance().getSearchResults(t).then((e=>({folder:this.libraryPathHelper.replaceSearchPath(e),searchString:t,emptyState:this.getEmptyState(e,B_.search.contextType)}))).catch((e=>{const i={children:[]};return{folder:i,searchString:t,emptyState:this.getEmptyState(i,B_.search.contextType)}})),this.runHeaderContextMenuAction=(e,t)=>this.runContextMenuAction(e,F.ACTION_MENU_CONTEXTS.LIBRARY_FOLDER,t),this.runChildrenContextMenuAction=(e,...t)=>this.runContextMenuAction(e,F.ACTION_MENU_CONTEXTS.LIBRARY_CHILDREN,...t),this.runDetailsContextMenuAction=(e,...t)=>this.runContextMenuAction(e,F.ACTION_MENU_CONTEXTS.DETAILS_PANEL,...t),this.runContextMenuAction=(e,t,...i)=>(0,g.showLibraryContextMenu)(e,t,...i).then((e=>this.runAction(e,...i))),this.runAction=(e,...t)=>{const[i]=t;return E.currentUserHelper.hasFeatureFlag("UISearchEditSearchDialogReact")&&e.actionType===re.ContentActionType.EDIT&&i.type===F.CONTENT_TYPES.SAVED_SEARCH?(0,xh.renderEditSearchDialogFromLibrary)({searchItem:i,actionCommand:e}):g.libraryActionsService.runAction(e,...t)},this.onActionResult=e=>{const{actionType:t,items:i,destinationFolderId:r}=e;switch(this.httpBucketServiceFactory.getBucket("contentBucket").clearAll(),t){case re.ContentActionType.EDIT:case re.ContentActionType.SHARE:case re.ContentActionType.UNSHARE:case re.ContentActionType.FAVORITE:case re.ContentActionType.UNFAVORITE:case re.ContentActionType.RUN_AS:this.updateItem(i[0]);break;case re.ContentActionType.DELETE:let e;const t=this.state.folder?this.state.folder.path:[];_.each(i,(i=>{if(!e){const r=_.findIndex(t,(e=>i.id===e.id));e=r>0?t[r-1].id:void 0}return this.deleteItem(i)})),e&&this.openFolderById(e);break;case re.ContentActionType.MOVE:if("search"===this.state.mode){_.each(i,(e=>this.updateItem(e)));break}r===this.state.folder.id?_.each(i,(e=>this.addItem(e))):_.each(i,(e=>this.deleteItem(e)));break;case re.ContentActionType.CREATE:case re.ContentActionType.COPY:r===this.state.folder.id&&this.addItem(i[0]);break;case re.ContentActionType.IMPORT:r===this.state.folder.id&&this.fetchFolder(r)}},this.selectItems=e=>this.updateState({selectedItems:e}),this.clearSelection=()=>this.updateState({selectedItems:[]}),this.isRootFolder=()=>_.isUndefined(_.getPath(this.state,"folder.id")),this.getDestinationFolderId=()=>this.getDestinationFolder().then((e=>e.id)),this.getDestinationFolder=()=>{if(this.isRootFolder()){return this.contentServiceFactory.getInstance().getPersonal()}return this.$q.resolve(this.state.folder)},this.showNewFolderDialog=e=>this.getDestinationFolderId().then((t=>{g.libraryActionsService.runAction({actionType:re.ContentActionType.CREATE,event:e,params:{destinationFolderId:t,type:F.CONTENT_TYPES.FOLDER}}).then((e=>{this.openFolderById(e.items[0].id)}))})),this.showImportDialog=e=>g.libraryActionsService.runAction({actionType:re.ContentActionType.IMPORT,event:e,params:{destinationFolderId:this.state.folder.id}}),this.openHeaderMenu=e=>{(0,g.showLibraryContextMenu)(e,F.ACTION_MENU_CONTEXTS.LIBRARY_FOLDER,this.state.folder).then((e=>g.libraryActionsService.runAction(e,this.state.folder)))},this.i18nKeyedErrors=this.i18n.get("keyederrors"),this.state={folder:void 0,selectedItems:[],mode:"folder"},this.state$=new V_.Subject,this.doNav$=new V_.Subject,this.subscriptions=[this.doNav$.do((e=>this.previewNextState(e))).switchMap((e=>V_.Observable.fromPromise(this.fetchNextState(e)))).subscribe((e=>{this.updateState(e)})),g.contentActionNotificationService.getContentActionResult$().subscribe((e=>this.onActionResult(e))),g.contentAdminModeStateService.getState$().subscribe((e=>this.updateState({isAdminModeEnabled:e})))]}$onDestroy(){this.subscriptions&&(_.each(this.subscriptions,(e=>e.dispose())),this.subscriptions=void 0)}getState$(){return this.state$.startWith(this.state)}getState(){return this.state}getLibraryActions(){return{showNewFolderDialog:this.showNewFolderDialog,showImportDialog:this.showImportDialog,openHeaderMenu:this.openHeaderMenu,clearSelection:this.clearSelection,search:this.goToSearch,select:this.selectItems,open:this.open,openFolderById:this.openFolderById,runHeaderContextMenuAction:this.runHeaderContextMenuAction,runChildrenContextMenuAction:this.runChildrenContextMenuAction,runDetailsContextMenuAction:this.runDetailsContextMenuAction,runAction:this.runAction,changeContext:this.changeContext,isRootFolder:this.isRootFolder,showFolderMenu:this.showFolderMenu,showSelectionMenu:this.showSelectionMenu}}navigate(e){const t=this.buildTransition(e);if(t){let e;this.doNav$.onNext(t),e="root"===t.contextType&&"org"===t.params.context?$_[t.params.context]:$_[t.contextType],g.applicationState.go(e.name,t.params)}return this.$q.when(this.state)}buildTransition(e){let t;return t=e.q?{contextType:"search",params:e}:e.folderId>-1||"string"==typeof e.folderId?{contextType:e.folderId?"folder":"root",params:e}:{contextType:"root",params:e},t&&t.params&&!t.params.timestamp&&(t.params.timestamp=Date.now()),t}isAtState(e){return-1!==e&&e===this.state.timestamp}previewNextState(e){const t=Object.assign({},B_[e.contextType],{folder:void 0,selectedItems:void 0,emptyState:void 0,searchString:e.params&&e.params.q,context:e.params&&e.params.context,timestamp:e.params&&e.params.timestamp});return this.updateState(t)}fetchNextState(e){let t;switch(e.contextType){case"root":t=this.fetchRootFolder(this.state.context,e.params.selectedItemId);break;case"folder":t=this.fetchFolder(e.params.folderId,e.params.selectedItemId);break;case"search":t=this.searchContent(e.params.context,e.params.q)}return t}fetchRootFolder(e,t){return this.contentServiceFactory.getInstance().getRoot().then((e=>({folder:e,emptyState:this.getEmptyState(e,B_.root.contextType),selectedItems:_.filter(e.children,(e=>e.id===t))})))}fetchFolder(e,t){return this.contentServiceFactory.getInstance().getFolder(e).then((e=>{const i=e.path&&e.path.length>0&&"Org"===e.path[0].name?"org":"personal";return this.updateState({folder:e,emptyState:this.getEmptyState(e,B_.folder.contextType),context:i,selectedItems:_.filter(e.children,(e=>e.id===t))})})).catch((e=>{const t=this.i18nKeyedErrors[_.chain(e.keyedErrors).keys().first().value()]||_.pluck(e.errors,"message").join(". ");return this.$mdToast.show(this.$mdToast.error().textContent(t)),this.navigate({})}))}deleteItem(e){let t=this.state.folder.children;const i=this.findChildrenIdx(e.id);if(i>-1){let r;return t=[...t.slice(0,i),...t.slice(i+1)],t.length||(r=g.FolderConverter.isPersonal(this.state.folder)?D_.PERSONAL:D_.FOLDER),this.updateState({folder:Object.assign({},this.state.folder,{children:t}),selectedItems:_.without(this.state.selectedItems,e),emptyState:r})}return this.state}updateItem(e){const t=this.state.folder.children;let i,r;const n=this.findChildrenIdx(e.id);n>-1&&(i={folder:Object.assign({},this.state.folder,{children:g.FolderConverter.sortChildren([...t.slice(0,n),e,...t.slice(n+1)])})});const a=this.state.selectedItems,s=_.findIndex(a,(t=>t.id===e.id));return s>-1&&(r={selectedItems:[...a.slice(0,s),e,...a.slice(s+1)]}),this.updateState(Object.assign({},i,r))}addItem(e){const t=this.state.folder.children;return this.updateState({folder:Object.assign({},this.state.folder,{children:g.FolderConverter.sortChildren([e,...t])})})}findChildrenIdx(e){const t=this.state.folder.children;return _.findIndex(t,(t=>t.id===e))}getEmptyState(e,t){let i;if(!e||!e.children||0===e.children.length){const r=e&&"Org"===e.name?"org":t;i=B_[r].emptyState}return i}updateState(e){return this.state=Object.assign({},this.state,e),this.state$.onNext(this.state),this.state}}H_.$inject=["contentServiceFactory","libraryPathHelper","$q","$mdToast","logService","httpBucketServiceFactory","i18n","menuService"];var W_=i(86531),q_=i.n(W_);class j_{constructor(e){this.$element=e}$onChanges(e){e.currentContext&&(this.selectedContext=_.find(this.contexts,{name:this.currentContext}))}$onInit(){this.$element.addClass("library-tab-header-view")}}j_.$inject=["$element"];const Q_={controller:j_,bindings:{state:"<",actions:"<",contexts:"<",currentContext:"<"},template:'\n    <ng-form class="library-tab-header-view__context"\n      ng-if="$ctrl.selectedContext.allowDropDownSelection" md-theme="formTheme">\n      <md-input-container class="library-tab-header-view__context__input md-block">\n        <md-select ng-model="$ctrl.state.context"\n          ng-change="$ctrl.actions.changeContext($ctrl.state.context)"\n          class="-dark library-tab-header-view__context__select"\n          ng-attr-aria-label="{{ ::\'library.rootContext\' | i18nText }}"\n          aria-label="Context">\n          <md-option ng-repeat="context in $ctrl.contexts track by context.name" ng-value="context.name">\n            <div class="library-tab-header-view__context__option-container">\n              <span>{{::context.label | i18nText}}</span>\n            </div>\n          </md-option>\n        </md-select>\n      </md-input-container>\n    </ng-form>\n    <div class="library-tab-header-view__search-wrapper">\n      <content-search class="library-tab-header-view__search -dark" ng-if="$ctrl.selectedContext.allowSearch"\n        query="{{$ctrl.state.filter}}" actions="$ctrl.actions"></content-search>\n      <div class="library-tab-header-view__label" ng-if="$ctrl.selectedContext.allowLabelAsHeader">\n        {{::$ctrl.selectedContext.headerLabel | i18nText}}\n      </div>\n      <ux-icon-button ng-if="$ctrl.selectedContext.allowMenuSelection && $ctrl.actions.allowMenuVisible()"\n        class="library-tab-header-view__menu"\n        svg="true" icon="menu"\n        ng-click="$ctrl.actions.showContextMenuOptions($event, selectedContext)">\n      </ux-icon-button>\n    </div>\n  '};class z_{constructor(e){this.ROOT_FOLDER_TITLE=e.get("content.allContent"),this.SEARCH_FOLDER_TITLE=e.get("content.searchResults")}addChildrenPath(e,t){return Object.assign({},e,{path:[...t,{id:e.id,name:e.name}]})}replaceSearchPath(e){return Object.assign({},e,{path:[{id:e.id,name:this.SEARCH_FOLDER_TITLE}]})}}z_.$inject=["i18n"];class G_{constructor(e,t){this.i18n=e,this.currentUserHelper=t,this.DAY_OF_WEEK_MAPPING=this.formatFn(g.scheduleFrequencyWeeklyOptions.concat(g.scheduleFrequencyDailyOptions)),this.scheduleAlertOptions=g.scheduleAlertOptions,t.hasFeatureFlag("UILookupsSchedulingOption")&&!this.scheduleAlertOptions.some((e=>e.value===F.ScheduleAlertType.SAVE_TO_LOOKUP))&&this.scheduleAlertOptions.push((0,g.option)(F.ScheduleAlertType.SAVE_TO_LOOKUP,"savedSearch.ALERT_LOOKUP")),this.scheduleAlertOptions=this.formatFn(this.scheduleAlertOptions)}formatFn(e){return _.object(_.map(e,(({label:e,value:t})=>[t,this.i18n.get(e)])))}getScheduleText(e){return e.scheduleType+(e.scheduleType===F.ScheduleFrequencyType.CUSTOM?" ( "+e.cronSchedule+" )":"")}getFriendlyTimezone({timeZone:e}){let t=e;const i=_.findWhere(re.TimeZoneService.getTimeZoneDropdownOptions(),{value:e});return i&&(t=i.key),t}convertThreshold(e){let t=e;const i=" ";return e.indexOf(i+F.ScheduleAlertConditionOperator.EQUAL_TO)>-1?t=e.replace(i+F.ScheduleAlertConditionOperator.EQUAL_TO,i+this.i18n.get("contentLibrary.EQUAL_TO")):e.indexOf(i+F.ScheduleAlertConditionOperator.GREATER_THAN)>-1?t=e.replace(i+F.ScheduleAlertConditionOperator.GREATER_THAN,i+this.i18n.get("contentLibrary.GREATER_THAN")):e.indexOf(i+F.ScheduleAlertConditionOperator.GREATER_THAN_EQUAL_TO)>-1?t=e.replace(i+F.ScheduleAlertConditionOperator.GREATER_THAN_EQUAL_TO,i+this.i18n.get("contentLibrary.GREATER_THAN_EQUAL_TO")):e.indexOf(i+F.ScheduleAlertConditionOperator.LESSER_THAN)>-1?t=e.replace(i+F.ScheduleAlertConditionOperator.LESSER_THAN,i+this.i18n.get("contentLibrary.LESS_THAN")):e.indexOf(i+F.ScheduleAlertConditionOperator.LESSER_THAN_EQUAL_TO)>-1&&(t=e.replace(i+F.ScheduleAlertConditionOperator.LESSER_THAN_EQUAL_TO,i+this.i18n.get("contentLibrary.LESS_THAN_EQUAL_TO"))),t}getThreshold(e){return this.convertThreshold(e.shouldRespectMessageThreshold?sprintf(this.i18n.get("contentLibrary.info_threshold"),e.messageThresholdType,e.messageThreshold):this.i18n.get("contentLibrary.info_threshold_all"))}getAlertType(e){return Object.keys(e.notificationDetails)[0]}getAlertLabel(e){return this.scheduleAlertOptions[this.getAlertType(e)]||this.i18n.get("contentLibrary.alert_type_error")}getEmailsOnFailure(e){return e.muteErrorEmails?this.i18n.get("common.no"):this.i18n.get("common.yes")}showEmailOnFail(e){return this.currentUserHelper.hasFeatureFlag("UIAllowToggleFailureEmails")&&this.getAlertType(e)===F.ScheduleAlertType.EMAIL}getEmailRecipients(e){const t=e.notificationDetails[F.ScheduleAlertType.EMAIL];if(t)return t.emailRecipients.join(", ")}getScriptInfo(e){const t=e.notificationDetails[F.ScheduleAlertType.SOURCE];if(t)return sprintf(this.i18n.get("contentLibrary.info_script_data"),t.collectorName,t.bladeName)}getSnowConnection(e){const t=e.notificationDetails[F.ScheduleAlertType.SERVICE_NOW];if(t)return sprintf(this.i18n.get("contentLibrary.info_snow_connection"),t.snowNode,t.snowSeverity,t.snowResource,t.snowType)}getViewName(e){const t=e.notificationDetails[F.ScheduleAlertType.SAVE_TO_VIEW];if(t)return SumoUtil.encode(t.viewName)}}G_.$inject=["i18n","currentUserHelper"];class K_{constructor(e,t,i){this.$element=e,this.$q=t,this.viewServices=i,this.responsePending=!1}submit(){return this.responsePending=!0,this.typeService.update(this.item,this.editableItem,void 0,void 0,this.viewServices.getServiceForContentItem(this.item.type)).then((e=>this.actions.resolve(e)),(e=>(this.errors=e.errors,this.$q.reject(e)))).finally((()=>this.responsePending=!1))}$onInit(){return this.$element.addClass("edit-content-item library-action-view"),this.typeService.fetch(this.item).then((e=>{this.editableItem=Object.assign({},e)}))}}K_.$inject=["$element","$q","viewServices"];const Y_={bindings:{typeService:"<",commonService:"<",actions:"<",item:"<",attributeMapping:"<"},controller:K_,template:'\n    <form name="editContentItem" class="library-action-view__content -form" md-theme="formTheme"\n      ng-submit="$ctrl.submit()" novalidate>\n      <div class="form-errors-container" ng-if="$ctrl.errors.length > 0">\n        <form-errors class="form-errors-container__errors" errors="$ctrl.errors"></form-errors>\n      </div>\n      <load-placeholder loading="$ctrl.editableItem">\n        <md-input-container class="md-block">\n          <label>{{:: \'common.name\' | i18nText}}</label>\n          <input name="name" ng-model="$ctrl.editableItem[$ctrl.attributeMapping.name]"\n          name-validate required md-autofocus maxlength="255"/>\n          <div ng-messages="editContentItem.name.$error">\n            <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n            <div ng-message="nameValidate">{{:: \'library.invalidField\' | i18nText }}</div>\n          </div>\n        </md-input-container>\n        <md-input-container class="md-block">\n          <label>{{:: \'common.description\' | i18nText}}</label>\n          <textarea ng-model="$ctrl.editableItem[$ctrl.attributeMapping.description]"></textarea>\n        </md-input-container>\n      </load-placeholder>\n      <div class="library-action-view__actions">\n        <md-button class="md-raised md-primary md-button" ng-click="$ctrl.actions.cancel()">\n          {{:: \'common.cancel\' | i18nText}}\n        </md-button>\n        <md-button type="submit" class="md-raised md-accent md-button" ng-disabled="!editContentItem.$valid || editContentItem.$pristine">\n          <span ng-switch="$ctrl.responsePending">\n            <div ng-switch-when="true" class="spinner is-visible"></div>\n            <span ng-switch-default> {{:: \'common.update\' | i18nText}} </span>\n          </span>\n        </md-button>\n      </div>\n    </form>\n  '};var Z_=i(64525),X_=i(43448),J_=i(11717),eS=i(16826);class tS{constructor(e,t,i,r,n,a,o,l,c){this.$q=e,this.$element=t,this.i18n=i,this.$scope=r,this.$timeout=n,this.$mdToast=a,this.runAsConflictHandlerService=o,this.userService=l,this.contentLoggingNotificationService=c,this.requiredItems=[this.i18n.get("search.parameters").value],this.treId="treInputSavedSearch",this.isSchedulerVisible=!1,this.responsePending=!1,this.blockFrequentTierSearch=!1,this.fetchScannedBytesForSearch=!1,this.initialQuery="",this.searchQueryValidatingForAggregation=!1,this.frequentPartitions=[],this.warningReason="",this.paramsDisplayStyleProps={margin:"24px",theme:"regular"},this.shouldUpdateScannedBytes=!1,this.isEditorReact=!1,this.position={my:"left center+4",at:"right bottom"},this.searchValidationFailure=e=>{this.$scope.$applyAsync((()=>{this.showErrorToast(e.message)}))},this.hideErrorToast=()=>{this.$mdToast.hide(this.errorToast)},this.onParamsRetrieve=e=>{const{parameters:t,paramPositionMap:i}=g.searchParametersService.createParamPositionMap(e.paramPosition,this.editableItem.parameters);this.editableItem.parameters=t,_.isFunction(this.actions.onQueryStringChange)&&this.actions.onQueryStringChange(e.editorContext,i),this.stateFetchingParams=!1},this.updatedQueryInSearchStore=()=>{var e;E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")&&Te.store.dispatch((0,J_.updateQueryStringAction)({id:"search_save_"+(null===(e=this.scannedBytesObj)||void 0===e?void 0:e.queryId),queryString:this.editableItem.query.queryString}))},this.updateTimeRange=e=>{this.editableItem.query.timeRange=e.value},this.setDirty=e=>{e.$setDirty&&e.$setDirty(),e.$setTouched&&e.$setTouched(),s.forEach(e.$error,(e=>s.forEach(e,this.setDirty)))},k.logService.userTelemetry("Angular edit search dialog opening"),this.setupQueryToParamStream(),this.editorConfig=f.searchQueryEditorService.getDefaultEditorConfig();const d=F.SEARCH_MODES;this.dropdowns={searchModes:{elements:_.map(d,(e=>({value:e.value,label:this.i18n.get(e.label),hint:this.i18n.get(e.hint)}))),handleChange:e=>{this.$scope.$applyAsync((()=>{this.editableItem.autoParsingInfo={mode:e.target.value},this.isNonAggregateQueryInAutoParse()}))}},receiptTime:{elements:_.map(F.SEARCH_BY,(e=>({value:e.value,label:this.i18n.get(e.label),hint:this.i18n.get(e.hint)}))),handleChange:e=>{this.$scope.$applyAsync((()=>{this.editableItem.byReceiptTime=Boolean(e.target.value)}))}}},this.onSearchQueryExpressionEditorInputChanges=this.onSearchQueryExpressionEditorInputChange.bind(this),this.isEditorReact=E.currentUserHelper.hasFeatureFlag("UISearchExpressionEditorReact"),this.isNonAggregateQueryInAutoParseOnBlur=this.isNonAggregateQueryInAutoParse.bind(this)}createNewSchedule(){return{scheduleType:F.ScheduleFrequencyType.NEVER,cronSchedule:"",displayableTimeRange:this.getTimeRangeInterval(),parseableTimeRange:this.getParsedTimeRange(),shouldRespectMessageThreshold:!1,messageThresholdType:F.ScheduleAlertConditionOperator.GREATER_THAN,timeZone:E.currentUserHelper.getUserSetting("timeZone")||re.TimeZoneService.getBrowserTimeZone(),muteErrorEmails:!1}}validateIfSearchSchedulable(){var e,t;const i=this.editableItem.query.queryString,r=g.searchParametersService.extract(this.editableItem.parameters);if(this.checkIfSaveQuery(i)&&(null===(t=null===(e=this.schedule)||void 0===e?void 0:e.notificationDetails)||void 0===t?void 0:t.savetolookup))return this.searchValidationFailure({message:this.i18n.get("savedSearch.SAVE_TO_LOOKUP_ERROR")}),this.responsePending=!1,Promise.reject();const n=this.editableItem.autoParsingInfo;return this.editableItem.parameters=r,o_.searchQueryValidationService.validate(i,r,n)}setStateWaitingForParams(){this.hideErrorToast(),this.stateFetchingParams=!0}setupQueryToParamStream(){this.queryStringSubject=new eS.Subject,this.queryStringSubject.takeUntilScopeDestroyWithSafeApply(this.$scope,(()=>this.setStateWaitingForParams())).subscribe(),g.searchParametersService.getParams$(this.queryStringSubject).takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>this.onParamsRetrieve(e))).subscribe()}showErrorToast(e){const t=this.$mdToast.error().textContent(e);this.errorToast=this.$mdToast.show(t)}showValidationInfoToast(){const e=this.$mdToast.info().textContent(this.i18n.get("search.validating"));this.infoToast=this.$mdToast.show(e)}validateDataAccessLevel(){const e=this.$q.defer(),t=parseInt(E.currentUserHelper.get().id,10);return g.contentSearchService.fetchContentItem(this.item.referenceId).then((i=>{let r=i.runAsIdOverride;if(_.isNull(r)&&(r=this.item.creator.id),t===r)return e.resolve(!0);this.userService.getUsers().then((()=>{const i=this.userService.getUserById(r),n=this.userService.getUserById(t);if(i&&n){this.userService.compareFilterPredicatesForDataAccessWithSpecialCase(n,i)?e.resolve(!0):(this.runAsConflictHandlerService.showPermissionConflictDialog(this.item,this.editableItem).then((e=>{const{actionType:t}=e;if(t===re.ContentActionType.RUN_AS){this.responsePending=!1,this.$mdToast.show(this.$mdToast.success().textContent(this.i18n.get("savedSearch.SUCCESS_SAVE")));const i=_.first(e.items);this.contentLoggingNotificationService.logAndNotify(t,[i],e)}})),e.resolve(!1))}else this.searchValidationFailure({message:this.i18n.get("savedSearch.ERROR_SAVE")}),e.resolve(!1)}))})),e.promise}checkIfSaveQuery(e){return(0,re.findPartsOfQuery)(e).filter((e=>"normal"===e.type)).map((e=>e.val)).join(" ").split("|").some((e=>"save"===(0,X_.Z)(e).split(" ")[0]))}validateSearchQuery(){var e,t;this.hideErrorToast(),this.showValidationInfoToast(),this.searchQueryValidating=!0;const i=this.editableItem.query.queryString,r=g.searchParametersService.extract(this.editableItem.parameters);if(this.checkIfSaveQuery(i)&&(null===(t=null===(e=this.schedule)||void 0===e?void 0:e.notificationDetails)||void 0===t?void 0:t.savetolookup))return this.searchValidationFailure({message:this.i18n.get("savedSearch.SAVE_TO_LOOKUP_ERROR")}),this.searchQueryValidating=!1,this.responsePending=!1,Promise.reject();const n=this.editableItem.autoParsingInfo;return this.editableItem.parameters=r,o_.searchQueryValidationService.validate(i,r,n).finally((()=>{this.searchQueryValidating=!1}))}updateSchedule(){this.getSchedule()||delete this.editableItem.schedules}saveSearch(e){return this.typeService.update(this.item,this.editableItem,e,this.isQueryEdited()).then((e=>{this.responsePending=!1,this.$mdToast.show(this.$mdToast.success().textContent(this.i18n.get("savedSearch.SUCCESS_SAVE"))),this.actions.resolve(e)})).catch((e=>{var t,i,r;if(null===(t=e.keyedErrors)||void 0===t?void 0:t["content1:permission_denied"])return this.runAsConflictHandlerService.showPermissionConflictDialog(this.item).then((e=>{const{actionType:t}=e;if(t===re.ContentActionType.RUN_AS){this.responsePending=!1,this.$mdToast.show(this.$mdToast.success().textContent(this.i18n.get("savedSearch.SUCCESS_SAVE")));const i=_.first(e.items);this.contentLoggingNotificationService.logAndNotify(t,[i],e)}}));if(null===(r=null===(i=e.keyedErrors)||void 0===i?void 0:i["ss:real_time_alert_invalid_search"])||void 0===r?void 0:r.values)this.searchValidationFailure({message:sprintf(this.i18n.get("errors.create_scheduled_error"),e.keyedErrors["ss:real_time_alert_invalid_search"].values)});else{const t=(0,xh.getConflictFromErrorResponse)(e);t?(0,xh.createSearchConflictHandler)({conflictActions:{onDiscard:()=>this.actions.cancel(),onOverride:()=>this.submit(!0)},conflictProps:t}):this.searchValidationFailure({message:e.message||""})}}))}showWarnings(){const e=[{text:"frequent"===this.warningReason?this.i18n.get("savedSearch.SCHEDULING_WARNING_FREQUENT"):this.i18n.get("savedSearch.SCHEDULING_WARNING_NONAGG"),status:"default",multiline:!1}],t=document.getElementById("frequent-query-warning-container");t&&(0,R.showInlineNotification)(e,t)}validateAndSaveSearch(e=!1){return this.responsePending=!0,this.validateSearchQuery().then((()=>{this.updateSchedule(),E.currentUserHelper.hasFeatureFlag("UIScheduledSearchDataAccessLevel")&&this.editableItem.schedules&&(this.isQueryEdited()||this.isScheduleEdited())?this.validateDataAccessLevel().then((t=>{t&&this.saveSearch(e)})):this.saveSearch(e)})).catch(this.searchValidationFailure)}next(){(0,Z_.checkWarningMsg)(this.$element,this.submit.bind(this))}submit(e=!1){return this.responsePending=!0,this.validateAndSaveSearch(e).finally((()=>{this.responsePending=!1}))}getSchedule(){if(this.isSearchScheduled())return this.editableItem.schedules[0]}removeScannedBytesObj(){this.editableItem.scannedBytesObj&&delete this.editableItem.scannedBytesObj}isSearchScheduled(){return this.editableItem&&this.editableItem.schedules&&this.editableItem.schedules.length>=1&&this.editableItem.schedules[0].scheduleType!==F.ScheduleFrequencyType.NEVER}getTimeRangeInterval(){return _.getPath(this,"editableItem.query.timeRange")||"-15m"}getParsedTimeRange(){const e=this.getTimeRangeInterval(),t=ht.timeRangeUtil.parseTimeRangeValue(e);return t&&t.details}createOrEditSchedule(){this.schedule=this.isSearchScheduled()?this.getSchedule():this.createNewSchedule(),this.editableItem.schedules=[this.schedule],this.isSchedulerVisible=!0,(this.isQueryUpdated()||this.fetchScannedBytesForSearch)&&(this.updatedQueryInSearchStore(),this.shouldUpdateScannedBytes=E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent"))}isQueryUpdated(){var e,t,i,r;if(E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")){const n=(null===(t=null===(e=this.originalItem)||void 0===e?void 0:e.query)||void 0===t?void 0:t.queryString)||this.initialQuery,a=this.editableItem.query.queryString;return(null===(r=null===(i=this.originalItem)||void 0===i?void 0:i.query)||void 0===r?void 0:r.queryString)?this.originalItem.query.queryString=a:this.initialQuery=a,n!==a}}closeScheduler(){this.isSchedulerVisible=!1,this.shouldUpdateScannedBytes=!1,this.fetchScannedBytesForSearch=!1}initSavedSearchStore(){var e,t,i,r;E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")&&((0,s.isDefined)(this.scannedBytesObj)?(Te.store.dispatch((0,J_.copyLogQueryAction)({existingId:"search_"+(null===(e=this.scannedBytesObj)||void 0===e?void 0:e.queryId),newId:"search_save_"+(null===(t=this.scannedBytesObj)||void 0===t?void 0:t.queryId)})),this.initialQuery=null===(r=null===(i=this.editableItem)||void 0===i?void 0:i.query)||void 0===r?void 0:r.queryString):(this.scannedBytesObj=Object.assign(Object.assign({},this.scannedBytesObj||{}),{queryId:(0,J_.getUniqueId)()}),this.fetchScannedBytesForSearch=!0))}initPartitionList(){var e;if(E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")){const t=null===(e=Te.store.getState().views.search.partitionState)||void 0===e?void 0:e.data;if(t){const{frequentPartitions:e}=(0,xh.mapPartitionsWithTier)(t);this.frequentPartitions=e}}}onSearchQueryExpressionEditorInputChange(e){this.editableItem.query.queryString=e}$onInit(){this.setupQueryToParamStream(),this.editorConfig=f.searchQueryEditorService.getDefaultEditorConfig();const e=F.SEARCH_MODES;this.dropdowns={searchModes:{elements:_.map(e,(e=>({value:e.value,label:this.i18n.get(e.label),hint:this.i18n.get(e.hint)}))),handleChange:e=>{this.$scope.$applyAsync((()=>{this.editableItem.autoParsingInfo={mode:e.target.value}}))}},receiptTime:{elements:_.map(F.SEARCH_BY,(e=>({value:e.value,label:this.i18n.get(e.label),hint:this.i18n.get(e.hint)}))),handleChange:e=>{this.$scope.$applyAsync((()=>{this.editableItem.byReceiptTime=Boolean(e.target.value)}))}}},this.$element.addClass("edit-saved-search-view library-action-view"),this.typeService.fetch(this.item).then((e=>{this.originalItem=_.cloneDeep(e),this.editableItem=Object.assign({},e),this.schedule=this.getSchedule()})),this.initPartitionList(),this.initSavedSearchStore()}isScheduleEdited(){const e=_.first(this.originalItem.schedules);e&&(e.messageThresholdType=e.messageThresholdType||F.ScheduleAlertConditionOperator.GREATER_THAN);const t=_.first(this.editableItem.schedules);return JSON.stringify(e)!==JSON.stringify(t)}isQueryEdited(){var e,t;return((null===(t=null===(e=this.originalItem)||void 0===e?void 0:e.query)||void 0===t?void 0:t.queryString)||this.initialQuery)!==this.editableItem.query.queryString}showErrorForm(e){e.$valid||(this.isSchedulerVisible=e.scheduleEditor&&!e.scheduleEditor.$valid)}isNonAggregateQueryInAutoParse(){E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")?(this.searchQueryValidatingForAggregation=!0,this.validateIfSearchSchedulable().then((e=>{var t;const i=!e.aggregation&&"intelligent"===(null===(t=this.editableItem.autoParsingInfo)||void 0===t?void 0:t.mode);this.warningReason=i?"nonAgg":"",this.searchQueryValidatingForAggregation=!1}))):this.warningReason=""}checkIfIsNonAggregateQueryInAutoParse(){return"nonAgg"===this.warningReason}checkIfSchedulingSearchDisabled(){var e,t;const i=null===(t=null===(e=this.editableItem)||void 0===e?void 0:e.query)||void 0===t?void 0:t.queryString;return!(!E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")||!i)&&(0,f.checkFeatureForQuery)({query:i,partitions:{frequent:this.frequentPartitions},feature:f.TIER_SPECIFIC_FEATURES.SCHEDULING_SEARCH_DISABLED})}checkIfFrequentQuery(){var e,t;const i=null===(t=null===(e=this.editableItem)||void 0===e?void 0:e.query)||void 0===t?void 0:t.queryString;if(E.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent")&&i){const e=(0,re.getMatchedInfrequentTier)(this.frequentPartitions,i),t=(0,J_.extractMatchedDataTier)(i,!0),r=!(!e&&"frequent"!==t&&"all"!==t);return r&&(this.warningReason="frequent"),r}return!1}}tS.$inject=["$q","$element","i18n","$scope","$timeout","$mdToast","runAsConflictHandlerService","userService","contentLoggingNotificationService"];const iS={controller:tS,bindings:{typeService:"<",commonService:"<",actions:"<",item:"<",editableItem:"<",attributeMapping:"<",scannedBytesObj:"<",position:"<?"},template:'\n    <form novalidate name="editSavedSearch" class="-form library-action-view library-action-view-edged_scroll" md-theme="formTheme"\n      ng-submit="$ctrl.setDirty(editSavedSearch); $ctrl.showErrorForm(editSavedSearch); editSavedSearch.$valid && $ctrl.next()">\n      <div id="frequent-query-warning-container" ng-if="$ctrl.checkIfSchedulingSearchDisabled() || $ctrl.checkIfFrequentQuery() || $ctrl.checkIfIsNonAggregateQueryInAutoParse()">\n        {{$ctrl.showWarnings()}}\n      </div>\n      <div class="library-action-view__content">\n        <div ng-show="!$ctrl.isSchedulerVisible" class="editSavedSearch__with-dynamic-parsing">\n          <load-placeholder loading="$ctrl.editableItem">\n            <md-input-container data-sumo-test="item-name" class="md-block library-action-view__input">\n              <label>{{:: \'common.name\' | i18nText}}</label>\n              <input name="name" ng-model="$ctrl.editableItem[$ctrl.attributeMapping.name]" maxlength="255"\n              name-validate required md-autofocus/>\n              <div ng-messages="editSavedSearch.name.$error">\n                <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n                <div ng-message="nameValidate">{{:: \'library.invalidField\' | i18nText }}</div>\n              </div>\n            </md-input-container>\n            <md-input-container data-sumo-test="item-description" class="md-block library-action-view__input">\n              <label>{{:: \'common.description\' | i18nText}}</label>\n              <textarea ng-model="$ctrl.editableItem[$ctrl.attributeMapping.description]" maxlength="255"></textarea>\n            </md-input-container>\n            <div class="library-action-view__query" data-sumo-test="item-query-queryString">\n              <search-query-params-display\n                ng-if="$ctrl.editableItem.parameters.length"\n                parameters="$ctrl.editableItem.parameters"\n                query-string="$ctrl.editableItem.query.queryString"\n                style-props="$ctrl.paramsDisplayStyleProps">\n              </search-query-params-display>\n              <div ng-if="!$ctrl.editableItem.parameters.length"\n                class="library-action-view__query-header">\n                <label>{{:: \'library.query\' | i18nText}}</label>\n              </div>\n              <search-query-expression-editor name="searchQueryString"\n                ng-if="!$ctrl.isEditorReact && !$ctrl.editableItem.parameters.length"\n                data-sumo-test="item-query-editor"\n                context="$ctrl.editorConfig.context"\n                basic-query-completions="true"\n                query-string-subject= "$ctrl.queryStringSubject"\n                use-complete="true"\n                use-placeholder="false"\n                initial-focus="false"\n                enter-starts-search="false"\n                ng-model="$ctrl.editableItem.query.queryString"\n                is-disabled="false"\n                z-index="$ctrl.editorConfig.zIndex"\n                is-required-validate\n                on-blur="$ctrl.isNonAggregateQueryInAutoParseOnBlur">\n              </search-query-expression-editor>\n              <search-query-expression-editor-react name="searchQueryString"\n              ng-if="$ctrl.isEditorReact && !$ctrl.editableItem.parameters.length"\n              data-sumo-test="item-query-editor"\n              context="$ctrl.editorConfig.context"\n              basic-query-completions="true"\n              query-string-subject= "$ctrl.queryStringSubject"\n              use-complete="true"\n              use-placeholder="false"\n              initial-focus="false"\n              enter-starts-search="false"\n              query-string="$ctrl.editableItem.query.queryString"\n              is-disabled="false"\n              z-index="$ctrl.editorConfig.zIndex"\n              ng-model="$ctrl.editableItem.query.queryString"\n              is-required-validate\n              on-input-change="$ctrl.onSearchQueryExpressionEditorInputChanges"\n              on-blur="$ctrl.isNonAggregateQueryInAutoParseOnBlur">\n              </search-query-expression-editor-react>\n              <div ng-messages="editSavedSearch.searchQueryString.$error">\n                <div class="library-action-view__query-error" ng-message="isRequiredValidate">\n                  {{:: \'library.requiredField\' | i18nText }}\n                </div>\n              </div>\n            </div>\n            <div class="tre-form-container" data-sumo-test="item-query-timeRange">\n              <div class="tre-input-element">\n                <label data-sumo-test="item-query-timeRange-label">{{:: \'library.timeRange\' | i18nText}}</label>\n                <tre-input tre-id="$ctrl.treId"\n                  text="$ctrl.editableItem.query.timeRange"\n                  actions="{onTimeRangeChange: $ctrl.updateTimeRange}"\n                  position="$ctrl.position">\n                </tre-input>\n              </div>\n              <div class="tre-form-additional">\n                <select-with-hint optional="true" label="\'Search By\'"\n                  value="$ctrl.editableItem.byReceiptTime"\n                  elements="$ctrl.dropdowns.receiptTime.elements"\n                  on-change="$ctrl.dropdowns.receiptTime.handleChange"></select-with-hint>\n                <select-with-hint optional="true" label="\'Search Mode\'"\n                  value="$ctrl.editableItem.autoParsingInfo.mode"\n                  elements="$ctrl.dropdowns.searchModes.elements"\n                  on-change="$ctrl.dropdowns.searchModes.handleChange"></select-with-hint>\n              </div>\n            </div>\n            <div ng-if = "$ctrl.createMode" data-sumo-test="item-selectedFolder"\n              class="library-action-view__folder-selector-container create-content-search__location">\n              <div data-sumo-test="item-selectedFolder-label"\n                class="create-content-search__location__label">{{:: \'library.saveLocation\' | i18nText }}</div>\n              <root-folder-selector folder="$ctrl.selectedFolder" errors="$ctrl.errors"\n                class="library-action-root-selector create-content-search__location__root-selector">\n              </root-folder-selector>\n            </div>\n          </load-placeholder>\n        </div>\n        <load-placeholder data-sumo-test="schedule-editor" loading="$ctrl.schedule" ng-show="$ctrl.isSchedulerVisible">\n          <schedule-editor schedule="$ctrl.schedule" scanned-bytes-obj="$ctrl.scannedBytesObj" should-update-scanned-bytes="$ctrl.shouldUpdateScannedBytes"  by-receipt-time="$ctrl.editableItem.byReceiptTime" query-string="$ctrl.editableItem.query.queryString"></schedule-editor>\n        </load-placeholder>\n      </div>\n      <div layout="row" class="library-action-view__actions">\n        <div flex="80" class="library-action-view__actions-left" ng-if="$ctrl.editableItem">\n          <md-button class="md-raised md-primary md-button flush_margin-left"\n            ng-disabled="editSavedSearch.$pending || $ctrl.responsePending"\n            data-sumo-test="back-button" ng-click="$ctrl.closeScheduler()"\n            ng-if="$ctrl.isSchedulerVisible">\n            <md-icon md-svg-icon="angle-left" class="size-12"></md-icon>\n            {{:: \'savedSearch.BACK\' | i18nText}}\n          </md-button>\n          <md-button class="md-raised md-primary md-button flush_margin-left"\n            data-sumo-test="schedule-button" ng-click="$ctrl.createOrEditSchedule()"\n            ng-disabled="$ctrl.checkIfSchedulingSearchDisabled() || $ctrl.checkIfFrequentQuery() || editSavedSearch.$pending || $ctrl.responsePending || $ctrl.stateFetchingParams || $ctrl.checkIfIsNonAggregateQueryInAutoParse() || $ctrl.searchQueryValidatingForAggregation"\n            ng-if="!$ctrl.isSchedulerVisible">\n              {{ ($ctrl.isSearchScheduled() ? \'savedSearch.EDIT_THIS_SEARCH_SCHEDULE\' : \'savedSearch.SCHEDULE_THIS_SEARCH\') | i18nText}}\n              <md-icon md-svg-icon="angle-right" class="size-12"></md-icon>\n          </md-button>\n        </div>\n        <div class="library-action-view__actions" flex>\n          <md-button class="md-raised md-primary md-button" ng-disabled="editSavedSearch.$pending"\n            ng-click="$ctrl.hideErrorToast(); $ctrl.actions.cancel()" data-sumo-test="cancel-button">\n            {{:: \'common.cancel\' | i18nText}}\n          </md-button>\n          <md-button type="submit" data-sumo-test="submit-button"\n            ng-disabled="editSavedSearch.$pending || $ctrl.responsePending || $ctrl.stateFetchingParams"\n            class="md-raised md-button md-accent -rightmost">\n            <span ng-switch="$ctrl.searchQueryValidating">\n              <div ng-switch-when="true" class="spinner is-visible"></div>\n              <span ng-switch-default>\n                {{:: $ctrl.createMode ? \'common.save\' : \'common.update\' | i18nText}}\n              </span>\n              </span>\n          </md-button>\n        </div>\n      </div>\n    </form>\n  '};class rS{constructor(e){this.$element=e}$onInit(){this.$element.addClass("export-content-item library-action-view")}}rS.$inject=["$element"];const nS={bindings:{exportText:"<",item:"<",actions:"<"},controller:rS,template:'\n    <div class="library-action-view__content" data-sumo-test="export-folder-dialog">\n      <div class="library-action-view__label">\n        {{:: \'library.exportInstructions\' | i18nText}}\n        <help-link topic="100006" text=":: \'library.learnMore\' | i18nText"></help-link>\n      </div>\n      <div class="export-content-item__exported">{{:: \'library.exportedJSON\' | i18nText }}</div>\n      <load-placeholder loading="$ctrl.exportText">\n        <div class="export-content-item__code copy-code-container">\n          <div class="copy-code-container__wrapper">\n            <pre class="copy-code-container__code" data-sumo-test="export_json" ng-bind="::$ctrl.exportText"></pre>\n          </div>\n          <div class="copy-code-container__actions">\n            <md-button class="md-raised md-primary md-button"\n                ngclipboard data-clipboard-target=".copy-code-container__code"\n                ngclipboard-success="$ctrl.actions.showCopySuccess()"\n                data-sumo-test="export-copy-button">\n              {{:: \'library.copy\' | i18nText}}\n            </md-button>\n            <md-button class="md-raised md-primary md-button" ng-click="$ctrl.actions.download()" data-sumo-test="export-download-button">\n              {{:: \'library.download\' | i18nText}}\n            </md-button>\n          </div>\n        </div>\n      </load-placeholder>\n    </div>\n  '};class aS{constructor(e,t,i,r){this.$element=e,this.$q=t,this.i18n=i,this.$scope=r,this.actionButtonText="",this.responsePending=!1,this.isFolderSelected=!1,this.returnFolder=()=>this.actions.resolve([this.selectedFolder]),this.moveAction=()=>"getPath"===this.actionType?this.returnFolder():this.confirmMove(),this.checkSelectedFolder=()=>{if(this.selectedFolder&&this.selectedFolder.id){const e=this.selectedFolder.id;this.isFolderSelected=!this.excludedFolderIdList||-1===this.excludedFolderIdList.indexOf(e)}else this.isFolderSelected=!1}}confirmMove(){const e=this.selectedFolder.id;if(e)return this.responsePending=!0,this.typeService.move(e,...this.items).then((e=>this.actions.resolve(e)),(e=>(this.errors=e.errors,this.$q.reject(e)))).finally((()=>this.responsePending=!1));this.errors=[{key:"content1:root_folder",message:this.i18n.get("content.selectAFolder"),client:!0}]}$onInit(){this.$scope.$watch((()=>this.selectedFolder),this.checkSelectedFolder.bind(this)),this.actionButtonText="getPath"===this.actionType?"common.done":"library.move",this.$element.addClass("move-content-item library-action-view"),this.checkSelectedFolder()}getWarnings(){return this.items.filter((e=>"LOOKUP"===e.type)).length>0}showWarnings(){const e=[{text:this.i18n.get("library.lookupMoveWarning"),status:"warning",multiline:!0}],t=document.getElementById("library-dialog-warning-container");t&&(0,R.showInlineNotification)(e,t)}}aS.$inject=["$element","$q","i18n","$scope"];const sS={bindings:{typeService:"<",actions:"<",items:"<",excludedFolderIdList:"<",actionType:"="},controller:aS,template:'\n  <form name="moveContentItem" novalidate ng-submit="moveContentItem.$valid && $ctrl.moveAction();">\n    <div class="library-action-view__content">\n      <div id="library-dialog-warning-container" ng-if="$ctrl.getWarnings()">\n        {{$ctrl.showWarnings()}}\n      </div>\n      <div class="form-errors-container" ng-if="$ctrl.errors.length > 0">\n        <form-errors class="form-errors-container__errors" errors="$ctrl.errors"></form-errors>\n      </div>\n      <div class="library-action-view__folder-selector-container">\n        <root-folder-selector folder="$ctrl.selectedFolder" errors="$ctrl.errors"></root-folder-selector>\n      </div>\n    </div>\n    <div class="library-action-view__actions">\n      <md-button class="md-raised md-primary md-button" ng-click="$ctrl.actions.cancel()"\n        ng-disabled="$ctrl.responsePending"\n        data-sumo-test="move-content-item-cancel-btn">\n        {{:: \'common.cancel\' | i18nText}}\n      </md-button>\n      <md-button class="md-raised md-accent md-button" type="submit"\n        ng-disabled="$ctrl.responsePending || !$ctrl.isFolderSelected"\n        data-sumo-test="move-content-item-move-btn">\n        {{:: $ctrl.actionButtonText | i18nText}}\n      </md-button>\n    </div>\n  </form>\n  '};class oS{constructor(e,t,i,r){this.$element=e,this.$q=t,this.$mdToast=i,this.i18n=r,this.responsePending=!1}showSuccessMessage(e){const t=this.i18n.getSafeString("library.copyItemSuccess",this.item.name,this.selectedFolder.name),i=this.$mdToast.success().htmlContent(t).action(this.i18n.get("library.open"));this.$mdToast.show(i).then((t=>{if("ok"===t)return g.libraryActionsService.runAction({actionType:re.ContentActionType.OPEN_IN_LIBRARY},e)}))}confirmCopy(){const e=this.selectedFolder.id;if(e)return this.responsePending=!0,this.typeService.copy(e,this.copyOperation).then((e=>((0,re.assertDefined)(e),this.responsePending=!1,this.showSuccessMessage(e),this.actions.resolve(e))),(e=>(this.responsePending=!1,this.errors=void 0!==e.errorObject?e.errorObject.errors:e.errors,this.$q.reject(e))));this.errors=[{key:"content1:root_folder",message:this.i18n.get("content.selectAFolder"),client:!0}]}$onInit(){this.$element.addClass("copy-content-item"),this.copyOperation={id:this.item.id,name:`${this.item.name} (${this.i18n.get("library.duplicateCopy")})`,description:this.item.description}}}oS.$inject=["$element","$q","$mdToast","i18n"];const lS={bindings:{typeService:"<",actions:"<",item:"<",editableItem:"<"},controller:oS,template:'\n    <form novalidate name="copyContentItem" ng-submit="copyContentItem.$valid && $ctrl.confirmCopy();"\n      <div class="library-action-view">\n        <div class="library-action-view__content">\n          <div class="form-errors-container" ng-if="$ctrl.errors.length > 0">\n            <form-errors class="form-errors-container__errors" errors="$ctrl.errors"></form-errors>\n          </div>\n          <load-placeholder loading="$ctrl.copyOperation">\n            <md-input-container class="md-block">\n              <label>{{:: \'common.name\' | i18nText}}</label>\n              <input ng-model="$ctrl.copyOperation.name" data-sumo-test="copy-content-item-name" name-validate required name="name">\n              <div ng-messages="copyContentItem.name.$error">\n                <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n                <div ng-message="nameValidate">{{:: \'library.invalidField\' | i18nText }}</div>\n              </div>\n            </md-input-container>\n            <md-input-container class="md-block md-input-has-value">\n              <label>{{:: \'library.saveLocation\' | i18nText }}</label>\n              <div class="library-action-view__folder-selector-container">\n                <root-folder-selector folder="$ctrl.selectedFolder" errors="$ctrl.errors"></root-folder-selector>\n              </div>\n            </md-input-container>\n            <md-input-container class="md-block">\n              <label>{{:: \'common.description\' | i18nText}}</label>\n              <textarea ng-model="$ctrl.copyOperation.description"></textarea>\n            </md-input-container>\n          </load-placeholder>\n        </div>\n      </div>\n      <div class="library-action-view__actions">\n        <md-button\n          class="md-raised md-primary md-button"\n          data-sumo-test="copy-content-item-cancel"\n          ng-click="$ctrl.actions.cancel()"\n          ng-disabled="$ctrl.responsePending">\n          {{:: \'common.cancel\' | i18nText}}\n        </md-button>\n        <md-button\n          type="submit"\n          data-sumo-test="copy-content-item-submit"\n          class="md-raised md-accent md-button"\n          ng-disabled="$ctrl.responsePending">\n          {{:: \'library.duplicate\' | i18nText}}\n        </md-button>\n      </div>\n    </form>\n  '};var cS=i(59324),dS=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const uS=()=>dS(void 0,void 0,void 0,(function*(){return(0,D.legacyHttpGet)("/json/v1/content/folder/topLevelFolders?permissions=Create,Read")})),pS=e=>dS(void 0,void 0,void 0,(function*(){return(0,D.legacyHttpGet)(`/json/v1/content/folder/${e}`)})),hS=(e,t)=>dS(void 0,void 0,void 0,(function*(){return(0,D.legacyHttpPost)(`/json/v1/content/folder?id=${e}`,{name:t})}));var mS=i(27246),gS=i.n(mS),yS=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const vS=({data:e})=>{const t=0===e.parentId?qt.IconName.User:qt.IconName.Folder;return x().createElement("span",null,x().createElement(qt.Icon,{name:t,className:gS().folderIcon}),` ${e.name}`)},fS=({defaultValue:e,onChange:t,divWrapperProps:i})=>{const[r,n]=(0,T.useState)([{name:Ge.j.get("content.rootFolderName"),item:void 0}]),[a,s]=(0,T.useState)([]),[o,l]=(0,T.useState)(null==e?void 0:e.id),[c,d]=(0,T.useState)(!0),u=e=>e.map((({folder:e})=>{const{id:t=0,parentId:i=0,name:r,description:n}=e;return{id:t,parentId:i,name:r,description:n}})).sort(((e,t)=>0===e.parentId?-1:0===t.parentId?1:e.name.toUpperCase()<t.name.toUpperCase()?-1:1)),p=(0,T.useCallback)((e=>yS(void 0,void 0,void 0,(function*(){const i=null==e?void 0:e.id;let r;if(i){const e=yield pS(`${i}`);r=u(e.folder.children.filter((e=>e.folder)))}else{const e=yield uS();r=u(e.folderable)}(0,En.batch)((()=>{s(r),d(!1),l(i)})),t(e)}))),[t]),h=e=>{const{name:t,id:i}=e,a=r.findIndex((e=>e.item===i)),s=a>=0?r.slice(0,a+1):[...r,{name:t,item:i}];(0,En.batch)((()=>{n(s),d(!0)})),p(e)};(0,T.useEffect)((()=>{p()}),[]);const m={columnOptions:[{field:"name",headerName:Ge.j.get("common.name"),customCellRenderer:{component:vS}},{field:"description",headerName:Ge.j.get("common.description")}],data:a,gridOptions:{showLoadingOverlay:c,stateOverlayConfig:{overlayType:"zeroState",title:Ge.j.get("library.emptyFolder"),description:Ge.j.get("library.emptyFolderDescription")}},breadcrumbItems:r,onBreadcrumbAction:(e,t,i=0)=>{h({name:"",id:t,parentId:-1})},onRowClick:({data:e})=>{h(e)},searchPlaceholder:""},g={onCreateNew:e=>yS(void 0,void 0,void 0,(function*(){var t,i,r;if(o&&e){d(!0);try{const t=yield hS(o,e);h(t.folder)}catch(e){r=null===(i=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===i?void 0:i.key,(0,En.batch)((()=>{(0,R.showCriticalNotification)({message:Ge.j.get(`keyederrors.${r||"um1:unknown_error"}`)}),d(!1)}))}}})),newFolderNameInputLabel:Ge.j.get("library.folderName"),addButtonText:`+ ${Ge.j.get("library.newFolder")}`,cancelButtonText:Ge.j.get("common.cancel"),createButtonText:Ge.j.get("common.create"),disabled:!1};return x().createElement("div",Object.assign({className:gS().container},i),x().createElement("div",{className:gS().picker},x().createElement(R.LocationPickerDialog.Table,Object.assign({},m))),r.length>1&&x().createElement("div",{className:gS().createNewLocation},x().createElement(R.LocationPickerDialog.CreateNewLocation,Object.assign({},g))))},_S={container:{marginBottom:"18px",width:"96%"},content:{marginBottom:"16px"},contentLabel:{color:cS.ColorsV1.dolphin,lineHeight:3,fontSize:"14px"},button:{margin:"0 6px"},btnContainer:{display:"flex",justifyContent:"flex-end",marginBottom:"15px"}},SS=({touched:e,dirty:t,values:i,errors:r,isSubmitting:n,handleReset:a,setFieldTouched:s,isValid:o})=>{const l={default:Ge.j.get("library.duplicate"),processing:"Saving..."};return x().createElement("div",null,x().createElement("div",{style:_S.content},x().createElement(qt.Form.Field,{name:"name",render:({field:e})=>{const t=e.name,i=r[t]||void 0;return x().createElement(qt.TextField,Object.assign({},e,{error:!!i,hintText:i,label:Ge.j.get("common.name")+"*",onInput:()=>s(t,!0,!0),fullWidth:!0,"data-sumo-test":"copy-content-item-name"}))}})),x().createElement("div",{style:_S.content},x().createElement(qt.Form.Field,{name:"description",render:({field:e})=>{const t=e.name,i=r[t]||void 0;return x().createElement(qt.TextField,Object.assign({},e,{error:!!i,hintText:i,label:Ge.j.get("common.description"),onInput:()=>s(t,!0,!0),multiline:!0,optional:!0,fullWidth:!0}))}})),x().createElement("div",{style:_S.content},x().createElement("label",{style:_S.contentLabel},Ge.j.get("library.saveLocation")),x().createElement(fS,{defaultValue:i.selectedFolder,onChange:e=>{i.selectedFolder=e},divWrapperProps:{"data-sumo-test":"folder-selection-save-dashboard"}})),x().createElement("div",{style:_S.btnContainer},x().createElement(qt.Button,{style:_S.button,color:"secondary",size:"regular",type:"button",disabled:n,onClick:a,"data-sumo-test":"copy-content-item-cancel"},Ge.j.get("common.cancel")),x().createElement(qt.FeedbackButton,{style:_S.button,color:"primary",size:"regular",feedbackState:n?"processing":"default",feedbackText:l,disabled:t&&(!o||n),"data-sumo-test":"copy-content-item-submit"})))},bS={notification:{marginLeft:"-36px"},link:{color:"white"}};class ES{constructor(e,t,i,r){this.$element=e,this.$q=t,this.$mdToast=i,this.i18n=r,this.inProgress=!1}create(){return this.inProgress=!0,this.typeService.create({name:this.name,description:this.description},this.destinationFolderId).then((e=>this.actions.resolve(e))).then((e=>{const t=this.$mdToast.success().textContent(this.i18n.get("library.createSuccessMessage"));return this.$mdToast.show(t),e})).catch((e=>(this.errors=e.errors,this.$q.reject(e)))).finally((()=>this.inProgress=!1))}$onInit(){this.item&&(this.name=this.item.name,this.description=this.item.description),this.$element.addClass("create-content-folder library-action-view")}}ES.$inject=["$element","$q","$mdToast","i18n"];const TS={bindings:{typeService:"<",actions:"<",item:"<?",destinationFolderId:"<"},controller:ES,template:'\n    <form novalidate name="createContentFolder" novalidate class="-form library-action-view"\n      md-theme="formTheme" ng-submit="createContentFolder.name.$setTouched(); createContentFolder.$valid && $ctrl.create()">\n      <div class="form-errors-container" ng-if="$ctrl.errors.length > 0">\n        <form-errors class="form-errors-container__errors" errors="$ctrl.errors"></form-errors>\n      </div>\n      <div class="library-action-view__content">\n        <md-input-container class="md-block library-action-view__input">\n          <label ng-bind="::\'common.name\' | i18nText"></label>\n          <input ng-model="$ctrl.name" name-validate required md-autofocus name="name" maxlength="255" data-sumo-test="folder-name">\n          <div ng-messages="createContentFolder.name.$error">\n            <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n            <div ng-message="nameValidate">{{:: \'library.invalidField\' | i18nText }}</div>\n          </div>\n        </md-input-container>\n        <md-input-container class="md-block library-action-view__input">\n          <label ng-bind="::\'common.description\' | i18nText"></label>\n          <textarea ng-model="$ctrl.description" data-sumo-test="folder-description"></textarea>\n        </md-input-container>\n      </div>\n      <div class="library-action-view__actions">\n        <md-button class="md-raised md-primary md-button" ng-click="$ctrl.actions.cancel()" data-sumo-test="cancel-folder-button">\n          {{:: \'common.cancel\' | i18nText}}\n        </md-button>\n        <md-button type="submit" ng-disabled="createContentFolder.$pending" class="md-raised md-button md-accent"\n        data-sumo-test="add-folder-button">\n          <span ng-switch="$ctrl.inProgress">\n            <div ng-switch-when="true" class="spinner is-visible"></div>\n            <span ng-switch-default>\n              {{:: \'common.add\' | i18nText}}\n            </span>\n        </md-button>\n      </div>\n    </form>\n  '};class xS extends tS{constructor(e,t,i,r,n,a,s,o,l,c){super(o,e,t,i,r,n,l,c,s),this.$element=e,this.i18n=t,this.$scope=i,this.$timeout=r,this.$mdToast=n,this.workspacesService=a,this.currentUserHelper=s,this.$q=o,this.runAsConflictHandlerService=l,this.userService=c,this.createMode=!0,this.hideErrorToast=()=>{this.$mdToast.hide(this.errorToast),this.$mdToast.hide(this.creationErrorToast)}}showSuccess(e){let t=this.$mdToast.success().htmlContent(e);const i=_.getPath(this.workspacesService.getCurrent(),"currentView.model");i&&i.getSavedSearchId()&&(t=t.action(this.i18n.get("library.open"))),this.$mdToast.show(t)}showCreationError(e){this.creationErrorToast=this.$mdToast.error().textContent(e),this.$mdToast.show(this.creationErrorToast)}submit(){return this.validateSearchQuery().then((()=>{this.updateSchedule(),this.removeScannedBytesObj();const e=this.selectedFolder.id;if(!_.isUndefined(e))return this.typeService.create(this.editableItem,e).then((t=>(this.showSuccess(this.i18n.getSafeString("library.createItemSuccess",this.editableItem.name,this.selectedFolder.name)),t.parentId=e,this.actions.resolve(t)))).catch((e=>{var t,i,r,n,a,s,o,l,c,d,u;const p=this.editableItem.schedules;return(null===(i=null===(t=e.keyedErrors)||void 0===t?void 0:t["ss:real_time_alert_invalid_search"])||void 0===i?void 0:i.values)?this.showCreationError(sprintf(this.i18n.get("errors.create_scheduled_error"),e.keyedErrors["ss:real_time_alert_invalid_search"].values)):(null===(a=null===(n=null===(r=e.keyedErrors)||void 0===r?void 0:r["ss:invalid_query"])||void 0===n?void 0:n.values)||void 0===a?void 0:a.reason)?this.showCreationError(sprintf(this.i18n.get("errors.create_scheduled_error_invalid_query"),e.keyedErrors["ss:invalid_query"].values)):(null===(l=null===(o=null===(s=e.keyedErrors)||void 0===s?void 0:s["ss:invalid_index_name"])||void 0===o?void 0:o.values)||void 0===l?void 0:l.message)?this.showCreationError(sprintf(null===(u=null===(d=null===(c=e.keyedErrors)||void 0===c?void 0:c["ss:invalid_index_name"])||void 0===d?void 0:d.values)||void 0===u?void 0:u.message)):this.showCreationError(sprintf(_.pluck(e.errors,"message").join(". "),p&&p[0].cronSchedule)),e}));this.errors=[{key:"content1:root_folder",message:this.i18n.get("content.selectAFolder"),client:!0}]})).catch(this.searchValidationFailure).finally((()=>{this.searchQueryValidating=!1}))}$onInit(){this.$element.addClass("create-content-search"),this.schedule=this.getSchedule();try{this.blockFrequentTierSearch=this.editableItem.properties&&JSON.parse(this.editableItem.properties).blockFrequentTierScheduling}catch(e){this.blockFrequentTierSearch=!1}this.initPartitionList(),this.initSavedSearchStore(),this.isNonAggregateQueryInAutoParse()}}xS.$inject=["$element","i18n","$scope","$timeout","$mdToast","workspacesService","currentUserHelper","$q","runAsConflictHandlerService","userService"];const CS=Object.assign({},iS,{controller:xS});class AS{constructor(e,t){this.$mdToast=e,this.i18n=t,this.setDirty=e=>{e.$setDirty()},this.resolveSave=e=>(this.showSuccessToast(),this.actions.resolve(e)),this.showSuccessToast=()=>{const e=this.$mdToast.success().textContent(this.i18n.get("content.savedMetrics.successSave"));this.$mdToast.show(e)},this.showErrorToast=({response:{data:{errors:[{message:e=this.i18n.get("unknown.error")}]=[{}]}={}}={}})=>{const t=this.$mdToast.error().textContent(e);this.$mdToast.show(t)}}get isNewMetricsSearch(){return!this.editableItem||!this.editableItem.id}$onInit(){this.maxLength=_t.z1,this.metricsSearch||!this.contentItem||void 0===this.contentItem.id?this.metricsSearch&&(this.editableItem=(0,nh.w$)(this.metricsSearch)):this.typeService.fetchById(this.contentItem.id).then((e=>this.editableItem=Object.assign({},e)))}submit(e){if(this.setDirty(e),e.$valid)return this.isNewMetricsSearch?this.create():this.update()}create(){if(!this.editableItem)return;const e=this.selectedFolder.id;if(void 0!==e)return this.typeService.create(this.editableItem,e).then((e=>(this.metricsSearch&&this.editableItem&&this.actions.updateMetricsPanel(Object.assign(Object.assign({},this.metricsSearch),{title:this.editableItem.title,description:this.editableItem.description,contentLibraryItemId:e.id})),e))).then(this.resolveSave).catch(this.showErrorToast);this.errors=[{key:"content1:root_folder",message:this.i18n.get("content.selectAFolder"),client:!0}]}update(){if(this.editableItem)return this.typeService.update(this.editableItem).then((e=>(this.metricsSearch&&this.editableItem&&this.actions.updateMetricsPanel(Object.assign(Object.assign({},this.metricsSearch),{title:this.editableItem.title,description:this.editableItem.description})),e))).then(this.resolveSave).catch(this.showErrorToast)}}AS.$inject=["$mdToast","i18n"];const wS={bindings:{typeService:"<",actions:"<",metricsSearch:"<",contentItem:"<"},controller:AS,template:'\n  <form\n    novalidate\n    name="editSavedMetrics"\n    class="-form library-action-view library-action-view-edged_scroll"\n    md-theme="formTheme"\n    ng-submit="$ctrl.submit(editSavedMetrics)">\n    <div class="library-action-view__content">\n    <load-placeholder loading="$ctrl.editableItem">\n      <md-input-container\n          data-sumo-test="item-name"\n          class="md-block library-action-view__input"\n        >\n          <label data-sumo-test="saved-metric-name-label">{{:: \'common.name\' | i18nText}}</label>\n          <input\n            name="name"\n            ng-model="$ctrl.editableItem.title"\n            maxlength="$ctrl.maxLength"\n            name-validate\n            required\n            md-autofocus\n            data-sumo-test="saved-metric-name-input"\n          />\n          <div ng-messages="editSavedMetrics.name.$error">\n            <div ng-message="required">\n              {{:: \'library.requiredField\' | i18nText }}\n            </div>\n            <div ng-message="nameValidate">\n              {{:: \'library.invalidField\' | i18nText }}\n            </div>\n          </div>\n        </md-input-container>\n        <md-input-container\n          data-sumo-test="item-description"\n          class="md-block library-action-view__input"\n        >\n          <label data-sumo-test="saved-metric-description-label">{{:: \'common.description\' | i18nText}}</label>\n          <textarea\n            ng-model="$ctrl.editableItem.description"\n            maxlength="$ctrl.maxLength"\n            data-sumo-test="saved-metric-description-input"\n          ></textarea>\n        </md-input-container>\n        <div class="form-errors-container" ng-if="$ctrl.errors.length > 0">\n          <form-errors\n            class="form-errors-container__errors"\n            errors="$ctrl.errors"\n          ></form-errors>\n        </div>\n        <div\n          ng-if="$ctrl.isNewMetricsSearch"\n          data-sumo-test="item-selectedFolder"\n          class="library-action-view__folder-selector-container create-content-search__location"\n        >\n          <div\n            data-sumo-test="item-selectedFolder-label"\n            class="create-content-search__location__label"\n          >\n            {{:: \'library.saveLocation\' | i18nText }}\n          </div>\n          <root-folder-selector\n            folder="$ctrl.selectedFolder"\n            errors="$ctrl.errors"\n            class="library-action-root-selector create-content-search__location__root-selector"\n          >\n          </root-folder-selector>\n        </div>\n      </div>\n    </load-placeholder>\n    <div layout="row" class="library-action-view__actions">\n      <div class="library-action-view__actions" flex>\n        <md-button\n          class="md-raised md-primary md-button"\n          ng-disabled="editSavedMetrics.$pending"\n          ng-click="$ctrl.hideErrorToast(); $ctrl.actions.cancel()"\n          data-sumo-test="cancel-button"\n        >\n          {{:: \'common.cancel\' | i18nText}}\n        </md-button>\n        <md-button\n          type="submit"\n          data-sumo-test="save-button"\n          ng-disabled="editSavedMetrics.$pending"\n          class="md-raised md-button md-accent -rightmost"\n        >\n          <span ng-switch="$ctrl.searchQueryValidating">\n              {{:: $ctrl.isNewMetricsSearch ? \'common.save\' : \'common.update\' | i18nText}}\n          </span>\n        </md-button>\n      </div>\n    </div>\n  </form>'};const IS=Object.assign(Object.assign({},lS),{controller:class extends oS{showSuccessMessage(){}$onInit(){this.copyOperation=Object.assign({},this.item)}}});const RS=Object.assign(Object.assign({},lS),{controller:class extends oS{showSuccessMessage(){}$onInit(){this.copyOperation=Object.assign(Object.assign({},this.item),this.editableItem)}}});class DS{constructor(e,t,i,r,n,a,s){this.$scope=e,this.$element=t,this.$document=i,this.i18n=r,this.$timeout=n,this.usersRolesStateService=a,this.usersRolesStateQueries=s,this.isQuickSearchVisible=!1,this.isSearchListShowing=!1,this.codeMirrorHandlers={},this.QUICK_SEARCH_TYPES_LIST=[...x_],this.mousedown=(e,t)=>{this.isRightClick(t)||(this.showQuickSearch(!0),this.updateQuickSearchList(),this.updateQuickSearchPosition())},this.isRightClick=e=>3===e.which||2===e.button,this.isPartialUserToken=()=>{const e={isUserType:!1,startPos:null,endPos:null};if(!this.editor)return e;const t=this.editor.getValue(),i=this.editor.getCursor().ch,r=this.editor.getLineTokens(0),n=r.length;for(let a=0;a<n;a++)if(r[a].type){if(!(r[a].end<=i)){e.endPos=r[a].start;break}if(e.isUserType=r[a].string===A_.query||r[a].string===w_.query,e.startPos=r[a].end,e.isUserType&&a===n-1){e.endPos=t.length;break}}return e.endPos=e.endPos||t.length,e},this.initializeCodeMirror=()=>{const e="sharedWith:",t=this.sharedWithOptions.map((t=>e+t.display+"|"+e+t.display.toLowerCase()+"|")).join("");CodeMirror.defineSimpleMode("contentSearch",{start:[{regex:new RegExp("(createdBy:[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*|createdBy:me|"+t+"is:allowlist|is:world|is:dashboard-new|type:dashboard|type:folder|type:search|type:metrics|in:personal|in:org)","g"),token:"content-token"},{regex:new RegExp(R_.join("|"),"g"),token:"content-token-partial"}]}),this.editor=CodeMirror.fromTextArea(this.$element.find(".content-search__cm").get(0),{gutter:!1,mode:"contentSearch",smartIndent:!1,lineWrapping:!0,styleSelectedText:!0}),this.editor.on("mousedown",this.codeMirrorHandlers.mousedown),this.editor.on("keyup",this.codeMirrorHandlers.keyup),this.editor.on("keydown",this.codeMirrorHandlers.keydown),this.editor.on("changes",this.codeMirrorHandlers.changes),this.editor.on("beforeChange",this.codeMirrorHandlers.beforeChange)},this.handleBodyClick=e=>{$(e.target).parents(`.${this.className}`).length||$(e.target).hasClass("content-search__dropdown__sub-item")||this.closeDropDown()},this.closeDropDown=()=>{this.isSearchListShowing=!1,this.showQuickSearch(!1),this.unBindDocumentEvents()},this.updateQuickSearchPosition=()=>{const e=this.$element.find(".content-search__dropdown__wrapper").offset().top+8;this.$element.find(".content-search__dropdown").css({top:e+"px"})},this.handleKeyPress=e=>{var t;if(e.keyCode===re.NAVIGATION_KEYS.DOWN.keyCode||e.keyCode===re.NAVIGATION_KEYS.UP.keyCode){const i=this.$element.find(".content-search__dropdown__sub-item"),r=this.$element.find(".content-search__dropdown__sub-item.active:not(.is-empty)");let n,a=0;0!==r.length&&(r.removeClass("active"),n=i.index(r),e.keyCode===re.NAVIGATION_KEYS.UP.keyCode?a=0===n?i.length-1:--n:e.keyCode===re.NAVIGATION_KEYS.DOWN.keyCode&&(a=n===i.length-1?0:++n)),i.eq(a).addClass("active");const s=$(".content-search__dropdown__sub-items"),o=$(".content-search__dropdown__sub-item.active");s.scrollTop(0),s.scrollTop(o.offset().top-(null!==(t=s.height())&&void 0!==t?t:0))}else e.keyCode===re.NAVIGATION_KEYS.ESC.keyCode&&this.showQuickSearch(!1)},this.bindDocumentEvents=()=>{var e;null===(e=this.$body)||void 0===e||e.on("click",this.handleBodyClick)},this.unBindDocumentEvents=()=>{var e;null===(e=this.$body)||void 0===e||e.off("click",this.handleBodyClick)},this.updateQueryValue=e=>{this.editor.setValue(e),this.setCursorToEnd()},this.showQuickSearch=e=>{this.$scope.$evalAsync((()=>{e&&!1===this.isSearchListShowing&&(this.isSearchListShowing=!0,this.bindDocumentEvents()),this.isQuickSearchVisible=e}))},this.setCursorToEnd=()=>{this.editor.setCursor(this.editor.lineCount(),0)},this.clearSearchBox=()=>{this.editor.setValue(""),this.editor.focus(),this.actions.search("")},this.onOptionSelectionKey=e=>{const t=e.data("index"),i=e.data("parent-index");this.onOptionSelection(this.quickSearchList[i].items[t])},this.getQueryNameWithSelectedUser=(e,t)=>{const i=this.editor.getValue();return i.slice(0,e.startPos)+t+" "+i.slice(e.endPos,i.length)},this.onOptionSelection=e=>{let t;const i=this.isPartialUserToken();if(i.isUserType)t=this.getQueryNameWithSelectedUser(i,e.query);else{const i=this.editor.getValue();t=this.editor.getValue()+(" "===i.indexOf(i.length-1)?"":" ")+e.query}t.lastIndexOf(":")!==t.length-1&&(this.searchContent(t),this.closeDropDown()),this.editor.setValue(t),this.editor.focus(),this.setCursorToEnd()};this.QUICK_SEARCH_TYPES_LIST.some((e=>"type:lookups"===e.query))||this.QUICK_SEARCH_TYPES_LIST.push(C_)}$onDestroy(){this.editor.off("mousedown",this.codeMirrorHandlers.mousedown),this.editor.off("keyup",this.codeMirrorHandlers.keyup),this.editor.off("keydown",this.codeMirrorHandlers.keydown),this.editor.off("changes",this.codeMirrorHandlers.changes),this.editor.off("beforeChange",this.codeMirrorHandlers.beforeChange)}getReducedList(){const e=[];if(!this.editor)return e;const t=this.editor.getLineTokens(0),i=[];for(const e of t)e.type&&i.push(e.string);const r=I_.filter((e=>!_.contains(i,e.query)));r.length&&e.push({label:this.i18n.get("library.narrowSearch"),items:r});const n=this.QUICK_SEARCH_TYPES_LIST.filter((e=>{const t=!_.contains(i,e.query);switch(e.query){case"type:lookups":return t&&Gr.currentUserHelper.hasPrivilege("LookupContentAccess");default:return t}}));return n.length&&e.push({label:this.i18n.get("library.quickSearch"),items:n}),e}isSharedWithFilter(e){const t=this.editor.getCursor().ch,i=e.slice(0,t),r=i.lastIndexOf(":")+1;return i.slice(0,r).endsWith(w_.query)}updateQuickSearchList(){let e=[];const t=this.isPartialUserToken();if(t.isUserType){let i=[];const r=this.editor.getValue().trim(),n=this.editor.getValue().slice(t.startPos,t.endPos).trim();if(this.isSharedWithFilter(r)){if(r.endsWith(w_.query))i=this.sharedWithOptions;else{const e=n.toLowerCase();i=this.sharedWithOptions.filter((t=>t.display.toLowerCase().indexOf(e)>-1))}e=[{label:this.i18n.get("library.sharedWithOptionsLabel"),items:i}]}else i=this.users&&n?this.users.filter((e=>e.display.toLowerCase().indexOf(n.toLowerCase())>-1)):this.users,e=i&&i.length>0?[Object.assign({},{label:this.i18n.get("library.users"),items:i})]:[{label:this.i18n.get("library.users"),items:[{display:this.i18n.get("library.emptyUsersList"),regex:"",query:""}]}]}else e=this.getReducedList();this.$timeout((()=>{this.quickSearchList=e}))}$onInit(){this.searchQuery=this.query||"",this.$element.addClass("content-search"),this.usersRolesStateQueries.getUsers().map((e=>_.map(e,(e=>Object.assign(Object.assign({},e),{display:`${e.name} (${e.email})`,regex:"",query:e.email}))))).takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>this.users=e)).subscribe(),this.usersRolesStateService.fetchUsers(),this.className=_.uniqueId("content-search-"),this.sharedWithOptions=[O_[0]],Gr.currentUserHelper.get().roles.forEach((e=>{this.sharedWithOptions.push({display:e,regex:"",query:e})})),this.sharedWithOptions.push(O_[1]),this.codeMirrorHandlers={mousedown:this.mousedown,keyup:(e,t)=>{this.handleKeyPress(t)},keydown:(e,t)=>{this.prevCursorPosition=this.editor.getCursor(),t.keyCode!==re.NAVIGATION_KEYS.UP.keyCode&&t.keyCode!==re.NAVIGATION_KEYS.DOWN.keyCode||(t.preventDefault(),t.stopPropagation())},changes:_.debounce((()=>{this.updateQuickSearchList(),this.updateQuickSearchPosition()}),200),beforeChange:(e,t)=>{let i=e.getValue();if(2===t.text.length&&""===t.text[1]){t.cancel();const r=this.$element.find(".content-search__dropdown__sub-item.active:not(.is-empty)");i&&" "!==i[i.length-1]&&(this.quickSearchList[0].label!==this.i18n.get("library.users")&&(i+=" "),e.setValue(i+"")),e.setCursor(this.prevCursorPosition.line,this.prevCursorPosition.ch),r.length?(this.onOptionSelectionKey(r),r.removeClass("active")):(this.searchContent(i),this.showQuickSearch(!1),this.setCursorToEnd())}}},this.initializeCodeMirror(),this.$body=this.$document.find("body"),this.$element.addClass(this.className),this.$timeout((()=>{this.query&&this.updateQueryValue(this.query)}))}$onChanges(e){e.query&&this.editor&&this.updateQueryValue(e.query.currentValue)}searchContent(e){const t=e.trim();t&&this.actions.search(t)}}DS.$inject=["$scope","$element","$document","i18n","$timeout","usersRolesStateService","usersRolesStateQueries"];const OS={controller:DS,bindings:{actions:"<",query:"@"},template:'\n    <div class="content-search__input">\n      <div class="content-search__input__icon static-icon-wrapper" data-sumo-test="search-icon">\n        <md-icon md-svg-icon="search" class="size-14"></md-icon>\n      </div>\n      <div class="content-search__code-mirror" data-sumo-test="content-search-codemirror">\n        <textarea class="content-search__cm"></textarea>\n      </div>\n      <ux-icon-button class="content-search__input__empty"\n        ng-class="{ \'show-button\': $ctrl.editor.getValue() }"\n        svg="true" icon="x"\n        ng-click="$ctrl.clearSearchBox()"\n        data-sumo-test="cross-icon">\n      </ux-icon-button>\n    </div>\n    <div class="content-search__dropdown__wrapper">\n      <div class="content-search__dropdown" data-sumo-test="content-dropdown" ng-show="$ctrl.isQuickSearchVisible">\n        <div ng-repeat="quickSearchListItem in $ctrl.quickSearchList track by $index" class="content-search__dropdown__item">\n          <div ng-if="$ctrl.quickSearchList.length === 1" class="content-search__dropdown__title" data-sumo-test="dropdown-title">\n            <div class="content-search__dropdown__title__icon-container">\n              <md-icon md-svg-icon="{{quickSearchListItem.icon}}" class="size-14 content-search__dropdown__title__icon"></md-icon>\n            </div>\n            <div class="content-search__dropdown__title__label">\n               {{quickSearchListItem.label}}\n            </div>\n          </div>\n          <div class="content-search__dropdown__sub-items">\n            <div class="content-search__dropdown__sub-item {{search.query ? \'\' : \'is-empty\'}}"\n            data-parent-index={{$parent.$index}} data-index="{{$index}}"\n            ng-click="$ctrl.onOptionSelection(search)"\n            data-sumo-test="dropdown-items"\n            ng-repeat="search in quickSearchListItem.items track by $index">\n              <md-icon\n                ng-if="search.icon"\n                class="md-menu__menu-icon content-search__menu-icon"\n                md-svg-icon="{{search.icon}}">\n              </md-icon>\n              {{search.display}}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>'};class NS{constructor(e){this.$element=e,this.scheduleAlertConditionOperatorOptions=g.scheduleAlertConditionOperatorOptions}getDefaults(){return{useCondition:!1,conditionOperator:F.ScheduleAlertConditionOperator.GREATER_THAN,conditionOperand:0}}getState(){return{useCondition:this.useCondition,conditionOperator:this.conditionOperator,conditionOperand:this.conditionOperand}}$onInit(){this.$element.addClass("schedule-alert-condition-selector");const e=this.getState(),t=this.getDefaults();Object.assign(this,_.defaults(e,t))}$onChanges(){this.disableSearchCompleteOption=this.scheduleType===F.ScheduleFrequencyType.REAL_TIME||this.scheduleType===F.ScheduleFrequencyType.EVERY_MINUTE,this.disableSearchCompleteOption&&(this.useCondition=!0),this.useCondition?(this.conditionOperator=this.conditionOperator||F.ScheduleAlertConditionOperator.GREATER_THAN,this.conditionOperand=this.conditionOperand||0):(delete this.conditionOperator,delete this.conditionOperand)}}NS.$inject=["$element"];const MS={bindings:{useCondition:"=",conditionOperator:"=",conditionOperand:"=",ngDisabled:"<",scheduleType:"<"},controller:NS,template:'\n  <ng-form name="scheduleAlertConditionSelector">\n    <md-input-container class="md-block">\n      <label>{{:: \'savedSearch.SEND_NOTIFICATION\' | i18nText }}</label>\n      <md-select name="useCondition" ng-model="$ctrl.useCondition" ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n        <md-option ng-value="false" ng-if="!$ctrl.disableSearchCompleteOption">\n          {{:: \'savedSearch.SEARCH_COMPLETION\' | i18nText }}\n        </md-option>\n        <md-option ng-value="true">\n          {{:: \'savedSearch.BELOW_CONDITION\' | i18nText }}\n        </md-option>\n      </md-select>\n      <div ng-messages="scheduleAlertConditionSelector.useCondition.$error">\n        <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n      </div>\n    </md-input-container>\n    <div layout="row">\n      <md-input-container ng-if="$ctrl.useCondition" class="schedule-alert-condition__field" flex="70">\n        <label>{{:: \'savedSearch.ALERT_CONDITION\' | i18nText }}</label>\n        <md-select name="conditionOperator" ng-model="$ctrl.conditionOperator"\n          ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.scheduleAlertConditionOperatorOptions">\n            {{:: option.label | i18nText }}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleAlertConditionSelector.conditionOperator.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container ng-if="$ctrl.useCondition" class="schedule-alert-condition__field" flex="30">\n        <label>{{:: \'savedSearch.NUMBER_OF_RESULTS\' | i18nText }}</label>\n        <input name="conditionOperand" type="number" ng-model="$ctrl.conditionOperand"\n          ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n        <div ng-messages="scheduleAlertConditionSelector.conditionOperator.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n    </div>\n  </div>'};class kS{constructor(e,t){this.$element=e,this.currentUserHelper=t,this.alertType=F.ScheduleAlertType.EMAIL,this.scheduleAlertType=F.ScheduleAlertType,this.scheduleAlertOptions=g.scheduleAlertOptions,this.enableErrorEmails=e=>{this.muteErrorEmails=!e},t.hasFeatureFlag("UILookupsSchedulingOption")&&!this.scheduleAlertOptions.some((e=>e.value===F.ScheduleAlertType.SAVE_TO_LOOKUP))&&this.scheduleAlertOptions.push((0,g.option)(F.ScheduleAlertType.SAVE_TO_LOOKUP,"savedSearch.ALERT_LOOKUP")),t.hasFeatureFlag("UIScheduledSearchCseSignal")&&t.hasPrivilege("CSEAccess")&&!this.scheduleAlertOptions.some((e=>e.value===F.ScheduleAlertType.CSE_SIGNAL))&&this.scheduleAlertOptions.splice(2,0,(0,g.option)(F.ScheduleAlertType.CSE_SIGNAL,"savedSearch.CSE_SIGNAL"))}updateSettings(){let e=this.settings=this.allSettings[this.alertType];if(!e){const t={notificationType:this.alertType},i={itemizeAlerts:!1,maxItemizedAlerts:g.defaultMaxItemizedAlerts},r=this.shouldShowItemizeAlerts&&this.alertType===F.ScheduleAlertType.WEBHOOK;e=this.settings=this.allSettings[this.alertType]=Object.assign(Object.assign({},t),r?i:{})}this.onChange({settings:e})}$onInit(){this.shouldShowItemizeAlerts=this.currentUserHelper.hasFeatureFlag("UISearchScheduleItemizeAlerts"),this.$element.addClass("schedule-alert-selector"),this.allSettings={},this.settings&&this.settings.notificationType?(this.alertType=this.settings.notificationType,this.allSettings[this.alertType]=this.settings):(this.alertType=F.ScheduleAlertType.EMAIL,this.updateSettings())}isSearchRealTimeOrEveryMinute(){return this.scheduleType===F.ScheduleFrequencyType.REAL_TIME||this.scheduleType===F.ScheduleFrequencyType.EVERY_MINUTE}getDefaultEmailSubject(){return this.useCondition?"savedSearch.EMAIL_SUB_WITH_COND_DEFAULT":"savedSearch.EMAIL_SUB_DEFAULT"}}kS.$inject=["$element","currentUserHelper"];const LS={bindings:{settings:"=",muteErrorEmails:"=",scheduleType:"<",ngDisabled:"<",useCondition:"<",onChange:"&"},controller:kS,template:'\n    <ng-form name="scheduleAlertSelector">\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_TYPE\' | i18nText }}</label>\n        <md-select name="alertType" ng-model="$ctrl.alertType" required\n          ng-disabled="$ctrl.ngDisabled"\n          ng-change="$ctrl.updateSettings();">\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.scheduleAlertOptions" ng-if="option.flag ? option.flag() : true">\n            {{:: option.label | i18nText }}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleAlertSelector.alertType.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n\n      <md-input-container ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.EMAIL" class="md-block md-input-has-value">\n        <ux-toggle on="!$ctrl.muteErrorEmails" on-change="$ctrl.enableErrorEmails" disabled="$ctrl.ngDisabled"></ux-toggle>\n        <label class="ux-toggle__label">{{:: \'savedSearch.EMAIL_ON_FAILURE\' | i18nText }}</label>\n      </md-input-container>\n\n      <schedule-alert-email-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.EMAIL"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.EMAIL]"\n        disable-histogram="$ctrl.isSearchRealTimeOrEveryMinute()"\n        default-subject="$ctrl.getDefaultEmailSubject()"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-email-selector>\n\n      <schedule-alert-source-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.SOURCE"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.SOURCE]"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-source-selector>\n\n      <schedule-alert-cse-signal-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.CSE_SIGNAL"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.CSE_SIGNAL]"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-cse-signal-selector>\n\n      <schedule-alert-webhook-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.WEBHOOK"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.WEBHOOK]"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-webhook-selector>\n\n      <schedule-alert-service-now-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.SERVICE_NOW"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.SERVICE_NOW]"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-service-now-selector>\n\n      <schedule-alert-view-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.SAVE_TO_VIEW"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.SAVE_TO_VIEW]"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-view-selector>\n\n      <schedule-alert-lookup-selector\n        ng-if="$ctrl.alertType === $ctrl.scheduleAlertType.SAVE_TO_LOOKUP"\n        settings="$ctrl.allSettings[$ctrl.scheduleAlertType.SAVE_TO_LOOKUP]"\n        ng-disabled="$ctrl.ngDisabled"></schedule-alert-lookup-selector>\n    </ng-form>\n  '};class PS{constructor(e,t,i,r,n){this.i18n=e,this.fieldInlineWarningHelper=t,this.currentUserHelper=i,this.$scope=r,this.safeApply=n,this.emailRecipientsString="",this.invalidVars="",this.emailSubjectTooltip=(()=>{const e=`\n    <div class="sch_srch_help">\n      <div class="ssh_header">${this.i18n.get("savedSearch.E_S_HEADER")}</div>\n      <div class="ssh_sub_header">${this.i18n.get("savedSearch.E_S_SUB_HEADER")}</div>\n      <div class="ssh_sub_list">\n        <% _.each(variables, function(v){ %>\n        <div class="ssh_sub_row">\n          <i class="fa fa-square" aria-hidden="true"></i>\n          <span class="ssh_v"><%=v.key%>: </span>\n          <span class="ssh_d"><%=v.desc%></span>\n        </div>\n        <%\n        });\n        %>\n      </div>\n     </div>\n    `,t=[{key:"{{DetectionMethod}}",desc:this.i18n.get("savedSearch.E_S_ALERT_CONDITION")},{key:"{{TriggerTime}}",desc:this.i18n.get("savedSearch.E_S_FIRE_TIME")},{key:"{{NumQueryResults}}",desc:this.i18n.get("savedSearch.E_S_RAW_RESULTS")},{key:"{{Name}}",desc:this.i18n.get("savedSearch.E_S_SEARCH_NAME")},{key:"{{TriggerTimeRange}}",desc:this.i18n.get("savedSearch.E_S_TIME_RANGE")}];return _.template(e)({variables:t})})(),this.validateTemplatingField=this.fieldInlineWarningHelper.validateTemplatingField.bind(this.fieldInlineWarningHelper),this.handleEmailSubjectBlur=({currentTarget:e},t)=>{this.invalidVars=this.fieldInlineWarningHelper.getInvalidTemplateVars(e.value,"email").join(", "),this.safeApply(this.$scope,(()=>{t.emailSubject.$setValidity("payloadTemplateValidate",!this.invalidVars)})),this.fieldInlineWarningHelper.validateTemplatingField(e,"email",!1)},this.toggle=e=>t=>this.settings[e]=t}getDefaults(){return{notificationType:F.ScheduleAlertType.EMAIL,includeCsvAttachment:!1,includeHistogram:!0,includeQuery:!0,includeResultSet:!0,subjectTemplate:this.i18n.get(this.defaultSubject),emailRecipients:[""]}}updateEmailRecipients(){this.settings.emailRecipients=(this.emailRecipientsString||"").split(",").map((e=>e.trim()))}$onInit(){this.settings=_.defaults(this.settings,this.getDefaults()),this.emailRecipientsString=this.settings.emailRecipients.join(", ")}$onChanges(e){e.defaultSubject&&this.updateSubject()}updateSubject(){this.settings.subjectTemplate!==this.i18n.get("savedSearch.EMAIL_SUB_DEFAULT")&&this.settings.subjectTemplate!==this.i18n.get("savedSearch.EMAIL_SUB_WITH_COND_DEFAULT")||(this.settings.subjectTemplate=this.i18n.get(this.defaultSubject))}}PS.$inject=["i18n","fieldInlineWarningHelper","currentUserHelper","$scope","safeApply"];const FS={bindings:{settings:"=",ngDisabled:"<",disableHistogram:"<",defaultSubject:"<"},controller:PS,template:'\n    <ng-form name="scheduleAlertEmailSelector">\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.RECIPIENTS\' | i18nText }}</label>\n        <textarea name="emailRecipients" ng-model="$ctrl.emailRecipientsString"\n          ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled" email-list-validate\n          ng-change="$ctrl.updateEmailRecipients()" tooltip\n          tooltip-content="{{:: \'savedSearch.VALID_EMAIL_ADDRESS\' | i18nText}}"></textarea>\n        <div ng-messages="scheduleAlertEmailSelector.emailRecipients.$error">\n          <div ng-message="required">{{:: \'savedSearch.VALID_EMAIL_ADDRESS\' | i18nText }}</div>\n          <div ng-message="emailListValidate">{{:: \'savedSearch.VALID_EMAIL_ADDRESS\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.EMAIL_SUBJECT\' | i18nText }}</label>\n        <input name="emailSubject" ng-model="$ctrl.settings.subjectTemplate"\n          ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled" content-as-html="true" max-width="360"\n          tooltip tooltip-content="{{::$ctrl.emailSubjectTooltip}}" tooltip-interactive = "true" tooltip-position="right"\n          tooltip-theme="popover-large" tooltip-content-as-HTML="true" tooltip-max-width="320"\n          ng-blur="$ctrl.handleEmailSubjectBlur($event, scheduleAlertEmailSelector)">\n        <div ng-messages="scheduleAlertEmailSelector.emailSubject.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n          <div ng-message="payloadTemplateValidate">{{ \'savedSearch.invalidTemplatingVars\' | i18nText: {vars: $ctrl.invalidVars} }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block md-input-has-value">\n        <label>{{:: \'savedSearch.INCLUDE_IN_EMAIL\' | i18nText }}</label>\n        <div>\n          <ux-toggle on="$ctrl.settings.includeQuery" on-change="$ctrl.toggle(\'includeQuery\')" disabled="$ctrl.ngDisabled"></ux-toggle>\n          <label class="ux-toggle__label">{{:: \'savedSearch.EMAIL_SEARCH_QUERY\' | i18nText }}</label>\n        </div>\n        <div>\n          <ux-toggle on="$ctrl.settings.includeResultSet"\n            on-change="$ctrl.toggle(\'includeResultSet\')" disabled="$ctrl.ngDisabled"></ux-toggle>\n          <label class="ux-toggle__label">{{:: \'savedSearch.EMAIL_RESULT_SET\' | i18nText }}</label>\n        </div>\n        <div ng-if="!$ctrl.disableHistogram">\n          <ux-toggle on="$ctrl.settings.includeHistogram"\n            on-change="$ctrl.toggle(\'includeHistogram\')" disabled="$ctrl.ngDisabled"></ux-toggle>\n          <label class="ux-toggle__label">{{:: \'savedSearch.HISTOGRAM\' | i18nText }}</label>\n        </div>\n        <div>\n          <ux-toggle on="$ctrl.settings.includeCsvAttachment"\n            on-change="$ctrl.toggle(\'includeCsvAttachment\')" disabled="$ctrl.ngDisabled"></ux-toggle>\n          <label class="ux-toggle__label">{{:: \'savedSearch.EMAIL_CSV\' | i18nText }}</label>\n        </div>\n      </md-input-container>\n    </ng-form>\n  '};const US={bindings:{settings:"=",ngDisabled:"<"},controller:class{getDefaults(){return{notificationType:F.ScheduleAlertType.SOURCE,bladeId:null}}getSourceBlades(){return(0,D.legacyHttpGet)("/json/v1/collector/bladesOfType",{params:{bladeType:"AlertBlade"}}).then((({bladesInfo:e})=>e))}$onInit(){this.settings=this.settings||this.getDefaults(),this.getSourceBlades().then((e=>{this.sourceBlades=e}))}},template:'\n  <load-placeholder loading="$ctrl.sourceBlades">\n    <div ng-show="!$ctrl.sourceBlades.length" class="field-error field-error--push-above"\n      ng-bind-html="\'savedSearch.NO_ALERT_BLADES\' | i18nText">\n    </div>\n\n    <ng-form name="scheduleAlertSourceSelector" ng-show="$ctrl.sourceBlades.length">\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_SOURCE\' | i18nText }}</label>\n        <md-select name="bladeId" ng-model="$ctrl.settings.bladeId" ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n          <md-option ng-value="option.bladeId" ng-repeat="option in $ctrl.sourceBlades">\n            {{::option.collectorName}} - {{::option.bladeName}}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleAlertSourceSelector.bladeId.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n        <div ng-if="$ctrl.settings.bladeId === -1">{{:: \'savedSearch.ALERT_SOURCE_DELETED\' | i18nText }}</div>\n      </md-input-container>\n    </ng-form>\n  </load-placeholder>\n  '};const VS={bindings:{settings:"=",ngDisabled:"<"},controller:class{constructor(){this.settings=null,this.cseSignalRecordTypeOptions=g.cseSignalRecordTypeOptions,this.recordType=null}getDefaults(){return{notificationType:F.ScheduleAlertType.CSE_SIGNAL}}$onInit(){this.settings=this.settings||this.getDefaults()}},template:'\n    <ng-form class="md-block" name="scheduleAlertCseSignalSelector" ng-show="$ctrl.cseSignalRecordTypeOptions">\n      <md-input-container class="md-block saved-search-cse-signal-container">\n        <label>{{:: \'savedSearch.RECORD_TYPE\' | i18nText }}</label>\n        <md-select name="recordType" ng-model="$ctrl.settings.recordType" ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n          <md-option ng-value="recordTypeOption.recordType" ng-repeat="recordTypeOption in $ctrl.cseSignalRecordTypeOptions">\n            {{:: recordTypeOption.label | i18nText }}\n          </md-option>\n        </md-select>\n      </md-input-container>\n    </ng-form>\n  '};var BS=i(91133);class $S{constructor(e,t,i,r){this.fieldInlineWarningHelper=e,this.$scope=t,this.safeApply=i,this.$element=r,this.maxMaxItemizedAlerts=100,this.isCodeEditorEnabled=!1,this.isInvalidVariableDisallowed=!1,this.allowVariableOnTheKeyField=!1,this.templateVariableType="scheduledSearchWebhook",this.invalidVars="",this.codeEditorValidationOptions={},this.handleCodeEditorChange=_.debounce(((e,t,i)=>{this.safeApply(this.$scope,(()=>{this.settings.payload=i}))}),200),this.handleCodeEditorBlur=()=>{const e=this.$element.find("[name=payload]").get(0);if(this.invalidVars=this.fieldInlineWarningHelper.getInvalidTemplateVars(e.value,"connection").join(", "),this.form&&this.safeApply(this.$scope,(()=>{this.form.payload.$setValidity("payloadTemplateValidateWithoutCodeEditor",!this.invalidVars)})),this.isCodeEditorEnabled){const e=_.getPath(this.cm,"state.lint.marked")||[];this.form&&this.safeApply(this.$scope,(()=>{this.form.payload.$setValidity("payloadTemplateValidate",SumoUtil.isValidJsonPayload(e))}))}else this.fieldInlineWarningHelper.validateTemplatingField(e,this.templateVariableType,!1)},this.codeEditorDidMount=e=>{this.cm=e,this.cm&&this.settings.payload&&this.cm.setValue(this.settings.payload)},this.handleCodeEditorFocus=e=>{!this.ngDisabled&&this.settings.overridePayload&&e.payload.$setTouched()},this.setForm=e=>{this.form=e},this.updateWebhookConnectionPayload=e=>{this.settings.overridePayload=e,this.settings.overridePayload||this.updateWebhookConnection()},this.isCodeEditorEnabled=E.currentUserHelper.hasFeatureFlag("UIConciergeWebhookCodeEditor"),this.isInvalidVariableDisallowed=E.currentUserHelper.hasFeatureFlag("UIDisallowInvalidVariable"),this.allowVariableOnTheKeyField=E.currentUserHelper.hasFeatureFlag("UIAllowVariablesAsKeys");const{universal:n,scheduledSearch:a}=(0,g.getTemplateVariables)(),s=[...n,...a],o=g.UNIVERSAL_USER_DEFINED_VARIABLES;this.codeEditorValidationOptions={disallowInvalidVariable:this.isInvalidVariableDisallowed,allowVariableOnTheKeyField:this.allowVariableOnTheKeyField,validVariables:s,userDefinedVariables:o}}getDefaults(){const e={notificationType:F.ScheduleAlertType.WEBHOOK,webhookId:null,overridePayload:!1,payload:""},t=Object.assign(Object.assign({},e),{itemizeAlerts:!1,maxItemizedAlerts:g.defaultMaxItemizedAlerts});return this.shouldShowItemizeAlerts?t:e}getConnections(){const e=e=>"Webhook"in e;return(E.currentUserHelper.hasFeatureFlag("UIConnectionsUseOpenApi")?(0,BS.getConnectionsInLegacyFormat)():(0,D.legacyHttpGet)("/json/v1/connection")).then((({endpoints:t})=>t.filter(e).map((({Webhook:e})=>e))))}updateWebhookConnection(){var e;const t=(null===(e=this.connectionsMap[this.settings.webhookId])||void 0===e?void 0:e.defaultPayload)||"";this.settings.payload=t,this.cm&&this.cm.getDoc().setValue(t),this.form&&(this.form.payload.$setValidity("payloadTemplateValidate",!0),this.form.payload.$setValidity("payloadTemplateValidateWithoutCodeEditor",!0),this.form.payload.$setUntouched())}isSchedulerVisible(){return!this.editSavedSearchCtrl||this.editSavedSearchCtrl.isSchedulerVisible}itemizedAlertToggle(){this.settings.itemizeAlerts||this.settings.maxItemizedAlerts||(this.settings.maxItemizedAlerts=this.savedItemizedAlertMax)}$onInit(){this.itemizedAlertMaxPattern=/^[1-9][0-9]?$|^100$/,this.shouldShowItemizeAlerts=E.currentUserHelper.hasFeatureFlag("UISearchScheduleItemizeAlerts"),this.settings=this.settings||this.getDefaults(),this.savedItemizedAlertMax=this.settings.maxItemizedAlerts,this.getConnections().then((e=>{this.connections=_.compact(e),this.connectionsMap=_.indexBy(e,"id"),this.settings.webhookId&&!this.settings.overridePayload&&this.updateWebhookConnection()})),this.maxMaxItemizedAlerts=parseInt(E.currentUserHelper.getDynamicProperty("concierge_scheduledSearch_webhook_maxMaxItemizedAlerts"))}}$S.$inject=["fieldInlineWarningHelper","$scope","safeApply","$element"];const HS={bindings:{settings:"=",ngDisabled:"<"},require:{editSavedSearchCtrl:"^?editSavedSearch"},controller:$S,template:'\n  <load-placeholder loading="$ctrl.connections">\n    <div ng-show="!$ctrl.connections.length" ng-bind-html="\'savedSearch.NO_WEBHOOK_AVAILABLE\' | i18nText"\n      class="field-error field-error--push-above">\n    </div>\n    <ng-form name="scheduleAlertWebhookSelector" ng-show="$ctrl.connections.length">\n      <div ng-init="$ctrl.setForm(scheduleAlertWebhookSelector)"></div>\n      <div class="itemized-alerts-container" ng-if="$ctrl.shouldShowItemizeAlerts">\n        <div class="itemized-alerts-checkbox-container">\n          <md-checkbox ng-model="$ctrl.settings.itemizeAlerts" ng-change="$ctrl.itemizedAlertToggle()" name="itemizeAlerts" id="itemized-alerts" data-sumo-test="itemizeAlerts">\n            <span data-sumo-test="itemizedAlertOptionText">{{:: \'savedSearch.CREATE_ITEMIZED_ALERTS\' | i18nText }}</span>\n          </md-checkbox>\n        </div>\n        <div class="itemized-alerts-max">\n          <md-input-container ng-if="$ctrl.settings.itemizeAlerts" class="itemized-alerts-max-input" flex="40">\n            <label>{{:: \'savedSearch.MAX_ITEMIZED_ALERTS_TEXT\' | i18nText }}</label>\n            <input data-sumo-test="itemizedAlertInput" name="maxItemizedAlerts" type="number" ng-model="$ctrl.settings.maxItemizedAlerts" min="1" max="{{$ctrl.maxMaxItemizedAlerts}}"\n              ng-required="$ctrl.settings.itemizeAlerts" ng-disabled="!$ctrl.settings.itemizeAlerts" ng-pattern="/^[0-9]+$/">\n              <div ng-messages="scheduleAlertWebhookSelector.maxItemizedAlerts.$error">\n                <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n                <div data-sumo-test="itemizedAlertMaxError" ng-message="max">{{:: \'savedSearch.MAX_ITEMIZED_ALERTS_TICKETS_ERROR\' | i18nText: $ctrl.maxMaxItemizedAlerts }}</div>\n                <div data-sumo-test="itemizedAlertMinError" ng-message="min">{{:: \'savedSearch.MIN_ITEMIZED_ALERTS_TICKETS_ERROR\' | i18nText }}</div>\n                <div data-sumo-test="itemizedAlertWholeError" ng-message="pattern">{{:: \'savedSearch.WHOLE_NO_ITEMIZED_ALERTS_TICKETS_ERROR\' | i18nText }}</div>\n                <div data-sumo-test="itemizedAlertNumberError" ng-message="number">{{:: \'savedSearch.NUMBER_ITEMIZED_ALERTS_TICKETS_ERROR\' | i18nText }}</div>\n                </div>\n          </md-input-container>\n        </div>\n      </div>\n\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_CONNECTION_CONNECTION\' | i18nText }}</label>\n        <md-select name="webhookId" ng-model="$ctrl.settings.webhookId" ng-required="!$ctrl.ngDisabled"\n          ng-disabled="$ctrl.ngDisabled" ng-change="$ctrl.updateWebhookConnection()">\n          <md-option ng-value="option.id" ng-repeat="option in $ctrl.connections">\n            {{::option.name}}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleAlertWebhookSelector.webhookId.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block md-input-has-value">\n        <ux-toggle on="$ctrl.settings.overridePayload"\n          on-change="$ctrl.updateWebhookConnectionPayload" disabled="$ctrl.ngDisabled"></ux-toggle>\n        <label class="ux-toggle__label">{{:: \'savedSearch.ALERT_WEBHOOK_OVERRIDE_PAYLOAD\' | i18nText }}</label>\n      </md-input-container>\n      <md-input-container class="md-block payload-container" ng-if="$ctrl.isSchedulerVisible() && $ctrl.isCodeEditorEnabled">\n        <label class="textarea-code-label">{{:: \'savedSearch.ALERT_WEBHOOK_PAYLOAD\' | i18nText }}</label>\n        <input ng-hide="true" name="payload" ng-model="$ctrl.settings.payload" json-validate ng-required="true"></input>\n        <code-editor class="textarea-code" editor-did-mount="$ctrl.codeEditorDidMount" on-change="$ctrl.handleCodeEditorChange"\n          read-only="$ctrl.ngDisabled || !$ctrl.settings.overridePayload" language="\'mustacheJson\'"\n          options="$ctrl.codeEditorValidationOptions"\n          on-blur="$ctrl.handleCodeEditorBlur" ng-click="$ctrl.handleCodeEditorFocus(scheduleAlertWebhookSelector)">\n        </code-editor>\n        <div ng-messages="scheduleAlertWebhookSelector.payload.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n          <div ng-message="jsonValidate">{{:: \'savedSearch.invalidPayloadJSON\' | i18nText }}</div>\n          <div ng-message="payloadTemplateValidate">{{:: \'savedSearch.invalidPayloadTemplate\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block payload-container" ng-if="$ctrl.isSchedulerVisible() && !$ctrl.isCodeEditorEnabled">\n        <label>{{:: \'savedSearch.ALERT_WEBHOOK_PAYLOAD\' | i18nText }}</label>\n        <textarea name="payload" class="textarea-code" ng-model="$ctrl.settings.payload"\n          ng-disabled="$ctrl.ngDisabled || !$ctrl.settings.overridePayload" ng-required="true"\n          ng-blur="$ctrl.handleCodeEditorBlur()"\n          json-validate max-rows="16"></textarea>\n        <div ng-messages="scheduleAlertWebhookSelector.payload.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n          <div ng-message="jsonValidate">{{:: \'savedSearch.invalidPayloadJSON\' | i18nText }}</div>\n          <div ng-message="payloadTemplateValidateWithoutCodeEditor">{{ \'savedSearch.invalidTemplatingVars\' | i18nText: {vars: $ctrl.invalidVars} }}</div>\n        </div>\n      </md-input-container>\n    </ng-form>\n  </load-placeholder>\n  '};const WS={bindings:{settings:"=",ngDisabled:"<"},controller:class{constructor(){this.serviceNowSeverityOptions=g.serviceNowSeverityOptions}getDefaults(){return{notificationType:F.ScheduleAlertType.SERVICE_NOW,thirdPartyId:null}}getConnections(){const e=E.currentUserHelper.hasFeatureFlag("UIConnectionsUseOpenApi"),t=e=>"ServiceNow"in e;return(e?(0,BS.getConnectionsInLegacyFormat)():(0,D.legacyHttpGet)("/json/v1/connection")).then((({endpoints:e})=>e.filter(t).map((({ServiceNow:e})=>e))))}$onInit(){this.settings=this.settings||this.getDefaults(),this.getConnections().then((e=>{this.connections=_.compact(e)}))}},template:'\n  <load-placeholder loading="$ctrl.connections">\n    <div ng-show="!$ctrl.connections.length" ng-bind-html="\'savedSearch.NO_SNOW_AVAILABLE\' | i18nText "\n      class="field-error field-error--push-above">\n    </div>\n    <ng-form name="scheduleAlertServiceNowSelector" ng-show="$ctrl.connections.length">\n      <div class="scheduled-search-settings-row connection-alert">\n        {{:: \'savedSearch.ALERT_CONNECTION_SEARCH_VALUES_NOTE\' | i18nText }}\n      </div>\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_CONNECTION_CONNECTION\' | i18nText }}</label>\n        <md-select name="connection" ng-model="$ctrl.settings.thirdPartyId" ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n          <md-option ng-value="option.id" ng-repeat="option in $ctrl.connections">\n            {{::option.name}}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleAlertServiceNowSelector.connection.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_CONNECTION_SNOWSEVERITY\' | i18nText }}</label>\n        <md-select name="snowSeverity" ng-model="$ctrl.settings.snowSeverity"\n          ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.serviceNowSeverityOptions">\n            {{::option.label | i18nText}}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleAlertServiceNowSelector.snowSeverity.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_CONNECTION_SNOWTYPE\' | i18nText }}</label>\n        <input name="snowType" ng-model="$ctrl.settings.snowType" ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n        <div ng-messages="scheduleAlertServiceNowSelector.snowType.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_CONNECTION_SNOWNODE\' | i18nText }}</label>\n        <input name="snowNode" ng-model="$ctrl.settings.snowNode" ng-required="!$ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled">\n        <div ng-messages="scheduleAlertServiceNowSelector.snowNode.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.ALERT_CONNECTION_SNOWRESOURCE\' | i18nText }}</label>\n        <input ng-model="$ctrl.settings.snowResource" ng-disabled="$ctrl.ngDisabled">\n      </md-input-container>\n    </ng-form>\n  </load-placeholder>\n  '};const qS={bindings:{settings:"=",ngDisabled:"<"},controller:class{getDefaults(){return{notificationType:F.ScheduleAlertType.SAVE_TO_VIEW,viewName:""}}$onInit(){this.settings=this.settings||this.getDefaults()}},template:'\n    <ng-form name="scheduleAlertViewSelector">\n      <md-input-container class="md-block">\n        <label>{{:: \'savedSearch.VIEW_NAME_HELPER\' | i18nText }}</label>\n        <input name="viewName" ng-model="$ctrl.settings.viewName"\n          ng-required="!$ctrl.ngDisabled" name-validate ng-disabled="$ctrl.ngDisabled">\n        <div ng-messages="scheduleAlertViewSelector.viewName.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n          <div ng-message="nameValidate">{{:: \'savedSearch.BAD_VIEW_NAME\' | i18nText}}</div>\n        </div>\n      </md-input-container>\n    </ng-form>\n  '};class jS{constructor(e){this.$scope=e,this.settings={notificationType:F.ScheduleAlertType.SAVE_TO_LOOKUP,lookupFilePath:"",isMerge:!0},this.ngDisabled=!0,this.filter=["LOOKUP"],this.selectedItem=void 0}getDefaults(){return{notificationType:F.ScheduleAlertType.SAVE_TO_LOOKUP,lookupFilePath:"",isMerge:!1}}$onInit(){this.settings=this.settings||this.getDefaults(),this.$scope.$watch((()=>this.selectedItem),this.checkSelectedItem.bind(this))}checkSelectedItem(){this.selectedItem&&"LOOKUP"===this.selectedItem.type&&this.selectedItem.id&&g.contentItemService.getFullPath(this.selectedItem.id).then((e=>{this.settings.lookupFilePath=e,this.form&&this.form.lookupFile.$setValidity("required",!0)}))}setForm(e){this.form=e}}jS.$inject=["$scope"];const QS={bindings:{settings:"=",ngDisabled:"<"},controller:jS,template:'\n    <ng-form name="scheduleAlertLookupSelector">\n      <div ng-init="$ctrl.setForm(scheduleAlertLookupSelector)"></div>\n      <md-input-container class="md-block saved-search-lookup-container">\n          <label class="saved-search-lookup-label">{{:: \'savedSearch.LOOKUP_NAME_HELPER\' | i18nText }}</label>\n          <input ng-hide="true" name="lookupFile" ng-model="$ctrl.settings.lookupFilePath" ng-required="true"></input>\n          <div>{{:: \'savedSearch.LOOKUP_PATH\' | i18nText }}: {{$ctrl.settings.lookupFilePath}} </div>\n          <root-content-selector selected-item="$ctrl.selectedItem"\n            class="library-action-root-selector saved-search-lookup-selector create-content-search__location__root-selector" item-types="$ctrl.filter">\n          </root-folder-selector>\n          <div ng-messages="scheduleAlertLookupSelector.lookupFile.$error">\n            <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n          </div>\n      </md-input-container>\n      <md-input-container class="md-block">\n        <label class="saved-search-lookup-label">{{ ::\'savedSearch.LOOKUP_SAVE_METHOD\' | i18nText }}</label>\n        <input ng-hide="true" name="lookupAction" ng-model="$ctrl.settings.isMerge" ng-required="true"></input>\n        <md-radio-group name="lookupAction" ng-model="$ctrl.settings.isMerge" ng-required="true" class="saved-search-lookup-radio">\n          <md-radio-button class="saved-search-lookup-radio-button" ng-value="false" data-sumo-test="lookup-schedule-radio-button-fullreplace">{{ ::\'savedSearch.LOOKUP_SAVE_FULL_REPLACE\' | i18nText }}</md-radio-button>\n          <md-radio-button class="saved-search-lookup-radio-button" ng-value="true" data-sumo-test="lookup-schedule-radio-button-merge">{{ ::\'savedSearch.LOOKUP_SAVE_MERGE\' | i18nText }}</md-radio-button>\n        </md-radio-group>\n        <div ng-messages="scheduleAlertLookupSelector.lookupAction.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n    </ng-form>\n  '};function zS(e){return e.frequency===F.ScheduleFrequencyType.WEEKLY?sprintf(g.frequencyCronWeeklyValues[e.weeklyFrequency||""],e.time):e.frequency===F.ScheduleFrequencyType.DAILY?sprintf(g.frequencyCronDailyValues[e.dailyFrequency||""],e.time):e.frequency===F.ScheduleFrequencyType.CUSTOM?e.cron:g.frequencyCronValues[e.frequency]}function GS(e){e=e.replace(/\s+/g," ");let t,i=g.frequencyCronValues.inverseMap[e];if(i)return{frequency:i,cron:e};const r=e.replace(/(0 0 )([0-9]+)( \? \* [1-7,-]+ \*)/,((e,i,r,n)=>(t=parseInt(r,10),`${i}%d${n}`))),n=g.frequencyCronWeeklyValues.inverseMap[r],a=g.frequencyCronDailyValues.inverseMap[r];return i=n?F.ScheduleFrequencyType.WEEKLY:a?F.ScheduleFrequencyType.DAILY:F.ScheduleFrequencyType.CUSTOM,{frequency:i,weeklyFrequency:n,dailyFrequency:a,time:t,cron:e}}class KS{constructor(e,t,i){this.$element=e,this.i18n=t,this.currentUserHelper=i,this.scheduleFrequencyOptions=g.scheduleFrequencyOptions,this.scheduleFrequencyWeeklyOptions=g.scheduleFrequencyWeeklyOptions,this.scheduleFrequencyDailyOptions=g.scheduleFrequencyDailyOptions,this.scheduleFrequencyTimeOptions=(()=>{const e=[];for(let t=0;t<24;t++)e[t]={value:t,label:t+":00"},0===t&&(e[t].label+=` (${this.i18n.get("savedSearch.MIDNIGHT")})`),12===t&&(e[t].label+=` (${this.i18n.get("savedSearch.NOON")})`);return e})(),this.shouldDisplayRam2Message=!1,this.shouldDisplayRam3Message=!1,this.frequency=F.ScheduleFrequencyType.NEVER}isFrequencyWeekly(){return this.frequency===F.ScheduleFrequencyType.WEEKLY}isFrequencyDaily(){return this.frequency===F.ScheduleFrequencyType.DAILY}isFrequencyCustom(){return this.frequency===F.ScheduleFrequencyType.CUSTOM}getDefaults(){let e=new Date;const t=e.getMinutes();return 2*t>=60&&(e=new Date(+e+60*(60-t)*1e3)),{frequency:F.ScheduleFrequencyType.NEVER,weeklyFrequency:this.scheduleFrequencyWeeklyOptions[e.getDay()].value,dailyFrequency:F.ScheduleFrequencyDailyType.EVERY_WEEKDAY,time:this.scheduleFrequencyTimeOptions[e.getHours()].value,cron:""}}getState(){return this.frequency===F.ScheduleFrequencyType.CUSTOM?{frequency:this.frequency,cron:this.cron}:{frequency:this.frequency,weeklyFrequency:this.weeklyFrequency,dailyFrequency:this.dailyFrequency,time:this.time,cron:zS(this)}}updateState(){const e=this.getState(),t=this.getDefaults();Object.assign(this,t,e),this.frequency===F.ScheduleFrequencyType.CUSTOM&&(this.cron=""),this.shouldDisplayRam2Message=this.currentUserHelper.hasFeatureFlag("UIScheduledSearchRam2Message")&&this.frequency===F.ScheduleFrequencyType.EVERY_15_MIN,this.shouldDisplayRam3Message=this.currentUserHelper.hasFeatureFlag("UIScheduledSearchRam3Message")&&this.frequency!==F.ScheduleFrequencyType.NEVER&&this.frequency!==F.ScheduleFrequencyType.REAL_TIME&&this.frequency!==F.ScheduleFrequencyType.EVERY_MINUTE&&this.frequency!==F.ScheduleFrequencyType.EVERY_15_MIN&&this.frequency!==F.ScheduleFrequencyType.CUSTOM,this.onChange(e)}$onInit(){var e;this.$element.addClass("schedule-frequency-selector");const t=GS(null!==(e=this.cron)&&void 0!==e?e:"");let i=this.getState();const r=this.getDefaults();i=i.frequency===F.ScheduleFrequencyType.CUSTOM?{frequency:i.frequency}:{},Object.assign(this,r,t,i)}}KS.$inject=["$element","i18n","currentUserHelper"],KS.cronToFrequency=GS,KS.frequencyToCron=zS;const YS={bindings:{frequency:"=",cron:"=",onChange:"&"},controller:KS,template:'\n    <ng-form name="scheduleFrequencySelector" layout="row">\n      <md-input-container flex>\n        <label>{{:: \'savedSearch.RUN_FREQUENCY\' | i18nText }}</label>\n        <md-select ng-model="$ctrl.frequency" ng-change="$ctrl.updateState();" required class="frequency-selector">\n          <md-option ng-value="option.value"\n            ng-repeat="option in $ctrl.scheduleFrequencyOptions"\n            ng-if="option.flag ? option.flag() : true">\n            {{:: option.label | i18nText }}\n          </md-option>\n        </md-select>\n      </md-input-container>\n      <md-input-container ng-if="$ctrl.isFrequencyWeekly()" flex="30">\n        <label>{{:: \'savedSearch.EVERY_TEXT\' | i18nText }}</label>\n        <md-select ng-model="$ctrl.weeklyFrequency" ng-change="$ctrl.updateState()" required>\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.scheduleFrequencyWeeklyOptions">\n            {{:: option.label | i18nText }}\n          </md-option>\n        </md-select>\n      </md-input-container>\n      <md-input-container ng-if="$ctrl.isFrequencyDaily()" flex="30">\n        <label>{{:: \'savedSearch.EVERY_TEXT\' | i18nText }}</label>\n        <md-select ng-model="$ctrl.dailyFrequency" ng-change="$ctrl.updateState()" required>\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.scheduleFrequencyDailyOptions"\n            data-qa="frequency-daily-options">\n            {{:: option.label | i18nText }}\n          </md-option>\n        </md-select>\n      </md-input-container>\n      <md-input-container ng-if="$ctrl.isFrequencyWeekly() || $ctrl.isFrequencyDaily()" flex="30">\n        <label>{{:: \'savedSearch.TIME\' | i18nText }}</label>\n        <md-select ng-model="$ctrl.time" ng-change="$ctrl.updateState()" required>\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.scheduleFrequencyTimeOptions">\n            {{:: option.label }}\n          </md-option>\n        </md-select>\n      </md-input-container>\n      <md-input-container ng-if="$ctrl.isFrequencyCustom()" flex="60" class="saved-search-cron-input-container">\n        <label>{{:: \'savedSearch.CUSTOM_CRON_LABEL\' | i18nText }}</label>\n        <input name="cron" ng-model="$ctrl.cron" required cron-expression-validate\n          ng-required="!$ctrl.ngDisabled" content-as-html="true" max-width="360"\n          tooltip tooltip-content="{{::\'savedSearch.CUSTOM_HELP\' | i18nText}}" tooltip-interactive="true"\n          tooltip-position="right" tooltip-theme="popover-large" tooltip-content-as-HTML="true"\n          tooltip-max-width="320">\n        <div ng-messages="scheduleFrequencySelector.cron.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n          <div ng-message="cronExpressionValidate">{{:: \'savedSearch.INVALID_CRON\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n    </ng-form>\n    <div class="scheduled-search-ram-warning" ng-if="$ctrl.shouldDisplayRam2Message" >{{:: \'savedSearch.RAM2_MESSAGE\' | i18nText }}</div>\n    <div class="scheduled-search-ram-warning" ng-if="$ctrl.shouldDisplayRam3Message" >{{:: \'savedSearch.RAM3_MESSAGE\' | i18nText }}</div>\n  '};class ZS{constructor(e,t,i){this.timeRangeService=e,this.i18n=t,this.currentUserHelper=i,this.sprintf=sprintf,this.treId="tre-edit-saved-search",this.REAL_TIME_MIN_TIMERANGE=-5,this.REAL_TIME_MAX_TIMERANGE=-15,this.scanType="none",this.scannedBytesLabel="",this.queryString="",this.byReceiptTime=!1,this.infrequentScheduledSearchFF=!1,this.shouldUpdateScannedBytes=!1,this.isQueryInfrequent=!1,this.scannedBytesEnabled=!1,this.firstTimeSchedulerTypeUpdated=!1,this.infrequentPartitions=[],this.defaultTreState={custom:{visible:!0}},this.realTimeTreState={relative:{options:this.timeRangeService.getRealTimeTimeRangePresets()},custom:{visible:!1,active:!1},recent:{active:!1,visible:!1,options:[]}},this.learnMore="",this.updateAlertSettings=(e=this.alertSettings)=>{e&&(this.alertSettings=e,this.schedule.notificationDetails={[this.alertSettings.notificationType]:this.alertSettings})},this.updateTimeRange=e=>{this.schedule.displayableTimeRange=e.value,this.schedule.parseableTimeRange=e.details,this.scannedBytesObj&&(this.scannedBytesObj.timeRangeDetails=e.details),(this.isQueryInfrequent||this.scannedBytesEnabled)&&this.fetchEstimatedScannedBytes()},this.updateScheduleType=e=>{var t;const i=this.isRealTimeSchedule(e);this.treState=i?this.realTimeTreState:this.defaultTreState,(null===(t=this.scannedBytesObj)||void 0===t?void 0:t.timeRangeDetails)===this.schedule.parseableTimeRange&&!this.shouldUpdateScannedBytes||!this.isQueryInfrequent&&!this.scannedBytesEnabled||this.firstTimeSchedulerTypeUpdated||(this.firstTimeSchedulerTypeUpdated=!0,this.fetchEstimatedScannedBytes())}}$onChanges(e){e.shouldUpdateScannedBytes.currentValue&&"Never"!==this.schedule.scheduleType&&(this.checkForInfrequentQuery(),this.checkIfScannedBytesEnabled(),this.fetchEstimatedScannedBytes())}$onInit(){this.schedule.notificationDetails&&(this.alertSettings=this.schedule.notificationDetails[Object.keys(this.schedule.notificationDetails)[0]]),this.timeZoneOptions=re.TimeZoneService.getTimeZoneDropdownOptions(),this.timeZoneOptions.unshift({key:this.i18n.get("account.USE_BROWSER_TIME_ZONE"),value:""}),this.timeZoneItem=this.schedule.timeZone,this.updateAlertSettings(),this.learnMore=this.i18n.get("savedSearch.learnMore"),this.infrequentScheduledSearchFF=this.currentUserHelper.hasFeatureFlag("UISearchScheduledWithInfrequent"),this.initPartitionList(),this.checkForInfrequentQuery(),this.checkIfScannedBytesEnabled(),this.scannedBytesLabel=this.i18n.get("savedSearch.INFREQUENT_TIER_SCANNED_BYTES_ESTIMATED")}initPartitionList(){var e;if(this.infrequentScheduledSearchFF){const t=null===(e=Te.store.getState().views.search.partitionState)||void 0===e?void 0:e.data;if(t){const{infrequentPartitions:e}=(0,xh.mapPartitionsWithTier)(t);this.infrequentPartitions=e}}}checkForInfrequentQuery(){if(this.infrequentScheduledSearchFF){const e=(0,re.getMatchedInfrequentTier)(this.infrequentPartitions,this.queryString||""),t=(0,J_.extractMatchedDataTier)(this.queryString||"",!0);this.isQueryInfrequent=!(!e&&"infrequent"!==t&&"all"!==t)}}checkIfScannedBytesEnabled(){this.infrequentScheduledSearchFF&&(this.scannedBytesEnabled=(0,f.checkFeatureForQuery)({query:this.queryString||"",partitions:{infrequent:this.infrequentPartitions},feature:f.TIER_SPECIFIC_FEATURES.SCHEDULE_SEARCH_SCANNED_BYTES}))}fetchEstimatedScannedBytes(){const e={timezone:this.schedule.timeZone,queryString:this.queryString,timeRange:(0,f.convertTimeDetailsToBeginBoundedTimeRange)(this.schedule.parseableTimeRange),runByReceiptTime:this.byReceiptTime};this.showScannedBytes(!0),(0,xh.fetchEstimatedUsageDetailsByTier)(e,this.dispatchEstimatedScannedSizeDataByTier.bind(this),this.onErrorFetchingScannedBytes.bind(this))}dispatchUpdateScannedData(e){var t;Te.store.dispatch((0,J_.updateScannedData)({id:"search_save_"+(null===(t=this.scannedBytesObj)||void 0===t?void 0:t.queryId),scannedSize:e})),this.showScannedBytes(!1)}dispatchEstimatedScannedSizeDataByTier(e){const t=e.find((e=>"infrequent"===e.tier.toLowerCase())),i=_.isArray(e)&&0!==e.length&&t?{type:"estimate",estimatedScannedSizeInBytes:t.dataScannedInBytes,estimatedScannedByTier:e}:{type:"none"};this.dispatchUpdateScannedData(i)}onErrorFetchingScannedBytes(){(0,R.showCriticalNotification)({message:this.i18n.get("savedSearch.SCANNEDBYTES_API_FAILURE")})}showScannedBytes(e=!1){var t;this.infrequentScheduledSearchFF&&this.isScannedBytesSection()&&(0,xh.createScannedSizeButton)({id:"search_save_"+(null===(t=this.scannedBytesObj)||void 0===t?void 0:t.queryId),className:{scannedBtnWrapper:"scanned-btn-wrapper",scannedBtnContent:"scanned-btn-content"},apiProgressLoader:e,isEstimatedScannedSize:!0},"query-scanned-bytes-container")}isValidSchedule(){return this.schedule.scheduleType!==F.ScheduleFrequencyType.NEVER}isRealTimeSchedule(e){return e===F.ScheduleFrequencyType.REAL_TIME||e===F.ScheduleFrequencyType.EVERY_MINUTE}parseTimeRangeToMins(e){const{startTime:t,endTime:i}=ht.timeRangeUtil.parseTimeRangeValue(e);return t&&i?(t-i)/6e4:NaN}getTimeRangeErrors(e){const t=this.isRealTimeSchedule(this.schedule.scheduleType);return e.$setValidity("minTimeRange",!(t&&this.parseTimeRangeToMins(this.schedule.displayableTimeRange)>this.REAL_TIME_MIN_TIMERANGE)),e.$setValidity("maxTimeRange",!(t&&this.parseTimeRangeToMins(this.schedule.displayableTimeRange)<this.REAL_TIME_MAX_TIMERANGE)),e.$error}setTimeZone(){this.schedule.timeZone=this.timeZoneItem||re.TimeZoneService.getBrowserTimeZone()}isScannedBytesSection(){var e,t,i,r;const n=null===(r=null===(i=null===(e=Te.store.getState().views.search.logQueries)||void 0===e?void 0:e["search_save_"+(null===(t=this.scannedBytesObj)||void 0===t?void 0:t.queryId)])||void 0===i?void 0:i.usageDetails)||void 0===r?void 0:r.type;return this.scanType=n||"none",!("none"===this.scanType)&&(this.isQueryInfrequent||this.scannedBytesEnabled)}}ZS.$inject=["timeRangeService","i18n","currentUserHelper"];const XS={bindings:{schedule:"=",scannedBytesObj:"=",queryString:"=",byReceiptTime:"=",shouldUpdateScannedBytes:"<"},controller:ZS,template:'\n  <ng-form name="scheduleEditor">\n    <schedule-frequency-selector\n      frequency="$ctrl.schedule.scheduleType"\n      on-change="$ctrl.updateScheduleType(frequency)"\n      cron="$ctrl.schedule.cronSchedule"></schedule-frequency-selector>\n\n    <div ng-show="$ctrl.isValidSchedule()">\n      <div class="tre-form-container">\n        <label>{{:: \'savedSearch.TIMERANGE_FOR_SCHEDULED_SEARCH\' | i18nText }}</label>\n        <tre-input\n          tre-id="$ctrl.treId"\n          tre-state="$ctrl.treState"\n          text="$ctrl.schedule.displayableTimeRange"\n          time-zone="$ctrl.schedule.timeZone"\n          actions="{onTimeRangeChange: $ctrl.updateTimeRange}"\n          data-disabled="!$ctrl.isValidSchedule()"\n          data-required="true">\n        </tre-input>\n        <input type="hidden" ng-model="this.schedule.displayableTimeRange" name="timeRange">\n        <div ng-messages="$ctrl.getTimeRangeErrors(scheduleEditor.timeRange)">\n          <div ng-message="maxTimeRange" class="field-error">\n            {{:: $ctrl.sprintf(\'savedSearch.SCHEDULED_SEARCH_MAX_TIMERANGE_ERROR\' | i18nText, -$ctrl.REAL_TIME_MAX_TIMERANGE) }}</div>\n          <div ng-message="minTimeRange" class="field-error">\n            {{:: $ctrl.sprintf(\'savedSearch.SCHEDULED_SEARCH_MIN_TIMERANGE_ERROR\' | i18nText, -$ctrl.REAL_TIME_MIN_TIMERANGE) }}</div>\n        </div>\n      </div>\n\n      <div class="scanned-bytes-section" ng-if="$ctrl.isScannedBytesSection() && $ctrl.infrequentScheduledSearchFF">\n        <label>{{:: $ctrl.scannedBytesLabel }}</label>\n        <div id="query-scanned-bytes-container" ng-init="$ctrl.showScannedBytes()">\n        </div>\n      </div>\n\n      <md-input-container class="md-block -needs-special-padding">\n        <label>{{:: \'savedSearch.TIMEZONE_FOR_SCHEDULED_SEARCH\' | i18nText }}</label>\n        <md-select name="timeZone" ng-model="$ctrl.timeZoneItem"\n        ng-change="$ctrl.setTimeZone()" required ng-disabled="!$ctrl.isValidSchedule()">\n          <md-option ng-value="option.value" ng-repeat="option in $ctrl.timeZoneOptions">\n            {{:: option.key }}\n          </md-option>\n        </md-select>\n        <div ng-messages="scheduleEditor.timeZone.$error">\n          <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n        </div>\n      </md-input-container>\n\n      <schedule-alert-condition-selector\n        ng-disabled="!$ctrl.isValidSchedule()"\n        schedule-type="$ctrl.schedule.scheduleType"\n        use-condition="$ctrl.schedule.shouldRespectMessageThreshold"\n        condition-operator="$ctrl.schedule.messageThresholdType"\n        condition-operand="$ctrl.schedule.messageThreshold">\n      </schedule-alert-condition-selector>\n\n      <schedule-alert-selector\n        schedule-type="$ctrl.schedule.scheduleType"\n        use-condition="$ctrl.schedule.shouldRespectMessageThreshold"\n        ng-disabled="!$ctrl.isValidSchedule()"\n        on-change="$ctrl.updateAlertSettings(settings)"\n        settings="$ctrl.alertSettings"\n        mute-error-emails="$ctrl.schedule.muteErrorEmails"></schedule-alert-selector>\n\n    </div>\n  </ng-form>\n  '};class JS{constructor(e,t,i,r){this.$element=e,this.$scope=t,this.contentServiceFactory=i,this.i18n=r,this.state={folder:void 0,selectedItems:[],mode:void 0,isAdminModeEnabled:!1},this.actions={open:e=>{this.loadFolder(e.id<0?e.name.toLowerCase():e.id)},select:e=>{this.selectFolder(e)},setErrors:e=>{this.errors=e}},g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.state.isAdminModeEnabled=e})).subscribe()}$onInit(){this.$element.addClass("root-folder-selector"),this.contentService=this.contentServiceFactory.getInstance(),this.loadFolder()}$onChanges(e){_.getPath(e,"folder.currentValue")&&this.loadFolder(e.folder.currentValue.id)}showNewFolderDialog(e){g.libraryActionsService.runAction({actionType:re.ContentActionType.CREATE,event:e,params:{destinationFolderId:this.state.folder.id,type:F.CONTENT_TYPES.FOLDER}}).then((e=>{this.state.folder=Object.assign({},this.state.folder,{children:g.FolderConverter.sortChildren([...this.state.folder.children,...e.items])})}))}loadFolder(e){let t,i;t=_.isUndefined(e)?(this.state.isAdminModeEnabled?this.contentService.getRoot():this.contentService.getRootFoldersWithPermissions(F.GCRUDContentPermission.Create,F.GCRUDContentPermission.Read)).then((e=>(e.path=[this.getRootFolderPathItem()],i=e.children.find((e=>"Personal"===e.name)),e))):this.contentService.getFolder(e).then((e=>(e.path=e.path?[this.getRootFolderPathItem(),...e.path]:[this.getRootFolderPathItem()],e))),t.then((e=>{this.$scope.$evalAsync((()=>{this.state.folder=e,this.selectFolder(i||this.state.folder)}))}))}selectFolder(e){this.state.selectedItems=[e],this.folder=e}getRootFolderPathItem(){return{id:void 0,name:this.i18n.get("content.rootFolderName")}}}JS.$inject=["$element","$scope","contentServiceFactory","i18n"];const eb={bindings:{folder:"=",errors:"="},controller:JS,template:'\n    <folder-selector folder="$ctrl.state.folder" selected-items="$ctrl.state.selectedItems" actions="$ctrl.actions"></folder-selector>\n    <div class="root-folder-selector__add-folder">\n      <div class="sumo-link root-folder-selector__add-folder__button"\n           ng-click="$ctrl.showNewFolderDialog($event)" ng-if="$ctrl.state.folder.actions | containsAction:\'CREATE\'">\n        <md-icon md-svg-icon="plus" class="md-icon-label-button__icon sumo-link size-14"></md-icon>{{:: \'library.newFolder\' | i18nText}}\n      </div>\n    </div>\n  '};var tb=i(64329);class ib{constructor(e,t,i,r){this.$element=e,this.$scope=t,this.contentServiceFactory=i,this.i18n=r,this.state={folder:void 0,selectedItems:[],isAdminModeEnabled:!1},this.itemTypes=[""],this.selectedItem=void 0,this.errors=[],this.actions={open:e=>{"FOLDER"!==e.type&&e.type||this.loadFolder(e.id&&e.id<0?e.name.toLowerCase():e.id)},select:e=>{this.selectItem(e)},setErrors:e=>{this.errors=e}},g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.state.isAdminModeEnabled=e})).subscribe()}$onInit(){this.$element.addClass("root-folder-selector"),this.loadFolder()}$onChanges(e){var t;(null===(t=null==e?void 0:e.folder)||void 0===t?void 0:t.currentValue)&&this.loadFolder(e.folder.currentValue.id)}loadFolder(e){const t=this.contentServiceFactory.getInstance();let i;i=(0,tb.Z)(e)?(this.state.isAdminModeEnabled?t.getRoot():t.getRootFoldersWithPermissions(F.GCRUDContentPermission.Create,F.GCRUDContentPermission.Read)).then((e=>(e.path=[this.getRootFolderPathItem()],e))):t.getFolder(e).then((e=>(e.path=e.path?[this.getRootFolderPathItem(),...e.path]:[this.getRootFolderPathItem()],e))),i.then((e=>{this.$scope.$evalAsync((()=>this.state.folder=e))}))}selectItem(e){this.itemTypes.includes(e.type)&&(this.state.selectedItems=[e],this.selectedItem=e)}getRootFolderPathItem(){return{name:this.i18n.get("content.rootFolderName")}}}ib.$inject=["$element","$scope","contentServiceFactory","i18n"];const rb={bindings:{selectedItem:"=",errors:"=",itemTypes:"<"},controller:ib,template:'\n    <folder-selector folder="$ctrl.state.folder" selected-items="$ctrl.state.selectedItems" actions="$ctrl.actions" filter="$ctrl.itemTypes"></folder-selector>\n  '};class nb{constructor(e,t){this.scheduleInfoService=e,this.i18n=t}$onInit(){this.scheduleLabel=this.i18n.get("contentLibrary.label_schedule")}getEmailRecipients(e){this.emailRecipients=this.scheduleInfoService.getEmailRecipients(e)}getScriptInfo(e){this.scriptInfo=this.scheduleInfoService.getScriptInfo(e)}getSnowConnection(e){this.snowConnection=this.scheduleInfoService.getSnowConnection(e)}getViewName(e){this.viewName=this.scheduleInfoService.getViewName(e)}}nb.$inject=["scheduleInfoService","i18n"];const ab={controller:nb,bindings:{schedules:"<"},template:'\n    <div ng-if="$ctrl.schedules.length" ng-repeat="schedule in $ctrl.schedules">\n\n      <div class="attribute-display">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_frequency\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.scheduleInfoService.getScheduleText(schedule) }}</div>\n      </div>\n\n      <div class="attribute-display">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_timerange\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ schedule.displayableTimeRange }}</div>\n      </div>\n\n      <div class="attribute-display">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_timezone\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.scheduleInfoService.getFriendlyTimezone(schedule) }}</div>\n      </div>\n\n      <div class="attribute-display">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_threshold\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.scheduleInfoService.getThreshold(schedule) }}</div>\n      </div>\n\n      <div class="attribute-display">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_alert_type\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.scheduleInfoService.getAlertLabel(schedule) }}</div>\n      </div>\n\n      <div class="attribute-display" ng-if="$ctrl.scheduleInfoService.showEmailOnFail(schedule)">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_email_on_failure\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.scheduleInfoService.getEmailsOnFailure(schedule) }}</div>\n      </div>\n\n      <div class="attribute-display" ng-if="$ctrl.getEmailRecipients(schedule)">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_recipients\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.emailRecipients }}</div>\n      </div>\n\n      <div class="attribute-display" ng-if="$ctrl.getScriptInfo(schedule)">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_script_info\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.scriptInfo }}</div>\n      </div>\n\n      <div class="attribute-display" ng-if="$ctrl.getSnowConnection(schedule)">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_connection\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.snowConnection }}</div>\n      </div>\n\n      <div class="attribute-display" ng-if="$ctrl.getViewName(schedule)">\n        <div class="attribute-display__label">\n            {{::$ctrl.scheduleLabel }} {{::\'contentLibrary.label_connection\' | i18nText }}</div>\n        <div class="attribute-display__value">{{ $ctrl.viewName }}</div>\n      </div>\n    </div>\n  '};class sb{constructor(e){this.$element=e}$onInit(){this.$element.addClass("content-item-details-body")}}sb.$inject=["$element"];const ob={controller:sb,transclude:!0,bindings:{item:"<"},template:'\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctrl.item.description">\n      <div class="attribute-display__label">{{::\'common.description\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ $ctrl.item.description }}</div>\n    </div>\n    <div ng-transclude></div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctr.item.sharer">\n      <div class="attribute-display__label">{{::\'library.sharedWith\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ :: \'library.org\' | i18nText }}</div>\n    </div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n      <div class="attribute-display__label">{{::\'library.lastModifiedOn\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ $ctrl.item.modifiedAt | userDateFormat }}</div>\n    </div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctrl.item.lastModifier.name">\n      <div class="attribute-display__label">{{::\'library.lastModifiedBy\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ $ctrl.item.lastModifier.name }}</div>\n    </div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n      <div class="attribute-display__label">{{::\'library.createdOn\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ $ctrl.item.createdAt | userDateFormat }}</div>\n    </div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctrl.item.creator.name">\n      <div class="attribute-display__label">{{::\'library.createdBy\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ $ctrl.item.creator.name }}</div>\n    </div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctrl.item.type">\n      <div class="attribute-display__label">{{::\'library.type\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ \'content.contentTypeLabel.\' + $ctrl.item.type | i18nText }}</div>\n    </div>\n    <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctrl.item.id">\n      <div class="attribute-display__label">{{::\'library.id\' | i18nText }}</div>\n      <div class="attribute-display__value">{{ $ctrl.item.id }}</div>\n    </div>\n  '};var lb=i(16826),cb=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};class db{constructor(e,t,i,r,n){this.$element=e,this.contentManagementServiceFactory=t,this.usersRolesStateService=i,this.usersRolesStateQueries=r,this.$mdToast=n,this.destroyPermissionUpdate$=new lb.Subject,this.CONTENT_TYPES=F.CONTENT_TYPES,this.itemPathString="",this.paramsDisplayStyleProps={margin:"24px",theme:"regular"},this.setItemPath=()=>cb(this,void 0,void 0,(function*(){const e=this.contentManagementServiceFactory.getInstance().getCommonService();this.itemPathString=yield e.getFullPath(this.item.id)})),this.usersRolesStateService.fetchUsers()}$onInit(){this.resetDisplayPermissions(),this.$element.addClass("content-item-details"),this.updateItem(),this.detailActions={runAction:e=>this.actions.runAction(e,this.item),runContextMenuAction:e=>this.actions.runDetailsContextMenuAction(e,this.item)},"LOOKUP"===this.item.type&&this.setItemPath()}$onChanges(e){_.has(e,"item")&&(this.destroyPermissionUpdate$.onNext(!0),this.updateItem(),"LOOKUP"===this.item.type&&this.setItemPath())}updateItem(){this.isLoading=!0,lb.Observable.zip(this.updateItemReference(),this.updateItemPermissions(),((e,t)=>[e,t])).takeUntil(this.destroyPermissionUpdate$).take(1).subscribe((([e,t])=>{this.updateUserRelatedToRow(e),this.updateDisplayPermissions(t),this.isLoading=!1}))}updateItemReference(){this.itemReference=void 0;const e=this.contentManagementServiceFactory.getInstance();return lb.Observable.fromPromise(e.getService(this.item.type).fetch(this.item)).catch((e=>{if(this.item.type!==F.CONTENT_TYPES.FOLDER||this.item.id!==F.FAKE_FOLDER_ID){const t=this.$mdToast.error().textContent(e.errors[0].message);this.$mdToast.show(t)}return this.fetchError=e.errors[0],e})).tap((e=>{this.itemReference=e,this.fetchError=void 0})).flatMap((()=>this.usersRolesStateQueries.getUsers()))}updateUserRelatedToRow(e){let t;if(this.item.type===F.CONTENT_TYPES.DASHBOARD?t=F.DATA_ACCESS_LEVEL_VIEWER:this.item.type===F.CONTENT_TYPES.SAVED_SEARCH&&(this.item.scheduled?t=this.item.owner.name:this.item.runAsIdOverride=void 0),this.item.runAsIdOverride){const{name:t}=_.findWhere(e,{id:this.item.runAsIdOverride})||{};this.itemReference.runAsUserName=t}else this.itemReference.runAsUserName=t}updateItemPermissions(){const e=this.contentManagementServiceFactory.getInstance().getCommonService();return this.resetDisplayPermissions(),g.shareTargetAutoCompleteService.getShareTargetAutoCompleteOptionsForPermissions(lb.Observable.fromPromise(e.fetchPermissions(this.item))).catch((e=>{if(this.item.type!==F.CONTENT_TYPES.FOLDER||this.item.id!==F.FAKE_FOLDER_ID){const t=this.$mdToast.error().textContent(e.errors[0].message);this.$mdToast.show(t)}return e}))}updateDisplayPermissions(e){e&&Object.entries(e).forEach((([e,t])=>{if(t)switch(t.join(" ")){case F.ContentPermission.GrantManage:this.displayPermissions.manageAndGrantManagePermissions.push(e);break;case[F.ContentPermission.GrantEdit,F.ContentPermission.Manage].join(" "):this.displayPermissions.manageAndGrantEditPermissions.push(e);break;case[F.ContentPermission.GrantView,F.ContentPermission.Manage].join(" "):this.displayPermissions.manageAndGrantViewPermissions.push(e);break;case F.ContentPermission.Manage:this.displayPermissions.managePermissions.push(e);break;case[F.ContentPermission.GrantManage,F.ContentPermission.Edit].join(" "):this.displayPermissions.editAndGrantManagePermissions.push(e);break;case F.ContentPermission.GrantEdit:this.displayPermissions.editAndGrantEditPermissions.push(e);break;case[F.ContentPermission.GrantView,F.ContentPermission.Edit].join(" "):this.displayPermissions.editAndGrantViewPermissions.push(e);break;case F.ContentPermission.Edit:this.displayPermissions.editPermissions.push(e);break;case[F.ContentPermission.GrantManage,F.ContentPermission.View].join(" "):this.displayPermissions.viewAndGrantManagePermissions.push(e);break;case[F.ContentPermission.GrantEdit,F.ContentPermission.View].join(" "):this.displayPermissions.viewAndGrantEditPermissions.push(e);break;case F.ContentPermission.GrantView:this.displayPermissions.viewAndGrantViewPermissions.push(e);break;case F.ContentPermission.View:this.displayPermissions.viewPermissions.push(e)}}))}getLookupId(){return(0,g.getHexLookupId)(this.item.id)}resetDisplayPermissions(){this.displayPermissions={manageAndGrantManagePermissions:[],manageAndGrantEditPermissions:[],manageAndGrantViewPermissions:[],managePermissions:[],editAndGrantManagePermissions:[],editAndGrantEditPermissions:[],editAndGrantViewPermissions:[],editPermissions:[],viewAndGrantManagePermissions:[],viewAndGrantEditPermissions:[],viewAndGrantViewPermissions:[],viewPermissions:[]}}}db.$inject=["$element","contentManagementServiceFactory","usersRolesStateService","usersRolesStateQueries","$mdToast"];const ub={controller:db,bindings:{item:"<",itemActions:"<",actions:"<"},template:'\n    <div class="content-item-details__header">\n      <div class="content-item-details-header__title">\n        <icon-label icon="$ctrl.item.typeIcon" icon-style="size-18" label="$ctrl.item.name" label-style="md-title"></icon-label>\n      </div>\n      <div class="content-item-details-header__actions">\n        <content-item-detail-actions item-actions="$ctrl.itemActions" actions="$ctrl.detailActions">\n        </content-item-detail-actions>\n      </div>\n    </div>\n    <div class="content-item-details__body">\n      <content-item-details-body item="$ctrl.item">\n        <load-placeholder loading="!$ctrl.isLoading || $ctrl.fetchError">\n          <div class="vertical-flex-auto" ng-switch="$ctrl.item.type" ng-if="$ctrl.itemReference">\n            <div ng-switch-when="SAVED_SEARCH">\n              <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n                <div class="attribute-display__label" ng-bind="::\'library.timeRange\' | i18nText"></div>\n                <div class="attribute-display__value" ng-bind="$ctrl.itemReference.query.timeRange">\n                </div>\n              </div>\n              <div class="attribute-display content-item-details__body__query" data-sumo-test="contentItemDetail-attribute-display">\n                <search-query-params-display\n                  parameters="$ctrl.itemReference.parameters"\n                  query-string="$ctrl.itemReference.query.queryString"\n                  style-props="$ctrl.paramsDisplayStyleProps">\n                </search-query-params-display>\n              </div>\n              <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display" ng-if="$ctrl.itemReference.runAsUserName">\n                <div class="attribute-display__label" ng-bind="::\'library.dataAccessLevel\' | i18nText"></div>\n                <div class="attribute-display__value" ng-bind="$ctrl.itemReference.runAsUserName">\n                </div>\n              </div>\n              <schedule-info schedules="$ctrl.itemReference.schedules"></schedule-info>\n            </div>\n            <div ng-switch-when="DASHBOARD">\n              <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n                <div class="attribute-display__label" ng-bind="::\'library.dashboardPanels\' | i18nText"></div>\n                <div class="attribute-display__value">\n                  <div ng-repeat="panel in $ctrl.itemReference.panels | orderBy: \'title\' track by panel.id"\n                      ng-if="$ctrl.itemReference.panels.length > 0">\n                    {{ panel.title }}\n                  </div>\n                  <div ng-if="$ctrl.itemReference.panels.length === 0" class="empty-value">\n                    {{ ::\'common.none\' | i18nText }}\n                  </div>\n                </div>\n              </div>\n              <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n                <div class="attribute-display__label" ng-bind="::\'library.dataAccessLevel\' | i18nText"></div>\n                <div class="attribute-display__value" ng-bind="$ctrl.itemReference.runAsUserName">\n                </div>\n              </div>\n            </div>\n\n            \x3c!-- LOOKUP SCHEMA --\x3e\n            <div ng-switch-when="LOOKUP">\n              <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n                <div class="attribute-display__label">ID</div>\n                <div class="attribute-display__value">\n                  <span ng-bind="$ctrl.getLookupId()"></span>\n                </div>\n              </div>\n              <div ng-if="$ctrl.itemPathString" class="attribute-display" data-sumo-test="contentItemDetail-attribute-display">\n                <div class="attribute-display__label">\n                  {{:: \'lookupTables.pathLabel\' | i18nText }}\n                </div>\n                <div class="attribute-display__value wordwrap">\n                  <span ng-bind="$ctrl.itemPathString"></span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="vertical-flex-auto" ng-if="$ctrl.itemReference">\n            <span ng-repeat="(key, value) in $ctrl.displayPermissions">\n              <div class="attribute-display"\n                   data-sumo-test="contentItemDetail-attribute-display"\n                   ng-if="value.length">\n                <div class="attribute-display__label" ng-bind="::\'library.\'+key | i18nText"></div>\n                <div class="attribute-display__value">\n                  <span>{{value.slice(0, 3).join(\', \')}}</span><span ng-show="value.length > 3 && !permissionsExpanded"> <a\n                    ng-bind="::\'common.andXOthers\' | i18nText:value.length - 3"\n                    ng-click="permissionsExpanded = true;"\n                    title="::\'common.clickToExpand | i18nText\'"\n                  ></a></span><span ng-show="permissionsExpanded">, {{value.slice(3).join(\', \')}}</span>\n                </div>\n              </div>\n            </span>\n            <div class="attribute-display" data-sumo-test="contentItemDetail-attribute-display"\n              ng-if="$ctrl.item.type === $ctrl.CONTENT_TYPES.DASHBOARD">\n              <div class="attribute-display__label" ng-bind="::\'library.sharingOutside\' | i18nText"></div>\n              <div class="attribute-display__value" ng-switch="$ctrl.item.visibility">\n                <div ng-switch-when="WORLD">\n                  {{:: \'library.sharingOutsideWorld\' | i18nText }}\n                </div>\n                <div ng-switch-when="WHITELIST">\n                  {{:: \'library.sharingOutsideWhitelist\' | i18nText }}\n                </div>\n                <div ng-switch-default>\n                  {{:: \'library.sharingOutsideNone\' | i18nText }}\n                </div>\n              </div>\n            </div>\n          </div>\n        </load-placeholder>\n      </content-item-details-body>\n    </div>\n  '};class pb{constructor(e){this.$element=e}$onInit(){this.$element.addClass("content-item-details"),this.detailActions={runAction:e=>this.actions.runAction(e,...this.items),runContextMenuAction:e=>this.actions.runDetailsContextMenuAction(e,...this.items)}}}pb.$inject=["$element"];const hb={controller:pb,bindings:{items:"<",itemActions:"<",actions:"<"},template:'\n    <div class="content-item-details__header">\n      <div class="content-item-details-header__title">\n        <div class="content-item-details-header__title__name">\n            {{ $ctrl.items.length }} {{ ::\'library.itemsSelected\' | i18nText }}\n        </div>\n      </div>\n      <div class="content-item-details-header__actions">\n        <content-item-detail-actions item-actions="$ctrl.itemActions" actions="$ctrl.detailActions">\n        </content-item-detail-actions>\n      </div>\n    </div>\n    <div class="content-item-details__body">\n      <div class="content-item-details__body__item" ng-repeat="item in $ctrl.items | orderBy: \'name\' track by item.id">\n        <icon-label icon="item.typeIcon" label="item.name"></icon-label>\n      </div>\n    </div>\n  '};class mb{constructor(e,t){this.$element=e,this.logService=t,this.canOpen=!1,this.canEdit=!1,this.canDelete=!1,this.hasContextActions=!1,this.openActionType=re.ContentActionType.OPEN,this.editActionType=re.ContentActionType.EDIT,this.deleteActionType=re.ContentActionType.DELETE}$onInit(){this.$element.addClass("content-item-detail-actions"),this.setupPermissions()}$onChanges(e){_.has(e,"itemActions")&&this.setupPermissions()}setupPermissions(){this.canOpen=!_.isUndefined(_.find(this.itemActions,(e=>e.type===re.ContentActionType.OPEN))),this.canEdit=!_.isUndefined(_.find(this.itemActions,(e=>e.type===re.ContentActionType.EDIT))),this.canDelete=!_.isUndefined(_.find(this.itemActions,(e=>e.type===re.ContentActionType.DELETE))),this.hasContextActions=this.itemActions&&this.itemActions.length>0}runAction(e,t){const i={actionType:e,event:t};this.actions.runAction(i).then((e=>{e.actionType===re.ContentActionType.OPEN&&e.items&&e.items.length&&this.logService.userTelemetry({module:"Library",component:"ContentLibrary",action:L_,params:{contentId:e.items[0].id,context:"LIBRARY_USER_ACTION"}}).catch(s.noop)}))}}mb.$inject=["$element","logService"];const gb={controller:mb,bindings:{itemActions:"<",actions:"<"},template:'\n    <div class="content-item-detail-actions__item" ng-if="$ctrl.canOpen">\n      <md-button class="md-raised md-primary md-button no-margin"\n          ng-click="$ctrl.runAction($ctrl.openActionType, $event)">\n        {{ ::\'library.open\' | i18nText }}\n      </md-button>\n    </div>\n    <div class="content-item-detail-actions__item" ng-if="$ctrl.canEdit">\n      <md-button class="md-raised md-primary md-button no-margin"\n          ng-click="$ctrl.runAction($ctrl.editActionType, $event)">\n        {{ ::\'library.edit\' | i18nText }}\n      </md-button>\n    </div>\n    <div class="content-item-detail-actions__item" ng-if="$ctrl.canDelete">\n      <ux-icon-button icon="trash" svg="true" ng-click="$ctrl.runAction($ctrl.deleteActionType, $event)"\n      tooltip tooltip-content="{{:: \'content.contentActionTypes.DELETE\' | i18nText }}"></ux-icon-button>\n    </div>\n    <div class="content-item-detail-actions__item" ng-if="$ctrl.hasContextActions">\n      <ux-icon-button icon="menu" svg="true" ng-click="$ctrl.actions.runContextMenuAction($event)"></ux-icon-button>\n    </div>\n  '};class yb{constructor(e,t){this.$element=e,this.contentManagementServiceFactory=t}$onInit(){this.$element.addClass("content-item-details-wrapper"),this.updateAvailableActions(this.items)}$onChanges(e){_.has(e,"items")&&this.updateAvailableActions(e.items.currentValue)}updateAvailableActions(e){if(e&&e.length>0){const t=this.contentManagementServiceFactory.getInstance();this.itemActions=t.getActions(...e)}else this.itemActions=[]}}yb.$inject=["$element","contentManagementServiceFactory"];const vb={controller:yb,bindings:{items:"<",actions:"<"},template:'\n    <single-content-item-details actions="$ctrl.actions" item="$ctrl.items[0]" item-actions="$ctrl.itemActions"\n        ng-if="$ctrl.items.length === 1">\n    </single-content-item-details>\n    <multi-content-item-details actions="$ctrl.actions" items="$ctrl.items" item-actions="$ctrl.itemActions"\n        ng-if="$ctrl.items.length > 1">\n    </multi-content-item-details>\n  '};class fb{constructor(e,t,i,r,n){this.$scope=e,this.$element=t,this.listTooltipService=i,this.userService=r,this.$timeout=n,this.showContextMenu=(e,t)=>(this.contextMenuOpen=!0,this.listTooltipHelper.hide(),this.contentAdminTooltipHelper.hide(),Promise.resolve().then((()=>this.actions.showContextMenu(t,e))).finally((()=>{var e;this.selectedItemIndex=-1,this.contextMenuOpen=!1,null===(e=this.listActionsHelper)||void 0===e||e.hide()}))),this.toggleFavorite=(e,t)=>this.actions.toggleFavorite(e,t),this.openInNewTab=(e,t)=>this.actions.onOpenInNewTab(e,t),this.onItemDragComplete=(e,t,i)=>this.actions.dragComplete(e,t,i),this.onItemDragOver=(e,t,i)=>this.actions.dragOver(e,t,i),this.onItemClick=(e,t)=>{this.actions.toggle(e)},this.onItemHover=(e,t)=>{switch(this.hoverItemIdx=this.items.indexOf(e),this.listTooltipHelper.hide(),this.contentAdminTooltipHelper.hide(),e._item.type){case F.CONTENT_TYPES.NEW_DASHBOARD:case F.CONTENT_TYPES.DASHBOARD:case F.CONTENT_TYPES.SAVED_SEARCH:this.getRunAsUserName(e).then((i=>{e._item.runAsUserName=i,this.updateHoverItem(e,t)}));break;case F.CONTENT_TYPES.PSEUDO_FOLDER:this.state.context===g.LIBRARY_CONTEXTS.CREATOR&&this.getUserNameEmail(e).then((i=>{i&&(e._item.email=i.email,this.updateHoverItem(e,t,!0))}));break;default:this.updateHoverItem(e,t)}},this.offItemHover=(e,t)=>{this.listTooltipHelper.hide(),this.contentAdminTooltipHelper.hide()},this.updateTooltipContent=()=>{this.listTooltipHelper&&this.listTooltipHelper.updateContent(),this.contentAdminTooltipHelper&&this.contentAdminTooltipHelper.updateContent()}}$onInit(){if(this.$element.addClass("library-tree-view"),this.items){const e=this.items;this.items=void 0,this.$timeout.cancel(this.deferredItemsTimeout),this.deferredItemsTimeout=this.$timeout((()=>{this.items=e}),100)}this.listTooltipHelper=this.listTooltipService.bind({template:'\n  <library-tree-view-tooltip\n    item="$ctrl.items[$ctrl.hoverItemIdx]._item"\n    item-meta="$ctrl.items[$ctrl.hoverItemIdx]._metaData"\n    update-content="$ctrl.updateTooltipContent">\n  </library-tree-view-tooltip>',delay:150,parentScope:this.$scope,tooltip:{position:"right"}}),this.contentAdminTooltipHelper=this.listTooltipService.bind({template:'\n  <library-tree-view-tooltip-browse-by-creator\n    item="$ctrl.items[$ctrl.hoverItemIdx]._item"\n    update-content="$ctrl.updateTooltipContent">\n  </library-tree-view-tooltip-browse-by-creator>',delay:150,parentScope:this.$scope,tooltip:{position:"right"}}),g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.isAdminModeEnabled=e})).subscribe()}$onChanges(e){e.state&&e.state.currentValue&&(this.$timeout.cancel(this.deferredItemsTimeout),this.items=e.state.currentValue.items)}$onDestroy(){this.listActionsHelper&&(this.listActionsHelper.destroy(),this.listActionsHelper=void 0),this.listTooltipHelper&&(this.listTooltipHelper.destroy(),this.listTooltipHelper=void 0),this.contentAdminTooltipHelper&&(this.contentAdminTooltipHelper.destroy(),this.contentAdminTooltipHelper=void 0),this.actions=void 0}updateHoverItem(e,t,i=!1){this.actions.fetchMetadata(e._item);const r=s.element(t.currentTarget);i?(this.listTooltipHelper.hide(),this.contentAdminTooltipHelper.show(r)):(this.contentAdminTooltipHelper.hide(),this.listTooltipHelper.show(r))}getRunAsUserName(e){const t=[F.CONTENT_TYPES.DASHBOARD,F.CONTENT_TYPES.NEW_DASHBOARD].includes(e._item.type)?"Viewer":e._item.owner.name;return this.userService.getUsers().then((i=>{const r=_.findWhere(i,{id:e._item.runAsIdOverride});return r?r.name:t}))}getUserNameEmail(e){return this.userService.getUsers().then((()=>this.userService.getUserById(e._item.creator.id)))}}fb.$inject=["$scope","$element","listTooltipService","userService","$timeout"];const _b={controller:fb,bindings:{filter:"@",state:"<",actions:"<",allowDragDrop:"<?",contexts:"<?",selectedItemIndex:"=?"},template:'\n    <library-tab-header-view\n      state="$ctrl.state"\n      actions="$ctrl.actions"\n      contexts="$ctrl.contexts"\n      ng-if="!$ctrl.isAdminModeEnabled"\n      current-context="$ctrl.state.context">\n    </library-tab-header-view>\n    <div class="library-tree-view__tree" ng-mouseleave="$ctrl.onMouseLeave($event)">\n      <tree\n        items="$ctrl.items"\n        on-item-hover="$ctrl.onItemHover"\n        on-item-hover-out="$ctrl.offItemHover"\n        on-item-click="$ctrl.onItemClick"\n        on-item-drag-complete="$ctrl.onItemDragComplete"\n        on-item-drag-over="$ctrl.onItemDragOver"\n        show-context-menu="$ctrl.showContextMenu"\n        toggle-favorite="$ctrl.toggleFavorite"\n        open-in-new-tab="$ctrl.openInNewTab"\n        allow-drag-drop="$ctrl.allowDragDrop"\n        groups="$ctrl.state.groups"\n        selected-item-index="$ctrl.selectedItemIndex"\n      >\n        <load-placeholder loading="$ctrl.items" class="library-tree-view__tree__loading">\n          <unavailable-pane error-title="$ctrl.state.emptyState.message | i18nText"\n              reason="$ctrl.state.emptyState.description | i18nText"\n              image="{{ $ctrl.state.emptyState.image }}" class="-padding-12">\n          </unavailable-pane>\n        </load-placeholder>\n      </tree>\n    </div>\n  '};class Sb{constructor(e,t){this.$element=e,this.$scope=t,this.isAdminModeEnabled=!1,this.isItemPseudoFolder=!1,g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.isAdminModeEnabled=e})).subscribe()}$onInit(){this.$element.addClass("library-tree-view-actions")}$onChanges(e){if(_.getPath(e,"item.currentValue")){const t=e.item.currentValue;this.canPopOut=t.type===F.CONTENT_TYPES.DASHBOARD,this.isItemPseudoFolder=t.type===F.CONTENT_TYPES.PSEUDO_FOLDER,t.type===F.CONTENT_TYPES.RECENT_SEARCH&&t.referenceId&&g.contentSearchService.fetchContentItem(t.referenceId).then((e=>t.favorite=e.favorite))}}onOpenMenu(e){this.selectedItemIndex=this.index,this.showContextMenu(this.item,e)}shouldShowFavoriteIcon(){return this.item.type===F.CONTENT_TYPES.RECENT_SEARCH?this.item.referenceId>-1:this.item.id>-1}}Sb.$inject=["$element","$scope"];const bb={controller:Sb,bindings:{item:"<",showContextMenu:"<",toggleFavorite:"<",openInNewTab:"<",selectedItemIndex:"=",index:"<"},template:'\n    <ux-icon-button svg="true" icon="{{$ctrl.item.favorite ? \'star\' : \'star-empty\' }}" class="-dark"\n        data-sumo-test="library-tree-item-favorite"\n        click-callback="$ctrl.toggleFavorite($ctrl.item, $event)"\n        ng-show="$ctrl.shouldShowFavoriteIcon()"\n        ng-if="!$ctrl.isAdminModeEnabled && !$ctrl.isItemPseudoFolder"\n        tooltip tooltip-sync="true"\n        tooltip-content="{{\n          ($ctrl.item.favorite ?\n            \'content.contentActionTypes.UNFAVORITE\' :\n            \'content.contentActionTypes.FAVORITE\') | i18nText }}"\n        tooltip-theme="quicktip -light">\n    </ux-icon-button>\n    <ux-icon-button svg="true" icon="pop-out" tooltip ng-show="$ctrl.canPopOut" class="-dark"\n        data-sumo-test="library-tree-item-popout"\n        tooltip-content="{{:: \'content.contentActionTypes.LAUNCH_IN_NEW_WINDOW\' | i18nText }}"\n        tooltip-theme="quicktip -light"\n        click-callback="$ctrl.openInNewTab($ctrl.item, $event)"></ux-icon-button>\n    <ux-icon-button svg="true" icon="menu" class="-dark"\n        data-sumo-test="library-tree-item-menu"\n        click-callback="$ctrl.onOpenMenu($event)" ng-show="$ctrl.item.actions.length > 0"\n        selected-item-index="$ctrl.selectedItemIndex" index="$ctrl.index">\n    </ux-icon-button>\n  '};class Eb{static truncateMultilineString(e,t=10,i=3e3){if(!e)return e;const r=e.split("\n");return r.length>=t?r.slice(0,t).join("\n")+"":e.length>=i?e.substring(0,i):e}}class Tb{constructor(e){this.$element=e}$onInit(){this.$element.addClass("import-content-item")}}Tb.$inject=["$element"];const xb={bindings:{name:"<",content:"<",errors:"<",actions:"<",inProgress:"<"},controller:Tb,template:'\n    <form name="importContentItem" md-theme="formTheme" class="form-layout"\n      ng-submit="importContentItem.$valid && $ctrl.actions.submit($ctrl.name, $ctrl.content)" novalidate>\n      <div class="form-layout__body" data-sumo-test="import-import-dialog">\n        <div class="library-action-view__content__text">\n          {{::\'library.importInstructions\' | i18nText}}\n          <help-link topic="100006" text=":: \'library.learnMore\' | i18nText"></help-link>\n        </div>\n        <div class="library-action-view__content__text" ng-bind-html="::\'library.importDisclaimer\' | i18nText"></div>\n\n        <form-errors errors="$ctrl.errors" ng-if="$ctrl.errors.length > 0"></form-errors>\n\n        <md-input-container>\n          <label ng-bind="::\'common.name\' | i18nText"></label>\n          <input name="name" ng-model="$ctrl.name" name-validate required md-autofocus\n            ng-change="$ctrl.inputChanged($event)"\n            data-sumo-test="import-name-input">\n          <div ng-messages="importContentItem.name.$error">\n            <div ng-message="required">{{:: \'library.requiredField\' | i18nText }}</div>\n            <div ng-message="nameValidate">{{:: \'library.invalidField\' | i18nText }}</div>\n          </div>\n        </md-input-container>\n        <md-input-container>\n          <label ng-bind="::\'library.json\' | i18nText"></label>\n          <textarea name="json" ng-model="$ctrl.content" rows="5" json-validate md-select-on-focus\n            ng-change="$ctrl.inputChanged($event)"\n            data-sumo-test="import-json-button"></textarea>\n          <div ng-messages="importContentItem.json.$error">\n            <div ng-message="jsonValidate">{{:: \'library.invalidJSONImport\' | i18nText }}</div>\n          </div>\n        </md-input-container>\n      </div>\n\n      <div class="form-layout__actions">\n        <md-button class="md-raised md-primary"\n          aria-label="_" ng-attr-aria-label="::\'common.cancel\' | i18nText"\n          ng-bind="::\'common.cancel\' | i18nText"\n          ng-click="$ctrl.actions.cancel()">\n        </md-button>\n        <md-button class="md-raised md-accent md-button"\n          type="submit"\n          ng-switch="$ctrl.inProgress"\n          ng-disabled="$ctrl.inProgress || !importContentItem.$valid" data-sumo-test="import-import-button">\n          <span ng-switch-when="true" class="spinner -small is-visible"></span>\n          <span ng-switch-default="">{{:: \'library.import\' | i18nText}}</span>\n        </md-button>\n      </div>\n    </form>\n  '};class Cb{constructor(e,t,i,r){this.$element=e,this.$filter=t,this.i18n=i,this.logService=r,this.folderableActions={onFavorite:(e,t)=>this.actions.runAction({actionType:re.ContentActionType.FAVORITE,event:t},e),onEdit:(e,t)=>this.actions.runAction({actionType:re.ContentActionType.EDIT,event:t},e),onShare:(e,t)=>this.actions.runAction({actionType:re.ContentActionType.SHARE,event:t},e),onOpenInNewTab:(e,t)=>this.actions.runAction({actionType:re.ContentActionType.LAUNCH_IN_NEW_WINDOW,event:t},e),onMenu:(e,t)=>this.onContextMenuOpen(t,e,!1)},this.gridOptions={folderData:void 0,searchData:void 0,formattedDataDictionary:{}},this.updateSelection=(e,t,i,r)=>{let n=[];if(this.selected&&this.selected.length>0){const a=this.getCurrentList();if(i){const e=_.first(this.selected),i=a.indexOf(e);n=a.slice(Math.min(i,t),Math.max(i,t)+1)}else if(r){const t=this.selected.indexOf(e);t>=0?(n=this.selected.slice(),n.splice(t,1)):n=[...this.selected,e]}else n=[e];this.clearTextSelection()}else n=[e];return this.selected=n},this.performSimpleClick=(e,t,i=!1,r=!1)=>{_.isFunction(this.actions.onRowClick)&&this.actions.onRowClick(this.updateSelection(e,t,i,r))},this.$element.addClass("folder-list-view"),this.refreshLists(this.mode)}logUserAction(e){this.logService.userTelemetry({module:"Library",component:"ContentLibrary",action:e.action,params:{contentId:e.contentId,context:"LIBRARY_USER_ACTION"}})}onRowNameClick(e){this.logUserAction({action:N_,contentId:e.id}),this.actions.onRowNameClick(e)}$onChanges(e){let t=this.mode,i=!1;_.has(e,"mode")&&(t=e.mode.currentValue,i=!0),_.has(e,"items")&&(i=!0),i&&this.refreshLists(t)}formatLastModified(e){const t=this.i18n.get("components.folderView.labels"),i=+e.modifiedAt?ht.userDateService.prettifyDateTime(e.modifiedAt):"",r=t.by,n=_.getPath(e,"lastModifier.name");return i&&n?`${i} ${r} ${n}`:i||n}onRowClick(e,t,i){if(!_.isUndefined(this.actions)){const e=s.element(i.currentTarget).find(".folder-list-view-actions").get(0),t=i.target;if(e&&(e===t||$.contains(e,t)))return!0}switch(i.which){case 1:this.performSimpleClick(e,t,i.shiftKey,i.ctrlKey||i.metaKey),this.logUserAction({action:M_,contentId:e.id});break;case 3:_.isFunction(this.actions.onContextMenuOpen)&&this.onContextMenuOpen(i,e)}}onClickSelectAll(){const{selected:e=[]}=this,t=e.length&&e.length===this.items.length;this.selected=t?[]:[...this.items],this.actions.onRowClick(this.selected)}onCheckboxClick(e,t){const i=this.getCurrentList().indexOf(e),r=this.updateSelection(e,i,t.shiftKey,!0);t.stopPropagation(),this.actions.onRowClick(r)}onContextMenuOpen(e,t,i=!0){e.preventDefault();const r=this.getCurrentList().indexOf(t);let n=this.selected||[];-1===n.indexOf(t)&&(n=this.updateSelection(t,r,e.shiftKey,e.ctrlKey||e.metaKey)),i&&_.isFunction(this.actions.onRowClick)&&this.actions.onRowClick(n),this.contextMenuOpen=!0,this.actions.onContextMenuOpen(e,...n).then((e=>(e.actionType===re.ContentActionType.OPEN&&this.logUserAction({action:k_,contentId:t.id}),e))).finally((()=>{this.contextMenuOpen=!1,this.hoverItemIdx=-1}))}sortBy(e,t=!1){const i="folder"===this.mode?"folderData":"searchData",r="search"===this.mode?this.getSearchData():this.items;"owner"===e&&(e=e=>e.owner.name),this.gridOptions[i]=this.$filter("orderBy")(r,e,t)}getItem(e){return this.getCurrentList()[e]}isSelected(e){return _.contains(this.selected,e)}getCurrentList(){return"folder"===this.mode?this.gridOptions.folderData:this.gridOptions.searchData}getSearchData(){return _.map(this.items,(e=>Object.assign(e,{location:_.pluck(e.path,"name").join("/")})))}refreshLists(e=Cb.DEFAULT_MODE){"folder"===e?(this.gridOptions.folderData=this.items,this.gridOptions.searchData=void 0):(this.gridOptions.folderData=void 0,this.gridOptions.searchData=this.getSearchData())}clearTextSelection(){rangy.getSelection().removeAllRanges()}}Cb.$inject=["$element","$filter","i18n","logService"],Cb.DEFAULT_MODE="folder";const Ab={bindings:{items:"<",selected:"<",actions:"<",mode:"<",actionMenuContext:"<"},controller:Cb,template:'\n    <table\n      at\n      at-fixed-header\n      at-sortable="$ctrl.sortBy(sortKey, reverse)"\n      at-model-state="$ctrl.gridOptions.folderData"\n      class="folder-list-view__table folder-list-table -app-mode">\n      <thead>\n        <tr>\n          <th class="folder-list-col--icon" data-sort-by="typeIcon"></th>\n          <th class="folder-list-col--name" data-sort-by="name">\n            {{ ::\'components.folderView.columnNames.name\' | i18nText }}\n          </th>\n          <th data-sort-by="description">\n            {{ ::\'components.folderView.columnNames.description\' | i18nText }}\n          </th>\n          <th class="folder-list-col--status">&nbsp;</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr class="app-list__app-item folder-list-item"\n          ng-repeat="item in $ctrl.gridOptions.folderData track by item.id" data-index="{{ $index }}"\n          ng-class="{ \'is-selected\': $ctrl.selected.includes(item), \'is-highlighted\': $ctrl.hoverItemIdx === $index }"\n          ng-click="$ctrl.onRowClick(item, $index, $event)"\n          ng-right-click="$ctrl.onContextMenuOpen($event, item)"\n          data-sumo-test="app-list-view-item">\n          <td class="folder-list-col--icon">\n            <md-icon class="linkicon" md-svg-icon="{{ ::item.typeIcon }}"></md-icon>\n          </td>\n          <td class="folder-list-col--name">\n            <div ng-click="$ctrl.actions.onRowNameClick(item);" class="folder-list-col--name__link" data-sumo-test="appList-col-name">\n              {{ item.name }}\n            </div>\n          </td>\n          <td class="folder-list-col--description" tooltip tooltip-content="{{::item.description}}">{{ ::item.description }}</td>\n          <td class="folder-list-col--status">\n            <div class="folder-list-item__actions"></div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n'};class wb{constructor(e,t){this.$scope=e,this.$element=t,this.isAdminModeEnabled=!1,g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{this.isAdminModeEnabled=e,this.isAdminModeEnabled&&(this.canFavorite=!1)})).subscribe()}$onInit(){this.$element.addClass("folder-list-view-actions"),this.setupPermissions()}$onChanges(e){_.has(e,"item")&&this.setupPermissions()}getActionStyles(e){return{display:e?"block":"none"}}getFavoriteButtonMeta(){return{tooltipKey:this.item.favorite?"content.contentActionTypes.UNFAVORITE":"content.contentActionTypes.FAVORITE",dataSumoTest:this.item.favorite?"folder-list-view-action-favorite":"folder-list-view-action-unfavorite"}}setupPermissions(){if(!_.isUndefined(this.item)){const e=(0,g.filterActions)(this.item,this.actionMenuContext);this.canFavorite=!this.isAdminModeEnabled&&_.some(e,(e=>e.type===re.ContentActionType.COPY)),this.favoriteButtonMeta=this.getFavoriteButtonMeta(),this.canEdit=_.some(e,(e=>e.type===re.ContentActionType.EDIT)),this.canPopOut=_.some(e,(e=>e.type===re.ContentActionType.LAUNCH_IN_NEW_WINDOW)),this.canShare=_.some(e,(e=>e.type===re.ContentActionType.SHARE)),this.hasContextActions=e&&e.length>0||-1===this.item.id,this.iconActionStyles={edit:this.getActionStyles(this.canEdit),popOut:this.getActionStyles(this.canPopOut),share:this.getActionStyles(this.canShare),favorite:this.getActionStyles(this.canFavorite),contextActions:this.getActionStyles(this.hasContextActions)}}}}wb.$inject=["$scope","$element"];const Ib={controller:wb,bindings:{item:"<",actions:"<",mode:"<",actionMenuContext:"<"},template:'\n    <div class="folder-list-view-actions__icon -margin-8"\n         ng-style="$ctrl.iconActionStyles.edit">\n      <ux-icon-button size="small" svg="true" icon="pencil"\n        click-callback="$ctrl.actions.onEdit($ctrl.item, $event)"\n        tooltip tooltip-content="{{:: \'content.contentActionTypes.EDIT\' | i18nText }}"\n        data-sumo-test="folder-list-view-action-edit">\n      </ux-icon-button>\n    </div>\n    <div class="folder-list-view-actions__icon -margin-8"\n         ng-style="$ctrl.iconActionStyles.popOut">\n      <ux-icon-button size="small" svg="true" icon="pop-out" tooltip\n        tooltip-content="{{:: \'content.contentActionTypes.LAUNCH_IN_NEW_WINDOW\' | i18nText }}"\n        click-callback="$ctrl.actions.onOpenInNewTab($ctrl.item, $event)"\n        data-sumo-test="folder-list-view-action-popout"></ux-icon-button>\n    </div>\n    <div class="folder-list-view-actions__icon -margin-8"\n         ng-style="$ctrl.iconActionStyles.favorite">\n      <ux-icon-button size="small" svg="true" icon="{{$ctrl.item.favorite ? \'star\' : \'star-empty\' }}"\n        click-callback="$ctrl.actions.onFavorite($ctrl.item, $event)"\n        tooltip tooltip-sync="true"\n        tooltip-content="{{$ctrl.favoriteButtonMeta.tooltipKey | i18nText }}"\n        data-sumo-test="{{$ctrl.favoriteButtonMeta.dataSumoTest }}"></ux-icon-button>\n    </div>\n    <div class="folder-list-view-actions__icon -margin-8"\n         ng-style="$ctrl.iconActionStyles.share">\n      <ux-icon-button size="small" svg="true" icon="users" click-callback="$ctrl.actions.onShare($ctrl.item, $event)"\n      tooltip tooltip-content="{{:: \'content.contentActionTypes.SHARE\' | i18nText }}">\n      </ux-icon-button>\n    </div>\n    <div class="folder-list-view-actions__icon -margin-8"\n         ng-style="$ctrl.iconActionStyles.contextActions">\n      <ux-icon-button size="small" svg="true" icon="menu"\n        click-callback="$ctrl.actions.onMenu($ctrl.item, $event)"\n        data-sumo-test="folder-list-view-action-menu"></ux-icon-button>\n    </div>\n  '},Rb='\n  <div class="folder-list-item__status">\n    <md-icon md-svg-icon="globe" class="folder-list-item__status-icon -margin-14"\n      ng-class="{ \'is-visible\': item.visibility === \'WORLD\' || item.visibility === \'WHITELIST\' }"></md-icon>\n    <md-icon md-svg-icon="star" class="folder-list-item__status-icon -margin-14"\n      ng-class="{ \'is-visible\': item.favorite }"></md-icon>\n    <md-icon md-svg-icon="users" class="folder-list-item__status-icon -margin-14"\n      ng-class="{ \'is-visible\': !!item.sharer.id }"></md-icon>\n  </div>\n',Db='\n  <folder-list-view-actions item="item"\n  actions="$ctrl.folderableActions"\n  action-menu-context="$ctrl.actionMenuContext">\n  </folder-list-view-actions>\n',Ob={bindings:{items:"<",selected:"<",actions:"<",mode:"<",actionMenuContext:"<"},transclude:!0,controller:Cb,template:`\n      ${`\n    <table\n      at\n      at-sortable="$ctrl.sortBy(sortKey, reverse)"\n      at-fixed-header\n      at-virtual-repeat\n      at-model-state="$ctrl.gridOptions.searchData"\n      ng-show="$ctrl.mode === 'search'"\n      class="folder-list-view__table folder-list-table -search-mode">\n      <thead>\n        <tr>\n          <th class="folder-list-col--icon">\n          <md-checkbox class="select-all-checkbox" type="checkbox"\n                       aria-label="{{ ::'components.folderView.labels.selectAll' | i18nText }}"\n                       ng-checked="$ctrl.selected.length && $ctrl.selected.length === $ctrl.items.length"\n                       ng-click="$ctrl.onClickSelectAll($event)"\n                       data-sumo-test="search-select-all-library"></md-checkbox>\n          </th>\n          <th class="folder-list-col--name" data-sort-by="name" data-max-width="400">\n            {{ ::'components.folderView.columnNames.name' | i18nText }}\n          </th>\n          <th class="older-list-col--location" data-sort-by="location" data-max-width="400">\n            {{ ::'components.folderView.columnNames.location' | i18nText }}\n          </th>\n          <th class="folder-list-col--owner" data-sort-by="owner" data-max-width="400">\n            {{ ::'components.folderView.columnNames.owner' | i18nText }}\n          </th>\n          <th class="folder-list-col--status">&nbsp;</th>\n        </tr>\n      </thead>\n      <tbody class="folder-list-table__body">\n        <tr class="folder-list__search-item folder-list-item"\n          data-sumo-test="folder-list-view"\n          md-virtual-repeat="item in $ctrl.gridOptions.searchData"\n          ng-class="{ 'is-selected': $ctrl.selected.includes(item) }"\n          ng-click="$ctrl.onRowClick(item, $index, $event)"\n          ng-right-click="$ctrl.onContextMenuOpen($event, item, false)">\n          <td class="folder-list-col  folder-list-col--icon">\n            <md-icon ng-show="!$ctrl.selected.includes(item)" class="linkicon" md-svg-icon="{{ item.typeIcon }}">\n            </md-icon>\n            <md-checkbox ng-show="$ctrl.selected.includes(item)"\n                       class="item-checkbox" type="checkbox"\n                       aria-label="{{ ::'components.folderView.labels.select' | i18nText }}"\n                       ng-checked="$ctrl.selected.includes(item)"\n                       ng-click="$ctrl.onCheckboxClick(item, $event)"\n                       data-sumo-test="search-item-select-checkbox"></md-checkbox>\n          </td>\n          <td class="folder-list-col  folder-list-col--name" title="{{item.name}}">\n            <span class="folder-list-col--name__link" ng-click="$ctrl.actions.onRowNameClick(item); $event.stopPropagation();">\n              {{ item.name }}\n            </span>\n          </td>\n          <td class="folder-list-col  folder-list-col--location" title="{{item.location}}">{{ item.location }}</td>\n          <td class="folder-list-col  folder-list-col--owner" title="{{item.creator.name}}">{{ item.creator.name }}</td>\n          <td class="folder-list-col  folder-list-col--status">\n            ${Rb}\n            <div class="folder-list-item__actions">\n              ${Db}\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </at>\n`}\n      ${`\n    <table\n      at\n      at-fixed-header\n      at-virtual-repeat\n      at-sortable="$ctrl.sortBy(sortKey, reverse)"\n      at-model-state="$ctrl.gridOptions.folderData"\n      ng-show="$ctrl.mode === 'folder'"\n      class="folder-list-view__table folder-list-table -folder-mode">\n      <thead>\n        <tr>\n          <th class="folder-list-col--icon">\n          <md-checkbox class="select-all-checkbox" type="checkbox"\n                       aria-label="{{ ::'components.folderView.labels.selectAll' | i18nText }}"\n                       ng-checked="$ctrl.selected.length && $ctrl.selected.length === $ctrl.items.length"\n                       ng-click="$ctrl.onClickSelectAll($event)"\n                       data-sumo-test="select-all-library"></md-checkbox>\n          </th>\n          <th class="folder-list-col  folder-list-col--name" data-sort-by="name" data-max-width="360" title="{{ ::'components.folderView.columnNames.name' | i18nText }}">\n            {{ ::'components.folderView.columnNames.name' | i18nText }}\n          </th>\n          <th class="folder-list-col  folder-list-col--description" data-max-width="200" title="{{ ::'components.folderView.columnNames.description' | i18nText }}">\n            {{ ::'components.folderView.columnNames.description' | i18nText }}\n          </th>\n          <th class="folder-list-col  folder-list-col--owner" data-sort-by="owner" data-max-width="150" title="{{ ::'components.folderView.columnNames.owner' | i18nText }}">\n            {{ ::'components.folderView.columnNames.owner' | i18nText }}\n          </th>\n          <th class="folder-list-col  folder-list-col--last-modified" data-sort-by="modifiedAt" data-max-width="180" title="{{ ::'components.folderView.columnNames.lastModified' | i18nText }}">\n            {{ ::'components.folderView.columnNames.lastModified' | i18nText }}\n          </th>\n          <th class="folder-list-col  folder-list-col--status" data-max-width="130">&nbsp;</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr class="folder-list__folder-item folder-list-item"\n          md-virtual-repeat="item in $ctrl.gridOptions.folderData"\n          ng-class="{ 'is-selected': $ctrl.selected.includes(item) }"\n          ng-click="$ctrl.onRowClick(item, $index, $event)" data-index="{{ $index }}"\n          ng-right-click="$ctrl.onContextMenuOpen($event, item, false)"\n          data-sumo-test="folder-list-view">\n          <td class="folder-list-col  folder-list-col--icon">\n            <md-icon ng-show="!$ctrl.selected.includes(item)"\n            class="linkicon" md-svg-icon="{{ item.typeIcon }}"\n            tooltip tooltip-sync="true"\n            tooltip-content="{{ 'content.contentTypeIconLabel.' + item.typeIcon | i18nText }}"></md-icon>\n            <md-checkbox ng-show="$ctrl.selected.includes(item)"\n                       class="item-checkbox" type="checkbox"\n                       aria-label="{{ ::'components.folderView.labels.select' | i18nText }}"\n                       ng-checked="$ctrl.selected.includes(item)"\n                       ng-click="$ctrl.onCheckboxClick(item, $event)"\n                       data-sumo-test="item-select-checkbox"></md-checkbox>\n          </td>\n          <td class="folder-list-col  folder-list-col--name" title="{{item.name}}">\n            <span class="folder-list-col--name__link" ng-click="$ctrl.onRowNameClick(item); $event.stopPropagation();">\n              {{ item.name }}\n            </span>\n          </td>\n          <td class="folder-list-col  folder-list-col--description" title="{{item.description}}">{{ item.description }}</td>\n          <td class="folder-list-col  folder-list-col--owner" title="{{item.creator.name}}">{{ item.creator.name }}</td>\n          <td class="folder-list-col  folder-list-col--last-modified" title="{{$ctrl.formatLastModified(item)}}">{{ $ctrl.formatLastModified(item) }}</td>\n          <td class="folder-list-col  folder-list-col--status">\n            ${Rb}\n            <div class="folder-list-item__actions">\n              ${Db}\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n`}\n      <div class="folder-list-view__transition-container" ng-hide="$ctrl.items.length" ng-transclude></div>\n    `};function Nb(){return(e,t)=>!_.isUndefined(_.find(e,(e=>e.type===t)))}Nb.$inject=[];class Mb{constructor(e){this.$element=e}$onInit(){this.$element.addClass("folderable-list")}}Mb.$inject=["$element"];const kb={controller:Mb,bindings:{cardTitle:"<",list:"<",actions:"<",emptyState:"<?"},template:'\n    <load-placeholder loading="$ctrl.list">\n      <div class="simple-list" ng-if="$ctrl.list.length > 0">\n        <div ng-repeat="folderable in $ctrl.list" class="simple-list__item -border"\n            ng-attr-title="{{folderable.type === \'DASHBOARD\' ? folderable.owner.name : folderable.name}}"\n            ng-click="$ctrl.actions.open($event, folderable)" data-sumo-test="folderable-list-item">\n            <div class="folderable-item">\n              <md-icon md-svg-icon="{{folderable.typeIcon}}" class="folderable-item__icon"></md-icon>\n              <div ng-bind="folderable.name" class="folderable-item__name"></div>\n            </div>\n        </div>\n      </div>\n      <unavailable-pane ng-if="$ctrl.list.length === 0"\n        error-title="$ctrl.emptyState.message | i18nText"\n        reason="$ctrl.emptyState.description | i18nText"\n        image="{{ $ctrl.emptyState.image }}" class="-padding-12"></unavailable-pane>\n    </load-placeholder>\n  '},Lb={controller:Mb,bindings:{cardTitle:"<",list:"<",actions:"<",emptyState:"<?",about:"<?"},template:`\n    <card-panel card-title="$ctrl.cardTitle" ng-class="{ '-simple-list-border': $ctrl.list.length > 0}">\n      <card-actions ng-if="$ctrl.about">\n        <md-icon md-svg-icon="question-circle" class="folderable-list__about"\n          tooltip tooltip-content="{{$ctrl.about}}" tooltip-theme="popover" max-width="250"></md-icon>\n      </card-actions>\n      ${kb.template}\n    </card-panel>\n  `};var Pb=i(56837);class Fb{constructor(){this.paramsDisplayStyleProps={margin:"12px",theme:"dark"},this.ATTRIBUTE_VISIBILITY={name:({name:e,type:t})=>t!==F.CONTENT_TYPES.RECENT_SEARCH&&!_.isBlank(e),creator:({creator:e})=>!_.isUndefined(e)&&!_.isBlank(e.name),visibility:({visibility:e})=>!_.isBlank(e)&&e!==F.VISIBILITIES.USER,query:({type:e})=>e===F.CONTENT_TYPES.SAVED_SEARCH||e===F.CONTENT_TYPES.RECENT_SEARCH,dataAccessLevel:({scheduled:e,type:t})=>t===F.CONTENT_TYPES.DASHBOARD||t===F.CONTENT_TYPES.NEW_DASHBOARD||e}}$onInit(){this.updateVisibleAttributes(this.item)}$onChanges(e){e.item&&this.updateVisibleAttributes(e.item.currentValue),this.itemMeta&&this.updateContent&&this.updateContent()}updateVisibleAttributes(e){e&&(this.visibleAttributes=_.mapObject(this.ATTRIBUTE_VISIBILITY,(t=>t(e))))}getEscapedQueryString(){return(0,Pb.Z)(this.itemMeta.query.queryString)}}Fb.$inject=[];const Ub={controller:Fb,bindings:{item:"<",itemMeta:"<",updateContent:"<"},template:'\n    <div class="attribute-display--compact -dark" ng-if="$ctrl.visibleAttributes.name" data-sumo-test="library-tree-view-tooltip-name">\n      <div class="attribute-display__label" ng-bind="::\'common.name\' | i18nText"></div>\n      <div class="attribute-display__value wordwrap" ng-bind="$ctrl.item.name" data-sumo-test="library-tree-view-tooltip-name-val"></div>\n    </div>\n    <div class="attribute-display--compact -dark" ng-if="$ctrl.visibleAttributes.creator" data-sumo-test="library-tree-view-tooltip-owner">\n      <div class="attribute-display__label" ng-bind="::\'library.createdBy\' | i18nText"></div>\n      <div class="attribute-display__value" ng-bind="$ctrl.item.creator.name" data-sumo-test="library-tree-view-tooltip-owner-val"></div>\n    </div>\n    <div class="attribute-display--compact -dark" ng-if="$ctrl.visibleAttributes.visibility"\n        data-sumo-test="library-tree-view-tooltip-visibility">\n      <div class="attribute-display__label" ng-bind="::\'library.sharedWith\' | i18nText"></div>\n      <div class="attribute-display__value"\n          ng-bind="\'library.sharedWithOptions.\' + $ctrl.item.visibility | i18nText"></div>\n    </div>\n    <div class="attribute-display--compact -dark" ng-if="$ctrl.item.type" data-sumo-test="library-tree-view-tooltip-type">\n      <div class="attribute-display__label" ng-bind="::\'library.type\' | i18nText"></div>\n      <div class="attribute-display__value" ng-bind="\'content.contentTypeLabel.\' + $ctrl.item.type | i18nText"\n      data-sumo-test="library-tree-view-tooltip-type-val"></div>\n    </div>\n    <div ng-if=\'$ctrl.visibleAttributes.query\' class="library-tree-view__tooltip-query">\n      <load-placeholder loading="$ctrl.itemMeta">\n        <div class="attribute-display--compact -dark" data-sumo-test="library-tree-view-tooltip-queryString">\n          <search-query-params-display\n            parameters="$ctrl.itemMeta.parameters"\n            query-string="$ctrl.getEscapedQueryString()"\n            style-props="$ctrl.paramsDisplayStyleProps">\n          </search-query-params-display>\n        </div>\n\n        <div class="attribute-display--compact -dark" data-sumo-test="library-tree-view-tooltip-timeRange">\n          <div class="attribute-display__label" ng-bind="::\'library.timeRange\' | i18nText"></div>\n          <div class="attribute-display__value">\n            <pre class="code-value" data-sumo-test="library-tree-view-tooltip-timeRange-val"\n            ng-bind="$ctrl.itemMeta.query.timeRange"></pre>\n          </div>\n        </div>\n      </load-placeholder>\n    </div>\n    <div class="attribute-display--compact -dark"\n      ng-if="$ctrl.visibleAttributes.dataAccessLevel"\n      data-sumo-test="library-tree-view-tooltip-data-access-level">\n      <div class="attribute-display__label" ng-bind="::\'library.dataAccessLevel\' | i18nText"></div>\n      <div class="attribute-display__value"\n        ng-bind="$ctrl.item.runAsUserName"\n        data-sumo-test="library-tree-view-tooltip-type-val"></div>\n    </div>\n  '};class Vb{constructor(e){this.i18n=e}getDescription(){return this.item?this.i18n.get("library.creatorTooltipDescription",this.item.name):""}}Vb.$inject=["i18n"];const Bb={controller:Vb,bindings:{item:"<"},template:'\n    <div class="attribute-display--compact -dark">\n      <div class="attribute-display__label" ng-bind="$ctrl.getDescription()"></div>\n      <div class="attribute-display__label" ng-bind="::\'common.email\' | i18nText"></div>\n      <div class="attribute-display__value wordwrap" ng-bind="$ctrl.item.email""></div>\n    </div>\n  '};var $b=i(25878),Hb=i(65710),Wb=i(49865),qb=i(61547),jb=i(35683),Qb=i(51947),zb=i(10939),Gb=i(5421),Kb=i(7031),Yb=i(41107),Zb=i(36620),Xb=i(20454),Jb=i(50250);i(94413);class eE{constructor(e){this.helpNavigationService=e}showHelp(e){this.helpNavigationService.showHelp({id:this.topic})}}eE.$inject=["helpNavigationService"];const tE={bindings:{text:"<",topic:"<"},controller:eE,template:'\n    <a href=""\n       target="_blank"\n       rel="noopener"\n       class="sumo-link online-help-link -plain -inherit-size"\n       ng-click="$ctrl.showHelp($event)">\n      {{$ctrl.text}}\n    </a>\n  '};s.module("sumoApp.help.components",["sumoApp.help.common"]).component("helpLink",tE);var iE=i(25095),rE=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class nE{constructor(e,t){this.$mdToast=e,this.i18n=t,this.setDirty=e=>{e.$setDirty()},this.resolveSave=e=>(this.showSuccessToast(),this.actions.resolve(e)),this.showSuccessToast=()=>{const e=this.$mdToast.success().textContent(this.i18n.get("content.savedMetrics.successSave"));this.$mdToast.show(e)},this.showErrorToast=({response:{data:{errors:[{message:e=this.i18n.get("unknown.error")}]=[{}]}={}}={}})=>{const t=this.$mdToast.error().textContent(e);this.$mdToast.show(t)}}$onInit(){if(this.maxLength=_t.z1,this.metricsSearch||!this.contentItem||void 0===this.contentItem.id){if(this.metricsSearch){const e=(0,nh.w$)(this.metricsSearch),{title:t}=e,i=rE(e,["title"]);this.editableItem=Object.assign(Object.assign({},i),{id:void 0,title:`${t} (Copy)`})}}else this.typeService.fetchById(this.contentItem.id).then((e=>{this.editableItem=Object.assign(Object.assign({},e),{id:void 0,title:`${e.title} (Copy)`})}))}submit(e){if(this.setDirty(e),e.$valid)return this.create()}create(){if(!this.editableItem)return;const e=this.selectedFolder.id;if(void 0!==e)return this.typeService.create(this.editableItem,e).then(this.resolveSave).catch(this.showErrorToast);this.errors=[{key:"content1:root_folder",message:this.i18n.get("content.selectAFolder"),client:!0}]}}nE.$inject=["$mdToast","i18n"];const aE={bindings:{typeService:"<",actions:"<",contentItem:"<",metricsSearch:"<"},controller:nE,template:'\n  <form\n    novalidate\n    name="editSavedMetrics"\n    class="-form library-action-view library-action-view-edged_scroll"\n    md-theme="formTheme"\n    ng-submit="$ctrl.submit(editSavedMetrics)">\n    <div class="library-action-view__content">\n    <load-placeholder loading="$ctrl.editableItem">\n      <md-input-container\n          data-sumo-test="item-name"\n          class="md-block library-action-view__input"\n        >\n          <label>{{:: \'common.name\' | i18nText}}</label>\n          <input\n            name="name"\n            ng-model="$ctrl.editableItem.title"\n            maxlength="$ctrl.maxLength"\n            name-validate\n            required\n            md-autofocus\n          />\n          <div ng-messages="editSavedMetrics.name.$error">\n            <div ng-message="required">\n              {{:: \'library.requiredField\' | i18nText }}\n            </div>\n            <div ng-message="nameValidate">\n              {{:: \'library.invalidField\' | i18nText }}\n            </div>\n          </div>\n        </md-input-container>\n        <md-input-container\n          data-sumo-test="item-description"\n          class="md-block library-action-view__input"\n        >\n          <label>{{:: \'common.description\' | i18nText}}</label>\n          <textarea\n            ng-model="$ctrl.editableItem.description"\n            maxlength="$ctrl.maxLength"\n          ></textarea>\n        </md-input-container>\n        <div class="form-errors-container" ng-if="$ctrl.errors.length > 0">\n          <form-errors\n            class="form-errors-container__errors"\n            errors="$ctrl.errors"\n          ></form-errors>\n        </div>\n        <div\n          data-sumo-test="item-selectedFolder"\n          class="library-action-view__folder-selector-container create-content-search__location"\n        >\n          <div\n            data-sumo-test="item-selectedFolder-label"\n            class="create-content-search__location__label"\n          >\n            {{:: \'library.saveLocation\' | i18nText }}\n          </div>\n          <root-folder-selector\n            folder="$ctrl.selectedFolder"\n            errors="$ctrl.errors"\n            class="library-action-root-selector create-content-search__location__root-selector"\n          >\n          </root-folder-selector>\n        </div>\n      </div>\n    </load-placeholder>\n    <div layout="row" class="library-action-view__actions">\n      <div class="library-action-view__actions" flex>\n        <md-button\n          class="md-raised md-primary md-button"\n          ng-disabled="editSavedMetrics.$pending"\n          ng-click="$ctrl.hideErrorToast(); $ctrl.actions.cancel()"\n          data-sumo-test="cancel-button"\n        >\n          {{:: \'common.cancel\' | i18nText}}\n        </md-button>\n        <md-button\n          type="submit"\n          data-sumo-test="submit-button"\n          ng-disabled="editSavedMetrics.$pending"\n          class="md-raised md-button md-accent -rightmost"\n        >\n          <span ng-switch="$ctrl.searchQueryValidating">\n              {{:: \'common.save\' | i18nText}}\n          </span>\n        </md-button>\n      </div>\n    </div>\n  </form>'};var sE=i(16826);class oE{constructor(e,t,i,r,n){this.$q=e,this.treeItemStoreFactory=t,this.contentServiceFactory=i,this.contentManagementServiceFactory=r,this.httpBucketService=n,this.changeContext=e=>{const t=this.updateState({context:e});return this.updateRoot(),t},this.search=e=>{const t=this.updateState({filter:e});return this.updateRoot(),t},this.processToggle=(e,t)=>{let i=this.state.items;if(!0!==t&&this.treeItemStore.isOpen(e.id))i=this.treeItemStore.closeFolder(e);else{i=this.treeItemStore.openFolder(e);this.contentServiceFactory.getInstance().getFolder(e.id<0?e.name.toLowerCase():e.id).then((t=>{t.id=e.id,this.updateState({items:this.treeItemStore.setFolder(t)})}))}this.updateState({items:i})},this.toggle=(e,t)=>{(0,F.isNestedContentType)(e.type)?this.processToggle(e,t):g.libraryActionsService.runAction({actionType:re.ContentActionType.OPEN,event:void 0,meta:{triggeredFrom:"leftNav"}},e)},this.dragComplete=(e,t,i)=>{const r=t.type===F.CONTENT_TYPES.FOLDER?t.id:t.parentId;return!(r===e.parentId||!r)&&g.libraryActionsService.runAction({event:i,actionType:re.ContentActionType.MOVE,params:{destinationFolderId:r}},e)},this.dragOver=(e,t,i)=>{let r=this.state.items;const n=this.contentServiceFactory.getInstance();let a;return t.type!==F.CONTENT_TYPES.FOLDER||this.treeItemStore.isOpen(t.id)||(r=this.treeItemStore.openFolder(t),a=n.getFolder(t.id).then((e=>{e.id=t.id,this.updateState({items:this.treeItemStore.setFolder(e)})})),this.updateState({items:r})),a||!1},this.toggleFavorite=(e,t)=>g.libraryActionsService.runAction({event:t,actionType:re.ContentActionType.FAVORITE},e),this.showContextMenu=(e,t)=>(0,g.showLibraryContextMenu)(e,F.ACTION_MENU_CONTEXTS.SIDE_PANEL,t).then((e=>{const i=this.tryOverrideAction(e,t);return i||g.libraryActionsService.runAction(e,t)})),this.showContextMenuOptions=e=>{const t=this.treeItemStore.getRoot();return this.showContextMenu(e,t)},this.allowMenuVisible=()=>!0,this.fetchMetaData=e=>{const{type:t}=e;let i;t===F.CONTENT_TYPES.SAVED_SEARCH?i=this.fetchSavedSearchMetaData(e):t===F.CONTENT_TYPES.RECENT_SEARCH&&(i=this.convertRecentSearchToMetaData(e)),i&&i.then((t=>{const i=this.treeItemStore.updateMetaData(e.id,t);this.updateState({items:i})}))},this.convertRecentSearchToMetaData=e=>this.$q.resolve({query:{queryString:Eb.truncateMultilineString(e.query),timeRange:e.timeRangeExpression},parameters:e.parameters}),this.treeItemStore=t.getInstance(),this.state={items:void 0,initialized:!1,groups:void 0},this.state$=new sE.Subject,this.subscription=g.contentActionNotificationService.getContentActionResult$().subscribe((e=>{this.onItemsChange(e)}))}getContexts(){return[]}$onDestroy(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)}getState(){return this.state}getState$(){return this.state$}getActions(){return{changeContext:this.changeContext,search:this.search,toggleFavorite:this.toggleFavorite,showContextMenu:this.showContextMenu,showContextMenuOptions:this.showContextMenuOptions,toggle:this.toggle,dragOver:this.dragOver,dragComplete:this.dragComplete,allowMenuVisible:this.allowMenuVisible,onOpenInNewTab:(e,t)=>g.libraryActionsService.runAction({actionType:re.ContentActionType.LAUNCH_IN_NEW_WINDOW,event:t},e),fetchMetadata:_.debounce(this.fetchMetaData,100)}}getGrouper(e){}initialize(e){this.updateState({initialized:!0,context:e}),this.updateRoot()}updateRoot(e=!0){return!_.isUndefined(this.state.items)&&e&&this.updateState({items:this.treeItemStore.clear()}),this.updateGrouper([]),this.fetchRoot().then((e=>{if(!(0,re.get)(e,["error","obsolete"])){const t=this.treeItemStore.setRoot(e);return this.updateGrouper(t),this.updateState({items:t})}}))}updateGrouper(e){this.treeItemStore.setGrouper(this.getGrouper(e))}onItemsChange(e){let t;const{actionType:i,items:r,destinationFolderId:n}=e;switch(i){case re.ContentActionType.FAVORITE:case re.ContentActionType.UNFAVORITE:t=this.favoriteItems(r);break;case re.ContentActionType.EDIT:case re.ContentActionType.RUN_AS:t=this.updateItems(r);break;case re.ContentActionType.SHARE:t=this.shareItems(r);break;case re.ContentActionType.UNSHARE:t=this.unshareItems(r);break;case re.ContentActionType.DELETE:case re.ContentActionType.UNPIN:t=this.deleteItems(r);break;case re.ContentActionType.MOVE:case re.ContentActionType.MIGRATE:t=this.moveItems(r,n);break;case re.ContentActionType.CREATE:case re.ContentActionType.INSTALL:case re.ContentActionType.COPY:t=this.addItems(r,n);break;case re.ContentActionType.PIN:t=this.addPinnedSearch(r);break;case re.ContentActionType.IMPORT:t=this.importItems(r,n);break;case re.ContentActionType.OPEN:t=this.openItems(r)}t&&(this.httpBucketService.getBucket("contentBucket").clearAll(),this.updateState({items:t}))}fetchSavedSearchMetaData(e){return this.contentManagementServiceFactory.getInstance().getService(e.type).fetch(e).then((({query:e,parameters:t})=>{const{timeRange:i,queryString:r}=e;return{query:{queryString:Eb.truncateMultilineString(r),timeRange:i},parameters:t}}))}importItems(e,t){const i=this.treeItemStore.getFolder(t);if(i){const e=this.treeItemStore.isOpen(i.id);this.toggle(i,e)}}openItems(e){}deleteItems(e){return this.treeItemStore.deleteItemsInFolders(e)}moveItems(e,t){if(0!==t)return this.treeItemStore.moveItemsToFolder(e,t)}addItems(e,t){return this.treeItemStore.addItemsInFolder(e,t)}addPinnedSearch(e){return this.addItems(e)}updateItems(e){return this.treeItemStore.updateItemsInFolders(e)}favoriteItems(e){return this.updateItems(e)}shareItems(e){return this.updateItems(e)}unshareItems(e){return this.updateItems(e)}getGroupsForItems(e){const t=this.getGrouper(e);if(!t||0===t.groupClauses.length)return{};const i={},r={};return t.sortComparator&&!e.find((e=>!!e.level))&&e.sort(t.sortComparator),this.treeItemStore.sortFolderListByPersonalFirst(e),_.forEach(e,(e=>{const n=_.find(t.groupClauses,(t=>t.predicate(e)));n&&!i[n.label]&&(i[n.label]=e,r[e.id]=n.label)})),r}updateState(e){let t;return e&&e.items&&0===e.items.length&&(t=this.getEmptyState()),e.items&&(e.groups=this.getGroupsForItems(e.items)),this.state=Object.assign({},this.state,e,{emptyState:t}),this.state$.onNext(this.state),this.state}tryOverrideAction(e,t){if(E.currentUserHelper.hasFeatureFlag("UISearchEditSearchDialogReact")&&e.actionType===re.ContentActionType.EDIT&&t.type===F.CONTENT_TYPES.SAVED_SEARCH)return(0,xh.renderEditSearchDialogFromLibrary)({searchItem:t,actionCommand:e})}}class lE extends oE{constructor(e,t,i,r,n,a,s){super(e,t,i,r,s),this.i18n=n,this.collectionHelpersService=a}canInitialize(){return!this.state.initialized}initialize(e=g.LIBRARY_CONTEXTS.PERSONAL){super.initialize(e)}shareItems(e){let t;return this.state.context===g.LIBRARY_CONTEXTS.ORG?this.updateRoot():t=this.updateItems(e),t}unshareItems(e){let t;return this.state.context===g.LIBRARY_CONTEXTS.ORG?this.updateRoot():t=this.updateItems(e),t}getContexts(){return[{name:g.LIBRARY_CONTEXTS.PERSONAL,label:"library.personal",allowSearch:!0,allowLabelAsHeader:!1,allowDropDownSelection:!1,allowMenuSelection:!1},{name:g.LIBRARY_CONTEXTS.ORG,label:"library.org",allowSearch:!0,allowLabelAsHeader:!1,allowDropDownSelection:!1,allowMenuSelection:!1}]}getEmptyState(){return this.state.filter?D_.SEARCH:this.state.context===g.LIBRARY_CONTEXTS.ORG?D_.ROOT:D_.PERSONAL}moveItems(e,t){if(!this.state.filter)return super.moveItems(e,t)}fetchRoot(){const e=this.state,t=this.contentServiceFactory.getInstance();let i;const r=e.filter;if(r){const n=e.context===g.LIBRARY_CONTEXTS.ORG?"in:org":"in:personal";i=t.getSearchResults(`${n} ${r}`)}else i=e.context===g.LIBRARY_CONTEXTS.ORG?t.getOrg():t.getPersonal();return i.then((e=>r!==this.state.filter?{error:{obsolete:!0}}:e)).catch((e=>($.logWarnLocal("Error: ",e),{id:void 0,children:[]})))}}class cE extends oE{constructor(e,t,i,r,n){super(e,t,i,r,n)}canInitialize(){return!0}getEmptyState(){return D_.FAVORITES}favoriteItems(e){const[t,i]=_.partition(e,(e=>e.favorite));return this.treeItemStore.updateAddRemove(e,t,i)}moveItems(e,t){return this.treeItemStore.moveItemsToFolderIgnoringRoot(e,t)}fetchRoot(){return this.contentServiceFactory.getInstance().getFavorites()}}class dE extends oE{constructor(e,t,i,r,n,a,s){super(e,t,i,r,s),this.i18n=n,this.$timeout=a,this.recentsGrouper={groupClauses:[{predicate:e=>e._item.type===F.CONTENT_TYPES.DASHBOARD||e._item.type===F.CONTENT_TYPES.NEW_DASHBOARD,label:this.i18n.get("content.recentlyOpenedDashboards")},{predicate:e=>e._item.type===F.CONTENT_TYPES.BACKGROUND_SEARCH,label:this.i18n.get("content.pinnedSearches")},{predicate:e=>e._item.type===F.CONTENT_TYPES.RECENT_SEARCH,label:this.i18n.get("content.recentlyRunSearches")}],sortComparator:void 0}}canInitialize(){return!0}getGrouper(e){return this.recentsGrouper}getEmptyState(){return D_.RECENT}openItems(e){let t;return e&&e.length&&_.all(e,(e=>e.type===F.CONTENT_TYPES.DASHBOARD))?t=this.treeItemStore.addRecentItemsInRoot(e):this.$timeout((()=>this.updateRoot(!1)),100),t}addPinnedSearch(e){this.updateRoot(!1)}moveItems(e,t){}fetchRoot(){return this.contentServiceFactory.getInstance().getRecent()}}class uE extends lE{constructor(e,t,i,r,n,a,s){super(e,t,i,r,n,a,s),this.allowMenuVisible=()=>!this.state.filter}getContexts(){return[{name:g.LIBRARY_CONTEXTS.PERSONAL,label:"library.personal",allowSearch:!0,allowLabelAsHeader:!1,allowDropDownSelection:!1,allowMenuSelection:!0},{name:g.LIBRARY_CONTEXTS.ORG,label:"library.org",allowSearch:!0,allowLabelAsHeader:!1,allowDropDownSelection:!1,allowMenuSelection:!0}]}getActions(){return Object.assign(Object.assign({},super.getActions()),{allowMenuVisible:this.allowMenuVisible})}fetchRoot(){const e=this.contentServiceFactory.getInstance(),t=this.state.filter;let i;return i=t?e.getSearchResults(`in:personal ${t}`):e.getPersonal(),i.then((e=>t!==this.state.filter?{error:{obsolete:!0}}:e)).catch((e=>($.logWarnLocal("Error: ",e),{id:void 0,children:[]})))}}class pE extends lE{constructor(e,t,i,r,n,a,s){super(e,t,i,r,n,a,s),this.libraryGrouper={groupClauses:[{predicate:e=>e._item.isAdminRecommended,label:this.i18n.get("library.adminRecommended")},{predicate:e=>!e._item.isAdminRecommended&&0===e.level,label:this.i18n.get("library.otherContent")}],sortComparator:this.collectionHelpersService.alphabeticSortComparator((e=>+!e._item.isAdminRecommended+"_"+(0,F.getSortPriority)(e._item.type)+e._item.name.toLowerCase()))},this.processToggle=(e,t)=>{let i=this.state.items;if(!0!==t&&this.treeItemStore.isOpen(e.id))i=this.treeItemStore.closeFolder(e),this.updateState({items:i});else if(e.type===F.CONTENT_TYPES.PSEUDO_FOLDER){const t=e;this.treeItemStore.openPseudoFolder(e),this.updateState({items:this.treeItemStore.setFolder(t)})}else{i=this.treeItemStore.openFolder(e);this.contentServiceFactory.getInstance().getFolder(e.id<0?e.name.toLowerCase():e.id).then((t=>{t&&t.id?(t.id=e.id,i=this.treeItemStore.setFolder(t)):i=this.treeItemStore.closeFolder(e),this.updateState({items:i})})),this.updateState({items:i})}},this.showContextMenuOptions=e=>this.getState().context===g.LIBRARY_CONTEXTS.CREATOR?(0,g.showLibraryCustomContextMenu)(e,[{type:"OPEN_ORG",label:this.i18n.get("library.shared"),groupSeparator:!1}]).then((()=>{this.updateState({context:g.LIBRARY_CONTEXTS.SHARED}),this.updateRoot()})):(0,g.showLibraryCustomContextMenu)(e,[{type:"OPEN_CREATOR_VIEW",label:this.i18n.get("library.creator"),groupSeparator:!1}]).then((()=>{this.updateState({context:g.LIBRARY_CONTEXTS.CREATOR}),this.updateRoot()}))}initialize(e=g.LIBRARY_CONTEXTS.SHARED){super.initialize(e)}getContexts(){return[{name:g.LIBRARY_CONTEXTS.SHARED,label:"library.shared",allowSearch:!0,allowLabelAsHeader:!1,allowDropDownSelection:!1,allowMenuSelection:!0},{name:g.LIBRARY_CONTEXTS.CREATOR,label:"library.creator",allowSearch:!1,headerLabel:"library.creatorLabel",allowLabelAsHeader:!0,allowDropDownSelection:!1,allowMenuSelection:!0}]}getEmptyState(){return D_.ROOT}getGrouper(e){if(this.state.context===g.LIBRARY_CONTEXTS.SHARED&&e.find((e=>e._item.isAdminRecommended)))return this.getGlobalViewGrouper(e)}getGlobalViewGrouper(e){if(e.find((e=>e._item.isAdminRecommended)))return this.libraryGrouper}fetchRoot(){const e=this.contentServiceFactory.getInstance();let t;return t=this.state.filter?e.getSearchResults(`${this.state.filter}`):e.getRoot(),t.then((e=>{if(this.state.context===g.LIBRARY_CONTEXTS.CREATOR){const t=_.groupBy(e.children,(e=>e.creator.id));e.children=_.keys(t).map((e=>({id:e,name:t[e][0].creator.name,type:F.CONTENT_TYPES.PSEUDO_FOLDER,children:t[e],creator:t[e][0].creator})))}return e})).catch((e=>($.logWarnLocal("Error: ",e),{id:void 0,children:[]})))}}class hE extends dE{constructor(e,t,i,r,n,a,s,o){super(e,t,i,r,n,s,o),this.collectionHelpersService=a,this.recentSharedGrouper=Object.assign(Object.assign({},this.collectionHelpersService.timestampGrouper((e=>e._item.sharedAt))),{sortComparator:void 0})}canInitialize(){return!this.state.initialized}initialize(e=g.LIBRARY_CONTEXTS.RECENT){super.initialize(e)}getContexts(){return[{name:g.LIBRARY_CONTEXTS.RECENT,label:"library.recent",allowSearch:!1,allowLabelAsHeader:!1,allowDropDownSelection:!0,allowMenuSelection:!1},{name:g.LIBRARY_CONTEXTS.RECENT_SHARED,label:"library.recentShared",allowSearch:!1,allowLabelAsHeader:!1,allowDropDownSelection:!0,allowMenuSelection:!1}]}getEmptyState(){return this.state.context===g.LIBRARY_CONTEXTS.RECENT_SHARED?D_.RECENT_SHARED:D_.RECENT}getGrouper(e){return this.state.context===g.LIBRARY_CONTEXTS.RECENT_SHARED?this.recentSharedGrouper:this.recentsGrouper}addPinnedSearch(e){this.state.context===g.LIBRARY_CONTEXTS.RECENT&&this.updateRoot(!1)}openItems(e){if(this.state.context===g.LIBRARY_CONTEXTS.RECENT)return super.openItems(e)}fetchRoot(){const e=this.contentServiceFactory.getInstance();return this.state.context===g.LIBRARY_CONTEXTS.RECENT_SHARED?e.getRecentShared():e.getRecent()}}class mE{constructor(e,t,i,r,n,a,s,o){this.$q=e,this.i18n=t,this.treeItemStoreFactory=i,this.contentServiceFactory=r,this.contentManagementServiceFactory=n,this.collectionHelpersService=a,this.$timeout=s,this.httpBucketServiceFactory=o}getLibraryInstance(){return new lE(this.$q,this.treeItemStoreFactory,this.contentServiceFactory,this.contentManagementServiceFactory,this.i18n,this.collectionHelpersService,this.httpBucketServiceFactory)}getRecentInstance(){return new dE(this.$q,this.treeItemStoreFactory,this.contentServiceFactory,this.contentManagementServiceFactory,this.i18n,this.$timeout,this.httpBucketServiceFactory)}getFavoritesInstance(){return new cE(this.$q,this.treeItemStoreFactory,this.contentServiceFactory,this.contentManagementServiceFactory,this.httpBucketServiceFactory)}getPersonalInstance(){return new uE(this.$q,this.treeItemStoreFactory,this.contentServiceFactory,this.contentManagementServiceFactory,this.i18n,this.collectionHelpersService,this.httpBucketServiceFactory)}getGlobalViewInstance(){return new pE(this.$q,this.treeItemStoreFactory,this.contentServiceFactory,this.contentManagementServiceFactory,this.i18n,this.collectionHelpersService,this.httpBucketServiceFactory)}getEnhancedRecentInstance(){return new hE(this.$q,this.treeItemStoreFactory,this.contentServiceFactory,this.contentManagementServiceFactory,this.i18n,this.collectionHelpersService,this.$timeout,this.httpBucketServiceFactory)}}mE.$inject=["$q","i18n","treeItemStoreFactory","contentServiceFactory","contentManagementServiceFactory","collectionHelpersService","$timeout","httpBucketServiceFactory"];class gE{constructor(){this.groupClauses=[]}sortComparator(e,t){return g.FolderConverter.sortComparator(e._item,t._item)}}class yE{constructor(e){this.grouper=new gE,this.unsetGrouper=()=>this.setGrouper(),this.setGrouper=e=>this.grouper=e||new gE,this.getGrouper=e=>this.grouper,this.LOADING_NAME=e.get("library.loading"),this.folders={},this.metaData={}}getLoadingNode(e){return{id:Math.random(),icon:void 0,name:this.LOADING_NAME,level:e.level+1,selected:!1,_item:e._item}}clear(){return this.rootFolderId=void 0,this.folders={},this.metaData={},this.items=void 0,this.unsetGrouper(),this.items}setRoot(e){return this.rootFolderId=e.id,this.setFolder(e)}getRoot(){return this.folders[this.rootFolderId]}setFolder(e){return this.folders[e.id]=e,this.items=this.flattenRootFolderTree(),this.items}getFolder(e){return this.folders[e]}isOpen(e){return!_.isUndefined(this.folders[e])}isInRootFolder(e){let t=!1;const i=this.folders[this.rootFolderId];if(i&&i.children){t=_.findIndex(i.children,(t=>t.id===e.id||e.accessKey&&t.accessKey===e.accessKey))>-1}return t}openFolder(e){const t=this.items;let i=t;if(_.isUndefined(this.folders[e.id])){const r=_.findIndex(t,(t=>t.id===e.id)),n=this.getLoadingNode(t[r]);e=Object.assign(Object.assign({},t[r]),{icon:F.CONTENT_TYPE_ICONS.FOLDER_OPEN,children:[n]}),i=[...t.slice(0,r),e,n,...t.slice(r+1)]}return this.items=i,this.folders[e.id]=e,i}openPseudoFolder(e){this.folders[e.id]=e}closeFolder(e){return this.items=this.removeFolder(e),this.items}removeFolder(e){return delete this.folders[e.id],this.items=this.flattenRootFolderTree(),this.items}updateItemsInFolders(e){return _.each(e,(e=>this.updateItemInFolders(e))),this.items=this.flattenRootFolderTree(),this.items}updateMetaData(e,t){return this.metaData[e]=t,this.items=this.flattenRootFolderTree(),this.items}addItemsInRoot(e){return this.addItemsInFolder(e,this.rootFolderId)}addRecentItemsInRoot(e){const t=_.indexBy(e,"accessKey"),i=this.folders[this.rootFolderId];if(!_.isUndefined(i)){const r=i.children;this.setFolder(Object.assign(Object.assign({},i),{children:[...e,..._.filter(r,(e=>_.isUndefined(t[e.accessKey])))]}))}return this.items}moveItemsToFolder(e,t){return _.each(e,(e=>this.deleteItemInFolders(e))),this.addItemsInFolder(e,t)}moveItemsToFolderIgnoringRoot(e,t){return _.each(e,(e=>this.deleteItemInFolders(e,this.rootFolderId))),this.addItemsInFolder(e,t)}addItemsInFolder(e,t=this.rootFolderId){const i=this.folders[t];return!_.isUndefined(i)&&(i.children=g.FolderConverter.sortChildren([...i.children,...e])),this.items=this.flattenRootFolderTree(),this.items}deleteItemsInFolders(e){return _.each(e,(e=>this.deleteItemInFolders(e))),this.items=this.flattenRootFolderTree(),this.items}updateAddRemove(e,t,i){return _.each(i,(e=>this.deleteItemFromFolder(this.folders[this.rootFolderId],e))),_.each(e,(e=>this.updateItemInFolders(e))),this.addItemsInRoot(t)}sortFolderListByPersonalFirst(e){const t=e.findIndex((e=>!e._item.isAdminRecommended&&0===e.level));if(t>-1){let i=e.slice(t);i=g.FolderConverter.sortFoldersByPersonalFirst(i),e.splice(t,i.length,...i)}return e}updateItemInFolders(e){_.each(this.folders,(t=>{const i=_.findIndex(t.children,(t=>t.id===e.id||e.accessKey&&t.accessKey===e.accessKey));if(i>-1){const r=t.children[i];t.children.splice(i,1,e),r.name!==e.name&&(t.children=g.FolderConverter.sortChildren(t.children))}}))}deleteItemInFolders(e,t){delete this.folders[e.id],_.each(this.folders,(i=>{t&&i.id===t||this.deleteItemFromFolder(i,e)}))}deleteItemFromFolder(e,t){if(e&&e.children){if(void 0!==_.find(e.children,((i,r)=>{let n=!1;return i.id===t.id||t.accessKey&&i.accessKey===t.accessKey?(e.children.splice(r,1),n=!0):i.type===F.CONTENT_TYPES.FOLDER&&(n=this.deleteItemFromFolder(i,t)),n})))return!0}return!1}flattenRootFolderTree(){return this.folders[this.rootFolderId]?this.flattenFolderTree(this.folders[this.rootFolderId],0):void 0}flattenFolderTree(e,t){let i=[],r=_.map(e.children,(e=>this.folderableToTreeItem(e,{level:t,hasChildren:this.hasChildren(e),isOpen:this.isOpen(e.id),isDraggable:e.actions&&!!_.findWhere(e.actions,{type:re.ContentActionType.MOVE})})));if(t)this.grouper.sortComparator&&r.sort(this.grouper.sortComparator);else{const e=_.groupBy(r,(e=>0===this.grouper.groupClauses.length?void 0:_.findIndex(this.grouper.groupClauses,(t=>t.predicate(e)))));r.length=0,_.forEach(e,(e=>{this.grouper.sortComparator&&e.sort(this.grouper.sortComparator),r.push.apply(r,e)}))}return r=this.sortFolderListByPersonalFirst(r),_.forEach(r,(e=>{i.push(e),(0,F.isNestedContentType)(e._item.type)&&e._meta.hasChildren&&(i=i.concat([],this.flattenFolderTree(this.folders[e.id],t+1)))})),i}hasChildren(e){const t=this.folders[e.id];return(0,F.isNestedContentType)(e.type)&&!_.isUndefined(t)&&!_.isUndefined(t.children)&&t.children.length>0}folderableToTreeItem(e,t){const i=e.type===F.CONTENT_TYPES.FOLDER&&t.isOpen?F.CONTENT_TYPE_ICONS.FOLDER_OPEN:e.typeIcon;return{id:e.id,name:e.name,icon:i,level:t.level,selected:t.selected,_item:e,_metaData:this.metaData[e.id],_meta:t}}}class vE{constructor(e){this.i18n=e}getInstance(){return new yE(this.i18n)}}vE.$inject=["i18n"],(0,xh.createSearchNgModule)();const fE=(0,re.legacyReactToAngular)(xh.SelectWithHint,["name","optional","value","elements","onChange","label"]),_E=s.module("sumoApp.libraryCommon",["sumoApp.currentUser.state","sumoApp.drilldown.dashboard","sumoApp.i18n","sumoApp.logging","sumoApp.content","sumoApp.components","sumoApp.search.common","sumoApp.search","sumoApp.common.components","sumoApp.users.roles.state","sumoApp.help.components","sumoApp.currentUser","sumoApp.core","ui.router","ngMaterial","ngSanitize"]),SE={service:{libraryTreeUtilService:Eb,libraryPathHelper:z_,scheduleInfoService:G_,runAsConflictHandlerService:Zb.B,libraryTreeServiceFactory:mE,treeItemStoreFactory:vE},component:{contentItemDetailsWrapper:vb,singleContentItemDetails:ub,multiContentItemDetails:hb,scheduleInfo:ab,contentItemDetailsBody:ob,contentItemDetailActions:gb,libraryTreeView:_b,libraryTreeViewTooltip:Ub,libraryTreeViewActions:bb,libraryTreeViewTooltipBrowseByCreator:Bb,folderListView:Ob,folderListViewActions:Ib,appListView:Ab,folderableList:kb,folderableListCard:Lb,exportContentItem:nS,copyContentItem:lS,createNewDashboard:IS,createNewDashboardReact:(0,re.strictModeReactToAngular)((({typeService:e,actions:t,item:i,duplicate:r=!1})=>{const n={name:[{type:"required",message:Ge.j.get("library.requiredField")},{type:"custom",value:e=>(0,re.isValidName)(e,[":"])?null:Ge.j.get("library.invalidField")}]};return x().createElement(qt.Form,{initialValues:{id:i.id,name:i.name+(r?` (${Ge.j.get("library.duplicateCopy")})`:""),description:i.description,selectedFolder:{id:""}},validationRules:n,isInitialValid:!0,onSubmit:(i,{setSubmitting:n})=>{var a;const s=null===(a=null==i?void 0:i.selectedFolder)||void 0===a?void 0:a.id;if(!s)return(0,R.showCriticalNotification)({message:Ge.j.get("content.selectAFolder"),autoDismiss:!0}),void n(!1);n(!0),e.copy(s,i).then((e=>{(0,re.assertDefined)(e),n(!1);const a=Ge.j.getSafeString("library.copyItemSuccess",i.name,i.selectedFolder.name);r&&(0,R.showCasualNotification)({message:"",variant:"success",action:x().createElement("p",{style:bS.notification},x().createElement("span",{dangerouslySetInnerHTML:{__html:a}}),x().createElement("a",{style:bS.link,href:"javascript:void;",onClick:()=>{g.libraryActionsService.runAction({actionType:re.ContentActionType.OPEN_IN_LIBRARY},e)}},Ge.j.get("library.open")))}),t.resolve(e)}),(e=>{n(!1);const t=void 0!==e.errorObject?e.errorObject.errors:e.errors;(0,R.showCriticalNotification)({message:t.map((e=>e.message)).join(",")})}))},render:SS,onReset:()=>{t.cancel()}})}),["typeService","actions","item","duplicate"]),createMetricsExplorer:RS,moveContentItem:sS,editContentItem:Y_,editSavedSearch:iS,shareContentItemWithPermissions:$b.V,createContentPermissionList:qb._,createContentPermission:Hb.W,editContentPermissions:Wb.J,publicPermissions:jb.Z,shareContentItemUrl:Qb.h,contentItemUrl:g.contentItemUrlComponent,shareContentItemParameters:zb.q,emailNotification:Gb.g,shareContentItemWithPermissionsFooter:Jb.b,createContentFolder:TS,createContentSearch:CS,createContentMetrics:wS,saveContentMetricsAs:aE,importContentItem:xb,rootFolderSelector:eb,rootContentSelector:rb,shareContentItemUrlNewDashboard:(0,re.legacyReactToAngular)(g.ShareContentItemUrlNewDashboard,["accessKey"]),scheduleAlertConditionSelector:MS,scheduleAlertEmailSelector:FS,scheduleAlertSourceSelector:US,scheduleAlertCseSignalSelector:VS,scheduleAlertWebhookSelector:HS,scheduleAlertServiceNowSelector:WS,scheduleAlertLookupSelector:QS,scheduleAlertViewSelector:qS,scheduleAlertSelector:LS,scheduleFrequencySelector:YS,scheduleEditor:XS,contentSearch:OS,runAsContentItem:Kb.g,runAsConflictDialog:Yb.M,runAsDialogHeader:g.runAsDialogHeaderComponent,libraryTabHeaderView:Q_,querySettingsComponent:Xb.$,selectWithHint:fE},filter:{containsAction:Nb},directive:{},value:{contentLoggingNotificationService:g.contentLoggingNotificationService,openInLibraryActionService:g.openInLibraryActionService,openActionService:g.openActionService,shareActionService:g.shareActionService}};(0,iE.L)(_E,SE),(0,ds.tl)("contentItemUrlService",["sumoApp.core"]);const bE=s.module("sumoApp.library",["sumoApp.content","sumoApp.libraryCommon","sumoApp.workspaces","sumoApp.core","sumoApp.workspaces.workspacesCommon"]);bE.service("libraryService",H_),bE.component("libraryBrowserContainer",S_),bE.component("libraryBrowser",y_),bE.component("libraryHeader",f_),bE.component("viewAsSelect",(0,re.strictModeReactToAngular)((({canEnableAdminMode:e,isAdminModeEnabled:t,onAdminViewChange:i,setAdminMode:r})=>{const n=e?x().createElement(qt.Select,{inline:!0,label:re.i18nUtil.get("library.viewAs"),handleChange:e=>{r(Boolean(e.target.value)),i()},value:t,classes:{root:q_().viewAsSelect}},x().createElement(qt.Select.Item,{value:!1},re.i18nUtil.get("library.viewAsMe")),x().createElement(qt.Select.Item,{value:!0},re.i18nUtil.get("library.viewAsContentAdmin"))):null;return(0,T.useEffect)((()=>{g.headerBarService.updateProps({customToolbarComponent:n})})),n}),["canEnableAdminMode","isAdminModeEnabled","onAdminViewChange","setAdminMode"])),bE.config(["$stateProvider",e=>{_.each(T_,(t=>e.state(t)))}]);i(14988),i(4714);const EE={bindings:{control:"<"},template:'<users-and-roles-page config="$ctrl.control.config" selected-tab="$ctrl.control.selectedTab"\n              style="height: 100%; display: block;"></users-and-roles-page>'},TE=[{id:"users",title:"Users",privilege:"UsersTabAccess",helpId:1006},{id:"roles",title:"Roles",privilege:"RolesTabAccess",helpId:5234}];class xE extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.MEGA_USER_AND_ROLES}createView(e){const t=g.applicationState.params.config||e,i=super.createView(e);return i.title=t.title,i.isStatic=!0,i}getHelpId(e){const t=TE;return _.find(t,(t=>t.id===e.params.selectedTab)).helpId}sideNavChange(){return this.getCurrentWorkspaceViewMessage$().filter((e=>e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.RESIZE||e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.INITIAL_VALUE))}getViewClassName$(){return this.sideNavChange().map((e=>e.arguments.navClosed?"-navClosed":""))}getViewParams(){return[...super.getViewParams(),"selectedTab"]}viewRemoved(e){var t,i;((null===(i=null===(t=e.params)||void 0===t?void 0:t.config)||void 0===i?void 0:i.tabs)||[]).forEach((({id:e})=>{Te.store.dispatch((0,Xn.setSearchKeyword)(e,""))}))}}class CE{constructor(e,t,i,r){this.$scope=e,this.usersAndRolesWorkspaceViewService=i,this.currentUserHelper=r,this.config=g.applicationState.params.config,this.selectedTab=g.applicationState.params.selectedTab,this.workspace=t.getWorkspace(g.applicationState.params.workspaceId);const n=this.workspace.findView(this.config.id);n?(n.params=Object.assign(Object.assign({},n.params),g.applicationState.params),this.workspace.setCurrentView(n),this.view=n):(this.view=i.createView({currentStateName:g.applicationState.name,params:g.applicationState.params}),this.workspace.addView(this.view,void 0,!0))}}CE.$inject=["$scope","workspacesService","usersAndRolesWorkspaceViewService","currentUserHelper"];const AE={name:"app.megauser",url:"/manage/:selectedTab",params:{config:El,selectedTab:El.defaultActiveTab},template:'<users-and-roles-root control="$ctrl" style="height: 100%"></users-and-roles-root>',controller:CE,controllerAs:"$ctrl"};let wE;s.module("sumoApp.state",[]).run(["$injector",e=>{wE=e.get("$state"),window.$state=wE}]);const IE=s.module("sumoApp.usersAndRoles.workspace",["sumoApp.currentUser.state","sumoApp.workspaces","sumoApp.usersAndRoles.containers","sumoApp.state"]);let RE;IE.component("usersAndRolesRoot",EE),IE.service("usersAndRolesWorkspaceViewService",xE),IE.config(["$stateProvider",e=>{e.state(AE)}]),IE.run(["$injector",e=>{RE=e.get("usersAndRolesWorkspaceViewService")}]);const DE={bindings:{control:"<"},template:'<mega-csiem-page config="$ctrl.control.config" selected-tab="$ctrl.control.selectedTab"\n            folder-id="$ctrl.control.folderId" style="height: 100%; display: block;"></mega-csiem-page>'},OE="TreeInformationModelsTabContainer",NE="treeInformationModels",ME=[{id:NE,title:"manage.groups.csiem.mega-information-models",privilege:"SanaCsiemMegaRulesAccess"},{id:Ep,title:"manage.groups.csiem.mega-parses",privilege:"SanaCsiemMegaRulesAccess"}],{setSearchKeyword:kE,setSearchTags:LE}=Xn.treeTemplateActions;class PE extends g.BaseViewService{constructor(){super(g.workspacesManager,k.logService),this.viewInfo=F.WORKSPACE.VIEWS.MEGA_CSIEM}createView(e){const t=g.applicationState.params.config||e,i=super.createView(e);return i.title=t.title,i.isStatic=!0,i}getHelpId(e){const t=ME;return _.find(t,(t=>t.id===e.params.selectedTab)).helpId}sideNavChange(){return this.getCurrentWorkspaceViewMessage$().filter((e=>e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.RESIZE||e.type===F.WORKSPACE.VIEW_MESSAGE_TYPES.INITIAL_VALUE))}getViewClassName$(){return this.sideNavChange().map((e=>e.arguments.navClosed?"-navClosed":""))}getViewParams(){return[...super.getViewParams(),"selectedTab","folderId"]}viewRemoved(e){var t,i;((null===(i=null===(t=e.params)||void 0===t?void 0:t.config)||void 0===i?void 0:i.tabs)||[]).forEach((({id:e})=>{Gr.currentUserHelper.hasFeatureFlag("UIEnableTreeTemplateTagBasedSearch")?Te.store.dispatch(LE(e,[])):Te.store.dispatch(kE(e,""))}))}}class FE{constructor(e,t,i){this.$scope=e,this.megaCSiemWorkspaceViewService=i,this.id="",this.tabs=[],this.config=g.applicationState.params.config,this.selectedTab=g.applicationState.params.selectedTab,this.workspace=t.getWorkspace(g.applicationState.params.workspaceId);const r=this.workspace.findView(this.config.id);r?(r.params=Object.assign(Object.assign({},r.params),g.applicationState.params),this.workspace.setCurrentView(r),this.view=r):(this.view=i.createView({currentStateName:g.applicationState.name,params:g.applicationState.params}),this.workspace.addView(this.view,void 0,!0))}}FE.$inject=["$scope","workspacesService","megaCSiemWorkspaceViewService"];const UE={id:NE,title:"manage.groups.csiem.information-models",privilege:"SanaInformationModelsViewAccess",tabContent:{component:OE,componentProps:{templateTableProps:{gridOptions:{},columnOptions:[]},templateActionBarProps:{templateSearchProps:{placeholder:"treeInformationModels.searchInformationModels"},templateActionProps:{addEntityList:[{id:"addObject",label:"treeInformationModels.newInformationModel",icon:qt.IconName.InformationModel,routeName:"app.information-models"}]}},endpoint:"/api/v1/informationModels/",entityName:NE,entityObjectType:"InformationModels",entityIcon:qt.IconName.InformationModel,routes:{base:"app.megacsiem",contentPage:"app.information-models"},managePrivilege:"SanaInformationModelsManageAccess",deleteTypeName:"treeInformationModels.deleteDialog.typeName"}}};class VE extends Xn.TreeTemplateContainer{getColumnOptions(){return(0,Xn.getColumnOptions)(this.props.entityIcon)}getSidebarCustomComponentProps(){const{sidebarData:{selectedIds:e=[]}}=this.props;return(0,Xn.getViewDetailsProps)("ModelsLibrary",e[0])}getCurrentWorkspaceSettings(e){return Object.assign(Object.assign({},super.getCurrentWorkspaceSettings(e)),(0,Gr.selectWorkspaceConfigSetting)(e.getState()))}getInitTabName(e,t,i){return(0,Tp.Sy)({editorMode:e,contentName:t?t.name:"",contentType:i})}}const BE=Xn.TreeTemplateContainer.getActions(),$E=(0,Te.legacyConnect)(((e,t)=>Xn.TreeTemplateContainer.getSelectors(t.entityName).selectEntitiesComposition),BE)(VE);v.u.register(OE,$E),(()=>{const e=Xn.TreeTemplateContainer.getReducersAndInitState(NE);ta.Z.register({name:"views.treeInformationModels",initialState:e.initialState,actionHandlers:e.reducers})})();v.u.register(bp,Ap),(()=>{const e=Xn.TreeTemplateContainer.getReducersAndInitState(Ep);ta.Z.register({name:"views.tree-parsers",initialState:e.initialState,actionHandlers:e.reducers})})();const HE={id:"megacsiem",title:"Cloud SIEM",route:"app.megacsiem",defaultActiveTab:"rules",tabs:[UE,wp]},WE={name:"app.megacsiem",url:"/csiem/:selectedTab/:folderId",resolve:{params:["$stateParams",e=>({folderId:e.folderId||null})]},params:{config:HE,selectedTab:HE.defaultActiveTab,folderId:null},template:'<mega-c-siem-root control="$ctrl.view.params" style="height: 100%"></mega-c-siem-root>',controller:FE,controllerAs:"$ctrl"};var qE=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class jE extends T.Component{constructor(){super(...arguments),this.getAllowedTabIds=()=>(this.props.config.tabs||[]).reduce(((e,t)=>(void 0!==t.privilege&&!Gr.currentUserHelper.hasPrivilege(t.privilege)||void 0!==t.featureFlag&&!Gr.currentUserHelper.hasFeatureFlag(t.featureFlag)||e.push(t.id),e)),[])}render(){const e=this.props,{config:t,selectedTab:i}=e,r=qE(e,["config","selectedTab"]),n=(0,Xn.GetMegaWrapperContainer)();return T.createElement(n,Object.assign({},t,{selectedTab:i,allowedTabIds:this.getAllowedTabIds()},r))}}s.module("sumoApp.megaCSiem.containers",[]).component("megaCsiemPage",(0,re.legacyReactToAngular)(jE,["config","selectedTab","folderId"]));const QE=s.module("sumoApp.megaCSiem.workspace",["sumoApp.currentUser.state","sumoApp.workspaces","sumoApp.megaCSiem.containers","sumoApp.state"]);let zE;QE.component("megaCSiemRoot",DE),QE.service("megaCSiemWorkspaceViewService",PE),QE.config(["$stateProvider",e=>{e.state(WE)}]),QE.run(["$injector",e=>{zE=e.get("megaCSiemWorkspaceViewService")}]);const GE="/api/v1/saml/identityProviders",KE="/api/v1/saml/allowlistedUsers";s.module("sumoApp.saml.data",[]).service("samlDataService",class{constructor(){this.toggleSAML=e=>(0,D.legacyHttpPost)("/api/v1/saml/lockdown/"+(e?"enable":"disable"),void 0).then((()=>this.fetchUserAllowlist()))}fetchConfigurations(){return(0,D.legacyHttpGet)(GE).then((e=>e))}fetchUserAllowlist(){return(0,D.legacyHttpGet)(KE).then((e=>e))}fetchAuthnCert(){return(0,D.legacyHttpGet)("/json/v1/account/saml/authnCertificate").then((e=>e.certificate))}addAllowlistedUsers(e){return Promise.all(e.map((e=>{const t=SumoUtil.longIdToHex(`${e}`);return(0,D.legacyHttpPost)(`${KE}/${t}`,void 0)}))).then((()=>this.fetchUserAllowlist()))}removeAllowlistedUser(e){return(0,D.legacyHttpDelete)(`${KE}/${e}`).then((()=>this.fetchUserAllowlist()))}saveConfig(e){return(0,D.legacyHttpPost)(GE,e).then((()=>this.fetchConfigurations()))}updateConfig(e){return(0,D.legacyHttpPut)(`${GE}/${e.id}`,e).then((()=>this.fetchConfigurations()))}removeConfig(e){return(0,D.legacyHttpDelete)(`${GE}/${e}`).then((()=>this.fetchConfigurations()))}});class YE{constructor(e,t,i){this.currentUserHelper=e,this.samlDataService=t,this.$filter=i,this.closeSidePanel=()=>{this.state.selectedConfiguration=null},this.setConfigurations=()=>this.samlDataService.fetchConfigurations().then((e=>{this.state=Object.assign(Object.assign({},this.state),{isLoading:!_.isUndefined(this.state.whitelistUsers),configurations:e})})),this.setAllowlistUsers=()=>this.samlDataService.fetchUserAllowlist().then((e=>{this.state=Object.assign(Object.assign({},this.state),{isLoading:!_.isUndefined(this.state.configurations),whitelistUsers:e})})),this.saveConfig=e=>(this.state=Object.assign(Object.assign({},this.state),{isLoading:!0}),this.samlDataService.saveConfig(e).then((e=>(this.state=Object.assign(Object.assign({},this.state),{isLoading:!1,configurations:e}),!0))).catch((e=>e))),this.updateConfig=e=>(this.state=Object.assign(Object.assign({},this.state),{isLoading:!0}),this.samlDataService.updateConfig(e).then((e=>(this.state=Object.assign(Object.assign({},this.state),{isLoading:!1,configurations:e}),!0))).catch((e=>e))),this.toggleSAML=()=>{this.samlDataService.toggleSAML(!this.state.samlLockdown).then((e=>{this.state=Object.assign(Object.assign({},this.state),{samlLockdown:!this.state.samlLockdown,whitelistUsers:e})}))},this.sortUsers=(e,t=!1)=>{const i=this.$filter("orderBy")(this.state.whitelistUsers.slice(),e,t);this.state=Object.assign(Object.assign({},this.state),{whitelistUsers:i})},this.sortConfigs=(e,t=!1)=>{const i=this.$filter("orderBy")(this.state.configurations.slice(),e,t);this.state=Object.assign(Object.assign({},this.state),{configurations:i})};const r=this.currentUserHelper.getOrg();this.state={isLoading:!0,samlLockdown:r.samlLockdownEnabled,configurations:void 0,selectedConfiguration:void 0,whitelistUsers:void 0,whitelistTableState:{isLoading:!0,selectedUsers:void 0,hoverUserIdx:-1,hoveredUser:void 0},configTableState:{isLoading:!0,hoverConfigIdx:void 0,hoveredConfig:void 0}}}initialize(){this.setConfigurations(),this.setAllowlistUsers()}onUserHover(e,t){this.state=Object.assign(Object.assign({},this.state),{whitelistTableState:Object.assign(Object.assign({},this.state.whitelistTableState),{hoveredUser:e,hoverUserIdx:t})})}offUserHover(){this.state=Object.assign(Object.assign({},this.state),{whitelistTableState:Object.assign(Object.assign({},this.state.whitelistTableState),{hoveredUser:void 0,hoverUserIdx:-1})})}onConfigHover(e,t){this.state=Object.assign(Object.assign({},this.state),{configTableState:Object.assign(Object.assign({},this.state.configTableState),{hoveredConfig:e,hoverConfigIdx:t})})}offConfigHover(){this.state=Object.assign(Object.assign({},this.state),{configTableState:Object.assign(Object.assign({},this.state.configTableState),{hoveredConfig:void 0,hoverConfigIdx:-1})})}getConfig(e){return this.state.configurations[e]}onRowClick(e,t){this.state.selectedConfiguration=e}removeConfig(e){return this.state=Object.assign(Object.assign({},this.state),{isLoading:!0}),this.samlDataService.removeConfig(e).then((e=>{this.state=Object.assign(Object.assign({},this.state),{isLoading:!1,configurations:e})}))}addAllowlistedUsers(e){return this.state=Object.assign(Object.assign({},this.state),{isLoading:!0}),this.samlDataService.addAllowlistedUsers(e).then((e=>{this.state=Object.assign(Object.assign({},this.state),{isLoading:!1,whitelistUsers:e})}))}removeAllowlistedUser(e){return this.state=Object.assign(Object.assign({},this.state),{isLoading:!0}),this.samlDataService.removeAllowlistedUser(e).then((e=>{this.state=Object.assign(Object.assign({},this.state),{isLoading:!1,whitelistUsers:e})}))}}YE.$inject=["currentUserHelper","samlDataService","$filter"];var ZE=i(16826);const XE=(e,t)=>"whitelistUser"===e?"$ctrl.state.user":(0,g.dialogPresetBindingFormatter)(e,t);class JE{constructor(e,t,i,r,n,a,s){this.i18n=e,this.dialogService=t,this.$mdToast=i,this.samlStateService=r,this.$filter=n,this.usersRolesStateService=a,this.usersRolesStateQueries=s,this.onDelete=(e,t)=>{this.samlStateService.state.whitelistUsers.filter((e=>e.status&&e.canManageSAML)).length>1||(!this.state.user.canManageSAML||!this.state.user.isActive)&&this.samlStateService.state.whitelistUsers.length>1?this.deleteUser(e,t):(this.dialogService.hide(!1),this.openDeleteLastWhitelistUserModal())},this.openDeleteLastWhitelistUserModal=()=>{this.dialogService.show(this.dialogService.preset("advanced").title(`${this.i18n.get("saml.allowlist.modals.deleteLastUser.title")}`).contentComponent({name:"samlDeleteLastWhitelistUserForm",options:{bindingValueFormatter:XE}}).ctrlState({user:this.state.user}).actions({submit:this.deleteUser,cancel:()=>this.dialogService.cancel()})).then((()=>{this.samlStateService.state.whitelistUsers.length>1?this.notify(`${this.i18n.get("saml.allowlist.modals.deleteLastUser.notifyMessage1",{email:this.state.user.email})}`):this.notify(`${this.i18n.get("saml.allowlist.modals.deleteLastUser.notifyMessage2",{email:this.state.user.email})}`)}))},this.deleteUser=(e,t)=>{this.samlStateService.removeAllowlistedUser(this.state.user.userId).then((()=>{this.dialogService.hide(),this.state=Object.assign(Object.assign({},this.state),{deleted:!0})})).catch((i=>{var r,n;this.dialogService.cancel(i),t({buttons:(r=e.buttons,n=!1,_.map(r,(e=>Object.assign(Object.assign({},e),{disabled:n}))))})}))},this.openAddWhitelistUserModal=e=>{const t=this.dialogService.show(this.dialogService.preset("advanced").title(`${this.i18n.get("saml.allowlist.modals.addUsers.title")}`).contentComponent("samlAddWhitelistUsersForm").ctrlState({filteredUsers:this.state.filteredUsers,availableUsers:this.state.availableUsers,selectedUsers:this.state.selectedUsers,isLoading:this.state.isLoading,formMeta:{errors:void 0,isFetching:!1}}).actions({$onInit:(e,i)=>{this.state.isLoading=!0,this.loadAvailableUsers(t).subscribe((e=>{i({availableUsers:e,filteredUsers:this.$filter("orderBy")(e,"firstName"),isLoading:!1})}))},search:this.searchUsers,submit:this.addUsersToWhitelist,toggle:this.toggleSelection,cancel:()=>this.dialogService.cancel()})).then((()=>this.notify(`${this.i18n.get("saml.allowlist.modals.addUsers.notifyMessage")}`)))},this.loadAvailableUsers=e=>{const t=ZE.Observable.fromPromise(this.usersRolesStateService.fetchUsers()),i=this.usersRolesStateQueries.getUsers().map((e=>_.filter(e,(e=>void 0===_.find(this.samlStateService.state.whitelistUsers,(t=>e.email===t.email)))))).takeUntil(ZE.Observable.fromPromise(e));return t.flatMap(i)},this.searchUsers=(e,t,i)=>{t({filteredUsers:this.$filter("filter")(e.availableUsers,(e=>-1!==e.name.indexOf(i)||-1!==e.email.indexOf(i)))})},this.toggleSelection=(e,t,i)=>{const r=this.state.selectedUsers.indexOf(i),n=this.state.selectedUsers.slice();r>-1?n.splice(r,1):n.push(i),this.state=Object.assign(Object.assign({},this.state),{selectedUsers:n}),t({selectedUsers:n})},this.addUsersToWhitelist=()=>{this.samlStateService.addAllowlistedUsers(this.state.selectedUsers),this.dialogService.hide(),this.state=Object.assign(Object.assign({},this.state),{selectedUsers:[]})},this.state={isLoading:!0,user:void 0,availableUsers:[],selectedUsers:[],whitelistUsers:[],filteredUsers:[],deleteWord:void 0,formMeta:void 0,deleted:!1}}openDeleteWhitelistUserModal(e,t){this.state=Object.assign(Object.assign({},this.state),{user:e}),this.dialogService.show(this.dialogService.preset("simple").title(`${this.i18n.get("saml.allowlist.modals.deleteUser.title")}`).contentTemplate("\n  <p>\n    {{ ::'saml.allowlist.modals.deleteUser.topMessage' | i18nText }}\n    <span class=\"saml-bold\">{{$ctrl.state.user.firstName + ' ' + $ctrl.state.user.lastName}}</span>\n    {{ ::'saml.allowlist.modals.deleteUser.bottomMessage' | i18nText }}\n  </p>\n").buttons(this.dialogService.buttons().cancel().button().action("delete").text(this.i18n.get("common.DELETE")).className("md-accent--red")).ctrlState({user:this.state.user,whitelistUsers:this.samlStateService.state.whitelistUsers}).actions({delete:this.onDelete})).then((()=>{this.state.deleted&&this.notify(`${this.i18n.get("saml.allowlist.modals.deleteUser.notifyMessage",{email:this.state.user.email})}`),this.state=Object.assign(Object.assign({},this.state),{deleted:!1})}))}notify(e){this.$mdToast.show(this.$mdToast.info().textContent(e).parent(".saml-container-view"))}}JE.$inject=["i18n","dialogService","$mdToast","samlStateService","$filter","usersRolesStateService","usersRolesStateQueries"];class eT{constructor(e,t,i,r,n){this.samlStateService=e,this.samlDataService=t,this.currentUserHelper=i,this.$q=r,this.i18n=n,this.initializeState=()=>{this.state={isLoading:!0,id:"0",existingConfig:!1,configurationName:"",debugMode:!1,issuer:"",isRedirectBinding:!1,spInitiatedLoginPath:"",spInitiatedLoginEnabled:!1,authnRequestUrl:"",x509cert1:"",onDemandProvisioningEnabled:!1,enableRolesAttribute:!1,rolesAttribute:"",logoutEnabled:!1,logoutUrl:"",firstNameAttribute:"",lastNameAttribute:"",emailAttribute:"subject",emailSAMLAttribute:"",onDemandProvisioningRoles:"",signAuthRequestEnabled:!1,signAuthRequestCert:"",disableRequestedAuthnContext:!1},this.currentUserHelper.hasFeatureFlag("UISamlAuthnRequestCert")&&this.setAuthnCert(),this.currentUserHelper.hasFeatureFlag("UISamlLogin")&&(this.state.spInitiatedLoginEnabled=!0)},this.setAuthnCert=()=>this.samlDataService.fetchAuthnCert().then((e=>{this.state=Object.assign(Object.assign({},this.state),{signAuthRequestCert:e})})),this.validateConfigForm=()=>{const e=[],t={error:!0,errors:[{message:"Please fill out all mandatory (*) fields"}]};return""!==this.state.issuer&&void 0!==this.state.issuer||e.push(this.i18n.get("saml.configuration.form.issuer")),""!==this.state.configurationName&&void 0!==this.state.configurationName||e.push(this.i18n.get("saml.configuration.form.configName")),""!==this.state.x509cert1&&void 0!==this.state.x509cert1||e.push(this.i18n.get("saml.configuration.form.x509Cert")),""!==this.state.emailAttribute&&void 0!==this.state.emailAttribute||e.push(this.i18n.get("saml.configuration.form.attrMapping")),(this.state.onDemandProvisioningEnabled&&void 0===this.state.onDemandProvisioningRoles||this.state.onDemandProvisioningEnabled&&this.state.onDemandProvisioningRoles.length<1)&&e.push(this.i18n.get("saml.configuration.form.rolesAttr")),this.currentUserHelper.hasFeatureFlag("UISamlDisableLoginPath")||!this.state.spInitiatedLoginEnabled||this.state.spInitiatedLoginPath||e.push(this.i18n.get("saml.configuration.form.loginPath")),this.state.spInitiatedLoginEnabled&&!this.state.authnRequestUrl&&e.push(this.i18n.get("saml.configuration.form.requestURL")),e.length>0?(t.errors[0].message+=" "+e.join(", "),this.$q.resolve(t)):this.submitConfig()},this.getStateAsConfig=()=>{let e=[];-1!==this.state.onDemandProvisioningRoles.indexOf(",")?e=this.state.onDemandProvisioningRoles.replace(/ /g,"").split(","):""!==this.state.onDemandProvisioningRoles&&(e=[this.state.onDemandProvisioningRoles]);return{id:this.state.id,configurationName:this.state.configurationName,issuer:this.state.issuer,isRedirectBinding:this.state.isRedirectBinding,spInitiatedLoginPath:this.state.spInitiatedLoginPath,spInitiatedLoginEnabled:this.state.spInitiatedLoginEnabled,authnRequestUrl:this.state.authnRequestUrl,x509cert1:this.state.x509cert1,x509cert2:"",x509cert3:"",host:"",onDemandProvisioningEnabled:this.state.onDemandProvisioningEnabled?{firstNameAttribute:this.state.firstNameAttribute,lastNameAttribute:this.state.lastNameAttribute,onDemandProvisioningRoles:e}:null,rolesAttribute:this.state.rolesAttribute,logoutEnabled:this.state.logoutEnabled&&!!this.state.logoutUrl,logoutUrl:this.state.logoutUrl,emailAttribute:"attribute"===this.state.emailAttribute&&this.state.emailSAMLAttribute?this.state.emailSAMLAttribute:this.state.emailAttribute,signAuthnRequest:this.state.signAuthRequestEnabled,disableRequestedAuthnContext:this.state.disableRequestedAuthnContext,debugMode:this.state.debugMode}},this.submitConfig=()=>{const e=this.getStateAsConfig();return this.state.existingConfig?this.samlStateService.updateConfig(e):this.samlStateService.saveConfig(e)},this.setConfigData=e=>{let t;this.samlStateService.state.selectedConfiguration&&this.samlStateService.state.selectedConfiguration.id===e?(t=this.samlStateService.state.selectedConfiguration,this.setConfigFormState(t)):this.samlStateService.state.configurations?(t=_.filter(this.samlStateService.state.configurations,(t=>t.id===e))[0],this.setConfigFormState(t)):this.samlStateService.setConfigurations().then((()=>{t=_.filter(this.samlStateService.state.configurations,(t=>t.id===e))[0],this.setConfigFormState(t)}))},this.setConfigFormState=e=>{var t,i,r,n,a,s;if(void 0!==e){const o=e.emailAttribute&&"attribute"!==e.emailAttribute&&"subject"!==e.emailAttribute?"attribute":e.emailAttribute;this.state=Object.assign(Object.assign({},this.state),{isLoading:!1,existingConfig:"0"!==e.id,id:e.id,configurationName:e.configurationName,issuer:e.issuer,spInitiatedLoginPath:e.spInitiatedLoginPath,spInitiatedLoginEnabled:e.spInitiatedLoginEnabled,authnRequestUrl:e.authnRequestUrl,x509cert1:e.x509cert1,isRedirectBinding:e.isRedirectBinding,onDemandProvisioningEnabled:!!(e.onDemandProvisioningEnabled&&e.onDemandProvisioningEnabled.firstNameAttribute&&e.onDemandProvisioningEnabled.lastNameAttribute&&e.onDemandProvisioningEnabled.onDemandProvisioningRoles.length),enableRolesAttribute:""!==e.rolesAttribute,rolesAttribute:e.rolesAttribute,logoutEnabled:e.logoutEnabled,logoutUrl:e.logoutUrl,firstNameAttribute:null!==(i=null===(t=e.onDemandProvisioningEnabled)||void 0===t?void 0:t.firstNameAttribute)&&void 0!==i?i:"",lastNameAttribute:null!==(n=null===(r=e.onDemandProvisioningEnabled)||void 0===r?void 0:r.lastNameAttribute)&&void 0!==n?n:"",emailAttribute:o,emailSAMLAttribute:e.emailAttribute,debugMode:e.debugMode,onDemandProvisioningRoles:null!==(s=null===(a=e.onDemandProvisioningEnabled)||void 0===a?void 0:a.onDemandProvisioningRoles.join(", "))&&void 0!==s?s:"",signAuthRequestEnabled:e.signAuthnRequest,disableRequestedAuthnContext:e.disableRequestedAuthnContext})}},this.toggleLogoutPage=()=>{this.state=Object.assign(Object.assign({},this.state),{logoutEnabled:!this.state.logoutEnabled})},this.toggleAuthnContext=()=>{this.state=Object.assign(Object.assign({},this.state),{disableRequestedAuthnContext:!this.state.disableRequestedAuthnContext})},this.toggleRolesAttr=()=>{this.state=Object.assign(Object.assign({},this.state),{enableRolesAttribute:!this.state.enableRolesAttribute})},this.toggleOnDemand=()=>{this.state=Object.assign(Object.assign({},this.state),{onDemandProvisioningEnabled:!this.state.onDemandProvisioningEnabled})},this.toggleDebug=()=>{this.state=Object.assign(Object.assign({},this.state),{debugMode:!this.state.debugMode})},this.toggleSPLogin=()=>{this.state=Object.assign(Object.assign({},this.state),{spInitiatedLoginEnabled:!this.state.spInitiatedLoginEnabled})},this.toggleSignAuthRequest=()=>{this.state=Object.assign(Object.assign({},this.state),{signAuthRequestEnabled:!this.state.signAuthRequestEnabled})},this.disableSPLogin=()=>{this.state=Object.assign(Object.assign({},this.state),{spInitiatedLoginEnabled:!1})},this.initializeState()}}eT.$inject=["samlStateService","samlDataService","currentUserHelper","$q","i18n"];const tT=s.module("sumoApp.saml.state",["sumoApp.saml.data"]);tT.service("samlStateService",YE),tT.service("samlWhitelistUsersModalsService",JE),tT.service("samlConfigurationFormService",eT);class iT{constructor(e,t,i,r,n,a,s,o){this.currentUserHelper=t,this.samlStateService=i,this.dialogService=r,this.i18n=n,this.$mdToast=a,this.samlWhitelistUsersModalsService=s,this.$scope=o,this.title="",this.openLockdownConfirmDialog=()=>{this.lockdownDialogOpen=!0,this.$scope.$apply()},this.closeLockdownConfirmDialog=()=>{this.lockdownDialogOpen=!1,this.$scope.$apply()},this.toggleSAML=()=>{this.samlStateService.toggleSAML(),this.samlLockdownDialogFlag&&this.closeLockdownConfirmDialog()},this.onToggleClick=()=>{this.samlLockdownDialogFlag?this.samlStateService.state.samlLockdown?this.toggleSAML():this.openLockdownConfirmDialog():this.toggleSAML()},this.clearSelection=()=>this.samlStateService.state.selectedConfiguration=null,this.navigateToEditConfigUrl=()=>{g.applicationState.go("app.security.saml.edit",{configId:this.samlStateService.state.selectedConfiguration.id})},this.navigateToAddConfigUrl=()=>g.applicationState.go("app.security.saml.add",{}),this.getItem=e=>this.samlStateService.state.configurations[e],this.openDeleteConfigModal=()=>{this.dialogService.show(this.dialogService.preset("simple").title(`${this.i18n.get("saml.configuration.modals.deleteConfig.title")}`).contentTemplate("\n  <p>\n  {{ ::'saml.configuration.modals.deleteConfig.bottomMessage' | i18nText }}\n  <span class=\"saml-bold\">{{ $ctrl.state.configName }}</span>?</p>\n").buttons(this.dialogService.buttons().cancel().button().action("delete").text(this.i18n.get("common.DELETE")).className("md-accent--red")).ctrlState({configId:this.samlStateService.state.selectedConfiguration.id,configName:this.samlStateService.state.selectedConfiguration.configurationName}).actions({delete:this.deleteConfig})).then((e=>{e&&(this.notify(`${this.samlStateService.state.selectedConfiguration.configurationName} was deleted.`),this.clearSelection())}))},this.deleteConfig=(e,t)=>{this.samlStateService.removeConfig(this.samlStateService.state.selectedConfiguration.id).then((()=>this.dialogService.hide())).catch((i=>{var r,n;this.dialogService.cancel(i),t({buttons:(r=e.buttons,n=!1,_.map(r,(e=>Object.assign(Object.assign({},e),{disabled:n}))))})})),this.samlStateService.closeSidePanel()},e.addClass("saml-container-view"),this.toggleSAML=this.toggleSAML.bind(this),this.closeLockdownConfirmDialog=this.closeLockdownConfirmDialog.bind(this);const l=document.location.protocol+"//"+document.location.host;this.spInitPost=`${l}/sumo/saml/post/`,this.spInitRedirect=`${l}/sumo/saml/get/`,this.authRequest=`${l}/sumo/saml/login/`,this.accessConsumer=`${l}/sumo/saml/consume/`,this.whitelistActions={openDeleteWhitelistUserModal:this.samlWhitelistUsersModalsService.openDeleteWhitelistUserModal.bind(this.samlWhitelistUsersModalsService),sortUsers:this.samlStateService.sortUsers,openAddWhitelistUserModal:this.samlWhitelistUsersModalsService.openAddWhitelistUserModal.bind(this.samlWhitelistUsersModalsService)},this.configActions={getItem:this.samlStateService.getConfig.bind(this.samlStateService),sortConfigs:this.samlStateService.sortConfigs.bind(this.samlStateService),onRowClick:this.samlStateService.onRowClick.bind(this.samlStateService),add:this.navigateToAddConfigUrl.bind(this)},this.samlLoginFlag=this.currentUserHelper.hasFeatureFlag("UISamlLogin"),this.uniqueEntityIdFlag=this.currentUserHelper.hasFeatureFlag("UIUniqueEntityId"),this.samlLockdownDialogFlag=this.currentUserHelper.hasFeatureFlag("UISamlLockdownDialog"),this.lockdownDialogOpen=!1}$onInit(){this.samlStateService.initialize()}notify(e){this.$mdToast.show(this.$mdToast.info().textContent(e).parent(".saml-container-view"))}}iT.$inject=["$element","currentUserHelper","samlStateService","dialogService","i18n","$mdToast","samlWhitelistUsersModalsService","$scope"];const rT={controller:iT,template:'\n    <div\n        ux-sliding-panel\n        is-open="$ctrl.samlStateService.state.selectedConfiguration"\n        class="library-sliding-panel"\n        data-sumo-test="saml-config-side-panel"\n    >\n      <saml-configurations-view\n        main-panel\n        actions="$ctrl.configActions"\n        class="vertical-flex-auto library-sliding-panel__main saml-configurations-view-component"\n        configurations="$ctrl.samlStateService.state.configurations"\n        selected-configuration="$ctrl.samlStateService.state.selectedConfiguration"\n        actions="{add: $ctrl.navigateToAddConfigUrl}"\n        data-sumo-test="saml-configurations-component"\n      >\n      </saml-configurations-view>\n      <md-card\n        sliding-panel\n        class="config-sliding-panel__side"\n        close-x="$ctrl.clearSelection();"\n      >\n        <card-panel\n          card-title="$ctrl.samlStateService.state.selectedConfiguration.configurationName"\n          class="saml-card-panel"\n          data-sumo-test="saml-config-side-panel-card"\n        >\n          <card-actions>\n            \n  <div class="saml-card-panel__actions" data-sumo-test="saml-config-side-panel-actions">\n    <span\n      ux-icon-button\n      icon="pencil"\n      tooltip\n      tooltip-content="Edit"\n      class="edit-role"\n      ng-click="$ctrl.navigateToEditConfigUrl()"\n    >\n    </span>\n    <span\n      ux-icon-button\n      icon="trash"\n      tooltip\n      tooltip-content="delete"\n      class="delete-role"\n      ng-click="$ctrl.openDeleteConfigModal()"\n    >\n    </span>\n  </div>\n\n          </card-actions>\n          <div class="config-details-panel-content-container" data-sumo-test="saml-config-side-panel-body">\n            \n    <div ng-if="$ctrl.samlStateService.state.selectedConfiguration.spInitiatedLoginEnabled && !$ctrl.samlLoginFlag" class="attribute-display">\n      <div class="attribute-display__label">{{::\'saml.configuration.sidePanel.spInit\' | i18nText }}</div>\n      <content-item-url\n        url="$ctrl.spInitRedirect.concat($ctrl.samlStateService.state.selectedConfiguration.spInitiatedLoginPath)">\n      </content-item-url>\n      <br>\n      <content-item-url\n        url="$ctrl.spInitPost.concat($ctrl.samlStateService.state.selectedConfiguration.spInitiatedLoginPath)">\n      </content-item-url>\n      <div class="attribute-display__value" ng-if="!$ctrl.samlStateService.state.selectedConfiguration.spInitiatedLoginPath">\n        {{::\'saml.configuration.sidePanel.spNotEnabled\' | i18nText }}\n      </div>\n    </div>\n    <div ng-if="$ctrl.samlStateService.state.selectedConfiguration.spInitiatedLoginEnabled" class="attribute-display">\n      <div class="attribute-display__label">{{::\'saml.configuration.sidePanel.authRequest\' | i18nText }}</div>\n      <content-item-url\n        url="$ctrl.samlStateService.state.selectedConfiguration.assertionConsumerUrl.replace(\'/consume/\', \'/login/\')">\n      </content-item-url>\n    </div>\n    <div class="attribute-display">\n      <div class="attribute-display__label">{{::\'saml.configuration.sidePanel.assertConsumer\' | i18nText }}</div>\n      <content-item-url\n        url="$ctrl.samlStateService.state.selectedConfiguration.assertionConsumerUrl">\n      </content-item-url>\n    </div>\n    <div ng-if="$ctrl.samlStateService.state.selectedConfiguration.spInitiatedLoginEnabled && $ctrl.uniqueEntityIdFlag" class="attribute-display" >\n      <div class="attribute-display__label">{{::\'saml.configuration.sidePanel.entityId\' | i18nText }}</div>\n      <content-item-url\n        url="$ctrl.samlStateService.state.selectedConfiguration.entityId">\n      </content-item-url>\n    </div>\n\n          </div>\n        </card-panel>\n      </md-card>\n    </div>\n    <saml-lockdown-view\n      start-state="$ctrl.samlStateService.state.samlLockdown"\n      actions="{toggle: $ctrl.onToggleClick}"\n    >\n    </saml-lockdown-view>\n    <saml-lockdown-dialog\n      confirm-fn="$ctrl.toggleSAML"\n      cancel-fn="$ctrl.closeLockdownConfirmDialog"\n      open="$ctrl.lockdownDialogOpen"\n      ng-if="$ctrl.samlLockdownDialogFlag"\n    >\n    </saml-lockdown-dialog>\n    <saml-whitelist-users-view\n      actions="$ctrl.whitelistActions"\n      hovered-user="$ctrl.samlStateService.state.whitelistTableState.hoveredUser"\n      whitelist-users="$ctrl.samlStateService.state.whitelistUsers"\n      class="saml-whitelist-users-view-component"\n      data-sumo-test="saml-whitelist-component"\n    >\n    </saml-whitelist-users-view>\n  '};var nT=i(21927);class aT{constructor(e,t,i,r,n,a){this.$element=e,this.samlConfigurationFormService=t,this.samlStateService=i,this.$mdToast=r,this.currentUserHelper=n,this.$scope=a,this.dialogIsOpen=!1,this.shouldRenderFAQS=!1,this.showUploadButton=!1,this.goBack=()=>{this.samlConfigurationFormService.initializeState(),g.applicationState.go("^"),this.samlStateService.closeSidePanel()},this.submitConfig=()=>{this.samlConfigurationFormService.validateConfigForm().then((e=>{e.error?this.notify(e.errors[0].message):(this.goBack(),this.samlStateService.closeSidePanel())}))},this.openDialog=()=>{this.dialogIsOpen=!0,this.$scope.$apply()},this.closeDialog=()=>{this.dialogIsOpen=!1,this.$scope.$apply()},this.importXml=e=>{var t,i,r,n,a,s,o,l,c,d,u;const p=this.samlConfigurationFormService.getStateAsConfig();try{const h=null!==(i=null===(t=(0,nT.parse)(e,{ignoreAttributes:!1,ignoreNameSpace:!0}))||void 0===t?void 0:t.EntityDescriptor)&&void 0!==i?i:{},m=null!==(r=h.IDPSSODescriptor)&&void 0!==r?r:{},g=Array.isArray(m.KeyDescriptor)?m.KeyDescriptor[0]:m.KeyDescriptor,y=Array.isArray(m.SingleSignOnService)?m.SingleSignOnService.find((e=>"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"===e["@_Binding"]||"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"===e["@_Binding"])):m.SingleSignOnService,v=Array.isArray(m.SingleLogoutService)?m.SingleLogoutService[0]:m.SingleLogoutService,f=null!==(s=null===(a=null===(n=null==g?void 0:g.KeyInfo)||void 0===n?void 0:n.X509Data)||void 0===a?void 0:a.X509Certificate)&&void 0!==s?s:"",_=f.trim().length?`-----BEGIN CERTIFICATE-----\n${f}\n-----END CERTIFICATE-----`:"",S=null!==(o=h["@_entityID"])&&void 0!==o?o:"";this.samlConfigurationFormService.setConfigFormState(Object.assign(Object.assign({},p),{issuer:S,x509cert1:_,spInitiatedLoginEnabled:!!y,authnRequestUrl:null!==(l=null==y?void 0:y["@_Location"])&&void 0!==l?l:"",isRedirectBinding:null!==(c="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"===(null==y?void 0:y["@_Binding"]))&&void 0!==c&&c,signAuthnRequest:!!y&&"true"===(null===(d=m["@_WantAuthnRequestsSigned"])||void 0===d?void 0:d.toLowerCase()),logoutEnabled:!!v,logoutUrl:null!==(u=null==v?void 0:v["@_Location"])&&void 0!==u?u:""})),this.dialogIsOpen=!1,this.$scope.$apply()}catch(e){this.notify(e.message)}}}$onInit(){this.$element.addClass("saml-config-form-container"),this.actions={toggleDebug:this.samlConfigurationFormService.toggleDebug,toggleSPLogin:this.samlConfigurationFormService.toggleSPLogin,toggleOnDemand:this.samlConfigurationFormService.toggleOnDemand,toggleRolesAttr:this.samlConfigurationFormService.toggleRolesAttr,toggleLogoutPage:this.samlConfigurationFormService.toggleLogoutPage,toggleSignAuthRequest:this.samlConfigurationFormService.toggleSignAuthRequest,toggleAuthnContext:this.samlConfigurationFormService.toggleAuthnContext,disableSPLogin:this.samlConfigurationFormService.disableSPLogin},this.shouldRenderFAQS=this.currentUserHelper.hasFeatureFlag("UISamlFAQS"),this.showUploadButton=this.currentUserHelper.hasFeatureFlag("UISamlUpload"),this.samlConfigurationFormService.initializeState(),g.applicationState.params.configId?(this.isCreate=!1,this.samlConfigurationFormService.setConfigData(g.applicationState.params.configId)):(this.isCreate=!0,this.actions.disableSPLogin())}notify(e){this.$mdToast.show(this.$mdToast.info().textContent(e).parent(".saml-ui-view"))}}aT.$inject=["$element","samlConfigurationFormService","samlStateService","$mdToast","currentUserHelper","$scope"];const sT={bindings:{configId:"<?"},controller:aT,controllerAs:"$ctrl",template:'\n  <div class="saml-config-form-container__header">\n    <div class="back-button is-default icon--arrow-left" ng-click="$ctrl.goBack()" role="button"></div>\n    <div class="md-title saml-config-form-container__title" ng-if="$ctrl.isCreate">\n      {{ ::\'saml.configuration.addTitle\' | i18nText }}\n    </div>\n    <div class="md-title saml-config-form-container__title" ng-if="!$ctrl.isCreate">\n      {{ ::\'saml.configuration.editTitle\' | i18nText }} {{ ::$ctrl.samlConfigurationFormService.state.configurationName }}\n    </div>\n    <md-button\n      class="import-button md-flat md-accent"\n      aria-label="_"\n      data-sumo-test="saml-add-import-xml-button"\n      ng-attr-aria-label="::\'saml.configuration.form.button.import\' | i18nText"\n      ng-bind="::\'saml.configuration.form.button.import\' | i18nText"\n      ng-click="$ctrl.openDialog()"\n      ng-if="$ctrl.showUploadButton"\n    >\n    </md-button>\n  </div>\n  <md-card class="saml-config-form-container__body">\n    <saml-configuration-form actions="$ctrl.actions" state="$ctrl.samlConfigurationFormService.state"></saml-configuration-form>\n    <saml-faqs ng-if="$ctrl.shouldRenderFAQS" class="saml-config-form-faqs"></saml-faqs>\n  </md-card>\n  <div class="saml-config-form-container__actions">\n    <md-button\n      class="md-raised md-primary"\n      aria-label="_"\n      ng-attr-aria-label="::\'saml.configuration.form.button.cancel\' | i18nText"\n      ng-disabled="$ctrl.formMeta.isFetching"\n      ng-bind="::\'saml.configuration.form.button.cancel\' | i18nText"\n      ng-click="$ctrl.goBack()"\n    >\n    </md-button>\n    <md-button\n      type="submit"\n      ng-if="$ctrl.isCreate"\n      class="md-raised md-accent"\n      aria-label="_"\n      ng-attr-aria-label="::\'saml.configuration.form.button.add\' | i18nText"\n      ng-disabled=""\n      ng-click="$ctrl.submitConfig()"\n      ng-bind="::\'saml.configuration.form.button.add\' | i18nText"\n    >\n    </md-button>\n    <md-button\n      type="submit"\n      ng-if="!$ctrl.isCreate"\n      class="md-raised md-accent"\n      aria-label="_"\n      ng-attr-aria-label="::\'saml.configuration.form.button.edit\' | i18nText"\n      ng-disabled=""\n      ng-click="$ctrl.submitConfig()"\n      ng-bind="::\'saml.configuration.form.button.edit\' | i18nText"\n    >\n    </md-button>\n    <saml-xml-upload-dialog\n      cancel-fn="$ctrl.closeDialog"\n      import-fn="$ctrl.importXml"\n      open="$ctrl.dialogIsOpen"\n    ></saml-xml-upload-dialog>\n  </div>\n  '},oT=[{name:"app.security.saml.add",url:"/add",views:{"":{component:"samlConfigurationFormContainer"}}},{name:"app.security.saml.edit",url:"/edit/{configId:[0-9A-F]+}",component:"samlConfigurationFormContainer",params:{configId:{squash:!0,value:null}}}];class lT{constructor(e,t,i,r){this.$element=e,this.$scope=t,this.i18n=i,this.listActionsService=r,this.openModal=(e,t)=>{this.actions.openDeleteWhitelistUserModal(e,t)}}$onInit(){this.$element.addClass("allowlist-user-view"),this.listActionsHelper=this.listActionsService.bind({template:'\n  <div class="allowlist-user-col__actions-container">\n    <md-icon md-svg-icon="trash"\n             class="allowlist-user-col__actions-container__icon -margin-16"\n             ng-click="$ctrl.openModal($ctrl.hoveredUser, $event)"\n             data-sumo-test="saml-allowlist-user-delete-icon"\n    >\n    </md-icon>\n  </div>\n',selector:".allowlist-user-col--actions",delay:50,parentScope:this.$scope})}getItem(e){return this.whitelistUsers[e]}onItemHover(e,t){const i=s.element(t.currentTarget);this.listActionsHelper.show(i),this.hoveredUser=e}offItemHover(){this.listActionsHelper.hide()}sortBy(e,t=!1){this.actions.sortUsers(e,t)}}lT.$inject=["$element","$scope","i18n","listActionsService"];const cT={bindings:{actions:"<",hoveredUser:"<",whitelistUsers:"<"},controller:lT,template:'\n      <saml-card\n        add-button-text=$ctrl.i18n.get(\'saml.allowlist.addBtnLabel\')\n        card-title="$ctrl.i18n.get(\'saml.allowlist.title\')"\n        actions="{add: $ctrl.actions.openAddWhitelistUserModal}"\n      >\n        \n    <table\n      at\n      at-sortable="$ctrl.sortBy(sortKey, reverse)"\n      class="allowlist-user-view__table allowlist-user-table"\n      data-sumo-test="saml-allowlist-table">\n      <thead>\n        <tr>\n          <th class="pointer allowlist-user-col--name" data-sort-by="firstName">\n            {{ ::\'saml.allowlist.columnNames.name\' | i18nText }}\n          </th>\n          <th class="pointer allowlist-user-col--status" data-sort-by="isActive">\n            {{ ::\'saml.allowlist.columnNames.status\' | i18nText }}\n          </th>\n          <th class="pointer allowlist-user-col--email" data-sort-by="email">\n            {{ ::\'saml.allowlist.columnNames.email\' | i18nText }}\n          </th>\n          <th class="pointer allowlist-user-col--can-manage-saml" data-sort-by="canManageSaml">\n            {{ ::\'saml.allowlist.columnNames.canManageSAML\' | i18nText }}\n          </th>\n          <th class="pointer allowlist-user-col--last-login" data-sort-by="lastLogin">\n            {{ ::\'saml.allowlist.columnNames.lastLogin\' | i18nText }}\n          </th>\n          <th class="pointer allowlist-user-col--actions">&nbsp;</th>\n        </tr>\n      </thead>\n      <tbody\n        list-hover-behavior\n        item-selector=".allowlist-user-item"\n        get-item="$ctrl.getItem(index)"\n        run-behavior="$ctrl.onItemHover(item, $event)"\n        stop-behavior="$ctrl.offItemHover($event)"\n        data-sumo-test="saml-allowlist-user-table-body"\n      >\n        <tr\n          class="allowlist-user__folder-item allowlist-user-item"\n          ng-repeat="user in $ctrl.whitelistUsers track by user.userId"\n          data-index="{{ $index }}"\n          data-sumo-test="saml-allowlist-user-{{ $index }}"\n        >\n          <td class="allowlist-user-col--name" title="{{ user.firstName + \' \' + user.lastName }}">\n            {{ user.firstName + \' \' + user.lastName }}\n          </td>\n          <td class="allowlist-user-col--status">\n            <sumo-status\n              ng-if="user.isActive"\n              title="active"\n              type="running"></sumo-status>\n            <sumo-status\n              ng-if="!user.isActive"\n              title="inactive"\n              type="failed"></sumo-status>\n          </td>\n          <td class="allowlist-user-col--email">{{ user.email }}</td>\n          <td class="allowlist-user-col--can-manage-saml can-manage-saml">{{ user.canManageSaml ? \'Yes\' : \'No\' }}</td>\n          <td class="allowlist-user-col--last-login">{{ user.lastLogin === -1 ? \'Never\' : (user.lastLogin | date : "short") }}</td>\n          <td class="allowlist-user-col--actions"></td>\n        </tr>\n      </tbody>\n    </table>\n\n      </saml-card>\n    '};class dT{constructor(e,t,i){this.i18n=e,this.$element=t,this.currentUserHelper=i,this.samlLoginFlag=!1,this.restrictOnSubdomain=!1,this.disableLoginPath=!1}$onInit(){this.$element.addClass("saml-configuration-form"),this.authnCertFlag=this.currentUserHelper.hasFeatureFlag("UISamlAuthnRequestCert"),this.samlLoginFlag=this.currentUserHelper.hasFeatureFlag("UISamlLogin"),this.disableLoginPath=this.currentUserHelper.hasFeatureFlag("UISamlDisableLoginPath");const e=this.i18n.get("saml.configuration.form.button.downloadCertSucMessage");this.currentUserHelper.hasFeatureFlag("UISamlRestrictSPInitiatedLoginToSubdomain")&&(0,re.requestWithPromise)("/api/v1/account/subdomain",{}).then((e=>{this.restrictOnSubdomain=!1})).catch((e=>{this.restrictOnSubdomain=!0})),this.downloadCert=()=>g.exportActionService.download({item:{name:"certificate"},exportText:this.state.signAuthRequestCert,fileExt:".cer",successMessage:e,parent:document.getElementsByClassName("saml-ui-view")[0]})}}dT.$inject=["i18n","$element","currentUserHelper"];const uT={bindings:{actions:"<",state:"<"},controller:dT,template:'\n  <form name="samlConfigurationForm">\n    <md-input-container class="config-form-input-container__name">\n      <label>{{ ::\'saml.configuration.form.configName\' | i18nText }}</label>\n      <input\n        ng-model="$ctrl.state.configurationName"\n        name="configurationName"\n        ng-required="true"\n      />\n    </md-input-container>\n    <md-checkbox\n      class="config-form-input-container__debug"\n      ng-class="{\'md-checked\': $ctrl.state.debug}"\n      type="checkbox"\n      value="{{$ctrl.state.debug}}"\n      name="debug"\n      ng-click="$ctrl.actions.toggleDebug()"\n    >\n      <label>{{ ::\'saml.configuration.form.debug\' | i18nText }}</label>\n    </md-checkbox>\n    <md-input-container class="md-block config-form-input-container__issuer">\n      <label>{{ ::\'saml.configuration.form.issuer\' | i18nText }}</label>\n      <input\n        ng-model="$ctrl.state.issuer"\n        name="issuer"\n        data-sumo-test="saml-add-form-issuer"\n        ng-required="true"\n      />\n    </md-input-container>\n    <md-input-container class="md-block config-form-input-container__x509Cert">\n      <label ng-bind="::\'saml.configuration.form.x509Cert\' | i18nText"></label>\n      <textarea\n        ng-model="$ctrl.state.x509cert1"\n        name="x509cert1"\n        data-sumo-test="saml-add-form-cert"\n        class="saml-config-cert-input"\n        ng-required="true"\n      >\n      </textarea>\n    </md-input-container>\n    <md-radio-group ng-model="$ctrl.state.emailAttribute" ng-required="true">\n      <label class="config-form-radio-label">{{ ::\'saml.configuration.form.attrMapping\' | i18nText }} *</label>\n      <md-radio-button value="subject">{{ ::\'saml.configuration.form.useSubject\' | i18nText }}</md-radio-button>\n      <md-radio-button value="attribute">{{ ::\'saml.configuration.form.useAttr\' | i18nText }}</md-radio-button>\n    </md-radio-group>\n    <md-input-container\n      class="md-block config-form-input-container__saml-attr"\n      ng-show="$ctrl.state.emailAttribute === \'attribute\'">\n      <label>{{ ::\'saml.configuration.form.samlAttr\' | i18nText }}</label>\n      <input ng-model="$ctrl.state.emailSAMLAttribute" name="emailSAMLAttribute"/>\n    </md-input-container>\n    <div class="md-block config-form-input-container__optional">\n      <label class="config-form-optional-label">{{ ::\'saml.configuration.form.optional\' | i18nText }}</label>\n      <md-checkbox\n        class="config-form-input-container__spInitiated"\n        ng-checked="$ctrl.state.spInitiatedLoginEnabled"\n        type="checkbox"\n        value="{{$ctrl.state.spInitiatedLoginEnabled}}"\n        name="spInitiatedLoginEnabled"\n        ng-click="$ctrl.actions.toggleSPLogin()"\n        ng-disabled="$ctrl.restrictOnSubdomain"\n      >\n        <label>{{ ::\'saml.configuration.form.spInitLoginCert\' | i18nText }}</label>\n      </md-checkbox>\n      <div class="div-checkbox-helper-text" ng-show="$ctrl.restrictOnSubdomain">\n        {{ ::\'saml.configuration.form.spInitSubdomainMissingA\' | i18nText }}\n        <a\n          target="_blank"\n          rel="noopener noreferrer"\n          href="https://help.sumologic.com/Manage/01Manage_Subscription/05Manage_Organizational_Settings#set-up-a-custom%C2%A0subdomain"\n        >\n          {{ ::\'saml.configuration.form.spInitSubdomainMissingB\' | i18nText }}\n        </a>\n      </div>\n      <md-input-container\n        class="md-block config-form-input-container__loginPath"\n        ng-class="{\'md-checked\': $ctrl.state.spInitiatedLoginEnabled}"\n        ng-show="$ctrl.state.spInitiatedLoginEnabled"\n        ng-if="!$ctrl.disableLoginPath"\n      >\n        <label ng-bind="::\'saml.configuration.form.loginPath\' | i18nText"></label>\n        <input\n          ng-model="$ctrl.state.spInitiatedLoginPath"\n          name="spInitiatedLoginPath"\n          ng-required="true"\n        >\n        </input>\n      </md-input-container>\n      <md-input-container\n        class="md-block config-form-input-container__requestURL"\n        ng-class="{\'md-checked\': $ctrl.state.spInitiatedLoginEnabled}"\n        ng-show="$ctrl.state.spInitiatedLoginEnabled"\n      >\n        <label>\n          {{ ::\'saml.configuration.form.requestURL\' | i18nText }}\n        </label>\n        <input\n          ng-model="$ctrl.state.authnRequestUrl"\n          name="configurationName"\n          ng-required="true"\n        />\n      </md-input-container>\n      <md-checkbox\n        class="config-form-input-container__signAuthRequest"\n        type="checkbox"\n        value="{{$ctrl.state.disableRequestedAuthnContext}}"\n        name="spInitiatedLoginEnabled"\n        ng-checked="$ctrl.state.disableRequestedAuthnContext"\n        ng-click="$ctrl.actions.toggleAuthnContext()"\n        ng-show="$ctrl.state.spInitiatedLoginEnabled"\n       >\n        <label>{{ ::\'saml.configuration.form.disableRequestedAuthnContext\' | i18nText }}</label>\n       </md-checkbox>\n      <md-checkbox\n        class="config-form-input-container__signAuthRequest"\n        type="checkbox"\n        value="{{$ctrl.state.signAuthRequestEnabled}}"\n        ng-checked="$ctrl.state.signAuthRequestEnabled"\n        name="signAuthRequestEnabled"\n        ng-click="$ctrl.actions.toggleSignAuthRequest()"\n        ng-show="$ctrl.state.spInitiatedLoginEnabled"\n        ng-if="$ctrl.authnCertFlag"\n      >\n        <label>{{ ::\'saml.configuration.form.signAuthnRequest\' | i18nText }}</label>\n      </md-checkbox>\n      <md-input-container\n        class="md-block config-form-input-container__signAuthRequestCert"\n        ng-class="{\'md-checked\': $ctrl.state.signAuthRequestEnabled}"\n        ng-show="$ctrl.state.signAuthRequestEnabled && $ctrl.state.spInitiatedLoginEnabled"\n      >\n        <label ng-bind="::\'saml.configuration.form.SumoCert\' | i18nText"></label>\n        <textarea\n          name="signAuthRequestCert"\n          class="signAuthRequestCert"\n          readonly\n          ng-model="$ctrl.state.signAuthRequestCert"\n        >\n        </textarea>\n        <md-button\n          type="submit"\n          class="md-raised md-primary"\n          aria-label="_"\n          ng-attr-aria-label="::\'saml.configuration.form.button.downloadCert\' | i18nText"\n          ng-disabled=""\n          ng-click="$ctrl.downloadCert()"\n          ng-bind="::\'saml.configuration.form.button.downloadCert\' | i18nText"\n        >\n        </md-button>\n      </md-input-container>\n      <md-radio-group\n        ng-show="$ctrl.state.spInitiatedLoginEnabled"\n        ng-if="$ctrl.samlLoginFlag"\n        name="spInitiatedLoginEnabled"\n        ng-model="$ctrl.state.isRedirectBinding" ng-required="true"\n        class="config-form-input-container__disableBindingOptions"\n      >\n        <label class="config-form-radio-label">{{ ::\'saml.configuration.form.bindingOptions\' | i18nText }}</label>\n        <md-radio-button value="post" ng-value="false">{{ ::\'saml.configuration.form.post\' | i18nText }}</md-radio-button>\n        <md-radio-button value="redirect" ng-value="true">{{ ::\'saml.configuration.form.redirect\' | i18nText }}</md-radio-button>\n      </md-radio-group>\n      <md-checkbox\n        class="md-block config-form-input-container__optional_box"\n        type="checkbox"\n        value="{{$ctrl.state.enableRolesAttribute}}"\n        name="spInitiatedLoginEnabled"\n        ng-checked="$ctrl.state.enableRolesAttribute"\n        ng-click="$ctrl.actions.toggleRolesAttr()"\n      >\n        <label>{{ ::\'saml.configuration.form.rolesAttr\' | i18nText }}</label>\n      </md-checkbox>\n      <md-input-container\n        class="md-block config-form-input-container__roles"\n        ng-show="$ctrl.state.enableRolesAttribute"\n      >\n        <label>{{ ::\'saml.configuration.form.roles\' | i18nText }}</label>\n        <input ng-model="$ctrl.state.rolesAttribute" name="rolesAttribute"/>\n      </md-input-container>\n      <md-checkbox\n        class="md-block config-form-input-container__optional_box"\n        type="checkbox"\n        value="{{$ctrl.state.onDemandProvisioningEnabled}}"\n        ng-checked="$ctrl.state.onDemandProvisioningEnabled"\n        name="spInitiatedLoginEnabled"\n        ng-click="$ctrl.actions.toggleOnDemand()"\n      >\n        <label>{{ ::\'saml.configuration.form.onDemand\' | i18nText }}</label>\n      </md-checkbox>\n      <md-input-container\n        class="md-block config-form-input-container__name-attr"\n        ng-show="$ctrl.state.onDemandProvisioningEnabled"\n      >\n        <label>{{ ::\'saml.configuration.form.firstName\' | i18nText }}</label>\n        <input ng-model="$ctrl.state.firstNameAttribute" name="firstNameAttribute"/>\n      </md-input-container>\n      <md-input-container\n        class="md-block config-form-input-container__name-attr"\n        ng-show="$ctrl.state.onDemandProvisioningEnabled"\n      >\n        <label>{{ ::\'saml.configuration.form.lastName\' | i18nText }}</label>\n        <input ng-model="$ctrl.state.lastNameAttribute" name="lastNameAttribute"/>\n      </md-input-container>\n      <md-input-container\n        class="md-block config-form-input-container__roles"\n        ng-show="$ctrl.state.onDemandProvisioningEnabled"\n      >\n        <label>{{ ::\'saml.configuration.form.onDemandAttr\' | i18nText }}</label>\n        <input\n          ng-model="$ctrl.state.onDemandProvisioningRoles"\n          name="onDemandProvisioningRoles"\n          ng-required="true"\n        />\n      </md-input-container>\n    </div>\n    <md-checkbox\n      class="md-block config-form-input-container__optional_box"\n      type="checkbox"\n      value="{{$ctrl.state.logoutEnabled}}"\n      ng-checked="$ctrl.state.logoutEnabled"\n      name="spInitiatedLoginEnabled"\n      ng-click="$ctrl.actions.toggleLogoutPage()"\n    >\n      <label>{{ ::\'saml.configuration.form.logoutPage\' | i18nText }}</label>\n    </md-checkbox>\n    <md-input-container\n      class="md-block config-form-input-container__logoutPage"\n      ng-show="$ctrl.state.logoutEnabled"\n    >\n      <label ng-bind="::\'saml.configuration.form.logoutUrl\' | i18nText"></label>\n      <input ng-model="$ctrl.state.logoutUrl" name="logoutUrl">\n      </input>\n    </md-input-container>\n  </form>\n'},pT=s.module("sumoApp.saml.view",["sumoApp.saml.components","sumoApp.saml.state","sumoApp.libraryCommon","ui.router"]);pT.component("samlWhitelistUsersView",cT),pT.component("samlContainerView",rT),pT.component("samlConfigurationFormContainer",sT),pT.component("samlConfigurationForm",uT),pT.config(["$stateProvider",e=>{_.each(oT,(t=>e.state(t)))}]);const hT={bindings:{cardTitle:"<",actions:"<",addButtonText:"<"},transclude:!0,template:'\n        <md-card class="no-padding flex-column saml-card">\n            <div class="saml-card__header">\n                <div class="md-title saml-card__title">{{ $ctrl.cardTitle }}</div>\n                <md-button class="md-raised md-accent md-button saml-card__add_button"\n                    ng-click="$ctrl.actions.add($event)"\n                    data-sumo-test="saml-add-button">\n                    <md-icon md-svg-icon="plus" class="add-button-icon"></md-icon>\n                    {{$ctrl.addButtonText}}\n                </md-button>\n            </div>\n            <div ng-transclude class="saml-card__transclude"></div>\n        </md-card>\n    '};class mT{constructor(e){this.$element=e}$postLink(){this.$element.addClass("form-container")}}mT.$inject=["$element"];const gT={controller:mT,bindings:{formMeta:"<",whitelistUser:"<",actions:"<"},template:'\n    <form\n      name="deleteWhitelistUserForm"\n      class="saml-form-layout form-layout"\n      ng-submit="$ctrl.actions.submit($ctrl.deleteInput)"\n      md-theme="formTheme"\n    >\n      <div class="form-layout__body">\n        <form-errors errors="$ctrl.formMeta.errors"></form-errors>\n        <p class="delete_last_user">\n          <span id="warning-icon"><i class="fa fa-exclamation-triangle"></i></span>\n          <span class="saml-lastuser-bold">{{ $ctrl.whitelistUser.firstName + \' \' + $ctrl.whitelistUser.lastName }}</span>\n          {{ ::\'saml.allowlist.modals.deleteLastUser.topMessage\' | i18nText }}\n          <br><br>\n          {{ ::\'saml.allowlist.modals.deleteLastUser.middleMessage\' | i18nText }}\n          <br><br>\n          {{ ::\'saml.allowlist.modals.deleteLastUser.bottomMessage1\' | i18nText }}\n          <span class="saml-lastuser-bold">{{ $ctrl.whitelistUser.firstName + \' \' + $ctrl.whitelistUser.lastName }}</span>\n          {{ ::\'saml.allowlist.modals.deleteLastUser.bottomMessage2\' | i18nText }}\n        </p>\n        <md-input-container class="md-block">\n          <label>{{ ::\'saml.allowlist.modals.deleteLastUser.label\' | i18nText }}</label>\n          <input ng-model="$ctrl.deleteInput" name="delete" ng-required="true" />\n        </md-input-container>\n      </div>\n      <div class="form-layout__actions">\n        <md-button\n          class="md-raised md-primary"\n          aria-label="_" ng-attr-aria-label="::\'saml.allowlist.modals.button.cancel\' | i18nText"\n          ng-disabled="$ctrl.formMeta.isFetching"\n          ng-bind="::\'saml.allowlist.modals.button.cancel\' | i18nText"\n          ng-click="$ctrl.actions.cancel()"\n        >\n        </md-button>\n        <md-button\n          type="submit"\n          class="md-raised md-accent--red"\n          aria-label="_" ng-attr-aria-label="::\'saml.allowlist.modals.button.delete\' | i18nText"\n          ng-disabled="$ctrl.formMeta.isFetching || $ctrl.deleteInput !== \'DELETE\'"\n          ng-bind="::\'saml.allowlist.modals.button.delete\' | i18nText"\n        >\n        </md-button>\n      </div>\n    </form>\n  '};class yT{constructor(e){this.$element=e}$postLink(){this.$element.addClass("form-container")}}yT.$inject=["$element"];const vT={controller:yT,bindings:{formMeta:"<",filteredUsers:"<",availableUsers:"<",selectedUsers:"<",isLoading:"<",actions:"<"},template:'\n    <div class="allowlist-search-box-container">\n      <search-box\n        icon="search"\n        callback="$ctrl.actions.search(text)"\n        placeholder="{{ ::\'saml.allowlist.modals.addUsers.search\' | i18nText }}"\n        dont-use-debounce=true\n      >\n\t    </search-box>\n    </div>\n    <div class="allowlist-form-header">\n      <div class="allowlist-form-header__name">Name</div>\n      <div class="allowlist-form-header__email">Email</div>\n    </div>\n    <div class="allowlist-modal-body">\n      <form name="addWhitelistUsersForm"\n            class="allowlist-form-layout form-layout"\n            ng-submit="$ctrl.actions.submit($ctrl.selectedUsers)"\n            md-theme="formTheme"\n      >\n        <div class="allowlist-form-layout__body">\n          <form-errors errors="$ctrl.formMeta.errors"></form-errors>\n          <load-placeholder loading="!$ctrl.isLoading">\n            <md-dialog-content>\n            <div ng-if="$ctrl.filteredUsers.length > 0" class="allowlist-form-layout__dialog-content allowlist-form-layout__add_user_list">\n              <md-virtual-repeat-container class="allowlist-repeat-container">\n                <div\n                  class="allowlist-form-layout__selectable_user_row"\n                  md-virtual-repeat="user in $ctrl.filteredUsers"\n                  md-item-size="15"\n                >\n                  <div class="allowlist-form-user">\n                    <div class="allowlist-form-user__checkbox">\n                      <md-checkbox\n                        type="checkbox"\n                        value="{{user.id}}"\n                        aria-label="{{user.name - user.email}}"\n                        ng-checked="$ctrl.selectedUsers.indexOf(user.id) != -1"\n                        ng-click="$ctrl.actions.toggle(user.id)"\n                        class="allowlist-form-layout__checkbox"\n                      >\n                      </md-checkbox>\n                    </div>\n                    <div class="allowlist-form-user__name">{{ user.name }}</div>\n                    <div class="allowlist-form-user__email">{{ user.email }}</div>\n                  </div>\n                </div>\n              </md-virtual-repeat-container>\n            </div>\n            <div class="allowlist-form-layout__no_users" ng-if="$ctrl.availableUsers.length < 1 && !$ctrl.isLoading">\n                <p>{{ ::\'saml.allowlist.modals.addUsers.noUsersToAdd\' | i18nText }}</p>\n            </div>\n          </md-dialog-content>\n          </load-placeholder>\n        </div>\n      </form>\n    </div>\n    <div class="allowlist-form-layout__actions">\n      <md-button\n        class="md-raised md-primary"\n        aria-label="_"\n        ng-attr-aria-label="::\'saml.allowlist.modals.button.cancel\' | i18nText"\n        ng-disabled="$ctrl.formMeta.isFetching"\n        ng-bind="::\'saml.allowlist.modals.button.cancel\' | i18nText"\n        ng-click="$ctrl.actions.cancel()"\n      >\n      </md-button>\n      <md-button\n        ng-click="$ctrl.actions.submit()"\n        form="addWhitelistUsersForm"\n        class="md-raised md-accent"\n        aria-label="_"\n        ng-attr-aria-label="::\'saml.allowlist.modals.button.add\' | i18nText"\n        ng-disabled="$ctrl.formMeta.isFetching || $ctrl.selectedUsers.length < 1"\n        ng-bind="::\'saml.allowlist.modals.button.add\' | i18nText"\n      >\n      </md-button>\n    </div>\n  '};class fT{constructor(e,t,i){this.$element=e,this.i18n=t,this.currentUserHelper=i,this.loginPathDisabled=!1,this.currentUserHelper.hasFeatureFlag("UISamlDisableLoginPath")&&(this.loginPathDisabled=!0)}$onInit(){this.$element.addClass("configuration-view")}}fT.$inject=["$element","i18n","currentUserHelper"];const _T={bindings:{configurations:"<",selectedConfiguration:"<",actions:"<"},controller:fT,template:'\n      <saml-card\n        add-button-text="$ctrl.i18n.get(\'saml.configuration.addBtnLabel\')"\n        class="flex-card"\n        card-title="$ctrl.i18n.get(\'saml.configuration.title\')"\n        actions="$ctrl.actions"\n      >\n        \n    <table\n      at\n      at-sortable="$ctrl.actions.sortConfigs(sortKey, reverse)"\n      at-model-state="$ctrl.configurations"\n      class="configuration-view__table configuration-table"\n      data-sumo-test="saml-configurations-table"\n    >\n      <thead>\n        <tr>\n          <th id="config-name-header" class="pointer configuration-col--name" data-sort-by="configurationName">\n            {{ ::\'saml.configuration.columnNames.name\' | i18nText }}\n          </th>\n          <th class="pointer configuration-col--debug" data-sort-by="debugMode">\n            {{ ::\'saml.configuration.columnNames.debug\' | i18nText }}\n          </th>\n          <th\n            class="pointer configuration-col--spInitiatedLoginPath"\n            ng-if="!$ctrl.loginPathDisabled"\n            data-sort-by="spInitiatedLoginPath"\n          >\n            {{ ::\'saml.configuration.columnNames.spInitiatedLoginPath\' | i18nText }}\n          </th>\n          <th\n            class="pointer configuration-col--spInitiatedLoginEnabled"\n            ng-if="$ctrl.loginPathDisabled"\n            data-sort-by="spInitiatedLoginEnabled"\n          >\n            {{ ::\'saml.configuration.columnNames.spInitiatedLoginPath\' | i18nText }}\n          </th>\n          <th class="pointer configuration-col--issuer" data-sort-by="issuer">\n            {{ ::\'saml.configuration.columnNames.issuer\' | i18nText }}\n          </th>\n        </tr>\n      </thead>\n      <tbody\n        list-hover-behavior\n        get-item="$ctrl.actions.getConfig(index)"\n        item-selector=".configuration-item"\n      >\n        <tr class="configuration-item"\n          ng-repeat="config in $ctrl.configurations track by config.id"\n          ng-class="{ \'is-selected\': $ctrl.selectedConfiguration == config }"\n          data-index="{{ $index }}"\n          ng-click="$ctrl.actions.onRowClick(config, $index)"\n          data-sumo-test="sumo-config-row-{{ $index }}"\n        >\n          <td class="configuration-col--name" title="{{config.configurationName}}">{{ config.configurationName }}</td>\n          <td class="configuration-col--debug">\n            <sumo-status\n              ng-if="config.debugMode"\n              title="active"\n              type="running"\n            >\n            </sumo-status>\n            <sumo-status\n              ng-if="!config.debugMode"\n              title="inactive"\n              type="inactive"\n            >\n            </sumo-status>\n          </td>\n          <td\n            class="configuration-col--spInitiatedLoginPath"\n            ng-if="!$ctrl.loginPathDisabled"\n            data-sumo-test="saml-col-spInitiatedLoginEnabled"\n          >\n            {{ config.spInitiatedLoginPath }}\n          </td>\n          <td class="configuration-col--spInitiatedLoginEnabled"\n            ng-if="$ctrl.loginPathDisabled"\n            data-sumo-test="saml-col-spInitiatedLoginEnabled"\n          >\n            <sumo-status\n              ng-if="config.spInitiatedLoginEnabled"\n              title="{{$ctrl.i18n.get(\'common.yes\')}}"\n              type="running"\n            >\n            </sumo-status>\n            <sumo-status\n              ng-if="!config.spInitiatedLoginEnabled"\n              title="{{$ctrl.i18n.get(\'common.no\')}}"\n              type="inactive"\n            >\n          </td>\n          <td class="configuration-col--issuer">{{ config.issuer }}</td>\n        </tr>\n      </tbody>\n    </table>\n\n      </saml-card>\n    '},ST={bindings:{title:"<",description:"<",actions:"<",startState:"<"},controllerAs:"$ctrl",template:'\n        <md-card class="saml-lockdown">\n            <div class="saml-lockdown__container">\n              <saml-lockdown-toggle\n                toggled="$ctrl.startState"\n                on-toggle="$ctrl.actions.toggle"\n              >\n              </saml-lockdown-toggle>\n              <div class="saml-lockdown__description">{{ ::\'saml.lockdown.description\' | i18nText }}</div>\n            </div>\n        </md-card>\n    '};var bT=i(3097),ET=i.n(bT);var TT=i(54367),xT=i.n(TT);const CT=qt.Expansion.Panel,AT=e=>T.createElement(qt.Text,{variant:"text"},(0,re.getReactIntlMsg)(e)),wT=()=>{const e=T.createElement(qt.Text,{className:xT().title,variant:"textHeavy"},T.createElement(qt.Icon,{className:xT().titleIcon,color:"dolphin",name:"book"}),(0,re.getReactIntlMsg)("saml.configuration.faqs.title"));return T.createElement(qt.ThemeProvider,{theme:"brandLight"},T.createElement(qt.Expansion,{title:e,dense:!0,accordionMode:!0,divWrapperProps:{className:xT().faqContainer,"data-sumo-test":"saml-form-faqs"}},T.createElement(CT,{header:AT("saml.configuration.form.configName"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.configName"))),T.createElement(CT,{header:AT("saml.configuration.form.issuer"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.issuer"),T.createElement(qt.TextLink,{href:"http://adfs.myserver.tld/adfs/services/trust",external:!0},"http://adfs.myserver.tld/adfs/services/trust"))),T.createElement(CT,{header:AT("saml.configuration.form.x509Cert"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.x509Cert"))),T.createElement(CT,{header:AT("saml.configuration.form.attrMapping"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.attrMapping"),T.createElement("ul",{className:xT().faqList},T.createElement("li",null,(0,re.getReactIntlMsg)("saml.configuration.faqs.useSubject")),T.createElement("li",null,(0,re.getReactIntlMsg)("saml.configuration.faqs.useAttr"))))),T.createElement(CT,{header:AT("saml.configuration.form.spInitLoginCert"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.InlineNotification,{className:xT().warning,status:"recommendation",text:(0,re.getReactIntlMsg)("saml.configuration.faqs.spInitLoginCertRecom"),isCollapsed:!1,multiline:!0}),T.createElement("br",null),T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.spInitLoginCert"))),T.createElement(CT,{header:AT("saml.configuration.form.requestURL"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.requestURL"))),T.createElement(CT,{header:AT("saml.configuration.form.disableRequestedAuthnContext"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.disableRequestedAuthnContext"))),T.createElement(CT,{header:AT("saml.configuration.form.signAuthnRequest"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.signAuthnRequest"))),T.createElement(CT,{header:AT("saml.configuration.form.bindingOptions"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.bindingOptions"))),T.createElement(CT,{header:AT("saml.configuration.form.rolesAttr"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.rolesAttr"))),T.createElement(CT,{header:AT("saml.configuration.form.onDemand"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},T.createElement("ul",{className:xT().faqList},T.createElement("li",null,(0,re.getReactIntlMsg)("saml.configuration.faqs.firstName")),T.createElement("li",null,(0,re.getReactIntlMsg)("saml.configuration.faqs.lastName"))))),T.createElement(CT,{header:AT("saml.configuration.form.onDemandAttr"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.onDemandAttr"))),T.createElement(CT,{header:AT("saml.configuration.form.logoutPage"),divPanelSummaryClassName:xT().question,divPanelContentClassName:xT().answerWrapper},T.createElement(qt.Text,{className:xT().answer,variant:"text",noWrap:!1},(0,re.getReactIntlMsg)("saml.configuration.faqs.logoutPage")))))};var IT=i(29974);const RT=s.module("sumoApp.saml.components",["sumoApp.components","sumoApp.saml.state","sumoApp.common.components","sumoApp.users.roles.state","ngMaterial"]);RT.component("samlCard",hT),RT.component("samlDeleteLastWhitelistUserForm",gT),RT.component("samlAddWhitelistUsersForm",vT),RT.component("samlConfigurationsView",_T),RT.component("samlLockdownView",ST),RT.component("samlLockdownDialog",(0,re.strictModeReactToAngular)((e=>T.createElement(qt.ThemeProvider,{theme:"brandLight"},T.createElement(qt.Dialog,{open:e.open,dialogSize:"regular"},T.createElement(qt.Dialog.Title,{"data-sumo-test":"saml-enable-dialog-title"},Ge.j.get("saml.dialog.title")),T.createElement(qt.Dialog.Content,{"data-sumo-test":"saml-enable-dialog-content"},T.createElement("div",{className:ET().dialogContent},Ge.j.get("saml.dialog.content1")),T.createElement("div",null,Ge.j.get("saml.dialog.content2"))),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:e.cancelFn,"data-sumo-test":"saml-enable-dialog-cancel"},Ge.j.get("saml.dialog.cancel")),T.createElement(qt.Button,{color:"destructive",onClick:e.confirmFn,"data-sumo-test":"saml-enable-dialog-confirm"},Ge.j.get("saml.dialog.confirm")))))),["confirmFn","cancelFn","open"])),RT.component("samlXmlUploadDialog",(0,re.strictModeReactToAngular)((e=>{const[t,i]=(0,T.useState)(""),[r,n]=(0,T.useState)("default");return x().createElement(qt.ThemeProvider,{theme:"brandLight"},x().createElement(qt.Dialog,{open:e.open,dialogSize:"regular"},x().createElement(qt.Dialog.Title,{"data-sumo-test":"saml-xml-upload-dialog-title"},Ge.j.get("saml.dialog.xml.title")),x().createElement(qt.Dialog.Content,{"data-sumo-test":"saml-xml-upload-dialog-content"},x().createElement(qt.Text,{variant:"textSmall",noWrap:!1},Ge.j.get("saml.dialog.xml.content")),x().createElement(qt.CodeEditor,{autoCursor:!1,label:Ge.j.get("saml.dialog.xml.label"),language:"xml",onChange:(e,t,r)=>{i(r)},value:t}),x().createElement(R.UploadButton,{color:"primary",name:"saml-xml-upload-button",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];n("processing"),r?r.text().then((e=>{i(e),n("default")})):n("fail")},onlyAccept:"application/xml",status:r,text:{processing:Ge.j.get("saml.dialog.xml.upload.processing"),default:Ge.j.get("saml.dialog.xml.upload.default"),success:Ge.j.get("saml.dialog.xml.upload.default"),fail:Ge.j.get("saml.dialog.xml.upload.fail")}})),x().createElement(qt.Dialog.Actions,null,x().createElement(qt.Button,{color:"secondary",onClick:e.cancelFn,"data-sumo-test":"saml-xml-upload-dialog-cancel"},Ge.j.get("saml.dialog.cancel")),x().createElement(qt.Button,{color:"primary",onClick:i=>{e.importFn(t)},"data-sumo-test":"saml-xml-upload-dialog-import"},Ge.j.get("saml.dialog.xml.import")))))}),["cancelFn","importFn","open"]));const DT={en:{saml:IT.Z},ja:{saml:{}}};RT.component("samlLockdownToggle",(0,re.reactToAngularWithIntl)(DT)((e=>T.createElement(qt.Toggle,{toggled:e.toggled,onToggle:e.onToggle,"data-sumo-test":"saml-lockdown-switch"},T.createElement("div",{className:"saml-lockdown__title"},(0,re.getReactIntlMsg)("saml.lockdown.title")))),["toggled","onToggle"])),RT.component("samlFaqs",(0,re.reactToAngularWithIntl)(DT)(wT));const OT=i(89919);s.module("smart-table").filter("nestedOrderBy",OT);i(7750);const NT=s.module("sumoApp.utils.backbone",[]);NT.service("backboneViewUtilService",g.BackboneViewUtilService),NT.value("pageBlock",g.pageBlock);i(32632);const MT=i(39281);class kT extends T.Component{render(){return T.createElement("div",{className:"certificate-header"},T.createElement("div",{className:"headerLeft"},T.createElement("div",{className:"headerTitle"},Ge.j.get("home.certTitle")),T.createElement("div",{className:"headerSubTitle"},Ge.j.get("home.certHeaderText"))),T.createElement("div",{className:"headerRight"},T.createElement("img",{className:"certImage",src:MT})))}}var LT=i(3957),PT=i.n(LT);var FT=i(55557),UT=i.n(FT);const VT=()=>{if(Gr.currentUserHelper.get().emailVerified){const e=D.UrlHelper.getCertificationURL();window.open(e,"_blank","noopener")}else gi.o.showVerifyAccountDialog()};i(77346);const BT=e=>{const{testId:t,text:i,isEmailVerified:r,color:n="primary"}=e;return r&&r()?T.createElement("div",{className:"certificate__exam-button",id:t},T.createElement(qt.Button,{color:n,onClick:()=>e.onTakeExam(t),"data-sumo-test":`${i}.btn`},Ge.j.get(i))):T.createElement("div",{className:"certificate__exam-button",id:t},T.createElement(qt.Button,{color:n,onClick:()=>e.verifyAccount(),"data-sumo-test":`${i}.btn`},Ge.j.get("bento.verification_required_text_short")))},$T=e=>{const{onTakeExam:t,verifyAccount:i,isEmailVerified:r,examButtons:n}=e,a={onTakeExam:t,verifyAccount:i,isEmailVerified:r},s=n.map((e=>T.createElement(BT,Object.assign({key:e.testId},a,e))));return T.createElement(qt.Card,{className:"certificate"},T.createElement(qt.Card.Content,{className:"certificateWrapper"},T.createElement("img",{className:"certificate__header-image",src:e.headerImageUrl}),T.createElement("div",{className:"certificate__details-container"},T.createElement("div",{className:"certificate__title"},Ge.j.get(e.description)),T.createElement("div",{className:"certificate__online-exam"}," ",Ge.j.get("home.certOnlineExam")," ",e.examDetails.numQuestions," ",Ge.j.get("home.certQuestions")," | ",e.examDetails.time," ",Ge.j.get("home.certMinutes")),T.createElement("div",{className:"certificate__prep-container"},T.createElement("div",{className:"certificate__prep"},T.createElement("label",null,Ge.j.get("home.certPrep")),e.prepDetails.details.map(((t,i)=>T.createElement("span",{key:t.id},T.createElement("a",{href:t.linkUrl,target:"_blank",rel:"noopener"},Ge.j.get(t.text)),i<1&&e.prepDetails.details.length>1&&T.createElement("span",null," & "))))),T.createElement("div",{className:"certificate__fine-print"},Ge.j.get(e.footerText))),T.createElement("div",{className:"certificate__exam-button__container"},s),T.createElement("div",{className:"certificate__learn-more"},T.createElement("button",{onClick:()=>e.onLearnMore(e.learnMore.learnMoreText)},Ge.j.get(e.learnMore.text))))))};v.u.register("CertificateHeader",kT),v.u.register("InfoPanel",(({iconSrc:e,heading:t,text:i})=>T.createElement(qt.Card,{noShadow:!0,type:qt.CardType.panel,className:PT().infoPanel},T.createElement("img",{src:e,className:PT().icon}),T.createElement(qt.Text,{variant:"subtitle",noWrap:!1,className:PT().heading},Ge.j.get(t)),T.createElement(qt.Text,{variant:"text",noWrap:!1,className:PT().text},Ge.j.get(i))))),v.u.register("SkilljarCertificateHeader",(()=>T.createElement(qt.Card,{noShadow:!0,type:qt.CardType.panel,className:UT().card},T.createElement(qt.Card.Content,{className:UT().content},T.createElement(qt.Icon,{name:"certifications",className:UT().icon}),T.createElement(qt.Text,{variant:"titleSmall",className:UT().heading,noWrap:!1},Ge.j.get("certificate.bannerHeading")),T.createElement(qt.Text,{variant:"text",className:UT().text,noWrap:!1},Ge.j.get("certificate.bannerText1"),T.createElement(qt.Text,{variant:"textHeavy",className:UT().textHeavy},Ge.j.get("certificate.bannerUserCount")),Ge.j.get("certificate.bannerText2")),T.createElement(qt.Button,{color:"primary",size:"regular",onClick:VT},Ge.j.get("certificate.bannerBtn")))))),(0,ds.tl)("certificate.container.tsx",["sumoApp.common.components","sumoApp.core","sumoApp.help.common"]);const HT="/learner/courseinfo/id:";class WT extends T.Component{popupLearnMoreDialog(e){ee.i.show(ee.i.preset("confirm").title(Ge.j.get("home.certLearnMoreTitle")).css("-full").textContent(Ge.j.get(e)).ok(Ge.j.get("home.certLearnMoreOK")))}isDevDeployment(){const e=D.UrlHelper.getDeploymentName();return["local","stag"].includes(e)}takeExam(e){const t=(this.isDevDeployment()?"https://staging-sumologic.talentlms.com/learner/courseinfo/id:":"https://sumologic.talentlms.com/learner/courseinfo/id:")+e,i=Gr.currentUserHelper.getDynamicProperty("ui_certificate_talentlms_url"),r=i?i+HT+e:t;window.open(r,"_blank","noopener")}isEmailVerified(){return Gr.currentUserHelper.get().emailVerified}verifyAccount(){gi.o.showVerifyAccountDialog()}render(){return T.createElement($T,Object.assign({},this.props,{onLearnMore:e=>this.popupLearnMoreDialog(e),onTakeExam:e=>this.takeExam(e),isEmailVerified:()=>this.isEmailVerified(),verifyAccount:()=>this.verifyAccount()}))}}v.u.register("CertificateContainer",WT);const qT=()=>(0,Sv.$)().then((e=>({default:e.ExploreContainer}))),jT=(0,Te.provideReduxStore)((e=>T.createElement(C.F,{dynamicImportFn:qT,moduleName:"explore",componentProps:e})));s.module("sumoApp.explore",["ngMaterial"]).component("explore",(0,re.legacyReactToAngular)(jT,["viewParams","idOrEncodedData","viewName","drillDownInfo"]));i(3238);var QT=i(21793),zT=i.n(QT),GT=i(69685);const KT=({name:e,description:t,onNameChange:i,onDescriptionChange:r,readOnly:n,isExpanded:a,onExpansionPanelStateChange:s})=>T.createElement(R.ExpansionPanel.Panel,{defaultExpanded:a,onChange:s},T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"basic-details"},T.createElement(qt.Text,{variant:"subtitle","data-sumo-test":"basic-details"},Ge.j.get("parsers.basicDetails"))),T.createElement(R.ExpansionPanel.Details,null,T.createElement("div",{className:zT().basicDetails},T.createElement(GT.nv,{fullWidth:!0,multiline:!0,readOnly:n,className:zT().nameField,label:Ge.j.get("parsers.name"),value:e,onChange:e=>i(e.target.value),"data-sumo-test":"parsers-name"}),T.createElement(GT.nv,{fullWidth:!0,multiline:!0,optional:!0,className:zT().descriptionField,readOnly:n,label:Ge.j.get("common.description"),value:t,onChange:e=>r(e.target.value),"data-sumo-test":"parsers-description"}))));var YT=i(25282),ZT=i(99098),XT=i.n(ZT),JT=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function ex(e){return e?Ge.j.get(`parsers.link_${e}`):""}const tx=({label:e,children:t})=>T.createElement("div",{className:Wt()(XT().messageDetailsCategory)},T.createElement("div",{className:Wt()(XT().messageDetailsFilter)},e),T.createElement("div",{className:Wt()(XT().messageDetailsContent)},t));function ix(e){const{entry:t}=e,i=JT(e,["entry"]),[r,[n,a]]=t;return T.createElement("div",Object.assign({className:Wt()(XT().chipStyleLogMessage)},i),T.createElement("span",{className:Wt()(XT().chipStyleKey)},r," :"),"",T.createElement("span",{className:Wt()(XT().chipStyleValue)},n+(a?" :":"")),"",T.createElement(qt.Tooltip,{title:ex(a),placement:"top",multiline:!0},T.createElement("span",{className:Wt()(XT().chipStyleFactor)},a)))}const rx=e=>{const{messageFlags:t,messageDetails:i,categoryToGetData:r}=e,n=(r!==YT.yS.ALL&&i[r]||[]).map(((e,i)=>function(e,t,i){var r,n;if(!t)return;const a=Object.entries(t.factors)||[],s=Object.entries(t.fields)||[],o=e.logMessages&&t.logEntry,l=e.parseTime&&t.start_time,c=e.transforms&&(null===(r=t.transforms)||void 0===r?void 0:r.length)>0,d=e.factors&&a.length>0,u=e.eventDetails&&s.length>0,p=o||l||c||d||u,h=p&&(null===(n=t.errors)||void 0===n?void 0:n.length)>0;return p&&T.createElement("div",{className:Wt()(XT().messageDetailsContainer),key:i,"data-sumo-test":"parsers-single-message"},o&&T.createElement(tx,{label:Ge.j.get("parsers.logMessage")},T.createElement("div",{className:Wt()(XT().chipStyleLogMessage),"data-sumo-test":"parsers-single-message-logEntry"},t.logEntry)),l&&T.createElement(tx,{label:Ge.j.get("parsers.parsingTime")},T.createElement("div",{className:Wt()(XT().chipStyleLogMessage),"data-sumo-test":"parsers-single-message-time"},t.start_time)),c&&T.createElement(tx,{label:Ge.j.get("parsers.transforms")},t.transforms.map(((e,t)=>T.createElement("div",{className:Wt()(XT().chipStyleLogMessage),key:t,"data-sumo-test":"parsers-single-message-log"},e)))),d&&a.map((([e,t],i)=>T.createElement(tx,{label:`${Ge.j.get("parsers.factor")}:${e}`,key:i},t&&t.map((e=>Object.entries(e).map((e=>T.createElement(ix,{entry:e,"data-sumo-test":"parsers-single-message-factor"})))))))),u&&T.createElement(tx,{label:Ge.j.get("parsers.eventDetails")},s.map((e=>{const[t]=e;return T.createElement(ix,{key:`${t}:${e[0]}:${e[1]}`,type:t,entry:e,"data-sumo-test":"parsers-single-message-event"})}))),h&&T.createElement(tx,{label:Ge.j.get("parsers.errorMessages")},t.errors.map(((e,t)=>T.createElement("div",{className:Wt()(XT().chipStyleWarning),key:t,"data-sumo-test":"parsers-single-message-error"},T.createElement("span",{className:Wt()(XT().chipStyleIcon)},T.createElement(qt.Icon,{name:"exclamation-triangle",size:"medium",color:"persimmon"})),e)))))}(t,e,i)));return T.createElement("div",null,n)};var nx=i(45394),ax=i.n(nx);const sx=(e,t)=>({defaultExpanded:e.isExpansionPanelExpanded[t],onChange:()=>e.toggleExpansionPanelExpand(t)});function ox(e,t){const i={messageCategorySelected:e.mainCategory,messageFlags:{logMessages:e.subCategories.log,parseTime:e.subCategories.time,transforms:e.subCategories.transforms,eventDetails:e.subCategories.events,factors:e.subCategories.factors},messageDetails:e.parsedEvents,currentCategory:t,categoryToGetData:YT.yS.ALL},r=function(e){return!!(e.parsedEvents[YT.yS.PARSED].length&&e.parsedEvents[YT.yS.PARSED][0].transforms.length||e.parsedEvents[YT.yS.DROPPED].length&&e.parsedEvents[YT.yS.DROPPED][0].transforms.length||e.parsedEvents[YT.yS.UNPARSED].length&&e.parsedEvents[YT.yS.UNPARSED][0].transforms.length||e.parsedEvents[YT.yS.WARNINGS].length&&e.parsedEvents[YT.yS.WARNINGS][0].transforms.length)}(e);return T.createElement("div",null,T.createElement("div",{className:Wt()(ax().checkboxContainer)},T.createElement(qt.Checkbox,{label:Ge.j.get("parsers.logMessage"),checked:e.subCategories.log,onChange:t=>e.selectParsingDetails(t,YT.t9.LOG_MESSAGES),"data-sumo-test":"parsers-parsed-events-category-log"}),T.createElement(qt.Checkbox,{label:Ge.j.get("parsers.parsingTime"),checked:e.subCategories.time,onChange:t=>e.selectParsingDetails(t,YT.t9.PARSING_TIME),"data-sumo-test":"parsers-parsed-events-category-time"}),T.createElement(qt.Checkbox,{label:Ge.j.get("parsers.transforms"),checked:e.subCategories.transforms&&r,onChange:t=>e.selectParsingDetails(t,YT.t9.TRANSFORMS),"data-sumo-test":"parsers-parsed-events-category-transforms",disabled:!r}),T.createElement(qt.Checkbox,{label:Ge.j.get("parsers.eventDetails"),checked:e.subCategories.events,onChange:t=>e.selectParsingDetails(t,YT.t9.EVENT_DETAILS),"data-sumo-test":"parsers-parsed-events-category-events"})),(i.currentCategory===YT.yS.ALL||i.currentCategory===YT.yS.PARSED)&&T.createElement(R.ExpansionPanel.Panel,Object.assign({},sx(e,"parsedMessages")),T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"parsed-Messages"},Ge.j.get("parsers.parsedMessages",i.messageDetails["Parsed Events"]?i.messageDetails["Parsed Events"].length:0)),T.createElement(R.ExpansionPanel.Details,null,T.createElement(rx,Object.assign({},Object.assign(Object.assign({},i),{categoryToGetData:YT.yS.PARSED}),{"data-sumo-test":"parsers-parsed-events-summary-parsed"})))),(i.currentCategory===YT.yS.ALL||i.currentCategory===YT.yS.WARNINGS)&&T.createElement(R.ExpansionPanel.Panel,Object.assign({},sx(e,"parsedMessagesWithWarnings")),T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"parsed-events-with-errors"},Ge.j.get("parsers.parsedMessagesWithWarnings",i.messageDetails["Events With Errors"]?i.messageDetails["Events With Errors"].length:0)),T.createElement(R.ExpansionPanel.Details,null,T.createElement(rx,Object.assign({},Object.assign(Object.assign({},i),{categoryToGetData:YT.yS.WARNINGS}),{"data-sumo-test":"parsers-parsed-events-summary-warnings"})))),(i.currentCategory===YT.yS.ALL||i.currentCategory===YT.yS.UNPARSED)&&T.createElement(R.ExpansionPanel.Panel,Object.assign({},sx(e,"unparsedMessages")),T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"unparsed-events"},Ge.j.get("parsers.unparsedMessages",i.messageDetails["Unparsed Events"]?i.messageDetails["Unparsed Events"].length:0)),T.createElement(R.ExpansionPanel.Details,null,T.createElement(rx,Object.assign({},Object.assign(Object.assign({},i),{categoryToGetData:YT.yS.UNPARSED}),{"data-sumo-test":"parsers-parsed-events-summary-unparsed"})))),(i.currentCategory===YT.yS.ALL||i.currentCategory===YT.yS.DROPPED)&&T.createElement(R.ExpansionPanel.Panel,Object.assign({},sx(e,"droppedMessages")),T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"dropped-events"},Ge.j.get("parsers.droppedMessages",i.messageDetails["Dropped Events"]?i.messageDetails["Dropped Events"].length:0)),T.createElement(R.ExpansionPanel.Details,null,T.createElement(rx,Object.assign({},Object.assign(Object.assign({},i),{categoryToGetData:YT.yS.DROPPED}),{"data-sumo-test":"parsers-parsed-events-summary-dropped"})))))}const lx=e=>{const t=(e.parsedEvents["Parsed Events"]?e.parsedEvents["Parsed Events"].length:0)+(e.parsedEvents["Dropped Events"]?e.parsedEvents["Dropped Events"].length:0)+(e.parsedEvents["Events With Errors"]?e.parsedEvents["Events With Errors"].length:0)+(e.parsedEvents["Unparsed Events"]?e.parsedEvents["Unparsed Events"].length:0),i=[{label:Ge.j.get("parsers.allMessages",t),value:YT.yS.ALL,component:ox(e,YT.yS.ALL),"data-sumo-test":"parsers-parsedevents-category-all"},{label:Ge.j.get("parsers.parsed",e.parsedEvents["Parsed Events"]?e.parsedEvents["Parsed Events"].length:0),value:YT.yS.PARSED,component:ox(e,YT.yS.PARSED),"data-sumo-test":"parsers-parsedevents-category-parsed"},{label:Ge.j.get("parsers.warningMessages",e.parsedEvents["Events With Errors"]?e.parsedEvents["Events With Errors"].length:0),value:YT.yS.WARNINGS,component:ox(e,YT.yS.WARNINGS),"data-sumo-test":"parsers-parsedevents-category-warning"},{label:Ge.j.get("parsers.unparsedMessages",e.parsedEvents["Unparsed Events"]?e.parsedEvents["Unparsed Events"].length:0),value:YT.yS.UNPARSED,component:ox(e,YT.yS.UNPARSED),"data-sumo-test":"parsers-parsedevents-category-unparsed"},{label:Ge.j.get("parsers.dropped",e.parsedEvents["Dropped Events"]?e.parsedEvents["Dropped Events"].length:0),value:YT.yS.DROPPED,component:ox(e,YT.yS.DROPPED),"data-sumo-test":"parsers-parsedevents-category-dropped"}];return T.createElement(R.ExpansionPanel.Panel,Object.assign({id:YT.tf},sx(e,"parsedEvents")),T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"parsed-events"},T.createElement(qt.Text,{variant:"subtitle","data-sumo-test":"parsed-title"},Ge.j.get("parsers.parsedEvents"))),T.createElement(R.ExpansionPanel.Details,{"data-sumo-test":"parsers-parsedevents-maincategories"},T.createElement(qt.Tabs,{tabs:i})))};var cx=i(26084),dx=i.n(cx),ux=i(36346),px=i.n(ux),hx=i(74089),mx=i.n(hx);const gx=e=>{const{query:t,fullWidth:i,readOnly:r,disableAutocomplete:n,placeholder:a,key:s,dataSumoTest:o,runQuery:l,handleSearchQueryChange:c}=e,d=t||"",u=a||Ge.j.get("csiem.placeholders.logSearch"),p=(0,T.useCallback)(((e,t)=>{r||(c(e),t&&l&&l())}),[c,l,r]),h=(0,T.useCallback)((e=>p(e,!0)),[p]);return T.createElement("div",{key:s,className:Wt()(mx().sumoQuery,i?"":mx().sumoQueryRegular),"data-sumo-test":o},T.createElement("div",{className:mx().sumoQueryIcon},Ge.j.get("parsers.sumoQueryIcon")),T.createElement("div",{className:Wt()(mx().sumoQueryInput,r?mx().sumoQueryInputReadOnly:"")},T.createElement(f.QueryInput,{queryString:d,queryType:f.QueryTypes.LOGS,placeholder:u,readOnly:r,disableAutocomplete:n,updateQueryString:p,queryStringClearChanged:!0,onSubmit:h})))};var yx=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};const vx=e=>{var{isWaitingForSumoQueryResults:t}=e,i=yx(e,["isWaitingForSumoQueryResults"]);return T.createElement(qt.Dialog,{open:i.showSumoQueryDialog,className:px().sumoQueryDialog},T.createElement(qt.Dialog.Title,null,Ge.j.get("parsers.sampleLogsHeader")),T.createElement(qt.Dialog.Content,{className:px().dialogContent},T.createElement(gx,{runQuery:i.onActionRunQuery,handleSearchQueryChange:i.handleSearchQueryChange,dataSumoTest:"parsers-sumoquery-input"}),i.error&&T.createElement("div",{className:px().errorRow},T.createElement(qt.InlineNotification,{text:i.error,status:"error"})),T.createElement("div",{className:px().controls},T.createElement("div",{className:px().controlRow},T.createElement("div",{className:px().inputs},T.createElement(qt.TextField,{label:Ge.j.get("parsers.timeRange"),onChange:i.updateQueryTimeRange,value:i.sumoTimeRange,className:px().timeRangeInput,optional:!0,"data-sumo-test":"parsers-sumoquery-timerange"}),T.createElement(qt.TextField,{label:Ge.j.get("parsers.numMessages"),onChange:i.updateQueryNumElements,value:i.sumoNumElements,optional:!0,className:px().numMessagesInput,"data-sumo-test":"parsers-sumoquery-nummessages"})),T.createElement(qt.FeedbackButton,{color:"primary",feedbackState:t?"processing":"default",feedbackText:{default:Ge.j.get("parsers.search")},onClick:i.onActionRunQuery,disabled:!i.sumoQuery.length,"data-sumo-test":"parsers-sumoquery-runquery-btn"}))),i.showZeroResults&&""===i.error&&T.createElement("div",{className:px().zeroResultsRow},T.createElement(qt.Text,{className:px().zeroResultsText},Ge.j.get("parsers.sumoQueryZeroResults"))),T.createElement(Ax,{readOnly:!0,logMessages:i.queryResults,title:Ge.j.get("parsers.logMessages"),emptyStateHint:i.showZeroResults?"":Ge.j.get("parsers.useSumoQueryToGetLogs")})),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:i.onActionCancel,"data-sumo-test":"parsers-sumoquery-cancel-btn"},Ge.j.get("parsers.cancel")),T.createElement(qt.Button,{color:"primary",disabled:t||!i.queryResults.length,onClick:i.onActionGetLogs,"data-sumo-test":"parsers-sumoquery-getlogs-btn"},Ge.j.get("parsers.ok"))))};var fx=i(21051),_x=i.n(fx);const Sx=e=>T.createElement(T.Fragment,null,e.isSaveLogs?function(e){const t=e.hasFileNameError||!e.logsFileName||""===e.logsFileName;return T.createElement(qt.Dialog,{open:!0,onClose:e.cancelLogSave},T.createElement(qt.Dialog.Title,null,Ge.j.get("parsers.saveLogs")),T.createElement(qt.Dialog.Content,{className:_x().dialogContent},T.createElement(qt.TextField,{className:_x().nameEntry,label:Ge.j.get("parsers.name"),value:e.existingSaveFileName?e.existingSaveFileName:"",fullWidth:!0,rows:1,onChange:e.setSaveLogsName,error:e.hasFileNameError,"data-sumo-test":"parsers-saveload-name",hintText:e.hasFileNameError?Ge.j.get("parsers.validCharactersInFileName"):""})),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:()=>e.cancelLogSave(),"data-sumo-test":"parsers-saveload-save-cancel-btn"},Ge.j.get("parsers.cancel")),T.createElement(qt.Button,{color:"primary",disabled:t,onClick:()=>e.saveLogs(!0),"data-sumo-test":"parsers-saveload-save-btn"},Ge.j.get("parsers.save"))))}(e):"",e.isLoadLogs?function(e){const t=[{field:"name",headerName:Ge.j.get("parsers.fileName"),minWidth:180,isResizable:!1}],i={isEnabled:!0,actions:{delete:{show:!0,icon:"trash",onClick:(t,i)=>{i.name&&e.showDeleteLogs(i.name)}}}};return T.createElement(qt.Dialog,{open:!0,onClose:e.cancelLogSave},T.createElement(qt.Dialog.Title,null,Ge.j.get("parsers.importLogsHeader")),T.createElement(qt.Text,{className:_x().subTitle,variant:"subtitle"},Ge.j.get("parsers.importLogsSubHeader")),T.createElement(qt.Dialog.Content,{className:_x().dialogContent},T.createElement(qt.SearchTable,{className:_x().searchTable,columnOptions:t,data:e.listOfSavedLogs,searchOptions:{isEnabled:!0,searchPlaceHolderText:Ge.j.get("parsers.searchLogs")},gridOptions:{rowActionConfig:i,paginationPageSize:5,noScrollOnPageChange:!0,onTableInit:t=>e.tableInit(t),onRowClicked:t=>{e.loadPreviewLogs(t.data.name)}},"data-sumo-test":"parsers-saveload-searchtable"}),T.createElement("div",{className:_x().previewEditor},T.createElement(Ax,{readOnly:!0,logMessages:e.previewLogText,title:Ge.j.get("parsers.previewLogs"),emptyStateHint:Ge.j.get("parsers.emptyLoadSavedLogs")}))),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:()=>e.cancelLogLoad(),"data-sumo-test":"parsers-saveload-load-cancel-btn"},Ge.j.get("parsers.cancel")),T.createElement(qt.Button,{color:"primary",disabled:!e.previewLogText.length,onClick:()=>e.importSavedLogs(),"data-sumo-test":"parsers-saveload-load-getlogs-btn"},Ge.j.get("parsers.getLogs"))))}(e):"");var bx=i(26727),Ex=i.n(bx),Tx=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};var xx=i(53736),Cx=i.n(xx);const Ax=({logMessages:e,onChange:t=(()=>null),title:i,readOnly:r,emptyStateHint:n,buttonProps:a})=>{let s=null;return a&&(s=T.createElement("div",null,a.map(((e,t)=>T.createElement(qt.TextButton,{key:t,onClick:e.callback,disabled:e.disabled,className:Cx().headerButton},e.text))))),T.createElement(qt.Card,{className:Cx().logMessageSnippetContainer},T.createElement(qt.Card.Header,{border:!0,className:Cx().header},T.createElement(qt.Text,null,i),s),T.createElement(qt.Card.Content,{padded:!0,className:Cx().logMessageSnippets},e.length?e.map((({message:i},n)=>T.createElement(R.LogMessageSnippet,{key:`lms-${n}`,readOnly:r,value:i,label:String(n+1),onChange:i=>t(((e,t,i)=>{const r=e.slice();return r[t]=Object.assign(Object.assign({},r[t]),{message:i}),r})(e,n,i.target.value)),onDelete:()=>t(((e,t)=>e.filter(((e,i)=>i!==t)))(e,n))}))):T.createElement(qt.Text,{className:Cx().emptyStateHint},n)))};class wx extends T.Component{constructor(e){super(e),this.onChangePastedLogs=(e,t,i)=>{const r=!(0,Mo.Z)(i,this.state.initialPastedLogs);this.setState({pastedLogs:i,arePastedLogsDirty:r})},this.onOK=()=>{this.props.onPasteLogsOK(this.state.pastedLogs,this.state.brokenLogMessages),this.setState({pastedLogs:"",brokenLogMessages:[]})},this.onCancel=()=>{this.setState({pastedLogs:"",brokenLogMessages:[]}),this.props.onPasteLogsCancel()},this.fetchBrokenMessages=()=>{this.setState({isFetchingBrokenLogs:!0,brokenLogsFetchError:null},(()=>(({logs:e,breakingRegex:t})=>(0,D.legacyHttpPost)("/api/v1/breakLogs/",{logs:e,breakingRegex:t}))({logs:this.state.pastedLogs,breakingRegex:this.props.breakerRegEx}).then((e=>{this.setState({brokenLogMessages:e.messages,isFetchingBrokenLogs:!1,brokenLogsFetchError:null,arePastedLogsDirty:!1,initialPastedLogs:this.state.pastedLogs})}),(e=>{this.setState({brokenLogMessages:[],isFetchingBrokenLogs:!1,brokenLogsFetchError:(0,re.getFirstErrorMessage)(e)})}))))},this.state={pastedLogs:e.pastedLogs,initialPastedLogs:"",arePastedLogsDirty:!1,brokenLogMessages:[],brokenLogsFetchError:null}}renderLogMessageSnippetContainer(){return T.createElement(Ax,{title:Ge.j.get("parsers.previewLogs"),readOnly:!0,logMessages:this.state.brokenLogMessages,onChange:e=>{this.setState({brokenLogMessages:e})}})}renderControls(){const e=this.props.breakerType===YT.TF.CUSTOM_REGEX;return T.createElement("div",{className:Ex().controls},T.createElement("div",{className:Ex().breakerRegexControls},T.createElement(qt.Select,{value:this.props.breakerType,label:Ge.j.get("parsers.breaker"),handleChange:this.props.selectBreakerType,className:Ex().breakerType,"data-sumo-test":"parsers-pastelogs-breaker-select"},YT.Wr.map((e=>T.createElement(qt.Select.Item,{value:e.value,key:e.value,"data-sumo-test":"parsers-pastelogs-choices-"+e.value},e.label)))),e&&T.createElement(qt.TextField,{fullWidth:!0,className:Ex().customRegex,label:Ge.j.get("parsers.breakerRegex"),onChange:this.props.updatePasteLogsBreakerRegEx,value:this.props.breakerRegEx,optional:!0,"data-sumo-test":"parsers-pastelogs-breaker-text"})),T.createElement(qt.FeedbackButton,{color:"primary",feedbackState:this.state.isFetchingBrokenLogs?"processing":"default",feedbackText:{default:Ge.j.get("parsers.breakMessages")},onClick:this.fetchBrokenMessages,"data-sumo-test":"parsers-pastelogs-feedback-btn",disabled:!this.state.arePastedLogsDirty}))}renderPasteLogsCodeEditor(){return T.createElement(qt.Card,{className:Ex().rawLogsContainer},T.createElement(qt.Card.Header,{border:!0,className:Ex().header},T.createElement(qt.Text,null,Ge.j.get("parsers.rawLogs"))),T.createElement(qt.Card.Content,{className:Ex().logSnippets},T.createElement(qt.CodeEditor,{"data-sumo-test":"code-editor",width:"100%",height:"180px",value:this.props.pastedLogs,options:{readOnly:!1,lineNumbers:!0,mode:"text/plain"},onChange:this.onChangePastedLogs,resetCursorOnSet:!1,readOnly:!1})))}render(){return T.createElement(qt.Dialog,{open:this.props.showPasteLogsDialog},T.createElement(qt.Dialog.Title,{className:Ex().dialogTitle},Ge.j.get("parsers.pasteLogsHeader")),T.createElement(qt.Dialog.Content,{className:Ex().dialogContent},this.renderPasteLogsCodeEditor(),this.renderControls(),this.renderLogMessageSnippetContainer()),T.createElement(qt.Dialog.Actions,null,T.createElement(qt.Button,{color:"secondary",onClick:()=>this.onCancel()},Ge.j.get("parsers.cancel")),T.createElement(qt.Button,{color:"primary",disabled:!this.state.brokenLogMessages.length,onClick:()=>this.onOK()},Ge.j.get("parsers.ok"))))}}var Ix=i(9318),Rx=i.n(Ix),Dx=i(21317),Ox=i.n(Dx);const Nx=e=>{const{buttons:t,readOnly:i,code:r,onChange:n,title:a,showLineNumber:s=!0}=e;let o=null;t&&(o=t.map(((e,t)=>T.createElement(qt.TextButton,{key:t,onClick:e.callback,className:Ox().textButton},e.text))));const l={lineNumbers:s,mode:"text/plain"};return T.createElement("div",{className:Ox().enhancedEditor,"data-sumo-test":"enhanced-editor-comp"},T.createElement(R.ExpansionPanel.Panel,{defaultExpanded:!0},T.createElement(R.ExpansionPanel.Summary,{className:Ox().summary,"data-sumo-test":"factor-expressions-summary"},T.createElement(qt.Text,{"data-sumo-test":"factor-expressions-title"},a),T.createElement("div",{className:Ox().buttons},o)),T.createElement(R.ExpansionPanel.Details,{className:Ox().codeEditor},T.createElement(qt.CodeEditor,{"data-sumo-test":"code-editor",width:"100%",height:e.height?e.height:"200px",value:r,options:l,onChange:n,resetCursorOnSet:!1,autoCursor:!1,readOnly:i}))))};class Mx extends T.Component{constructor(e){super(e),this.parseLogs=()=>{const e=this.props.parserName.trim();this.setState({fetchingResults:!0,backendError:!1,backendErrorString:void 0},(()=>{const t={description:this.props.parserDescription,name:e.length?e:null,stanzas:this.props.parserConfig.stanzas,localStanzas:this.props.parserConfig.localStanzas?this.props.parserConfig.localStanzas:"",families:null,isPartial:!1,type:"ParsersLibraryParser"};(({parentFolderId:e,logs:t,theParserParams:i})=>Tx(void 0,void 0,void 0,(function*(){try{const r={events:{messages:t},parentFolderId:e,parser:i};return(0,D.legacyHttpPost)("/api/v1/parserTester/",r)}catch(e){return Promise.reject(e)}})))({parentFolderId:this.props.parentFolderId,logs:this.props.parserConfig.logMessages,theParserParams:t}).then((e=>{this.setState({fetchingResults:!1},(()=>this.props.setParsedEvents(e.results)));const t=document.getElementById(YT.tf);return t&&t.scrollIntoView(),e})).catch((e=>{this.setState({fetchingResults:!1,backendError:!0,backendErrorString:e.response?(0,re.getFirstErrorMessage)(e):e.message})}))}))},this.onChangeStanzas=(e,t,i)=>{this.props.parserConfig.isSystem||this.props.handleStanzasChange(i)},this.onChangeLocalStanzas=(e,t,i)=>{this.props.handleLocalStanzasChange(i)},this.onSelectSumoQuery=()=>{this.props.onSelectSumoQuery()},this.onSelectPasteLogs=()=>{this.props.showPasteLogsDialog()},this.handleCloseError=()=>{this.setState({backendError:!1})},this.stanzasCodeEditorHeight=this.determineCodeEditorHeight(this.props.parserConfig.stanzas),this.localStanzasCodeEditorHeight=this.determineCodeEditorHeight(this.props.parserConfig.localStanzas),this.buttons=[{text:Ge.j.get("parsers.saveMessages"),callback:e.directSaveLogs,disabled:!0,id:"save"},{text:Ge.j.get("parsers.saveMessagesAs"),callback:e.showSaveLogsAsDialog,disabled:!0,id:"saveAs"}],this.state={backendError:!1,backendErrorString:"",fetchingResults:!1}}renderLogEditorFooter(){const e={default:Ge.j.get("parsers.parseLogs"),success:Ge.j.get("parsers.parseLogs"),fail:""};return T.createElement("div",{className:Rx().logEditorFooter},T.createElement(qt.FeedbackButton,{className:Wt()(Rx().buttonContainer),color:"primary",size:"regular",onClick:this.parseLogs,feedbackText:e,feedbackState:this.state.fetchingResults?"processing":"default",disabled:!(this.props.parserConfig.logMessages.length>0),"data-sumo-test":"parsers-testparser-parselogs-btn"}))}setButtonsEnabledness(){const e=!this.props.parserConfig.logMessages.length||!this.props.parserConfig.areLogMessagesDirty;for(const t of this.buttons)t.disabled=e,"save"!==t.id||this.props.saveAsOptionEnabled||(t.disabled=!0)}renderSampleLogsContainer(){let e=Ge.j.get("parsers.logMessages");return this.props.logFileNameDisplay&&this.props.parserConfig.logMessages.length&&(e+=" ( "+this.props.logFileNameDisplay+" )"),this.setButtonsEnabledness(),T.createElement(Ax,{title:e,logMessages:this.props.parserConfig.logMessages,emptyStateHint:Ge.j.get("parsers.emptyLogs"),onChange:this.props.onSampleLogsChange,buttonProps:this.buttons})}determineCodeEditorHeight(e){let t="200px";if("view"!==this.props.crudMode)return t;const i=e?e.split("\n").length:0;if(i>12){t=i*18<540?18*i+"px":"540px"}return t}render(){const e="view"===this.props.crudMode,t=this.props.parserConfig.isSystem;return T.createElement(T.Fragment,null,T.createElement(qt.Toast.CriticalToast,{open:this.state.backendError,message:this.state.backendErrorString,onClose:this.handleCloseError,"data-sumo-test":"parsers-testparser-backend-error-toast"}),T.createElement(R.ExpansionPanel.Panel,{defaultExpanded:this.props.defaultExpanded,onChange:this.props.onExpansionPanelStateChange},T.createElement(R.ExpansionPanel.Summary,{"data-sumo-test":"configuration"},e&&T.createElement(qt.Text,{variant:"subtitle","data-sumo-test":"configuration-title"},Ge.j.get("parsers.configuration")),!e&&T.createElement(qt.Text,{variant:"subtitle"},Ge.j.get("parsers.testParser"))),T.createElement(R.ExpansionPanel.Details,null,!e&&T.createElement("span",null,T.createElement(qt.Text,{variant:"subtitle"},Ge.j.get("parsers.configuration"))),T.createElement("div",{className:Rx().editorBlock},T.createElement(Nx,{title:t?Ge.j.get("parsers.localConfig"):Ge.j.get("parsers.parserConfiguration"),code:t?this.props.parserConfig.localStanzas:this.props.parserConfig.stanzas,readOnly:e,onChange:t?this.onChangeLocalStanzas:this.onChangeStanzas,"data-sumo-test":"parsers-testparser-local-config",height:t?this.localStanzasCodeEditorHeight:this.stanzasCodeEditorHeight})),t&&T.createElement("div",{className:Rx().editorBlock},T.createElement(Nx,{title:Ge.j.get("parsers.systemConfig"),code:this.props.parserConfig.stanzas,readOnly:!0,onChange:this.onChangeStanzas,height:this.stanzasCodeEditorHeight,"data-sumo-test":"parsers-testparser-system-config"})),T.createElement("hr",{className:Wt()(Rx().separatingLine)}),T.createElement("div",{className:Wt()(Rx().labelValueGroup,Rx().labelValueGroupOneColumn)},T.createElement("span",null,T.createElement(qt.Text,{variant:"subtitle"},Ge.j.get("parsers.sampleLogs")))),T.createElement("div",{className:Wt()(Rx().fetchLogsContainer)},T.createElement(qt.Text,{className:Wt()(Rx().fetchLogs),variant:"text"},Ge.j.get("parsers.fetchSampleLogsHelp")),T.createElement(qt.TextLink,{className:Wt()(Rx().fetchLogs),onClick:this.onSelectSumoQuery,"data-sumo-test":"parsers-testparser-sumoquery"},Ge.j.get("parsers.sumoLogSearch")),T.createElement(qt.TextLink,{className:Wt()(Rx().fetchLogs),onClick:this.props.showLoadLogsDialog,"data-sumo-test":"parsers-testparser-loadlogs"},Ge.j.get("parsers.importFromSaved")),T.createElement(qt.TextLink,{className:Wt()(Rx().fetchLogs),onClick:this.onSelectPasteLogs,"data-sumo-test":"parsers-testparser-fetchlogs"},Ge.j.get("parsers.pasteLogs"))),T.createElement("div",{className:Wt()(Rx().labelValueGroup,Rx().labelValueGroupFiveColumn)},!1),T.createElement("div",{className:Wt()(Rx().labelValueGroup,Rx().labelValueGroupFiveColumn)},!1),T.createElement("div",{className:Wt()(Rx().labelValueGroup,Rx().labelValueGroupFiveColumn)},!1),this.renderSampleLogsContainer(),this.renderLogEditorFooter())))}}var kx=i(26301),Lx=i(38869),Px=i(30339);var Fx=i(17352),Ux=i(26964);const Vx="/api/v1/parsers/",Bx=(e,t)=>(0,D.legacyHttpPost)(Vx,e,{params:{parentId:t}});var $x=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Hx=e=>({payload:{formState:e},type:Ux.r.MOVE_STATE_TO_STORE}),Wx=e=>({type:Ux.r.FETCH_PARSER_SUCCESS,payload:{resource:e}}),qx=e=>({type:Ux.r.TOGGLE_EXPANSION_PANEL_IS_EXPANDED,payload:{stateKey:e}}),jx=({version:e,requestBody:t,parentId:i,parserId:r})=>(0,tb.Z)(e)?Bx(Object.assign(Object.assign({},t),{type:"ParsersLibraryParser"}),i):((e,t)=>(0,D.legacyHttpPut)(`${Vx}${t}`,e))(Object.assign(Object.assign({},t),{type:"ParsersLibraryParserUpdate",version:e}),r),Qx=({state:e,props:t})=>i=>$x(void 0,void 0,void 0,(function*(){i({type:Ux.r.SAVE_PARSER_REQUEST});const r=t.params.crudAction===he.Qr.edit;try{const n=yield jx({version:t.meta.resource?t.meta.resource.version:void 0,requestBody:{description:e.basicDetails.description,name:e.basicDetails.name,stanzas:e.parserConfig.stanzas,localStanzas:e.parserConfig.localStanzas,families:null,isPartial:!1},parentId:t.params.parentId,parserId:t.params.contentId});(0,he.Q$)({contentType:he.wF.parser,type:r?"update":"create"}),i((0,he.st)(Ux.r.SAVE_PARSER_SUCCESS,n))}catch(e){const t=(0,re.getFirstErrorMessage)(e)||e.message;(0,R.showCriticalNotification)({message:t}),i({type:Ux.r.SAVE_PARSER_FAILURE,payload:{errorMessage:t}})}}));var zx=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Gx="/api/v1/parserTester/testFiles";class Kx extends T.Component{constructor(e){super(e),this.loadParser=()=>{const{contentId:e}=this.props.params;this.setState(Object.assign(Object.assign({},this.state),{fetchingParser:{isInProgress:!0,errorMessage:null}}),(()=>zx(this,void 0,void 0,(function*(){try{const t=yield(0,D.legacyHttpGet)("/api/v1/parsers/"+e);this.props.dispatchParserFetchSuccess(t),this.setState({fetchingParser:{isInProgress:!1},basicDetails:Object.assign(Object.assign({},this.state.basicDetails),{name:t.name,description:t.description}),parserConfig:Object.assign(Object.assign({},this.state.parserConfig),{stanzas:t.stanzas?t.stanzas:"",localStanzas:t.localStanzas?t.localStanzas:"",isSystem:!!t.isSystem,areLogMessagesDirty:!1,logMessages:[]}),version:t.version},(()=>this.props.moveStateToStore(this.state)))}catch(e){const t=(0,re.getFirstErrorMessage)(e);(0,R.showCriticalNotification)({message:t}),this.setState({fetchingParser:{isInProgress:!1,errorMessage:t}})}}))))},this.handleStanzasChange=e=>{this.setState((t=>({parserConfig:Object.assign(Object.assign({},t.parserConfig),{stanzas:e})})))},this.handleLocalStanzasChange=e=>{this.setState((t=>({parserConfig:Object.assign(Object.assign({},t.parserConfig),{localStanzas:e})})))},this.processQueryResults=e=>{const t=e.message?e.message.messages.map((e=>({message:e._raw}))):[],i=e.status&&e.status.errors?e.status.errors.pendingErrors?e.status.errors.pendingErrors[0]:e.status.errors[0].message:"";this.setState({queryDetails:Object.assign(Object.assign({},this.state.queryDetails),{isWaitingForSumoQueryResults:!1,queryResults:t,queryHasZeroResults:0===t.length,queryError:i})})},this.doTheQuery=()=>{!function(e,t){const{sumoQuery:i,sumoTimeRange:r,sumoNumElements:n}=e,a={offset:0,length:n},s=(new ht.TimeRangeUtil).parseTimeRangeValue(r),o={types:[F.SearchQueryType.MESSAGES],query:i,timeRange:s,timeZone:(0,ht.getUserTimeZone)(),paginationInfo:a},l=new Qo.xQ;o_.searchQueryExecutionService.run(o,l.pipe((0,Lx.h)({type:F.RunSearchActionType.STOP})),(e=>e.pipe((0,kx.P)((e=>e.state===F.SearchStatus.DONE_GATHERING_RESULTS))))).pipe((0,Ug.h)((e=>!!e.message||e.status.state===F.SearchStatus.DONE_GATHERING_RESULTS)),(0,Px.R)(l),(0,Fg.K)((e=>(0,Mg.of)({status:{errors:[e],searchedTimeRange:{startMillis:0,endMillis:1},sessionIdString:"foo",state:F.SearchStatus.DONE_GATHERING_RESULTS},message:{messages:[],summary:{facets:[],fields:[]}}})))).subscribe((e=>{const i=e.message&&e.message.messages?e:{status:e.status,message:{summary:{facets:[],fields:[]},messages:[]}};t(i)}))}(this.state.queryDetails,this.processQueryResults)},this.runQuery=()=>{this.setState({queryDetails:Object.assign(Object.assign({},this.state.queryDetails),{isWaitingForSumoQueryResults:!0,queryResults:[],queryHasZeroResults:!1,queryError:""})},this.doTheQuery)},this.getQueryLogs=()=>{this.setState({parserConfig:Object.assign(Object.assign({},this.state.parserConfig),{logMessages:this.state.queryDetails.queryResults,areLogMessagesDirty:!0}),queryDetails:Object.assign(Object.assign({},this.state.queryDetails),{showSumoQueryDialog:!1,queryHasZeroResults:!1,isWaitingForSumoQueryResults:!1}),importLogName:"",logFileNameDisplay:""})},this.cancelQueryAction=()=>{this.setState((e=>({queryDetails:Object.assign(Object.assign({},e.queryDetails),{showSumoQueryDialog:!1,queryHasZeroResults:!1,isWaitingForSumoQueryResults:!1})})))},this.showSumoQueryDialog=()=>{this.setState((e=>({queryDetails:Object.assign(Object.assign({},e.queryDetails),{showSumoQueryDialog:!0,queryHasZeroResults:!1,sumoQuery:"",queryResults:[],queryError:""})})))},this.handleSearchQueryChange=e=>{this.setState((t=>({queryDetails:Object.assign(Object.assign({},t.queryDetails),{sumoQuery:e})})))},this.updateQueryTimeRange=e=>{const t=e.target.value;this.setState((e=>({queryDetails:Object.assign(Object.assign({},e.queryDetails),{sumoTimeRange:t})})))},this.updateQueryNumElements=e=>{const t=e.target.value;this.setState((e=>({queryDetails:Object.assign(Object.assign({},e.queryDetails),{sumoNumElements:t})})))},this.setParsingDetails=(e,t)=>{const i=e.target.checked;t===YT.t9.LOG_MESSAGES&&this.setState((e=>({subCategories:Object.assign(Object.assign({},e.subCategories),{log:i})}))),t===YT.t9.PARSING_TIME&&this.setState((e=>({subCategories:Object.assign(Object.assign({},e.subCategories),{time:i})}))),t===YT.t9.TRANSFORMS&&this.setState((e=>({subCategories:Object.assign(Object.assign({},e.subCategories),{transforms:i})}))),t===YT.t9.EVENT_DETAILS&&this.setState((e=>({subCategories:Object.assign(Object.assign({},e.subCategories),{events:i})}))),t===YT.t9.FACTORS&&this.setState((e=>({subCategories:Object.assign(Object.assign({},e.subCategories),{factors:i})})))},this.setParsedEvents=e=>{this.setState({parsedEvents:e})},this.onNameChange=e=>{this.setState((t=>({basicDetails:Object.assign(Object.assign({},t.basicDetails),{name:e})})))},this.showPasteLogsDialog=()=>{this.setState((e=>({pasteLogsDetails:Object.assign(Object.assign({},e.pasteLogsDetails),{showPasteLogsDialog:!0})})))},this.okPasteLogs=(e,t)=>{this.setState({pasteLogsDetails:Object.assign(Object.assign({},this.state.pasteLogsDetails),{pastedLogs:e,showPasteLogsDialog:!1}),parserConfig:Object.assign(Object.assign({},this.state.parserConfig),{logMessages:t,breakerRegex:this.state.pasteLogsDetails.breakerRegEx,areLogMessagesDirty:!0}),importLogName:"",logFileNameDisplay:""})},this.cancelPasteLogs=()=>{this.setState((e=>({pasteLogsDetails:Object.assign(Object.assign({},e.pasteLogsDetails),{showPasteLogsDialog:!1})})))},this.selectBreakerType=e=>{let t="";e.target.value===YT.TF.NEWLINE?t="\\n":e.target.value===YT.TF.JSON&&(t="(?<=\\})\\s*(?=\\{)"),this.setState((i=>({pasteLogsDetails:Object.assign(Object.assign({},i.pasteLogsDetails),{breakerType:e.target.value,breakerRegEx:t})})))},this.updatePasteLogsBreakerRegEx=e=>{const t=e.target.value;this.setState((e=>({pasteLogsDetails:Object.assign(Object.assign({},e.pasteLogsDetails),{breakerRegEx:t})})))},this.onDescriptionChange=e=>{this.setState((t=>({basicDetails:Object.assign(Object.assign({},t.basicDetails),{description:e})})))},this.saveParser=()=>{this.validateParserDetailsForSave()&&this.props.saveParser({state:this.state,props:this.props})},this.validateParserDetailsForSave=()=>{let e=!0;return 0===(this.state.parserConfig.stanzas?this.state.parserConfig.stanzas.trim().length:0)&&((0,R.showCriticalNotification)({message:Ge.j.get("parsers.needStanzas")}),e=!1),e},this.doParsedEventsExist=()=>this.state.parsedEvents["Dropped Events"].length>0||this.state.parsedEvents["Events With Errors"].length>0||this.state.parsedEvents["Parsed Events"].length>0||this.state.parsedEvents["Unparsed Events"].length>0,this.showSaveLogsAsDialog=()=>{if("new"===this.props.params.crudAction)this.setState({shouldShowSaveLogsAs:!1,shouldShowNeedToSaveParserBeforeLogs:!0});else{const e=this.state.importLogName?this.state.importLogName+" copy":"";this.setState({saveLogsSaveName:e,shouldShowSaveLogsAs:!0,saveNameError:!1})}},this.setSaveLogsName=e=>{const t=new RegExp("^[a-zA-Z0-9_\\- ]+$").test(e.target.value);this.setState({saveNameError:!t,saveLogsSaveName:e.target.value})},this.handleSaveOverwrite=e=>{this.setState({shouldShowSaveLogsOverwriteWarningDialog:!1}),e?this.doSaveLogs():this.setState({shouldShowSaveLogsAs:!0})},this.showDeleteLogs=e=>{this.setState({showDeleteLogs:!0,importLogName:e,shouldShowLoadLogs:!1})},this.handleMustSaveParserFirstDone=()=>{this.setState({shouldShowSaveLogsAs:!1,shouldShowNeedToSaveParserBeforeLogs:!1})},this.deleteLogsFile=e=>zx(this,void 0,void 0,(function*(){if(e){const e=encodeURIComponent(this.state.importLogName);yield(0,D.legacyHttpDelete)(`${Gx}/`+e+"?parserPath="+this.props.params.contentId),this.getListOfLogs().then((e=>{const t=[];for(const i of e)t.push({name:i});(0,R.showCasualNotification)({message:Ge.j.get("parsers.deletedLogFile",this.state.importLogName)}),this.setState({listOfSavedLogs:t,previewOfLoadedLogsText:[],shouldShowLoadLogs:!0,importLogName:"",showDeleteLogs:!1})}))}else this.setState({showDeleteLogs:!1,shouldShowLoadLogs:!0})})),this.saveLogs=e=>{e&&this.state.saveLogsSaveName===this.state.importLogName?this.setState({shouldShowSaveLogsOverwriteWarningDialog:!0,shouldShowSaveLogsAs:!1,saveNameError:!1}):this.doSaveLogs()},this.doSaveLogs=()=>zx(this,void 0,void 0,(function*(){this.setState({parserConfig:Object.assign(Object.assign({},this.state.parserConfig),{areLogMessagesDirty:!1,logMessagesInitialLoad:this.state.parserConfig.logMessages}),shouldShowSaveLogsAs:!1,shouldShowNeedToSaveParserBeforeLogs:!1,logFileNameDisplay:this.state.saveLogsSaveName,previewLogFileName:this.state.saveLogsSaveName,importLogName:this.state.saveLogsSaveName});const e={messages:this.state.parserConfig.logMessages};try{const t=encodeURIComponent(this.state.saveLogsSaveName),i=Gx+"/"+t+"?parserPath="+this.props.params.contentId;yield(0,D.legacyHttpPost)(i,e),(0,R.showCasualNotification)({message:Ge.j.get("parsers.logsSaved",this.state.saveLogsSaveName)})}catch(e){(0,R.showCriticalNotification)({message:(0,re.getFirstErrorMessage)(e)})}})),this.directlySaveLogs=()=>{this.setState({saveLogsSaveName:this.state.previewLogFileName?this.state.previewLogFileName:this.state.saveLogsSaveName},(()=>{this.saveLogs(!1)}))},this.cancelLogSave=()=>{this.setState({shouldShowSaveLogsAs:!1})},this.cancelLogLoad=()=>{this.setState({shouldShowLoadLogs:!1})},this.showLoadLogsDialog=()=>{this.getListOfLogs().then((e=>{const t=[];for(const i of e)t.push({name:i});this.setState({listOfSavedLogs:t,previewOfLoadedLogsText:[],shouldShowLoadLogs:!0})}))},this.getListOfLogs=()=>zx(this,void 0,void 0,(function*(){return yield(0,D.legacyHttpGet)(`${Gx}?parserPath=`+this.props.params.contentId+"&queryString=")})),this.loadPreviewLogs=e=>zx(this,void 0,void 0,(function*(){const t=encodeURIComponent(e),i=`${Gx}/`+t+"?parserPath="+this.props.params.contentId+"&queryString=",r=yield(0,D.legacyHttpGet)(i);this.setState({previewLogFileName:e},(()=>{this.setState({previewOfLoadedLogsText:r.messages})}))})),this.getLogs=()=>zx(this,void 0,void 0,(function*(){this.setState({shouldShowLoadLogs:!1,importLogName:this.state.previewLogFileName,logFileNameDisplay:this.state.previewLogFileName});try{this.setState((e=>({parserConfig:Object.assign(Object.assign({},e.parserConfig),{logMessages:this.state.previewOfLoadedLogsText,logMessagesInitialLoad:this.state.previewOfLoadedLogsText,areLogMessagesDirty:!1})})))}catch(e){(0,R.showCriticalNotification)({message:(0,re.getFirstErrorMessage)(e)})}})),this.tableInit=e=>{this.tableMethods=e},this.handleSampleLogsChange=e=>{const t=!(0,Mo.Z)(e,this.state.parserConfig.logMessagesInitialLoad);this.setState({parserConfig:Object.assign(Object.assign({},this.state.parserConfig),{logMessages:e,areLogMessagesDirty:t})})},this.handleUpdateTabTitle=e=>{Ae.updateViewTitle(e)},this.state=e.formState}componentWillUnmount(){this.props.moveStateToStore(this.state)}renderEditor(){const{showSumoQueryDialog:e,sumoQuery:t,queryResults:i,sumoTimeRange:r,sumoNumElements:n,isWaitingForSumoQueryResults:a,queryHasZeroResults:s,queryError:o=""}=this.state.queryDetails,{showPasteLogsDialog:l,breakerType:c,breakerRegEx:d,pastedLogs:u}=this.state.pasteLogsDetails,p=(0,he.lw)(this.props),h=this.doParsedEventsExist();return T.createElement("div",{className:Wt()(dx().contentBox),onBlur:()=>{this.props.moveStateToStore(this.state)}},T.createElement(Sx,{isAdvancedMode:!0,isSaveLogs:!!this.state.shouldShowSaveLogsAs,setSaveLogsName:this.setSaveLogsName,logsFileName:this.state.saveLogsSaveName,hasFileNameError:!!this.state.saveNameError,saveLogs:this.saveLogs,cancelLogSave:this.cancelLogSave,isLoadLogs:!!this.state.shouldShowLoadLogs,importSavedLogs:this.getLogs,loadPreviewLogs:this.loadPreviewLogs,listOfSavedLogs:this.state.listOfSavedLogs,cancelLogLoad:this.cancelLogLoad,tableInit:this.tableInit,previewLogText:this.state.previewOfLoadedLogsText,existingSaveFileName:this.state.saveLogsSaveName,showDeleteLogs:this.showDeleteLogs}),T.createElement(qt.ConfirmDialog,{title:Ge.j.get("parsers.overwriteDialogTitle"),open:!!this.state.shouldShowSaveLogsOverwriteWarningDialog,onAction:this.handleSaveOverwrite},T.createElement("div",null,Ge.j.get("parsers.overwriteDialogMessage",this.state.saveLogsSaveName))),T.createElement(qt.ConfirmDialog,{title:Ge.j.get("parsers.deleteMessages"),onAction:this.deleteLogsFile,open:!!this.state.showDeleteLogs},T.createElement("div",null,Ge.j.get("parsers.deleteConfirmationDialog",this.state.importLogName))),T.createElement(qt.SimpleDialog,{title:Ge.j.get("parsers.saveParserFirstTitle"),onAction:this.handleMustSaveParserFirstDone,open:!!this.state.shouldShowNeedToSaveParserBeforeLogs},T.createElement("div",null,Ge.j.get("parsers.saveParserFirstBody"))),T.createElement(vx,{isAdvancedMode:!0,showSumoQueryDialog:e,showZeroResults:s&&!a,error:o,isWaitingForSumoQueryResults:a,sumoQuery:t,queryResults:i,sumoTimeRange:r,sumoNumElements:n,onActionRunQuery:this.runQuery,onActionGetLogs:this.getQueryLogs,onActionCancel:this.cancelQueryAction,handleSearchQueryChange:this.handleSearchQueryChange,updateQueryTimeRange:this.updateQueryTimeRange,updateQueryNumElements:this.updateQueryNumElements}),T.createElement(wx,{showPasteLogsDialog:l,pastedLogs:u,onPasteLogsOK:this.okPasteLogs,onPasteLogsCancel:this.cancelPasteLogs,selectBreakerType:this.selectBreakerType,breakerType:c,breakerRegEx:d,updatePasteLogsBreakerRegEx:this.updatePasteLogsBreakerRegEx}),T.createElement(KT,Object.assign({},this.state.basicDetails,{isExpanded:this.props.isExpansionPanelExpanded.basicDetails,onExpansionPanelStateChange:()=>this.props.toggleExpansionPanelIsExpanded("basicDetails"),readOnly:p||!!this.state.parserConfig.isSystem,onNameChange:this.onNameChange,onDescriptionChange:this.onDescriptionChange})),T.createElement(Mx,{defaultExpanded:this.props.isExpansionPanelExpanded.testParser,onExpansionPanelStateChange:()=>this.props.toggleExpansionPanelIsExpanded("testParser"),parserName:this.state.basicDetails.name,parserDescription:this.state.basicDetails.description,parserId:this.props.params.contentId,parentFolderId:this.props.params.parentId,parserConfig:this.state.parserConfig,handleStanzasChange:this.handleStanzasChange,handleLocalStanzasChange:this.handleLocalStanzasChange,setParsedEvents:this.setParsedEvents,onSelectSumoQuery:this.showSumoQueryDialog,showPasteLogsDialog:this.showPasteLogsDialog,crudMode:this.props.params.crudAction,showSaveLogsAsDialog:this.showSaveLogsAsDialog,showLoadLogsDialog:this.showLoadLogsDialog,directSaveLogs:this.directlySaveLogs,saveAsOptionEnabled:!(!this.state.logFileNameDisplay||""===this.state.logFileNameDisplay),onSampleLogsChange:this.handleSampleLogsChange,logFileNameDisplay:this.state.logFileNameDisplay}),h&&T.createElement(lx,{isExpansionPanelExpanded:this.props.isExpansionPanelExpanded,toggleExpansionPanelExpand:this.props.toggleExpansionPanelIsExpanded,mainCategory:this.state.mainCategory,subCategories:this.state.subCategories,parsedEvents:this.state.parsedEvents,selectParsingDetails:this.setParsingDetails}))}render(){return T.createElement(he.QC,{meta:this.props.meta,fetchContent:this.loadParser,contentType:he.wF.parser,updateTabTitle:this.handleUpdateTabTitle,saveContent:this.saveParser,editorStateName:me.name,urlParams:this.props.params,isFetchingContent:!!this.state.fetchingParser.isInProgress,contentFetchFailureMessage:this.state.fetchingParser.errorMessage,isSavingContent:this.props.savingParser.isInProgress,saveContentFailureMessage:this.props.savingParser.errorMessage},this.renderEditor())}}const Yx=(0,Te.connect)(((e,t)=>Ce(e,t)),((e,t)=>(0,Zn.bindActionCreators)(Object.assign({},n),(0,Ee.Lu)(t.params.viewId,e,he.wF.parser))))(Kx);var Zx,Xx,Jx;s.module("sumoApp.csiem",[]).component("parserEditorContainer",(0,re.legacyReactToAngular)(Yx,["params"],[])),function(e){e.InformationModelsLibraryFolder="InformationModelsLibraryFolder",e.InformationModelsLibraryModel="InformationModelsLibraryModel"}(Zx||(Zx={})),function(e){e.Folder="Folder",e.Model="Model"}(Xx||(Xx={})),function(e){e.ModelsLibraryFolderUpdate="ModelsLibraryFolderUpdate",e.ModelsLibraryModelUpdate="ModelsLibraryModelUpdate"}(Jx||(Jx={}));const eC="/api/v1/informationModels",tC=(e,t)=>(0,D.legacyHttpPost)(eC,Object.assign(Object.assign({},e),{type:Zx.InformationModelsLibraryModel}),{params:{parentId:t}});var iC=i(34304),rC=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const nC=e=>t=>{t({type:$v.q.FETCH_DATA_MODEL_REQUEST}),(0,iC.kC)("informationModels",e).then((e=>{t({type:$v.q.FETCH_DATA_MODEL_SUCCESS,payload:{resource:e}})}),(e=>{(0,R.showCriticalNotification)({message:(0,re.getFirstErrorMessage)(e)}),t({type:$v.q.FETCH_DATA_MODEL_FAILURE,payload:{errorMessage:(0,re.getFirstErrorMessage)(e)}})}))},aC=e=>{const{params:t,editorState:i}=e;return e=>rC(void 0,void 0,void 0,(function*(){e({type:$v.q.SAVE_DATA_MODEL_REQUEST});try{let a;a=t.crudAction===he.Qr.new?yield tC((0,Bv.y)(i),t.parentId):yield(r=t.contentId,n=Object.assign(Object.assign({},(0,Bv.y)(i)),{version:i.version}),(0,D.legacyHttpPut)(`${eC}/${r}`,Object.assign(Object.assign({},n),{type:"InformationModelsLibraryModelUpdate"}))),(0,R.showCriticalNotification)({message:t.crudAction===he.Qr.new?Ge.j.get("dataModels.informationModelCreatedSuccessfully"):Ge.j.get("dataModels.informationModelUpdatedSuccessfully"),variant:"success",autoDismiss:!0}),e({type:$v.q.SAVE_DATA_MODEL_SUCCESS,payload:{resource:a}})}catch(t){const i=(0,re.getFirstErrorMessage)(t);(0,R.showCriticalNotification)({message:i}),e({type:$v.q.SAVE_DATA_MODEL_FAILURE,payload:{errorMessage:i}})}var r,n}))},sC=e=>({type:$v.q.UPDATE_MAPPED_SOURCE_TYPES,payload:{mappedSourceTypes:e}}),oC=(e,t)=>({type:$v.q.UPDATE_REQUIRED_FIELDS,payload:{requiredFields:t,factorId:e}}),lC=(e,t)=>({type:$v.q.UPDATE_ALL_FIELDS,payload:{fields:t,factorId:e}}),cC=()=>({type:$v.q.ADD_FACTOR,payload:{id:(0,Re.Z)()}}),dC=e=>({type:$v.q.REMOVE_FACTOR,payload:{id:e}}),uC=(e,t)=>({type:$v.q.UPDATE_FACTOR_TYPE,payload:{factorId:e,factorType:t}}),pC=(e,t)=>({type:$v.q.UPDATE_FACTOR_LABEL,payload:{factorId:e,label:t}}),hC=({target:{name:e,value:t}})=>({type:$v.q.UPDATE_DATA_MODEL_EDITOR_FORM_FIELD_VALUE,payload:{name:e,value:t}}),mC=e=>({type:$v.q.UPDATE_MODEL_FIELDS,payload:{modelFields:e}});var gC,yC=i(94771),vC=i.n(yC),fC=i(43626),_C=i.n(fC);!function(e){e.Identity="Identity",e.Endpoint="Endpoint",e.Network="Network",e.Error="Error",e.Alerts="Alerts",e.Threat="Threat",e.Operational="Operational",e.Application="Application"}(gC||(gC={}));class SC extends T.PureComponent{constructor(e){super(e),this.getError=(e,t)=>{const{clientSideValidationErrors:i}=this.props;return(0,re.get)(i,["modelFactors",e,t])},this.getLabel=(e,t)=>{const{readOnly:i}=this.props,r=Ge.j.get(e);return i?r:t?Ge.j.get("dataModels.optionalLabel",r):r},this.renderModelFactor=(e,t)=>{const{readOnly:i,removeFactor:r,updateFactorType:n,updateFields:a,updateRequiredFields:s,updateFactorLabel:o}=this.props,{fields:l,requiredFields:c,id:d,factorType:u,label:p}=e;return T.createElement("div",{className:_C().modelFactor,key:d},T.createElement("div",{className:_C().factorBody},T.createElement("div",{className:_C().header},T.createElement(qt.TextField,{"data-sumo-test":"factor-label",optional:!0,fullWidth:!0,readOnly:i,onChange:e=>o(d,e.target.value),value:p,error:this.getError(t,"label"),hintText:this.getError(t,"label"),className:_C().factorLabel,label:Ge.j.get("common.label")}),T.createElement(qt.TextField,{"data-sumo-test":"factor-type",optional:!0,fullWidth:!0,multiline:!0,readOnly:i,onChange:e=>n(d,e.target.value),className:_C().factorLabel,value:u,styleProps:{fieldRoot:_C().factorType},label:Ge.j.get("dataModels.factorType"),error:this.getError(t,"factorType"),hintText:this.getError(t,"factorType"),options:this.factorTypes})),T.createElement("div",{className:_C().codeEditorContainer},i&&""===c?T.createElement(T.Fragment,null):T.createElement(R.ChipInputField,{label:this.getLabel("dataModels.requiredFields",!0),placeholder:Ge.j.get("dataModels.chipInputHintText"),value:c,readOnly:i,optional:!0,"data-sumo-test":"required-fields-code-editor",onChange:e=>s(d,e)})),T.createElement("div",{className:_C().codeEditorContainer},i&&""===l?T.createElement(T.Fragment,null):T.createElement(R.ChipInputField,{label:Ge.j.get("dataModels.allOrderedFields"),placeholder:Ge.j.get("dataModels.chipInputHintText"),value:l,readOnly:i,optional:!0,"data-sumo-test":"all-fields-code-editor",onChange:e=>a(d,e)}))),!i&&T.createElement(qt.IconButton,{size:"large",icon:"trash",onClick:()=>r(d),"data-sumo-test":"remove-factor-expression"}))},this.factorTypes=Object.keys(gC).map((e=>({value:e,label:e})))}render(){const{modelFactors:e,addFactor:t,readOnly:i,tooltipText:r}=this.props;if(!i||e.length)return T.createElement(R.ExpansionPanel.Panel,{"data-sumo-test":"factor-editor",defaultExpanded:!0},T.createElement(R.ExpansionPanel.Summary,{classes:{root:_C().summary},"data-sumo-test":"factor-expressions-summary"},T.createElement("div",{className:_C().header},T.createElement(qt.Text,{variant:"textHeavy","data-sumo-test":"factor-expressions"},this.getLabel("dataModels.factorExpressions",!0),T.createElement(qt.Tooltip,{title:r,placement:"right",multiline:!0},T.createElement("span",{className:_C().dataModelFactorExpressionEditorTooltip},T.createElement(qt.Icon,{name:"question-circle",size:"large",color:"blue"})))))),T.createElement(R.ExpansionPanel.Details,{className:_C().dataModelFactorExpressionEditor},e.map(((e,t)=>this.renderModelFactor(e,t))),!i&&T.createElement("div",null,T.createElement(qt.Button,{color:"primary",size:"small",type:"button",icon:"plus",iconPos:"left",onClick:t,"data-sumo-test":"add-factor-expression"},Ge.j.get("dataModels.addFactorExpression")))))}}var bC=i(48209),EC=i(60266),TC=i(14200),xC=i.n(TC);const CC=e=>{const t=e.data.contentType===Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER?qt.IconName.Folder:e.entityIcon;return x().createElement(qt.Icon,{name:t,size:"medium"})},AC=e=>{const{value:t,label:i,optional:r,title:n,name:a,iconType:s,readOnly:o=!1,showLoadingIndicator:l=!1,className:c,errorMessages:d,showErrorMessages:u,pickerIsOpen:p,tableContents:h,updateValue:m,onOpenPickerClicked:g,onChange:y,onClose:v,onErrorClose:f,onBreadcrumbItemClick:_,onRowClick:S,onRowDoubleClick:b}=e,E=s===qt.IconName.LookupTable,T=h.relativePath?h.relativePath:[],C=h.children?h.children.map((e=>{const t=`/${e.relativePath?e.relativePath.map((e=>e.name)).join("/"):""}`;return Object.assign(Object.assign({},e),{relativePath:t})})):[],A={field:"relativePath",headerName:Ge.j.get("common.path"),enableCellTooltip:!0,comparator:(e,t)=>{e&&t&&e.toLowerCase().localeCompare(t.toLowerCase())}},w=(I=s,[{field:"icon",headerName:"",minWidth:48,width:48,undraggable:!0,customCellRenderer:{component:CC,props:e=>({contentType:e.contentType,entityIcon:I})},cellStyle:{textAlign:"center"}},{field:"name",headerName:Ge.j.get("common.name"),minWidth:140,enableCellTooltip:E,comparator:(e,t)=>{e&&t&&e.toLowerCase().localeCompare(t.toLowerCase())}},{field:"description",headerName:Ge.j.get("common.description"),comparator:(e,t)=>{e&&t&&e.toLowerCase().localeCompare(t.toLowerCase())}}]);var I;E&&w.splice(2,0,A);const D={isOpen:p,showAddNew:!1,errorRenderer:()=>u?!!d&&(0,R.getInlineNotificationElements)((0,Xn.getInlineErrorProps)(d,(e=>{f(e)}))):null,tableRenderer:()=>x().createElement(R.LocationPickerDialog.Table,{data:C,columnOptions:w,gridOptions:{showLoadingOverlay:!h.children},onRowClick:S,onRowDoubleClick:b,breadcrumbItems:T,onBreadcrumbAction:_,searchPlaceholder:Ge.j.get("csiem.objectPicker.searchFolderPlaceholder"),isWide:!0}),title:n,initialFolderName:"",submitButtonText:Ge.j.get("common.select"),cancelButtonText:Ge.j.get("common.cancel"),submitButtonState:(0,tb.Z)(d)?Xn.FeedbackStateType.DEFAULT:Xn.FeedbackStateType.FAIL,locationPickerProps:{dialogSize:qt.DialogSizes.Large},onSubmit:y,onClose:v,enterContentNameInputLabel:Ge.j.get("common.name"),newFolderNameInputLabel:Ge.j.get("csiem.objectPicker.folderNameLabel"),newFolderAddButtonText:Ge.j.get("csiem.objectPicker.addNewText"),newFolderCreateButtonText:Ge.j.get("common.create")},O=d.length>0&&!(0,ep.Z)(d[0]),N=O?xC().objectPickerWithError:"";return x().createElement("div",{className:c},p&&x().createElement(R.LocationPickerDialog,Object.assign({},D)),x().createElement("div",{className:Wt()(xC().objectPicker,N)},x().createElement(GT.nv,{fullWidth:!0,error:O,multiline:!0,inputProps:{autoComplete:"object-picker-path-field"},hintText:O?d[0]:"",readOnly:o,label:i,name:a,optional:r,value:t,onChange:m}),!o&&!l&&x().createElement(qt.IconButton,{icon:qt.IconName.Folder,onClick:g}),!o&&l&&x().createElement(qt.Loader,{loaderType:"spinner",isVisible:!0,size:"large"})))};var wC=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};function IC(e,t){return"folder"===e.type&&"folder"!==t.type?-1:"folder"!==e.type&&"folder"===t.type?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:1}var RC=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const DC={folderId:"",tableContents:{},isOpen:!1,errorMessages:[],selectedResource:""},OC=["content:invalid_path","content:not_found"];class NC extends T.Component{constructor(e){super(e),this.state=DC,this._isMounted=!1,this.getIconName=()=>{switch(this.props.contentType){case EC.w.lookupTable:return qt.IconName.LookupTable;default:return qt.IconName.InformationModel}},this.selectAndCloseDialog=()=>{this.props.onChange(this.state.selectedResource);const e=this.props.contentType===EC.w.lookupTable?{folderId:"root"}:{};this.setState(Object.assign(Object.assign({},e),{isOpen:!1,errorMessages:[],selectedResource:""}))},this.onChangeHandler=e=>{if(""===this.state.selectedResource){const e=Ge.j.get(`csiem.contentItemEditorContainer.contentTypeDisplayNames.${this.props.contentType}`);this.setState({errorMessages:[Ge.j.get("csiem.contentItemEditorContainer.errorMessages.resourceNotSelected",e)]})}else this.selectAndCloseDialog()},this.onOpenPickerClicked=()=>{this.props.contentType===EC.w.lookupTable&&this.state.tableContents===DC.tableContents?this.getTableContents():this.state.folderId===DC.folderId&&(this.setState({tableContents:DC.tableContents}),this.getFolderId()),this.setState({isOpen:!0})},this.onClose=()=>{const e=(0,re.isStringBlank)(this.props.value)?{selectedResource:"",folderId:"root"}:{};this.setState(Object.assign({isOpen:!1},e))},this.onErrorClose=e=>{const t=this.state.errorMessages.filter((t=>t!==e.text));this.setState({errorMessages:t})},this.onFolderNavigate=e=>{this.setState({folderId:e,selectedResource:"",errorMessages:[],tableContents:DC.tableContents})},this.setPathToState=(e,t)=>{var i,r;if(this.props.contentType===EC.w.lookupTable){(e=>(0,D.legacyHttpGet)(`/json/v1/content/item/${e}/fullpath`).then((e=>e.path)))(e.id).then((e=>this.setState({selectedResource:e},(()=>{t&&this.selectAndCloseDialog()})))).catch((e=>this.setState({errorMessages:[e.message]})))}else{const n=null!==(r=null===(i=this.state.tableContents.pathItems)||void 0===i?void 0:i.map((e=>e.name)).join("/"))&&void 0!==r?r:[];this.setState({selectedResource:`/${n}/${e.name}`,errorMessages:[]},(()=>{t&&this.selectAndCloseDialog()}))}},this.onRowClick=e=>RC(this,void 0,void 0,(function*(){e.data.contentType===Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER?this.onFolderNavigate(e.data.id):this.setPathToState(e.data)})),this.onRowDoubleClick=e=>RC(this,void 0,void 0,(function*(){e.data.contentType===Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER?this.onFolderNavigate(e.data.id):this.setPathToState(e.data,!0)})),this.onBreadcrumbItemClick=(e,t)=>{const i=this.state.tableContents.relativePath&&this.state.tableContents.relativePath.map((e=>e.item&&e.item.id));i&&(0,rh.Z)(i)===t.id||this.onFolderNavigate(t.id)},this.updateValue=e=>{this.props.onChange(e.target.value)},this.showErrorMessages=()=>this.state.errorMessages&&OC.indexOf(this.state.errorMessages[0])>-1,this.state.errorMessages=(0,tb.Z)(this.props.errorMessages)?[]:this.props.errorMessages,this.iconName=this.getIconName()}getFolderId(){return RC(this,void 0,void 0,(function*(){if(""===this.props.value)return void this.setState({folderId:"root"});let e;try{e=this.props.contentType===EC.w.lookupTable?yield function({lookupTablePath:e}){return wC(this,void 0,void 0,(function*(){if((0,re.isStringBlank)(e))return Promise.reject("Path cannot be blank");try{const t=yield(0,D.legacyHttpGet)("/json/v1/content/item/fullpath",{params:{fullpath:e}});return t.error?Promise.reject(t.errorMessage):(0,tb.Z)(t.folderable.externalId)?Promise.reject(Ge.j.get("csiem.pleaseEnterTheFullPathOfTheLookupTable")):Promise.resolve(t.folderable.relativePath[0].id)}catch(e){let t=e.message?e.message:(0,re.getFirstErrorMessage)(e);return t=t.replace(/^(Content:: )/,""),Promise.reject(t)}}))}({lookupTablePath:this.props.value}):yield function(e,t){return wC(this,void 0,void 0,(function*(){try{const i=yield(0,D.legacyHttpGet)(`${e}path?path=${t}`);return Promise.resolve(i.parentId)}catch(e){return Promise.reject(e.errors[0])}}))}(`/api/v1/${this.props.contentType}/`,this.props.value),this._isMounted&&this.setState({folderId:e})}catch(e){OC.indexOf(e.code)>-1&&this.setState({folderId:"root"}),this.setState({errorMessages:[e.message]})}}))}componentDidMount(){this._isMounted=!0,this.getFolderId()}componentWillUnmount(){this._isMounted=!1}getTableContents(){return RC(this,void 0,void 0,(function*(){if(this.state.folderId!==DC.folderId)try{let e;this.props.contentType===EC.w.lookupTable?(e=yield function(e){return wC(this,void 0,void 0,(function*(){const t={item:{id:"root"},name:Ge.j.get("content.contentTypeLabel.LOOKUP")},i="root"===e?`${g.CONTENT_ENDPOINTS.CONTENT_SEARCH}?depth=10&findExpression=+type:lookups`:`${g.CONTENT_ENDPOINTS.FOLDER_ENDPOINT}${e}`;try{const r=yield(0,D.legacyHttpGet)(i);if(r.error)return Promise.reject(r.errorMessage);const n=r.folder;n.relativePath.length>0&&(n.relativePath=[t].concat(n.relativePath.map((e=>({name:e.name,item:{id:e.id}})))));const a=Object.assign(Object.assign({},n),{id:e,type:"LookupTablesLibraryBaseResponse",contentType:"LookupTable",version:0,pathItems:[t].concat(n.relativePath.map((e=>({name:e.name,item:{id:e.id}}))))});return a.children=n.children.map((e=>Object.values(e)[0])).filter((e=>"lookupTableReference"===e.type||"folder"===e.type)).map((e=>{const t=e.relativePath.map((e=>({name:e.name,item:{id:e.id}})));return Object.assign(Object.assign({},e),{id:e.id.toString(),contentType:"folder"===e.type?Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER:e.type,pathItems:t,version:0})})).sort(IC),a}catch(e){if("content1:wrong_type"===Object.keys(e.keyedErrors)[0])return Promise.reject("unwanted lookup");let t=e.message?e.message:(0,re.getFirstErrorMessage)(e);return t=t.replace(/^(Content:: )/,""),Promise.reject(t)}}))}(this.state.folderId),e.children&&(e.children=e.children.map((e=>(e.relativePath&&e.relativePath.length>0&&e.relativePath.pop(),Object.assign({},e)))))):e=yield function(e,t){var i,r;return wC(this,void 0,void 0,(function*(){try{const n=yield Xn.treeTemplateService.getList(e,t,{});return n.pathItems=null!==(r=null===(i=n.pathItems)||void 0===i?void 0:i.map((e=>({name:e.name,item:e}))))&&void 0!==r?r:[],n.relativePath=n.pathItems,n.children&&(n.children=n.children.sort(((e,t)=>e.contentType===Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER&&t.contentType!==Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER?-1:t.contentType===Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER&&e.contentType!==Xn.TREE_TEMPLATE_OBJECT_TYPES.FOLDER?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:1))),Promise.resolve(n)}catch(e){return Promise.reject(e.errors[0].message)}}))}(`/api/v1/${this.props.contentType}/`,this.state.folderId),this._isMounted&&this.setState({tableContents:e})}catch(e){if("unwanted lookup"===e)return void this.setState({folderId:"root",tableContents:DC.tableContents});this.setState({errorMessages:[e]})}}))}componentDidUpdate(e,t){t.folderId!==this.state.folderId?this.getTableContents():e.value!==this.props.value&&this.getFolderId()}render(){const{label:e,value:t,optional:i,title:r,contentType:n,className:a,name:s,showLoadingIndicator:o,readOnly:l=!1}=this.props,c=this.showErrorMessages(),d=this.props.errorMessages===[]?this.state.errorMessages:this.props.errorMessages||[];return T.createElement(AC,{value:t,label:e,title:r,name:s,className:a,readOnly:l,showLoadingIndicator:o,optional:i,errorMessages:d,showErrorMessages:c,contentType:n,iconType:this.iconName,tableContents:this.state.tableContents,pickerIsOpen:this.state.isOpen,onOpenPickerClicked:this.onOpenPickerClicked,updateValue:this.updateValue,onChange:this.onChangeHandler,onClose:this.onClose,onErrorClose:this.onErrorClose,onBreadcrumbItemClick:this.onBreadcrumbItemClick,onRowClick:this.onRowClick,onRowDoubleClick:this.onRowDoubleClick})}}const MC="name",kC="description",LC="baseModelReference",PC=e=>({cellConfig:{type:"textField",props:{fullWidth:!0,multiline:!0,inputProps:{"data-sumo-test":e}}}});class FC extends T.PureComponent{constructor(){super(...arguments),this.tabularInputColumns=[Object.assign({colId:"fieldName",columnName:Ge.j.get("dataModels.fieldName"),columnWidth:400},PC("data-model-fields-field-name")),Object.assign({colId:"default",columnName:Ge.j.get("dataModels.defaultValue"),columnWidth:600},PC("data-model-fields-default-value"))],this.handleTabularInputChange=({rows:e})=>this.props.updateModelFields(e)}renderDataModelFactorExpressionEditor(){const{modelFactors:e,updateRequiredFields:t,updateFields:i,updateFactorType:r,readOnly:n,addFactor:a,removeFactor:s,updateFactorLabel:o,clientSideValidationErrors:l={}}=this.props;return this.props.readOnly&&!e.length?null:T.createElement(SC,{modelFactors:e,addFactor:a,removeFactor:s,updateFields:i,updateRequiredFields:t,updateFactorType:r,updateFactorLabel:o,readOnly:n,clientSideValidationErrors:l,tooltipText:Ge.j.get("dataModels.factorExpressionTooltip")})}render(){const{name:e,description:t,baseModelReference:i,updateFormFieldValue:r,readOnly:n,clientSideValidationErrors:a={}}=this.props;return T.createElement("div",{className:vC().dataModelEditor},T.createElement(bC.yp,{title:Ge.j.get("dataModels.basicDetails"),panelTitleProps:{"data-sumo-test":"basicDetails"},panelSummaryProps:{"data-sumo-test":"basic-details"}},T.createElement("div",{className:vC().row},T.createElement("div",{className:vC().leftColumn},T.createElement(GT.nv,{name:MC,readOnly:n,value:e,"data-sumo-test":"data-model-name",label:Ge.j.get("dataModels.name"),fullWidth:!0,multiline:!0,onChange:r,styleProps:{root:vC().leftColumnTextField},error:a[MC],hintText:a[MC]}),T.createElement(NC,{value:i,label:Ge.j.get("dataModels.baseModelReference"),title:Ge.j.get("dataModels.baseModelReference"),optional:!0,contentType:he.wF.informationModel,name:LC,errorMessages:(0,tb.Z)(a.baseModelReference)?[]:[a.baseModelReference],"data-sumo-test":"base-model-reference",readOnly:n,onChange:e=>r({target:{value:e,name:LC}})})),T.createElement("div",{className:vC().rightColumn},T.createElement(GT.nv,{label:Ge.j.get("dataModels.description"),readOnly:n,name:kC,"data-sumo-test":"description",fullWidth:!0,optional:!0,multiline:!0,value:t,onChange:r}))),T.createElement(qt.TabularInput,{"data-sumo-test":"model-fields-input",title:Ge.j.get("dataModels.dataModelSchema"),className:vC().schemaBuilder,readOnly:n,columns:this.tabularInputColumns,rows:this.props.modelFields,minRowsRequired:1,errors:a.schemaBuilder,newRowLinkText:Ge.j.get("dataModels.addField"),onChange:this.handleTabularInputChange})),this.renderDataModelFactorExpressionEditor())}}var UC=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class VC extends T.Component{constructor(){super(...arguments),this.saveContent=()=>{const{saveDataModel:e}=this.props;e(this.props)},this.fetchDataModel=()=>{const{contentId:e}=this.props.params;this.props.fetchDataModel(e)},this.handleTitleUpdate=e=>{qv.updateViewTitle(e)}}render(){const e=this.props,{params:t,editorState:i}=e,r=UC(e,["params","editorState"]),{isFetchingDataModel:n,dataModelFetchRequestErrorMessage:a,isSavingDataModel:s,dataModelSaveRequestErrorMessage:o}=i;return T.createElement(he.QC,{meta:this.props.meta,updateTabTitle:this.handleTitleUpdate,fetchContent:this.fetchDataModel,urlParams:this.props.params,saveContent:this.saveContent,isFetchingContent:!!n,contentFetchFailureMessage:a,isSavingContent:!!s,saveContentFailureMessage:o,editorStateName:Uv.name,contentType:he.wF.informationModel},T.createElement(FC,Object.assign({},r,i,{readOnly:(0,he.lw)(this.props)})))}}const BC=(0,Te.legacyConnect)(((e,t)=>((e,t)=>Vv(e)[t.params.viewId]||Vv(e).default)(e,t)),((e,t)=>(0,Zn.bindActionCreators)(Object.assign({},a),(0,Ee.Lu)(t.params.viewId,e,he.wF.informationModel))))(VC);s.module("sumoApp.dataModels",[]).component("modelEditor",(0,re.legacyReactToAngular)(BC,["params"]));var $C=i(20777);const HC=e=>e.lookups,WC=(qC=e=>e.lookupTableCreators,(e,t)=>{const{viewId:i}=t.params,r=(0,Zn.compose)(qC,HC)(e);return(0,$C.Z)(r,i,(0,$C.Z)(r,"default"))});var qC,jC=i(90746),QC=i.n(jC),zC=i(96189),GC=i(15451),KC=i.n(GC),YC=i(75874),ZC=i(26361),XC=i(88790),JC=i.n(XC);const eA="name",tA="description",iA="ttl",rA="sizeLimitAction";var nA;!function(e){e.MERGE="merge",e.REPLACE="replace",e.DELETE="delete"}(nA||(nA={}));const aA="rowOffset",sA="secondaryIndex",oA=["pkv","tid-cid-s","mt","tid-sk-1","tid-sk-2","tid-sk-3","tid-sk-4","tid-sk-5","tid-sk-6","tid-sk-7","tid-sk-8","tid-sk-9","tid-sk-10","tid-sk-11","tid-sk-12","tid-sk-13","tid-sk-14","tid-sk-15","tid-sk-16","tid-sk-17","tid-sk-18","tid-sk-19","tid-sk-20","_messagetime","_receipttime","_sourcecategory","_sourcehost","_sourcename","_source","_sourceid","_collector","_collectorid","_view","_index"],lA=[{value:"us-ascii",label:"US-ASCII"},{value:"utf-8",label:"UTF-8(default)"},{value:"utf-16",label:"UTF-16"},{value:"utf-16be",label:"UTF-16BE"},{value:"utf-16le",label:"UTF-16LE"},{value:"utf-32",label:"UTF-32"},{value:"utf-32be",label:"UTF-32BE"},{value:"utf-32le",label:"UTF-32LE"}];var cA=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};const dA=e=>{const{form:{touched:t,errors:i},field:r,hintText:n,charLimit:a,charThreshold:s}=e,o=cA(e,["form","field","hintText","charLimit","charThreshold"]),l=r.name,c=t[l]&&i[l];let d="";r.value.length>s&&(d=Ge.j.get("common.nameLimitLeft",a-r.value.length)),r.value.length>a&&(d=Ge.j.get("common.nameLimitExceeded",r.value.length-a));const u=n||c||d,p=Object.assign(Object.assign({},r),o);return x().createElement(qt.TextField,Object.assign({margin:"normal",error:!!c||r.value.length>a,hintText:u},p))};var uA=i(48634),pA=i.n(uA);const hA=e=>x().createElement(qt.Select,Object.assign({},e),x().createElement(qt.Select.Item,{value:"minutes"},Ge.j.get("common.minutes")),x().createElement(qt.Select.Item,{value:"hours"},Ge.j.get("common.hours")),x().createElement(qt.Select.Item,{value:"days"},Ge.j.get("common.days"))),mA=iA,gA=e=>e&&e.value?`${e.value} `+Ge.j.get(`common.${e.unit}`):"";class yA extends x().Component{constructor(){super(...arguments),this.state={ttlSelectedValue:this.props.value||null},this.setNormalizedTTL=()=>{const e=this.props.value,t=e&&e.value?(0,YC.al)(e):null;this.setState({ttlSelectedValue:t})},this.onTtlValueChange=e=>{const t=this.state.ttlSelectedValue?this.state.ttlSelectedValue.unit:"minutes",i={value:parseFloat(e.currentTarget.value),unit:t};this.updateTtlValue(e,i),this.setState({ttlSelectedValue:i})},this.onTtlUnitChange=e=>{const t={value:this.state.ttlSelectedValue?this.state.ttlSelectedValue.value:void 0,unit:e.target.value};this.updateTtlValue(e,t),this.setState({ttlSelectedValue:t})},this.updateTtlValue=(e,t)=>{this.parentRef&&(e.target=this.parentRef);const i={type:"custom",name:mA,value:t};Object.assign(e.target,i),this.props.onChange&&this.props.onChange(e)},this.toggleTtl=e=>{let t;"yes"===e.target.value?(this.props.setFieldValue&&this.props.setFieldValue(rA,zC.dq.stopIncomingData),t=this.state.ttlSelectedValue||{unit:"minutes"}):t=null,this.updateTtlValue(e,t)},this.blurEvent=e=>{this.parentRef&&(e.target=this.parentRef);const t={type:"custom",name:mA};Object.assign(e.target,t),this.props.onBlur&&this.props.onBlur(e)}}componentDidMount(){this.setNormalizedTTL()}componentDidUpdate(e){this.props.readOnly!==e.readOnly&&this.setNormalizedTTL()}render(){const{error:e,hintText:t,readOnly:i}=this.props,r=this.state.ttlSelectedValue;return i?x().createElement(qt.TextField,{label:Ge.j.get("lookupTables.ttlLabel"),value:gA((0,YC.al)(r,!0)),readOnly:!0,fullWidth:!0,optional:!0}):x().createElement("div",{ref:e=>this.parentRef=e},x().createElement(qt.Text,{variant:"textHeavy",className:Wt()(pA().title,pA().ttlField)},Ge.j.get("lookupTables.setTtlLabel"),x().createElement(qt.Tooltip,{multiline:!0,title:Ge.j.get("lookupTables.ttlTooltip"),placement:"top"},x().createElement(qt.Icon,{className:pA().ttlTooltip,name:"question-circle",color:"blue",size:"medium"}))),x().createElement("div",{className:pA().radioGroup},x().createElement(qt.Radio,{label:Ge.j.get("common.yes"),value:"yes",checked:!!this.props.value,onClick:this.toggleTtl,inputProps:{"data-sumo-test":"create-lookup-ttl-yes"}}),x().createElement(qt.Radio,{label:Ge.j.get("common.no"),value:"no",checked:!this.props.value,onClick:this.toggleTtl,inputProps:{"data-sumo-test":"create-lookup-ttl-no"}})),!!this.props.value&&x().createElement("div",null,x().createElement(qt.Text,{variant:"textHeavy",className:pA().title},Ge.j.get("lookupTables.ttl")),x().createElement("div",{className:pA().inlinettl},x().createElement(qt.TextField,{fullWidth:!0,value:r&&void 0!==r.value?r.value.toString():"",onChange:this.onTtlValueChange,onBlur:this.blurEvent,type:"number",placeholder:Ge.j.get("lookupTables.duration"),className:pA().ttlValue}),x().createElement(hA,{value:r?r.unit:"minutes",handleChange:this.onTtlUnitChange,className:pA().ttlUnit})),e&&t&&x().createElement(qt.AssistiveText,{error:e},t)))}}var vA=i(20462);const fA=e=>{let t=0;return new Promise(((i,r)=>{const n={header:!0,preview:5,chunkSize:10240,transform:_A,chunk:(i,r)=>{t+=i.data.length,(t>=5||e.size<=10240)&&r.abort()},complete:i,error:r,skipEmptyLines:!0};(0,vA.parse)(e,n)}))},_A=e=>e.replace(/^"/,"").replace(/"$/,""),SA=(e,t)=>{let i;if(e)if(t)i=Promise.resolve(t);else{const t=EA(e);i=(0,g.wrapNgPromise)(g.contentItemService.fetch(t).then((e=>g.contentItemService.getPath(e.id).then((t=>(e.path=t,e)))))).toPromise()}else i=Promise.resolve(void 0);return i.catch(g.handleApiError)},bA=e=>{const t=(0,re.formatStorageValueSmall)(e.size),i=(0,re.ensureDefined)(e.name.match(/(.*)\.([\w]+$)/i));let r=i[1];const n=i[2];if(r.length>10){const e=Math.ceil(6),t=r.slice(0,e),i=r.slice(r.length-(10-e-1));r=t+""+i}return`${r}.${n} (${t})`},EA=e=>parseInt(e,16),TA=e=>e/1e6,xA=e=>{switch(e){case zC.aO.bulkMerge:return Ge.j.get("lookupTables.dataActions.buttonText.mergeData");case zC.aO.bulkReplace:return Ge.j.get("lookupTables.dataActions.buttonText.replaceData");case zC.aO.truncate:return Ge.j.get("lookupTables.dataActions.buttonText.deleteData");default:return""}},CA=e=>{(e=e||window.event)&&(e.returnValue=!0)};var AA=i(10403),wA=i.n(AA);const IA=e=>{const t=t=>{Object.assign(t.target,{name:"sizeLimitAction"}),e.field.onChange(t)},{form:{values:i},field:r,readOnly:n=!1}=e,a=i[r.name];return n?x().createElement(qt.TextField,{label:Ge.j.get("lookupTables.sizeLimitHandlingLabel"),value:(s=a,s===zC.dq.stopIncomingData?Ge.j.get("lookupTables.stopIncomingData"):Ge.j.get("lookupTables.deleteOldData")),readOnly:!0,fullWidth:!0}):x().createElement(x().Fragment,null,x().createElement(qt.Text,{variant:"textHeavy",className:Wt()(wA().title,wA().sizeLimitField)},Ge.j.get("lookupTables.sizeLimitHandling")),x().createElement("div",{className:wA().radioGroup},x().createElement(qt.Radio,{label:Ge.j.get("lookupTables.stopIncomingData"),value:zC.dq.stopIncomingData,checked:a===zC.dq.stopIncomingData,onClick:t}),x().createElement(qt.Radio,{label:Ge.j.get("lookupTables.deleteOldData"),value:zC.dq.deleteOldData,checked:a===zC.dq.deleteOldData,onClick:t})));var s};var RA=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};const DA=e=>{const{form:t,field:i}=e,r=RA(e,["form","field"]),n=e.field.name,a=t.setFieldValue,s=e.form.touched[n]&&e.form.errors[n],o=Object.assign(Object.assign({},i),r);return x().createElement(yA,Object.assign({error:!!s,hintText:s||"",setFieldValue:a},o))};class OA extends x().PureComponent{constructor(){super(...arguments),this.validationRules={[eA]:[{type:"required",message:Ge.j.get("lookupTables.formError.required")},{type:"custom",value:e=>(0,re.isValidName)(e)?null:Ge.j.get("lookupTables.formError.nameInvalidError")},{type:"max",message:Ge.j.get("lookupTables.formError.nameLimitExceededError"),value:255}],[tA]:[{type:"max",message:Ge.j.get("lookupTables.formError.descriptionLimitExceededError"),value:1e3}],[iA]:[{type:"custom",value:e=>{let t=null;return null!==e&&((e=>null!==e&&void 0!==e.value&&!Number.isNaN(e.value)&&(e.value<=0||(0,YC.si)(e)>525600))(e)?t=(e=>{let t=Ge.j.get("lookupTables.formError.ttlValueErrorDefault");if(null!=e)switch(e.unit){case"minutes":t=Ge.j.get("lookupTables.formError.ttlValueErrorMinutes");break;case"hours":t=Ge.j.get("lookupTables.formError.ttlValueErrorHours");break;case"days":t=Ge.j.get("lookupTables.formError.ttlValueErrorDays")}return t})(e):e.value?Number.isInteger(e.value)||(t=Ge.j.get("lookupTables.formError.ttlWhole")):t=Ge.j.get("common.required_error_message",Ge.j.get("lookupTables.ttl"))),t}}],[rA]:[{type:"required",message:Ge.j.get("lookupTables.formError.required")}]},this.formProps={},this.renderForm=e=>(this.formProps={submitForm:e.submitForm,isValid:e.isValid,isValidating:e.isValidating,validateForm:e.validateForm},x().createElement("div",{className:JC().lookupMetaFormRoot},x().createElement("div",{className:JC().nameAndDesc},x().createElement(qt.Form.Field,{name:eA,component:dA,label:Ge.j.get("lookupTables.lookupName"),fullWidth:!0,className:JC().name,readOnly:"create"!==this.props.mode,margin:"none",charThreshold:200,charLimit:255,inputProps:{"data-sumo-test":"create-lookup-name"}}),x().createElement(qt.Form.Field,{name:tA,component:dA,label:Ge.j.get("lookupTables.description"),className:JC().description,optional:!0,indicateIsOptional:"view"!==this.props.mode,fullWidth:!0,multiline:!0,charThreshold:900,charLimit:1e3,readOnly:"view"===this.props.mode||"progress"===this.props.mode,margin:"none",inputProps:{"data-sumo-test":"create-lookup-description"}})),x().createElement(qt.Form.Field,{name:iA,component:DA,readOnly:"view"===this.props.mode||"progress"===this.props.mode}),x().createElement(qt.Form.Field,{name:rA,component:IA,readOnly:"view"===this.props.mode||"progress"===this.props.mode}))),this.validateForm=(e,t,i)=>{e||this.props.onChange(t,i)}}shouldComponentUpdate(e){return e.mode!==this.props.mode}render(){const{name:e="",description:t="",ttl:i=null,sizeLimitAction:r="StopIncomingMessages"}=this.props,n={name:e,description:t,ttl:i,sizeLimitAction:r,change:"view"===this.props.mode};return x().createElement(qt.Form,{onValidation:this.validateForm,validationRules:this.validationRules,render:this.renderForm,onSubmit:()=>{},initialValues:n,enableReinitialize:!0})}}var NA=i(89385),MA=i.n(NA);const kA=e=>{const{jobs:t,type:i}=e;return x().createElement(x().Fragment,null,x().createElement("div",{className:MA().panelHeading,"data-sumo-test":`lookup-notification-panel-${i}`},i===zC.O.history?Ge.j.get("lookupTables.notificationPanel.historyHeading"):Ge.j.get("lookupTables.notificationPanel.queueHeading")),t.length?null:Ge.j.get("lookupTables.notificationPanel.noItems",i),t.map(((e,t)=>{return x().createElement("div",{className:MA().jobItem,key:e.jobId},x().createElement("span",{className:MA().jobIcon,"data-sumo-test":`lookup-notification-item-${t}-icon`},(e=>{switch(e){case zC.v$.inprogress:return x().createElement(qt.Loader,{loaderType:"spinner",size:"small"});case zC.v$.pending:return x().createElement(qt.Icon,{name:"queue",size:"small"});case zC.v$.success:return x().createElement(qt.Icon,{name:"check",size:"small",color:"keroppi"});case zC.v$.failed:return x().createElement(qt.Icon,{name:"exclamation-triangle",size:"small",color:"coral"});case zC.v$.partialSuccess:return x().createElement(qt.Icon,{name:"exclamation-circle",size:"small",color:"sake"})}})(e.status)),x().createElement("div",{className:MA().jobContent},x().createElement("div",{"data-sumo-test":`lookup-notification-item-${t}`},x().createElement("span",{className:MA().jobType},xA(e.requestType)),` ${Ge.j.get("lookupTables.notificationPanel.by")} ${i=e.userId,os.getUserNameById(i)} `),ht.userDateService.formatDateTime(e.createdAt),(e=>{let t=[],i="";if(e.errors.length>0)t=e.errors,i=Ge.j.get("lookupTables.notificationPanel.errors");else{if(!(e.warnings.length>0))return;t=e.warnings,i=Ge.j.get("lookupTables.notificationPanel.warnings")}return x().createElement(x().Fragment,null,x().createElement(R.ExpandableContent,{headerComponent:x().createElement("b",null,`${t.length} ${i} :`),contentComponent:x().createElement(x().Fragment,null,t.map(((e,t)=>x().createElement("div",{className:MA().warningOrErrorItem,key:t},x().createElement("div",null,e.message),x().createElement("div",{className:MA().cause},e.cause)))))}))})(e)));var i})))};var LA=i(13965),PA=i.n(LA);const FA=e=>{const{value:t,onEncodingChange:i}=e;return x().createElement("div",{className:PA().advancedSettingsContainer},x().createElement(R.ExpandableContent,{headerComponent:x().createElement("span",{className:PA().advancedSettingsTitle},Ge.j.get("lookupTables.advancedUploadSettings")),contentComponent:x().createElement("div",{className:PA().advancedSettings},x().createElement(qt.Select,{label:Ge.j.get("lookupTables.encodingType"),value:t,handleChange:i,inline:!0},lA.map((e=>x().createElement(qt.Select.Item,{value:e.value,key:e.value},e.label)))))}))};var UA=i(68906),VA=i.n(UA);const BA=e=>{const[t,i]=T.useState([]),r=T.useMemo((()=>[{headerName:"#",field:aA,undraggable:!0,sortable:!1,width:60},{headerName:Ge.j.get("lookupTables.secondaryIndices.title"),field:sA,undraggable:!0,sortable:!1}]),[]),n=T.useMemo((()=>({isEnabled:"view"!==e.mode,actions:{delete:{show:!0,icon:"trash",onClick:(t,i)=>{e.deleteSecondaryIndex(i.rowOffset-1)}}}})),[e]);return T.createElement("div",{className:VA().secoondaryIndicesContainer},T.createElement(qt.Text,{variant:"textHeavy"},!("view"===e.mode&&(!e.secondaryKeys||0===e.secondaryKeys.length))&&Ge.j.get("lookupTables.secondaryIndices.title"),"view"!==e.mode&&T.createElement(qt.Tooltip,{multiline:!0,title:Ge.j.get("lookupTables.secondaryIndices.helpText"),placement:"top"},T.createElement(qt.Icon,{className:VA().secondaryIndexTooltip,name:"question-circle",color:"blue",size:"medium"}))),"view"!==e.mode&&T.createElement("div",{className:VA().secondaryIndexFieldContainer},T.createElement(qt.AutoComplete,{items:e.fields.filter((e=>e.label.length>0)),selectedItems:t,multiselect:!0,className:VA().secondaryIndexField,label:Ge.j.get("lookupTables.secondaryIndices.selectLabel"),onSelectedItemsChange:e=>{i(e)}}),T.createElement(qt.Button,{color:"primary",onClick:()=>{e.addSecondaryIndex(t.map((e=>e.label))),i([])},icon:"plus"},Ge.j.get("lookupTables.secondaryIndices.add"))),e.secondaryKeys&&e.secondaryKeys.length>0&&T.createElement("div",{className:VA().secondaryIndexFieldTable,style:{height:40*(e.secondaryKeys.length+1)+10}},T.createElement(qt.Table,{columnOptions:r,data:(a=e.secondaryKeys,a.map(((e,t)=>({[aA]:t+1,[sA]:e.join()})))),gridOptions:{rowActionConfig:n}})));var a};var $A=i(29665),HA=i(31651),WA=i.n(HA),qA=i(1220),jA=i.n(qA);class QA extends x().Component{constructor(e){super(e),this.state={formData:{uploadFileMeta:void 0,encodingType:"utf-8"}},this.removeUploadFile=()=>{const e={uploadFileMeta:void 0};this.setState({formData:e}),this.props.onChange(e)},this.validateCSVFile=e=>{const{primaryKeys:t,columns:i,isMerge:r}=this.props;fA(e).then((e=>{const n=i.map((e=>e.headerName)),a=e.meta.fields,s=n.filter((e=>!a.includes(e))),o=a.filter((e=>!n.includes(e)));Object.keys(t).filter((e=>t[e]&&!a.includes(e))).length?this.displayError(Ge.j.get("lookupTables.missingPrimaryKeys")):this.displayWarnings(!e.data.length,!!s.length,!!o.length,r)}))},this.displayWarnings=(e,t,i,r)=>{let n="";if(e?n=r?Ge.j.get("lookupTables.emptyFileMergeWarning"):Ge.j.get("lookupTables.emptyFileReplaceWarning"):t?n=Ge.j.get("lookupTables.uploadMissingFields"):i&&(n=Ge.j.get("lookupTables.uploadExtraFields")),n)return(0,R.showInlineNotification)([{text:n,status:"warning",multiline:!0}],this.warningContainerRef.current)},this.displayError=e=>(0,R.showInlineNotification)([{text:e,status:"error",multiline:!0}],this.errorContainerRef.current),this.handleUploadFileChange=e=>{const{formData:t}=this.state,i=e.target.files;if(!i||!i.length)return;const r=parseInt(Gr.currentUserHelper.getDynamicProperty("lookup_table_size_maxLimit"));let n=!1;const a=this.props.fileSize||0,s=i[0];"StopIncomingMessages"===this.props.sizeLimitAction&&this.props.isMerge?s.size+a>r&&(n=!0,this.displayError(Ge.j.get("lookupTables.uploadFileLimitExceed",TA(r-a>0?r-a:0),TA(a)))):s.size>$A.Pv&&(n=!0,this.displayError(Ge.j.get("lookupTables.uploadLimitExceedErrorMessage",TA($A.Pv)))),Gr.currentUserHelper.hasFeatureFlag("UISearchLookupUploadWarning")&&this.validateCSVFile(s),t.uploadFileMeta=s,this.setState({formData:t}),this.props.onChange(t,n)},this.onEncodingValueChange=e=>{const t=this.state.formData;t.encodingType=e.target.value,this.setState({formData:t})},this.errorContainerRef=x().createRef(),this.warningContainerRef=x().createRef()}render(){return x().createElement(x().Fragment,null,x().createElement(qt.Text,{className:jA().heading,noWrap:!1},this.props.heading),x().createElement(qt.Text,{className:jA().heading,noWrap:!1},Ge.j.get("lookupTables.fileUploadInstruction")),x().createElement("div",{className:jA().errorContainer,ref:this.errorContainerRef}),this.state.formData.uploadFileMeta?x().createElement("div",null,x().createElement(qt.Chip,{color:"grey",onClose:this.removeUploadFile,className:jA().uploadFileChip},bA(this.state.formData.uploadFileMeta))):x().createElement("div",null,x().createElement(R.UploadButton,{name:"lookupCsvFileUpload",onChange:this.handleUploadFileChange,color:"secondary",status:"default",onlyAccept:"text/csv",text:{default:"Upload"}}),x().createElement(FA,{value:this.state.formData.encodingType,onEncodingChange:this.onEncodingValueChange})),Gr.currentUserHelper.hasFeatureFlag("UISearchLookupUploadWarning")&&x().createElement("div",{ref:this.warningContainerRef}))}}const zA=e=>x().createElement(qt.Dialog,{open:e.open,onClose:e.onClose,dialogSize:qt.DialogSizes.Regular},x().createElement(qt.Dialog.Title,{"data-sumo-test":"lookup-data-action-dialog-title"},e.isMerge?Ge.j.get("lookupTables.dataActions.dialog.mergeTitle"):Ge.j.get("lookupTables.dataActions.dialog.replaceTitle")),x().createElement(qt.Dialog.Content,null,x().createElement(QA,{isMerge:e.isMerge,onChange:e.onChange,heading:e.heading,primaryKeys:e.primaryKeys,columns:e.columns,sizeLimitAction:e.sizeLimitAction,fileSize:e.fileSize})),x().createElement(qt.Dialog.Actions,null,x().createElement(qt.Button,{color:"secondary",onClick:e.onClose},Ge.j.get("common.cancel")),x().createElement(qt.Button,{color:"primary",onClick:e.onDone,disabled:e.isDoneDisabled},Ge.j.get("common.done"))));class GA extends x().Component{constructor(e){super(e),this.isProcessing=()=>Object.keys(this.state.buttonState).some((e=>"processing"===this.state.buttonState[e]||this.props.inProcess===e)),this.setButtonState=(e,t)=>{this.setState({buttonState:Object.assign(Object.assign({},this.state.buttonState),{[e]:t})})},this.setOpenDialog=e=>{this.setState({dialogOpen:e})},this.closeDialog=()=>{this.setOpenDialog()},this.doneDialog=()=>{window.addEventListener("beforeunload",CA);const e=(0,re.ensureDefined)(this.state.dialogOpen);this.setButtonState(e,"processing"),this.props.setButtonInProcess(e),this.props.dialogActions[e](this.formData).finally((()=>{this.setButtonState(e,"default"),window.removeEventListener("beforeunload",CA),this.props.setButtonInProcess("default")})),this.closeDialog()},this.handleMergeReplaceDataChange=(e,t)=>{this.formData=e,this.setState((()=>({isDoneDisabled:t||!e.uploadFileMeta})))},this.getFeedbackState=e=>{let t=this.state.buttonState[e];return"processing"===t&&-1===[100,0,void 0].indexOf(this.props.progress)&&(t="progress"),e===this.props.inProcess&&(t="processing"),t},this.state={dialogOpen:void 0,buttonState:{delete:"default",merge:"default",replace:"default"},isDoneDisabled:!0}}render(){const{mode:e,isData:t}=this.props,i=[{name:nA.MERGE,feedbackText:{default:Ge.j.get("lookupTables.dataActions.buttonText.mergeData"),processing:Ge.j.get("lookupTables.dataActions.buttonText.uploading"),progress:Ge.j.get("lookupTables.dataActions.buttonText.uploading")}},{name:nA.REPLACE,feedbackText:{default:Ge.j.get("lookupTables.dataActions.buttonText.replaceData"),processing:Ge.j.get("lookupTables.dataActions.buttonText.uploading"),progress:Ge.j.get("lookupTables.dataActions.buttonText.uploading")}},{name:nA.DELETE,feedbackText:{default:Ge.j.get("lookupTables.dataActions.buttonText.deleteData"),processing:Ge.j.get("lookupTables.dataActions.buttonText.uploading"),progress:Ge.j.get("lookupTables.dataActions.buttonText.uploading")}}],r={name:nA.MERGE,feedbackText:{default:Ge.j.get("lookupTables.dataActions.buttonText.mergeData"),processing:Ge.j.get("lookupTables.dataActions.buttonText.uploading"),progress:Ge.j.get("lookupTables.dataActions.buttonText.uploading")}},n=Ge.j.get("lookupTables.dataActions.dialog.deleteMatchValue"),a=Ge.j.get("lookupTables.dataActions.dialog.deleteMessage"),s=Ge.j.get("lookupTables.dataActions.dialog.deleteButton");return x().createElement(x().Fragment,null,x().createElement("div",{className:WA().dialogButtons},"view"===e&&(t?x().createElement(x().Fragment,null,x().createElement(qt.Button,{className:WA().button,color:"secondary",size:"small",onClick:this.props.viewDataAction,buttonProps:{name:"viewData","data-sumo-test":"tableaction-viewData"}},Ge.j.get("lookupTables.dataActions.buttonText.viewData")),this.props.isEditAllowed&&i.map((e=>x().createElement(qt.FeedbackButton,{className:WA().button,color:"secondary",size:"small",key:e.name,feedbackState:this.getFeedbackState(e.name),feedbackText:e.feedbackText,onClick:()=>this.setOpenDialog(e.name),disabled:this.isProcessing(),value:this.props.progress,buttonProps:{name:e.name,"data-sumo-test":`tableaction-${e.name}`}})))):this.props.isEditAllowed&&x().createElement(qt.FeedbackButton,{className:WA().button,color:"secondary",size:"small",key:r.name,feedbackState:this.getFeedbackState(r.name),feedbackText:r.feedbackText,onClick:()=>this.setOpenDialog(r.name),disabled:this.isProcessing(),value:this.props.progress,buttonProps:{name:r.name,"data-sumo-test":`tableaction-${r.name}`}}))),"default"!==this.props.inProcess&&x().createElement(qt.AssistiveText,null,Ge.j.get("lookupTables.uploadWarning")),x().createElement(qt.DestructiveDialog,{title:Ge.j.get("lookupTables.dataActions.dialog.deleteTitle"),open:"delete"===this.state.dialogOpen,matchValue:n,destructiveMessage:a,actionButtonText:s,onCancel:this.closeDialog,onSubmit:this.doneDialog},Ge.j.get("lookupTables.dataActions.dialog.deleteContent")),x().createElement(zA,{open:"merge"===this.state.dialogOpen,isMerge:!0,heading:Ge.j.get("lookupTables.dataActions.dialog.mergeHeading"),onDone:this.doneDialog,onClose:this.closeDialog,onChange:this.handleMergeReplaceDataChange,isDoneDisabled:this.state.isDoneDisabled,primaryKeys:this.props.primaryKeys,columns:this.props.columns,sizeLimitAction:this.props.sizeLimitAction,fileSize:this.props.fileSize}),x().createElement(zA,{open:"replace"===this.state.dialogOpen,isMerge:!1,heading:Ge.j.get("lookupTables.dataActions.dialog.replaceHeading"),onDone:this.doneDialog,onClose:this.closeDialog,onChange:this.handleMergeReplaceDataChange,isDoneDisabled:this.state.isDoneDisabled,primaryKeys:this.props.primaryKeys,columns:this.props.columns}))}}var KA=i(90116),YA=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},ZA=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};const{SearchQueryDataModule:XA}=i(34074);class JA extends T.Component{constructor(e){super(e),this.state={showBadgeInTab:{},openTab:void 0,encodingType:"",lastSeenHistoryTab:null},this.metaFormRef=null,this.isSubmitted=!1,this.isEdited=!1,this.lookupContentFF=Gr.currentUserHelper.hasFeatureFlag("UISanaCsiemLookupContent"),this.lookupSecondaryIndicesFF=Gr.currentUserHelper.hasFeatureFlag("UILookupSecondaryIndices"),this.lookupContentLimitFF=Gr.currentUserHelper.hasFeatureFlag("UILookupContentLimit"),this.newState={},this.uploadEventHandlers={progress:e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);this.props.updateUploadProgress(t)}}},this.getOldHeaderProps=()=>{const{mode:e,uploadProgress:t,isUploadingFile:i}=this.props,r=this.hasErrors(),n=[];"view"===e||!this.props.isEditAllowed&&"create"!==e||n.push({icon:"pencil",tooltip:Ge.j.get("common.edit"),onClick:this.handleHeaderBarMoveAction}),"edit"!==e&&"view"!==e||n.push({icon:"copytoclipboard",tooltip:Ge.j.get("lookupTables.copyToClipboardLookupActionLabel"),onClick:this.handleHeaderBarClipboardAction});const a={mode:e,actions:{discard:this.handleEditCancel,save:this.handleUpdateLookup,edit:()=>this.props.changeMode("edit"),create:this.handleCreateLookup},disabled:{create:r,save:!this.isEdited||r,edit:!this.props.isEditAllowed},label:{create:Ge.j.get("lookupTables.createLookupButton"),edit:Ge.j.get("lookupTables.editLookupButton")},progress:{value:t,label:i?"Uploading...":"Validating..."}};var s,o;return{primaryHeading:{value:(0,g.getLookupTableTitle)(e,this.props.name)},secondaryHeading:this.lookupContentFF?{value:this.props.contentPath?`Path: ${s=this.props.contentPath,o=this.props.name,`${s}/${o||""}`.replace(/^\//,"").replace(/\/$/,"")}`:" ",actions:n}:void 0,actionButtonGroupProps:a}},this.batchOldStateOnEdit=()=>{this.batchNewState({oldData:{secondaryKeys:this.props.secondaryKeys,description:this.props.description,ttl:this.props.ttl,sizeLimitAction:this.props.sizeLimitAction}})},this.batchNewState=e=>{this.newState=Object.assign(Object.assign({},this.newState),e)},this.updateState=()=>{this.props.updateState(this.newState),this.newState={}},this.isInCreateSchemaMode=()=>this.props.creationMode===g.LOOKUP_TABLE_CREATION_MODE.CREATE_SCHEMA_ONLY,this.isInUploadFileMode=()=>this.props.creationMode===g.LOOKUP_TABLE_CREATION_MODE.UPLOAD_FILE,this.isInDownloadFromUrlMode=()=>this.props.creationMode===g.LOOKUP_TABLE_CREATION_MODE.DOWNLOAD_FROM_URL,this.isInViewMode=()=>"view"===this.props.mode,this.handleCreationModeChange=e=>{const t=e.target.value;this.props.creationMode!==t&&(this.props.changeLookupTableCreationMode(t),t!==g.LOOKUP_TABLE_CREATION_MODE.UPLOAD_FILE&&this.removeUploadFile())},this.handleFormValues=(e,t)=>{const i={};if(this.props.errors){const{schema:e,toast:t}=this.props.errors;e&&(i.schema=e),t&&(i.toast=t)}"edit"!==this.props.mode||this.isEdited||(this.isEdited=!0,this.batchOldStateOnEdit()),this.batchNewState(e),t&&t!==this.props.errors&&this.batchNewState({errors:Object.assign(Object.assign({},t),i)}),this.updateState()},this.validate=()=>new Promise(((e,t)=>{if(this.metaFormRef){this.isSubmitted=!0;const i=Object.keys(this.props.primaryKeys).some((e=>this.props.primaryKeys[e])),{validateForm:r,submitForm:n}=this.metaFormRef.formProps;if(this.validateSchemaBuilder(this.props.columns),n&&n(),r){r((0,S.Z)(this.props,"name","description","ttl","sizeLimitAction")).then((r=>{0===Object.keys(r).length&&i&&0===Object.keys(this.props.errors||{}).length?e(void 0):t()}))}}else t()})),this.handleCreateLookup=()=>YA(this,void 0,void 0,(function*(){try{window.addEventListener("beforeunload",CA),yield this.validate(),this.props.changeMode("progress");const t=(0,YC.ih)(this.props),i=yield this.props.createLookupTable(t),[r,n]=yield Promise.all([this.uploadFile(),this.updateLookupContentItem(i)]);if(window.removeEventListener("beforeunload",CA),r===zC.Dm.success){(0,R.showCasualNotification)({message:Ge.j.get("lookupTables.lookupTableSuccessfullyCreated")});const e={actionType:re.ContentActionType.CREATE,items:[n],destinationFolderId:n.parentId};return g.contentActionNotificationService.notify(e),this.props.onCreateLookup(),e}(e=n,g.contentItemService.delete(e.id)).then((()=>this.props.changeMode("create")))}catch(e){e&&this.handleAPIErrors(e),this.props.changeMode("create")}var e})),this.updateLookupContentItem=e=>YA(this,void 0,void 0,(function*(){const t=e.id||e.lookupTableId,i=yield SA(t);return this.props.updateContentItem(i),i})),this.handleUpdateLookup=()=>{this.props.changeMode("progress"),this.props.updateLookupTable((0,re.ensureDefined)(this.props.lookupTableId),(0,YC.AF)((0,re.ensureDefined)(this.props))).then((()=>{this.props.changeMode("view"),this.batchOldStateOnEdit(),this.updateState()})).catch((e=>{this.props.changeMode("edit"),this.handleAPIErrors(e)}))},this.uploadFile=(e,t,i)=>{k.basicPerformanceMeasurement.createMark({module:"lookup",component:"lookupCreator",action:"uploadFile",id:"start_upload_file",checkpoint:"startUploadingFile"});const{uploadFileMeta:r,lookupTableId:n}=this.props,a=e||r,s=i||this.state.encodingType||"utf-8";let o;return o=a&&n?this.props.uploadFile(a,n,this.uploadEventHandlers,t,s):Promise.resolve(zC.Dm.success),o.then((()=>zC.Dm.success)).catch((()=>zC.Dm.fail)).finally((()=>{k.basicPerformanceMeasurement.measure({to:"completeUploadFiled",name:"start_upload_file",id:"start_upload_file",from:"startUploadingFile"})}))},this.truncateTable=()=>this.props.truncateLookupTable((0,re.ensureDefined)(this.props.lookupTableId)),this.handleAPIErrors=e=>{const t=(e=>e.errors.map((e=>`${e.message} ${e.detail||""}`)))(e).join(", ");this.props.setErrors({toast:t})},this.onEncodingValueChange=e=>{const t=e.target.value;this.setState({encodingType:t})},this.handleUploadFileChange=e=>{const t=e.target.files;if(!t||!t.length)return;const i=t[0];if(i.size>$A.Pv)return(0,R.showCriticalNotification)({message:Ge.j.get("lookupTables.uploadLimitExceedErrorMessage",TA($A.Pv))});if(this.batchNewState({uploadFileMeta:i}),this.props.errors){const e=this.props.errors,{schema:t}=e,i=ZA(e,["schema"]);this.batchNewState({errors:i})}fA(i).then((e=>{if((t=e.meta.fields).some(((e,i)=>t.indexOf(e)!==i)))return(0,R.showCriticalNotification)({message:Ge.j.get("lookupTables.duplicateColumns")});var t,i;this.updateSchamaColumnsFromParse(e.meta),this.batchNewState({data:(i=e.data,i.map((e=>{const t={};return Object.keys(e).forEach((i=>{t[_A(i)]=e[i]})),t})))}),this.updateState()}))},this.updateSchamaColumnsFromParse=e=>{const t=e.fields.map((e=>{const t=_A(e);return{colId:t,field:t,headerName:t,width:$A.iG}}));this.batchNewState({columns:t});const i={};t.forEach((e=>{i[e.colId]=zC.W$.string})),this.batchNewState({valueTypes:i})},this.removeUploadFile=()=>{this.batchNewState({uploadFileMeta:void 0,columns:ZC.E.columns,data:[],valueTypes:ZC.E.valueTypes}),this.updateState()},this.getSchemaBuilderHeaderIconName=(e,t)=>{if((this.isInViewMode()||"edit"===this.props.mode)&&this.props.primaryKeys[t])return"key"},this.handleCellChange=e=>{"boolean"==typeof e.newValue?this.props.togglePrimaryKeyField(e.colId):this.props.updateValueType(e.colId,e.newValue)},this.handleHeaderChange=e=>{const t=e.newValue;this.props.updateHeaderName(e.colId,t),this.validateHeaderName(e.colId,t)},this.handleEditCancel=()=>{this.props.oldData&&(this.batchNewState(Object.assign(Object.assign({},this.props.oldData),{errors:{},oldData:void 0})),this.isEdited=!1),this.batchNewState({mode:"view"}),this.updateState()},this.clearToastErrors=(e,t)=>{if("clickaway"!==t&&this.props.errors){const e=this.props.errors,{toast:t}=e,i=ZA(e,["toast"]);this.props.setErrors(i)}},this.validateSchemaBuilder=e=>{const t={},i=e.map((e=>e.headerName.trim()));if(e.map((e=>{e.headerName?oA.includes(e.headerName.trim().toLowerCase())?(t[0]=t[0]||{},t[0][e.colId]=Ge.j.get("lookupTables.formError.notAllowed")):i.slice(i.indexOf(e.headerName.trim())+1).indexOf(e.headerName.trim())>-1&&(t[0]=t[0]||{},t[0][e.colId]=Ge.j.get("lookupTables.formError.duplicateHeader")):(t[0]=t[0]||{},t[0][e.colId]=Ge.j.get("lookupTables.formError.required"))})),Object.keys(t).length>0){let e={};this.props.errors&&(e=this.props.errors),this.props.setErrors(Object.assign(Object.assign({},e),{schema:t}))}else if(this.props.errors){const e=this.props.errors,{schema:t}=e,i=ZA(e,["schema"]);this.props.setErrors(i)}},this.validateHeaderName=(e,t)=>{const i=this.props.columns.reduce(((i,r)=>r.colId===e?[...i,Object.assign(Object.assign({},r),{headerName:t})]:i),[]);this.validateSchemaBuilder(i)},this.getSchemaBuilderHintData=()=>{let e="",t=R.SchemaBuilderHintTextModes.ERROR;const{primaryKeys:i}=this.props;if(!Object.keys(i).some((e=>i[e]))&&this.isSubmitted)return e=Ge.j.get("lookupTables.formError.primaryKeyRequired"),[e,t];return this.props.columns.some((e=>!this.props.valueTypes[e.colId]))?(e=Ge.j.get("lookupTables.formError.valueTypeError"),[e,t]):"create"===this.props.mode?(e=Ge.j.get("lookupTables.formError.primaryKeyRequired"),t=R.SchemaBuilderHintTextModes.INFO,[e,t]):[e,t]},this.handleHeaderBarMoveAction=e=>SA(this.props.lookupTableId,this.props.contentItem).then((t=>((e,t)=>{const i=e,r={actionType:re.ContentActionType.MOVE,event:i,params:{actionType:t?"move":"getPath"}},n=t?g.libraryActionsService.runAction(r,t):g.libraryActionsService.runAction(r);return(0,g.wrapNgPromise)(n).toPromise()})(e,t))),this.handleHeaderBarClipboardAction=()=>{navigator.clipboard.writeText(`path://"${this.props.contentPath}/${this.props.name}"`).then((()=>{(0,g.showNotification)(Ge.j.get("lookupTables.copyToClipboardSuccess"),2e3)})).catch((()=>{(0,g.showCriticalNotification)(Ge.j.get("lookupTables.copyToClipBoardError"))}))},this.copyPath=()=>{navigator.clipboard.writeText(`path://"${this.props.contentPath}/${this.props.name}"`).then((()=>{(0,g.showNotification)(Ge.j.get("lookupTables.copyToClipboardSuccess"),2e3)})).catch((()=>{(0,g.showCriticalNotification)(Ge.j.get("lookupTables.copyToClipBoardError"))}))},this.handleDataUpdate=(e,t)=>{let i="";switch(t){case"delete":i="lookupTables.dataActions.dialog.deleteSuccess";break;case"merge":i="lookupTables.dataActions.dialog.mergeSuccess";break;case"replace":i="lookupTables.dataActions.dialog.replaceSuccess"}return i=Ge.j.get(i),e.then((e=>{if(e!==zC.Dm.fail)return(0,g.showNotification)(i,5e3)}))},this.handleViewData=()=>{const e=new XA;e.setQueryString(`cat path://"${this.props.contentPath}/${this.props.name}"`),e.setExecuteSearch(!0),SumoUtil.searchDrilldownTrigger(e)},this.handleDeleteColumn=e=>YA(this,void 0,void 0,(function*(){this.props.deleteColumn(e),yield this.validate()})),this.getSecondaryIndicesBuilder=()=>this.lookupSecondaryIndicesFF&&this.props.columns.length>1&&T.createElement(BA,{fields:this.props.columns.map((e=>({label:e.headerName,value:e.headerName}))),addSecondaryIndex:this.addSecondaryIndexUpdated,deleteSecondaryIndex:this.deleteSecondaryIndexUpdated,mode:this.props.mode,secondaryKeys:this.props.secondaryKeys}),this.addSecondaryIndexUpdated=e=>{"edit"===this.props.mode&&(this.isEdited=!0,this.batchOldStateOnEdit(),this.updateState()),this.props.addSecondaryIndex(e)},this.deleteSecondaryIndexUpdated=e=>{"edit"===this.props.mode&&(this.isEdited=!0,this.batchOldStateOnEdit(),this.updateState()),this.props.deleteSecondaryIndex(e)},this.getSchemaBuilder=()=>{const e={ROW_HEADERS:{0:{title:Ge.j.get("lookupTables.schemaBuilder.fieldsHeader")},1:{title:Ge.j.get("lookupTables.schemaBuilder.valueTypeHeader")},2:{title:Ge.j.get("lookupTables.schemaBuilder.primaryKeyHeader"),icon:"key",subtitle:Ge.j.get("lookupTables.schemaBuilder.primaryKeyTooltip")},3:{title:Ge.j.get("lookupTables.schemaBuilder.sampleDataHeader"),endIndex:-1,subtitle:Ge.j.get("lookupTables.schemaBuilder.sampleDataTooltip")}},CELL_TYPES:{0:{type:"select",options:Object.keys(zC.W$).map((e=>({value:e,label:e})))},1:{type:"checkbox"}}},{valueTypes:t,primaryKeys:i,data:r=[],mode:n,columns:a}=this.props;let s;s=[t,i,...r];let o=e.ROW_HEADERS;"create"!==n&&(o={},s=[t,...r]);const[l,c]=this.getSchemaBuilderHintData(),d={iconName:"icon-act",title:Ge.j.get("lookupTables.noDataInLookup"),description:Ge.j.get("lookupTables.dataWillAppearHere")};return T.createElement(R.LookupTableSchemaBuilder,{className:KC().schemaBuilder,getHeaderIconName:this.getSchemaBuilderHeaderIconName,onAddColumnToRight:this.props.addColumnToRight,onDeleteColumn:this.handleDeleteColumn,onCellChange:this.handleCellChange,columns:this.getFilteredColumns(a,n),rowHeaders:o,cellTypes:e.CELL_TYPES,rows:s,onHeaderChange:this.handleHeaderChange,errors:(0,re.get)(this.props,["errors","schema"]),hintText:l,hintTextMode:c,readOnly:"create"!==n,headerReadOnly:this.isInUploadFileMode(),stateOverride:d})},this.getTableDataActions=()=>{const e={delete:()=>this.handleDataUpdate(this.truncateTable(),"delete"),merge:e=>this.handleDataUpdate(this.uploadFile(e&&e.uploadFileMeta,!0,e&&e.encodingType),"merge"),replace:e=>this.handleDataUpdate(this.uploadFile(e&&e.uploadFileMeta,!1,e&&e.encodingType),"replace")};return T.createElement(GA,{viewDataAction:this.handleViewData,dialogActions:e,mode:this.props.mode,progress:this.props.uploadProgress,isData:this.props.data&&this.props.data.length>0,setButtonInProcess:this.props.setButtonInProcess,inProcess:this.props.inProcess,primaryKeys:this.props.primaryKeys,columns:this.props.columns,sizeLimitAction:this.props.sizeLimitAction,fileSize:this.props.fileSize,isEditAllowed:this.props.isEditAllowed})},this.findJobInProgress=()=>this.props.jobs.unfinished.find((e=>e.status===zC.v$.inprogress)),this.getJobInProgress=()=>{const e=this.findJobInProgress();if(e)return T.createElement("div",{className:KC().jobInProgress},T.createElement(qt.Loader,{loaderType:"spinner",size:"small",className:KC().loader}),T.createElement("span",null,T.createElement("b",null,`${xA(e.requestType)} `),Ge.j.get("lookupTables.InProgress")))},this.getMainSection=()=>{const{name:e,description:t,ttl:i,mode:r,uploadFileMeta:n,sizeLimitAction:a}=this.props,s={name:e,description:t,ttl:i,sizeLimitAction:a};return T.createElement("div",{className:KC().lookupTableCreator},T.createElement("div",{className:KC().lookupTableCreatorBody},T.createElement(qt.Text,{variant:"subtitle"},Ge.j.get("lookupTables.lookupConfiguration")),T.createElement(OA,Object.assign({onChange:this.handleFormValues},s,{ref:e=>this.metaFormRef=e,mode:this.props.mode})),"create"===r&&T.createElement(g.CreationModeSelectorRadioGroup,{onChange:this.handleCreationModeChange,value:this.props.creationMode,className:{root:KC().row,title:KC().title,inlineRadio:KC().inlineRadio}}),this.isInUploadFileMode()&&this.renderUploadFileControls(),this.isInUploadFileMode()&&!n||!this.props.creationMode?null:T.createElement(T.Fragment,null,T.createElement(qt.Text,{variant:"textHeavy",className:KC().schemaBuilderHeading},Ge.j.get("create"===r?"lookupTables.schemaBuilder.title":"view"===r?"lookupTables.schemaBuilder.manageData":"lookupTables.schemaBuilder.dataPreview")),this.getTableDataActions(),this.getSchemaBuilder(),this.getSecondaryIndicesBuilder(),this.getJobInProgress())))},this.onNotificationPanelTabClick=(e,t)=>{t?this.setState({openTab:e,showBadgeInTab:Object.assign(Object.assign({},this.state.showBadgeInTab),{[e]:!1}),lastSeenHistoryTab:"history"===e?new Date:this.state.lastSeenHistoryTab}):this.setState({openTab:void 0})},this.state={showBadgeInTab:{queue:!1,history:!1},openTab:"queue",encodingType:"utf-8",lastSeenHistoryTab:null},this.notificationPanelComponent=(0,KA.Z)(this.getLookupNotificationPanel)}getDifferenceInSeconds(e,t){return Math.round(t-e)/1e3}checkIfFinishedJobsUpdated(){var e,t;const i=this.state.lastSeenHistoryTab;if(i&&this.getDifferenceInSeconds(i,new Date)<120)return!1;const r=(null===(t=null===(e=this.props)||void 0===e?void 0:e.jobs)||void 0===t?void 0:t.finished[0])||{},{modifiedAt:n}=r;if(n){const e=new Date(n),t=new Date;return this.getDifferenceInSeconds(e,t)<=120}return!1}checkIfUnfinishedJobsUpdated(e){const t=e.jobs.unfinished;return!t.length&&this.props.jobs.unfinished.length>0||t.length&&t.length<this.props.jobs.unfinished.length}componentDidMount(){"history"!==this.state.openTab&&this.checkIfFinishedJobsUpdated()&&this.setState({showBadgeInTab:Object.assign(Object.assign({},this.state.showBadgeInTab),{history:!0})})}componentDidUpdate(e){!this.state.showBadgeInTab.history&&this.checkIfFinishedJobsUpdated()&&"history"!==this.state.openTab&&this.setState({showBadgeInTab:Object.assign(Object.assign({},this.state.showBadgeInTab),{history:!0})}),this.checkIfUnfinishedJobsUpdated(e)&&"queue"!==this.state.openTab&&this.setState({showBadgeInTab:Object.assign(Object.assign({},this.state.showBadgeInTab),{queue:!0})})}getLookupNotificationPanel(e,t){return T.createElement(kA,{jobs:e,type:t})}hasErrors(){const e=Object.keys(this.props.primaryKeys).some((e=>this.props.primaryKeys[e]));return Object.keys(this.props.errors||{}).length>0||!e}renderUploadFileControls(){const e=(e=>{let t="default";return"create"!==e.mode&&(e.isUploadingFile?t=100===e.uploadProgress?"processing":"progress":e.hasUploadedFile?t="success":!e.hasUploadedFile&&e.uploadFileMeta&&(t="fail")),t})(this.props);return T.createElement("div",null,T.createElement(qt.Text,{variant:"textHeavy",className:KC().title},Ge.j.get("lookupTables.uploadFile"),this.props.uploadFileMeta?null:T.createElement(T.Fragment,null,T.createElement("br",null),T.createElement(qt.AssistiveText,null,Ge.j.get("lookupTables.fileUploadInstruction")))),this.props.uploadFileMeta?T.createElement("div",{className:KC().uploadChip},T.createElement(qt.Chip,{className:KC().chipWrapper,color:"grey",onClose:this.removeUploadFile},bA(this.props.uploadFileMeta))):T.createElement("div",null,T.createElement(R.UploadButton,{name:"lookupCsvFileUpload",onChange:this.handleUploadFileChange,color:"fail"===e?"destructive":"primary",status:e,value:100*(this.props.uploadProgress||0),onlyAccept:"text/csv",text:{default:"Upload",progress:"Uploading...",processing:"Uploading...",success:"Done",fail:"Failed"}}),T.createElement(FA,{value:this.state.encodingType,onEncodingChange:this.onEncodingValueChange.bind(this)})))}getHeaderPrimaryButtonData(e){const t=this.hasErrors()||this.isLookupLimitExceeded();let i,r,n;switch(e){case"create":i=Ge.j.get("common.create"),r=this.handleCreateLookup,n=t;break;case"view":i=Ge.j.get("lookupTables.editConfig"),r=()=>{this.props.changeMode("edit")},n=!this.props.isEditAllowed;break;case"edit":i=Ge.j.get("common.save"),r=this.handleUpdateLookup,n=!this.isEdited||t}return{label:i,onClick:r,disabled:n}}getCurrentRequirements(){var e,t;const i=[];this.props.name&&!(null===(e=this.props.errors)||void 0===e?void 0:e.name)||i.push(Ge.j.get("lookupTables.lookupRequirements.validName"));this.props.columns.find((e=>e.headerName))&&!(null===(t=this.props.errors)||void 0===t?void 0:t.schema)||i.push(Ge.j.get("lookupTables.lookupRequirements.column"));return Object.keys(this.props.primaryKeys).some((e=>this.props.primaryKeys[e]))||i.push(Ge.j.get("lookupTables.lookupRequirements.primaryKey")),i}getCheckErrorTooltip(e){return T.createElement(T.Fragment,null,Ge.j.get("lookupTables.lookupRequirements.explain"),T.createElement("ul",{className:KC().requirementList},e.map(((e,t)=>T.createElement("li",{key:t},e)))))}getHeaderPrimaryButton(){if(!this.props.mode)return;const{label:e,onClick:t,disabled:i}=this.getHeaderPrimaryButtonData(this.props.mode),r=this.getCurrentRequirements();return r.length&&"create"===this.props.mode&&Gr.currentUserHelper.hasFeatureFlag("UILookupErrorTooltip")?T.createElement(qt.Tooltip,{title:this.getCheckErrorTooltip(r),placement:"top",multiline:!0},T.createElement("div",null,T.createElement(qt.FeedbackButton,{color:"primary",feedbackState:"default",feedbackText:{default:e},disabled:i,"data-sumo-test":"header-primary-button"}))):T.createElement(qt.FeedbackButton,{color:"primary",feedbackState:"progress"===this.props.mode?"processing":"default",feedbackText:{default:e,processing:Ge.j.get("common.uploading")},onClick:t,disabled:i,"data-sumo-test":"header-primary-button"})}getHeaderSecondaryActions(e){const t=[{name:"copy-path",icon:qt.IconName.CopyPath,label:Ge.j.get("common.copyPath"),onClick:this.copyPath},{name:"export",icon:qt.IconName.Export,label:Ge.j.get("common.export"),onClick:()=>{g.libraryActionsService.runAction({actionType:re.ContentActionType.EXPORT},e)}}],i={name:"share",icon:qt.IconName.Share,label:Ge.j.get("common.share"),onClick:()=>{g.libraryActionsService.runAction({actionType:re.ContentActionType.SHARE},e)},dataSumoTest:"lookup-share-action-button"},r={name:"delete",icon:qt.IconName.Trash,label:Ge.j.get("common.delete"),onClick:()=>{g.libraryActionsService.runAction({actionType:re.ContentActionType.DELETE},e)}},n={name:"move",icon:qt.IconName.Move,label:Ge.j.get("common.move"),onClick:this.handleHeaderBarMoveAction};return this.props.contentItem&&this.props.contentItem.actions.map((e=>{e.type===re.ContentActionType.MOVE?t.push(n):e.type===re.ContentActionType.DELETE?t.push(r):e.type===re.ContentActionType.SHARE&&t.push(i)})),t}getHeaderSecondaryItems(e){return this.getHeaderSecondaryActions(e).map((({icon:e,label:t,onClick:i,dataSumoTest:r})=>T.createElement(qt.Menu.Item,{key:t,onClick:i,"data-sumo-test":r},T.createElement(qt.Menu.PrimaryAction,null,T.createElement(qt.Icon,{name:e})),T.createElement(qt.Menu.Text,null,t))))}getHeaderSecondaryButton(){switch(this.props.mode){case"edit":return T.createElement(qt.Button,{color:"secondary",onClick:this.handleEditCancel},Ge.j.get("common.cancel"));case"view":const e=this.props.contentItem;return T.createElement(qt.Menu,{btnRenderer:t=>T.createElement(qt.Button,{color:"secondary",onClick:t,icon:"angleDown",iconPos:"right",disabled:!e,"data-sumo-test":"lookup-actions-button"},Ge.j.get("common.actions")),dense:!0},e&&this.getHeaderSecondaryItems(e))}}isLookupLimitExceeded(){return Boolean(this.props.lookupLimit&&this.props.lookupLimit.tableCapacityRemaining<=0)}getLookupTableSubtitle(){if(!this.lookupContentLimitFF)return;const e=this.isLookupLimitExceeded();return"create"===this.props.mode&&this.props.lookupLimit?T.createElement("div",{className:KC().lookupLimitSubtitle},e?T.createElement(T.Fragment,null,T.createElement("div",{className:KC().lookupLimitSubtitleText},Ge.j.get("lookupTables.lookupLimit.limitExceeded")),T.createElement(qt.Tooltip,{title:0===Number(this.props.lookupLimit.tablesCreated-this.props.lookupLimit.totalTableCapacity)?Ge.j.get("lookupTables.lookupLimit.lookupsJustExceededTooltip",this.props.lookupLimit.totalTableCapacity):Ge.j.get("lookupTables.lookupLimit.lookupsAlreadyExceededTooltip",this.props.lookupLimit.totalTableCapacity,Number(this.props.lookupLimit.tablesCreated-this.props.lookupLimit.totalTableCapacity))},T.createElement(qt.Icon,{name:"question-circle",size:"small"}))):T.createElement(T.Fragment,null,T.createElement("div",{className:KC().lookupLimitSubtitleText},Ge.j.get("lookupTables.lookupLimit.lookupsRemaining",this.props.lookupLimit.tableCapacityRemaining,this.props.lookupLimit.totalTableCapacity)),T.createElement(qt.Tooltip,{title:Ge.j.get("lookupTables.lookupLimit.lookupsRemainingTooltip",this.props.lookupLimit.totalTableCapacity,this.props.lookupLimit.tablesCreated)},T.createElement(qt.Icon,{name:"question-circle",size:"small"})))):void 0}getHeaderProps(){return{entityName:EC.w.lookupTable,title:(0,g.getLookupTableTitle)(this.props.mode,this.props.name),subtitle:this.getLookupTableSubtitle(),showCopyPathButton:!1,onCopyPathButtonClicked:po.Z,primaryActionButton:this.getHeaderPrimaryButton(),secondaryActionButton:this.getHeaderSecondaryButton()}}getHeader(){return T.createElement(bC.hN,Object.assign({},this.getHeaderProps()))}getFilteredColumns(e,t){return"create"!==t?e.filter((e=>e.headerName)):e}render(){var e,t,i,r;const n=[{icon:"queue",tooltipLabel:Ge.j.get("lookupTables.notificationPanel.queue"),value:"queue",component:this.notificationPanelComponent(null===(e=this.props.jobs)||void 0===e?void 0:e.unfinished,Ge.j.get("lookupTables.notificationPanel.queue")),badge:(0,re.withIndex)(this.state.showBadgeInTab).queue,"data-sumo-test":"lookup-notification-panel-icon-queue"},{icon:"history",tooltipLabel:Ge.j.get("lookupTables.notificationPanel.history"),value:"history",component:this.notificationPanelComponent(null===(t=this.props.jobs)||void 0===t?void 0:t.finished,Ge.j.get("lookupTables.notificationPanel.history")),badge:(0,re.withIndex)(this.state.showBadgeInTab).history,"data-sumo-test":"lookup-notification-panel-icon-history"}];return T.createElement("div",{className:KC().lookupTableCreatorContainer},T.createElement(qt.Toast.CriticalToast,{open:(0,re.get)(this.props,["errors","toast"]),onClose:this.clearToastErrors,message:(0,re.get)(this.props,["errors","toast"],"")}),this.getHeader(),T.createElement(qt.Card,{className:KC().lookupTablesContainerCard},(null===(i=this.props.jobs)||void 0===i?void 0:i.unfinished.length)||(null===(r=this.props.jobs)||void 0===r?void 0:r.finished.length)?T.createElement(qt.TabDrawerPanel,{tabs:n,tabPos:"right",defaultDrawerState:null!==this.findJobInProgress(),defaultActiveTab:"queue",onTabClick:this.onNotificationPanelTabClick},T.createElement(qt.TabDrawerPanel.MainWindow,{className:KC().lookupTableCreatorSidePane},this.getMainSection())):this.getMainSection()))}}JA.editAllowedActions=["move","delete"];var ew=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};class tw extends T.Component{constructor(e){if(super(e),this.newState={},this.getContentPath=e=>ew(this,void 0,void 0,(function*(){let t;if(e)t=e;else{const e=Fm.w.getInstance();t=(yield e.getPersonal()).id}return{path:yield(0,g.getFullPath)(t),parentFolderId:t}})),this.onCreateLookup=()=>{const e={lookupTableId:this.props.lookupTableId,name:this.props.name},t=this.props.params.viewId;this.props.createLookupTableDone(),this.props.params.actions.onCreateLookup(e,t)},this.state={isEditAllowed:!!e.contentItem&&e.contentItem.actions.some((e=>"EDIT"===e.type)),lookupLimit:void 0},0!==e.params.viewId.indexOf("lt-"))if(k.basicPerformanceMeasurement.createMark(iw.open_old_lookup.mark),e.fetchLookupTable(e.params.viewId),e.fetchPreviewData(e.params.viewId),e.fetchNotificationStatus(e.params.viewId),e.contentItem){k.basicPerformanceMeasurement.createMark(iw.open_new_lookup.mark);const t=e.contentItem.parentId,i=e.contentItem.id;(0,g.getFullPath)(i).then((e=>{const i=e.replace(/\/([^\/]+)$/gi,"");this.props.updateContentPath({path:i,parentFolderId:t})}))}else{let t,i;SA(e.params.viewId).then((e=>{const r=e;return this.props.updateContentItem(r),this.setState((()=>({isEditAllowed:r.actions.some((e=>"EDIT"===e.type))}))),t=r.id,i=r.parentId,r})).then((()=>(0,g.getFullPath)(t))).then((e=>{const t=e.replace(/\/([^\/]+)$/gi,"");this.props.updateContentPath({path:t,parentFolderId:i})}))}else this.getContentPath(e.params.parentFolderId).then((({path:e,parentFolderId:t})=>{this.props.updateContentPath({path:e,parentFolderId:t})}));e.params.mode&&this.props.changeMode(e.params.mode)}componentDidUpdate(e){var t;e.name!==this.props.name&&(t=this.props.name,Ye.updateViewTitle(t))}componentDidMount(){Gr.currentUserHelper.hasFeatureFlag("UILookupContentLimit")&&(0,U_.Vz)().then((e=>this.setState({lookupLimit:e}))),0!==this.props.params.viewId.indexOf("lt-")?k.basicPerformanceMeasurement.measure(iw.open_old_lookup.measure):k.basicPerformanceMeasurement.measure(iw.open_new_lookup.measure)}componentWillUnmount(){this.props.stopFetchingNotifications()}render(){const e=0===this.props.params.viewId.indexOf("lt-");return e||this.props.hasSyncedTable?T.createElement(JA,Object.assign({},this.props,{isEditAllowed:this.state.isEditAllowed,onCreateLookup:this.onCreateLookup,mode:this.props.mode?this.props.mode:e?"create":"view",lookupLimit:this.state.lookupLimit})):T.createElement("div",{className:QC().preloaderSpinner},T.createElement("span",{className:"spinner is-visible"}),T.createElement("span",{className:QC().loadingText},Ge.j.get("lookupTables.fetchingLookupTable")))}}const iw={open_old_lookup:{mark:{module:"lookup",component:"lookupCreator",action:"open_old_lookup",id:"open_old_lookup",checkpoint:"startRenderingOldLookup"},measure:{to:"completeRenderingOldLookup",name:"open_old_lookup",id:"open_old_lookup",from:"startRenderingOldLookup"}},open_new_lookup:{mark:{module:"lookup",component:"lookupCreator",action:"open_new_lookup",id:"open_new_lookup",checkpoint:"startRenderingNewLookup"},measure:{to:"completeRenderingNewLookup",name:"open_new_lookup",id:"open_new_lookup",from:"startRenderingNewLookup"}}},rw=(0,Te.legacyConnect)(((e,t)=>WC(e,t)),((e,t)=>(0,Zn.bindActionCreators)(Object.assign(Object.assign({},r),we),(0,Ee.Lu)(t.params.viewId,e,he.wF.lookupTable))))(tw);s.module("sumoApp.lookupTable.containers",["sumoApp.workspaces"]).component("lookupTableCreatorContainer",(0,re.legacyReactToAngular)(rw,["params"]));let nw=!1;const aw=()=>Promise.all([i.e(5131),i.e(7931),i.e(9346),i.e(3823)]).then(i.bind(i,62620)).then((e=>(!1===nw&&(e.initializeCollection({reducerRegistry:ta.Z,store:Te.store,entityUpdated:()=>{}}),nw=!0),e)));s.module("sumoApp.installationTokens",[]).component("installationTokensContainer",(0,re.legacyReactToAngular)((e=>{const t={store:Te.store,reducerRegistry:ta.Z,componentsFactory:v.u};return x().createElement(C.F,{dynamicImportFn:aw,moduleName:"installationTokens",componentProps:t})}),["isSelectedTab"],[]));let sw=!1;const ow=()=>Promise.all([i.e(5131),i.e(7931),i.e(9346),i.e(3823)]).then(i.bind(i,45108)).then((e=>(!1===sw&&(e.initializeCollection({reducerRegistry:ta.Z,store:Te.store,entityUpdated:()=>{}}),sw=!0),e)));s.module("sumoApp.ingestBudgets",[]).component("ingestBudgetsContainer",(0,re.legacyReactToAngular)((e=>{const t={store:Te.store,reducerRegistry:ta.Z,componentsFactory:v.u};return x().createElement(C.F,{dynamicImportFn:ow,moduleName:"ingestBudgets",componentProps:t})}),["isSelectedTab"],[]));let lw=!1;const cw=()=>Promise.all([i.e(5131),i.e(7931),i.e(9346),i.e(3823)]).then(i.bind(i,32520)).then((e=>(!1===lw&&(e.initializeCollection({reducerRegistry:ta.Z,store:Te.store,entityUpdated:()=>{}}),lw=!0),e)));s.module("sumoApp.agents",[]).component("agentsContainer",(0,re.strictModeReactToAngular)((e=>{const t={store:Te.store,reducerRegistry:ta.Z,componentsFactory:v.u};return x().createElement(C.F,{dynamicImportFn:cw,moduleName:"agents",componentProps:t})})));var dw=i(16367),uw=i(78042),pw=i(16826),hw=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};class mw{constructor(e,t,i,r,n,a,o,l,c,d,u,p,h,m,y,v,f,S,b,E,T,x,C){this.$element=e,this.$timeout=t,this.$rootScope=i,this.eventService=r,this.viewServices=n,this.currentUserHelper=a,this.$q=o,this.$mdMenu=l,this.i18n=c,this.sumoDialog=d,this.launchService=u,this.$scope=p,this.tourService=h,this.menuService=m,this.userService=y,this.$uiRouter=v,this.routerNamedViewService=f,this.shortcutsService=S,this.applicationViewShimService=b,this.ngConnect=E,this.savePromptService=T,this.investigationViewService=x,this.isNavPreviouslyClosed=C,this.menuModels=s.extend({},F.WORKSPACE.MENU_MODELS),this.addMenuModels=s.extend({},F.WORKSPACE.ADD_MENU_MODELS),this.eventRegistrations=[],this.tabNavRecalculationSubject=new pw.BehaviorSubject(!0),this.forceUpdateReact=new pw.BehaviorSubject(!0),this.applicationState=g.applicationState,this.isOptionDisabled=e=>{const t=this.viewServices.getService(e);return t.isOptionDisabled&&t.isOptionDisabled()},this.isOptionHidden=e=>{const t=this.viewServices.getService(e);return t.isOptionHidden&&t.isOptionHidden()},this.getViewString=({$ctrl:e={}})=>{const{views:t=[]}=e.workspace;return t.map((e=>{let t=this.getObjectString({ele:e});return e.data&&(t+=this.getObjectString({ele:e.data})),t})).toString()},this.getObjectString=({ele:e})=>{let t="";const i=Object.keys(e);for(const r of i)Object.prototype.hasOwnProperty.call(e,r)&&(t+=e[r]);return t},this.whenSelectedViewChanged=(e,t)=>{if(this.workspace&&(null==e?void 0:e.type)!==(null==t?void 0:t.type)){(null==e?void 0:e.type)===F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE_LIST.type&&(e.params={});const i=[F.WORKSPACE.VIEWS.EXPLORE.type,F.WORKSPACE.VIEWS.ALERT_RESPONSE_PAGE.type];i.includes(null==t?void 0:t.type)?(this.isNavPreviouslyClosed=Boolean(this.workspace.navState.isClosed),this.workspace.closeNav()):i.includes(null==e?void 0:e.type)&&(this.workspace.navState.isClosed?this.isNavPreviouslyClosed?this.workspace.closeNav():this.workspace.openNav():this.isNavPreviouslyClosed=!1)}},this.setupTabNavigator=()=>{this.setupTabNavRecalculation()},this.notifyViewContentChange=e=>{e.items.forEach((t=>{const i=this.viewServices.getServiceForContentItem(t.type);i&&i.onContentEvent(t,e)}))},this.setupPanelResizeEvent=()=>{this.$scope.$on("angular-resizable.resizeEnd",(()=>{this.onNavResize()}))},this.setupKeyboardShortcuts=()=>{this.eventService.subscribe("updateKeyboardShortcutsPreference",(()=>{this.currentUserHelper.getUserSetting("keyboardShortcuts")&&this.initHotkeys()}))},this.onNavResize=()=>{this.triggerTabNavRecalculation();this.workspace.currentView&&this.workspace.broadcastViewMessage({type:F.WORKSPACE.VIEW_MESSAGE_TYPES.RESIZE,arguments:{navClosed:this.workspace.navState.isClosed}})},this.createCloseDialogOptions=()=>{const e=this.onSearchClosePreferenceChange;this.closeSearchDialogOptions={template:"js/features/workspaces/views/templates/closeSearchDialog.html",title:this.i18n.get("bento.confirm_search_close_title"),isWarning:!0,controller:["i18n",function(t){const i=this;return i.__=t.get("bento"),i.changeShowDialog=t=>{e(t)},i.dontShowDialogAgain=!1,i}],controllerAs:"dialogCtrl",dialogSize:"small",showOk:!0,showCancel:!0,okButtonContent:this.i18n.get("bento.confirm_search_close_ok_text")}},this.onSearchClosePreferenceChange=e=>{this.searchCloseDialogPreference=e},this.$onDestroy=()=>{var e;_.each(this.eventRegistrations,(e=>e())),null===(e=this.tabBadgeSubs$)||void 0===e||e.unsubscribe()},this.initHotkeys=()=>{this.shortcutsService.initHotkeys({addView:this.addView,closeTab:this.closeTab,duplicateSearch:this.duplicateSearch},this.workspace)},this.getViewParams=e=>({"#":null,workspaceId:this.workspace.id,viewId:e.id,openInEditMode:!1,subId:"",changedPanelId:void 0}),this.handleMenuClick=(e,t,i,r,n)=>{switch(t){case F.WORKSPACE.MENU_ACTIONS.close.action:r?this.closeTab(e):this.onCloseTabClick(e,void 0);break;case F.WORKSPACE.MENU_ACTIONS.closeOther.action:r?this.closeOtherTabs(e):this.onCloseOtherTabs(e);break;case F.WORKSPACE.MENU_ACTIONS.closeAll.action:r?this.closeAllTabs():this.onCloseAllTabs();break;case F.WORKSPACE.MENU_ACTIONS.closeRight.action:r?this.closeTabsToTheRight(e):this.onCloseTabsToTheRight(e);break;case F.WORKSPACE.MENU_ACTIONS.popout.action:this.launchService.launchInWindow(e.type,e.id),this.workspace.removeViewById(e.id);break;case F.WORKSPACE.MENU_ACTIONS.pin.action:case F.WORKSPACE.MENU_ACTIONS.unpin.action:this.viewServiceAction(e,t);break;case F.WORKSPACE.MENU_ACTIONS.duplicate.action:case F.WORKSPACE.MENU_ACTIONS.duplicateCurrent.action:case F.WORKSPACE.MENU_ACTIONS.duplicateOriginal.action:this.duplicateView(e,i,t)}},this.hasNonEmptySearchViews=e=>e.some((e=>e.type===F.WORKSPACE.VIEWS.SEARCH.type&&e.data&&e.data.searchExpression)),this.confirmClose=e=>{const t=_.getPath(SumoApp,"user.userPreferencesModel.getConfirmTabClose"),i=this.$q.defer(),r=this.$q.defer();if(t&&t()&&this.hasNonEmptySearchViews(e))return this.sumoDialog.open(this.closeSearchDialogOptions);if(this.savePromptService.shouldShowPrompt(e)){const t=e.find((e=>this.savePromptService.shouldShowPrompt([e])));return this.savePromptService.openPrompt().then((i=>hw(this,void 0,void 0,(function*(){i&&(yield this.closeTab(t)),this.onCloseTabs(e.filter((({id:e})=>e!==t.id)))})))),this.workspace.showView(t),r.resolve({value:"$notok"}),i.resolve({closePromise:r.promise}),i.promise}return r.resolve({value:"$ok"}),i.resolve({closePromise:r.promise}),i.promise},this.closeTab=(e,t)=>{if(t&&t.target&&-1!==t.target.className.indexOf("ws-tab-action")){$.hideAllToasts();s.element(t.target).closest(".ws-tab").detach()}return this.workspace.removeView(e).then(this.handleViewRemoved)},this.optOutCloseSearchDialog=()=>{if(this.searchCloseDialogPreference){this.searchCloseDialogPreference=!1;const e=_.getPath(SumoApp,"user.userPreferencesModel");e&&e.setConfirmTabClose(!1,!0)}},this.handleViewRemoved=e=>{this.viewServices.exitStickyView(e);const t=this.getViewService(e.type);t&&t.viewRemoved(e,this.workspace)},this.handleViewsRemoved=e=>{_.each(e,(e=>{const t=this.getViewService(e.type);t&&t.viewRemoved(e,this.workspace)}));this.$uiRouter.getPlugin("sticky-states").exitSticky()},this.onCloseOtherTabs=e=>{const t=_.without(this.workspace.views,e);this.confirmClose(t).then((t=>{t.closePromise.then((t=>{"$ok"===t.value&&(this.optOutCloseSearchDialog(),this.closeOtherTabs(e))}))}))},this.closeOtherTabs=e=>{this.workspace.removeAllViews(e,this.handleViewsRemoved)},this.onCloseTabs=e=>{e.length>0&&this.confirmClose(e).then((t=>{t.closePromise.then((t=>{"$ok"===t.value&&(this.optOutCloseSearchDialog(),this.workspace.removeViews(e,this.handleViewsRemoved))}))}))},this.onCloseAllTabs=()=>{this.confirmClose(this.workspace.views).then((e=>{e.closePromise.then((e=>{"$ok"===e.value&&(this.optOutCloseSearchDialog(),this.closeAllTabs())}))}))},this.closeAllTabs=()=>{this.workspace.removeAllViews(null,this.handleViewsRemoved)},this.getViewsToTheRight=e=>{const t=this.workspace.views.indexOf(e);return-1===t?[]:this.workspace.views.filter(((e,i)=>i>t))},this.onCloseTabsToTheRight=e=>{const t=this.getViewsToTheRight(e);this.confirmClose(t).then((t=>{t.closePromise.then((t=>{"$ok"===t.value&&(this.optOutCloseSearchDialog(),this.closeTabsToTheRight(e))}))}))},this.closeTabsToTheRight=e=>{const t=this.getViewsToTheRight(e);this.workspace.removeViews(t,this.handleViewsRemoved)},this.viewServiceAction=(e,t)=>{const i=this.getViewService(e.type);i&&_.isFunction(i.implementAction)&&i.implementAction(e,t)},this.handleDoubleClick=e=>{const t=this.viewServices.getService(e.type);(!t||t.canBeRenamed(e))&&this.workspace.enterEditMode(e)},this.canBeRenamed=e=>{let t=!1;const i=e&&e.type||"";if(e){const r=(F.WORKSPACE.MENU_MODELS||{})[i]||[],n=this.viewServices.getService(i);n&&(t=r.indexOf("rename")>-1&&n.canBeRenamed(e))}return t},this.isValidTitle=e=>{const t=SumoUtil.isValidName(e,["/"]);return this.$rootScope[this.hasErrorProp]=!t,t},this.cleanupOldInvestigationTabs=()=>hw(this,void 0,void 0,(function*(){const{getMetricsExplorerStorageService:e}=yield(0,th.K)(),t=this.workspace.views.map((e=>e.id)),i=e().keys().filter((e=>!t.includes(e)));i.length>0&&e().batchRemove(i)})),this.duplicateView=(e,t,i)=>{switch(e.type){case F.WORKSPACE.VIEWS.SEARCH.type:this.duplicateSearch(!1,!0,e,i);break;case F.WORKSPACE.VIEWS.NEWBOARD.type:this.duplicateNewboard(e);break;case F.WORKSPACE.VIEWS.DASHBOARD.type:this.duplicateDashboard(e,t);break;case F.WORKSPACE.VIEWS.METRICS.type:this.duplicateMetrics(e);break;case F.WORKSPACE.VIEWS.LIVE_TAIL.type:this.duplicateLiveTail(e);break;case F.WORKSPACE.VIEWS.INVESTIGATION.type:this.duplicateInvestigation(e);break;case F.WORKSPACE.VIEWS.TRACE_ANALYTICS.type:this.duplicateTracesTab(e);break;case F.WORKSPACE.VIEWS.SPANS_ANALYTICS.type:this.duplicateSpansTab(e)}},this.duplicateSearch=(e,t,i,r)=>{const n=i||this.workspace.currentView,a=r===F.WORKSPACE.MENU_ACTIONS.duplicateOriginal.action;if(n.type===F.WORKSPACE.VIEWS.SEARCH.type){this.viewServices.getService(F.WORKSPACE.VIEWS.SEARCH.type).cloneView({onlyTimeRange:e,view:n,isDrillDown:!0,alsoTimeRange:t,duplicateOriginal:a})}},this.duplicateNewboard=e=>hw(this,void 0,void 0,(function*(){var t,i,r,n,a,s,o;if(!this.selectAppState)return;const l=this.selectAppState(),c=`newDashboard_${e.id}`,d=null!==(o=null===(s=null===(a=null===(n=null===(r=null===(i=null===(t=null==l?void 0:l.views)||void 0===t?void 0:t.dashboards)||void 0===i?void 0:i.dashboardUIState)||void 0===r?void 0:r[c])||void 0===n?void 0:n.dashboards)||void 0===a?void 0:a[e.id])||void 0===s?void 0:s.contentId)&&void 0!==o?o:void 0;let u=(0,re.ensureDefined)(l.entities.dashboards)[e.id];u||(u=yield this.reduxActions.fetchDashboard(c,e.id));const p=yield this.reduxActions.saveAsDashboard(c,u,d),{openDashboard:h}=yield(0,Sv.$)();h(p.items[0])})),this.duplicateDashboard=(e,t)=>{this.viewServices.getService(F.WORKSPACE.VIEWS.DASHBOARD.type).cloneView(e,t)},this.duplicateMetrics=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.METRICS.type).cloneView(e)},this.duplicateTracesTab=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.TRACE_ANALYTICS.type).cloneView(e)},this.duplicateSpansTab=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.SPANS_ANALYTICS.type).cloneView(e)},this.duplicateLiveTail=e=>{this.viewServices.getService(F.WORKSPACE.VIEWS.LIVE_TAIL.type).cloneView(e)},this.duplicateInvestigation=e=>hw(this,void 0,void 0,(function*(){var t,i,r;if(!this.selectAppState)return;const{migrateInvestigationPage:n,getMetricsExplorerStorageService:a,MetricsExplorerNetworkService:s}=yield(0,th.K)(),o=null!==(i=null===(t=this.selectAppState().views.investigation)||void 0===t?void 0:t.tabs.get(e.id))&&void 0!==i?i:null===(r=n(a().load(e.id)))||void 0===r?void 0:r.data;if(o)this.investigationViewService.cloneView(o);else{const t=yield s.fetchMetricsExplorerContentItem(e.id);t&&(yield s.copyMetricsExplorerContentItem(t))}})),this.addView=(e,t="")=>{const i=this.getViewService(e);i&&(this.$mdMenu.hide(),i.newTab(this.workspace,t))},this.closeNav=()=>{this.workspace.closeNav(),this.workspace.actions.saveWorkspaceConfig(),this.$timeout((()=>{this.onNavResize()}),100)},this.openNav=()=>{this.workspace.openNav(),this.workspace.actions.saveWorkspaceConfig(),this.$timeout((()=>{this.onNavResize()}),100)},this.getViewService=e=>{const t=this.viewServices.getService(e);return t||$.logWarnLocal("No service registered for type: "+e),t},this.getViewIcon=e=>this.getViewService(e.type).getIcon(e),this.getViewStateIcon=e=>this.getViewService(e.type).getStateIcon(e),this.setupTabNavRecalculation=()=>{this.triggerTabNavRecalculation()},this.triggerTabNavRecalculation=()=>{this.tabNavRecalculationSubject.onNext(!0)},this.buildClickMenu=e=>(this.menuModels[e.type]||[]).concat(this.menuModels.default).map((t=>{const i=F.WORKSPACE.MENU_ACTIONS[t];return{id:i.action,itemType:i.action,label:this.i18n.get(`workspaces.tabActions.${i.action}`),isDisabled:this.getDisabledPromise(e,i),isHidden:this.shouldHideAction(e,i)}})).filter((e=>!e.isHidden)),this.shouldHideAction=(e,t)=>{if(!t.canBeHidden)return!1;const i=this.workspace.views[this.workspace.views.length-1];return this.viewServices.getService(e.type).isActionHidden(e,t.action)||i===e&&"closeRight"===t.action},this.getDisabledPromise=(e,t)=>{let i;return t.canBeDisabled&&(i=Promise.resolve(this.viewServices.getService(e.type).isActionDisabled(e,t.action))),i},this.setViews=e=>{this.workspace&&this.workspace.setViews(e)},this.onRenameView=(e,t)=>{const i=this.viewServices.getService(t.type);return i?i.updateTitle(t,e).then((()=>{this.workspace.updateTitle(t.id,e),this.workspace.setBrowserTitle(t)})):this.$q.resolve()},this.onCloseTabClick=(e,t)=>{this.confirmClose([e]).then((i=>{i.closePromise.then((i=>{"$ok"===i.value&&(this.optOutCloseSearchDialog(),this.closeTab(e,t))}))}))},this.filteredAddMenuModels=()=>_.map(this.addMenuModels,(({type:e})=>{const t=this.i18n.get(`workspaces.addTabActions.${e}.shortcutLabel`),i=this.getViewService(e),r=this.isOptionDisabled(e),n=this.isOptionHidden(e);return{itemType:e,label:this.i18n.get(`workspaces.addTabActions.${e}.label`),icon:i?i.getIcon():void 0,shortcutLabel:this.showShortcut?`${this.shortcutPrefix}${t}`:void 0,isDisabled:void 0!==r?Promise.resolve(r):void 0,disabled:r,isHidden:n||!1}})).filter((e=>!e.isHidden)),this.onAddTabClick=(e,t=!1)=>{const i=$(".tab-navigator-react__button-tab"),r="auto"===i.css("left")?0:parseInt(i.css("left"),10),n="auto"===i.css("top")?0:parseInt(i.css("top"),10);this.offsetY=_.isUndefined(this.offsetY)?n+(parseInt(i.css("height"),10)+12):this.offsetY;const a={offset:{top:this.offsetY,left:r},width:"240px",positionMode:t?{left:"target-right",top:"target"}:{left:"target",top:"target"}},s=this.filteredAddMenuModels();this.menuService.showMenu(e,s,a).then((e=>{this.addViewFromNewTab(e.itemType)}))},this.isNavPreviouslyClosed=!1,this.showPartnerHerLogo=this.currentUserHelper.hasFeatureFlag("UIShowHerjavecLogo"),this.showPartnerEseLogo=this.currentUserHelper.hasFeatureFlag("UIShowEsentireLogo"),this.kansoEnabled=(0,g.isKansoEnabled)()}$postLink(){this.setupTabNavigator(),this.$scope.$watch(this.getViewString,((...e)=>{this.forceUpdateReact.onNext(!0)})),this.tabBadgeSubs$=mt.tabBadgeService.updateBadge$.subscribe((()=>{this.forceUpdateReact.onNext(!0)}))}$onInit(){return hw(this,void 0,void 0,(function*(){os.fetchUsersList(),this.savePromptService.setWorkspace(this.workspace),this.cleanupOldInvestigationTabs(),g.contentAdminModeStateService.syncState(),this.$element.addClass("workspace-layout bento-app"),this.actions={onRenameView:this.onRenameView,onCloseTabClick:this.onCloseTabClick,onAddTabClick:this.onAddTabClick,addViewFromNewTab:e=>this.addViewFromNewTab(e),setViews:this.setViews,showView:this.workspace.showView,whenSelectedViewChanged:this.whenSelectedViewChanged,onViewActionItemClick:(e,t,i)=>{const r=s.element(s.element(i.target).closest(".tab-navigator-react__tab"));this.handleMenuClick(e,t.itemType,i.nativeEvent,!1,r)}},this.createCloseDialogOptions(),this.namedViews=this.routerNamedViewService.getNamedViews("workspaceState"),this.addMenuModels=_.filter(this.addMenuModels,(e=>_.isUndefined(e.privilege)||this.currentUserHelper.hasPrivilege(e.privilege))),_.each(this.addMenuModels.items,(e=>{const t=this.getViewService(e.type);e.icon=t.getIcon(),e.disabledTooltip=t.getDisabledTooltip?t.getDisabledTooltip():""})),this.eventRegistrations.push(this.$rootScope.$on("angular-resizable.resizeEnd",((e,t)=>{this.workspace.setNavWidth(t.width),this.workspace.actions.saveWorkspaceConfig()}))),this.setupKeyboardShortcuts(),this.setupPanelResizeEvent(),this.userService.getUsers(),this.MSPLogo=this.currentUserHelper.getDarkMspLogo();const e=$("html").hasClass("windows");this.shortcutPrefix=e?"g ":"alt+";const{fetchDashboard:t,saveAsDashboard:i}=yield(0,Sv.$)();this.reduxActions=this.ngConnect((e=>({showShortcut:(0,Gr.selectKeyboardShortcutsSetting)(e),selectAppState:()=>e})),{fetchDashboard:t,saveAsDashboard:i})((({showShortcut:e,selectAppState:t})=>{this.showShortcut=e,this.selectAppState=t,this.showShortcut&&this.initHotkeys()}),this.$scope),this.setupLibraryEventHandling(),this.applicationViewShimService.checkForMetricsDataIngestion(3e4);let r=!0;g.contentAdminModeStateService.getState$().takeUntilScopeDestroyWithSafeApply(this.$scope,(e=>{if(r)r=!1;else if(e&&"default"===this.workspace.id){this.workspace.actions.changeCurrentWorkspaceAndUpdateConfig("admin");this.$uiRouter.getPlugin("sticky-states").exitSticky()}else e||"admin"!==this.workspace.id||(this.workspace.actions.changeCurrentWorkspaceAndUpdateConfig("default"),this.closeAllTabs())})).subscribe();const n=dw.Heimdall.getPlugin("applicationLoadTimePerformance");n&&!(0,uw.isApplicationLoadMeasured)()&&n.markAppLoaded(),"true"===this.cookieMismatch&&g.applicationState.go(".",{cm:void 0}).then((()=>{(0,g.showCriticalNotification)(this.i18n.get("bento.cookie_mismatch"))}))}))}setupLibraryEventHandling(){g.contentActionNotificationService.getContentActionResult$().takeUntilScopeDestroyWithSafeApply(this.$scope,this.notifyViewContentChange).subscribe()}addViewFromNewTab(e){this.addView(e,"newTabButton")}}mw.$inject=["$element","$timeout","$rootScope","eventService","viewServices","currentUserHelper","$q","$mdMenu","i18n","SumoDialog","launchService","$scope","tourService","menuService","userService","$uiRouter","routerNamedViewService","shortcutsService","applicationViewShimService","ngConnect","savePromptService","investigationViewService"];const gw={bindings:{cookieMismatch:"<",workspace:"<"},template:'\n    <unified-nav ng-if="$ctrl.kansoEnabled"></unified-nav>\n    <div ng-if="!$ctrl.kansoEnabled" id="bento-nav" class="bento-nav"\n      ng-class="{\'hidden\': $ctrl.workspace.navState.isClosed, \'-herokuVisible\': $ctrl.isHeroku}"\n      resizable r-flex="true" r-directions="[\'right\']" r-width="$ctrl.workspace.navState.width">\n      <bento-side-nav close-nav="$ctrl.closeNav()" state-service="$ctrl.workspace.sideNavStateService">\n      </bento-side-nav>\n    </div>\n    <div class="ws-tabbed-pane full-size" ng-class="{\'-herokuVisible\': $ctrl.isHeroku, \'bento-in-kanso-workspace-kanso-enabled\': $ctrl.kansoEnabled}">\n      <div ng-if="!$ctrl.kansoEnabled" class="ws-tabsbar">\n        <div ng-click="$ctrl.openNav()" ng-class="$ctrl.workspace.navState.isClosed ? \'nav-open\' : \'hidden\'">\n          <div class="bento-side-nav__header__logo -collapsed">\n            <div class="msp" ng-if="$ctrl.MSPLogo">\n              <img class="msp__logo" ng-src="{{$ctrl.MSPLogo}}"/>\n              <div class="msp__sumo">\n                <span class="msp__powered">{{ \'bento.powered_by\' | i18nText}}</span>\n                <div class="msp__sumologo"></div>\n              </div>\n            </div>\n            <div class="bento-logo" ng-if="!$ctrl.MSPLogo"\n            ng-class="{ \'bento-logo_partnerHer\': $ctrl.showPartnerHerLogo, \'bento-logo_partnerEse\': $ctrl.showPartnerEseLogo }"></div>\n          </div>\n          <md-icon md-svg-icon="hamburger"></md-icon>\n        </div>\n        <tab-navigator-react\n          class="tab-navigator-react"\n          views="$ctrl.workspace.views"\n          get-view-action-items="$ctrl.buildClickMenu"\n          get-new-view-items="$ctrl.filteredAddMenuModels"\n          actions="$ctrl.actions"\n          max-tabs-reached="vm.maxTabsReached"\n          rename-validator="$ctrl.isValidTitle"\n          selected-view="$ctrl.workspace.currentView"\n          editing-view="$ctrl.editingView"\n          tab-nav-recalculation-subject="$ctrl.tabNavRecalculationSubject"\n          can-be-renamed="$ctrl.canBeRenamed"\n          force-update-react="$ctrl.forceUpdateReact"\n        ></tab-navigator-react>\n      </div>\n      <div class="ws-content" style="box-sizing: border-box">\n        <header-bar-container ng-if="$ctrl.kansoEnabled"></header-bar-container>\n        <div class="ws-pane full-size active" ng-class="{active: selected}">\n          <div class="ws-pane-view"\n            ng-repeat="namedView in $ctrl.namedViews"\n            ng-show="$ctrl.applicationState.includes(\'{{namedView.routeName}}\')"\n            ui-view="{{namedView.viewName}}"></div>\n          <div class="ws-pane-view unique-instance {{$ctrl.applicationState.current.params.className}}"\n          ng-if="!$ctrl.routerNamedViewService.isNamedView($ctrl.applicationState.current.name)" ui-view></div>\n        </div>\n      </div>\n      <save-prompt></save-prompt>\n    </div>',controller:mw},yw=[{name:"app",abstract:!0,url:"?cm",resolve:{workspace:["workspacesService","viewServices",(e,t)=>e.getOrCreateWorkspace(t)],cookieMismatch:[()=>g.applicationState.transitionParams.cm]},params:{workspaceId:"default",cm:{dynamic:!0,squash:!0,value:void 0}},views:{root:{component:"workspaceLayout"}}}],vw=s.module("sumoApp.workspace.view",["ui.router","ngMaterial","sumoApp.workspaces"]);vw.component("workspaceLayout",gw),vw.config(["$stateProvider",e=>{yw.forEach((t=>{e.state(t)}))}]);const fw=s.module("sumoApp.bentoHeimdallSetup",["sumoApp.currentUser.state","ui.router"]),_w=[{name:"routeChangePerformance"},{name:"applicationLoadTimePerformance",options:{blockingRequests:[{identifier:"authUser",path:"json/v1/authentication/user"},{identifier:"getUserSettings",path:"json/v1/userSettings/get"},{identifier:"getAccountStatus",path:"/api/v1/account/status"},{identifier:"getPassPolicy",path:"/api/v1/passwordPolicy"}],redirectionOptions:{saveOnIncomplete:"bentoLogin"},testImageOptions:{url:"/ui/images/test_image.png",sizeKB:13.38}}}];fw.service("heimdallDataHandler",uw.HeimdallDataHandler),fw.run(["currentUserHelper","$transitions","heimdallDataHandler",(e,t,i)=>{dw.Heimdall.init({plugins:_w}),dw.Heimdall.onData(i.onData),t.onStart({to:"**"},(e=>{const t=e.to().name,i=e.params();dw.Heimdall.getPlugin("routeChangePerformance").routeChange(t+":"+JSON.stringify(i))}))}]);i(28827);const Sw=["sumoApp.http","sumoApp.account","sumoApp.accountOverview","sumoApp.managePlan","sumoApp.managePayment","sumoApp.organizations","sumoApp.requestUpgrade","sumoApp.core","sumoApp.currentUser","sumoApp.components","sumoApp.healthEvents","sumoApp.archive","sumoApp.installationTokens","sumoApp.ingestBudgets","sumoApp.agents","sumoApp.collectionDataForwarding","sumoApp.metricsExtraction","sumoApp.metrics","sumoApp.metrics.shortCode","sumoApp.queries","sumoApp.liveTail","sumoApp.content","sumoApp.appCatalog","sumoApp.library","sumoApp.libraryCommon",(0,dt.createLoginWorkspaceNgModule)(),"sumoApp.timeCompare","sumoApp.summarizeDelta","sumoApp.sumoCharts","sumoApp.search","sumoApp.usersAndRoles.workspace","sumoApp.megaCSiem.workspace","sumoApp.manage","sumoApp.csiem","sumoApp.dataModels","sumoApp.dashboard","sumoApp.backboneDashboard","sumoApp.help","sumoApp.tour","advanceTable","ngAnimate","ngSanitize","ui.router","ngMessages","ngMaterial","sumoApp.setupWizard","sumoApp.explore","sumoApp.bentoHeimdallSetup","sumoApp.lookupTable.containers",...ds.bB,"sumoApp.bentoApp","sumoApp.workspaces","sumoApp.logging","sumoApp.developer.workspace","sumoApp.workspace.view","sumoApp.manage.workspace","sumoApp.manage.view","sumoApp.betaParticipation"],bw={name:"app.dashboard",url:"/dashboard/:viewId?:mode",template:'<load-placeholder loading="vm.showTabContent">\n              <backbone-dashboard\n                  dashboard-id="{{vm.id}}"\n                  on-title-change="vm.updateTitle(title)"\n                  view="vm.view"\n                  id="bento-dashboard"\n                  broadcast-msg$="vm.broadcastMsg$">\n              </backbone-dashboard>\n            </load-placeholder>',controller:ce,controllerAs:"vm",params:{initTabName:void 0,openInEditMode:{value:!1,dynamic:!0},openInLiveMode:{value:!1,dynamic:!0}}};const Ew=[{name:"dashboard",stateDefinition:bw,microserviceFetch:()=>{const e=(0,mh.Z2)("dashboard");return{lazy:e,promise:e?i.e(3823).then(i.bind(i,36384)):void 0}}},{name:"search",stateDefinition:{name:"app.search",url:"/search/{viewId:.*}?:id,query,startTime,endTime,parameters",template:'\n    <div ng-switch="vm.showTabContent">\n      <search-react\n        expose-scope\n        lazy-compile="vm.showTabContent"\n        lazy-template-id="search"\n        ng-switch-when="true"\n        ng-attr-id="{{ vm.id }}"\n        view-controller="vm"\n        search-data="vm.view.params.searchData"\n        drilldown-data="vm.view.params.drilldownData"\n        simple-search-query="vm.view.params.simpleSearchQuery"\n        transaction-drilldown-data="vm.view.params.transactionDrilldownData"\n        reattach-query-data="vm.view.params.reattachQueryData"\n        view="vm.view"\n        on-title-change="vm.updateTitle"\n        search-id="vm.id"\n        broadcast-msg$="vm.broadcastMsg$">\n      </search-react>\n      <search-dummy view="vm.view" class="bento-search-dummy" ng-switch-default></search-dummy>\n    </div>',controller:class extends ce{$onInit(){var e,t,i,r,n,a,s,o;super.$onInit(),(null===(t=null===(e=this.view)||void 0===e?void 0:e.data)||void 0===t?void 0:t.displaySearchExpression)&&!(null===(r=null===(i=this.view)||void 0===i?void 0:i.data)||void 0===r?void 0:r.searchExpression)&&(this.view.data.searchExpression=this.view.data.displaySearchExpression),(null===(a=null===(n=this.view)||void 0===n?void 0:n.data)||void 0===a?void 0:a.displayTimerangeText)&&!(null===(o=null===(s=this.view)||void 0===s?void 0:s.data)||void 0===o?void 0:o.timerangeText)&&(this.view.data.timerangeText=this.view.data.displayTimerangeText)}},controllerAs:"vm",params:{initTabName:void 0}}},{name:"livetail",stateDefinition:{name:"app.livetail",url:"/livetail/:viewId",templateUrl:"js/features/workspaces/views/templates/live-tail.html",controller:ce,controllerAs:"liveTailWorkspaceCtrl"}}];var Tw=i(37453),xw=i(22116),Cw=i(95784);const Aw=($.logInfo&&$.logInfo("Fetching states for routing. states:"+JSON.stringify(Ew)),Ew.reduce(((e,{name:t,microserviceFetch:i,stateDefinition:r})=>(0,mh.Z2)(t)&&i?e:[...e,r]),[hf])),ww=["$stateProvider","$urlRouterProvider","$uiRouterProvider",(e,t,i)=>{i.plugin(Tw.K),i.plugin(xw.DSRPlugin),t.deferIntercept(),Aw.forEach((t=>e.state(t))),t.otherwise((()=>($.logError&&$.logError("Unknown path, Re-routing url to homePage."),"/home")))}],Iw=["$transitions","$trace","$rootScope","workspacesService","currentUserHelper",(e,t,i,r,n)=>{(0,Cw.A)(i),k.appPulseLogger.resumePulse();const a={to:"**"};let s;const o="routing",l="tab-switch";e.onStart(a,(e=>{s=(new Date).getTime().toString();const t={module:o,action:l,id:s};return k.performanceLogService.mark(t,"tabSwitchStart"),!i.hasError})),e.onBefore(a,(e=>{let t=!0;return t=!(0,mh.ti)(e,dt.loginService)&&(!(0,mh.UT)(e)||(0,mh.Wp)(e,r,D.UrlHelper)),t})),e.onSuccess({},(e=>{if((0,re.get)(e.$to(),["self","sticky"])){const t=r.getCurrent();if(t){const i=e.params("to").viewId,r=t.getViewType(e.$to().name),n=t.findView(i||r);n&&t.setCurrentView(n)}}const t={module:o,action:l,id:s};k.performanceLogService.mark(t,"tabSwitchEnd");const i={from:"tabSwitchStart",to:"tabSwitchEnd",name:"tabSwitch"};k.performanceLogService.measure(t,i);const a={from:e.$from().name,to:e.$to().name};n.get()&&k.performanceLogService.send(t,i,a)}));const c={to:e=>void 0!==e.defaultSubstate};e.onBefore(c,(e=>{const t=e.to().defaultSubstate;return e.router.stateService.target(t,{})}))}];var Rw;!function(e){e.tabContentRendered="tab_content_rendered",e.viewTitleChange="view_title_change"}(Rw||(Rw={}));class Dw{constructor(e,t){this.tabContentRendered=({payload:e})=>{const{id:t,view:i}=e;this.workspaceViewService.setupContentView(t,i)},this.updateViewTitle=({payload:{id:e,title:t}})=>{this.workspacesService.getWorkspace(g.applicationState.params.workspaceId).updateTitle(e,t)},this.workspaceViewService=e,this.workspacesService=t;const{tabContentRendered:i,viewTitleChange:r}=Rw;this.customHandlers={[i]:this.tabContentRendered,[r]:this.updateViewTitle}}}Dw.$inject=["workspaceViewService","workspacesService"];const Ow=(0,cn.createSelector)([E.selectWorkspaceConfigSetting],(e=>{const t=e?_.getPath(e,`workspaces.${e.currentWorkspaceId}.navState`):{};return t||{}})),Nw=(0,cn.createSelector)([Ow],(({width:e})=>e)),Mw=(0,cn.createSelector)([Ow],(({isClosed:e})=>e)),kw=(0,cn.createStructuredSelector)({width:Nw,isClosed:Mw});var Lw=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function Pw(e){return{navSizeState:kw(e)}}function Fw(e){return(0,Te.legacyConnect)(Pw)(function(e){return class extends T.Component{constructor(e){super(e),this.state={width:1280},this.hasBeenMounted=!1,this.onComponentWidthChange=e=>{if(this.hasBeenMounted){const{width:t}=e[0].contentRect,{onWidthChange:i}=this.props;this.setState({width:t},(()=>{null==i||i(t)}))}},this.debouncedOnComponentWidthChange=(0,uo.Z)(this.onComponentWidthChange,100),this.resizeObserver=new ResizeObserver(this.debouncedOnComponentWidthChange)}componentDidMount(){this.hasBeenMounted=!0;const e=Ai.findDOMNode(this);e instanceof HTMLElement&&this.resizeObserver.observe(e)}componentWillUnmount(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.hasBeenMounted=!1}render(){const t=this.props,{measureBeforeMount:i,className:r,style:n}=t,a=Lw(t,["measureBeforeMount","className","style"]),s=Object.assign({className:r,style:n},a);return i&&!this.hasBeenMounted?T.createElement("div",{className:r,style:n}):T.createElement(e,Object.assign({},s,this.state))}}}(e))}var Uw=i(91089);const Vw=function({SearchQueryData:e}){Uw.applicationContext.SearchQueryData=e};var Bw=i(90752);const $w={en:{healthEvents:i(77076).Z},ja:{healthEvents:{}}},Hw=()=>Promise.all([i.e(5533),i.e(3823)]).then(i.bind(i,47548)),Ww=e=>T.createElement(En.Provider,{store:Te.store},T.createElement(C.F,{dynamicImportFn:Hw,moduleName:"appDetail",componentProps:e})),qw=()=>Promise.all([i.e(5533),i.e(3823)]).then(i.bind(i,10781)),jw=e=>T.createElement(En.Provider,{store:Te.store},T.createElement(C.F,{dynamicImportFn:qw,moduleName:"appDetailButton",componentProps:e})),Qw=()=>Promise.all([i.e(5533),i.e(3823)]).then(i.bind(i,95071)),zw=e=>T.createElement(En.Provider,{store:Te.store},T.createElement(C.F,{dynamicImportFn:Qw,moduleName:"appCatalogReact",componentProps:e})),Gw=()=>Promise.all([i.e(5533),i.e(3823)]).then(i.bind(i,27734)),Kw=e=>T.createElement(C.F,{dynamicImportFn:Gw,moduleName:"appDetail",componentProps:e});function Yw({query:e,timerange:t,shouldExecuteSearch:i}){const r=new L.SearchQueryDataModule;r.setQueryString(e),r.setTimeRange(t),r.setExecuteSearch(i),SumoUtil.searchDrilldownTrigger(r)}const Zw=i(50491),Xw=i(75641);const Jw=["$http","currentUserHelper"];class eI{constructor(e,t){e.getObservable().filter((e=>!(0,tb.Z)(e))).take(1).subscribe(t.initTours)}}eI.$inject=["currentUserHelper","tourDefinitions"];const{lazy:tI,promise:iI}=(()=>{const e=Ew.reduce(((e,{microserviceFetch:t})=>t?[...e,t()]:e),[]).reduce(((e,{promise:t,lazy:i})=>i?e?e.then((()=>t)):t:e),void 0);return{lazy:!!e,promise:e}})();let rI;function nI(){(0,mh.ac)();const e=s.module("sumoApp",Sw).config(y).controller("SumoCtrl",eI);e.config(ww).run(Iw),e.service("customDispatchHandlerService",Dw),(0,gt.initializeModules)(e,"customDispatchHandlerService",Jw,{store:Te.store,epic$:up.G,reducerRegistry:ta.Z}),(0,g.addAllRxOperators)(),(0,R.initializeNotificationUtil)(),(0,Xn.initializeMegaComponent)(ta.Z,Te.store,Yw),(0,R.initializeResponsiveGridLayout)(Fw),(0,vs.initializeCollectionShared)({store:Te.store}),(0,vs.initializeUniversalSourceForm)(ta.Z,Te.store),(0,xh.initializeSearch)({store:Te.store,reducerRegistry:ta.Z,entityUpdated:Te.entityUpdated,entityDeleted:Te.entityDeleted}),(0,g.initializeBentoCommon)({panelTimerangeSelectorView:Zw,interactivePanelModel:Xw,store:Te.store}),Vw({SearchQueryData:L.SearchQueryDataModule}),(0,Lt.setupAppCatalog)({store:Te.store,AppDetailContainerWProvider:Ww,AppDetailButtonContainerWProvider:jw,AppCatalogContainerWProvider:zw,SingleIntegrationViewWSuspense:Kw}),(0,Bw.initEntityInspector)({reducerRegistry:ta.Z,store:Te.store,epic$:up.G}),(0,xh.createSearchNgModule)(),(0,xh.createSearchCommonNgModule)(),(0,xh.createSearchComponentsNgModule)(),(0,Lt.createAppsMarketplaceNgModule)(),(0,jv.initHealthEvents)(ta.Z,Te.store,$w)}tI&&iI?rI=iI.then(nI):nI();const aI={lazy:tI,promise:rI}},19938:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2xVkZMGYqZ65ZkdhvDrywX{height:720px}",""]),r.locals={tableContainerStyle:"_2xVkZMGYqZ65ZkdhvDrywX"},e.exports=r},20634:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1q15bcK9r5sAzQzZoK0pkT{background-color:#fff;line-height:normal;padding:24px}._2f5v440GSIU__Z2DebWmYD{margin:8px 0 16px}._1O9NV9JW0i4UEQ3rNIvyDz{align-items:baseline;display:flex;margin-top:12px}._1UHydesLFgzaNvAuGnWksA{color:#517691;padding:0 12px}._1eq79X56hkYbwI-2rbURlV{color:#517691;display:inline;font-style:italic}",""]),r.locals={betaParticipation:"_1q15bcK9r5sAzQzZoK0pkT",subText:"_2f5v440GSIU__Z2DebWmYD",acceptanceInfoContainer:"_1O9NV9JW0i4UEQ3rNIvyDz",acceptanceText:"_1UHydesLFgzaNvAuGnWksA",acceptanceTextItalic:"_1eq79X56hkYbwI-2rbURlV"},e.exports=r},83895:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".r8ieuK3cK6w4mYwXZcx10{border:1px solid #ebeff2;box-sizing:border-box;max-height:375px;overflow:auto;padding:12px}.Gfza7FgS3dRWcqyTv2P5q{margin-bottom:16px}._1ih9LsjP2iOTWCxHE6XC9e{margin-top:16px}",""]),r.locals={agreementContainer:"r8ieuK3cK6w4mYwXZcx10",dialogText:"Gfza7FgS3dRWcqyTv2P5q",checkbox:"_1ih9LsjP2iOTWCxHE6XC9e"},e.exports=r},11121:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._6YdmvyZfQx-f6cIlgjVOt{align-items:center;display:flex;padding:32px;text-align:center;width:100%}._1K43bgtFsp03mwUYmTpr72{margin-bottom:24px}._1NYD_RWFL0-AxVcbsc26Zh{margin-bottom:8px}._3Cw2HqJZtT-R3njG1MtWoW{color:#517691;max-width:350px}",""]),r.locals={infoPanel:"_6YdmvyZfQx-f6cIlgjVOt",icon:"_1K43bgtFsp03mwUYmTpr72",heading:"_1NYD_RWFL0-AxVcbsc26Zh",text:"_3Cw2HqJZtT-R3njG1MtWoW"},e.exports=r},97314:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1szyypC93n38aoYXdkPoR5{display:block}._7aSD-Jh7gLd81aQkaf6a6{align-items:center;display:flex;flex-direction:column;overflow:visible;padding:32px;text-align:center}.IkMESsOD_T_yo8NUCnUC_{height:144px;margin-bottom:24px;width:144px}._1NrW7sAsRnd-GZM-ROkX6J{font-family:RobotoMedium,Arial Bold,sans-serif;margin-bottom:8px}._2UK89aOMc_PWPvGRYmOtsa{margin-bottom:24px;max-width:875px}._2MMxVVj266XoIPCvAHqkMj{display:inline}",""]),r.locals={card:"_1szyypC93n38aoYXdkPoR5",content:"_7aSD-Jh7gLd81aQkaf6a6",icon:"IkMESsOD_T_yo8NUCnUC_",heading:"_1NrW7sAsRnd-GZM-ROkX6J",text:"_2UK89aOMc_PWPvGRYmOtsa",textHeavy:"_2MMxVVj266XoIPCvAHqkMj"},e.exports=r},3722:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2Z1J2O6t0Eurh-yMg4kUm2{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:16px}._316Z4NJXRQgFNXd8-Ct4j8{background-color:#fff;border-radius:2px;box-shadow:0 2px 6px 0 #333e4b29;box-sizing:border-box;color:#000000de;display:flex;flex-direction:column;width:100%}._2Z1J2O6t0Eurh-yMg4kUm2{display:flex;flex-direction:row;padding:12px}.-simple-list-border ._2Z1J2O6t0Eurh-yMg4kUm2{border-bottom:1px solid #dde4e9}",""]),r.locals={"card-header":"_2Z1J2O6t0Eurh-yMg4kUm2",cardHeader:"_2Z1J2O6t0Eurh-yMg4kUm2",card:"_316Z4NJXRQgFNXd8-Ct4j8"},e.exports=r},9090:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".Fy_9YYRZc8IwW36yyiguQ{font-family:RobotoLight,Arial,sans-serif;font-size:24px}._1PRokPqyXn1PxHTa08i7EQ{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px}._1mKeXJ4eyVCKxAsps42zBh{display:flex;flex:1 1 auto;flex-flow:column;height:100%;position:relative;width:100%}._1mKeXJ4eyVCKxAsps42zBh img._2GO2arbp1waj8qifd-jCID{display:block;margin:auto;width:10%}._37ooyphzWLTNR8acfrMrXd{margin:auto;width:100%}.Fy_9YYRZc8IwW36yyiguQ{line-height:56px}._1PRokPqyXn1PxHTa08i7EQ,.Fy_9YYRZc8IwW36yyiguQ{text-align:center}._1PRokPqyXn1PxHTa08i7EQ{font-size:16px;line-height:24px}@media (max-width:767px){._1PRokPqyXn1PxHTa08i7EQ,.Fy_9YYRZc8IwW36yyiguQ{width:100%}}",""]),r.locals={title:"Fy_9YYRZc8IwW36yyiguQ",message:"_1PRokPqyXn1PxHTa08i7EQ","empty-placeholder":"_1mKeXJ4eyVCKxAsps42zBh",emptyPlaceholder:"_1mKeXJ4eyVCKxAsps42zBh","sumo-ji":"_2GO2arbp1waj8qifd-jCID",sumoJi:"_2GO2arbp1waj8qifd-jCID",container:"_37ooyphzWLTNR8acfrMrXd"},e.exports=r},67062:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._4_JCSjk7VGi839m-PiKpM{font-size:14px}._3slbUofMUjdbOlv_gUFR0w,._4_JCSjk7VGi839m-PiKpM{font-family:Roboto,Arial,sans-serif}._3slbUofMUjdbOlv_gUFR0w{font-size:12px}._4_JCSjk7VGi839m-PiKpM{display:inline-block;vertical-align:top}._3slbUofMUjdbOlv_gUFR0w{color:#889eb3}",""]),r.locals={toggleLabel:"_4_JCSjk7VGi839m-PiKpM",helperText:"_3slbUofMUjdbOlv_gUFR0w"},e.exports=r},79894:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2nxqb-v1-8uRYvCHIWOw_Z{display:inline-block;margin:8px;width:82px}._3p7r_L5XpVvLpkLcRk7B9u{background-color:#fff;border:1px solid #dde4e9;border-radius:2px;box-shadow:0 2px 3px 0 #333e4b14;height:82px;padding:16px;width:100%}._3p7r_L5XpVvLpkLcRk7B9u:hover{box-shadow:0 2px 6px 0 #333e4b29}._3p7r_L5XpVvLpkLcRk7B9u:active{box-shadow:none}._1z-12QSeBvG4DXfGMD-7ve{height:100%;width:100%}._2f-IKR_PjVjrkqQ9RdDyqk{word-wrap:break-word;color:#889eb3;cursor:pointer;display:inline-block;font-size:14px;padding-top:6px;text-align:center;width:100%}._3GFHFM7dHVazWR9mMyfPVW{white-space:nowrap}",""]),r.locals={tileBtnContainer:"_2nxqb-v1-8uRYvCHIWOw_Z",tileBtn:"_3p7r_L5XpVvLpkLcRk7B9u",fillContainer:"_1z-12QSeBvG4DXfGMD-7ve",tileBtnLabel:"_2f-IKR_PjVjrkqQ9RdDyqk",textOverflow:"_3GFHFM7dHVazWR9mMyfPVW"},e.exports=r},3876:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,'._1V24_PcYCiRoSydtaa18yl{display:inline-block;margin-right:8px;position:relative;vertical-align:middle;width:32px}._1V24_PcYCiRoSydtaa18yl.jZlc2tvuDLjxChgWAEJKR{opacity:.5}._1V24_PcYCiRoSydtaa18yl._3N2yO_u9lY22SDrB1z2DXh{opacity:.3}input[type=checkbox]._1BT4cjF3zeuic_VZXg5zXB{display:none}input[type=checkbox]._1BT4cjF3zeuic_VZXg5zXB:checked+.RwlAOrSO_plMvloNDwrMB{background-color:#a3d6f4}input[type=checkbox]._1BT4cjF3zeuic_VZXg5zXB:checked+.RwlAOrSO_plMvloNDwrMB:hover:before{background-color:#69bded;border:1px solid #69bded}input[type=checkbox]._1BT4cjF3zeuic_VZXg5zXB:checked+.RwlAOrSO_plMvloNDwrMB:active:before{background-color:#005d95;border:1px solid #005d95}input[type=checkbox]._1BT4cjF3zeuic_VZXg5zXB:checked+.RwlAOrSO_plMvloNDwrMB:before{background-color:#29a1e6;border:1px solid #29a1e6;transform:translateX(16px)}.RwlAOrSO_plMvloNDwrMB{background-color:#c6d3db;border-style:none;bottom:0;cursor:pointer;height:10px;left:0;position:absolute;right:0;top:50%;transform:translateY(-50%);transition:.3s;width:100%}.RwlAOrSO_plMvloNDwrMB._1JqJ8NxUk_JPocabNNTypu{border-radius:5px}.RwlAOrSO_plMvloNDwrMB._1JqJ8NxUk_JPocabNNTypu:before{border-radius:50%}.RwlAOrSO_plMvloNDwrMB:before{background-color:#fff;border:1px solid #b6c3d0;content:"";height:16px;left:0;position:absolute;top:-4px;transition:.3s;width:16px}.RwlAOrSO_plMvloNDwrMB:hover:before{border:1px solid #c6d3db}.RwlAOrSO_plMvloNDwrMB:active:before{border:1px solid #889eb3}button.RwlAOrSO_plMvloNDwrMB:disabled{opacity:1}',""]),r.locals={toggleBtn:"_1V24_PcYCiRoSydtaa18yl",disableOff:"jZlc2tvuDLjxChgWAEJKR",disableOn:"_3N2yO_u9lY22SDrB1z2DXh",toggleCheck:"_1BT4cjF3zeuic_VZXg5zXB",slider:"RwlAOrSO_plMvloNDwrMB",round:"_1JqJ8NxUk_JPocabNNTypu"},e.exports=r},70:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".AAUWDJfwhJ_sq-iWXqU9-{align-items:flex-end;display:flex}._1Md74Xlvkx3-7GiygU_Hmr{align-items:center}.AAUWDJfwhJ_sq-iWXqU9- button{margin-left:8px}",""]),r.locals={objectPicker:"AAUWDJfwhJ_sq-iWXqU9-",objectPicker__withError:"_1Md74Xlvkx3-7GiygU_Hmr",objectPickerWithError:"_1Md74Xlvkx3-7GiygU_Hmr"},e.exports=r},26492:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1szngU30J0GK2PWuA_2Jcg{background-color:#fff;border:1px solid #dde4e9;display:flex;flex:1 0 auto}.Gv-MXAW2aOQAdGob7CEBy{width:460px}._2FRWcUYKGMShWK0FabFDeQ{background-color:#f1f4f5;border:1px solid #dde4e9;color:#889eb3;padding-top:12px}._3UjS1NScEkScgIll9mU2uO{flex-grow:1}._3UjS1NScEkScgIll9mU2uO .CodeMirror-line{-webkit-hyphens:auto;hyphens:auto;word-break:break-word}.vYfu_xNTBgo97MfJytG_m{pointer-events:none}",""]),r.locals={"sumo-query":"_1szngU30J0GK2PWuA_2Jcg",sumoQuery:"_1szngU30J0GK2PWuA_2Jcg","sumo-query-regular":"Gv-MXAW2aOQAdGob7CEBy",sumoQueryRegular:"Gv-MXAW2aOQAdGob7CEBy","sumo-query-icon":"_2FRWcUYKGMShWK0FabFDeQ",sumoQueryIcon:"_2FRWcUYKGMShWK0FabFDeQ","sumo-query-input":"_3UjS1NScEkScgIll9mU2uO",sumoQueryInput:"_3UjS1NScEkScgIll9mU2uO","sumo-query-input-read-only":"vYfu_xNTBgo97MfJytG_m",sumoQueryInputReadOnly:"vYfu_xNTBgo97MfJytG_m"},e.exports=r},18514:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".k9JdbF8V5NBlexyVDVWoJ ._3rMc_jYYeWi4SlJjUeGlYn{align-items:baseline;display:flex}.k9JdbF8V5NBlexyVDVWoJ ._3rMc_jYYeWi4SlJjUeGlYn ._2afthNvP2RxhIIY2LA_0RN,.k9JdbF8V5NBlexyVDVWoJ ._3rMc_jYYeWi4SlJjUeGlYn ._1U-gxlvPb8L8EsL6zHXf6u{flex:1;max-width:400px}.k9JdbF8V5NBlexyVDVWoJ ._3rMc_jYYeWi4SlJjUeGlYn ._2afthNvP2RxhIIY2LA_0RN{margin-right:30px}.k9JdbF8V5NBlexyVDVWoJ ._3rMc_jYYeWi4SlJjUeGlYn ._1U-gxlvPb8L8EsL6zHXf6u{margin-left:30px}.k9JdbF8V5NBlexyVDVWoJ ._2B59GiW0eUUippEGudXxpi{margin-top:16px}._2vXtGNddwKgWp_emOqPmRJ{margin-bottom:8px}",""]),r.locals={"data-model-editor":"k9JdbF8V5NBlexyVDVWoJ",dataModelEditor:"k9JdbF8V5NBlexyVDVWoJ",row:"_3rMc_jYYeWi4SlJjUeGlYn",leftColumn:"_2afthNvP2RxhIIY2LA_0RN",rightColumn:"_1U-gxlvPb8L8EsL6zHXf6u",schemaBuilder:"_2B59GiW0eUUippEGudXxpi",leftColumnTextField:"_2vXtGNddwKgWp_emOqPmRJ"},e.exports=r},69115:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2mVVDy-HkCvfiD44hH3QAk{display:block}._2mVVDy-HkCvfiD44hH3QAk ._2S2ILq38ZkTQ7sgRTeR-SI{height:45px}._2mVVDy-HkCvfiD44hH3QAk ._10-2345HvfVyMF9Ysav6Uc{align-items:baseline;background-color:#fff;box-shadow:0 2px 3px 0 #00000014;display:flex;margin-bottom:34px;padding:24px}._2mVVDy-HkCvfiD44hH3QAk ._10-2345HvfVyMF9Ysav6Uc ._2Vqno_YpBYTWa5YBVKHVwf{flex:1}._2mVVDy-HkCvfiD44hH3QAk ._10-2345HvfVyMF9Ysav6Uc ._2Vqno_YpBYTWa5YBVKHVwf ._23QcVcaWV96uBr1bg_OEOW{display:flex;margin-right:80px}._2mVVDy-HkCvfiD44hH3QAk ._10-2345HvfVyMF9Ysav6Uc ._2Vqno_YpBYTWa5YBVKHVwf ._23QcVcaWV96uBr1bg_OEOW ._1MgL77yGzLrIwXWU4_fDw0{margin-right:24px;max-width:275px}._2mVVDy-HkCvfiD44hH3QAk ._10-2345HvfVyMF9Ysav6Uc ._2Vqno_YpBYTWa5YBVKHVwf ._23QcVcaWV96uBr1bg_OEOW .aKUOaPmxd3DWb2Gc2PmBh{flex:1;margin-left:24px;max-width:130px}._2mVVDy-HkCvfiD44hH3QAk ._10-2345HvfVyMF9Ysav6Uc ._1Mc9_gJCvjq1tDntNqMggZ{margin-top:16px}._3y6U8glcd7DicqVa33NH8y{padding-left:8px}",""]),r.locals={"data-model-factor-expression-editor":"_2mVVDy-HkCvfiD44hH3QAk",dataModelFactorExpressionEditor:"_2mVVDy-HkCvfiD44hH3QAk",summary:"_2S2ILq38ZkTQ7sgRTeR-SI",modelFactor:"_10-2345HvfVyMF9Ysav6Uc",factorBody:"_2Vqno_YpBYTWa5YBVKHVwf",header:"_23QcVcaWV96uBr1bg_OEOW",factorLabel:"_1MgL77yGzLrIwXWU4_fDw0",factorType:"aKUOaPmxd3DWb2Gc2PmBh",codeEditorContainer:"_1Mc9_gJCvjq1tDntNqMggZ","data-model-factor-expression-editor-tooltip":"_3y6U8glcd7DicqVa33NH8y",dataModelFactorExpressionEditorTooltip:"_3y6U8glcd7DicqVa33NH8y"},e.exports=r},6937:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2osV-1yoD_lYO1WvpMudQO{display:inline;word-break:break-all;word-break:break-word}._2osV-1yoD_lYO1WvpMudQO .featuresList{padding-left:20px}._2osV-1yoD_lYO1WvpMudQO .featuresList>li{list-style-type:disc}._2Ve1wvvQtrkTu4UtXrSWqA{border:none;color:#29a1e6;padding:0}",""]),r.locals={modalText:"_2osV-1yoD_lYO1WvpMudQO",learnMoreButton:"_2Ve1wvvQtrkTu4UtXrSWqA"},e.exports=r},22499:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3gmpqbmA3o6aHVXL8wvJhe{display:flex;flex-direction:column;height:100%;width:100%}._2IEdTQvLCkthEiMxGKQDLL{align-items:center;display:flex;margin-right:20px}._32b0lZHsO5noQNmbtyqJyP{align-items:center;display:flex!important;justify-content:center;line-height:0!important}",""]),r.locals={list:"_3gmpqbmA3o6aHVXL8wvJhe",fieldTypeSelect:"_2IEdTQvLCkthEiMxGKQDLL",statusCell:"_32b0lZHsO5noQNmbtyqJyP"},e.exports=r},86190:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._21oazdTYbcHax-UnLIsqZL{align-items:center;display:flex}._21oazdTYbcHax-UnLIsqZL ._1yQAiskYPYRlM2HAt2k9K-{display:inline-block;margin-right:10px}",""]),r.locals={fieldsSummaryItems:"_21oazdTYbcHax-UnLIsqZL",fieldsSummaryItem:"_1yQAiskYPYRlM2HAt2k9K-"},e.exports=r},34963:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2UMsyyOYpJaFOM_r21bvt{font-family:Roboto,Arial,sans-serif;font-size:12px;margin:24px 0}",""]),r.locals={helpText:"_2UMsyyOYpJaFOM_r21bvt"},e.exports=r},19502:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3alljwBf_UF9YSYWRsSgov{display:inline-block;margin:0 5px 5px 0}.IYgDX96CmqgRBeK5XcXl8{color:#889eb3}._1rp1ZP3JYJ6EoJ2xoEXhzQ{display:block;margin:0}._3wqeIKvbENAssngJt2YNIb{height:199px}._1yifWD-PVsrISFn52kehO5{margin:0 -16px}._1yifWD-PVsrISFn52kehO5 ._2d9aE5Yl4uwMGqMsmRNI2r{cursor:pointer;padding:0 16px}.OH7P9sU1Of6jlCD7Ux_11{align-items:center;display:flex;height:20px}.OH7P9sU1Of6jlCD7Ux_11 ._3sbPnbGqHGKjCIQeqJBOw6{display:inline-block;margin-right:10px}",""]),r.locals={labelPrimary:"_3alljwBf_UF9YSYWRsSgov",labelSecondary:"IYgDX96CmqgRBeK5XcXl8",errorText:"_1rp1ZP3JYJ6EoJ2xoEXhzQ",table:"_3wqeIKvbENAssngJt2YNIb",list:"_1yifWD-PVsrISFn52kehO5",listItem:"_2d9aE5Yl4uwMGqMsmRNI2r",messageItems:"OH7P9sU1Of6jlCD7Ux_11",messageItem:"_3sbPnbGqHGKjCIQeqJBOw6"},e.exports=r},80941:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3U9Sqwes445yuP4lqjh6ZI{line-height:normal}",""]),r.locals={headerText:"_3U9Sqwes445yuP4lqjh6ZI"},e.exports=r},86995:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1jhWSq1TmH-CcPwqqHaoYm{margin-bottom:14px}._9njjvwfPn0dltMxGwBggg{display:flex}._3XG1oCZ0d5daO_kq3rQOrG{margin-bottom:14px}",""]),r.locals={textRow:"_1jhWSq1TmH-CcPwqqHaoYm",resetTitle:"_9njjvwfPn0dltMxGwBggg",errorNotification:"_3XG1oCZ0d5daO_kq3rQOrG"},e.exports=r},88244:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3o3HCa-G0lxSSrUidMW49E{align-items:center;display:flex;height:100%}._3o3HCa-G0lxSSrUidMW49E._1GcZcFhv9NT44Xw5cooyt-{justify-content:center;width:100%}",""]),r.locals={enabledRuleIcon:"_3o3HCa-G0lxSSrUidMW49E",tableMode:"_1GcZcFhv9NT44Xw5cooyt-"},e.exports=r},26536:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2D5bs2hyZ_ZbAsJITWOvFz{align-items:center;display:flex;justify-content:space-between;width:100%}._2D5bs2hyZ_ZbAsJITWOvFz ._1vff5He-yNJYNZmLOP5jQX{word-wrap:normal;overflow:hidden;overflow-wrap:normal;text-overflow:ellipsis;white-space:nowrap}._2D5bs2hyZ_ZbAsJITWOvFz ._13BSFKJI_wOJXNU9Aw57BT{display:flex!important}",""]),r.locals={nameContainer:"_2D5bs2hyZ_ZbAsJITWOvFz",nameField:"_1vff5He-yNJYNZmLOP5jQX",lockIcon:"_13BSFKJI_wOJXNU9Aw57BT"},e.exports=r},73212:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3qikX-1mo_k814lcYQRb6n{flex:1}._22PAMSmYyqmsrNn6QRXjZG,._3qikX-1mo_k814lcYQRb6n{display:flex;flex-direction:column}._22PAMSmYyqmsrNn6QRXjZG{height:100%;width:100%}._1q-w3927Qn400b4giV45CX{text-align:center}._74xfPs7Z7m5kZ01LdwFZF{align-items:center;display:flex!important;justify-content:center;line-height:0!important}.mcBrOlWsx5L53_LaUq1mJ{font-family:Roboto Mono,Courier New,monospace;line-height:40px!important}._1YwPJsrned4jl5tVfYJU8b{background:#0000;border:none;color:#29a1e6;padding:0}._1jYkijgabBD1gCzBvXlvK4{display:inline;white-space:normal}._1Gq1UMReMB0ORpMEFWibn4{border-right:none!important}.pE053eKiO7xIfMFiImQ_Q{background-color:#fafafa!important}",""]),r.locals={panel:"_3qikX-1mo_k814lcYQRb6n",list:"_22PAMSmYyqmsrNn6QRXjZG",centerCell:"_1q-w3927Qn400b4giV45CX",statusCell:"_74xfPs7Z7m5kZ01LdwFZF",scopeCell:"mcBrOlWsx5L53_LaUq1mJ",learnMoreButton:"_1YwPJsrned4jl5tVfYJU8b",discardDescription:"_1jYkijgabBD1gCzBvXlvK4",nameCells:"_1Gq1UMReMB0ORpMEFWibn4",defaultWhitelistingRule:"pE053eKiO7xIfMFiImQ_Q"},e.exports=r},14366:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3S9YNc3ws_Qv4C4UKaIvU7 p{font-family:Roboto,Arial,sans-serif;font-size:12px}._3xtCcTIfz-JZrFppw3wzJP{overflow-x:hidden}.WaRXFIYwOD_ARv13vAS6R>div:not(:last-child){margin-bottom:16px}._3S9YNc3ws_Qv4C4UKaIvU7{margin:5px 0}._3S9YNc3ws_Qv4C4UKaIvU7 p{margin-bottom:16px}._3S9YNc3ws_Qv4C4UKaIvU7 p button{background:#0000;border:none;color:#29a1e6;padding:0}._1Lci8xt4PRZDmtTkYP8WQl{margin-left:0}._3ER0I1wq-k45dKrpBCeZ3w{margin-bottom:5px}._3DER4dvJIKJOtYQe4d10n0{text-align:left}._3DER4dvJIKJOtYQe4d10n0 ._3Ew_Ad4w3AmDKrkbxrVcUc{margin-bottom:8px}",""]),r.locals={helpText:"_3S9YNc3ws_Qv4C4UKaIvU7",form:"_3xtCcTIfz-JZrFppw3wzJP",fieldContainer:"WaRXFIYwOD_ARv13vAS6R",switchModeButton:"_1Lci8xt4PRZDmtTkYP8WQl",label:"_3ER0I1wq-k45dKrpBCeZ3w",parseExpressionEditor:"_3DER4dvJIKJOtYQe4d10n0",parseExpressionLabel:"_3Ew_Ad4w3AmDKrkbxrVcUc"},e.exports=r},84489:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".tB2i8UIqxRUMpqpZ9s9eb{height:20px;margin-bottom:2px}._3NZxtsLMaO0qYFlGh2CmIZ{margin:4px 2px}.loDHxRtAI3SmypwoibyKf{margin:4px}.tB2i8UIqxRUMpqpZ9s9eb,._3pJ0yJ13sen76BncS7KL_a{align-items:center;display:flex}.tB2i8UIqxRUMpqpZ9s9eb ._2KjDmr-wTAsc7fIITGj2b3,._3pJ0yJ13sen76BncS7KL_a ._2KjDmr-wTAsc7fIITGj2b3{display:inline-block;margin-right:8px}.aFTY6sNtNbldPLRZnMjCJ{height:21px;margin:8px 2px}.aFTY6sNtNbldPLRZnMjCJ ._1RSG2d5hTa1B1I-2PnYGOy{border-radius:0;overflow:hidden}.aFTY6sNtNbldPLRZnMjCJ ._2rfnqM9F_W2BKo7eA5YO4k{margin:0 0 0 -8px}._8SER_-U3DN2tJWywIrraX{margin:0;padding-left:24px}._8SER_-U3DN2tJWywIrraX li{list-style:disc;margin:8px 0}._8SER_-U3DN2tJWywIrraX .tB2i8UIqxRUMpqpZ9s9eb,._8SER_-U3DN2tJWywIrraX ._3pJ0yJ13sen76BncS7KL_a{display:inline-flex;height:21px;width:100%}.XYIwl2y9uzpeNSQNH1gpd{margin-left:2px}",""]),r.locals={header:"tB2i8UIqxRUMpqpZ9s9eb",loadingMessageError:"_3NZxtsLMaO0qYFlGh2CmIZ",message:"loDHxRtAI3SmypwoibyKf",rowItems:"_3pJ0yJ13sen76BncS7KL_a",rowItem:"_2KjDmr-wTAsc7fIITGj2b3",rowField:"aFTY6sNtNbldPLRZnMjCJ",checkbox:"_1RSG2d5hTa1B1I-2PnYGOy",newTag:"_2rfnqM9F_W2BKo7eA5YO4k",fieldsList:"_8SER_-U3DN2tJWywIrraX",newIcon:"XYIwl2y9uzpeNSQNH1gpd"},e.exports=r},43178:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".W3KWhZnEhnI4_65zdlTCu{font-family:Roboto,Arial,sans-serif;font-size:12px}._1ez9iQ1SR5yoDhhwBklItI{font-size:14px}.tXN4dxTZlUuDXJgt67olD{border:1px solid #b6c3d0;padding:10px;text-align:left}._28xufqGXOO4Mg7zXq-UNSZ{color:#889eb3;margin-bottom:16px;text-align:left}.hzGUIiVZGKRHHZyE4TdVM{align-items:center;display:flex}.W3KWhZnEhnI4_65zdlTCu{color:#333e4b}._2qRsDSr6i-uDFIzJ0z6g4C{margin-left:60px;min-width:100px}",""]),r.locals={templateMsg:"W3KWhZnEhnI4_65zdlTCu",select:"_1ez9iQ1SR5yoDhhwBklItI",templatePanel:"tXN4dxTZlUuDXJgt67olD",templateContent:"_28xufqGXOO4Mg7zXq-UNSZ",templateRow:"hzGUIiVZGKRHHZyE4TdVM",templateBtn:"_2qRsDSr6i-uDFIzJ0z6g4C"},e.exports=r},90427:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2tuyYXvFgt8QFWJVz08XDb{display:flex}._2tuyYXvFgt8QFWJVz08XDb>*{flex:1}._2tuyYXvFgt8QFWJVz08XDb>div:first-child{margin-right:16px}",""]),r.locals={basicMode:"_2tuyYXvFgt8QFWJVz08XDb"},e.exports=r},96332:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2Wsl9owZN8ogqUzIa1cxfs{margin-left:6px}._2Wsl9owZN8ogqUzIa1cxfs>*{margin-right:32px}",""]),r.locals={scopeTypes:"_2Wsl9owZN8ogqUzIa1cxfs"},e.exports=r},95914:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".CEW4r2yHcONh8W5vsDpec{display:flex}.nXNlZe9UYv0n01_G_r2lU,.CEW4r2yHcONh8W5vsDpec{align-items:center}.nXNlZe9UYv0n01_G_r2lU{margin-left:6px}._3_xvjcMOIcdcIo0UAbvXNN{font-size:12px;margin-left:24px}.xWCOlqTijgiEpvyIn4t1k{margin-left:24px;margin-top:8px}._2yLcxhpOtqBkCxSLeCzzzL{margin-left:6px}._3rQh8z_6PH95OcL14PIBQs{margin-bottom:5px}._2RstMqOpKzpwylMnR7bgea{margin-top:0}._16bgFhWKT3IX-RhJY-Q4gc{background:#0000;border:none;color:#29a1e6;margin:0 4px;padding:0}",""]),r.locals={row:"CEW4r2yHcONh8W5vsDpec",radio:"nXNlZe9UYv0n01_G_r2lU",radioAssistiveText:"_3_xvjcMOIcdcIo0UAbvXNN",defaultRuleEnabledWarning:"xWCOlqTijgiEpvyIn4t1k","info-icon":"_2yLcxhpOtqBkCxSLeCzzzL",infoIcon:"_2yLcxhpOtqBkCxSLeCzzzL",label:"_3rQh8z_6PH95OcL14PIBQs",error:"_2RstMqOpKzpwylMnR7bgea",learnMore:"_16bgFhWKT3IX-RhJY-Q4gc"},e.exports=r},47504:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._19gJ4jUW8QHLS2ae1XZByq{font-family:Roboto,Arial,sans-serif;font-size:12px}._2tv6NAEFg6BaALvsisDQuE:not(:last-child){margin-bottom:24px}._1PFAfZ7boJDPQuoQJbYzDM{flex:1;width:100%}._3iBTCwgB_vWE5tt6fwp5kq{display:flex}._2ztxK3kv0aDq3-UEzACR1e,.LoPyTzWRGsgAkQjp2AfkK{margin-bottom:5px}.LoPyTzWRGsgAkQjp2AfkK{cursor:pointer}._19gJ4jUW8QHLS2ae1XZByq{font-family:Roboto Mono,Courier New,monospace}._38Vnlnw8leU5RjZiR_Tv8f{margin:0;padding-left:24px}._38Vnlnw8leU5RjZiR_Tv8f li{list-style:disc}._38Vnlnw8leU5RjZiR_Tv8f ._1vrJLJM5ej18penqnMIvG-{display:inline-block;vertical-align:bottom;width:100%}._3XpPw4OYZZQKradMu5Uagn{align-items:center;display:flex}._3XpPw4OYZZQKradMu5Uagn svg{margin-right:8px}._19GudBZM28BYUBN8Fd7baq{align-items:center;display:inline-flex}._19GudBZM28BYUBN8Fd7baq svg{margin-left:8px}._1wnBG8mAQNpU3xnh06Mipr{text-align:left}",""]),r.locals={scopeField:"_19gJ4jUW8QHLS2ae1XZByq","margin-bottom":"_2tv6NAEFg6BaALvsisDQuE",marginBottom:"_2tv6NAEFg6BaALvsisDQuE",field:"_1PFAfZ7boJDPQuoQJbYzDM",rowFlex:"_3iBTCwgB_vWE5tt6fwp5kq",label:"_2ztxK3kv0aDq3-UEzACR1e",searchIcon:"LoPyTzWRGsgAkQjp2AfkK",fieldsList:"_38Vnlnw8leU5RjZiR_Tv8f",fields:"_1vrJLJM5ej18penqnMIvG-",rowIconLeft:"_3XpPw4OYZZQKradMu5Uagn",rowIconRight:"_19GudBZM28BYUBN8Fd7baq",parseExpressionEditor:"_1wnBG8mAQNpU3xnh06Mipr"},e.exports=r},56669:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2ZHy1CoBAUovWzIw0U0O3y{display:flex}.CZsfuggD7WiCQZT9uuD2d{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""]),r.locals={resetTitle:"_2ZHy1CoBAUovWzIw0U0O3y",viewHeader:"CZsfuggD7WiCQZT9uuD2d"},e.exports=r},94710:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3pWmo1JYSki4eKn_a6WATr{color:#f54e25}._2oQ_z2RbrTFnDpBBNZFxYc{margin-bottom:10px}",""]),r.locals={error:"_3pWmo1JYSki4eKn_a6WATr",errorMsg:"_2oQ_z2RbrTFnDpBBNZFxYc"},e.exports=r},15089:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".vqm5nFrqzqIvQWfPd4Kzk{font-family:Roboto,Arial,sans-serif;font-size:14px}._17RWiNSwyv68eHooZ7_66F{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:16px}.ZO3quetkBZAZJg3x1qRTj{background-color:#fff;box-shadow:0 2px 4px 0 #676e7840;display:flex;justify-content:space-between;padding:15px;position:relative;z-index:1}.ZO3quetkBZAZJg3x1qRTj input[type=checkbox]{display:none}.Ns9x5XFRJ2ZY-YAbaUUXb{display:flex;flex-wrap:wrap;margin-top:8px}.vqm5nFrqzqIvQWfPd4Kzk{flex:0 33%;margin:7px 0;min-width:230px}.lSbTNANf24M7QAgACxO1Z{height:30px;line-height:30px;min-height:30px;min-width:80px}",""]),r.locals={"component-item":"vqm5nFrqzqIvQWfPd4Kzk",componentItem:"vqm5nFrqzqIvQWfPd4Kzk",title:"_17RWiNSwyv68eHooZ7_66F",container:"ZO3quetkBZAZJg3x1qRTj","item-container":"Ns9x5XFRJ2ZY-YAbaUUXb",itemContainer:"Ns9x5XFRJ2ZY-YAbaUUXb","settings-button":"lSbTNANf24M7QAgACxO1Z",settingsButton:"lSbTNANf24M7QAgACxO1Z"},e.exports=r},55789:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._32tbdKDecxrewHngrNwEU0{justify-content:flex-end;padding:12px 16px 0}._32tbdKDecxrewHngrNwEU0,._2y26znp97ZIEqv9d14H_aX{display:flex;width:100%}._2y26znp97ZIEqv9d14H_aX{z-index:3}._20VHgFa3GKgHJzRShkdLaK{position:absolute;top:58px}._28cpuIIJaMfmXnBNnQ2hGF{padding-top:12px}._3LNyGt_QI6LpS0nkvkEu6L{margin:0 12px;width:100%}._3oQb55hXzk3Hp0vozi_64s{cursor:pointer}",""]),r.locals={container:"_32tbdKDecxrewHngrNwEU0",homeHeader:"_2y26znp97ZIEqv9d14H_aX",homeHeaderClosed:"_20VHgFa3GKgHJzRShkdLaK",homeHeaderOpen:"_28cpuIIJaMfmXnBNnQ2hGF",settingsComponent:"_3LNyGt_QI6LpS0nkvkEu6L",icon:"_3oQb55hXzk3Hp0vozi_64s"},e.exports=r},22025:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"*{-webkit-padding-start:0}._3_T8iBa_3425117MpivqV2{background:#eaeef1;display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}._2jDRXcKL0gedcAq4w7pIpz{display:flex;height:100%;width:100%}._2J02wy6GuOizWgPbEgS4tS{overflow-x:auto;overflow-y:hidden}._1Lof6jsyevMv0kNmJk6Cf7{padding:12px 24px 0}._1DBE4_qaJv7gIp9Lg2g85Z{display:flex;flex:1 1 auto}._1qBf_XnS03WaFaLQ3yrQOS{flex:1 0 auto;height:280px}",""]),r.locals={"home-tab":"_3_T8iBa_3425117MpivqV2",homeTab:"_3_T8iBa_3425117MpivqV2","home-tab-container":"_2jDRXcKL0gedcAq4w7pIpz",homeTabContainer:"_2jDRXcKL0gedcAq4w7pIpz",addOverflow:"_2J02wy6GuOizWgPbEgS4tS","tab-padding":"_1Lof6jsyevMv0kNmJk6Cf7",tabPadding:"_1Lof6jsyevMv0kNmJk6Cf7",flex:"_1DBE4_qaJv7gIp9Lg2g85Z","layout-container":"_1qBf_XnS03WaFaLQ3yrQOS",layoutContainer:"_1qBf_XnS03WaFaLQ3yrQOS"},e.exports=r},62320:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3OqAy6nDt-URBjaNW5IW0G{display:flex;flex-wrap:wrap;min-width:420px}._2Jd007jWE6WspgHJT-YUS1{min-width:max-content}._2ki9ZMa8KO974bZVwOS88t{margin:8px}",""]),r.locals={"tile-grid":"_3OqAy6nDt-URBjaNW5IW0G",tileGrid:"_3OqAy6nDt-URBjaNW5IW0G","tile-grid-scrollable":"_2Jd007jWE6WspgHJT-YUS1",tileGridScrollable:"_2Jd007jWE6WspgHJT-YUS1",tileGridItem:"_2ki9ZMa8KO974bZVwOS88t"},e.exports=r},7316:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2y7Zx1T0hVq8dJrQnIM1Tj{flex-basis:auto}._9g-w1x3wCeTcqmYm_kCUJ{min-width:768px;padding-right:0}._2Jh2fHD08gTCLb_wNL0YbR{width:100%}._2lu4UJLyvriR9hIqY-l8c-{color:#7e8ea6;font-weight:700;text-align:left}",""]),r.locals={mainVideo:"_2y7Zx1T0hVq8dJrQnIM1Tj",videoList:"_9g-w1x3wCeTcqmYm_kCUJ","full-width":"_2Jh2fHD08gTCLb_wNL0YbR",fullWidth:"_2Jh2fHD08gTCLb_wNL0YbR",title:"_2lu4UJLyvriR9hIqY-l8c-"},e.exports=r},5967:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._6jFo0u6Z-Z7_0z4Zs0pqA{display:flex}._3bEuyJ6PHHdrZ3r5XiXHiz{display:block;padding-right:18px}._2-j_1rJyPtGAh-R9Nk8CRy{display:flex}._2-j_1rJyPtGAh-R9Nk8CRy>*{flex:1 1 auto;max-width:50%}._2-j_1rJyPtGAh-R9Nk8CRy>:first-child{margin-right:12px}._3bEuyJ6PHHdrZ3r5XiXHiz ._3mRSTV4tnkgrrXCXgQAN91,._2rlIZc6MzXbV9sJ2iPGfdy{margin-bottom:18px}._2rlIZc6MzXbV9sJ2iPGfdy{margin-top:8px}._2rlIZc6MzXbV9sJ2iPGfdy button{margin-right:8px}._2KMfEBMOX9XuOmPCrHM3V0{display:block;margin-bottom:8px;text-align:left}._3-pPOaFw6y59t5uaKSIMFi{max-width:90%}._2B_iPzBq53kqAnofEOnPIA{margin-right:16px;width:70px}._1AQ5_83iIzr_823l-KgI48{vertical-align:top}._1nSYw5Xt2xkBEiTGNW3Lin,._9A3iw8XIhpC0puLl0_5lr{line-height:24px}._3W54_IFkI-olx0L5ic4bzj,._1Z9pyaSZ8KIV68uMOvV0Vh{color:#222d3b;font-family:Roboto-Regular;font-size:12px;line-height:16px}._3TZBf9OBkf52pHbwJRsHHF{margin-top:30px}.Irk8zWMCoS9KuqbUd7uIG{margin-top:14px}",""]),r.locals={flex:"_6jFo0u6Z-Z7_0z4Zs0pqA","add-edit-ingest-budget":"_3bEuyJ6PHHdrZ3r5XiXHiz",addEditIngestBudget:"_3bEuyJ6PHHdrZ3r5XiXHiz","add-edit-ingest-budget__split-row":"_2-j_1rJyPtGAh-R9Nk8CRy",addEditIngestBudgetSplitRow:"_2-j_1rJyPtGAh-R9Nk8CRy","form-row":"_3mRSTV4tnkgrrXCXgQAN91",formRow:"_3mRSTV4tnkgrrXCXgQAN91",header:"_2rlIZc6MzXbV9sJ2iPGfdy","column-with-title":"_2KMfEBMOX9XuOmPCrHM3V0",columnWithTitle:"_2KMfEBMOX9XuOmPCrHM3V0",allowGap:"_3-pPOaFw6y59t5uaKSIMFi",narrowInput:"_2B_iPzBq53kqAnofEOnPIA",timeInputContainer:"_1AQ5_83iIzr_823l-KgI48",auditLabel:"_1nSYw5Xt2xkBEiTGNW3Lin",capacityLabel:"_9A3iw8XIhpC0puLl0_5lr",auditThresholdHelpText:"_3W54_IFkI-olx0L5ic4bzj",capacityHelpText:"_1Z9pyaSZ8KIV68uMOvV0Vh",groupForm:"_3TZBf9OBkf52pHbwJRsHHF",budgetCapacityV2Group:"Irk8zWMCoS9KuqbUd7uIG"},e.exports=r},27263:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2nmBxxs6PnBAO_y0ZvMm_ label,._2nmBxxs6PnBAO_y0ZvMm_ span{font-family:Roboto,Arial,sans-serif;font-size:14px}._295dHRTgHOG1nbmYczC-Hf{display:flex;flex-direction:column;height:570px}._2nmBxxs6PnBAO_y0ZvMm_{margin-bottom:10px;margin-top:8px;text-align:left}._2nmBxxs6PnBAO_y0ZvMm_ label{color:#676e78;display:block;font-size:12px}._2nmBxxs6PnBAO_y0ZvMm_ span{color:#111b27;display:block;font-size:14px}",""]),r.locals={"assigned-collectors-group":"_2nmBxxs6PnBAO_y0ZvMm_",assignedCollectorsGroup:"_2nmBxxs6PnBAO_y0ZvMm_",assignedCollectorsPage:"_295dHRTgHOG1nbmYczC-Hf"},e.exports=r},8012:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._36mpV9XSFbIrEHDQCD57VI{margin-bottom:8px}._3Ol1mmKOOB92UOYcLd5CKo{display:flex}._3d9xQNK7SUxWXCBz8T7WQR{min-width:140px;width:140px}.ZHbbjNSRCSMe9pQbhsO2e{width:240px}.ktvbPywncnM85zSXdlPYk{flex:1}._21gyuFxXOCO9mKYg2piRBr{padding:21px 8px 0}._3FNYnlIrfTM80a44kW2h9f{display:flex;padding-bottom:16px}",""]),r.locals={headerText:"_36mpV9XSFbIrEHDQCD57VI",flex:"_3Ol1mmKOOB92UOYcLd5CKo",scopeKey:"_3d9xQNK7SUxWXCBz8T7WQR",suggestionBox:"ZHbbjNSRCSMe9pQbhsO2e",scopeValue:"ktvbPywncnM85zSXdlPYk",equal:"_21gyuFxXOCO9mKYg2piRBr",scopeRow:"_3FNYnlIrfTM80a44kW2h9f"},e.exports=r},57084:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".bXbxobe2xM0D-ZTuCSOma{font-family:RobotoLight,Arial,sans-serif;font-size:20px}._3fvF_7R2Bw_3bJBzd4DSfc,.jfqOghukWzU1Z7ron5i1M label,.jfqOghukWzU1Z7ron5i1M span{font-family:Roboto,Arial,sans-serif;font-size:14px}._1zao6NuHJ2Oi5Zr6h5yjEX{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px}._16hSGfI46aCMfghtArmf8W{padding:0}._3-sT4MWxz4swsjtc2E34Ji{max-width:96%}.uBVL8_7LG4OU4Gju0saK{display:flex}._3VYp5y6rNVzT8lWvij0VnH{padding-top:8px}._24rC5eu-FyaG2gyYkA1iOK{flex:1}._1r6X7fIhOogOGSoxrhr-7Q{flex:0.5}._3Vfw-i_oi5ftGMRMM7irhe{font-size:14px}._3L-hlxFJFvjB367HJnjMhn{display:inline-block;max-width:50%;min-width:50%}._2CbZUlWhiijGwYBbQo1OcJ{display:inline-block}.kV3bwEVuGEeRDbA5hoixe{display:inline-block;max-width:33%;min-width:33%}._3Q91oy7XdoNRtBVSg1Jwio{display:inline-block;max-width:66%;min-width:66%}._3zAg9IPVGNgY2mmgGS2pK7{display:inline-block;max-width:75%;min-width:33%}._29ZpMZNsrAKES1ImXlk5hd{max-width:100%;min-width:100%}.d1WlOXllmqdeShSpMHNK9{display:inline-block;max-width:20%;min-width:20%}.bXbxobe2xM0D-ZTuCSOma{color:#111b27;display:flex;justify-content:space-between}.jfqOghukWzU1Z7ron5i1M{margin-bottom:22px;margin-top:8px;text-align:left}.jfqOghukWzU1Z7ron5i1M label{color:#676e78;display:block;font-size:12px}.jfqOghukWzU1Z7ron5i1M span{color:#111b27;display:block;font-size:14px;overflow:hidden;text-overflow:ellipsis}._3fvF_7R2Bw_3bJBzd4DSfc{color:#222d3b;font-size:12px}._24D7VK2KuyD0dXRVLjPbAh{color:#222d3b;font-family:Roboto-Medium;font-size:14px;font-weight:500;line-height:24px}._1zao6NuHJ2Oi5Zr6h5yjEX{color:#222d3b!important;font-size:14px!important}._3bTi3WfRRJHImBEnsUAU41{height:300px}._1FF5k-ZbcKtPCgVK5Ab6eD{margin-top:8px}.BBdPHigQAPa5m7gG4pLWl{display:inline-block}",""]),r.locals={"label-header":"bXbxobe2xM0D-ZTuCSOma",labelHeader:"bXbxobe2xM0D-ZTuCSOma",helpText:"_3fvF_7R2Bw_3bJBzd4DSfc","label-value-group":"jfqOghukWzU1Z7ron5i1M",labelValueGroup:"jfqOghukWzU1Z7ron5i1M","ingest-label-heavy":"_1zao6NuHJ2Oi5Zr6h5yjEX",ingestLabelHeavy:"_1zao6NuHJ2Oi5Zr6h5yjEX","header-bar-container":"_16hSGfI46aCMfghtArmf8W",headerBarContainer:"_16hSGfI46aCMfghtArmf8W","ingest-budgets-detail-view":"_3-sT4MWxz4swsjtc2E34Ji",ingestBudgetsDetailView:"_3-sT4MWxz4swsjtc2E34Ji",flex:"uBVL8_7LG4OU4Gju0saK",fieldsSection:"_3VYp5y6rNVzT8lWvij0VnH",fieldsSectionItem:"_24rC5eu-FyaG2gyYkA1iOK",resetTimeField:"_1r6X7fIhOogOGSoxrhr-7Q",budgetScopeText:"_3Vfw-i_oi5ftGMRMM7irhe","label-value-group-two-column":"_3L-hlxFJFvjB367HJnjMhn",labelValueGroupTwoColumn:"_3L-hlxFJFvjB367HJnjMhn","label-value-group-two-column-simple":"_2CbZUlWhiijGwYBbQo1OcJ",labelValueGroupTwoColumnSimple:"_2CbZUlWhiijGwYBbQo1OcJ","label-value-group-three-column":"kV3bwEVuGEeRDbA5hoixe",labelValueGroupThreeColumn:"kV3bwEVuGEeRDbA5hoixe","label-value-group-two-thirds-column":"_3Q91oy7XdoNRtBVSg1Jwio",labelValueGroupTwoThirdsColumn:"_3Q91oy7XdoNRtBVSg1Jwio","label-value-group-three-column-wide":"_3zAg9IPVGNgY2mmgGS2pK7",labelValueGroupThreeColumnWide:"_3zAg9IPVGNgY2mmgGS2pK7","label-value-group-one-column":"_29ZpMZNsrAKES1ImXlk5hd",labelValueGroupOneColumn:"_29ZpMZNsrAKES1ImXlk5hd","label-value-group-five-column":"d1WlOXllmqdeShSpMHNK9",labelValueGroupFiveColumn:"d1WlOXllmqdeShSpMHNK9",labelTitle:"_24D7VK2KuyD0dXRVLjPbAh","ingest-budget-assigned-collectors":"_3bTi3WfRRJHImBEnsUAU41",ingestBudgetAssignedCollectors:"_3bTi3WfRRJHImBEnsUAU41",budgetAmount:"_1FF5k-ZbcKtPCgVK5Ab6eD",inlineGroup:"BBdPHigQAPa5m7gG4pLWl"},e.exports=r},98473:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1M_uaPDCHMg1eQkSiBmwgL{overflow:auto}",""]),r.locals={tableContainer:"_1M_uaPDCHMg1eQkSiBmwgL"},e.exports=r},34113:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1Tk1Cpg7TcGMeVQJuiuXJE{padding-top:1px}",""]),r.locals={labelText:"_1Tk1Cpg7TcGMeVQJuiuXJE"},e.exports=r},41627:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2ZnavxylVXPh5f4wlYHASq{color:#9badbf}",""]),r.locals={timezone:"_2ZnavxylVXPh5f4wlYHASq"},e.exports=r},1519:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3wfxTnyunwejiAuHQQTdG9{align-items:center;display:flex}._2ItmpeG-TDB5BVteZbv8or{padding-right:4px}",""]),r.locals={usageContent:"_3wfxTnyunwejiAuHQQTdG9",usageText:"_2ItmpeG-TDB5BVteZbv8or"},e.exports=r},47346:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2CjlOin9uy4cpVF-DWQbEQ,._1wB6h3przkF-QCXt6Rh0hj{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px}._1YTFRwV4XvDfDrQKzZN0Jz,.ingest-budgets-page,.ingest-budgets-root{display:flex;flex:1 1 auto;width:100%}._1BXc4mnAgnPxPfHi4WuCsr{display:flex;flex:1 1 auto;flex-direction:column}._3quCO97As5CNIOixoLWS0u{flex:1}._2f51HzFT57gfc_5B4Milod{margin-left:16px;padding:16px 0 16px 16px;width:448px}.aJHnWtPR5Oyds8oQhaLmN{margin-bottom:12px;max-width:500px}._3XTtNIbdit8TJXNoZ9Arka{color:#e1350b}",""]),r.locals={deleteConfirmMessageSpan:"_2CjlOin9uy4cpVF-DWQbEQ",usageExceeded:"_1wB6h3przkF-QCXt6Rh0hj",page:"_1YTFRwV4XvDfDrQKzZN0Jz",cardContent:"_1BXc4mnAgnPxPfHi4WuCsr",listCard:"_3quCO97As5CNIOixoLWS0u",sidebarCard:"_2f51HzFT57gfc_5B4Milod",deleteConfirmMessage:"aJHnWtPR5Oyds8oQhaLmN",overAllocatedText:"_3XTtNIbdit8TJXNoZ9Arka"},e.exports=r},78323:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2lmTExloHFY7kpFV6W3IqH{min-width:98px}",""]),r.locals={viewAsSelect:"_2lmTExloHFY7kpFV6W3IqH"},e.exports=r},93652:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1vVlKZhYtEm6lEdK-uw34M{display:flex;flex-direction:column;height:350px;overflow:auto}.Q4zsgFFZobTSXeLshp-Re{display:flex;height:100%}._7kGlnvvvOuRUZ5DFmKnb{padding-top:10px}.bV9IcyHEYKovN1sVybNZO{vertical-align:text-bottom}",""]),r.locals={container:"_1vVlKZhYtEm6lEdK-uw34M",picker:"Q4zsgFFZobTSXeLshp-Re",createNewLocation:"_7kGlnvvvOuRUZ5DFmKnb",folderIcon:"bV9IcyHEYKovN1sVybNZO"},e.exports=r},24136:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1RD-i27_2seL5b7Yse9BG-{font-size:14px}._3hdsYmATBI47q6s19PK0Hh{margin-top:10px;max-width:200px;padding-left:10px}._2Cng4dqxoO_RT3MQQ3Mabi{margin-top:10px}",""]),r.locals={advancedSettingsTitle:"_1RD-i27_2seL5b7Yse9BG-",advancedSettings:"_3hdsYmATBI47q6s19PK0Hh",advancedSettingsContainer:"_2Cng4dqxoO_RT3MQQ3Mabi"},e.exports=r},55666:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2yZN4-HeoBgWRT_TWTzFda{display:flex;flex-direction:column;max-width:1100px}.ovROtqALmtSHxZ1K0R0BK{display:flex;margin-bottom:8px;margin-top:8px;max-width:1000px}.ovROtqALmtSHxZ1K0R0BK .Hzjf1jEFlYz7hOXF_XeyU,.ovROtqALmtSHxZ1K0R0BK ._3vGc60HVb0zaixHqgtYk8C{flex:1 1 0}.ovROtqALmtSHxZ1K0R0BK ._3vGc60HVb0zaixHqgtYk8C{margin-right:40px}",""]),r.locals={"lookup-meta-form-root":"_2yZN4-HeoBgWRT_TWTzFda",lookupMetaFormRoot:"_2yZN4-HeoBgWRT_TWTzFda","name-and-desc":"ovROtqALmtSHxZ1K0R0BK",nameAndDesc:"ovROtqALmtSHxZ1K0R0BK",description:"Hzjf1jEFlYz7hOXF_XeyU",name:"_3vGc60HVb0zaixHqgtYk8C"},e.exports=r},56526:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3UsxNtynoKUOMzIj4pgUNT{margin-top:24px}._2RzHq9cu0grZwKjjprgAj7{margin-top:12px}._2RzHq9cu0grZwKjjprgAj7 label{margin-left:-2px;margin-right:64px}._1iE5lFYxTE8kJlw2XGnIF4{align-items:center;display:flex}",""]),r.locals={title:"_3UsxNtynoKUOMzIj4pgUNT",radioGroup:"_2RzHq9cu0grZwKjjprgAj7",sizeLimitField:"_1iE5lFYxTE8kJlw2XGnIF4"},e.exports=r},1742:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3yESmpObO5KpEHvpsMcx0H{margin-top:12px}._3yESmpObO5KpEHvpsMcx0H label{margin-left:-2px;margin-right:64px}._1VO4tXND4IuNmk55tcyeuB{margin-top:24px}._2uuheTsU9Cpfz1Ffxc4QCD{align-items:flex-end;display:flex;margin-bottom:4px;margin-top:10px}._25R5wCRSHNdYQ9HWOxNIHj{margin-right:12px}._4YJbCDzmXvYUqubwA5iUo,._25R5wCRSHNdYQ9HWOxNIHj{width:80px}.duYHDxCWrzO24mNHnCxck{align-items:center;display:flex}._2vkEKXHOetxeXM7m3LzRKj{padding-left:6px}",""]),r.locals={radioGroup:"_3yESmpObO5KpEHvpsMcx0H",title:"_1VO4tXND4IuNmk55tcyeuB",inlinettl:"_2uuheTsU9Cpfz1Ffxc4QCD",ttlValue:"_25R5wCRSHNdYQ9HWOxNIHj",ttlUnit:"_4YJbCDzmXvYUqubwA5iUo",ttlField:"duYHDxCWrzO24mNHnCxck",ttlTooltip:"_2vkEKXHOetxeXM7m3LzRKj"},e.exports=r},73681:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".n__QYqu8NRcWMyKc6CmSe{font-size:16px;font-weight:700;margin-bottom:20px}._1QF5dWtYB7BiXyH2icoHpD{font-size:12px;margin-left:20px}.Btc678ReRX_mH4NiNSfUM{align-items:flex-start;border-bottom:1px solid #dde4e9;display:flex;margin:5px 0;padding-bottom:5px}.LKLXvQPu9p7IH8FhqK0gb{font-weight:700}._2wIyZN2DnXkmhRYtNofeQH{list-style:disc;margin-bottom:2px;margin-left:10px;word-break:break-word}._2wIyZN2DnXkmhRYtNofeQH .ZFDTMQ6Mi3yn2cQT6Ui4d{color:#676e78}._3n_Saiq0u2RvBOR3QB69Wj{padding-right:7px;padding-top:5px;width:5%}",""]),r.locals={panelHeading:"n__QYqu8NRcWMyKc6CmSe",jobContent:"_1QF5dWtYB7BiXyH2icoHpD",jobItem:"Btc678ReRX_mH4NiNSfUM",jobType:"LKLXvQPu9p7IH8FhqK0gb",warningOrErrorItem:"_2wIyZN2DnXkmhRYtNofeQH",cause:"ZFDTMQ6Mi3yn2cQT6Ui4d",jobIcon:"_3n_Saiq0u2RvBOR3QB69Wj"},e.exports=r},77443:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1QlquG2xVUY3Px5XlIPqZj{margin-top:20px}._2XuBp7nRIS_f_10YqZEBjn{align-items:center;display:flex;margin-top:20px}._3YS6ZkV7VbTBYiFXxRu8Yz{margin-right:30px;width:300px}._1A6OFT-7qWUbvdptyHB73F{display:flex;margin-top:50px;width:400px}._1E_oQcKBMOVGvCMFR_SyIq{padding-left:6px}",""]),r.locals={secoondaryIndicesContainer:"_1QlquG2xVUY3Px5XlIPqZj",secondaryIndexFieldContainer:"_2XuBp7nRIS_f_10YqZEBjn",secondaryIndexField:"_3YS6ZkV7VbTBYiFXxRu8Yz",secondaryIndexFieldTable:"_1A6OFT-7qWUbvdptyHB73F",secondaryIndexTooltip:"_1E_oQcKBMOVGvCMFR_SyIq"},e.exports=r},86030:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3WpwsOIiGotf3n9wR8qXFm{display:flex;flex-direction:column;height:100%}.X_MmtQVB3yYWfN2xRILCU{overflow:auto}._3qMsbp8Cv7VuKt4GbEx9Rv{flex:1 0;margin:16px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy{display:flex;flex-direction:column;height:100%;width:100%}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH{box-sizing:border-box;flex:1 1 auto;overflow-y:auto;padding:20px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1aXuzxYhCJOpcydr7WXzfT{display:flex;margin-bottom:32px;margin-top:12px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1aXuzxYhCJOpcydr7WXzfT ._126yvBkWMoznVdYYBMF_Dt,._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1aXuzxYhCJOpcydr7WXzfT ._1x9HoJ-cpVbHzkih1wcczX{flex:1 1 0}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1aXuzxYhCJOpcydr7WXzfT ._1x9HoJ-cpVbHzkih1wcczX{margin-right:40px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1aXuzxYhCJOpcydr7WXzfT ._126yvBkWMoznVdYYBMF_Dt{margin-left:40px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._3URjGra3BoJ6Ddi3q0uvD3{margin-bottom:24px;margin-top:24px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1rdVWzcGbLh0VWhvxUNlYr{margin-bottom:12px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._3dVsbosXp12ObxkNWVbrEy label{margin-left:-1px;margin-right:64px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1FH-pfGHLYgqQMtqUROZb9{padding:24px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._3F9RCGMFC3gsN-qqmd1tPn{padding:5px 0 6px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._3F9RCGMFC3gsN-qqmd1tPn .RsZRMM4jbmBaVNTFp4LBE{margin-left:0}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._2SPcsn6PH9KdHWw6iNT0N4{margin-bottom:4px;margin-top:24px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._2twOPp5d4HCJH5giRAQYSv{margin-top:20px}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1j76lcHmX8fmvG-0oGncoX{align-items:center;display:flex}._3qMsbp8Cv7VuKt4GbEx9Rv ._31irAkUY_gANrWWth1gniy .HR1X46JyfJfYfMPZNa_tH ._1j76lcHmX8fmvG-0oGncoX ._3NbJemefKmimWuSrN1dFVm{margin-right:10px}._3BlhH1oDLiEcQyy9q6WZ7j li{list-style:disc;margin-left:20px}._2UAJqqGxwpQewaa11MOuc0{align-items:center;color:#7c828b;display:flex;margin-left:20px}._1vlCCXZcDb3pF7DR9rmNLi{margin-right:5px}",""]),r.locals={lookupTableCreatorContainer:"_3WpwsOIiGotf3n9wR8qXFm",lookupTableCreatorSidePane:"X_MmtQVB3yYWfN2xRILCU",lookupTablesContainerCard:"_3qMsbp8Cv7VuKt4GbEx9Rv",lookupTableCreator:"_31irAkUY_gANrWWth1gniy",lookupTableCreatorBody:"HR1X46JyfJfYfMPZNa_tH",nameAndDescription:"_1aXuzxYhCJOpcydr7WXzfT",description:"_126yvBkWMoznVdYYBMF_Dt",name:"_1x9HoJ-cpVbHzkih1wcczX",row:"_3URjGra3BoJ6Ddi3q0uvD3",title:"_1rdVWzcGbLh0VWhvxUNlYr",inlineRadio:"_3dVsbosXp12ObxkNWVbrEy",response:"_1FH-pfGHLYgqQMtqUROZb9",uploadChip:"_3F9RCGMFC3gsN-qqmd1tPn",chipWrapper:"RsZRMM4jbmBaVNTFp4LBE",schemaBuilderHeading:"_2SPcsn6PH9KdHWw6iNT0N4",schemaBuilder:"_2twOPp5d4HCJH5giRAQYSv",jobInProgress:"_1j76lcHmX8fmvG-0oGncoX",loader:"_3NbJemefKmimWuSrN1dFVm",requirementList:"_3BlhH1oDLiEcQyy9q6WZ7j",lookupLimitSubtitle:"_2UAJqqGxwpQewaa11MOuc0",lookupLimitSubtitleText:"_1vlCCXZcDb3pF7DR9rmNLi"},e.exports=r},41001:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3TEbH2MoFiJlB072ToZyJb{justify-content:flex-start;margin-top:12px}._3TEbH2MoFiJlB072ToZyJb ._26OXveIeNZvHvaVhSrG1nK{margin-right:16px}._1qARHuo-dVcXUvPwTUaIyp{display:none}",""]),r.locals={dialogButtons:"_3TEbH2MoFiJlB072ToZyJb",button:"_26OXveIeNZvHvaVhSrG1nK",hidden:"_1qARHuo-dVcXUvPwTUaIyp"},e.exports=r},7121:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".BBGJkFiQz2vdYnA6OYnFa{margin-bottom:18px}.xNF4OXbkvwI3JtCa3sd0y{margin:5px 0 6px}._2wV7GfNUtiVA5dSxDvgZfz{padding-bottom:16px}",""]),r.locals={heading:"BBGJkFiQz2vdYnA6OYnFa",uploadFileChip:"xNF4OXbkvwI3JtCa3sd0y",errorContainer:"_2wV7GfNUtiVA5dSxDvgZfz"},e.exports=r},51173:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1KC8XpZICLyMj_CKAdRJ4C{align-items:center;display:flex;height:100%;justify-content:center}._1bDpvnIVAv7ySeP-PeVn5B{padding-left:6px}._3HlEsjafTri3x7hx6G0fhh{margin-bottom:20px;padding:20px}._3p-mbDYOvFmrQSxP44cirQ{flex:1 1 auto;height:100%}",""]),r.locals={"preloader-spinner":"_1KC8XpZICLyMj_CKAdRJ4C",preloaderSpinner:"_1KC8XpZICLyMj_CKAdRJ4C","loading-text":"_1bDpvnIVAv7ySeP-PeVn5B",loadingText:"_1bDpvnIVAv7ySeP-PeVn5B",lookupTableHeaderCard:"_3HlEsjafTri3x7hx6G0fhh",lookupTablesContainerCard:"_3p-mbDYOvFmrQSxP44cirQ"},e.exports=r},64755:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1-cctiyOG1gpaZDl6Baxw8{box-sizing:border-box;height:100%;width:100%}.b5S_Z07Dic9985BVTHrd2{display:block;height:100%}",""]),r.locals={lookupTablesContainerRoot:"_1-cctiyOG1gpaZDl6Baxw8",lookupTablesContainer:"b5S_Z07Dic9985BVTHrd2"},e.exports=r},98793:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1PoEIHgoxl_mcyODduPo2n{font-family:Lab Grotesque Regular,Arial,sans-serif;font-size:14px}.dPNNZP-mo2paqxgq7ctzx{justify-content:center}._1I7DztTYtUg4OkbVj0DWbE{padding-bottom:6px}._1PoEIHgoxl_mcyODduPo2n{font-size:12px}.liw-Ljvl-S78otC0N7_eR{box-sizing:border-box;margin-left:20px;width:50%}._3vMtd_lcVnsPrNEA8jiGMp{overflow:hidden}._1PoEIHgoxl_mcyODduPo2n{color:#517691}",""]),r.locals={"must-contain-group-title":"_1PoEIHgoxl_mcyODduPo2n",mustContainGroupTitle:"_1PoEIHgoxl_mcyODduPo2n","submit-container":"dPNNZP-mo2paqxgq7ctzx",submitContainer:"dPNNZP-mo2paqxgq7ctzx","must-contain-group-container":"_1I7DztTYtUg4OkbVj0DWbE",mustContainGroupContainer:"_1I7DztTYtUg4OkbVj0DWbE","loading-panel":"liw-Ljvl-S78otC0N7_eR",loadingPanel:"liw-Ljvl-S78otC0N7_eR","form-container":"_3vMtd_lcVnsPrNEA8jiGMp",formContainer:"_3vMtd_lcVnsPrNEA8jiGMp"},e.exports=r},89247:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3a5UfGRLSIZfDqkPOZZaQu,._2Qb-rRQDQbHhi4NYKLGih-{max-width:500px}._3Uoj6v7-LKNYTMoOR200sE{margin-left:26px}._24CTQhuvmhWThD9Jnb_34Q{width:80%}._2NqffaZk1kZHkQUTuq7GhI{margin-bottom:5px}._1TT78SDIr-YUCe84JUdCla{box-sizing:border-box;margin-left:20px;width:50%}",""]),r.locals={"hint-width":"_3a5UfGRLSIZfDqkPOZZaQu",hintWidth:"_3a5UfGRLSIZfDqkPOZZaQu","subtitle-width":"_2Qb-rRQDQbHhi4NYKLGih-",subtitleWidth:"_2Qb-rRQDQbHhi4NYKLGih-","select-padding":"_3Uoj6v7-LKNYTMoOR200sE",selectPadding:"_3Uoj6v7-LKNYTMoOR200sE","select-width":"_24CTQhuvmhWThD9Jnb_34Q",selectWidth:"_24CTQhuvmhWThD9Jnb_34Q","dialog-margin":"_2NqffaZk1kZHkQUTuq7GhI",dialogMargin:"_2NqffaZk1kZHkQUTuq7GhI","loading-panel":"_1TT78SDIr-YUCe84JUdCla",loadingPanel:"_1TT78SDIr-YUCe84JUdCla"},e.exports=r},34400:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2VuTQ3fXGlqeKUVqcDddSJ{margin-left:26px}",""]),r.locals={"notification-margin":"_2VuTQ3fXGlqeKUVqcDddSJ",notificationMargin:"_2VuTQ3fXGlqeKUVqcDddSJ"},e.exports=r},23166:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3EHEsWXeg5KiTjsHvHuvtA{margin:5px}",""]),r.locals={toolbarIcon:"_3EHEsWXeg5KiTjsHvHuvtA"},e.exports=r},52018:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3Pb0A8jCS8Q91Ty_-UoDat{display:flex;flex:1 1 auto;flex-direction:column;min-height:0}._1y5Ji0Utvc26ZLAT8Q0a_d{font-family:Roboto,Arial,sans-serif;font-size:14px}._1SEm-k0rNt5Z1Uc_RMv2uo{align-items:center;display:flex;flex-flow:row nowrap}._1NWr8AF0t5Lj2uFibUziQf{background:#0000!important;border:none!important;flex-basis:100%;margin-right:16px;margin-top:0!important;width:500px!important}._19LcQx95ldpvRR5HNgzSvh{flex:0 0 auto!important;font-family:RobotoLight,Arial,sans-serif!important;font-size:20px!important;font-weight:500!important;letter-spacing:.005em!important;padding:24px 24px 16px!important}._3Pb0A8jCS8Q91Ty_-UoDat{overflow:auto;padding:0 24px}._3Pb0A8jCS8Q91Ty_-UoDat._2Bc1dHUocKxfviRtha_O9E{background:none;padding:0}._2bPuO2Qqv_Tc0H7iaq79yS{display:flex;flex:0 0 auto;justify-content:flex-end;padding:16px 24px 24px}._2bPuO2Qqv_Tc0H7iaq79yS ._10RmKgC2biujC9RANilvUE{margin:0}._2bPuO2Qqv_Tc0H7iaq79yS ._10RmKgC2biujC9RANilvUE+._10RmKgC2biujC9RANilvUE{margin-left:12px}",""]),r.locals={body:"_3Pb0A8jCS8Q91Ty_-UoDat","metrics-share-shortcode-dialog":"_1y5Ji0Utvc26ZLAT8Q0a_d",metricsShareShortcodeDialog:"_1y5Ji0Utvc26ZLAT8Q0a_d","url-text-group":"_1SEm-k0rNt5Z1Uc_RMv2uo",urlTextGroup:"_1SEm-k0rNt5Z1Uc_RMv2uo","url-text":"_1NWr8AF0t5Lj2uFibUziQf",urlText:"_1NWr8AF0t5Lj2uFibUziQf",header:"_19LcQx95ldpvRR5HNgzSvh","-advanced":"_2Bc1dHUocKxfviRtha_O9E",advanced:"_2Bc1dHUocKxfviRtha_O9E",actions:"_2bPuO2Qqv_Tc0H7iaq79yS","md-button":"_10RmKgC2biujC9RANilvUE",mdButton:"_10RmKgC2biujC9RANilvUE"},e.exports=r},80152:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1r6D7Wg7SEZXUwryL2YuHe._395eSGbmJD1R1A0v5aKOoG{display:inline}._1r6D7Wg7SEZXUwryL2YuHe._1xLumN7dq7JzABlzF8SUaF{margin-bottom:10px}._1vQtGI7pbUPqaOIuZXxYEM:not(:first-child){margin-top:10px}",""]),r.locals={hintText:"_1r6D7Wg7SEZXUwryL2YuHe",inline:"_395eSGbmJD1R1A0v5aKOoG",bottomMargin:"_1xLumN7dq7JzABlzF8SUaF",field:"_1vQtGI7pbUPqaOIuZXxYEM"},e.exports=r},5840:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1RDLMldFK5AxZxyj8iYb6X{flex:1}.BHsjb8JTSw_s1JiR7Aamm{display:flex}.BHsjb8JTSw_s1JiR7Aamm:not(:last-child){margin-bottom:24px}._2GnzhDEMQJzyaFMlaW-iJ{align-items:center;display:flex}._2GnzhDEMQJzyaFMlaW-iJ svg{margin-right:8px}.C7klFoU9ch0Td0rdInUb4{margin:0;padding-left:24px}.C7klFoU9ch0Td0rdInUb4 li{list-style:disc}",""]),r.locals={field:"_1RDLMldFK5AxZxyj8iYb6X",row:"BHsjb8JTSw_s1JiR7Aamm",rowIconLeft:"_2GnzhDEMQJzyaFMlaW-iJ",fieldsList:"C7klFoU9ch0Td0rdInUb4"},e.exports=r},72588:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._22RzwfUS4YPqWFt_FKM2ch{align-items:baseline;display:flex}._22RzwfUS4YPqWFt_FKM2ch .KEXJo1gQnIJZ_gHHBz9qv,._22RzwfUS4YPqWFt_FKM2ch ._23xupj3NC341zKNHpId_lm{max-width:400px}._22RzwfUS4YPqWFt_FKM2ch ._23xupj3NC341zKNHpId_lm{margin-right:24px}._22RzwfUS4YPqWFt_FKM2ch .KEXJo1gQnIJZ_gHHBz9qv{margin-left:24px}",""]),r.locals={basicDetails:"_22RzwfUS4YPqWFt_FKM2ch",descriptionField:"KEXJo1gQnIJZ_gHHBz9qv",nameField:"_23xupj3NC341zKNHpId_lm"},e.exports=r},95903:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2nWDsMiUp169TKSXBURYpm ._2fdr9lVjOgnn3vKMeXfRjI{align-items:center;display:flex;justify-content:space-between}._2nWDsMiUp169TKSXBURYpm ._2fdr9lVjOgnn3vKMeXfRjI ._2M1k-ZovxqXeVH5EljsiGv ._2u74NIgXMZ1BeAzDVzGcOQ{margin:0}._2nWDsMiUp169TKSXBURYpm .Pam9fkO33NU9hjP2PrYiT{padding:0}",""]),r.locals={enhancedEditor:"_2nWDsMiUp169TKSXBURYpm",summary:"_2fdr9lVjOgnn3vKMeXfRjI",buttons:"_2M1k-ZovxqXeVH5EljsiGv",textButton:"_2u74NIgXMZ1BeAzDVzGcOQ","code-editor":"Pam9fkO33NU9hjP2PrYiT",codeEditor:"Pam9fkO33NU9hjP2PrYiT"},e.exports=r},28692:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._38KPePwTEIL8B744y9WZhE ._2yFOBnkohB7XMvOpm5jeuq{display:flex;justify-content:space-between}._38KPePwTEIL8B744y9WZhE ._2yFOBnkohB7XMvOpm5jeuq ._18xSQcFSfIyUWV4_soHg0m{margin-left:16px}._38KPePwTEIL8B744y9WZhE ._1S3brLQ_8TIk_sJz3d0cSR{max-height:200px;min-height:200px;overflow-y:scroll}._38KPePwTEIL8B744y9WZhE ._1S3brLQ_8TIk_sJz3d0cSR .aXDQYL8_pOidneFAtIE-5{color:#abbac9}",""]),r.locals={logMessageSnippetContainer:"_38KPePwTEIL8B744y9WZhE",header:"_2yFOBnkohB7XMvOpm5jeuq",headerButton:"_18xSQcFSfIyUWV4_soHg0m",logMessageSnippets:"_1S3brLQ_8TIk_sJz3d0cSR",emptyStateHint:"aXDQYL8_pOidneFAtIE-5"},e.exports=r},24799:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1jUbjplRdSLaa7hNF7umKg,._2o7pQ14NQpW9tgJW1o1uIr,._1DRZv4aFArD9OxhqpZieZ9,._23_ONRmjn4dxL8lU-n-2_3{font-family:Roboto,Arial,sans-serif;font-size:14px}._1UAz1HOHiTm_Aaos97tv2M{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px}._3mxIme4yhkrlA8DK1PNRbR{border-style:solid;border-width:1px;margin:2px}._2hlHsfYMZ-ZX15doYB9loS{display:flex;flex:1 1 auto}._1_9wCBXAwVXjPy2GIqIEcH{color:#222d3b;font-family:Roboto;font-size:14px;line-height:24px;margin-top:6px;max-width:15%;min-width:15%;text-align:right}._1AXU6LUCzrEc-CUakP2LHE{max-width:85%;min-width:85%;word-break:break-all}._2AzOluV8LxI35mH2w4JI2P,._39A6QqoUTRXBM5PtbYCVLF{font-weight:700}._1DRZv4aFArD9OxhqpZieZ9{background-color:#dde4e9;border-radius:2px;display:inline-flex;line-height:20px;margin:4px;padding:4px}._3n7IZ499VaUGi4ft0kP9jS{background-color:#d3d3d3}._3n7IZ499VaUGi4ft0kP9jS,._23_ONRmjn4dxL8lU-n-2_3{display:inline-block;margin:4px;padding:4px}._23_ONRmjn4dxL8lU-n-2_3{background-color:#fff5c8}._1vIlTMLixTzMH8uaMAf3Yf{background-color:#d3d3d3;display:inline-block;margin:4px;padding:4px}._2o7pQ14NQpW9tgJW1o1uIr{color:#1f2d3c;line-height:12px}._3BromPRE3NMY6wNcWxYgoO{color:blue}._2LjHC2D9ToEE0lUCgdRbh3{border:1px solid gray;margin-bottom:4px}._1Jg8CTPrCsmYhb2UEufu_t{padding-right:4px}",""]),r.locals={"chip-style-key":"_1jUbjplRdSLaa7hNF7umKg",chipStyleKey:"_1jUbjplRdSLaa7hNF7umKg","chip-style-key-warning":"_2o7pQ14NQpW9tgJW1o1uIr",chipStyleKeyWarning:"_2o7pQ14NQpW9tgJW1o1uIr","chip-style-log-message":"_1DRZv4aFArD9OxhqpZieZ9",chipStyleLogMessage:"_1DRZv4aFArD9OxhqpZieZ9","chip-style-warning":"_23_ONRmjn4dxL8lU-n-2_3",chipStyleWarning:"_23_ONRmjn4dxL8lU-n-2_3","chip-style-value":"_1UAz1HOHiTm_Aaos97tv2M",chipStyleValue:"_1UAz1HOHiTm_Aaos97tv2M","message-details-container":"_3mxIme4yhkrlA8DK1PNRbR",messageDetailsContainer:"_3mxIme4yhkrlA8DK1PNRbR","message-details-category":"_2hlHsfYMZ-ZX15doYB9loS",messageDetailsCategory:"_2hlHsfYMZ-ZX15doYB9loS","message-details-filter":"_1_9wCBXAwVXjPy2GIqIEcH",messageDetailsFilter:"_1_9wCBXAwVXjPy2GIqIEcH","message-details-content":"_1AXU6LUCzrEc-CUakP2LHE",messageDetailsContent:"_1AXU6LUCzrEc-CUakP2LHE","message-details-value":"_2AzOluV8LxI35mH2w4JI2P",messageDetailsValue:"_2AzOluV8LxI35mH2w4JI2P","value-style":"_39A6QqoUTRXBM5PtbYCVLF",valueStyle:"_39A6QqoUTRXBM5PtbYCVLF","chip-style-factors":"_3n7IZ499VaUGi4ft0kP9jS",chipStyleFactors:"_3n7IZ499VaUGi4ft0kP9jS","chip-style-events":"_1vIlTMLixTzMH8uaMAf3Yf",chipStyleEvents:"_1vIlTMLixTzMH8uaMAf3Yf","chip-style-factor":"_3BromPRE3NMY6wNcWxYgoO",chipStyleFactor:"_3BromPRE3NMY6wNcWxYgoO","parser-header":"_2LjHC2D9ToEE0lUCgdRbh3",parserHeader:"_2LjHC2D9ToEE0lUCgdRbh3","chip-style-icon":"_1Jg8CTPrCsmYhb2UEufu_t",chipStyleIcon:"_1Jg8CTPrCsmYhb2UEufu_t"},e.exports=r},50623:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2Fo9zM45Y5JYUb5nFdHNE4{border:1px solid gray;margin-bottom:4px}._3cCPaRfTRF9ftY3L5gr1Rr{margin-top:8px}.w3fwhJUQZy7QRmLYG1Q-p{padding-bottom:16px;padding-top:16px}",""]),r.locals={"parsed-events":"_2Fo9zM45Y5JYUb5nFdHNE4",parsedEvents:"_2Fo9zM45Y5JYUb5nFdHNE4","page-container":"_3cCPaRfTRF9ftY3L5gr1Rr",pageContainer:"_3cCPaRfTRF9ftY3L5gr1Rr","checkbox-container":"w3fwhJUQZy7QRmLYG1Q-p",checkboxContainer:"w3fwhJUQZy7QRmLYG1Q-p"},e.exports=r},62175:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3N3K5LNElHyoWIBebYj12K{align-items:baseline;display:flex;justify-content:space-between;margin-top:16px}._3N3K5LNElHyoWIBebYj12K .ZP8PJJeLWreiAUVv7c7do{display:flex}._3mNAp792Z0lGtdK5uqeSLt{display:flex;flex:1 1 auto;flex-direction:column}._2uUMVAFP1HvyhQtegaIcX6{flex:1}._2XKQpCHg5zonVQ9MiqkRxb{display:flex;flex:1 1 auto}.Ol21sKpbXq1uQpI3lcoiU{margin-bottom:14px;text-align:left}._2mXNw_Du9FTWSn9WlvBru6{max-width:100%;min-width:100%}.uW3je0rJXtWZr8cCboPLc{display:inline-block;max-width:50%;min-width:50%;padding:8px}._1vbEsh92Oiriz3NR_2JErU{display:inline-block;max-width:33%;min-width:33%;padding:8px}._34bl93pzFDJN92DBYSqn-J{display:inline-block;max-width:50%;min-width:50%}._2rwfQ3F2rrZFIDLmUAquRj{display:inline-block;max-width:33%;min-width:33%}.TpC-tSlctce01-flvVq6X{display:inline-block;max-width:25%;min-width:25%}._2wcTWkzHr4MzM5uqZsW2Yb{display:inline-block;max-width:20%;min-width:20%}.LRgAdohsSmI-VGpsc8AN6{margin-top:16px}._1spimjzq3N_MrDyAEebtxU{border:1px solid #dde4e9;margin-bottom:5px;margin-top:25px}._4emSPjAlPB7heXRteV8xP{align-content:center;display:flex}.Rqeg3zy0CbaeBJHOx9Rfp{margin-right:18px}._1s0vzlV4JnaAHa4JsDYolI{padding-bottom:8px}._1q0GxAxm10AHtIsNWx6UMf{margin-top:8px;min-height:24px}",""]),r.locals={logEditorFooter:"_3N3K5LNElHyoWIBebYj12K",fields:"ZP8PJJeLWreiAUVv7c7do","parser-editor":"_3mNAp792Z0lGtdK5uqeSLt",parserEditor:"_3mNAp792Z0lGtdK5uqeSLt",listCard:"_2uUMVAFP1HvyhQtegaIcX6",cardContent:"_2XKQpCHg5zonVQ9MiqkRxb","label-value-group":"Ol21sKpbXq1uQpI3lcoiU",labelValueGroup:"Ol21sKpbXq1uQpI3lcoiU","label-value-group-one-column":"_2mXNw_Du9FTWSn9WlvBru6",labelValueGroupOneColumn:"_2mXNw_Du9FTWSn9WlvBru6","label-value-group-two-column-padded":"uW3je0rJXtWZr8cCboPLc",labelValueGroupTwoColumnPadded:"uW3je0rJXtWZr8cCboPLc","label-value-group-three-column-padded":"_1vbEsh92Oiriz3NR_2JErU",labelValueGroupThreeColumnPadded:"_1vbEsh92Oiriz3NR_2JErU","label-value-group-two-column":"_34bl93pzFDJN92DBYSqn-J",labelValueGroupTwoColumn:"_34bl93pzFDJN92DBYSqn-J","label-value-group-three-column":"_2rwfQ3F2rrZFIDLmUAquRj",labelValueGroupThreeColumn:"_2rwfQ3F2rrZFIDLmUAquRj","label-value-group-four-column":"TpC-tSlctce01-flvVq6X",labelValueGroupFourColumn:"TpC-tSlctce01-flvVq6X","label-value-group-five-column":"_2wcTWkzHr4MzM5uqZsW2Yb",labelValueGroupFiveColumn:"_2wcTWkzHr4MzM5uqZsW2Yb",buttonContainer:"LRgAdohsSmI-VGpsc8AN6",separatingLine:"_1spimjzq3N_MrDyAEebtxU","fetch-logs-container":"_4emSPjAlPB7heXRteV8xP",fetchLogsContainer:"_4emSPjAlPB7heXRteV8xP","fetch-logs":"Rqeg3zy0CbaeBJHOx9Rfp",fetchLogs:"Rqeg3zy0CbaeBJHOx9Rfp","editor-block":"_1s0vzlV4JnaAHa4JsDYolI",editorBlock:"_1s0vzlV4JnaAHa4JsDYolI","parser-type-radios":"_1q0GxAxm10AHtIsNWx6UMf",parserTypeRadios:"_1q0GxAxm10AHtIsNWx6UMf"},e.exports=r},26848:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1yCYVEvQsXQ1H2KLBZq27W{margin:1px}._1BAD1TqBk5TtG9AKbJVDyG *{box-sizing:initial!important}._1LGm9lwI4WSWSl8eMp61KX{margin:1px}",""]),r.locals={page:"_1yCYVEvQsXQ1H2KLBZq27W",contentBox:"_1BAD1TqBk5TtG9AKbJVDyG",listCard:"_1LGm9lwI4WSWSl8eMp61KX"},e.exports=r},118:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3Ry4gWdcVFkWGmV5jMpeOK{display:inline-block;max-width:50%;min-width:50%}._28VnQyRiqkHcm2Ng4O7fuh{display:inline-block;margin-right:8px;max-width:33%;min-width:25%}._3_c0s-oW-My293ZV3d9ccG{display:inline-block;width:800px}._3thAk2Yhk984BFC9cf-d_3{align-items:flex-end;display:flex;padding-bottom:16px}._3thAk2Yhk984BFC9cf-d_3 ._1K3IDv868Dw4wgFlX2diz7{display:flex;margin-right:24px}._3thAk2Yhk984BFC9cf-d_3 ._1K3IDv868Dw4wgFlX2diz7 ._3xXanyvB-BRrwua4_4CWWC{width:200px}._3thAk2Yhk984BFC9cf-d_3 ._1K3IDv868Dw4wgFlX2diz7 ._2mCHKCViEnyLwmOltM2CMX{margin-left:24px;width:250px}._3omJBkOGX0CR7iSV5MfDBG{padding:10px 24px}._34j7R9YHE__KMdHDu6Gyyt ._3AOnAYReE984mnqJBbcFy8{display:flex;justify-content:space-between}._34j7R9YHE__KMdHDu6Gyyt ._3AOnAYReE984mnqJBbcFy8 ._23oXHCe8gxpgNK0z6mfdHC{margin:0}._34j7R9YHE__KMdHDu6Gyyt ._2B5KTWUyuoJmq0ubWwZS8v{max-height:190px;min-height:185px;overflow-y:scroll}._34j7R9YHE__KMdHDu6Gyyt ._2B5KTWUyuoJmq0ubWwZS8v ._1p_DwL2EXSBXSVqGYv6ViO{color:#abbac9}",""]),r.locals={"label-value-group-two-column":"_3Ry4gWdcVFkWGmV5jMpeOK",labelValueGroupTwoColumn:"_3Ry4gWdcVFkWGmV5jMpeOK","label-value-group-three-column":"_28VnQyRiqkHcm2Ng4O7fuh",labelValueGroupThreeColumn:"_28VnQyRiqkHcm2Ng4O7fuh","dialog-content":"_3_c0s-oW-My293ZV3d9ccG",dialogContent:"_3_c0s-oW-My293ZV3d9ccG",controls:"_3thAk2Yhk984BFC9cf-d_3",breakerRegexControls:"_1K3IDv868Dw4wgFlX2diz7",breakerType:"_3xXanyvB-BRrwua4_4CWWC",customRegex:"_2mCHKCViEnyLwmOltM2CMX",dialogTitle:"_3omJBkOGX0CR7iSV5MfDBG",rawLogsContainer:"_34j7R9YHE__KMdHDu6Gyyt",header:"_3AOnAYReE984mnqJBbcFy8",headerButton:"_23oXHCe8gxpgNK0z6mfdHC",logSnippets:"_2B5KTWUyuoJmq0ubWwZS8v",emptyStateHint:"_1p_DwL2EXSBXSVqGYv6ViO"},e.exports=r},18174:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1-gn2AuDw_IxwltssJ8N1t{display:inline-block;max-width:50%;min-width:50%}._2Ju4s2NKnlUkN-jDeOrShG{display:inline-block;max-width:33%;min-width:33%}._37m-7g9trMhRIZxjiPGS3u{display:inline-block;width:648px}._2ny8z8-uOWwBI1rj8eI4It{height:333px}.LjZ0GgtcV5QgEVNT3E8S-{height:315px}._3-7BAiyqSGr6oNnYpkvv2b{color:#222d3b;font-family:Roboto;font-size:16px;line-height:24px;padding-bottom:8px;padding-left:24px}._3TX5AhDMeVuIqKV8ZFn9O4{padding-top:16px}._2nNPBKxBhBVMe2gtqSYtc6{width:50%}",""]),r.locals={"label-value-group-two-column":"_1-gn2AuDw_IxwltssJ8N1t",labelValueGroupTwoColumn:"_1-gn2AuDw_IxwltssJ8N1t","label-value-group-three-column":"_2Ju4s2NKnlUkN-jDeOrShG",labelValueGroupThreeColumn:"_2Ju4s2NKnlUkN-jDeOrShG","dialog-content":"_37m-7g9trMhRIZxjiPGS3u",dialogContent:"_37m-7g9trMhRIZxjiPGS3u","search-table":"_2ny8z8-uOWwBI1rj8eI4It",searchTable:"_2ny8z8-uOWwBI1rj8eI4It","preview-container":"LjZ0GgtcV5QgEVNT3E8S-",previewContainer:"LjZ0GgtcV5QgEVNT3E8S-","sub-title":"_3-7BAiyqSGr6oNnYpkvv2b",subTitle:"_3-7BAiyqSGr6oNnYpkvv2b","preview-editor":"_3TX5AhDMeVuIqKV8ZFn9O4",previewEditor:"_3TX5AhDMeVuIqKV8ZFn9O4","name-entry":"_2nNPBKxBhBVMe2gtqSYtc6",nameEntry:"_2nNPBKxBhBVMe2gtqSYtc6"},e.exports=r},99398:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE{width:800px}.XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE .LTTXknwRICUmLo9xmf7zN{margin-top:24px;max-width:460px}.XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE .LTTXknwRICUmLo9xmf7zN ._3sI6UgWWwf4YYNCmd89Nis{margin-bottom:28px}.XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE .LTTXknwRICUmLo9xmf7zN ._2HjQzc9gJ1z3bfU566phWC{align-items:baseline;display:flex;justify-content:space-between;margin-bottom:28px}.XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE .LTTXknwRICUmLo9xmf7zN ._2HjQzc9gJ1z3bfU566phWC ._16yDKzmLJKn7g606lgs3am{display:flex}.XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE .LTTXknwRICUmLo9xmf7zN ._2HjQzc9gJ1z3bfU566phWC ._16yDKzmLJKn7g606lgs3am ._1vL6_mAcy3KWkX-4Syn6o8,.XwmeH3VFT15IJlMRSob79 ._1nRhjWWrJAfQW12_5fmTEE .LTTXknwRICUmLo9xmf7zN ._2HjQzc9gJ1z3bfU566phWC ._16yDKzmLJKn7g606lgs3am ._3tJuvRjqdLHBkPRXahvt6S{margin-right:16px}.XwmeH3VFT15IJlMRSob79 ._3mGEl94jm2cDR28Y6oiKds{position:relative}.XwmeH3VFT15IJlMRSob79 ._3mGEl94jm2cDR28Y6oiKds ._3kyxxGOgP491GsvCSYinXw{left:18px;position:absolute;top:36px;z-index:10}.XwmeH3VFT15IJlMRSob79 ._1vOj89d3K5G7NnVqbtxImY{margin-top:8px}",""]),r.locals={sumoQueryDialog:"XwmeH3VFT15IJlMRSob79","dialog-content":"_1nRhjWWrJAfQW12_5fmTEE",dialogContent:"_1nRhjWWrJAfQW12_5fmTEE",controls:"LTTXknwRICUmLo9xmf7zN","query-entry":"_3sI6UgWWwf4YYNCmd89Nis",queryEntry:"_3sI6UgWWwf4YYNCmd89Nis",controlRow:"_2HjQzc9gJ1z3bfU566phWC",inputs:"_16yDKzmLJKn7g606lgs3am",numMessagesInput:"_1vL6_mAcy3KWkX-4Syn6o8",timeRangeInput:"_3tJuvRjqdLHBkPRXahvt6S",zeroResultsRow:"_3mGEl94jm2cDR28Y6oiKds",zeroResultsText:"_3kyxxGOgP491GsvCSYinXw",errorRow:"_1vOj89d3K5G7NnVqbtxImY"},e.exports=r},58352:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2BNvm7aLdin1ieBpg7Qj83{align-items:center;display:flex;height:100%;justify-content:center;width:100%}",""]),r.locals={container:"_2BNvm7aLdin1ieBpg7Qj83"},e.exports=r},26919:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._27ICcSdU6WYZfaOOFh9m2l{background-color:#fafafa;border-right:1px solid #f5f8fa;padding:24px 12px}._27btQM1t5LtaaqORyNVPjd{margin-top:10px}._2JfQ5KTd0eLfNxkDqQs1Nb{margin:0}._2JfQ5KTd0eLfNxkDqQs1Nb li{list-style:inside}.rvYKkRkprY85N0jqQHOhY{margin-bottom:20px;width:100%}._1qauubIJyFmetJvuG_zpB1{background-color:initial;margin-left:21px}.TRaEqia4F0UOMSEzDnUH9{color:#5d7892}._2KQ7px_rPc-LQV-FJh1DVR{align-items:center;color:#687b96;display:flex;padding-left:12px}._3iClH3QImT0cAakJthIgEV{margin-right:6px}",""]),r.locals={faqContainer:"_27ICcSdU6WYZfaOOFh9m2l",question:"_27btQM1t5LtaaqORyNVPjd",faqList:"_2JfQ5KTd0eLfNxkDqQs1Nb",warning:"rvYKkRkprY85N0jqQHOhY",answerWrapper:"_1qauubIJyFmetJvuG_zpB1",answer:"TRaEqia4F0UOMSEzDnUH9",title:"_2KQ7px_rPc-LQV-FJh1DVR",titleIcon:"_3iClH3QImT0cAakJthIgEV"},e.exports=r},17861:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3eUZaoGcMrk7K69579q7N6{margin-bottom:12px}",""]),r.locals={dialogContent:"_3eUZaoGcMrk7K69579q7N6"},e.exports=r},65944:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"unified-monitors-page{display:flex;height:100%}",""]),r.locals={},e.exports=r},65775:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1s0tN1lcYeAvGVRBV9ExR7{text-decoration:none}",""]),r.locals={link:"_1s0tN1lcYeAvGVRBV9ExR7"},e.exports=r},82212:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3MTOqLZRoIWRoG4y8ZAd9L{align-items:center;box-sizing:border-box;color:#151e30;cursor:pointer;display:flex;font-family:Lab Grotesque Medium,Arial Bold,sans-serif;font-size:16px;height:48px;padding:12px 16px;-webkit-user-select:none;-moz-user-select:none}.GcKg7h-peg7OY29gaja_S{color:#9db4c7;margin-right:6px}._2s9bkQA7qvPpmcuxAVsABi{font-size:14px;height:28px;padding:0 12px}._3ERCLGKnWSBwoYLvSBg9mW{background-color:#f5f8fa;padding:16px}._3s7MKHHFAPNdUcPvjAu6-W{padding:12px}",""]),r.locals={expansionPanelSummary:"_3MTOqLZRoIWRoG4y8ZAd9L",expansionPanelSummaryIcon:"GcKg7h-peg7OY29gaja_S",expansionPanelSummaryDense:"_2s9bkQA7qvPpmcuxAVsABi",expansionPanelContent:"_3ERCLGKnWSBwoYLvSBg9mW",expansionPanelContentDense:"_3s7MKHHFAPNdUcPvjAu6-W"},e.exports=r},29119:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._15XlkgDZuIRHc9W0K2397K{display:flex;flex-direction:column}",""]),r.locals={errorWrapper:"_15XlkgDZuIRHc9W0K2397K"},e.exports=r},80087:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,'div._1BbYDJZk6NSM0aybr0UFAZ{margin-bottom:0}._46JBA1YgsyJsu0D3OlJR6 ul{margin:6px 0 0 12px}._46JBA1YgsyJsu0D3OlJR6 ul li{list-style-type:disc}._3AawQXnP2TXSxF-aCYYt-v{display:flex}._3AawQXnP2TXSxF-aCYYt-v ._2Lhs5XIeUFxMw4EyB25PoL{align-self:center;margin-left:6px}._3AawQXnP2TXSxF-aCYYt-v svg{fill:#889eb3!important}div._5N85rrws3zOo1Hb2oS4rT{margin-bottom:0}._21AMq68W3QGP_BTIepV1SC{margin-bottom:8px}._2KbrOWj41cEFwTBMCdISEA{margin-bottom:6px}._31at5luKgOp6yI9y-r8pM7{padding:8px 0 6px}._16tAszS7sICoV1vqZ2qM4-{padding-top:6px}._3fVPOH-qalSMztibyXZguh{margin:0 -16px;padding-bottom:12px}._1HbibmmqzxxLYF4FIjIezi{align-items:center;display:flex;margin:12px 0 8px}._3a8BSap7vqZQXyX7XZ1RjI{margin-right:8px}.OjtRQPr-KVoEh1QOOopek{align-items:center;display:flex;padding:5px 0 6px 22px}.OjtRQPr-KVoEh1QOOopek ._9P-3n6pU1oSIeyO8tRpn2{margin-left:-8px}._3-T2u7_bd-upmtCG9chQFH>div:not(:first-child){margin-top:12px}.nvNfxlOyVxyyycKYsl-Hg{background-color:cc-color("white");padding:16px 20px}.pwK4sDskWH8tEVAeeC6FZ{background-color:initial}._2GiDvcaL3d4BztCh53CGMt ._2bLBoIsy_dSztj88ckEWRn{display:flex;flex-direction:column}._2GiDvcaL3d4BztCh53CGMt ._2bLBoIsy_dSztj88ckEWRn ._38HaK3Tg7roJM-cl5jdamO{padding:2px 0}._2GiDvcaL3d4BztCh53CGMt ._2bLBoIsy_dSztj88ckEWRn ._3QN4MHYFPnR6YfQbLw6MvF{padding-left:26px;padding-top:8px}._3WjM9IVXFqTYyrD8cU78-c{background-color:#fff;box-shadow:0 8px 24px #959da533;padding:12px;width:300px}._3WjM9IVXFqTYyrD8cU78-c ._2yWhwVVNWap3opI2OXSBuG{padding-bottom:8px}._3WjM9IVXFqTYyrD8cU78-c ._3T157XpzKxj7a6ctjNdaBb{display:flex;justify-content:flex-end;padding-top:15px}',""]),r.locals={capabilitiesLabel:"_1BbYDJZk6NSM0aybr0UFAZ",capabilityToolTip:"_46JBA1YgsyJsu0D3OlJR6",capabilityCheckboxLabel:"_3AawQXnP2TXSxF-aCYYt-v",oldUiTooltipIcon:"_2Lhs5XIeUFxMw4EyB25PoL",searchFilterLabel:"_5N85rrws3zOo1Hb2oS4rT",capabilitiesHelpText:"_21AMq68W3QGP_BTIepV1SC",searchFilterHelpText:"_2KbrOWj41cEFwTBMCdISEA",nameTextField:"_31at5luKgOp6yI9y-r8pM7",descriptionTextField:"_16tAszS7sICoV1vqZ2qM4-",fgpCapabilitiesExpansionPanels:"_3fVPOH-qalSMztibyXZguh",capabilitiesTitleRow:"_1HbibmmqzxxLYF4FIjIezi",fgpCapabilitiesTitle:"_3a8BSap7vqZQXyX7XZ1RjI",capabilityCheckbox:"OjtRQPr-KVoEh1QOOopek",tooltipIcon:"_9P-3n6pU1oSIeyO8tRpn2",monitorSection:"_3-T2u7_bd-upmtCG9chQFH",monitorSelectContainer:"nvNfxlOyVxyyycKYsl-Hg",nestedListRow:"pwK4sDskWH8tEVAeeC6FZ",indexAccessContainer:"_2GiDvcaL3d4BztCh53CGMt",radioButtonsContainer:"_2bLBoIsy_dSztj88ckEWRn",radioButtonContainer:"_38HaK3Tg7roJM-cl5jdamO",autocompleteContainer:"_3QN4MHYFPnR6YfQbLw6MvF",popperContainer:"_3WjM9IVXFqTYyrD8cU78-c",popperTitle:"_2yWhwVVNWap3opI2OXSBuG",popperButtonContainer:"_3T157XpzKxj7a6ctjNdaBb"},e.exports=r},51207:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2rHFqJDmbaRTPa5EsCAIqm{font-family:Roboto Mono,Courier New,monospace}._2rHFqJDmbaRTPa5EsCAIqm,._1xhVvYR9haIwKV5DcaZDeb{font-size:12px}._2rHFqJDmbaRTPa5EsCAIqm{color:#222d3b;line-height:24px}._3G0nowW_kbY1TPBj4JVzJh{color:#69859f}",""]),r.locals={"code-input":"_2rHFqJDmbaRTPa5EsCAIqm",codeInput:"_2rHFqJDmbaRTPa5EsCAIqm","description-text":"_1xhVvYR9haIwKV5DcaZDeb",descriptionText:"_1xhVvYR9haIwKV5DcaZDeb","disabled-text":"_3G0nowW_kbY1TPBj4JVzJh",disabledText:"_3G0nowW_kbY1TPBj4JVzJh"},e.exports=r},3193:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._34jAiXmXXlfD3QQPVsNsfz{margin-top:15px}._2Qc01eofzTj1H4r9tyO5Sd{border:1px solid #b6c3d0;height:253px;overflow-y:auto;z-index:0}._2Qc01eofzTj1H4r9tyO5Sd ._2CctrQCDH7KgACxQWT6IPv{height:50px}._2Qc01eofzTj1H4r9tyO5Sd ._2CctrQCDH7KgACxQWT6IPv ._3eNIa_Q3KAGUJagtv5zlGu{color:#889eb3}._2Qc01eofzTj1H4r9tyO5Sd ._2CctrQCDH7KgACxQWT6IPv .Vk1pkm5rY13tKeyPKwJYD{display:none}._2Qc01eofzTj1H4r9tyO5Sd ._2CctrQCDH7KgACxQWT6IPv:hover{background-color:#d0eafa}._2Qc01eofzTj1H4r9tyO5Sd ._2CctrQCDH7KgACxQWT6IPv:hover .Vk1pkm5rY13tKeyPKwJYD{display:block}._2Qc01eofzTj1H4r9tyO5Sd ._2oNztuMzbtYwMzxAJIQ0yq{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}._2Qc01eofzTj1H4r9tyO5Sd ._2oNztuMzbtYwMzxAJIQ0yq ._2Am_h1VXZIl2zhdrrUOyEm{display:block}._2Qc01eofzTj1H4r9tyO5Sd ._2oNztuMzbtYwMzxAJIQ0yq ._2ZK8nIwJrRb12beQIqkGu7{color:#889eb3;padding-top:12px}._2Qc01eofzTj1H4r9tyO5Sd ._2oNztuMzbtYwMzxAJIQ0yq ._1fGt8_ac_sCAr-iS3Os5Pw{color:#889eb3;padding:5px 40px 0}._2Qc01eofzTj1H4r9tyO5Sd ._2oNztuMzbtYwMzxAJIQ0yq ._25fBc3Tv4kKNmyQrXTQDdB{margin-top:20px}._1bZJFcUr5qTQDRV7pUAM0_{margin-top:15px}._11cnC8MXj5dDqKgOZMJHcU{margin-bottom:-1px;width:100%;z-index:1}",""]),r.locals={usersAutocomplete:"_34jAiXmXXlfD3QQPVsNsfz",selectedListWrapper:"_2Qc01eofzTj1H4r9tyO5Sd",userListItem:"_2CctrQCDH7KgACxQWT6IPv",subText:"_3eNIa_Q3KAGUJagtv5zlGu",removeIcon:"Vk1pkm5rY13tKeyPKwJYD",zeroState:"_2oNztuMzbtYwMzxAJIQ0yq",emptyIcon:"_2Am_h1VXZIl2zhdrrUOyEm",emptyText:"_2ZK8nIwJrRb12beQIqkGu7",emptySubText:"_1fGt8_ac_sCAr-iS3Os5Pw",resetButton:"_25fBc3Tv4kKNmyQrXTQDdB",listDisplayWrapper:"_1bZJFcUr5qTQDRV7pUAM0_",usersSearchBox:"_11cnC8MXj5dDqKgOZMJHcU"},e.exports=r},56235:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1Pe5Wdu_WthMlL--w2AAJH{margin:0;padding-bottom:12px}",""]),r.locals={viewUserButton:"_1Pe5Wdu_WthMlL--w2AAJH"},e.exports=r},30948:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3yvcZAe8xw0J1dxJLsvm-m{background-color:#fff;bottom:0;box-shadow:2px 2px 4px 4px #111b2717;left:0;padding:2px 0 6px 16px;position:absolute;width:100%}._3yvcZAe8xw0J1dxJLsvm-m ._2suLHcudW30-UkoPZfC4gU{vertical-align:middle}._3yvcZAe8xw0J1dxJLsvm-m ._3D1rQfcnrG3p6ZzVJb2aGz{color:#abbac9;padding-left:8px;vertical-align:middle}",""]),r.locals={footerWrapper:"_3yvcZAe8xw0J1dxJLsvm-m",lockIcon:"_2suLHcudW30-UkoPZfC4gU",privacyPolicy:"_3D1rQfcnrG3p6ZzVJb2aGz"},e.exports=r},3359:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3DMi4oeTiI-hkVDbmIYUzW{display:inline}",""]),r.locals={inline:"_3DMi4oeTiI-hkVDbmIYUzW"},e.exports=r},59013:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".upl35o0-o5tMigypy5MvR{display:flex}",""]),r.locals={resetTitle:"upl35o0-o5tMigypy5MvR"},e.exports=r},51032:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3rwloN9Hi2Fzo2z2i1iCa9{width:400px}._1rG1m_Lc7mULxY9YS_PSIw{margin-top:20px}._2QNPSO_OfmGwfK3hIw2JY_{margin-top:5px}._2bssXyOo9mV0I7wSb2LyXu{margin-top:47px}._1TaCXEKg1TioRijQM4Ex1P{display:flex}._3fo_nZ_qaLVyt0tKNV9Fwd{flex:1;overflow-y:auto}._2XaZSWYewq1urbhSzXyp5Q{display:inline}",""]),r.locals={fullWidth:"_3rwloN9Hi2Fzo2z2i1iCa9",transferTextTopMargin:"_1rG1m_Lc7mULxY9YS_PSIw",transferMessageTopMargin:"_2QNPSO_OfmGwfK3hIw2JY_",autocomplete:"_2bssXyOo9mV0I7wSb2LyXu",resetTitle:"_1TaCXEKg1TioRijQM4Ex1P",descriptionWrapper:"_3fo_nZ_qaLVyt0tKNV9Fwd",inline:"_2XaZSWYewq1urbhSzXyp5Q"},e.exports=r},48283:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1UzjxzsyjhZHZqh3MJ4zrv{font-weight:700}.Owo49tNKmcUY12RvfRstc:not(:last-child){margin-bottom:9px}._2oYCpHXF35G1yh0i4AOFO_{margin-left:24px}._2oYCpHXF35G1yh0i4AOFO_:not(:last-child){margin-bottom:24px}._10VE8yFP-pjI3WOiD3-Qsi{margin-bottom:16px}._10VE8yFP-pjI3WOiD3-Qsi a{color:#2063d6}",""]),r.locals={bold:"_1UzjxzsyjhZHZqh3MJ4zrv",radio:"Owo49tNKmcUY12RvfRstc",optionContent:"_2oYCpHXF35G1yh0i4AOFO_",inlineNotification:"_10VE8yFP-pjI3WOiD3-Qsi"},e.exports=r},35965:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._18wI-C4EqCg0voxumqHQZq{margin-bottom:40px;padding-right:16px}._3fC9GEqx3LLdd7X0K6xnKZ{background:#fff;display:flex;flex-direction:column;padding:2px 0 0;width:100%}.i4TSHTwVjhLvEqN4Ppg2q{padding:6px 0}div._1TyIUB6ViNV_FwdeAS-5MR{margin:14px 0}",""]),r.locals={modifyUserWrapper:"_18wI-C4EqCg0voxumqHQZq",modifyUserFormContainer:"_3fC9GEqx3LLdd7X0K6xnKZ",textFieldClass:"i4TSHTwVjhLvEqN4Ppg2q",rolesFieldClass:"_1TyIUB6ViNV_FwdeAS-5MR"},e.exports=r},84241:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".FBNsHB_-lwd0RjryAi8vF{display:inline}._3Gh-WfoGNgRQslOfkSDZdM{display:flex}",""]),r.locals={inline:"FBNsHB_-lwd0RjryAi8vF",resetTitle:"_3Gh-WfoGNgRQslOfkSDZdM"},e.exports=r},84259:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".MEuKcyXWxXVPslsrGagDa ._2sI_S1dns5dBqtxIfT8PWS{color:#222d3b;cursor:default;font-family:Roboto Mono,Courier New,monospace;font-size:12px}.MEuKcyXWxXVPslsrGagDa div.k_J-eGGo-ocNZiwInKIFF{padding-bottom:0}.MEuKcyXWxXVPslsrGagDa .oBfQc0V6HPpDBmQLKKUTQ,.MEuKcyXWxXVPslsrGagDa div._2y8RKE_cN7Bqyr91THVOWs{margin-bottom:0}.MEuKcyXWxXVPslsrGagDa div.NHQ-r--Q8ZnVyDYmzJ7A_{padding:8px 0}.MEuKcyXWxXVPslsrGagDa div.NHQ-r--Q8ZnVyDYmzJ7A_:last-child{padding-bottom:16px}.MEuKcyXWxXVPslsrGagDa div._3v1txllcZZ1MygvJ3ola6a{padding-bottom:4px}._3BnbdNIB9XaXi_Ty2QRfbi{padding-top:14px!important}",""]),r.locals={detailsView:"MEuKcyXWxXVPslsrGagDa",searchFilterValue:"_2sI_S1dns5dBqtxIfT8PWS",capabilityLabelWrapper:"k_J-eGGo-ocNZiwInKIFF",listWrapper:"oBfQc0V6HPpDBmQLKKUTQ",viewBoldLabel:"_2y8RKE_cN7Bqyr91THVOWs",capabilityGroup:"NHQ-r--Q8ZnVyDYmzJ7A_",usersLabelWrapper:"_3v1txllcZZ1MygvJ3ola6a",statusInfo:"_3BnbdNIB9XaXi_Ty2QRfbi"},e.exports=r},95679:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._1opcGSoU4w1riLUoFZUwSG{width:100%}",""]),r.locals={defaultNotification:"_1opcGSoU4w1riLUoFZUwSG"},e.exports=r},78823:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2uMoJedRzcJtLyrDvKF0uw{width:100%}",""]),r.locals={statusIcon:"_2uMoJedRzcJtLyrDvKF0uw"},e.exports=r},57943:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".Vx9A9d5ymZa-cmL_qtHSP{align-items:center;background-color:#e02020;border-radius:7px;color:#fff;display:flex;font-family:Lab Grotesque Regular,Arial,sans-serif;font-weight:700;height:14px;justify-content:center;min-width:14px;position:absolute;right:5px;text-align:center;top:2px}.Z1dK3RnuRc6DssCiHiu5x{font-size:9px}._21Ed3E6DhpkXvUyUGRP01X{font-size:8px;padding:0 1px}.YgovJR-ScI68s1zTIb7hi{font-size:8px;padding:0 2px}._1o-2U2jPtZF9urOnbaJxW1{border-radius:50%;font-size:0;height:6px;min-width:auto;overflow:hidden;padding:0;right:8px;top:8px;transition:transform .2s ease-out;width:6px}.parent-badge-hoverable:hover ._1o-2U2jPtZF9urOnbaJxW1{transform:scale(1.3);transition-timing-function:ease-in}",""]),r.locals={badge:"Vx9A9d5ymZa-cmL_qtHSP","badge--size-1":"Z1dK3RnuRc6DssCiHiu5x",badgeSize1:"Z1dK3RnuRc6DssCiHiu5x","badge--size-2":"_21Ed3E6DhpkXvUyUGRP01X",badgeSize2:"_21Ed3E6DhpkXvUyUGRP01X","badge--size-3":"YgovJR-ScI68s1zTIb7hi",badgeSize3:"YgovJR-ScI68s1zTIb7hi","badge--dot":"_1o-2U2jPtZF9urOnbaJxW1",badgeDot:"_1o-2U2jPtZF9urOnbaJxW1"},e.exports=r},11447:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,".bVMl6BHtW-48XZ5B9ygH{display:flex;height:100%}._261VkyJkvA_lbJ-sDHmWO0{align-items:center;background-color:#dde4e9;border-bottom:1px solid #b6c3d0;border-right:1px solid #b6c3d0;box-sizing:border-box;cursor:pointer!important;display:flex;flex:1 1 auto;font-size:14px;max-width:250px;min-width:110px;padding:0 12px;position:relative}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR{background-color:#f1f4f5;border-bottom-color:#0000;border-top:3px solid}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR ._1JC40wk9M0sTQ74nTRNy-v{color:#151e30}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR .BReXH4SatNWsNkOwy3Qnf{fill:#222d3b}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR ._18gwbCVg4VztXVhdZ4EgUc{background-image:linear-gradient(90deg,#f1f4f500,#f1f4f5 20px,#f1f4f5)}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR._35iJBa0o4FNClcnPcC4Fhr{border-top-color:#29a1e6}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR._3x45lqe9el6PSYUlzxLtK6{border-top-color:#ff9343}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR._1dpL2nPWNz71NLKnzithz4{border-top-color:#f54e25}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR._37nT17iDhHWOUOUlbVqBMP{border-top-color:#299589}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR.XdbVVcExBcEAYcUjtGmQu{border-top-color:#c05dc4}._261VkyJkvA_lbJ-sDHmWO0._15HrxGAVk048SNZJr9ulMR:hover{background-color:#f1f4f5}._261VkyJkvA_lbJ-sDHmWO0:hover{background-color:#eaeef1}._261VkyJkvA_lbJ-sDHmWO0:hover ._18gwbCVg4VztXVhdZ4EgUc{display:flex}._2UQciwLtory2BA45qbrE81{box-sizing:border-box;flex-grow:0;justify-content:center;min-width:unset;width:42px}._1JC40wk9M0sTQ74nTRNy-v{background-color:initial;box-sizing:border-box;color:#69859f;height:16px;line-height:16px;margin-left:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.xDUwXnpBiVcHonhmwwASG{position:relative;top:-5px}._18gwbCVg4VztXVhdZ4EgUc{align-items:center;background-image:linear-gradient(90deg,#eaeef100,#eaeef1 20px,#eaeef1);bottom:0;display:none;justify-content:space-between;padding-left:20px;position:absolute;right:10px;top:0;transition:background-color .35s cubic-bezier(.25,.8,.25,1)}._2CZxUMYJ4IGZ_tAFJslc9Q{background-color:#f1f4f5;border-bottom:1px solid #b6c3d0}._1e5sx4bNIEXxnUftAGqwvP{flex:0 0 auto;margin:0 3px}._1e5sx4bNIEXxnUftAGqwvP:hover{fill:#29a1e6}.BReXH4SatNWsNkOwy3Qnf{fill:#69859f;flex-shrink:0}.vRDT1_or2GLVB9lkWjyvQ{background-color:#f1f4f5;border-left:1px solid #b6c3d0;border-right:none;min-width:unset;padding:0 3px}._2eCYg7ZxZ8_IFoTFEyf_mQ{fill:#29a1e6}._28mFdCB3En3itdU5UpFMd0{display:flex;overflow:hidden;width:100%}._3MCT-m_vBmxThozk2QfqPk{display:flex;flex:0 0 auto}._3GIfcUMTerQ3QodF2NREyn{align-self:center;margin:0 6px;min-width:unset}._1m-o7Ya110SA-MNR9BNGB6{display:flex;flex:1 0 auto}._261VkyJkvA_lbJ-sDHmWO0._17M31zCkcrJ2DCRBTZ2kpC{border-left:1px solid #b6c3d0}._261VkyJkvA_lbJ-sDHmWO0._17M31zCkcrJ2DCRBTZ2kpC:not(._15HrxGAVk048SNZJr9ulMR){border-top:1px solid #b6c3d0}._261VkyJkvA_lbJ-sDHmWO0._17M31zCkcrJ2DCRBTZ2kpC._15HrxGAVk048SNZJr9ulMR{border-bottom:1px solid #b6c3d0}",""]),r.locals={container:"bVMl6BHtW-48XZ5B9ygH",tab:"_261VkyJkvA_lbJ-sDHmWO0",selected:"_15HrxGAVk048SNZJr9ulMR",tabText:"_1JC40wk9M0sTQ74nTRNy-v",tabIcon:"BReXH4SatNWsNkOwy3Qnf",tabActions:"_18gwbCVg4VztXVhdZ4EgUc",normal:"_35iJBa0o4FNClcnPcC4Fhr",metrics:"_3x45lqe9el6PSYUlzxLtK6",search:"_1dpL2nPWNz71NLKnzithz4",dashboard:"_37nT17iDhHWOUOUlbVqBMP",livetail:"XdbVVcExBcEAYcUjtGmQu",permanentTab:"_2UQciwLtory2BA45qbrE81",tabAsterisk:"xDUwXnpBiVcHonhmwwASG",overflowBackground:"_2CZxUMYJ4IGZ_tAFJslc9Q",tabActionIcon:"_1e5sx4bNIEXxnUftAGqwvP",sideMenu:"vRDT1_or2GLVB9lkWjyvQ",sideMenuIcon:"_2eCYg7ZxZ8_IFoTFEyf_mQ",userTabs:"_28mFdCB3En3itdU5UpFMd0",fixedTabs:"_3MCT-m_vBmxThozk2QfqPk",addTabButton:"_3GIfcUMTerQ3QodF2NREyn",addTabButtonContainer:"_1m-o7Ya110SA-MNR9BNGB6",dragging:"_17M31zCkcrJ2DCRBTZ2kpC"},e.exports=r},23845:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._3Uy2yCrL6q6ICZ40Mwrd4F{align-items:center;background-color:#fff;display:flex;height:100%;justify-content:center;position:absolute;transition:opacity .5s ease-in-out;width:100%;z-index:1202}",""]),r.locals={curtain:"_3Uy2yCrL6q6ICZ40Mwrd4F"},e.exports=r},36902:function(e,t,i){var r=i(87758)((function(e){return e[1]}));r.push([e.id,"._2oTg8gh0sckg4WLFJZNdhu{background-color:#233654;height:100vh;transition:width .15s;width:248px}._2GDIWZgFn1tRQ4RnzmLGwt{width:98px}._2Xm6Gh2yqsx8LEKItmApu0{background-color:#1d2b45;height:48px;left:auto;position:fixed;right:0;top:0;width:100%}.Hv8TOg2bdLqKJSwEBW1IQ{left:0;position:absolute;top:0}._2nwBgcSQ8cgWHRdCur-qZf{animation:_2D1v_Ua4fbFkzuwNaqy1Ik .5s ease-in-out forwards}@keyframes _2D1v_Ua4fbFkzuwNaqy1Ik{0%{opacity:1;visibility:visible}to{opacity:0;visibility:hidden}}",""]),r.locals={"nav-placeholder-sidebar":"_2oTg8gh0sckg4WLFJZNdhu",navPlaceholderSidebar:"_2oTg8gh0sckg4WLFJZNdhu","nav-placeholder-sidebar-collapsed":"_2GDIWZgFn1tRQ4RnzmLGwt",navPlaceholderSidebarCollapsed:"_2GDIWZgFn1tRQ4RnzmLGwt","nav-placeholder-toolbar":"_2Xm6Gh2yqsx8LEKItmApu0",navPlaceholderToolbar:"_2Xm6Gh2yqsx8LEKItmApu0","nav-container":"Hv8TOg2bdLqKJSwEBW1IQ",navContainer:"Hv8TOg2bdLqKJSwEBW1IQ","curtain-fadeout":"_2nwBgcSQ8cgWHRdCur-qZf",curtainFadeout:"_2nwBgcSQ8cgWHRdCur-qZf",fadeout:"_2D1v_Ua4fbFkzuwNaqy1Ik"},e.exports=r},53613:function(e,t,i){e.exports=i(78832)(28775)},10526:function(e,t,i){e.exports=i(78832)(47250)},78832:function(e){"use strict";e.exports=vendor_lib},22443:function(e,t,i){"use strict";i.r(t),i.d(t,{$editRule:function(){return UU},$enableField:function(){return KU},$fetchCollectors:function(){return zU},$fetchField:function(){return jU},$fetchFields:function(){return WU},$fetchMetaValues:function(){return BU},$fetchPartitions:function(){return QU},$fetchQuota:function(){return qU},$fetchRule:function(){return FU},$fetchRules:function(){return PU},$fetchSources:function(){return GU},$parseExpression:function(){return VU},ACTIONS_NAMES:function(){return EU},AGGREGATE_SEARCHES_DEFAULT_TIME_RANGE:function(){return Gu},ALL:function(){return bp},ALL_OVERRIDABLE_PROPERTIES:function(){return Wx},ALL_SUPPORTED_QUERY_TYPES:function(){return ep},ALWAYS_CATEGORICAL_VISUAL_TYPES:function(){return _l},ASYNC_EMPTY:function(){return le.ASYNC_EMPTY},ASYNC_IN_PROGRESS:function(){return le.ASYNC_IN_PROGRESS},AbsAsMathFnContext:function(){return Fa},AccumAsAccumContext:function(){return aa},AccumContext:function(){return na},AccumulateAsQueryClauseContext:function(){return ao},AdditiveEvalExpAsEvalExpContext:function(){return Ss},AdditiveEvalExpContext:function(){return hs},AdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExpContext:function(){return ms},AdditiveExpAsExpContext:function(){return ss},AdditiveExpContext:function(){return Ja},AdditiveExpOpMultiplicativeExpAsAdditiveExpContext:function(){return es},AdditiveOpContext:function(){return Ha},AdditiveReducerExpAsReducerExpContext:function(){return ks},AdditiveReducerExpContext:function(){return ws},AdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExpContext:function(){return Is},AdvancedMetricsQueryEditor:function(){return P_},AdvancedMetricsQueryRowVisitor:function(){return Sv},AggregateAsQueryClauseContext:function(){return to},AggregateContext:function(){return zn},AggregateSearchesDataStatusStates:function(){return Hu},AggregateSearchesQueryType:function(){return $u},AggregateSeriesType:function(){return Wu},AggregateSeriesValueType:function(){return qu},AggregationType:function(){return uF},Aggregator:function(){return le.Aggregator},AggregatorFnContext:function(){return Vn},AlphaAsEmwaParameterContext:function(){return Un},AndExpAsReducerBoolTermContext:function(){return Us},AndExpAsSelectorBoolTermContext:function(){return Ir},AtomicEvalExpAsMultiplicativeEvalExpContext:function(){return fs},AtomicEvalExpContext:function(){return os},AtomicExpAsMultiplicativeExpContext:function(){return ns},AtomicExpAsSelectorBoolFactorContext:function(){return Nr},AtomicExpContext:function(){return Ga},AtomicReducerExpAsMultiplicativeReducerExpContext:function(){return Ns},AtomicReducerExpContext:function(){return bs},AutoCompleteField:function(){return $I},AvgAsAggregatorFnContext:function(){return Bn},AvgAsReducerFnContext:function(){return ba},AvgAsRollupFnContext:function(){return Kn},AxesEditorV2:function(){return eD},AxisYTypeMap:function(){return Ko},BRAND_DARK_GRID_COLOR_OVERRIDE:function(){return Ql},BRAND_DARK_SPARKLINE_COLOR_OVERRIDE:function(){return Gl},BRAND_LIGHT_GRID_COLOR_OVERRIDE:function(){return jl},BRAND_LIGHT_SPARKLINE_COLOR_OVERRIDE:function(){return Kl},BooleanOperation:function(){return le.BooleanOperation},BooleanOperationSettings:function(){return qo},BooleanValueAsReducerBoolFactorContext:function(){return Ws},BooleanValueAsSingleDimensionValueExprContext:function(){return Gr},BooleanValueContext:function(){return qs},BulkRemoveActions:function(){return AU},CARTESIAN_VISUAL_TYPES:function(){return bl},CATALOG_TIME_AWARENESS_GRANULARITY_LOWER_BOUND:function(){return Yu},CATEGORICAL_VISUAL_TYPES:function(){return Sl},CLASSNAMES_MAP:function(){return Lk},COMPONENTS:function(){return uU},CONTINUOUS_TIER:function(){return vp},CUSTOM_ACTIONS:function(){return TU},CeilAsMathFnContext:function(){return ka},ChangeRetentionDialogComponent:function(){return VL},ChartDisplayTypeOptions:function(){return le.ChartDisplayTypeOptions},ChartVisualization:function(){return Sk},ChartVisualizationCreators:function(){return nA},CheckboxesListComponent:function(){return SI},ColorPickerField:function(){return VI},ColorSchemePickerField:function(){return BI},ColorThresholdCalculationMode:function(){return tl},Columns:function(){return ki},ComparatorContext:function(){return js},ComparatorExpAsReducerBoolFactorContext:function(){return Hs},CosAsMathFnContext:function(){return Oa},CountAsAggregatorFnContext:function(){return $n},CountAsReducerFnContext:function(){return Ea},CountAsRollupFnContext:function(){return Yn},DASHBOARD_COLOR_SCHEMES:function(){return Wl},DAY_TO_MS:function(){return Bu},DEFAULT_LATITUDE_FIELD:function(){return UT},DEFAULT_LONGITUDE_FIELD:function(){return VT},DEFAULT_MARKER_SIZE_FOR_DISCONNECTED_POINTS:function(){return xu},DEFAULT_MARKER_TYPE_FOR_DISCONNECTED_POINTS:function(){return Tu},DEFAULT_MAX_NUMBER_OF_TIME_SERIES:function(){return ec},DEFAULT_OUTLIER_SETTINGS:function(){return Uc},DEFAULT_RELATIVE_OPTIONS:function(){return RD},DEFAULT_TIME_RANGE:function(){return zu},DEFAULT_TIME_SERIES_BAR_MAX_WIDTH:function(){return Zl},DashboardColorSchemesTypes:function(){return Xo},DataForwarding:function(){return HL},DatapointsCountDimension:function(){return QN},DecreasingAsDecreasingRateModifierContext:function(){return ha},DeltaAsDeltaContext:function(){return ga},DeltaAsQueryClauseContext:function(){return lo},DeltaContext:function(){return ma},DimensionKeyContext:function(){return Br},DimensionKeyListContext:function(){return $r},DimensionSelectorAsSelectorContext:function(){return Lr},DimensionSelectorContext:function(){return Kr},DimensionValueExprContext:function(){return Hr},DirectionAsOutlierParameterContext:function(){return Ln},DisplaySettingsEditor:function(){return IN},DisplaySettingsEditorV2:function(){return wR},DisplaySettingsOnChangeFn:function(){return $A},DivAsGraphiteMetricIdentifierContext:function(){return xo},DivAsMultiplicativeOpContext:function(){return za},DrilldownTypes:function(){return lF},EDITOR_DEBOUNCE:function(){return op},EDITOR_DRAWER_MIN_WIDTH:function(){return rp},ENDPOINT:function(){return gU},ENDPOINT_DYNAMIC:function(){return mU},ENDPOINT_INGEST:function(){return pU},ENTITY_ID_FIELD:function(){return SU},ENTITY_NAME:function(){return _U},EditorMock:function(){return KF},EmptyVisualization:function(){return ON},EnableActions:function(){return CU},EvalAsQueryClauseContext:function(){return co},EvalContext:function(){return ya},EvalExpContext:function(){return _s},EwmaAsQueryClauseContext:function(){return fo},EwmaContext:function(){return Dn},EwmaParameterContext:function(){return Pn},ExpAsMathFnContext:function(){return Va},ExpContext:function(){return as},FEEDBACK_BUTTON_STATE:function(){return wU},FERScopeType:function(){return cU},FER_PARAMS:function(){return fU},FILLMISSING_EMPTY_REGEXP:function(){return Fh},FLEX_TIER:function(){return Sp},FREQUENT_TIER:function(){return fp},FetchStatus:function(){return le.FetchStatus},FieldType:function(){return ZU},FieldsExtractionRuleType:function(){return lU},FieldsExtractionRulesServicesModuleAll:function(){return HU},FieldsServicesModuleAll:function(){return YU},FillMissingPolicyKey:function(){return le.FillMissingPolicyKey},FillmissingAsFillmissingContext:function(){return Rn},FillmissingAsQueryClauseContext:function(){return go},FillmissingContext:function(){return In},FillmissingParameterContext:function(){return On},FilterAsQueryClauseContext:function(){return po},FilterContext:function(){return fa},FloorAsMathFnContext:function(){return La},FontSize:function(){return vI},FormColumn:function(){return BO},GraphiteMetricIdentAsGraphiteMetricIdentifierContext:function(){return Do},GraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifierContext:function(){return No},GraphiteMetricIdentifierAsMetricIdentifierContext:function(){return Ur},GraphiteMetricIdentifierContext:function(){return So},GraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifierContext:function(){return ko},GraphiteMetricWildcardIdentifierAsMetricNameSelectorContext:function(){return Xr},GraphiteMetricWildcardIdentifierAsSingleDimensionValueExprContext:function(){return zr},GraphiteMetricWildcardIdentifierContext:function(){return Oo},HEATMAP_COOL_COLORS:function(){return Bl},HONEYCOMB_SHAPES:function(){return Jo},HOUR_TO_MS:function(){return Vu},HOUR_TO_NANOSECOND:function(){return Pu},HeaderContext:function(){return Ys},HistogramQuantileClauseContext:function(){return ho},HistogramQuantileContext:function(){return An},HistogramSettingsEditor:function(){return kN},HoneyCombClusterCountDimension:function(){return qN},HoneyCombDisplaySettingsEditor:function(){return VN},HoneyCombItemCountDimension:function(){return jN},HoneyCombVisualizationComponent:function(){return LM},HoneyCombVisualizationWithStyle:function(){return kM},IAMRoleGenerationInfo:function(){return pP},IDrillDownAutoParsingModes:function(){return dF},INFREQUENT_TIER:function(){return _p},INGEST_TIME_PARAMS:function(){return yU},INHERIT_DASHBOARD_OPTION:function(){return DD},INITIAL_DRILLDOWN_STATE:function(){return og},IncreasingAsIncreasingRateModifierContext:function(){return pa},JoinAsHeaderContext:function(){return Zs},JoinContext:function(){return Qs},JoinOutputAlongContext:function(){return zs},JoinOutputAsContext:function(){return Gs},Just:function(){return ME},K8SOpenTelemetryName:function(){return oU},Key:function(){return Vt},KeyboardShortcutTooltipTitle:function(){return kt},KeywordAsGraphiteMetricIdentifierContext:function(){return bo},KeywordContext:function(){return Po},LEGACY_GRID_COLOR_OVERRIDE:function(){return ql},LEGACY_SPARKLINE_COLOR_OVERRIDE:function(){return zl},LOGS_SETTINGS_DEFAULTS:function(){return mp},LatestAsReducerFnContext:function(){return wa},Legend:function(){return IO},LegendEditor:function(){return cD},LegendItem:function(){return NO},LineDashStyleOptions:function(){return le.LineDashStyleOptions},LogAsMathFnContext:function(){return Ma},LogOutlierMetadataSeriesNames:function(){return Rl},LogQueryEditor:function(){return V_},LogsSettingsParseModes:function(){return ju},LogsSettingsTimeSources:function(){return Qu},MAP_CLUSTER_COUNT_LAYER:function(){return Ll},MAP_CLUSTER_LAYER:function(){return Ml},MAP_CLUSTER_ZOOM_TRANSITION_DURATION:function(){return Pl},MAP_COLORS:function(){return Dl},MAP_HEATMAP_COLORS:function(){return Ol},MAP_LAYERS:function(){return el},MAP_SINGLE_CLUSTER_LAYER:function(){return kl},MAP_SINGLE_CLUSTER_ZOOM:function(){return Ul},MAP_SINGLE_CLUSTER_ZOOM_TRANSITION_DURATION:function(){return Fl},MAP_STEP_QUANTILE_COUNT:function(){return Vl},MAX_NUMBER_OF_TIME_SERIES_FOR_COLUMN_AND_BAR_CHART:function(){return Xl},MAX_NUMBER_OF_TIME_SERIES_FOR_MAP:function(){return Jl},MAX_THRESHOLDS_LIMIT:function(){return Yl},METADATA_OPTIONS:function(){return dU},MICROSECOND_TO_NANOSECOND:function(){return Nu},MILLISECOND_TO_NANOSECOND:function(){return Mu},MINUTE_TO_MS:function(){return Uu},MINUTE_TO_NANOSECOND:function(){return Lu},MIN_MARKER_SIZE_FOR_DISCONNECTED_POINTS:function(){return Cu},MapDisplaySettingsEditor:function(){return yN},MapViewerType:function(){return KP},MapVisualization:function(){return AL},MarkerTypeOptions:function(){return le.MarkerTypeOptions},MathFnAsAtomicEvalExpContext:function(){return us},MathFnAsAtomicExpContext:function(){return Za},MathFnAsAtomicReducerExpContext:function(){return xs},MathFnContext:function(){return Ra},MaxAsAggregatorFnContext:function(){return qn},MaxAsMathFnContext:function(){return Ba},MaxAsReducerFnContext:function(){return Ca},MaxAsRollupFnContext:function(){return Jn},Maybe:function(){return NE},MetadataList:function(){return ML},MetricIdentifierAsMetricNameSelectorContext:function(){return Zr},MetricIdentifierAsSingleDimensionValueExprContext:function(){return Qr},MetricIdentifierContext:function(){return Fr},MetricNameSelectorAsSelectorContext:function(){return Pr},MetricNameSelectorContext:function(){return Yr},MetricsFilterSelectorComponent:function(){return Af},MetricsOperatorComponent:function(){return Cy},MetricsPreviewTableV2:function(){return kh},MetricsQueryRowLexer:function(){return br},MetricsQueryRowParser:function(){return Tr},MetricsSingleValueViewerType:function(){return YP},MinAsAggregatorFnContext:function(){return Wn},MinAsMathFnContext:function(){return $a},MinAsReducerFnContext:function(){return xa},MinAsRollupFnContext:function(){return Xn},MinusAsAdditiveOpContext:function(){return qa},MinusAsGraphiteMetricIdentifierContext:function(){return Eo},MinusDecimalAsNegativeNumberContext:function(){return un},MinusIntegerAsNegativeIntegerContext:function(){return nn},MinusTimeDurationAsNegativeTimeDurationContext:function(){return Sn},MultAsGraphiteMetricWildcardIdentifierContext:function(){return Mo},MultAsMultiplicativeOpContext:function(){return Qa},MultipleDimensionValueExprsAsDimensionValueExprContext:function(){return qr},MultiplicativeEvalExpAsAdditiveEvalExpContext:function(){return gs},MultiplicativeEvalExpContext:function(){return ys},MultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExpContext:function(){return vs},MultiplicativeExpAsAdditiveExpContext:function(){return ts},MultiplicativeExpContext:function(){return is},MultiplicativeExpOpAtomicExpAsMultiplicativeExpContext:function(){return rs},MultiplicativeOpContext:function(){return ja},MultiplicativeReducerExpAsAdditiveReducerExpContext:function(){return Rs},MultiplicativeReducerExpContext:function(){return Ds},MultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExpContext:function(){return Os},NANOSECOND:function(){return Ou},NegativeIntegerAndTimeunitAsNegativeTimeDurationContext:function(){return bn},NegativeIntegerAsNegativeNumberContext:function(){return dn},NegativeIntegerContext:function(){return rn},NegativeNumberAsNumberContext:function(){return mn},NegativeNumberContext:function(){return cn},NegativeTimeDurationAsSignedTimeDurationContext:function(){return xn},NegativeTimeDurationContext:function(){return _n},NewMetricsPreviewTable:function(){return or},NotExpAsReducerBoolFactorContext:function(){return Bs},NotExpAsSelectorBoolFactorContext:function(){return Dr},Nothing:function(){return kE},NullValueOptions:function(){return al},NumberAsAtomicEvalExpContext:function(){return ls},NumberAsAtomicExpContext:function(){return Ka},NumberAsAtomicReducerExpContext:function(){return Es},NumberContext:function(){return pn},OTHERS:function(){return wl},OVERRIDABLE_PROPERTIES_BY_TYPE:function(){return qx},Operator:function(){return le.Operator},OperatorComponent:function(){return Sy},OperatorDirection:function(){return le.OperatorDirection},OperatorTooltip:function(){return Py},OperatorsConfig:function(){return jo},OrExpAsReducerBoolExpContext:function(){return Ps},OrExpAsSelectorBoolExpContext:function(){return Ar},OutlierAsQueryClauseContext:function(){return mo},OutlierContext:function(){return wn},OutlierParameterContext:function(){return Nn},PAGINATION_PAGE_SIZE:function(){return nr},PIPE_REGEXP:function(){return Bh},PanelParentType:function(){return cF},PanelQueriesDimension:function(){return WN},PanelRendererType:function(){return gl},PanelTypes:function(){return ml},ParenExpAsReducerBoolFactorContext:function(){return $s},ParenExpAsSelectorBoolFactorContext:function(){return Or},ParenthesizedEvalExpAsAtomicEvalExpContext:function(){return ps},ParenthesizedExpAsAtomicExpContext:function(){return Xa},ParenthesizedReducerExpAsAtomicReducerExpContext:function(){return As},ParseAsQueryClauseContext:function(){return so},ParseContext:function(){return sa},ParseKeyContext:function(){return oa},ParseRawContext:function(){return la},PctAsAggregatorFnContext:function(){return Qn},PctAsReducerFnContext:function(){return Ia},PlusAsAdditiveOpContext:function(){return Wa},PlusAsGraphiteMetricIdentifierContext:function(){return To},PlusDecimalAsPositiveNumberContext:function(){return on},PlusIntegerAsPositiveIntegerContext:function(){return en},PlusTimeDurationAsPositiveTimeDurationContext:function(){return vn},PositiveIntegerAndTimeunitAsPositiveTimeDurationContext:function(){return fn},PositiveIntegerAsPositiveNumberContext:function(){return sn},PositiveIntegerContext:function(){return Jr},PositiveNumberAsNumberContext:function(){return hn},PositiveNumberContext:function(){return an},PositiveTimeDurationAsSignedTimeDurationContext:function(){return Tn},PositiveTimeDurationContext:function(){return gn},PyramidOrientation:function(){return nl},PyramidValueRepresents:function(){return rl},QUANTIZE_REGEXP:function(){return Uh},QUERY_EDITOR_DEBOUNCE:function(){return ip},QuantizeAsQueryClauseContext:function(){return ro},QuantizeContext:function(){return ta},QueryBuilderCachedNetworkService:function(){return Tg},QueryBuilderNetworkService:function(){return vg},QueryClauseContext:function(){return eo},QueryEditorComponent:function(){return _b},QueryEditorKeyboardBindingsTooltip:function(){return ti},QueryEditorRow:function(){return CS},QueryEditorWithPreviewTable:function(){return uE},QueryInput:function(){return H_},QueryModes:function(){return le.QueryModes},QueryRowContext:function(){return _o},QueryRowLimits:function(){return Ju},QueryTypes:function(){return le.QueryTypes},ROW_VARIABLE_REGEXP:function(){return $h},RateAsQueryClauseContext:function(){return oo},RateAsRateContext:function(){return da},RateAsRollupFnContext:function(){return ea},RateContext:function(){return ca},RateModifierContext:function(){return ua},RatePolicy:function(){return le.RatePolicy},RecommendedDashboards:function(){return gD},ReducerBoolExpContext:function(){return Ls},ReducerBoolFactorContext:function(){return Vs},ReducerBoolTermContext:function(){return Fs},ReducerExpContext:function(){return Ms},ReducerFnAsAtomicEvalExpContext:function(){return ds},ReducerFnAsAtomicReducerExpContext:function(){return Cs},ReducerFnContext:function(){return Sa},RefreshIntervalPicker:function(){return xO},RelatedLogs:function(){return SD},RenderingE2EPerformanceMeasurementService:function(){return hP},ReservedKeywordContext:function(){return Lo},RetentionPeriodCell:function(){return qL},RetentionPeriodExceededMessage:function(){return ED},RollupAsQueryClauseContext:function(){return io},RollupContext:function(){return ra},RollupFnContext:function(){return Gn},RoundAsMathFnContext:function(){return Pa},RowVarAsAtomicExpContext:function(){return Ya},RowVarAsHeaderContext:function(){return Xs},RowVarContext:function(){return Ks},RowsPerPage:function(){return mI},SEARCHES_ERROR_CODES:function(){return sp},SEARCHES_INITIAL_POLLING_DELAY:function(){return Zu},SEARCHES_POLLING_INTERVAL:function(){return Xu},SEARCH_TIME_PARAMS:function(){return vU},SECOND_MS:function(){return Fu},SECOND_TO_NANOSECOND:function(){return ku},SECURITY_SYSTEM_FER_SCOPE_PREFIX:function(){return RU},SECURITY_TIER:function(){return yp},SELECTOR_DEBOUNCE_TIME:function(){return Ku},SERIES_OVERRIDE_PREVIEW_ITEMS_LIMIT:function(){return lp},SERIES_TYPE:function(){return Go},SIDEBAR_MODES:function(){return xU},SIDE_PANEL_INITIAL_WIDTH:function(){return le.SIDE_PANEL_INITIAL_WIDTH},SIDE_PANEL_MIN_WIDTH:function(){return le.SIDE_PANEL_MIN_WIDTH},SLICE_NAME:function(){return bU},SORT_ASC_DIR:function(){return ac},SORT_DESC_DIR:function(){return sc},SORT_LABEL_FIELD:function(){return nc},SORT_MODE_FULL:function(){return ic},SORT_MODE_LABEL_ONLY:function(){return tc},SORT_VALUE_FIELD:function(){return rc},STUB_AGGREGATE_INFO:function(){return Il},SYSTEM_FER:function(){return IU},SYSTEM_USER:function(){return DU},ScannedBytesDisplay:function(){return zf},SearchQueryTypes:function(){return le.SearchQueryTypes},SearchesDataStatusStates:function(){return hl},SelectAsHeaderContext:function(){return Js},SelectContext:function(){return xr},SelectField:function(){return LI},SelectorAtomicExpContext:function(){return Mr},SelectorBoolExpContext:function(){return Cr},SelectorBoolFactorContext:function(){return Rr},SelectorBoolTermContext:function(){return wr},SelectorContext:function(){return kr},SeriesOverridesEditor:function(){return xC},SeriesOverridesEditorSettingsTypes:function(){return jx},SeriesVisualSettingsTypes:function(){return zo},SharedAnalyticsAlertService:function(){return zP},SidePanelComponent:function(){return IC},SidePanelDefaultTabContext:function(){return CC},SignedTimeDurationContext:function(){return En},SinAsMathFnContext:function(){return Da},SingleDimensionValueExprAsDimensionValueExprContext:function(){return Wr},SingleDimensionValueExprContext:function(){return jr},SingleSeriesSparkLineComponent:function(){return NL},SingleValueTypes:function(){return Cl},SingleValueViewerType:function(){return GP},SingleValueVisualization:function(){return tk},SingleValueVisualizationWrapper:function(){return ik},SpanAsEmwaParameterContext:function(){return Fn},SpansAggregator:function(){return j_},SpansCountType:function(){return q_},SpansVisualizationType:function(){return W_},SqrtAsMathFnContext:function(){return Ua},StatusIcon:function(){return wL},StdDevAsAggregatorFnContext:function(){return jn},StddevAsReducerFnContext:function(){return Aa},StringLiteralAsMetricIdentifierContext:function(){return Vr},SumAsAggregatorFnContext:function(){return Hn},SumAsReducerFnContext:function(){return Ta},SumAsRollupFnContext:function(){return Zn},SumoTable:function(){return kk},TABS:function(){return OD},TABS_TYPE:function(){return ND},TIER_LIST:function(){return Ep},TIER_SPECIFIC_FEATURES:function(){return Tp},TILES_ADD_VISUALIZATION:function(){return $l},TILES_SWITCH_VISUALIZATION:function(){return Hl},TIMESLICE:function(){return bT},TIMESLICE_REGEXP:function(){return Vh},TIME_PRECISION:function(){return xD},TIME_UNIT_MAP:function(){return PD},TOP_SUGGESTIONS_VERSIONS:function(){return cm},TRE_ID:function(){return MD},TRE_INPUT_PLACEHOLDER:function(){return FD},TRE_RECENT_MAXIMUM_NUMBER:function(){return LD},TRE_SAVED_ID:function(){return kD},TableVisualization:function(){return Bk},TabsWithDrawer:function(){return Cb},TanAsMathFnContext:function(){return Na},TextFieldNumber:function(){return FI},TextFieldString:function(){return UI},TextFieldWithValidation:function(){return uI},ThemedMetricsPreviewTableV2:function(){return Mh},Themes:function(){return il},ThresholdAsOutlierParameterContext:function(){return kn},ThresholdComparator:function(){return Zo},ThresholdsEditor:function(){return eP},TimeRangeEditor:function(){return fO},TimeShiftAsQueryClauseContext:function(){return no},TimeShiftContext:function(){return Cn},TimeUtilModuleAll:function(){return ID},TimerangeDurationDimension:function(){return $N},TimeseriesCountDimension:function(){return HN},TimesliceAsQueryClauseContext:function(){return vo},TimesliceContext:function(){return ia},TimeunitAsGraphiteMetricIdentifierContext:function(){return wo},ToUrlContextMenu:function(){return wk},ToggleField:function(){return PI},TopBottomAsQueryClauseContext:function(){return uo},TopBottomContext:function(){return va},Tre:function(){return gO},TreWithAutoRefresh:function(){return CO},UI_METRICS_HINTS_DISABLED_KEY:function(){return gp},URLRenderer:function(){return Pk},USER_SETTINGS_KEY:function(){return Zm},UnderscoreValueAsAtomicEvalExpContext:function(){return cs},UnderscoreValueAsAtomicReducerExpContext:function(){return Ts},UnderscoreValueAsGraphiteMetricIdentifierContext:function(){return Ro},UnsignedDecimalAsGraphiteMetricIdentifierContext:function(){return Ao},UnsignedDecimalAsPositiveNumberContext:function(){return ln},UnsignedIntegerAsGraphiteMetricIdentifierContext:function(){return Co},UnsignedIntegerAsPositiveIntegerContext:function(){return tn},UnsignedTimeDurationAsGraphiteMetricIdentifierContext:function(){return Io},UnsignedTimeDurationAsPositiveTimeDurationContext:function(){return yn},UserSettingsStorage:function(){return vm},VALID_CHARACTERS:function(){return OU},VISUALIZATION_COMPONENTS_CONFIG:function(){return ap},VISUALIZATION_CONFIG:function(){return yl},VISUAL_TYPES_MUTATING_DATA_POINTS:function(){return Tl},VISUAL_TYPES_WITH_DATA_POINTS_LIMIT:function(){return xl},VisualSettingsModeType:function(){return Yo},VisualSettingsType:function(){return le.VisualSettingsType},VisualTypes:function(){return Al},VisualizationComponentType:function(){return np},VisualizationSelectedType:function(){return le.VisualizationSelectedType},VisualizationTypeSelector:function(){return LC},WhereAsQueryClauseContext:function(){return yo},WhereContext:function(){return _a},WindowAsOutlierParameterContext:function(){return Mn},XY_VISUAL_TYPES:function(){return El},_DisplaySettingsEditor:function(){return wN},_MetricsPreviewTableV2:function(){return Nh},_NewMetricsPreviewTable:function(){return sr},_QueryEditorRow:function(){return xS},_SingleValueVisualization:function(){return ek},addMetricsQuantizationFromTimeSeries:function(){return XS},addMetricsQuantizationFromUserInput:function(){return ZS},addQuantizationInfoToMetricsQuery:function(){return JS},addQuantizationToQueryString:function(){return HS},alignDataPointsForMissingLabels:function(){return _x},allProperties:function(){return pE},appendVariables:function(){return Dp},applicationContext:function(){return PC},areAllReferencedQueriesWithFillmissingEmptyOperator:function(){return US},areNonEmptyMetricsQueryPresent:function(){return Xh},areQueriesEqual:function(){return rm},asAsyncFailure:function(){return le.asAsyncFailure},asAsyncInProgress:function(){return le.asAsyncInProgress},asAsyncSuccess:function(){return le.asAsyncSuccess},brandDarkLineSettings:function(){return Wd},brandDarkRangeSplineSettings:function(){return Qd},brandDarkStyles:function(){return Sd},brandLightLineSettings:function(){return Hd},brandLightRangeSplineSettings:function(){return jd},brandLightStyles:function(){return _d},buildQueryBuilderPreviewResults:function(){return nm},calculateDataPointY:function(){return CT},calculateQuantizationPeriodByTimeRange:function(){return QS},calculateQueryLimitByVisualizationSettings:function(){return zb},calculateZeroSeriesAxisAdjustments:function(){return tA},cancelPendingAggregateSearches:function(){return xP},cancelPendingSearches:function(){return DP},checkFeatureForQuery:function(){return cV},clearPanelEditorFormStateLocalStorage:function(){return Lw},computeConsistentVisualSettings:function(){return FT},computeGroupByChartVisibility:function(){return nF},computeLegendState:function(){return lD},computeSeriesVisibility:function(){return iF},computeSingleCategoryChartVisibility:function(){return rF},computeVisualSettingsSeriesForSerieFocus:function(){return bx},computeVisualSettingsTypeFromVisualizationComponentType:function(){return fx},computeVisualizationComponentType:function(){return vx},conditionallyMergeObject:function(){return FO},convertAggregateInfo:function(){return mF},convertBeginBoundedTimeRangeToTimeDetails:function(){return Re.convertBeginBoundedTimeRangeToTimeDetails},convertCompleteLiteralTimeRangeToTimeDetails:function(){return Re.convertCompleteLiteralTimeRangeToTimeDetails},convertFormattedTimeToMetricsQuantizationPeriod:function(){return jS},convertResolvableTimeRangeToTimeDetails:function(){return Re.convertResolvableTimeRangeToTimeDetails},convertSearchesDataWithStatus:function(){return pF},convertSeriesVisualizationData:function(){return hF},convertTimeDetailsToBeginBoundedTimeRange:function(){return Re.convertTimeDetailsToBeginBoundedTimeRange},convertToBasicMode:function(){return Pf},convertToPanelRendererType:function(){return yx},countMissingParens:function(){return zv},createAggregateSearchesSessionIds:function(){return bP},createEmptyAdvancedMetricsQuery:function(){return Bp},createEmptyAdvancedSpansQuery:function(){return Q_},createEmptyBasicTracesQuery:function(){return Hp},createEmptyLogsQuery:function(){return $p},createEmptyMetricsQuery:function(){return Up},createEmptyMetricsQueryData:function(){return Vp},createFillMissingOperatorData:function(){return Mg},createFilterOperatorData:function(){return Vg},createHistogramQuantileOperatorData:function(){return Kg},createOutlierOperatorData:function(){return Jg},createRateOperatorData:function(){return sy},createSearchesSessionId:function(){return AP},createSectionId:function(){return Re.createSectionId},createTreOnElement:function(){return dV},createUsingOperatorData:function(){return gy},createVisualSettingsChangeHandler:function(){return Mw},dataForwardingI18n:function(){return BL},decodeSearchQueries:function(){return Re.decodeSearchQueries},decodeSearchQuery:function(){return Re.decodeSearchQuery},defaultAxesSettings:function(){return Nc},defaultAxisXSettings:function(){return Rc},defaultAxisY2Settings:function(){return Oc},defaultAxisYSettings:function(){return Dc},defaultCrossHairSettings:function(){return Ic},defaultGaugeSettings:function(){return Zc},defaultGeneralSettings:function(){return jc},defaultJSONTabAreaSettings:function(){return sd},defaultJSONTabAxesSettings:function(){return ed},defaultJSONTabBarSettings:function(){return od},defaultJSONTabBaseSettings:function(){return nd},defaultJSONTabBubbleSettings:function(){return dd},defaultJSONTabColumnSettings:function(){return ld},defaultJSONTabHeatmapSettings:function(){return hd},defaultJSONTabHoneyCombSettings:function(){return pd},defaultJSONTabLegendSettings:function(){return id},defaultJSONTabLineSettings:function(){return ad},defaultJSONTabScatterSettings:function(){return cd},defaultJSONTabSvpSettings:function(){return ud},defaultJSONTabTitleSettings:function(){return td},defaultLegendSettings:function(){return Pc},defaultLineSettings:function(){return $d},defaultRangeSplineSettings:function(){return qd},defaultSvpSettings:function(){return Kc},defaultSvpVisualizationSetting:function(){return Yc},defaultThresholdsSettings:function(){return qc},defaultTitleSettings:function(){return zc},defaultTooltipSettings:function(){return Lc},defaultVisualSettings:function(){return Jc},defaultVisualSettingsJSONTabMap:function(){return md},defaultXYSettings:function(){return Fc},destroyTreOnElement:function(){return uV},doesProduceTooManyValues:function(){return ix},doesQueryContainsTemplateVariable:function(){return ig},drillDownQueries:function(){return qF},encodeOperatorData:function(){return Re.encodeOperatorData},encodeSearchQueries:function(){return Re.encodeSearchQueries},encodeSearchQuery:function(){return Re.encodeSearchQuery},expandFilters:function(){return Wp},expandToAutocompleteItems:function(){return Ip},expandVariables:function(){return Kp},extractQuantizeOperatorData:function(){return KS},extractTimesliceOperatorData:function(){return YS},fetchAggregateSearchesResultsFromSessions:function(){return TP},fetchDrilldownQueries:function(){return NP},fetchDrilldownQueriesWithObservable:function(){return MP},fetchSearchQueryFromShortcode:function(){return OP},fetchSearchesDataFromDataSource:function(){return RP},fetchSearchesDataFromSession:function(){return wP},fillGapsForXAxisDataPoints:function(){return XC},filterOutIncorrectQueries:function(){return tg},findFirstMetric:function(){return DT},formatBytes:function(){return jf},formatDataPointValue:function(){return TT},formatDate:function(){return CD},formatDateRange:function(){return AD},formatDateTimeValue:function(){return ET},formatDateWithString:function(){return dk},formatDuration:function(){return pk},formatLogsAggregatedDataToGeoJson:function(){return qT},formatLogsNonAggregatedDataToGeoJson:function(){return WT},formatTimeWithString:function(){return hk},generalSeriesLevelSettings:function(){return Vc},generateAggregationPanelDataHint:function(){return dx},generateSectionId:function(){return Re.generateSectionId},getAdjustedMarkerSizeForDataPoint:function(){return fk},getAggregationSettings:function(){return vw},getAllQueryTypes:function(){return EF},getAxesFlag:function(){return fF},getBubbleDimensionsVisualSettings:function(){return ew},getCartesianChartChoices:function(){return up},getCartesianChartChoicesByType:function(){return pp},getChartBackgroundColor:function(){return FC},getChartType:function(){return FE},getChartVisualizationData:function(){return Qx},getCleanedUpTopSuggestions:function(){return gm},getColorFromIdx:function(){return MT},getColorSteps:function(){return YT},getColumnOptions:function(){return Uk},getColumnsContainsURL:function(){return Vk},getCommonMetaData:function(){return nT},getDashboardLegendItem:function(){return MO},getDataTierFromSearchExpression:function(){return oV},getDefaultJSONTabVisualSettings:function(){return bu},getDefaultQueryType:function(){return fT},getDefaultVisualSettings:function(){return Eu},getDefaultVisualSettingsType:function(){return Qc},getDimensionForAggregation:function(){return ux},getDimensionsValues:function(){return cx},getDisplayFlag:function(){return _F},getDistributionChartChoices:function(){return hp},getDistributionSeriesData:function(){return yT},getDuplicatedQueriesIndexes:function(){return ng},getExpandedFilters:function(){return jp},getExtremesAppliedSeries:function(){return LT},getFeaturesAvailableToContinuousTier:function(){return rV},getFeaturesAvailableToFrequentTier:function(){return nV},getFeaturesAvailableToInFrequentTier:function(){return aV},getFeaturesAvailableToSecurityTier:function(){return sV},getFeaturesAvailableToTier:function(){return iV},getFetchSuggestionsTermAndRange:function(){return Cf},getFilterKeys:function(){return Lm},getFilterValues:function(){return km},getFormatColumnSettingsForChartType:function(){return _w},getGeneralErrors:function(){return yF},getGroupByFieldsMessage:function(){return tx},getGroupByVisualSettings:function(){return zA},getHeatmapMetricsOptions:function(){return $T},getHeatmapOption:function(){return dp},getIAMRoleFormationTemplate:function(){return uP},getIAMRoleSetupInfo:function(){return dP},getInitialSidePanelState:function(){return Re.getInitialGeneralSidePanelState},getKey:function(){return bg},getKeyValueFromTerm:function(){return Gy},getKeyboardLabel:function(){return $t},getKeyboardShortcutLabels:function(){return Ht},getKeysFromTimeSeries:function(){return Bm},getLegendFlag:function(){return bF},getLogsSettingsFromQueries:function(){return Mp},getMarkerSizeForDisconnectedPoint:function(){return wu},getMarkerTypeForDisconnectedPoint:function(){return Au},getMetricsFilter:function(){return Im},getMetricsQueryHistory:function(){return Jm},getMetricsSuggestions:function(){return Am},getMockSeriesTimerange:function(){return DA},getMoment:function(){return uk},getNameFromAlias:function(){return vT},getNewTopSuggestions:function(){return hm},getNumber:function(){return xT},getObjectDiffMap:function(){return LO},getOthersFormattedDataPoint:function(){return gT},getOutlierChartTypeSetting:function(){return sw},getOutlierVisualSettings:function(){return ow},getOverrideSeriesItems:function(){return zx},getOverridesInfo:function(){return CE},getOverridingSettings:function(){return TE},getPanelChartTypeSettings:function(){return fw},getPanelData:function(){return RF},getPanelDataErrors:function(){return nx},getPanelDataHints:function(){return hx},getPanelRendererType:function(){return XT},getParametersForQuery:function(){return rg},getParseExpressionParts:function(){return $U},getPositionsOfUnquotedElementInQuery:function(){return qh},getPreferredQueryBuilderMode:function(){return Bf},getQueryForUpdateFromHistory:function(){return Wf},getQueryInfo:function(){return Kb},getQueryInfoToBeUpdated:function(){return Hf},getQueryMetric:function(){return Zb},getQuerySeriesId:function(){return ST},getQueryStringWithQuantizeOperator:function(){return WS},getQueryStringWithoutFillmissingEmptyOperator:function(){return kS},getQueryTimeRangeInSeconds:function(){return Xb},getQueryTypeMetadataMemoized:function(){return _T},getQueryWithVariablesValues:function(){return qf},getRadiusSteps:function(){return ZT},getRendererSpecificSeries:function(){return lT},getSVPChartOptions:function(){return yw},getSVPDataColumnSettings:function(){return dw},getSVPDefaultThresholds:function(){return Gc},getSVPVisualSettingsColumnSettings:function(){return uw},getScaledRangeOfYAxis:function(){return iA},getScatterDimensionsVisualSettings:function(){return JA},getSearchErrors:function(){return vF},getSelectedValue:function(){return qp},getSelectorDebounceTime:function(){return wp},getSeriesDisplayName:function(){return xc},getSeriesOverridesFlag:function(){return SF},getSeriesToQueryMapping:function(){return Gx},getSeriesVisibilitySetting:function(){return Ex},getSeriesWithOutlierType:function(){return Pb},getSteps:function(){return KT},getSvpStatisticsOptions:function(){return lw},getTableOption:function(){return cp},getTierFromValue:function(){return JU},getTiersEntitledToFeature:function(){return tV},getTiersforMatchedPartitions:function(){return lV},getTimeBoundaryOfSeries:function(){return kT},getTooltipContent:function(){return Cc},getTopSuggestions:function(){return bm},getTopSuggestionsStorage:function(){return _m},getUpdatedVisualizationSettings:function(){return PO},getValuesFromTimeSeries:function(){return Vm},getVariableItems:function(){return Rp},getVisualSettingsTypeForOverride:function(){return Yx},getVisualizationComponentType:function(){return JT},getVisualizationData:function(){return oF},getWarningInfo:function(){return wE},getXyDataObject:function(){return hT},getxAxisInfo:function(){return jE},groupDataPointsByRawMetaData:function(){return uT},hasFillmissingEmptyOperator:function(){return VS},hasGroupBySettings:function(){return OT},hasQueryAggregateOperator:function(){return MS},hasQueryAggregation:function(){return ax},hasQueryFillmissingEmptyOperator:function(){return PS},hasQueryQuantizeOperator:function(){return FS},hasQueryWhereOperatorWithEquals:function(){return sx},highlightFocusedElement:function(){return JF},honeyCombSettingsSchema:function(){return iU},indexOfTargetOutsideQuotes:function(){return qv},initI18nUtil:function(){return Dt},interpolateSeries:function(){return GE},isAdvancedMetricsQuery:function(){return Zh},isAggregateOperator:function(){return NS},isAnyDataPointInRange:function(){return rA},isBarOrColumnChart:function(){return RT},isBasicMetricsQuery:function(){return Yh},isEmptyInOperator:function(){return Zy},isEmptyQuery:function(){return Jh},isEscaped:function(){return Hh},isFilterWithEmptyTextValue:function(){return Nm},isInDistributionMode:function(){return wT},isInOperator:function(){return Xy},isInTimeSeriesMode:function(){return AT},isInsideInOperator:function(){return Yy},isLatitude:function(){return jT},isLogOutlierQueryString:function(){return Gp},isLogsQueryBySource:function(){return sT},isLongitude:function(){return QT},isMetricsQuery:function(){return Kh},isMetricsQueryBySource:function(){return aT},isNotAsterisk:function(){return TF},isOutlierChartType:function(){return kc},isPointConnected:function(){return eT},isQuantizeOperator:function(){return BS},isQueryEmptyOrContainsOnlyComments:function(){return em},isQueryOfJoinType:function(){return Ym},isRecentTopSuggestion:function(){return um},isSortableChart:function(){return IT},isTierEntitledToFeature:function(){return eV},isTimesliceOperator:function(){return $S},isTypeAllowed:function(){return SE},isXYVisualType:function(){return UE},legacyDefaultStyles:function(){return fd},legendReducer:function(){return NT},localeDateFormat:function(){return ck},lookupForLatLongMetrics:function(){return HT},mapDatapointsNumberToDimension:function(){return GN},mapDynamicRules:function(){return kU},mapHoneyCombClusterCountToDimension:function(){return XN},mapHoneyCombItemCountToDimension:function(){return JN},mapIngestRules:function(){return MU},mapQueriesCountToDimension:function(){return ZN},mapQueriesTypeToDimension:function(){return YN},mapRenderedSubject$:function(){return _L},mapTimerangeToDimension:function(){return KN},mapTimeseriesNumberToDimension:function(){return zN},markerDefaultSize:function(){return Bc},matchUnquotedElementsInQuery:function(){return Wh},mergeWithDefaultSettings:function(){return $E},messages:function(){return Ot},metricsQueryHistoryStorage:function(){return Xm},migrateData:function(){return CF},migrateLegacyVisualSettings:function(){return tF},migrateTopSuggestions:function(){return dm},mockAggregatedLogsMapData:function(){return HF},mockAxes:function(){return jF},mockHoneyCombData:function(){return FA},mockHoneyCombData2:function(){return UA},mockMetricsMapData:function(){return $F},mockMetricsOutlierDataPoints:function(){return VA},mockNonAggregatedLogsMapData:function(){return WF},mockNonTimeSeriesData:function(){return QF},mockNonTimeSeriesDataWithMultipleSeries:function(){return zF},mockOutlierSeriesData:function(){return LA},mockOutlierSeriesDataWithOutlierData:function(){return PA},mockSeriesData:function(){return OA},mockSeriesData2:function(){return MA},mockSeriesData3:function(){return kA},mockSeriesShiftedData:function(){return NA},mockTablePanelData:function(){return VF},mockTablePanelDataContainsURL:function(){return BF},mockTimeRange:function(){return UF},modeAsPanelRendererType:function(){return DE},modeAsVisualizationComponentType:function(){return RE},newMetricsPreviewTableBrandListStyles:function(){return Nt},noTokenDividers:function(){return $v},onChangeAutocomplete:function(){return Tw},onChangeColorSelector:function(){return Sw},onChangeMarkerSize:function(){return Ew},onChangeTextField:function(){return bw},openFieldsPage:function(){return zp},openLog:function(){return Qp},openRceOptionsFromEntity:function(){return gF},originatesFromHiddenQuery:function(){return BE},overridingJSONTabBrandDarkStyles:function(){return vd},overridingJSONTabBrandLightStyles:function(){return yd},overridingJSONTabLineSettings:function(){return Bd},pageSchema:function(){return eU},panelSchema:function(){return tU},panelTypeAsPanelRendererType:function(){return OE},parseDateRange:function(){return wD},parseMetricsSuggestions:function(){return jv},parseQueryDetails:function(){return Km},parseQueryForSuggestions:function(){return Gv},parseSearchTerm:function(){return Pm},parseShortCode:function(){return xF},parseTimeText:function(){return Re.parseTimeText},patchMapAutoColorSteps:function(){return GT},prepareGeneralSettings:function(){return wA},processDisconnectedDataPoints:function(){return iT},processSeriesWithNumericalXAxis:function(){return cT},processSeriesWithPossibleDisconnectedDataPoints:function(){return rT},processSeriesWithPossibleGroups:function(){return dT},processSeriesWithSingleOutlier:function(){return Hb},queriesSchema:function(){return rU},queriesToMetricsQueryRows:function(){return QP},query1:function(){return hE},query2:function(){return mE},queryA:function(){return DF},queryB:function(){return OF},queryBuilderCachedNetwork:function(){return xg},queryBuilderNetworkService:function(){return fg},queryC:function(){return NF},queryD:function(){return MF},queryE:function(){return kF},queryF:function(){return LF},queryG:function(){return PF},queryH:function(){return FF},queryX:function(){return gE},quoteIfNeeded:function(){return Pp},rebuildDataToGeoJSON:function(){return BT},rebuildMetricsAggregatedDataToGeoJson:function(){return zT},refreshSearchSessions:function(){return IP},removeAllOccurrencesOfUnquotedMatch:function(){return jh},removeAlreadySelectedKeysFromMetricQuery:function(){return Rm},removeBlockComments:function(){return Qh},removeComments:function(){return Gh},removeLineComments:function(){return zh},removeNaN:function(){return KC},removeOldSeriesFromVisualSettings:function(){return Sx},renderFn:function(){return EN},renderSettingsTabFields:function(){return vN},rendererSpecificCreatorsByType:function(){return IA},searchQueryEditorService:function(){return F_},searchTopologyLabels:function(){return kP},sectionIdMarker:function(){return le.sectionIdMarker},seriesOverridesSchema:function(){return nU},setPreferredQueryBuilderMode:function(){return $f},setTreRecent:function(){return uO},setupDisconnectedDataPoint:function(){return tT},sharedAnalyticsI18n:function(){return It},sharedAnalyticsI18nJA:function(){return Rt},sharedAnalyticsPerf:function(){return TD},shortcutsManager:function(){return Oi},shouldGenerateAggregationHintForQuery:function(){return ox},shouldGenerateWhereOperatorHintForQuery:function(){return lx},shouldRefetechWithNewLimit:function(){return Gb},shouldSuggestComparators:function(){return Ky},sidePanelReducer:function(){return RC},singleCategorySpecificSeriesData:function(){return VE},sortedMetricOperatorsConfigs:function(){return Qo},splitName:function(){return Tc},startAggregateSearchesPolling:function(){return CP},staticDefaultCrossHairSettings:function(){return wc},stringifyEachMetricsFilter:function(){return Op},stringifyFilters:function(){return am},stringifyMetricsFilters:function(){return wm},stringifyMetricsQueryData:function(){return Np},supportedQueryTypesMap:function(){return tp},thresholdColors:function(){return Wc},thresholdCustomConfig:function(){return pw},thresholdOpacity:function(){return Hc},timeRangeSchema:function(){return sU},topSuggestionsCategoriesComparator:function(){return mm},transformLogsSettings:function(){return kp},trimVisualizationSettings:function(){return fE},tryFilterSuggestions:function(){return Hm},updateFieldValidationRules:function(){return kO},updateMetricsQueryHistory:function(){return eg},updateTopSuggestions:function(){return Em},useAutoFocusOnMount:function(){return ag},useComponentStore:function(){return sg},useContextualDrilldown:function(){return lg},useInfiniteScroll:function(){return cg},useKeyboardBinding:function(){return Ni},useKeyboardFriendlyMenu:function(){return dg},useKeyboardSequence:function(){return Mi},usePreviewParameters:function(){return eE},useQueryDataWithoutFiltersBeingEdited:function(){return xf},useSubmitQueriesOnKeydownShortcut:function(){return iE},visualSettingsTypeAsChartType:function(){return IE},visualizationSettingsSchema:function(){return aU}});var r=i(50963),n=i(21902),a=i(63541),s=i(59383),o=i(38604),l=i(45493),c=i(60512),d=i(94206),u=i(48009),p=i(29281),h=i(3618),m=i(70761),g=i(22489),y=i(93595),v=i(23315),f=i(59825),_=i(31765),S=i(1499),b=i(79341),E=i(35188),T=i(68954),x=i(64329),C=i(5560),A=i(81740),w=i(91234),I=i(16586),R=i(39493),D=i(40245),O=i(56837),N=i(77484),M=i(38791),k=i(34624),L=i(71157),P=i(52316),F=i(8243),U=i(48237),V=i(30787),B=i(35981),H=i(49403),W=i(32254),q=i(39400),j=i(11999),Q=i(11286),z=i(8202),G=i(87385),K=i(13107),Y=i(4625),Z=i(68708),X=i(30211),J=i(91019),ee=i(4339),te=i(23706),ie=i(97701),re=i(67593),ne=i(34099),ae=i(85440),se=i(90223),oe=i(70910),le=i(16471),ce=i(88097),de=i(41197),ue=i(43472),pe=i(10507),he=i(77273),me=i(44910),ge=i(47993),ye=(i(10163),i(1992)),ve=i(86761),fe=(i(2074),i(82086),i(17636),i(71603)),_e=i(47241),Se=i(33018),be=i(3685),Ee=i(33642),Te=i(23580),xe=i(20450),Ce=(i(61138),i(10530),i(69459)),Ae=i(50494),we=i(66993),Ie=(i(15079),i(89867)),Re=i(60567),De=i(66359),Oe=i(51961),Ne=i(59324),Me=i(9403),ke=i(80122),Le=i(50648),Pe=i(50955),Fe=i(97064),Ue=i(92285),Ve=i(32630),Be=i(10760),$e=i(72160),He=i(93249),We=i(7721),qe=i(955),je=i(64753),Qe=i(40450),ze=i(30339),Ge=i(73442),Ke=i(22790),Ye=i(49411),Ze=i(85520),Xe=i(61449),Je=i(77325),et=i(96114),tt=i(5350),it=i(80211),rt=i(34074),nt=i(35170),at=i(39442),st=i(8969),ot=i(69419),lt=i(21710),ct=i(52238),dt=i(48435),ut=i(45109),pt=i(84351),ht=i(42387),mt=i(75351),gt=i(63205),yt=Object.defineProperty,vt=Object.defineProperties,ft=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,Et=Math.pow,Tt=(e,t,i)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xt=(e,t)=>{for(var i in t||(t={}))St.call(t,i)&&Tt(e,i,t[i]);if(_t)for(var i of _t(t))bt.call(t,i)&&Tt(e,i,t[i]);return e},Ct=(e,t)=>vt(e,ft(t)),At=(e,t)=>{var i={};for(var r in e)St.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&_t)for(var r of _t(e))t.indexOf(r)<0&&bt.call(e,r)&&(i[r]=e[r]);return i},wt=(e,t,i)=>new Promise(((r,n)=>{var a=e=>{try{o(i.next(e))}catch(e){n(e)}},s=e=>{try{o(i.throw(e))}catch(e){n(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((i=i.apply(e,t)).next())}));const It={by:"by",aggregatedValue:"Agg. Series Value",colorFamily:"Color Palette",valueStr:"Value",common:{metricsQueryType:"Metrics",logsQueryType:"Logs",tracesQueryType:"Traces",spansQueryType:"Spans"},chartStackingOptions:{default:"Default",percent:"Percent",stacked:"Stacked"},showLegend:"Show Legend",panelSettings:"Panel Settings",visualSettings:"Visual Settings",visualizationType:"Panel Type",chartType:"Chart Type",JSON:"JSON",dimensions:"Dimensions",axesEditor:{axes:"Axes",yAxis:"Y-Axis",leftYAxis:"Left Y-Axis",rightYAxis:"Right Y-Axis",gridLine:"Gridline",xAxis:"X-Axis"},queryHistory:{tooltipTitleEnabled:"Show recent queries",tooltipTitleDisabled:"Query history is not available for this type of query.",noRecentQueriesTitle:"No recent queries",noRecentQueriesDescription:"Run queries in order to save them in history.",noRecentQueriesClose:"Close",noRecentQueriesListTitle:"My Recent Queries",clearHistory:"Clear history"},legendEditor:{legend:"Legend",position:"Position",legendPosition:{none:"None",bottom:"Bottom",right:"Right"},maxWidth:"Max Width",maxHeight:"Max Height",showTable:"Show as Table",wrapLegend:"Wrap Text",displayProperties:"Display Properties"},groupBy:"Group By",honeyCombOptions:{shape:"Shape",hexagon:"Hexagon",circle:"Circle"},queryBuilder:{preview:{showPreviewTable:"Show Preview Table",showChart:"Show Chart"},svpDataColumn:"Data",svpThresholdColumn:"Threshold",svpSparklinesColumn:"Sparkline",svpGaugesColumn:"Gauge",statistics:"Statistics Type",label:"Label",labelHintText:"Text shown below the gauge chart",showSVPLabel:"Hide Label",showSVPValue:"Hide Value",showSVPLabelV2:"Show Label",showSVPValueV2:"Show Value",showGauge:"Show Gauge",showSparklines:"Show Sparkline",sparklineColor:"Line Color",showColorAs:"Show Color As",round:"Decimals",roundHintText:"Round value to precision between 0 and 10",valueFontSize:"Value Font Size",labelFontSize:"Label Font Size",defaultSVPText:"Default Text",defaultSVPTextHint:"Text to be shown when data is missing",minimum:"Minimum",maximum:"Maximum",latest:"Latest",average:"Average",fallbackLabel:"Label",showThresholdMarker:"Show Threshold Marker",showThreshold:"Show Threshold",suggestionRetentionExceeded:"Autocomplete only supports data retained from -%sd. Enter a custom value to search outside of the time range.",topSuggestions:{dimensionsHeader:"All Dimensions",metricsHeader:"All Metrics",valuesHeader:"All Values",topSuggestionsHeaders:{dimensionsHeader:"Recently Used Dimensions",valuesHeader:"Recently Used Values",metricsHeader:"Recently Used Metrics"}},quantization:{info:"Quantize %(granularity)s (%(rollup)s)",tooltip:"Sumo automatically sets a quantisation interval. If specified in query, Sumo will try to make the actual interval as close as possible."}},aggregationType:"Statistic Type",aggregationTypeAvg:"Average",aggregationTypeMax:"Maximum",aggregationTypeMin:"Minimum",aggregationTypeCount:"Count",aggregationTypeSum:"Sum",aggregationTypeLatest:"Latest",table:"Table",cpcBreakdownChart:"CPC Breakdown Chart",graph:"Graph",noDrilldownOptions:"No drill down options available.",seriesOverridesEditor:{aliasHint:"e.g. text - {{ metadata }}",seriesOverrides:"Display Overrides",delete:"delete",edit:"edit",noQueryOrSeriesSelected:"No query or series selected",queryOrSeriesName:"Query or series name",queryOrSeriesNameHint:"e.g. #A, series = prod-env",addNewOverride:"Add New Override",overrideDeleted:"Override deleted.",undo:"UNDO",remainingOverrides:"& %s other override(s)"},seriesOverridesStylesEditor:{style:"Style",property:"Property",overriddenPropertyInfo:"Overridden",ignoredPropertyInfo:"Ignored because it does not work with a final Chart Type",disallowedPropertyInfo:"Not allowed"},visualizationSettings:{name:"Alias",type:"Chart Type",color:"Color",visible:"Visible",barMaxWidth:"Bar Width",columnMaxWidth:"Column Width",dataPointMaxWidth:"Width",displayType:"Display Type",lineDashType:"Line Type",lineThickness:"Line Thickness",markerType:"Marker Type",markerSize:"Marker Size",fillOpacity:"Fill Opacity",innerRadius:"Inner Radius (in percentage)",maxNumOfSlices:"Maximum Number of Slices",startAngle:"Start Angle",valueRepresents:"Value Represents",orientation:"Orientation",axisYType:"AxisYType",sortBy:"Sort By",sortDirection:"Sort Direction",sortByLabel:"Label",sortByValue:"Value",noSort:"(none)",sortAsc:"Ascending",sortDesc:"Descending",properties:{type:{area:"Area",bar:"Bar",bubble:"Bubble",column:"Column",line:"Line",pie:"Pie",pyramid:"Pyramid",scatter:"Scatter",table:"Table"},displayType:{default:"Default",stepped:"Stepped",stacked:"Stacked",stackedPercent:"Stacked Percent",smooth:"Smooth",funnel:"Funnel",grouped:"Grouped"},lineDashType:{solid:"Solid",dot:"Dot",dash:"Dash",dashDot:"Dash Dot"},markerType:{none:"None",circle:"Circle",square:"Square",triangle:"Triangle",cross:"Cross"},valueRepresents:{height:"Height",area:"Area"},orientation:{default:"Default",reversed:"Reversed"},visible:{true:"True",false:"False"},axisYType:{leftYAxis:"Left Y-Axis",rightYAxis:"Right Y-Axis"}},validation:{markerSizeSmallerThanLineThikness:"Marker size cannot be smaller than line thickness",markerSizeDisconnectedPointsLimit:"Marker size setting below %s will not apply to disconnected data points."}},thresholdsEditor:{thresholds:"Thresholds",fillRemainingGreen:"Fill remaining area as green",critical:"Critical",warning:"Warning",highlightViolations:"Highlight Violations",highlightViolationsTooltip:"Charts with defined thresholds will highlight instances where the data enters the warning or critical threshold.",to:"to",hintFirstLine:"Thresholds define critical and warning areas within your visualizations.",hintSecondLine:"Once you define thresholds, you can highlight areas where your data violates your determined thresholds.",comparator:{greater:"greater than",greater_or_equal:"greater than or equal to",less_or_equal:"less than or equal to",less:"less than",excludes:"excludes",includes:"includes"}},mapSettings:{coordinates:"Coordinate Data",longitudeField:"Longitude Source",latitudeField:"Latitude Source",metricField:"Metric",clusterAttribute:"Cluster Attribute",displaySecondaryMetric:"Display Secondary Metric",clusterMetricsNum:"Number of Metrics",clusterSingleMetric:"One Metric",clusterDoubleMetric:"Two Metrics",selectedMetric:"Metric: %s",selectedStatisticType:"Statistics: %s",selectedClusterAttribute:"Cluster Attribute: %s",sizeClusterAttribute:"Size",colorClusterAttribute:"Color",metricNotAvailable:"Metric is not available. Adjust your query or change the metric for this chart."},heatmapSettings:{bucketSettings:"Bucket settings",dataSettings:"Data settings",bucketSettingsTitle:"Bucket Settings",xAxisBucketSizeLabel:"X-Axis Bucket Size",xAxisBucketSizePlaceholder:"auto: %s",xAxisBucketSizeFormatError:"Incorrect value for X-Axis Bucket Size",xAxisBucketSizeRangeError:"X-Axis Bucket Size should be less than or equal to %s",xAxisBucketSizeTooManyBucketsError:"Current X-Axis Bucket Size would create more than %s buckets which is unsupported",yAxisBucketSizeLabel:"Y-Axis Bucket Size",yAxisBucketSizePlaceholder:"auto: %s",yAxisBucketSizeFormatError:"Incorrect value for Y-Axis Bucket Size",yAxisBucketSizeRangeError:"Y-Axis Bucket Size should be less than or equal to %s",yAxisBucketSizeTooManyBucketsError:"Current Y-Axis Bucket Size would create more than %s buckets which is unsupported",yAxisBucketSizeNegativeNumber:"Y-Axis Bucket Size should be bigger than 0",colorMode:"Color Mode",spectrumColorMode:"Spectrum",opacityColorMode:"Opacity"},colorThresholds:{title:"Thresholds",baseColor:"Base",maxThresholdsAmount:"You can define only %s thresholds.",errors:{thresholdLessThanPrevious:"Value must be greater than the previous one",empty:"Value is required",notANumber:"Value has to be a valid number",tooManyDigits:"Value can't contain more than %s digits",tooManyFractionDigits:"Value can't contain more than %s fractional digits"},warnings:{wouldBeIgnored:"Value is ignored as there are other non-empty thresholds"},colorAutoMode:"Auto",colorAutoModeDescription:"Your thresholds are automatically calculated based on your data. To add more thresholds or specify custom thresholds, disable this option.",addNew:"Add Threshold",remove:"Remove threshold"},metricsQueryBuilder:{metric:"Metric",filter:"Filters",filterSelectorPlaceholder:"enter filter names",metricSelectorPlaceholder:"enter metric name",customSearch:"%s (Custom search)",customValue:"Custom Value",emptyText:"Empty Text",aggregation:"Aggregation",aggregationPlaceholder:"e.g. sum",aggregationTypeNone:"no aggregation",aggregationTypeAvg:"avg",aggregationTypeCount:"count",aggregationTypeMax:"max",aggregationTypeMin:"min",aggregationTypeSum:"sum",groupBy:"by",groupBySelectorPlaceholder:"e.g. node",addOperator:"Add Operator",runQueries:"Run Queries",runQueriesShortcut:{altEnter:{mac:"You can also use 'Option + Enter'",nonMac:"You can also use 'Alt + Enter'"},enter:"You can also use 'Enter'"},unexecutedQueriesNotification:{altEnter:{mac:"Changes detected. Press Option + Enter to execute the query.",nonMac:"Changes detected. Press Alt + Enter to execute the query."},enter:"Changes detected. Press Enter to execute the query."},operators:{documentation:"Documentation",by:"by",byPlaceholder:"e.g. node",accumulate:{code:"accum",description:"Converts each time-series in the row to a series of running totals. The running total in each series starts from the value of the first data point in the series, then iteratively adds up successive values."},average:{code:"avg [by FIELD [, FIELD, ...]]",description:"Calculates the average of all the resulting time series. If grouping is specified, it calculates the average for each group."},bottomk:{code:"bottomk (number, aggregator)",description:"Select the bottom specified time series  sorted by the value of a mathematical expression evaluated over the query time range."},count:{code:"count [by FIELD [, FIELD, ...]]",description:"Counts the total number of time series that match the query. If grouping is specified, it counts the total number for each group."},delta:{code:"delta",description:"Computes the backward difference at each data point in the time series to determine how much the metric has changed from its last value in the series."},evaluate:{code:"metrics query | eval <math expression>",description:"Evaluates a time series based on a user-specified math expression."},filter:{code:"filter <aggregator> <boolean operator> <numerical value>",description:"Filters a query to help reduce the number of series returned by applying a boolean test to some aggregate quantity."},maximum:{code:"max [by FIELD [, FIELD, ...]]",description:"Calculates the maximum value of the time series that match the query. If grouping is specified, it calculates the maximum for each group."},minimum:{code:"min [by FIELD [, FIELD, ...]]",description:"Calculates the minimum value of the time series that match the query. If grouping is specified, it calculates the minimum for each group."},parse:{code:"parse [field=FIELD] PATTERN as FIELD [, FIELD, ...]",description:"Parses the given field to create new fields to use in the metrics query. If no field is specified while parsing Graphite metrics, the metric name is used.\n           Each wildcard in the pattern corresponds to a specified field. The parse operator supports both lazy (shortest match) and greedy (longest match) wildcard matches. Use '*' for a lazy match, or '**' for a greedy match."},percentile:{code:"pct(DOUBLE) [by FIELD [, FIELD, ...]]",description:"Calculates the specified percentile of the metrics that match the query. If grouping is specified, it calculates the specified percentile for each group."},quantize:{code:"quantize to INTERVAL [using ROLLUP]",description:"Segregates time series data by time period. This allows you to create aggregated results in buckets of fixed intervals (for example, 5-minute intervals)."},rate:{code:"rate <all | increasing | decreasing>",description:"Computes a rate based on the forward difference at each time in the time series. The difference between the current and the next recorded value in a time series is scaled to a value per second."},sum:{code:"sum [by FIELD [, FIELD, ...]]",description:"Calculates the sum of the metrics values that match the query. If grouping is specified, it calculates the sum for each group."},timeshift:{code:"timeshift TIME_INTERVAL",description:"Shifts the time series from your metrics query by the specified amount of time. This can help when comparing a time series across multiple time periods."},topk:{code:"topk (number, aggregator)",description:"Select the top specified time series sorted by the value of a mathematical expression evaluated over the query time range."},fillmissing:{code:"metrics query | fillmissing [using] <empty | interpolation | last | CONSTANT_VALUE>",description:"Fills empty time slices in query results with a derived data point.\n          empty: no data point is derived, and the visualization is discontinuous;\n          interpolation: derived data point is a linear interpolation of the data points prior to and after the empty time slice(s);\n          last: derived data point is the same value as the previous data point;\n          CONSTANT_VALUE: derived data point is the value you specify."},outlier:{code:"outlier direction <window> <threshold>",description:"Identifies values in a sequence that seem unexpected. It will identify an alert or violation in the query, for example, for a scheduled search."},histogram_quantile:{code:"histogram_quantile(quantile)",description:"\n          The histogram_quantile operator calculates the -quantile (0    1) from the buckets of a histogram.\n          This operator is specific to the Prometheus Histogram data type and does not work with non-Prometheus histograms.\n          It is equivalent to the PromQL histogram_quantile() operator.\n          "},timeslice:{code:"timeslice ROLLUP over TIME_INTERVAL",description:"Segregates data by time period, to create bucketed results based on a fixed interval."},stddev:{code:"stddev [by FIELD [, FIELD, ...]]",description:'Finds the standard deviation value for a distribution of numerical values within the time range analyzed and associated with a group designated by the "group by" field.'},where:{code:"where _value <boolean operator> <numerical value>",description:"The where operator filters results based on a boolean expression. Multiple where operators are processed in the order they are specified, with each subsequent where operator further filtering results."},ewma:{code:"ewma <numerical span> OR <numerical alpha>",description:"The ewma operator computes an Exponentially Weighted Moving Average (EWMA) on the data points returned by the query for the selected time range. This allows you to smooth out short-term fluctuations (outliers) and display long-term trends."}}},queryEditorRow:{actions:{addQuery:"Add Query",hideQuery:"Hide Query",showQuery:"Show Query",hidingQueryDisabled:"There must be at least one visible query row.",switchToAdvancedMode:"Switch to Advanced Mode",advancedMode:"Advanced Mode",switchToBasicMode:"Switch to Basic Mode",basicMode:"Basic Mode",deleteQuery:"Delete Query",createAlert:"Create a Monitor",createAlertTooltip:"Create a monitor using this query's time series.",createSlo:"Create an SLO",createSloTooltip:"Create an SLO using this query",duplicateQueryRow:"Duplicate Query",pressEnterToOpen:"Press Enter to open"},queryTypeLimitReached:{Logs:"Reached a limit of the Logs Queries",Metrics:"Reached a limit of the Metrics Queries"},autoHideDisclaimer:"Queries are automatically hidden when joining queries.",cannotSwitchToBasicMode:"Your query cannot be switched to Basic Mode",estimatedScanSize:"Estimated Scan Size"},queryInput:{logsQueryEditorPlaceholder:"Type your search here then hit ENTER to execute",emptyQueryRowPlaceholder:{Logs:"Enter a Logs Query",Metrics:"Enter a Metrics Query"}},metricsQueryPreviewTable:{title:"Time series matching queries",timeSeries:"time series",contextMenu:{items:{copyValue:"Copy value",copyDimensionAndValue:"Copy dimension and value",copyEntireTimeSeries:"Copy entire time series",addToQuery:"Add to %s",addToQueryAndRun:"Add to %s and run",addToQueryAsNot:"Add to %s as NOT",addToQueryAsNotAndRun:"Add to %s as NOT and run",removeFromQuery:"Remove from %s",removeFromQueryAndRun:"Remove from %s and run"}}},newMetricsPreviewTable:{title:"%s Time series matching queries",timeSeries:"Time series"},matchingTimeSeriesCount:"%s matching time series",selected:"%s selected",metricsPreviewTableV2:{tabLabel:"Time Series",searchBar:{placeholder:"Search Time Series"},columns:{queryId:{title:"Query"},metrics:{title:"metric"},min:{title:"Min"},max:{title:"Max"},latest:{title:"Latest"},avg:{title:"Avg"},sum:{title:"Sum"},count:{title:"Count"}},filters:{groups:{data:{title:"Data"},dimensions:{title:"Dimensions"}}},states:{noDimensions:{title:"No Visible Dimensions",description:"Youve hidden all of your dimensions. To display your results, check at least one item on the left."},noMatchingResults:{title:"No Matching Results",description:"Your search did not match any content. Try searching another phrase.",buttonText:"Clear Search"},noQueryResults:{title:"No Query Results",description:"Your query did not return any results. Try removing some filters or broadening your search."},noQueryRun:{title:"Enter a query to explore your data",metricsDescription:"Tip: Choose between advanced or basic mode to build your query and discover your data.",metricsButtonText:"Metrics Documentation",dashboardButtonText:"Dashboards Documentation"}}},csvExport:{dialog:{title:"Export as CSV",description:"Export your metrics time series results as a CSV.",exportSettings:"Export Settings",excludeHiddenColumns:"Export only selected fields",includeDataPoints:"Include data points",cancel:"Cancel",export:"Export"},toastMessage:"Your download has started",tooltip:"Export as CSV"},searchVisualization:{emptyTitle:"No Data to Display",emptyDescription:"There is no data for your filter. You can try modifying the query or updating the time range.",emptyMapTitle:"We could not map your data",emptyMapDescription:"Double check that your query contains longitude and latitude data or check your Coordinate Data sources on the right panel.",errorTitle:"Error!",errorDescription:"There were errors loading this panel."},emptyVisualization:{timeSeries:"Enter a query to discover patterns in your data",distribution:"Enter a query to see the distribution of your data",singleValueMetrics:"Enter a query to display a single value",map:"Enter a query to chart your data on a map",honeyComb:"Enter a query to break down your data into groups",text:"Write down context for your dashboard",image:"Upload an image for reference",traceList:"TODO",serviceMap:"TODO"},operators:{using:"using",direction:"direction",window:"window",threshold:"threshold"},urlContextMenu:{openInNewWindow:"Open In New Browser Tab",openInSumoTab:"Open In New Sumo Tab"},pyramidDisplayOptions:{default:"Default",funnel:"Funnel",reversed:"Reversed",height:"Height",area:"Area"},title:"Title",fontSize:"Font Size",fontSizeRange:"between 8 and 50",paginationPageSize:"Rows Per Page",decimals:"Decimals",decimalsRange:"Round value to precision between 0 and 10",integerValue:"Enter an integer value.",integerOrFloatValue:"Enter an integer or decimal value.",copyToClipboard:"Copy To Clipboard",jsonCopied:"JSON copied to clipboard",updatePreview:"Update Preview",node:"node",thresholdError:"Must be less than max",removeOperator:"Remove operator",greaterThanValidatorErrorMessage:"Enter value greater than %s",outOfRangeMinValue:"Enter value greater than or equal to %s",outOfRangeMaxValue:"Enter value smaller than %s",titleFontSize:"Title Font Size",labelFontSize:"Label Font Size",unitTitle:"Unit",unitFontSize:"Unit Font Size",unitDecimals:"Decimals",xAxisDimension:"X Axis Dimension",yAxisDimension:"Y Axis Dimension",zAxisDimension:"Z Axis Dimension",showAxis:"show axis",rightYAxisHint:"To display, create a Display Override and set the AxisYType property to Right Y-Axis for a series or query.",timesliceHeaderName:"Time",outlierOptions:{title:"Outlier Visual Settings",bandColor:"Band Color",markerColor:"Marker Color"},cluster:"Cluster",heatMap:"Heatmap",renderTypes:{timeSeries:{label:"Time Series",explanation:"Use a line, bar, area, or column chart to track trends over a period of time."},distribution:{label:"Categorical",explanation:"Use a pie, bar, area, bubble, or other charts to show the categorical distribution in your data."},singleValueMetrics:{label:"Single Value",explanation:"Use single number, gauge, and spark-line displays to track a metric value."},map:{label:"Map",explanation:"Use cluster maps and heat maps to display metrics across geographic locations."},honeyComb:{label:"Honeycomb",explanation:"Use honeycombs to display the status of individual components in your infrastructure."},text:{label:"Text",explanation:"Use text to create section headers and write descriptions on your dashboard."},image:{label:"Image",explanation:""},traceList:{label:"Traces",explanation:"Create a panel to show list of traces in form of customisable table or duration breakdown chart."},serviceMap:{label:"Service Map",explanation:"Have quick picture of the health of your microservices and their dependent or supporting neighbors"}},spansQueryBuilder:{filterSelectorLabel:"Filters",filterPlaceholder:"",placeholder:"Type your search here then hit ENTER to execute",visualizations:"Visualize",querySelectorPlaceholder:"",addVisualization:"Add",groupBy:"Group By",limitSelector:"Limit",visualizationItem:{count:"count",count_distinct:"count distinct",duration:"duration",custom:"custom tag"},customValue:"Custom Value",filterCategory:{metrics:"Spans metrics",kubernetesFields:"Kubernetes fields",cloudFields:"Cloud Infrastructure fields",coreFields:"Spans fields",otherFields:"Other"}},tracesQueryBuilder:{filterSelectorLabel:"Select",filterDescriptions:{duration:{description:"Show traces where end-to-end duration matches the filter.",example:"E.g. duration >= 100ms",syntax:"Syntax: duration <comparison_operator> <time in seconds/milliseconds>"},numErrors:{description:"Show traces where number of spans with errors matches the filter.",example:"E.g. numErrors = 0",syntax:"Syntax: numErrors <comparison_operator> <integer>"},numSpans:{description:"Show traces where number of spans matches the filter.",example:"E.g. numSpans > 5",syntax:"Syntax: numSpans <comparison_operator> <integer>"},"CPC of":{description:"Show traces in which the given service's contribution in the critical path matches the given threshold.",example:"E.g. CPC of kafka > 90%",syntax:"Syntax: CPC of <service_name> <comparison_operator> <value>%"},"max CPC of":{description:"Show traces in which the given service is the biggest contributor in the critical path.",example:"E.g. max CPC of kafka",syntax:"Syntax: max CPC of <service_name>"},"max CPC":{description:"Show traces in which the contribution of the biggest contributor in the critical path matches the given threshold.",example:"E.g. max CPC > 90%",syntax:"Syntax: max CPC <comparison_operator> <value>%"},service:{description:"A service taking part in a span. You can specify whether it must start the trace or not.",example:"E.g. service = restApi for any span",syntax:"Syntax: service = <service_name> <for any span|for root span>"},operation:{description:"A piece of the workflow represented by a span.",example:"E.g. operation = getAuthData for any span",syntax:"Syntax: operation = <operation_name> <for any span|for root span>"},"http.status_code":{description:"HTTP response status code.",example:"E.g. http.status_code >= 500 for root span",syntax:"Syntax: http.status_code <comparison_operator> <value> <for any span|for root span>"},"http.url":{description:"URL of the HTTP request being handled in a span.",example:"E.g. http.url = /api/customer?customerId=123 for root root",syntax:"Syntax: http.url = <url> <for any span|for root span>"},"http.path":{description:"HTTP request path.",example:"E.g. http.path = /api/list for root root",syntax:"Syntax: http.path = <path> <for any span|for root span>"},_sourceCategory:{description:"A tag helping you search by data type, machine type, function, location, or any category you choose.",example:"E.g. _sourceCategory = /Kubernetes/Application for root root",syntax:"Syntax: _sourceCategory = <category_value> <for any span|for root span>"},"k8s.cluster.name":{description:"Kubernetes cluster name.",example:"k8s.cluster.name = cl-java-app for root span",syntax:"Syntax: k8s.cluster.name = <cluster_name> <for any span|for root span>"},"k8s.container.name":{description:"Kubernetes container name.",example:"k8s.container.name = container-a for root span",syntax:"Syntax: k8s.container.name = <container_name> <for any span|for root span>"},"k8s.deployment.name":{description:"Kubernetes deployment name.",example:"k8s.deployment.name = service-a for root span",syntax:"Syntax: k8s.deployment.name = <deployment_name> <for any span|for root span>"},"k8s.namespace.name":{description:"Kubernetes namespace name.",example:"k8s.namespace.name = java-app for root span",syntax:"Syntax: k8s.namespace.name = <namespace_name> <for any span|for root span>"},"k8s.node.name":{description:"Kubernetes node name.",example:"k8s.node.name = ip-10-0-11-809.us-east-1.compute.internal for root span",syntax:"Syntax: k8s.node.name = <node_name> <for any span|for root span>"},"k8s.pod.name":{description:"Kubernetes pod name.",example:"k8s.pod.name = service-A-auto-76797b944b-bt469",syntax:"Syntax: k8s.pod.name = <pod_name> <for any span|for root span>"},"k8s.replicaset.name":{description:"Kubernetes ReplicaSet name.",example:"k8s.replicaset.name = service-A-auto-76797b944b for root span",syntax:"Syntax: k8s.replicaset.name = <replicaset_name> <for any span|for root span>"},"k8s.service.name":{description:"Kubernetes service name.",example:"k8s.service.name = service-A-UI for root span",syntax:"Syntax: k8s.service.name = <service_name> <for any span|for root span>"},"host.id":{description:"Unique host id.",example:"E.g. host.id = <id> for root root",syntax:"Syntax: host.id = <id> <for any span|for root span>"},"cloud.account.id":{description:"The cloud account id used to identify different entities.",example:"E.g. cloud.account.id = 74636384628462 for root span",syntax:"Syntax: cloud.account.id = <id> <for any span|for root span>"},"cloud.region":{description:"A specific geographical location where different entities can run.",example:"E.g. cloud.region = us-east-1 for any span",syntax:"Syntax: cloud.region = <region_name> <for any span|for root span>"},"search.id":{description:"A log search id.",example:"E.g. search.id = 2a6571da26602a67be14ea8c5ab82349 for root root",syntax:"Syntax: search.id = <id> <for any span|for root span>"}},filterSuggestionsLabel:{duration:"Duration",numErrors:"Number of errors",numSpans:"Number of spans",CPCOf:"Critical path contribution",maxCPCOf:"Max critical path contribution service",maxCPC:"Max critical path contribution value"},filterCategory:{metrics:"Tracing metrics",kubernetesFields:"Kubernetes fields",cloudFields:"Cloud Infrastructure fields",coreFields:"Tracing fields",otherFields:"Other"},units:{s:"seconds",ms:"milliseconds"},suggestionDescriptions:{anySpan:"Apply the filter to any span",rootSpan:"Apply the filter to a root span"},filterSpanTarget:{anySpan:"for any span",rootSpan:"for root span"},maximumLengthErrors:{operation:"Maximum allowed length of operation name is %s.",service:"Maximum allowed length of service name is %s.",tagValue:"Maximum allowed length of tag's value is %s."},invalidNumericValue:"Invalid numeric value.",numericValueOutOfRange:"Numeric value is out of range."},traceFilterSelectorLabel:"Select",filled:"filled",outliersThreshold:{bounds:"The threshold band can be specified only for one time series.",legendLabel:"%s_threshold"},tooManySeriesOnColumnOrBarChart:"There are too many series to display per quant. Only the first 10 series will be shown. Choose a different visualization or narrow your query for optimal results.",recommendedDashboards:{title:"Recommended Dashboards",info:"Opens dashboards which have similar metadata values in a new tab",showAll:"Show all",noResults:"We couldn't find any dashboards with similar metadata"},relatedLogs:{title:"Related Logs",info:"Opens logs related to these metadata values in a new tab",types:{AllLogs:"All Logs",ErrorLogs:"Error Logs",ErrorLogsWithLogReduce:"Error Signatures"},noResults:{beforeLink:"No logs linked to this data. Go to the ",link:"fields page",afterLink:" to set up related logs."}},chartTooltip:{thresholdLabel:"threshold"},queryEditorKeyboardBindingTooltip:{title:"Navigating with keyboard?",description:"Weve got some shortcuts to make it easier to navigate around the query builder.",hint:"To see the full list, hit",closeButton:"Got it!",newQueryRow:"New query row",deleteQueryRow:"Delete query row",navigateRows:"Navigate between query rows",hideRow:"Hide query row",switchModes:"Switch to advanced/basic mode",addOperator:"Add operator"},invalidShortcodeInstance:"Invalid shortcode instance",codeAutocomplete:{Key:"Key",ValueWithinKey:"Value",Operators:"Operators",Parameters:"Parameters",operatorsParams:{fillmissingFixed:"fixed (enter a numerical value)",eval:'type in a mathematical expression using "_value" as a placeholder for each datapoint\n(e.g. "_value * 100")',parse:"enter fields to parse",numericalValue:"enter a numerical value",topBottom:'enter a complex function (e.g. "avg + 3 * stddev")',timeDuration:'enter a time interval (e.g. "10s")',underscoreValue:"_value",over:"over"}},display:"Display",lineChart:"Line",areaChart:"Area",columnChart:"Column",barChart:"Bar",pieChart:"Pie",funnelChart:"Funnel",heatmapChart:"Heatmap",scatterChart:"Scatter",bubbleChart:"Bubble",timeRangeSaveLabel:"Set as dashboard's default time range",panelTimeRangeSaveLabel:"Set as panel's default time range",autoRefresh:{off:"Off",hintText:"Refresh every",apply:"Apply",refreshHintText:"Refreshing every %s"},timeRangeDefault:{moreOptions:"More options",setAsDefault:"Set as default",revertToDefault:"Revert to default",header:"Set as dashboard default time",content:"Some dashboard panels might have individual time ranges set. If you want the dashboard time range to apply to all panels, check the box below. Otherwise hit Set as Default to proceed.",override:"Override custom panel time ranges",setAsPanelDefault:"Set as panel default",dialogCancel:"Cancel"},errors:{xy:{numericFields:"XY chart could not be rendered with non-numeric fields.",minKeys:"Insufficient number of groupBy fields found to render the selected XY chart."},mapCannotBeLoaded:"Map cannot be loaded this time","logs:unspecified_error":"Query execution failed.",incompatibleQuery:"The data from your query cannot be plotted in the panel type selected. Please change the panel type.",incompatibleQueries:"The data from one of your queries cannot be plotted in the panel type selected. Please change the panel type.",incompatibleChartType:"The data from your query cannot be plotted in the chart type selected. Please change the chart type.",primaryQueryUnavailable:"A metric used in the primary map visualization is unavailable. The primary map will be hidden until you adjust your query or select a different metric to use.",secondaryQueryUnavailable:"A metric used in the secondary map visualization is unavailable. The secondary map will be hidden until you adjust your query or select a different metric to use.",bothQueriesUnavailable:"Metrics used in both map visualizations are unavailable. The map will be hidden until you adjust your query or select a different metric to use.",heatmapInvalidBuckets:"Current bucket configuration would produce too many buckets, so it cannot be rendered this time, please adjust configuration.",zeroValue:"The data from your query cannot be plotted in the panel type selected. The query results in a single value of zero."},zoomingEmptyArea:"You cannot zoom into an area that does not contain data.",hints:{navigationText:"View next tip",addOperatorToQuery:"Add operator to query",singleQueryAggregationHintWithDimension:"Tip: Group your data by <strong>%(dimension)s</strong> using <strong>%(operator)s</strong> to produce more readable result.",singleQueryAggregationHintWithoutDimension:"Tip: Group your data using <strong>%s</strong> to see the result.",singleQueryWhereOperatorHint:"Tip: When using the operator <strong>where</strong>, it is better to use <strong><</strong> or <strong>></strong> as the qualifier. Your metrics data is automatically rounded, and so no results may return.",multiQueryAggregationHintWithDimension:"Tip: In <strong>query #%(queryId)s</strong>, group your data by <strong>%(dimension)s</strong> using <strong>%(operator)s</strong> to produce more readable result.",multiQueryAggregationHintWithoutDimension:"Tip: In <strong>query #%s</strong>, group your data using <strong>%s</strong> to see the result.",multiQueryWhereOperatorHint:"Tip: In <strong>query #%(queryId)s</strong>, when using the operator <strong>where</strong>, it is better to use <strong><</strong> or <strong>></strong> as the qualifier. Your metrics data is automatically rounded, and so no results may return."},metricSearch:"Open in Metrics",unifiedMonitorCreationErrorMessages:{compositeQueriesNotSupported:"Composite queries cannot be used for creating monitors.",compositeQueriesMissingReference:"Some of the queries being used in the composite query are not defined."},changesRetentionDialog:{increaseRetention:{destructiveMessage:e=>`If you perform this action, the retention period will be increased to ${e} days.`,body:(e,t,i)=>`\n        You are increasing the retention period of your\n          <b>${e}</b> to ${t} days.\n          <br />\n          <br />\n          At your current ingestion rate, this increased retention will consume an additional ${i} of storage.\n          <br />\n          <br />\n          Check the <b>Account Overview</b> page to see if this will increase your storage requirements beyond your subscription capacity. If it does, contact your Account Manager for upgrade information.\n        `,body_no_capacity:(e,t)=>`You are increasing the retention period of your\n      <b>${e}</b> to ${t} days.\n      <br />\n      <br />\n      Increased retention will consume additional storage based on your ingestion rate\n      <br />\n      <br />\n      Check the <b>Account Overview</b> page to see if this will increase your storage requirements beyond your subscription capacity. If it does, contact your Account Manager for upgrade information.\n      `},decreaseRetention:{destructiveMessage:e=>`If you perform this action, the retention period will be decreased to ${e} days.`,body:(e,t,i)=>`\n          You are about to decrease the retention period of\n          <b>${e}</b> ${t} to ${i} days.\n        `,applyInGraceTime:{title:e=>`Apply change in ${e}`,description:(e,t,i)=>`Data in this index between ${e} and ${t} will be deleted after ${i} and this change can be undone until then.`},applyNow:{title:"Apply change now",description:(e,t)=>`Data in this index between ${e} and ${t} will be deleted immediately and this change can't be undone.`}},retentionPeriodDestructiveFeedbackText:{default:"Confirm"},confirm:"CONFIRM",confirmation:"Confirmation"},dateUtil:{timeDuration:{days:e=>e>1?"days":"day",hours:e=>e>1?"hours":"hour",minutes:e=>e>1?"minutes":"minute"},and:"and"},retentionWarning:(e,t,i,r,n)=>`In ${e}, the retention period of this index will be reduced to ${t} ${n?`and data between ${i} and ${r}\n    will be deleted`:""}`,resetRetention:e=>`Reset retention to ${e}`,createIAMRole:{manualIAMRoleHeading:"Manually create a role on your AWS console using the following information:",bucketNameMissing:"Enter S3 bucket name first",copyText:"Copy",downloadText:"Download",openAWSConsoleText:"AWS CloudFormation Console",accountId:"Account ID:",externalId:"External ID:"},charts:{"axisScaleTypeOption-linear":"Linear","axisScaleTypeOption-logarithmic":"Logarithmic",axisRangeLabel:"Range",axisRangeMaximumLabel:"to",axisRangeMaximumPlaceholder:"Maximum",chartAxisScaleTypeFieldLabel:"Scale",tooltips:{total:"Total: ",bucket:"Bucket",count:"Count"}}},Rt={};function Dt(){r.i18nUtil.register({en:{sharedAnalytics:It},ja:{sharedAnalytics:Rt}})}const Ot={en:{},ja:{}},Nt={cardHeader:"cardHeader___AhcTU",headerContainer:"headerContainer___ISc5e",cardContent:"cardContent___jPChi",noPadding:"noPadding___JZFVE",previewTableContainer:"previewTableContainer___U41nn",tableRow:"tableRow___wEhSe",csvExportButton:"csvExportButton___jpD4N",valueFromFilters:"valueFromFilters___LiXrA",timeSeriesCount:"timeSeriesCount___-Lx-6"},Mt="shortcut___nLwNV",kt=({label:e,shortcut:t,disableCentering:i=!1})=>n.createElement(n.Fragment,null,n.createElement("p",null,e),t&&n.createElement("p",{className:i?void 0:Mt},"(",t,")"));var Lt=(e=>(e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Minus=189]="Minus",e[e.Plus=187]="Plus",e[e.Slash=191]="Slash",e[e.Backslash=220]="Backslash",e))(Lt||{}),Pt=(e=>(e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e))(Pt||{}),Ft=(e=>(e[e.a=65]="a",e[e.b=66]="b",e[e.c=67]="c",e[e.d=68]="d",e[e.e=69]="e",e[e.f=70]="f",e[e.g=71]="g",e[e.h=72]="h",e[e.i=73]="i",e[e.j=74]="j",e[e.k=75]="k",e[e.l=76]="l",e[e.m=77]="m",e[e.n=78]="n",e[e.o=79]="o",e[e.p=80]="p",e[e.q=81]="q",e[e.r=82]="r",e[e.s=83]="s",e[e.t=84]="t",e[e.u=85]="u",e[e.v=86]="v",e[e.w=87]="w",e[e.x=88]="x",e[e.y=89]="y",e[e.z=90]="z",e))(Ft||{}),Ut=(e=>(e.Alt="Alt",e.Shift="Shift",e.Ctrl="Ctrl",e.Meta="Meta",e))(Ut||{});const Vt=xt(xt(xt(xt({},Ut),Ft),Lt),Pt),Bt=new Map([[Vt.Alt,{default:"alt",mac:"option"}],[Vt.Meta,{default:"win",mac:""}],[Vt.Minus,{default:"-"}],[Vt.Plus,{default:"+"}],[Vt.Slash,{default:"/"}]]),$t=e=>{var t,i,r;const n="Mac OS"===(null==(r=null==(i=null==(t=globalThis.$)?void 0:t.ua)?void 0:i.os)?void 0:r.name);if(Bt.has(e)){const t=Bt.get(e);return n&&t.mac||t.default}return"number"==typeof e?(0,s.Z)(Vt)[e].toLowerCase():e.toLowerCase()},Ht=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(Array.isArray(t)?t:Array.from(t)).map($t).join(" ")]))),Wt={keyboardInput:"keyboardInput___BdA7X",codeSpace:"codeSpace___Oy70C"},qt={keyboardInput:"keyboardInput___elCIn",codeSpace:"codeSpace___AtlVV"},jt=(0,a.withCssModulesTheme)({brandLight:qt,brandDark:Wt},qt,(({inputs:e,styles:t})=>n.createElement("span",{className:t.keyboardInput},e.map(((e,i)=>e?n.createElement("kbd",{key:e+i},e):n.createElement("span",{key:i,className:t.codeSpace})))))),Qt="tooltip___ogyrh",zt="card___tR6E4",Gt="headerIconCloseColumn___a2xED",Kt="cardContent___xt2lc",Yt="bindingList___-CCrR",Zt="bindingListSubtitle___Qtu7Z",Xt="keyboardInputColumn___hp7-1",Jt="commentColumn___Mz1HD",ei="actionBar___zWfpx",ti=({onClose:e})=>{const t=(0,n.useMemo)((()=>{const[e,t,i,n,a]=[Vt.Alt,Vt.Shift,Vt.Plus,Vt.Minus,Vt.Slash].map($t);return[{bindings:[e,t,i],comment:r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.addOperator")},{bindings:[e,i],comment:r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.newQueryRow")},{bindings:[e,n],comment:r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.deleteQueryRow")},{bindings:[e,"","",e,""],comment:r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.navigateRows")},{bindings:[e,a],comment:r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.hideRow")},{bindings:[e,t,"a"],comment:r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.switchModes")}]}),[]),{onCloseHandler:i,closeBtnRef:s}=(({onClose:e})=>{const t=(0,n.useRef)(document.activeElement),i=(0,n.useRef)(null),r=(0,n.useCallback)((()=>{var i;e(),null==(i=t.current)||i.focus()}),[e]);return(0,n.useEffect)((()=>{var e;null==(e=i.current)||e.focus()}),[i]),{onCloseHandler:r,closeBtnRef:i}})({onClose:e});return n.createElement("div",{className:Qt},n.createElement(a.Card,{className:zt},n.createElement(a.HeaderBar,null,n.createElement(a.HeaderBar.Row,null,n.createElement(a.HeaderBar.Column,{fullSize:!0},n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.title"))),n.createElement(a.HeaderBar.Column,{className:Gt},n.createElement(a.IconButton,{icon:a.IconName.X,size:"small",onClick:i})))),n.createElement(a.Card.Content,{padded:!0,className:Kt},n.createElement(a.Text,{noWrap:!1,className:Zt},r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.description")),n.createElement("table",{className:Yt},n.createElement("tbody",null,t.map((({bindings:e,comment:t},i)=>n.createElement("tr",{key:i},n.createElement("td",{className:Xt},n.createElement(jt,{inputs:e})),n.createElement("td",{className:Jt},t)))))),n.createElement(a.Text,{variant:"textHeavy"},r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.hint")," ",n.createElement(jt,{inputs:["?"]})),n.createElement("div",{className:ei},n.createElement(a.Button,{color:"primary",size:"small",onClick:i,ref:s},r.i18nUtil.get("sharedAnalytics.queryEditorKeyboardBindingTooltip.closeButton"))))))};var ii,ri;var ni=ai;function ai(e){var t=this;if(t instanceof ai||(t=new ai),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var i=0,r=arguments.length;i<r;i++)t.push(arguments[i]);return t}function si(e,t,i){var r=t===e.head?new ci(i,null,t,e):new ci(i,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function oi(e,t){e.tail=new ci(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function li(e,t){e.head=new ci(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ci(e,t,i,r){if(!(this instanceof ci))return new ci(e,t,i,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}ai.Node=ci,ai.create=ai,ai.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,i=e.prev;return t&&(t.prev=i),i&&(i.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=i),e.list.length--,e.next=null,e.prev=null,e.list=null,t},ai.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},ai.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},ai.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)oi(this,arguments[e]);return this.length},ai.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)li(this,arguments[e]);return this.length},ai.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},ai.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},ai.prototype.forEach=function(e,t){t=t||this;for(var i=this.head,r=0;null!==i;r++)e.call(t,i.value,r,this),i=i.next},ai.prototype.forEachReverse=function(e,t){t=t||this;for(var i=this.tail,r=this.length-1;null!==i;r--)e.call(t,i.value,r,this),i=i.prev},ai.prototype.get=function(e){for(var t=0,i=this.head;null!==i&&t<e;t++)i=i.next;if(t===e&&null!==i)return i.value},ai.prototype.getReverse=function(e){for(var t=0,i=this.tail;null!==i&&t<e;t++)i=i.prev;if(t===e&&null!==i)return i.value},ai.prototype.map=function(e,t){t=t||this;for(var i=new ai,r=this.head;null!==r;)i.push(e.call(t,r.value,this)),r=r.next;return i},ai.prototype.mapReverse=function(e,t){t=t||this;for(var i=new ai,r=this.tail;null!==r;)i.push(e.call(t,r.value,this)),r=r.prev;return i},ai.prototype.reduce=function(e,t){var i,r=this.head;if(arguments.length>1)i=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,i=this.head.value}for(var n=0;null!==r;n++)i=e(i,r.value,n),r=r.next;return i},ai.prototype.reduceReverse=function(e,t){var i,r=this.tail;if(arguments.length>1)i=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,i=this.tail.value}for(var n=this.length-1;null!==r;n--)i=e(i,r.value,n),r=r.prev;return i},ai.prototype.toArray=function(){for(var e=new Array(this.length),t=0,i=this.head;null!==i;t++)e[t]=i.value,i=i.next;return e},ai.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,i=this.tail;null!==i;t++)e[t]=i.value,i=i.prev;return e},ai.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var i=new ai;if(t<e||t<0)return i;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;for(;null!==n&&r<t;r++,n=n.next)i.push(n.value);return i},ai.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var i=new ai;if(t<e||t<0)return i;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,n=this.tail;null!==n&&r>t;r--)n=n.prev;for(;null!==n&&r>e;r--,n=n.prev)i.push(n.value);return i},ai.prototype.splice=function(e,t,...i){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;var a=[];for(r=0;n&&r<t;r++)a.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(r=0;r<i.length;r++)n=si(this,n,i[r]);return a},ai.prototype.reverse=function(){for(var e=this.head,t=this.tail,i=e;null!==i;i=i.prev){var r=i.prev;i.prev=i.next,i.next=r}return this.head=t,this.tail=e,this};try{(ri||(ri=1,ii=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),ii)(ai)}catch(I_){}const di=ni,ui=Symbol("max"),pi=Symbol("length"),hi=Symbol("lengthCalculator"),mi=Symbol("allowStale"),gi=Symbol("maxAge"),yi=Symbol("dispose"),vi=Symbol("noDisposeOnSet"),fi=Symbol("lruList"),_i=Symbol("cache"),Si=Symbol("updateAgeOnGet"),bi=()=>1;const Ei=(e,t,i)=>{const r=e[_i].get(t);if(r){const t=r.value;if(Ti(e,t)){if(Ci(e,r),!e[mi])return}else i&&(e[Si]&&(r.value.now=Date.now()),e[fi].unshiftNode(r));return t.value}},Ti=(e,t)=>{if(!t||!t.maxAge&&!e[gi])return!1;const i=Date.now()-t.now;return t.maxAge?i>t.maxAge:e[gi]&&i>e[gi]},xi=e=>{if(e[pi]>e[ui])for(let t=e[fi].tail;e[pi]>e[ui]&&null!==t;){const i=t.prev;Ci(e,t),t=i}},Ci=(e,t)=>{if(t){const i=t.value;e[yi]&&e[yi](i.key,i.value),e[pi]-=i.length,e[_i].delete(i.key),e[fi].removeNode(t)}};class Ai{constructor(e,t,i,r,n){this.key=e,this.value=t,this.length=i,this.now=r,this.maxAge=n||0}}const wi=(e,t,i,r)=>{let n=i.value;Ti(e,n)&&(Ci(e,i),e[mi]||(n=void 0)),n&&t.call(r,n.value,n.key,e)};var Ii=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[ui]=e.max||1/0;const t=e.length||bi;if(this[hi]="function"!=typeof t?bi:t,this[mi]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[gi]=e.maxAge||0,this[yi]=e.dispose,this[vi]=e.noDisposeOnSet||!1,this[Si]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[ui]=e||1/0,xi(this)}get max(){return this[ui]}set allowStale(e){this[mi]=!!e}get allowStale(){return this[mi]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[gi]=e,xi(this)}get maxAge(){return this[gi]}set lengthCalculator(e){"function"!=typeof e&&(e=bi),e!==this[hi]&&(this[hi]=e,this[pi]=0,this[fi].forEach((e=>{e.length=this[hi](e.value,e.key),this[pi]+=e.length}))),xi(this)}get lengthCalculator(){return this[hi]}get length(){return this[pi]}get itemCount(){return this[fi].length}rforEach(e,t){t=t||this;for(let i=this[fi].tail;null!==i;){const r=i.prev;wi(this,e,i,t),i=r}}forEach(e,t){t=t||this;for(let i=this[fi].head;null!==i;){const r=i.next;wi(this,e,i,t),i=r}}keys(){return this[fi].toArray().map((e=>e.key))}values(){return this[fi].toArray().map((e=>e.value))}reset(){this[yi]&&this[fi]&&this[fi].length&&this[fi].forEach((e=>this[yi](e.key,e.value))),this[_i]=new Map,this[fi]=new di,this[pi]=0}dump(){return this[fi].map((e=>!Ti(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[fi]}set(e,t,i){if((i=i||this[gi])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");const r=i?Date.now():0,n=this[hi](t,e);if(this[_i].has(e)){if(n>this[ui])return Ci(this,this[_i].get(e)),!1;const a=this[_i].get(e).value;return this[yi]&&(this[vi]||this[yi](e,a.value)),a.now=r,a.maxAge=i,a.value=t,this[pi]+=n-a.length,a.length=n,this.get(e),xi(this),!0}const a=new Ai(e,t,n,r,i);return a.length>this[ui]?(this[yi]&&this[yi](e,t),!1):(this[pi]+=a.length,this[fi].unshift(a),this[_i].set(e,this[fi].head),xi(this),!0)}has(e){if(!this[_i].has(e))return!1;const t=this[_i].get(e).value;return!Ti(this,t)}get(e){return Ei(this,e,!0)}peek(e){return Ei(this,e,!1)}pop(){const e=this[fi].tail;return e?(Ci(this,e),e.value):null}del(e){Ci(this,this[_i].get(e))}load(e){this.reset();const t=Date.now();for(let i=e.length-1;i>=0;i--){const r=e[i],n=r.e||0;if(0===n)this.set(r.k,r.v);else{const e=n-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[_i].forEach(((e,t)=>Ei(this,t,!1)))}};const Ri=new Map([["altKey",Vt.Alt],["metaKey",Vt.Meta],["ctrlKey",Vt.Ctrl],["shiftKey",Vt.Shift]]);class Di{constructor(){this.activeBindings=[],this.activeSequences=[],this.lastKeys=new Ii({max:10,maxAge:6e4}),this.onKeyboardAction=e=>{var t;const i=Di.extractShortcutFrom(e);for(const t of this.activeBindings)(0,o.Z)(t.keys,i)&&(e.preventDefault(),t.action.call(null));const r=[...null!=(t=this.lastKeys.get("keys"))?t:[],e.keyCode];this.lastKeys.set("keys",r);for(const e of this.activeSequences){const t=e.keys.length,i=(0,l.Z)(r,t);(0,o.Z)(e.keys,i)&&(e.action.call(null),this.lastKeys.reset())}}}static extractShortcutFrom(e){const t=new Set([e.keyCode]);return Ri.forEach(((i,r)=>{e[r]&&t.add(i)})),t}install(){document.addEventListener("keydown",this.onKeyboardAction)}uninstall(){document.removeEventListener("keydown",this.onKeyboardAction)}addBinding(e){this.activeBindings.push(e)}removeBinding(e){this.activeBindings=this.removeItem(this.activeBindings,e)}addSequence(e){this.activeSequences.push(e)}removeSequence(e){this.activeSequences=this.removeItem(this.activeSequences,e)}removeItem(e,t){return e.filter((e=>!(0,o.Z)(e,t)))}}const Oi=new Di;Oi.install();const Ni=e=>{(0,n.useEffect)((()=>(Oi.addBinding(e),()=>{Oi.removeBinding(e)})),[e])},Mi=e=>{(0,n.useEffect)((()=>(Oi.addSequence(e),()=>{Oi.removeSequence(e)})),[e])};var ki=(e=>(e.queryId="queryId",e.min="min",e.max="max",e.current="current",e.avg="avg",e.sum="sum",e.metric="metric",e.leftCurlyBrace="leftCurlyBrace",e.rightCurlyBrace="rightCurlyBrace",e))(ki||{}),Li=(e=>(e.QUERY_ID="queryId",e.METRIC="metric",e.MIN="min",e.MAX="max",e.LATEST="latest",e.AVG="avg",e.SUM="sum",e.COUNT="count",e.META_DATA="metaData",e))(Li||{});const Pi={undraggable:!0,isResizable:!1},Fi={queryId:Ct(xt({},Pi),{field:"queryId",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.queryId.title",valueFormatter:e=>`#${e.value}`}),metric:Ct(xt({},Pi),{field:"metric",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.metrics.title",valueGetter:e=>e.data.metaData.metric}),min:Ct(xt({},Pi),{field:"min",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.min.title",valueGetter:e=>e.data.aggregateInfo.min}),max:Ct(xt({},Pi),{field:"max",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.max.title",valueGetter:e=>e.data.aggregateInfo.max}),latest:Ct(xt({},Pi),{field:"latest",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.latest.title",valueGetter:e=>e.data.aggregateInfo.latest}),avg:Ct(xt({},Pi),{field:"avg",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.avg.title",valueGetter:e=>e.data.aggregateInfo.avg}),sum:Ct(xt({},Pi),{field:"sum",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.sum.title",valueGetter:e=>e.data.aggregateInfo.sum}),count:Ct(xt({},Pi),{field:"count",headerName:"sharedAnalytics.metricsPreviewTableV2.columns.count.title",valueGetter:e=>e.data.aggregateInfo.count}),metaData:Ct(xt({},Pi),{field:"",headerName:"",valueGetter:e=>e.data.metaData[e.colDef.field]})},Ui=["min","max","latest","avg","sum","count"],Vi=/\"/g,Bi=(e,t)=>{var i;const{aggregateInfoKeys:n,metaDataKeys:a,x:s}=e,o=["Query"];return(null!=(i=t.hiddenColumns)?i:[]).includes("metric")||o.push(r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.columns.metrics.title")),o.push(...a,...s.map((e=>new Date(e).toISOString())),...n),o},$i=(e,{aggregateInfoKeys:t,metaDataKeys:i,x:r},n)=>e.map((({aggregateInfo:e,dataPoints:a,metaData:s,queryId:o})=>{var l;const c=(null!=a?a:[]).reduce(((e,t)=>(null!==t.x&&(e[t.x]=String(t.y)),e)),{}),d=[String(o)];return(null!=(l=n.hiddenColumns)?l:[]).includes("metric")||d.push((null==s?void 0:s.metric)||""),d.push(...i.map((e=>{var t,i;return null!=(i=null==(t=s[e])?void 0:t.replace(Vi,'""'))?i:""})),...r.map((e=>{var t;return null!=(t=c[e])?t:""})),...t.map((t=>{var i;return null!=(i=String(e[t]))?i:""}))),d})),Hi={getFileContents:(0,oe.default)(((e,t={})=>{const i=((e,t)=>{const i=e.reduce(((e,{metaData:i,dataPoints:r})=>({metaDataKeys:Object.keys(i).filter((e=>{var i;return!(null!=(i=t.hiddenColumns)?i:[]).includes(e)})).reduce(((e,t)=>e.add(t)),e.metaDataKeys),x:t.excludeDataPoints?e.x:(null!=r?r:[]).reduce(((e,t)=>null===t.x?e:e.add(t.x)),e.x)})),{metaDataKeys:new Set,x:new Set});return i.metaDataKeys.delete("metric"),{aggregateInfoKeys:Ui.filter((e=>{var i;return!(null!=(i=t.hiddenColumns)?i:[]).includes(e)})),metaDataKeys:[...i.metaDataKeys].sort(((e,t)=>e.localeCompare(t,"en",{sensitivity:"base"}))),x:[...i.x].sort()}})(e,t);return[Bi(i,t),...$i(e,i,t)].map((e=>e.map((e=>`"${e}"`)).join(","))).concat("").join("\n")}))},Wi={cellClass:"noPadding___-Rx6d"},{withSpan:qi,streamWithSpan:ji,instrumentActions:Qi}=(0,de.createTelemetry)({namespace:"SharedAnalytics"}),zi=e=>{if("*"===e)return[];const t=e.replace(/\*+/g,"*"),i=[];let r="";for(const e of t)"?"===e?(i.push({type:"string",value:r}),i.push({type:"any-character-wildcard"}),r=""):"*"===e?(i.push({type:"string",value:r}),i.push({type:"zero-or-more-characters-wildcard"}),r=""):r+=e;return r&&i.push({type:"string",value:r}),i},Gi=[{field:ki.min,headerName:ki.min},{field:ki.max,headerName:ki.max},{field:ki.current,headerName:ki.current},{field:ki.avg,headerName:ki.avg},{field:ki.sum,headerName:ki.sum}].map((e=>({headerName:e.headerName,field:"",children:[e]}))),Ki=(e,t,i)=>{const n={paddingLeft:"10px !important"};return[{headerName:r.i18nUtil.get("sharedAnalytics.newMetricsPreviewTable.timeSeries"),field:"",children:[...i?[{field:ki.queryId,headerName:"",cellStyle:n}]:[],{field:ki.metric,headerName:ki.metric,customHTMLCellRenderer:{component:({value:e})=>`<span title="${e}">${e}</span>`},cellStyle:i?void 0:n,onCellClicked:e=>{const i=t(`${e.value}`)+15;e.columnApi.setColumnWidth(ki.metric,i)}},{field:ki.leftCurlyBrace,headerName:"",maxWidth:10,suppressSizeToFit:!0},...e,{field:ki.rightCurlyBrace,headerName:"",maxWidth:20,suppressSizeToFit:!0}]},...Gi]},Yi=(0,oe.default)((e=>void 0===e.queryData?[]:e.queryData.filters.filter((e=>"NewMetricsQueryFilterByPair"===e.type)).map((e=>e.key.toLowerCase())))),Zi=(0,oe.default)(((e,t)=>{var i,r;const n=null!=(i=null==e?void 0:e.filters.filter((e=>"NewMetricsQueryFilterByPair"===e.type)))?i:[],a=new Set(null!=(r=n.map((e=>`${e.key.toLowerCase()}=${e.value.toLowerCase()}`)))?r:[]),s=(e=>e.filter((e=>(e=>(!e.startsWith('"')||!e.endsWith('"'))&&(e.includes("?")||e.includes("*")))(e.value))).map((e=>({key:e.key.toLowerCase(),parsedQueryTokens:zi(e.value.toLowerCase())}))))(n);return e=>{if(0===a.size||!e.value)return"";const{key:i,value:r}=e.value;return r&&(a.has(`${i.toLowerCase()}=${r.toLowerCase()}`)||((e,t,i)=>e.length>0&&e.some((e=>e.key===t.toLowerCase()&&((e,t)=>{if(!t.length)return!0;let i=0,r=!1;for(const n of t)switch(n.type){case"any-character-wildcard":if(i+1>=e.length)return!1;i+=1;break;case"zero-or-more-characters-wildcard":r=!0;break;case"string":const t=n.value;let a;if(r){const r=e.indexOf(t,i);if(-1===r)return!1;i=r,a=e.substring(r,r+t.length)}else a=e.substring(i,i+t.length);if(a!==t)return!1;i+=t.length,r=!1}return!(!r&&i!==e.length)})(i.toLowerCase(),e.parsedQueryTokens))))(s,i,r))?t.valueFromFilters:""}})),Xi=(0,r.memoize)((e=>(0,r.getSanitizedMessage)("%s",[e])),{maxNumberOfResults:1e3}),Ji=(0,r.memoize)((e=>(0,r.encodeAttr)(e)),{maxNumberOfResults:1e3}),er=({key:e,isLastColumn:t,getTextWidth:i})=>({component:r=>{const n=r.data[e];if(!n)return"";const a=Xi(n.key),s=Xi(n.value),o=`${n.key}=${n.value},`,l=i(o)>198;return`<span style="${l?"\n          display: flex;\n        ":""}"><span style="${l?"\n          flex: 1;\n          max-width: max-content;\n          text-overflow:ellipsis;\n          display: inline-block;\n          overflow: hidden;\n        ":""}" title="${l?`${Ji(n.key)}=${Ji(n.value)}`:""}"><b>${a}=</b>"${s}"</span><span>${t?",":""}</span></span>`}}),tr=(0,oe.default)(((e,t)=>{var i;const r=new Set(e.flatMap((({metaData:e})=>Object.keys(e)))),n=new Map;for(const a of r)for(const{metaData:r}of e){const e=r[a];if(void 0===e)continue;const s=t(`${a}=${e}`)+15,o=Math.max(null!=(i=n.get(a))?i:Number.NEGATIVE_INFINITY,s);n.set(a,o)}return n})),ir=({previewParameters:e,timeSeriesData:t,hiddenQueryKeys:i,getTextWidth:r,styles:n,includeQueryKey:a})=>qi("getDataAndColumns",(()=>{if(!e||!t)return{data:[],columns:[]};const s={},o=t.filter((e=>!i.includes(e.queryId))),l=tr(o,r);return{data:(0,d.Z)(o,(t=>t.queryId===e.rowKey?0:1)).map((t=>{var i;const a={[ki.queryId]:`#${t.queryId}`,[ki.metric]:t.metaData.metric||"",[ki.min]:t.aggregateInfo.min,[ki.max]:t.aggregateInfo.max,[ki.current]:t.aggregateInfo.latest,[ki.avg]:t.aggregateInfo.avg,[ki.sum]:t.aggregateInfo.sum,[ki.leftCurlyBrace]:"{",[ki.rightCurlyBrace]:"}"},o=((e,t)=>{const i=Yi(t),r=Object.entries((0,c.Z)(e.metaData,"metric")).filter((e=>void 0!==e[1]));return(0,d.Z)(r,(([e])=>`${i.includes(e.toLowerCase())?0:1}${e}`))})(t,e);for(let t=0;t<o.length;t++){const[c,d]=o[t];a[c]={key:c,value:d},s[c]||(s[c]={field:c,headerName:"",width:Math.min(200,null!=(i=l.get(c))?i:Number.POSITIVE_INFINITY),customHTMLCellRenderer:er({key:c,getTextWidth:r,isLastColumn:Boolean(o[t+1])}),cellClass:Zi(e.queryData,n),onCellClicked:e=>{const{value:t}=e.value,i=r(`${c}=${t}`)+15;e.columnApi.setColumnWidth(c,i)}})}return a})),columns:Ki(Object.values(s),r,a)}})),rr={cardHeader:"cardHeader___AMgLJ",headerContainer:"headerContainer___4VIyY",cardContent:"cardContent___7YOlZ",noPadding:"noPadding___V-ZhF",previewTableContainer:"previewTableContainer___tuT34",tableRow:"tableRow___dE5HH",csvExportButton:"csvExportButton___Au9c7",valueFromFilters:"valueFromFilters___WBUyG",timeSeriesCount:"timeSeriesCount___0hkvW"},nr=50,ar=(0,oe.default)((()=>document.createElement("canvas"))),sr=({previewParameters:e,fetchStatus:t,timeSeriesData:i,hiddenQueryKeys:s=[],onDidRender:o,styles:l,hideHeader:c,includeQueryKey:d=!0,gridOptions:u={},classNames:p={}})=>{const h=(0,n.useCallback)((()=>{if(!i||0===i.length)return;(0,ce.showCasualNotification)({message:r.i18nUtil.get("sharedAnalytics.csvExport.toastMessage"),variant:"success"});const e=`metrics-results-${(new Date).toISOString()}.csv`.replace("Z","-0000");(0,r.downloadText)(e,Hi.getFileContents(i))}),[i]),m=(0,n.useMemo)((()=>(0,r.memoize)((e=>{const t=(0,r.ensureDefined)(ar().getContext("2d"));return t.font="bold 13px Roboto",Math.ceil(t.measureText(e).width)}),{maxNumberOfResults:1200})),[]),g=(0,n.useRef)(),{data:y,columns:v}=ir({previewParameters:e,timeSeriesData:i,hiddenQueryKeys:s,getTextWidth:m,styles:l,includeQueryKey:d});(({data:e,tableMethods:t})=>{const i=(0,r.usePrevious)(e);(0,n.useEffect)((()=>{e.length>0&&e!==i&&(null==t||t.autoSizeColumns([ki.leftCurlyBrace]))}),[t,e,i])})({data:y,tableMethods:g.current});const f=(0,n.useMemo)((()=>xt({applyColumnDefOrder:!0,density:"dense",enableSizeColumnsToFit:!1,enableSizeColumnsToContent:!1,noScrollOnPageChange:!0,suppressRowClickSelection:!0,suppressFieldDotNotation:!0,groupSelectsChildren:!1,showLoadingOverlay:t===le.FetchStatus.Loading,headerHeight:0,defaultColDef:Wi,rowBuffer:5,rowClass:l.tableRow,enableSorting:!1,onTableInit:e=>{e.autoSizeColumns([ki.leftCurlyBrace]),g.current=e,null==o||o("ag-grid")},pagination:!0,paginationPageSize:nr,suppressColumnVirtualisation:!1},u)),[t,l.tableRow,o,u]);return n.createElement(a.Card,{"data-sumo-test":`previewTable_${t}`,className:p.card},!c&&n.createElement(a.Card.Header,{className:l.cardHeader},n.createElement("div",{className:l.headerContainer},e&&n.createElement(n.Fragment,null,n.createElement(a.Text,{variant:"text",className:l.timeSeriesCount,"data-sumo-test":`previewTable_timeSeriesCount_${y.length}`},r.i18nUtil.get("sharedAnalytics.newMetricsPreviewTable.title",y.length)),n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.csvExport.tooltip")},n.createElement(a.IconButton,{className:l.csvExportButton,disabled:!i||0===i.length,icon:a.IconName.Export,onClick:h}))))),n.createElement(a.Card.Content,{className:l.cardContent},n.createElement("div",{"data-sumo-test":`previewTable_${t}`,className:l.previewTableContainer},n.createElement(a.LoaderBar,{visible:[le.FetchStatus.PollingInProgress,le.FetchStatus.Reloading].includes(t),position:"absolute"}),n.createElement(a.Table,{columnOptions:v,data:y,gridOptions:f}))))},or=(0,a.withCssModulesTheme)({brandLight:Nt,brandDark:rr},Nt,sr);function lr(e,t){const i=e.toLowerCase().indexOf(t.toLowerCase());return-1===i?[{text:e,matches:!1}]:[{text:e.substring(0,i),matches:!1},{text:e.substring(i,i+t.length),matches:!0},...lr(e.substring(i+t.length),t)].filter((({text:e})=>Boolean(e)))}const cr=(e,t)=>e.length>=t.length&&e.toLowerCase().includes(t),dr=(0,r.memoize)((e=>(0,r.getSanitizedMessage)("%s",[e])),{maxNumberOfResults:1e3});function ur(e,t){var i;const n=xt({},Fi[e]);t.translateHeader&&(n.headerName=r.i18nUtil.get(n.headerName));{n.minWidth=80,n.isResizable=!0;const e=7.3*(null!=(i=t.maxCharCount)?i:0)+32+16;n.width=Math.min(Math.max(80,e),200)}return t.searchPhrase&&t.matchesSearchPhrase&&(n.customHTMLCellRenderer={component:({value:e,searchPhrase:t})=>{const i=e?String(e):"";if(!e)return"";const r=t?t.toLowerCase().trim():"";return!r||i.length<r.length?dr(i):lr(i,r).map((({text:e,matches:t})=>{const i=dr(e);return t?`<strong class="text-matches-search">${i}</strong>`:i})).join("")},props:e=>({value:e.value,searchPhrase:null==e?void 0:e.context.searchPhrase})}),n}const pr=e=>{const t=Math.abs(e);if(t>=1)return(0,p.Z)(e,2);if(t>=1e-6){const i=-Math.floor(Math.log(t)/Math.log(10)+1);return(0,p.Z)(e,i+4)}return e};function hr(e=[],{hiddenColumns:t=[],searchPhrase:i}){if((0,u.Z)(e))return[];const r=i?i.toLowerCase().trim():"",n=function(e,t){return e.reduce(((e,{aggregateInfo:i,metaData:r})=>(Ui.forEach((r=>{var n;e.maxCharCount.aggregateInfo[r]=Math.max(null!=(n=e.maxCharCount.aggregateInfo[r])?n:0,String(i[r]).length),t&&!e.matchesSearchPhrase.aggregateInfo[r]&&(e.matchesSearchPhrase.aggregateInfo[r]=cr(String(i[r]),t))})),Object.keys(r).forEach((i=>{var n,a;e.maxCharCount.metaData[i]=Math.max(null!=(n=e.maxCharCount.metaData[i])?n:0,String(r[i]).length),t&&!e.matchesSearchPhrase.metaData[i]&&(e.matchesSearchPhrase.metaData[i]=cr(null!=(a=r[i])?a:"",t))})),e)),{matchesSearchPhrase:{aggregateInfo:{},metaData:{}},maxCharCount:{aggregateInfo:{},metaData:{}}})}(e,r),a=function(e=[],t,i){const r=e.map((e=>Object.keys(e[Li.META_DATA]))).flat(),n=new Set(r);n.delete("metric");const a=[...n].sort(((e,t)=>e.localeCompare(t,"en",{sensitivity:"base"}))).map((e=>Ct(xt({},ur(Li.META_DATA,{matchesSearchPhrase:t.matchesSearchPhrase.metaData[e],maxCharCount:t.maxCharCount.metaData[e],searchPhrase:i})),{field:e,headerName:e})));return[ur(Li.METRIC,{matchesSearchPhrase:t.matchesSearchPhrase.metaData.metric,maxCharCount:t.maxCharCount.metaData.metric,searchPhrase:i,translateHeader:!0}),...a]}(e,n,r),s=[...a,...Ui.map((e=>ur(e,{matchesSearchPhrase:n.matchesSearchPhrase.aggregateInfo[e],maxCharCount:n.maxCharCount.aggregateInfo[e],searchPhrase:r,translateHeader:!0})))];if(!t.length||!s.every((e=>t.includes(e.field)))){const e=ur(Li.QUERY_ID,{maxCharCount:2,searchPhrase:r,translateHeader:!0});s.unshift(e)}return s}const mr="csvExportButton___rDKLG",gr="description___noVtZ",yr="field___OniDX",vr=({hiddenColumns:e,timeSeriesData:t})=>{const[i,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),u=()=>{s(!1)};return n.createElement(n.Fragment,null,n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.csvExport.tooltip")},n.createElement(a.IconButton,{buttonProps:{"aria-label":r.i18nUtil.get("sharedAnalytics.csvExport.tooltip")},className:mr,disabled:!t||0===t.length,icon:a.IconName.Export,onClick:()=>{s(!0)}})),n.createElement(a.Dialog,{open:i,onClose:u},n.createElement(a.Dialog.Title,null,r.i18nUtil.get("sharedAnalytics.csvExport.dialog.title")),n.createElement(a.Dialog.Content,null,n.createElement("p",{className:gr},r.i18nUtil.get("sharedAnalytics.csvExport.dialog.description")),n.createElement(a.AssistiveText,null,r.i18nUtil.get("sharedAnalytics.csvExport.dialog.exportSettings")),n.createElement(a.Checkbox,{checked:c,classes:{labelRoot:yr},label:r.i18nUtil.get("sharedAnalytics.csvExport.dialog.includeDataPoints"),onChange:(e,t)=>{d(t)}}),n.createElement(a.Checkbox,{checked:o,classes:{labelRoot:yr},label:r.i18nUtil.get("sharedAnalytics.csvExport.dialog.excludeHiddenColumns"),onChange:(e,t)=>{l(t)}})),n.createElement(a.Dialog.Actions,null,n.createElement(a.Button,{color:"secondary",onClick:u},r.i18nUtil.get("sharedAnalytics.csvExport.dialog.cancel")),n.createElement(a.Button,{color:"primary",onClick:()=>{(0,ce.showCasualNotification)({message:r.i18nUtil.get("sharedAnalytics.csvExport.toastMessage"),variant:"success"});const i=`metrics-results-${(new Date).toISOString()}.csv`.replace("Z","-0000");(0,r.downloadText)(i,Hi.getFileContents(t,{excludeDataPoints:!c,hiddenColumns:o?e:[]})),u()}},r.i18nUtil.get("sharedAnalytics.csvExport.dialog.export")))))},fr={defaultColDef:{cellClass:"tableCell___XlaKl"},rowBuffer:5,enableSizeColumnsToFit:!1,applyColumnDefOrder:!0,enableSizeColumnsToContent:!0,groupSelectsChildren:!1,disableColumnResizeIndicator:!0,noHighlightOnHover:!0,enableCellTextSelection:!0,suppressFieldDotNotation:!0,suppressRowHoverHighlight:!0,suppressRowClickSelection:!0,pagination:!1,noScrollOnPageChange:!0,density:"dense",showLoadingOverlay:!1};class _r extends he.AbstractParseTreeVisitor{static isTerminalNode(e){return Boolean(e.symbol)}static joinTexts(e){const t=[];if(this.isTerminalNode(e))return[e.text];const i=e.childCount;for(let r=0;r<i;++r){const i=e.getChild(r);t.push(..._r.joinTexts(i))}return t}static findNode(e,t){if(t(e))return e;for(let i=0;i<e.childCount;++i){const r=_r.findNode(e.getChild(i),t);if(r)return r}}shouldVisitNextChildWithIndex(e,t,i){return!0}}const Sr=class extends ye.Lexer{get vocabulary(){return Sr.VOCABULARY}constructor(e){super(e),this._interp=new ve.LexerATNSimulator(Sr._ATN,this)}get grammarFileName(){return"MetricsQueryRow.g4"}get ruleNames(){return Sr.ruleNames}get serializedATN(){return Sr._serializedATN}get channelNames(){return Sr.channelNames}get modeNames(){return Sr.modeNames}static get _ATN(){return Sr.__ATN||(Sr.__ATN=(new ge.ATNDeserializer).deserialize(_e.toCharArray(Sr._serializedATN))),Sr.__ATN}};let br=Sr;br.EXCLAM=1,br.LPAREN=2,br.RPAREN=3,br.COMMA=4,br.EQ=5,br.NE=6,br.LT=7,br.LE=8,br.GT=9,br.GE=10,br.PIPE=11,br.PLUS=12,br.MINUS=13,br.PLUSMINUS=14,br.MULT=15,br.DIV=16,br.AVG=17,br.COUNT=18,br.DELTA=19,br.MAX=20,br.MIN=21,br.PCT=22,br.OUTLIER=23,br.FILLMISSING=24,br.EMPTY=25,br.INTERPOLATION=26,br.LAST=27,br.STDDEV=28,br.LATEST=29,br.RATE=30,br.SUM=31,br.ALONG=32,br.AS=33,br.BY=34,br.OR=35,br.AND=36,br.NOT=37,br.TO=38,br.USING=39,br.EVAL=40,br.TOPK=41,br.BOTTOMK=42,br.SIN=43,br.COS=44,br.TAN=45,br.LOG=46,br.CEIL=47,br.FLOOR=48,br.ROUND=49,br.ABS=50,br.SQRT=51,br.EXP=52,br.FILTER=53,br.WINDOW=54,br.THRESHOLD=55,br.DIRECTION=56,br.WHERE=57,br.TIMESLICE=58,br.OVER=59,br.EWMA=60,br.SPAN=61,br.ALPHA=62,br.TIMESHIFT=63,br.QUANTIZE=64,br.ACCUM=65,br.PARSE=66,br.FIELD=67,br.NODROP=68,br.INCREASING=69,br.DECREASING=70,br.HISTOGRAM_QUANTILE=71,br.TRUE=72,br.FALSE=73,br.TIMEUNIT=74,br.STRING_LITERAL=75,br.UNSIGNED_INTEGER=76,br.PLUS_INTEGER=77,br.MINUS_INTEGER=78,br.UNSIGNED_DECIMAL=79,br.PLUS_DECIMAL=80,br.MINUS_DECIMAL=81,br.UNSIGNED_TIME_DURATION=82,br.PLUS_TIME_DURATION=83,br.MINUS_TIME_DURATION=84,br.UNDERSCORE_VALUE=85,br.COMMENT=86,br.BLOCK_COMMENT=87,br.GRAPHITE_METRIC_IDENT=88,br.GRAPHITE_METRIC_WILDCARD_IDENT=89,br.ROW_IDENT=90,br.WS=91,br.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],br.modeNames=["DEFAULT_MODE"],br.ruleNames=["EXCLAM","LPAREN","RPAREN","COMMA","EQ","NE","LT","LE","GT","GE","PIPE","PLUS","MINUS","PLUSMINUS","MULT","DIV","AVG","COUNT","DELTA","MAX","MIN","PCT","OUTLIER","FILLMISSING","EMPTY","INTERPOLATION","LAST","STDDEV","LATEST","RATE","SUM","ALONG","AS","BY","OR","AND","NOT","TO","USING","EVAL","TOPK","BOTTOMK","SIN","COS","TAN","LOG","CEIL","FLOOR","ROUND","ABS","SQRT","EXP","FILTER","WINDOW","THRESHOLD","DIRECTION","WHERE","TIMESLICE","OVER","EWMA","SPAN","ALPHA","TIMESHIFT","QUANTIZE","ACCUM","PARSE","FIELD","NODROP","INCREASING","DECREASING","HISTOGRAM_QUANTILE","TRUE","FALSE","TIMEUNIT","MILLISECOND","SECOND","MINUTE","HOUR","DAY","STRING_LITERAL","ESC","UNSIGNED_INTEGER","PLUS_INTEGER","MINUS_INTEGER","UNSIGNED_DECIMAL","PLUS_DECIMAL","MINUS_DECIMAL","UNSIGNED_TIME_DURATION","PLUS_TIME_DURATION","MINUS_TIME_DURATION","UNDERSCORE_VALUE","COMMENT","BLOCK_COMMENT","GRAPHITE_METRIC_IDENT","GRAPHITE_METRIC_WILDCARD_IDENT","ROW_IDENT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","WS"],br._LITERAL_NAMES=[void 0,"'!'","'('","')'","','","'='","'!='","'<'","'<='","'>'","'>='","'|'","'+'","'-'","'+-'","'*'","'/'",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'_value'"],br._SYMBOLIC_NAMES=[void 0,"EXCLAM","LPAREN","RPAREN","COMMA","EQ","NE","LT","LE","GT","GE","PIPE","PLUS","MINUS","PLUSMINUS","MULT","DIV","AVG","COUNT","DELTA","MAX","MIN","PCT","OUTLIER","FILLMISSING","EMPTY","INTERPOLATION","LAST","STDDEV","LATEST","RATE","SUM","ALONG","AS","BY","OR","AND","NOT","TO","USING","EVAL","TOPK","BOTTOMK","SIN","COS","TAN","LOG","CEIL","FLOOR","ROUND","ABS","SQRT","EXP","FILTER","WINDOW","THRESHOLD","DIRECTION","WHERE","TIMESLICE","OVER","EWMA","SPAN","ALPHA","TIMESHIFT","QUANTIZE","ACCUM","PARSE","FIELD","NODROP","INCREASING","DECREASING","HISTOGRAM_QUANTILE","TRUE","FALSE","TIMEUNIT","STRING_LITERAL","UNSIGNED_INTEGER","PLUS_INTEGER","MINUS_INTEGER","UNSIGNED_DECIMAL","PLUS_DECIMAL","MINUS_DECIMAL","UNSIGNED_TIME_DURATION","PLUS_TIME_DURATION","MINUS_TIME_DURATION","UNDERSCORE_VALUE","COMMENT","BLOCK_COMMENT","GRAPHITE_METRIC_IDENT","GRAPHITE_METRIC_WILDCARD_IDENT","ROW_IDENT","WS"],br.VOCABULARY=new fe.VocabularyImpl(Sr._LITERAL_NAMES,Sr._SYMBOLIC_NAMES,[]),br._serializedATNSegments=2,br._serializedATNSegment0="]\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!\"\t\"#\t#$\t$%\t%&\t&'\t'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t23\t34\t45\t56\t67\t78\t89\t9:\t:;\t;<\t<=\t=>\t>?\t?@\t@A\tAB\tBC\tCD\tDE\tEF\tFG\tGH\tHI\tIJ\tJK\tKL\tLM\tMN\tNO\tOP\tPQ\tQR\tRS\tST\tTU\tUV\tVW\tWX\tXY\tYZ\tZ[\t[\\\t\\]\t]^\t^_\t_`\t`a\tab\tbc\tcd\tde\tef\tfg\tgh\thi\tij\tjk\tkl\tlm\tmn\tno\top\tpq\tqr\trs\tst\ttu\tuv\tvw\twx\txy\tyz\tz{\t{|\t|\b\b\t\t\t\n\n\v\v\v\f\f\r\r    !!!!!!\"\"\"###$$$%%%%&&&&'''(((((()))))*****++++++++,,,,----....////0000011111122222233334444455556666666777777788888888889999999999::::::;;;;;;;;;;<<<<<=====>>>>>??????@@@@@@@@@@AAAAAAAAABBBBBBCCCCCCDDDDDDEEEEEEEFFFFFFFFFFFGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHIIIIIJJJJJJKKKKKK\nKLLLMMNNOOPPQQQQ\nQ\fQQ\vQQQRRRSS\nS\rSSTTT\nT\rTTUUU\nU\rUUVV\nV\fVV\vVVVV\nV\rVVWWW\nW\fWW\vWWWW\nW\rWWXXX\nX\fXX\vXXXX\nX\rXXYYYZZZ[[[\\\\\\\\\\\\\\]]]]]\n]\f]]\v]]]^^^^^\n^\f^^\v^^^^^\n^^^__\n_\r__``\n`\r``aaa\na\raabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}\t\v\r\b\t\n\v\f\r!#%')+-/13579;= ?!A\"C#E$G%I&K'M(O)Q*S+U,W-Y.[/]0_1a2c3e4g5i6k7m8o9q:s;u<w=y>{?}@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]'\b$$^^ddppttvv2;--//00\f\f\v&'--/=A\\^^`ac}\v&',-/=A\\^^`ac}%%2;C\\c|CCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkLLllMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||\v\f\"\"\t\v\r!#%')+-/13579;=?ACEGIKMOQSUWY[]_acegikmoqsuwy{}\t\v\r!#%')+-/13579;=?ACEGIKMOQSUWY[]_acegikmoqsuwy{}#*+\b.\n?\f#?>>?@@?~-/-/, 1\"bwh$dpvou&efmub(nby*njo,qdu.pvumjfs0gjmmnjttjoh2fnquz4joufsqpmbujpo6mbtu8tueefw:mbuftu<sbuf>tvn@bmpohBbtDczFpsHboeJopuLupNvtjohPfwbmRupqlTcpuupnlVtjoXdptZubo\\mph^dfjm`gmppsbspvoedbctftrsuhfy",br._serializedATNSegment1='qjgjmufslxjoepxnuisftipmepejsfdujporxifsftujnftmjdfvpwfsxfxnbztqbo|bmqib~ujnftijgurvbouj{fbddvnqbstfgjfmeopespqjodsfbtjohefdsfbtjohijtuphsbnarvboujmfusvfgbmtfLMNOPouuojf$R\v$^\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSKTKUKaxcnwg11\n\b]1,\v,1\b^\t\b\t\t\t\n\t\v\t\f\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t!\t"\t#\t$\t%\t&',br._serializedATN=_e.join([Sr._serializedATNSegment0,Sr._serializedATNSegment1],"");const Er=class extends Ee.Parser{get vocabulary(){return Er.VOCABULARY}get grammarFileName(){return"MetricsQueryRow.g4"}get ruleNames(){return Er.ruleNames}get serializedATN(){return Er._serializedATN}createFailedPredicateException(e,t){return new Se.FailedPredicateException(this,e,t)}constructor(e){super(e),this._interp=new xe.ParserATNSimulator(Er._ATN,this)}select(){let e,t=new xr(this._ctx,this.state);this.enterRule(t,0,Er.RULE_select);try{let i;for(this.enterOuterAlt(t,1),this.state=151,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=148,this.match(Er.WS),this.state=153,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=154,this.selectorBoolExp(),this.state=158,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,1,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=155,this.match(Er.WS)),this.state=160,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,1,this._ctx)}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}selectorBoolExp(){let e,t=new Cr(this._ctx,this.state);this.enterRule(t,2,Er.RULE_selectorBoolExp);try{let i;for(t=new Ar(t),this.enterOuterAlt(t,1),this.state=161,this.selectorBoolTerm(),this.state=177,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,4,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i){for(this.state=165,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=162,this.match(Er.WS),this.state=167,this._errHandler.sync(this),e=this._input.LA(1);this.state=168,this.match(Er.OR),this.state=170,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=169,this.match(Er.WS),this.state=172,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=174,this.selectorBoolTerm()}this.state=179,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,4,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}selectorBoolTerm(){let e,t=new wr(this._ctx,this.state);this.enterRule(t,4,Er.RULE_selectorBoolTerm);try{let i;for(t=new Ir(t),this.enterOuterAlt(t,1),this.state=180,this.selectorBoolFactor(),this.state=208,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,10,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i)switch(this.state=206,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,9,this._ctx)){case 1:this.state=182,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=181,this.match(Er.WS),this.state=184,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=186,this.match(Er.AND),this.state=188,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=187,this.match(Er.WS),this.state=190,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);for(this.state=192,this.selectorBoolFactor(),this.state=196,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,7,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=193,this.match(Er.WS)),this.state=198,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,7,this._ctx);break;case 2:for(this.state=202,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=199,this.match(Er.WS),this.state=204,this._errHandler.sync(this),e=this._input.LA(1);this.state=205,this.selectorBoolFactor()}this.state=210,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,10,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}selectorBoolFactor(){let e,t=new Rr(this._ctx,this.state);this.enterRule(t,6,Er.RULE_selectorBoolFactor);try{switch(this.state=244,this._errHandler.sync(this),this._input.LA(1)){case Er.EXCLAM:case Er.NOT:switch(t=new Dr(t),this.enterOuterAlt(t,1),this.state=224,this._errHandler.sync(this),this._input.LA(1)){case Er.NOT:this.state=211,this.match(Er.NOT),this.state=213,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=212,this.match(Er.WS),this.state=215,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);break;case Er.EXCLAM:for(this.state=217,this.match(Er.EXCLAM),this.state=221,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=218,this.match(Er.WS),this.state=223,this._errHandler.sync(this),e=this._input.LA(1);break;default:throw new be.NoViableAltException(this)}this.state=226,this.selectorBoolFactor();break;case Er.LPAREN:for(t=new Or(t),this.enterOuterAlt(t,2),this.state=227,this.match(Er.LPAREN),this.state=231,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=228,this.match(Er.WS),this.state=233,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=234,this.selectorBoolExp(),this.state=238,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=235,this.match(Er.WS),this.state=240,this._errHandler.sync(this),e=this._input.LA(1);this.state=241,this.match(Er.RPAREN);break;case Er.EQ:case Er.NE:case Er.LT:case Er.LE:case Er.GT:case Er.GE:case Er.PLUS:case Er.MINUS:case Er.MULT:case Er.DIV:case Er.AVG:case Er.COUNT:case Er.DELTA:case Er.MAX:case Er.MIN:case Er.PCT:case Er.OUTLIER:case Er.FILLMISSING:case Er.EMPTY:case Er.INTERPOLATION:case Er.LAST:case Er.STDDEV:case Er.LATEST:case Er.RATE:case Er.SUM:case Er.ALONG:case Er.AS:case Er.BY:case Er.TO:case Er.USING:case Er.EVAL:case Er.TOPK:case Er.BOTTOMK:case Er.SIN:case Er.COS:case Er.TAN:case Er.LOG:case Er.CEIL:case Er.FLOOR:case Er.ROUND:case Er.ABS:case Er.SQRT:case Er.EXP:case Er.FILTER:case Er.WINDOW:case Er.THRESHOLD:case Er.DIRECTION:case Er.WHERE:case Er.TIMESLICE:case Er.OVER:case Er.EWMA:case Er.SPAN:case Er.ALPHA:case Er.TIMESHIFT:case Er.QUANTIZE:case Er.ACCUM:case Er.PARSE:case Er.FIELD:case Er.NODROP:case Er.INCREASING:case Er.DECREASING:case Er.HISTOGRAM_QUANTILE:case Er.TIMEUNIT:case Er.STRING_LITERAL:case Er.UNSIGNED_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.UNSIGNED_TIME_DURATION:case Er.UNDERSCORE_VALUE:case Er.GRAPHITE_METRIC_IDENT:case Er.GRAPHITE_METRIC_WILDCARD_IDENT:t=new Nr(t),this.enterOuterAlt(t,3),this.state=243,this.selectorAtomicExp();break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}selectorAtomicExp(){let e=new Mr(this._ctx,this.state);this.enterRule(e,8,Er.RULE_selectorAtomicExp);try{this.enterOuterAlt(e,1),this.state=246,this.selector()}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}selector(){let e=new kr(this._ctx,this.state);this.enterRule(e,10,Er.RULE_selector);try{switch(this.state=250,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,17,this._ctx)){case 1:e=new Lr(e),this.enterOuterAlt(e,1),this.state=248,this.dimensionSelector();break;case 2:e=new Pr(e),this.enterOuterAlt(e,2),this.state=249,this.metricNameSelector()}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}metricIdentifier(){let e=new Fr(this._ctx,this.state);this.enterRule(e,12,Er.RULE_metricIdentifier);try{switch(this.state=254,this._errHandler.sync(this),this._input.LA(1)){case Er.EQ:case Er.NE:case Er.LT:case Er.LE:case Er.GT:case Er.GE:case Er.PLUS:case Er.MINUS:case Er.DIV:case Er.AVG:case Er.COUNT:case Er.DELTA:case Er.MAX:case Er.MIN:case Er.PCT:case Er.OUTLIER:case Er.FILLMISSING:case Er.EMPTY:case Er.INTERPOLATION:case Er.LAST:case Er.STDDEV:case Er.LATEST:case Er.RATE:case Er.SUM:case Er.ALONG:case Er.AS:case Er.BY:case Er.TO:case Er.USING:case Er.EVAL:case Er.TOPK:case Er.BOTTOMK:case Er.SIN:case Er.COS:case Er.TAN:case Er.LOG:case Er.CEIL:case Er.FLOOR:case Er.ROUND:case Er.ABS:case Er.SQRT:case Er.EXP:case Er.FILTER:case Er.WINDOW:case Er.THRESHOLD:case Er.DIRECTION:case Er.WHERE:case Er.TIMESLICE:case Er.OVER:case Er.EWMA:case Er.SPAN:case Er.ALPHA:case Er.TIMESHIFT:case Er.QUANTIZE:case Er.ACCUM:case Er.PARSE:case Er.FIELD:case Er.NODROP:case Er.INCREASING:case Er.DECREASING:case Er.HISTOGRAM_QUANTILE:case Er.TIMEUNIT:case Er.UNSIGNED_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.UNSIGNED_TIME_DURATION:case Er.UNDERSCORE_VALUE:case Er.GRAPHITE_METRIC_IDENT:e=new Ur(e),this.enterOuterAlt(e,1),this.state=252,this.graphiteMetricIdentifier();break;case Er.STRING_LITERAL:e=new Vr(e),this.enterOuterAlt(e,2),this.state=253,this.match(Er.STRING_LITERAL);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}dimensionKey(){let e=new Br(this._ctx,this.state);this.enterRule(e,14,Er.RULE_dimensionKey);try{this.enterOuterAlt(e,1),this.state=256,this.metricIdentifier()}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}dimensionKeyList(){let e,t=new $r(this._ctx,this.state);this.enterRule(t,16,Er.RULE_dimensionKeyList);try{for(this.enterOuterAlt(t,1),this.state=258,this.dimensionKey(),this.state=269,this._errHandler.sync(this),e=this._input.LA(1);e===Er.COMMA;){for(this.state=259,this.match(Er.COMMA),this.state=263,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=260,this.match(Er.WS),this.state=265,this._errHandler.sync(this),e=this._input.LA(1);this.state=266,this.dimensionKey(),this.state=271,this._errHandler.sync(this),e=this._input.LA(1)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}dimensionValueExpr(){let e,t=new Hr(this._ctx,this.state);this.enterRule(t,18,Er.RULE_dimensionValueExpr);try{let i;switch(this.state=336,this._errHandler.sync(this),this._input.LA(1)){case Er.EQ:case Er.NE:case Er.LT:case Er.LE:case Er.GT:case Er.GE:case Er.PLUS:case Er.MINUS:case Er.MULT:case Er.DIV:case Er.AVG:case Er.COUNT:case Er.DELTA:case Er.MAX:case Er.MIN:case Er.PCT:case Er.OUTLIER:case Er.FILLMISSING:case Er.EMPTY:case Er.INTERPOLATION:case Er.LAST:case Er.STDDEV:case Er.LATEST:case Er.RATE:case Er.SUM:case Er.ALONG:case Er.AS:case Er.BY:case Er.TO:case Er.USING:case Er.EVAL:case Er.TOPK:case Er.BOTTOMK:case Er.SIN:case Er.COS:case Er.TAN:case Er.LOG:case Er.CEIL:case Er.FLOOR:case Er.ROUND:case Er.ABS:case Er.SQRT:case Er.EXP:case Er.FILTER:case Er.WINDOW:case Er.THRESHOLD:case Er.DIRECTION:case Er.WHERE:case Er.TIMESLICE:case Er.OVER:case Er.EWMA:case Er.SPAN:case Er.ALPHA:case Er.TIMESHIFT:case Er.QUANTIZE:case Er.ACCUM:case Er.PARSE:case Er.FIELD:case Er.NODROP:case Er.INCREASING:case Er.DECREASING:case Er.HISTOGRAM_QUANTILE:case Er.TRUE:case Er.FALSE:case Er.TIMEUNIT:case Er.STRING_LITERAL:case Er.UNSIGNED_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.UNSIGNED_TIME_DURATION:case Er.UNDERSCORE_VALUE:case Er.GRAPHITE_METRIC_IDENT:case Er.GRAPHITE_METRIC_WILDCARD_IDENT:t=new Wr(t),this.enterOuterAlt(t,1),this.state=272,this.singleDimensionValueExpr();break;case Er.LPAREN:for(t=new qr(t),this.enterOuterAlt(t,2),this.state=273,this.match(Er.LPAREN),this.state=277,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,21,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=274,this.match(Er.WS)),this.state=279,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,21,this._ctx);for(this.state=283,this._errHandler.sync(this),e=this._input.LA(1);0==(-32&e)&&0!=(1<<e&(1<<Er.EQ|1<<Er.NE|1<<Er.LT|1<<Er.LE|1<<Er.GT|1<<Er.GE|1<<Er.PLUS|1<<Er.MINUS|1<<Er.MULT|1<<Er.DIV|1<<Er.AVG|1<<Er.COUNT|1<<Er.DELTA|1<<Er.MAX|1<<Er.MIN|1<<Er.PCT|1<<Er.OUTLIER|1<<Er.FILLMISSING|1<<Er.EMPTY|1<<Er.INTERPOLATION|1<<Er.LAST|1<<Er.STDDEV|1<<Er.LATEST|1<<Er.RATE|1<<Er.SUM))||0==(e-32&-32)&&0!=(1<<e-32&(1<<Er.ALONG-32|1<<Er.AS-32|1<<Er.BY-32|1<<Er.TO-32|1<<Er.USING-32|1<<Er.EVAL-32|1<<Er.TOPK-32|1<<Er.BOTTOMK-32|1<<Er.SIN-32|1<<Er.COS-32|1<<Er.TAN-32|1<<Er.LOG-32|1<<Er.CEIL-32|1<<Er.FLOOR-32|1<<Er.ROUND-32|1<<Er.ABS-32|1<<Er.SQRT-32|1<<Er.EXP-32|1<<Er.FILTER-32|1<<Er.WINDOW-32|1<<Er.THRESHOLD-32|1<<Er.DIRECTION-32|1<<Er.WHERE-32|1<<Er.TIMESLICE-32|1<<Er.OVER-32|1<<Er.EWMA-32|1<<Er.SPAN-32|1<<Er.ALPHA-32|1<<Er.TIMESHIFT-32))||0==(e-64&-32)&&0!=(1<<e-64&(1<<Er.QUANTIZE-64|1<<Er.ACCUM-64|1<<Er.PARSE-64|1<<Er.FIELD-64|1<<Er.NODROP-64|1<<Er.INCREASING-64|1<<Er.DECREASING-64|1<<Er.HISTOGRAM_QUANTILE-64|1<<Er.TRUE-64|1<<Er.FALSE-64|1<<Er.TIMEUNIT-64|1<<Er.STRING_LITERAL-64|1<<Er.UNSIGNED_INTEGER-64|1<<Er.UNSIGNED_DECIMAL-64|1<<Er.UNSIGNED_TIME_DURATION-64|1<<Er.UNDERSCORE_VALUE-64|1<<Er.GRAPHITE_METRIC_IDENT-64|1<<Er.GRAPHITE_METRIC_WILDCARD_IDENT-64));)this.state=280,this.singleDimensionValueExpr(),this.state=285,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=326,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,30,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i){switch(this.state=310,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,27,this._ctx)){case 1:this.state=287,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=286,this.match(Er.WS),this.state=289,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=291,this.match(Er.OR),this.state=293,this._errHandler.sync(this),i=1;do{switch(i){case 1:this.state=292,this.match(Er.WS);break;default:throw new be.NoViableAltException(this)}this.state=295,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,24,this._ctx)}while(2!==i&&i!==me.ATN.INVALID_ALT_NUMBER);break;case 2:for(this.state=300,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=297,this.match(Er.WS),this.state=302,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=303,this.match(Er.COMMA),this.state=307,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,26,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=304,this.match(Er.WS)),this.state=309,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,26,this._ctx)}for(this.state=315,this._errHandler.sync(this),e=this._input.LA(1);0==(-32&e)&&0!=(1<<e&(1<<Er.EQ|1<<Er.NE|1<<Er.LT|1<<Er.LE|1<<Er.GT|1<<Er.GE|1<<Er.PLUS|1<<Er.MINUS|1<<Er.MULT|1<<Er.DIV|1<<Er.AVG|1<<Er.COUNT|1<<Er.DELTA|1<<Er.MAX|1<<Er.MIN|1<<Er.PCT|1<<Er.OUTLIER|1<<Er.FILLMISSING|1<<Er.EMPTY|1<<Er.INTERPOLATION|1<<Er.LAST|1<<Er.STDDEV|1<<Er.LATEST|1<<Er.RATE|1<<Er.SUM))||0==(e-32&-32)&&0!=(1<<e-32&(1<<Er.ALONG-32|1<<Er.AS-32|1<<Er.BY-32|1<<Er.TO-32|1<<Er.USING-32|1<<Er.EVAL-32|1<<Er.TOPK-32|1<<Er.BOTTOMK-32|1<<Er.SIN-32|1<<Er.COS-32|1<<Er.TAN-32|1<<Er.LOG-32|1<<Er.CEIL-32|1<<Er.FLOOR-32|1<<Er.ROUND-32|1<<Er.ABS-32|1<<Er.SQRT-32|1<<Er.EXP-32|1<<Er.FILTER-32|1<<Er.WINDOW-32|1<<Er.THRESHOLD-32|1<<Er.DIRECTION-32|1<<Er.WHERE-32|1<<Er.TIMESLICE-32|1<<Er.OVER-32|1<<Er.EWMA-32|1<<Er.SPAN-32|1<<Er.ALPHA-32|1<<Er.TIMESHIFT-32))||0==(e-64&-32)&&0!=(1<<e-64&(1<<Er.QUANTIZE-64|1<<Er.ACCUM-64|1<<Er.PARSE-64|1<<Er.FIELD-64|1<<Er.NODROP-64|1<<Er.INCREASING-64|1<<Er.DECREASING-64|1<<Er.HISTOGRAM_QUANTILE-64|1<<Er.TRUE-64|1<<Er.FALSE-64|1<<Er.TIMEUNIT-64|1<<Er.STRING_LITERAL-64|1<<Er.UNSIGNED_INTEGER-64|1<<Er.UNSIGNED_DECIMAL-64|1<<Er.UNSIGNED_TIME_DURATION-64|1<<Er.UNDERSCORE_VALUE-64|1<<Er.GRAPHITE_METRIC_IDENT-64|1<<Er.GRAPHITE_METRIC_WILDCARD_IDENT-64));)this.state=312,this.singleDimensionValueExpr(),this.state=317,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=321,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,29,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=318,this.match(Er.WS)),this.state=323,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,29,this._ctx)}this.state=328,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,30,this._ctx)}for(this.state=332,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=329,this.match(Er.WS),this.state=334,this._errHandler.sync(this),e=this._input.LA(1);this.state=335,this.match(Er.RPAREN);break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}singleDimensionValueExpr(){let e=new jr(this._ctx,this.state);this.enterRule(e,20,Er.RULE_singleDimensionValueExpr);try{switch(this.state=341,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,33,this._ctx)){case 1:e=new Qr(e),this.enterOuterAlt(e,1),this.state=338,this.metricIdentifier();break;case 2:e=new zr(e),this.enterOuterAlt(e,2),this.state=339,this.graphiteMetricWildcardIdentifier();break;case 3:e=new Gr(e),this.enterOuterAlt(e,3),this.state=340,this.booleanValue()}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}dimensionSelector(){let e,t=new Kr(this._ctx,this.state);this.enterRule(t,22,Er.RULE_dimensionSelector);try{for(this.enterOuterAlt(t,1),this.state=343,this.dimensionKey(),this.state=347,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=344,this.match(Er.WS),this.state=349,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=350,this.match(Er.EQ),this.state=354,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=351,this.match(Er.WS),this.state=356,this._errHandler.sync(this),e=this._input.LA(1);this.state=357,this.dimensionValueExpr()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}metricNameSelector(){let e=new Yr(this._ctx,this.state);this.enterRule(e,24,Er.RULE_metricNameSelector);try{switch(this.state=361,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,36,this._ctx)){case 1:e=new Zr(e),this.enterOuterAlt(e,1),this.state=359,this.metricIdentifier();break;case 2:e=new Xr(e),this.enterOuterAlt(e,2),this.state=360,this.graphiteMetricWildcardIdentifier()}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}positiveInteger(){let e=new Jr(this._ctx,this.state);this.enterRule(e,26,Er.RULE_positiveInteger);try{switch(this.state=365,this._errHandler.sync(this),this._input.LA(1)){case Er.PLUS_INTEGER:e=new en(e),this.enterOuterAlt(e,1),this.state=363,this.match(Er.PLUS_INTEGER);break;case Er.UNSIGNED_INTEGER:e=new tn(e),this.enterOuterAlt(e,2),this.state=364,this.match(Er.UNSIGNED_INTEGER);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}negativeInteger(){let e=new rn(this._ctx,this.state);this.enterRule(e,28,Er.RULE_negativeInteger);try{e=new nn(e),this.enterOuterAlt(e,1),this.state=367,this.match(Er.MINUS_INTEGER)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}positiveNumber(){let e=new an(this._ctx,this.state);this.enterRule(e,30,Er.RULE_positiveNumber);try{switch(this.state=372,this._errHandler.sync(this),this._input.LA(1)){case Er.UNSIGNED_INTEGER:case Er.PLUS_INTEGER:e=new sn(e),this.enterOuterAlt(e,1),this.state=369,this.positiveInteger();break;case Er.PLUS_DECIMAL:e=new on(e),this.enterOuterAlt(e,2),this.state=370,this.match(Er.PLUS_DECIMAL);break;case Er.UNSIGNED_DECIMAL:e=new ln(e),this.enterOuterAlt(e,3),this.state=371,this.match(Er.UNSIGNED_DECIMAL);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}negativeNumber(){let e=new cn(this._ctx,this.state);this.enterRule(e,32,Er.RULE_negativeNumber);try{switch(this.state=376,this._errHandler.sync(this),this._input.LA(1)){case Er.MINUS_INTEGER:e=new dn(e),this.enterOuterAlt(e,1),this.state=374,this.negativeInteger();break;case Er.MINUS_DECIMAL:e=new un(e),this.enterOuterAlt(e,2),this.state=375,this.match(Er.MINUS_DECIMAL);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}number(){let e=new pn(this._ctx,this.state);this.enterRule(e,34,Er.RULE_number);try{switch(this.state=380,this._errHandler.sync(this),this._input.LA(1)){case Er.UNSIGNED_INTEGER:case Er.PLUS_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.PLUS_DECIMAL:e=new hn(e),this.enterOuterAlt(e,1),this.state=378,this.positiveNumber();break;case Er.MINUS_INTEGER:case Er.MINUS_DECIMAL:e=new mn(e),this.enterOuterAlt(e,2),this.state=379,this.negativeNumber();break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}positiveTimeDuration(){let e=new gn(this._ctx,this.state);this.enterRule(e,36,Er.RULE_positiveTimeDuration);try{switch(this.state=387,this._errHandler.sync(this),this._input.LA(1)){case Er.UNSIGNED_TIME_DURATION:e=new yn(e),this.enterOuterAlt(e,1),this.state=382,this.match(Er.UNSIGNED_TIME_DURATION);break;case Er.PLUS_TIME_DURATION:e=new vn(e),this.enterOuterAlt(e,2),this.state=383,this.match(Er.PLUS_TIME_DURATION);break;case Er.UNSIGNED_INTEGER:case Er.PLUS_INTEGER:e=new fn(e),this.enterOuterAlt(e,3),this.state=384,this.positiveInteger(),this.state=385,this.match(Er.TIMEUNIT);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}negativeTimeDuration(){let e=new _n(this._ctx,this.state);this.enterRule(e,38,Er.RULE_negativeTimeDuration);try{switch(this.state=393,this._errHandler.sync(this),this._input.LA(1)){case Er.MINUS_TIME_DURATION:e=new Sn(e),this.enterOuterAlt(e,1),this.state=389,this.match(Er.MINUS_TIME_DURATION);break;case Er.MINUS_INTEGER:e=new bn(e),this.enterOuterAlt(e,2),this.state=390,this.negativeInteger(),this.state=391,this.match(Er.TIMEUNIT);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}signedTimeDuration(){let e=new En(this._ctx,this.state);this.enterRule(e,40,Er.RULE_signedTimeDuration);try{switch(this.state=397,this._errHandler.sync(this),this._input.LA(1)){case Er.UNSIGNED_INTEGER:case Er.PLUS_INTEGER:case Er.UNSIGNED_TIME_DURATION:case Er.PLUS_TIME_DURATION:e=new Tn(e),this.enterOuterAlt(e,1),this.state=395,this.positiveTimeDuration();break;case Er.MINUS_INTEGER:case Er.MINUS_TIME_DURATION:e=new xn(e),this.enterOuterAlt(e,2),this.state=396,this.negativeTimeDuration();break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}timeShift(){let e,t=new Cn(this._ctx,this.state);this.enterRule(t,42,Er.RULE_timeShift);try{this.enterOuterAlt(t,1),this.state=399,this.match(Er.TIMESHIFT),this.state=401,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=400,this.match(Er.WS),this.state=403,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=405,this.signedTimeDuration()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}histogramQuantile(){let e,t=new An(this._ctx,this.state);this.enterRule(t,44,Er.RULE_histogramQuantile);try{switch(this.state=437,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,49,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=407,this.match(Er.HISTOGRAM_QUANTILE),this.state=409,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=408,this.match(Er.WS),this.state=411,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=413,this.positiveNumber();break;case 2:for(this.enterOuterAlt(t,2),this.state=414,this.match(Er.HISTOGRAM_QUANTILE),this.state=418,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=415,this.match(Er.WS),this.state=420,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=421,this.match(Er.LPAREN),this.state=425,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=422,this.match(Er.WS),this.state=427,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=428,this.positiveNumber(),this.state=432,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=429,this.match(Er.WS),this.state=434,this._errHandler.sync(this),e=this._input.LA(1);this.state=435,this.match(Er.RPAREN)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}outlier(){let e,t=new wn(this._ctx,this.state);this.enterRule(t,46,Er.RULE_outlier);try{let i;switch(this.state=459,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,53,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=439,this.match(Er.OUTLIER);break;case 2:this.enterOuterAlt(t,2),this.state=440,this.match(Er.OUTLIER),this.state=442,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=441,this.match(Er.WS),this.state=444,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);for(this.state=446,this.outlierParameter(),this.state=456,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,52,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i){for(this.state=450,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=447,this.match(Er.WS),this.state=452,this._errHandler.sync(this),e=this._input.LA(1);this.state=453,this.outlierParameter()}this.state=458,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,52,this._ctx)}}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}fillmissing(){let e,t=new In(this._ctx,this.state);this.enterRule(t,48,Er.RULE_fillmissing);try{t=new Rn(t),this.enterOuterAlt(t,1),this.state=461,this.match(Er.FILLMISSING),this.state=463,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=462,this.match(Er.WS),this.state=465,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);if(this.state=473,this._errHandler.sync(this),e=this._input.LA(1),e===Er.USING){this.state=467,this.match(Er.USING),this.state=469,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=468,this.match(Er.WS),this.state=471,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS)}this.state=475,this.fillmissingParameter()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}ewma(){let e,t=new Dn(this._ctx,this.state);this.enterRule(t,50,Er.RULE_ewma);try{switch(this.state=485,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,58,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=477,this.match(Er.EWMA);break;case 2:this.enterOuterAlt(t,2),this.state=478,this.match(Er.EWMA),this.state=480,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=479,this.match(Er.WS),this.state=482,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=484,this.ewmaParameter()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}fillmissingParameter(){let e=new On(this._ctx,this.state);this.enterRule(e,52,Er.RULE_fillmissingParameter);try{switch(this.state=491,this._errHandler.sync(this),this._input.LA(1)){case Er.EMPTY:this.enterOuterAlt(e,1),this.state=487,this.match(Er.EMPTY);break;case Er.INTERPOLATION:this.enterOuterAlt(e,2),this.state=488,this.match(Er.INTERPOLATION);break;case Er.LAST:this.enterOuterAlt(e,3),this.state=489,this.match(Er.LAST);break;case Er.UNSIGNED_INTEGER:case Er.PLUS_INTEGER:case Er.MINUS_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.PLUS_DECIMAL:case Er.MINUS_DECIMAL:this.enterOuterAlt(e,4),this.state=490,this.number();break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}outlierParameter(){let e,t=new Nn(this._ctx,this.state);this.enterRule(t,54,Er.RULE_outlierParameter);try{switch(this.state=538,this._errHandler.sync(this),this._input.LA(1)){case Er.WINDOW:for(t=new Mn(t),this.enterOuterAlt(t,1),this.state=493,this.match(Er.WINDOW),this.state=497,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=494,this.match(Er.WS),this.state=499,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=500,this.match(Er.EQ),this.state=504,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=501,this.match(Er.WS),this.state=506,this._errHandler.sync(this),e=this._input.LA(1);this.state=507,this.positiveTimeDuration();break;case Er.THRESHOLD:for(t=new kn(t),this.enterOuterAlt(t,2),this.state=508,this.match(Er.THRESHOLD),this.state=512,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=509,this.match(Er.WS),this.state=514,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=515,this.match(Er.EQ),this.state=519,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=516,this.match(Er.WS),this.state=521,this._errHandler.sync(this),e=this._input.LA(1);this.state=522,this.number();break;case Er.DIRECTION:for(t=new Ln(t),this.enterOuterAlt(t,3),this.state=523,this.match(Er.DIRECTION),this.state=527,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=524,this.match(Er.WS),this.state=529,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=530,this.match(Er.EQ),this.state=534,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=531,this.match(Er.WS),this.state=536,this._errHandler.sync(this),e=this._input.LA(1);this.state=537,e=this._input.LA(1),0==(-32&e)&&0!=(1<<e&(1<<Er.PLUS|1<<Er.MINUS|1<<Er.PLUSMINUS))?(this._input.LA(1)===we.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this);break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}ewmaParameter(){let e,t=new Pn(this._ctx,this.state);this.enterRule(t,56,Er.RULE_ewmaParameter);try{switch(this.state=570,this._errHandler.sync(this),this._input.LA(1)){case Er.SPAN:for(t=new Fn(t),this.enterOuterAlt(t,1),this.state=540,this.match(Er.SPAN),this.state=544,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=541,this.match(Er.WS),this.state=546,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=547,this.match(Er.EQ),this.state=551,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=548,this.match(Er.WS),this.state=553,this._errHandler.sync(this),e=this._input.LA(1);this.state=554,this.positiveNumber();break;case Er.ALPHA:for(t=new Un(t),this.enterOuterAlt(t,2),this.state=555,this.match(Er.ALPHA),this.state=559,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=556,this.match(Er.WS),this.state=561,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=562,this.match(Er.EQ),this.state=566,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=563,this.match(Er.WS),this.state=568,this._errHandler.sync(this),e=this._input.LA(1);this.state=569,this.positiveNumber();break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}aggregatorFn(){let e,t=new Vn(this._ctx,this.state);this.enterRule(t,58,Er.RULE_aggregatorFn);try{switch(this.state=601,this._errHandler.sync(this),this._input.LA(1)){case Er.AVG:t=new Bn(t),this.enterOuterAlt(t,1),this.state=572,this.match(Er.AVG);break;case Er.COUNT:t=new $n(t),this.enterOuterAlt(t,2),this.state=573,this.match(Er.COUNT);break;case Er.SUM:t=new Hn(t),this.enterOuterAlt(t,3),this.state=574,this.match(Er.SUM);break;case Er.MIN:t=new Wn(t),this.enterOuterAlt(t,4),this.state=575,this.match(Er.MIN);break;case Er.MAX:t=new qn(t),this.enterOuterAlt(t,5),this.state=576,this.match(Er.MAX);break;case Er.STDDEV:t=new jn(t),this.enterOuterAlt(t,6),this.state=577,this.match(Er.STDDEV);break;case Er.PCT:for(t=new Qn(t),this.enterOuterAlt(t,7),this.state=578,this.match(Er.PCT),this.state=582,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=579,this.match(Er.WS),this.state=584,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=585,this.match(Er.LPAREN),this.state=589,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=586,this.match(Er.WS),this.state=591,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=592,this.positiveNumber(),this.state=596,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=593,this.match(Er.WS),this.state=598,this._errHandler.sync(this),e=this._input.LA(1);this.state=599,this.match(Er.RPAREN);break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}aggregate(){let e,t=new zn(this._ctx,this.state);this.enterRule(t,60,Er.RULE_aggregate);try{switch(this.enterOuterAlt(t,1),this.state=603,this.aggregatorFn(),this.state=616,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,78,this._ctx)){case 1:this.state=605,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=604,this.match(Er.WS),this.state=607,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=609,this.match(Er.BY),this.state=611,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=610,this.match(Er.WS),this.state=613,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=615,this.dimensionKeyList()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}rollupFn(){let e=new Gn(this._ctx,this.state);this.enterRule(e,62,Er.RULE_rollupFn);try{switch(this.state=624,this._errHandler.sync(this),this._input.LA(1)){case Er.AVG:e=new Kn(e),this.enterOuterAlt(e,1),this.state=618,this.match(Er.AVG);break;case Er.COUNT:e=new Yn(e),this.enterOuterAlt(e,2),this.state=619,this.match(Er.COUNT);break;case Er.SUM:e=new Zn(e),this.enterOuterAlt(e,3),this.state=620,this.match(Er.SUM);break;case Er.MIN:e=new Xn(e),this.enterOuterAlt(e,4),this.state=621,this.match(Er.MIN);break;case Er.MAX:e=new Jn(e),this.enterOuterAlt(e,5),this.state=622,this.match(Er.MAX);break;case Er.RATE:e=new ea(e),this.enterOuterAlt(e,6),this.state=623,this.match(Er.RATE);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}quantize(){let e,t=new ta(this._ctx,this.state);this.enterRule(t,64,Er.RULE_quantize);try{this.enterOuterAlt(t,1),this.state=626,this.match(Er.QUANTIZE),this.state=628,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=627,this.match(Er.WS),this.state=630,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);if(this.state=638,this._errHandler.sync(this),e=this._input.LA(1),e===Er.TO){this.state=632,this.match(Er.TO),this.state=634,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=633,this.match(Er.WS),this.state=636,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS)}switch(this.state=640,this.positiveTimeDuration(),this.state=653,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,85,this._ctx)){case 1:this.state=642,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=641,this.match(Er.WS),this.state=644,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=646,this.match(Er.USING),this.state=648,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=647,this.match(Er.WS),this.state=650,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=652,this.rollupFn()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}timeslice(){let e,t=new ia(this._ctx,this.state);this.enterRule(t,66,Er.RULE_timeslice);try{switch(this.enterOuterAlt(t,1),this.state=655,this.match(Er.TIMESLICE),this.state=662,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,87,this._ctx)){case 1:this.state=657,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=656,this.match(Er.WS),this.state=659,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=661,this.rollupFn()}this.state=665,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=664,this.match(Er.WS),this.state=667,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=669,this.match(Er.OVER),this.state=671,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=670,this.match(Er.WS),this.state=673,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=675,this.positiveTimeDuration()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}rollup(){let e,t=new ra(this._ctx,this.state);this.enterRule(t,68,Er.RULE_rollup);try{this.enterOuterAlt(t,1),this.state=677,this.match(Er.QUANTIZE),this.state=679,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=678,this.match(Er.WS),this.state=681,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=683,this.match(Er.USING),this.state=685,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=684,this.match(Er.WS),this.state=687,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=689,this.rollupFn()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}accum(){let e=new na(this._ctx,this.state);this.enterRule(e,70,Er.RULE_accum);try{e=new aa(e),this.enterOuterAlt(e,1),this.state=691,this.match(Er.ACCUM)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}parse(){let e,t=new sa(this._ctx,this.state);this.enterRule(t,72,Er.RULE_parse);try{switch(this.state=767,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,105,this._ctx)){case 1:t=new oa(t),this.enterOuterAlt(t,1),this.state=693,this.match(Er.PARSE),this.state=695,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=694,this.match(Er.WS),this.state=697,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);for(this.state=699,this.match(Er.FIELD),this.state=703,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=700,this.match(Er.WS),this.state=705,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=706,this.match(Er.EQ),this.state=710,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=707,this.match(Er.WS),this.state=712,this._errHandler.sync(this),e=this._input.LA(1);this.state=713,this.dimensionKey(),this.state=715,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=714,this.match(Er.WS),this.state=717,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=719,this.singleDimensionValueExpr(),this.state=721,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=720,this.match(Er.WS),this.state=723,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=725,this.match(Er.AS),this.state=727,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=726,this.match(Er.WS),this.state=729,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);switch(this.state=731,this.dimensionKeyList(),this.state=738,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,99,this._ctx)){case 1:this.state=733,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=732,this.match(Er.WS),this.state=735,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=737,this.match(Er.NODROP)}break;case 2:t=new la(t),this.enterOuterAlt(t,2),this.state=740,this.match(Er.PARSE),this.state=742,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=741,this.match(Er.WS),this.state=744,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=746,this.metricNameSelector(),this.state=748,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=747,this.match(Er.WS),this.state=750,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=752,this.match(Er.AS),this.state=754,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=753,this.match(Er.WS),this.state=756,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);switch(this.state=758,this.dimensionKeyList(),this.state=765,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,104,this._ctx)){case 1:this.state=760,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=759,this.match(Er.WS),this.state=762,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=764,this.match(Er.NODROP)}}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}rate(){let e,t=new ca(this._ctx,this.state);this.enterRule(t,74,Er.RULE_rate);try{switch(t=new da(t),this.enterOuterAlt(t,1),this.state=769,this.match(Er.RATE),this.state=776,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,107,this._ctx)){case 1:this.state=771,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=770,this.match(Er.WS),this.state=773,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=775,this.rateModifier()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}rateModifier(){let e=new ua(this._ctx,this.state);this.enterRule(e,76,Er.RULE_rateModifier);try{switch(this.state=780,this._errHandler.sync(this),this._input.LA(1)){case Er.INCREASING:e=new pa(e),this.enterOuterAlt(e,1),this.state=778,this.match(Er.INCREASING);break;case Er.DECREASING:e=new ha(e),this.enterOuterAlt(e,2),this.state=779,this.match(Er.DECREASING);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}delta(){let e=new ma(this._ctx,this.state);this.enterRule(e,78,Er.RULE_delta);try{e=new ga(e),this.enterOuterAlt(e,1),this.state=782,this.match(Er.DELTA)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}eval(){let e,t=new ya(this._ctx,this.state);this.enterRule(t,80,Er.RULE_eval);try{this.enterOuterAlt(t,1),this.state=784,this.match(Er.EVAL),this.state=786,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=785,this.match(Er.WS),this.state=788,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=790,this.evalExp()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}topBottom(){let e,t=new va(this._ctx,this.state);this.enterRule(t,82,Er.RULE_topBottom);try{for(this.enterOuterAlt(t,1),this.state=792,e=this._input.LA(1),e===Er.TOPK||e===Er.BOTTOMK?(this._input.LA(1)===we.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=796,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=793,this.match(Er.WS),this.state=798,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=799,this.match(Er.LPAREN),this.state=803,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=800,this.match(Er.WS),this.state=805,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=806,this.positiveInteger(),this.state=810,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=807,this.match(Er.WS),this.state=812,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=813,this.match(Er.COMMA),this.state=817,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=814,this.match(Er.WS),this.state=819,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=820,this.reducerExp(),this.state=824,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=821,this.match(Er.WS),this.state=826,this._errHandler.sync(this),e=this._input.LA(1);switch(this.state=827,this.match(Er.RPAREN),this.state=840,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,117,this._ctx)){case 1:this.state=829,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=828,this.match(Er.WS),this.state=831,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=833,this.match(Er.BY),this.state=835,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=834,this.match(Er.WS),this.state=837,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=839,this.dimensionKeyList()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}filter(){let e,t=new fa(this._ctx,this.state);this.enterRule(t,84,Er.RULE_filter);try{for(this.enterOuterAlt(t,1),this.state=842,this.match(Er.FILTER),this.state=846,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=843,this.match(Er.WS),this.state=848,this._errHandler.sync(this),e=this._input.LA(1);this.state=849,this.reducerBoolExp()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}where(){let e,t=new _a(this._ctx,this.state);this.enterRule(t,86,Er.RULE_where);try{for(this.enterOuterAlt(t,1),this.state=851,this.match(Er.WHERE),this.state=855,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=852,this.match(Er.WS),this.state=857,this._errHandler.sync(this),e=this._input.LA(1);this.state=858,this.reducerBoolExp()}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}reducerFn(){let e,t=new Sa(this._ctx,this.state);this.enterRule(t,88,Er.RULE_reducerFn);try{switch(this.state=890,this._errHandler.sync(this),this._input.LA(1)){case Er.AVG:t=new ba(t),this.enterOuterAlt(t,1),this.state=860,this.match(Er.AVG);break;case Er.COUNT:t=new Ea(t),this.enterOuterAlt(t,2),this.state=861,this.match(Er.COUNT);break;case Er.SUM:t=new Ta(t),this.enterOuterAlt(t,3),this.state=862,this.match(Er.SUM);break;case Er.MIN:t=new xa(t),this.enterOuterAlt(t,4),this.state=863,this.match(Er.MIN);break;case Er.MAX:t=new Ca(t),this.enterOuterAlt(t,5),this.state=864,this.match(Er.MAX);break;case Er.STDDEV:t=new Aa(t),this.enterOuterAlt(t,6),this.state=865,this.match(Er.STDDEV);break;case Er.LATEST:t=new wa(t),this.enterOuterAlt(t,7),this.state=866,this.match(Er.LATEST);break;case Er.PCT:for(t=new Ia(t),this.enterOuterAlt(t,8),this.state=867,this.match(Er.PCT),this.state=871,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=868,this.match(Er.WS),this.state=873,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=874,this.match(Er.LPAREN),this.state=878,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=875,this.match(Er.WS),this.state=880,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=881,this.positiveNumber(),this.state=885,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=882,this.match(Er.WS),this.state=887,this._errHandler.sync(this),e=this._input.LA(1);this.state=888,this.match(Er.RPAREN);break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}mathFn(){let e=new Ra(this._ctx,this.state);this.enterRule(e,90,Er.RULE_mathFn);try{switch(this.state=904,this._errHandler.sync(this),this._input.LA(1)){case Er.SIN:e=new Da(e),this.enterOuterAlt(e,1),this.state=892,this.match(Er.SIN);break;case Er.COS:e=new Oa(e),this.enterOuterAlt(e,2),this.state=893,this.match(Er.COS);break;case Er.TAN:e=new Na(e),this.enterOuterAlt(e,3),this.state=894,this.match(Er.TAN);break;case Er.LOG:e=new Ma(e),this.enterOuterAlt(e,4),this.state=895,this.match(Er.LOG);break;case Er.CEIL:e=new ka(e),this.enterOuterAlt(e,5),this.state=896,this.match(Er.CEIL);break;case Er.FLOOR:e=new La(e),this.enterOuterAlt(e,6),this.state=897,this.match(Er.FLOOR);break;case Er.ROUND:e=new Pa(e),this.enterOuterAlt(e,7),this.state=898,this.match(Er.ROUND);break;case Er.ABS:e=new Fa(e),this.enterOuterAlt(e,8),this.state=899,this.match(Er.ABS);break;case Er.SQRT:e=new Ua(e),this.enterOuterAlt(e,9),this.state=900,this.match(Er.SQRT);break;case Er.EXP:e=new Va(e),this.enterOuterAlt(e,10),this.state=901,this.match(Er.EXP);break;case Er.MAX:e=new Ba(e),this.enterOuterAlt(e,11),this.state=902,this.match(Er.MAX);break;case Er.MIN:e=new $a(e),this.enterOuterAlt(e,12),this.state=903,this.match(Er.MIN);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}additiveOp(){let e=new Ha(this._ctx,this.state);this.enterRule(e,92,Er.RULE_additiveOp);try{switch(this.state=908,this._errHandler.sync(this),this._input.LA(1)){case Er.PLUS:e=new Wa(e),this.enterOuterAlt(e,1),this.state=906,this.match(Er.PLUS);break;case Er.MINUS:e=new qa(e),this.enterOuterAlt(e,2),this.state=907,this.match(Er.MINUS);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}multiplicativeOp(){let e=new ja(this._ctx,this.state);this.enterRule(e,94,Er.RULE_multiplicativeOp);try{switch(this.state=912,this._errHandler.sync(this),this._input.LA(1)){case Er.MULT:e=new Qa(e),this.enterOuterAlt(e,1),this.state=910,this.match(Er.MULT);break;case Er.DIV:e=new za(e),this.enterOuterAlt(e,2),this.state=911,this.match(Er.DIV);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}atomicExp(){let e,t=new Ga(this._ctx,this.state);this.enterRule(t,96,Er.RULE_atomicExp);try{let i;switch(this.state=968,this._errHandler.sync(this),this._input.LA(1)){case Er.UNSIGNED_INTEGER:case Er.PLUS_INTEGER:case Er.MINUS_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.PLUS_DECIMAL:case Er.MINUS_DECIMAL:t=new Ka(t),this.enterOuterAlt(t,1),this.state=914,this.number();break;case Er.ROW_IDENT:t=new Ya(t),this.enterOuterAlt(t,2),this.state=915,this.rowVar();break;case Er.MAX:case Er.MIN:case Er.SIN:case Er.COS:case Er.TAN:case Er.LOG:case Er.CEIL:case Er.FLOOR:case Er.ROUND:case Er.ABS:case Er.SQRT:case Er.EXP:for(t=new Za(t),this.enterOuterAlt(t,3),this.state=916,this.mathFn(),this.state=917,this.match(Er.LPAREN),this.state=921,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=918,this.match(Er.WS),this.state=923,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=924,this.exp(),this.state=941,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,130,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i){for(this.state=928,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=925,this.match(Er.WS),this.state=930,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=931,this.match(Er.COMMA),this.state=935,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=932,this.match(Er.WS),this.state=937,this._errHandler.sync(this),e=this._input.LA(1);this.state=938,this.exp()}this.state=943,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,130,this._ctx)}for(this.state=947,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=944,this.match(Er.WS),this.state=949,this._errHandler.sync(this),e=this._input.LA(1);this.state=950,this.match(Er.RPAREN);break;case Er.LPAREN:for(t=new Xa(t),this.enterOuterAlt(t,4),this.state=952,this.match(Er.LPAREN),this.state=956,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=953,this.match(Er.WS),this.state=958,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=959,this.exp(),this.state=963,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=960,this.match(Er.WS),this.state=965,this._errHandler.sync(this),e=this._input.LA(1);this.state=966,this.match(Er.RPAREN);break;default:throw new be.NoViableAltException(this)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}additiveExp(e){void 0===e&&(e=0);let t,i=this._ctx,r=this.state,n=new Ja(this._ctx,r),a=n;this.enterRecursionRule(n,98,Er.RULE_additiveExp,e);try{let e;for(this.enterOuterAlt(n,1),n=new ts(n),this._ctx=n,a=n,this.state=971,this.multiplicativeExp(0),this._ctx._stop=this._input.tryLT(-1),this.state=991,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,137,this._ctx);2!==e&&e!==me.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),a=n,n=new es(new Ja(i,r)),this.pushNewRecursionContext(n,98,Er.RULE_additiveExp),this.state=973,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");for(this.state=977,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=974,this.match(Er.WS),this.state=979,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=980,this.additiveOp(),this.state=984,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=981,this.match(Er.WS),this.state=986,this._errHandler.sync(this),t=this._input.LA(1);this.state=987,this.multiplicativeExp(0)}this.state=993,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,137,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(i)}return n}multiplicativeExp(e){void 0===e&&(e=0);let t,i=this._ctx,r=this.state,n=new is(this._ctx,r),a=n;this.enterRecursionRule(n,100,Er.RULE_multiplicativeExp,e);try{let e;for(this.enterOuterAlt(n,1),n=new ns(n),this._ctx=n,a=n,this.state=995,this.atomicExp(),this._ctx._stop=this._input.tryLT(-1),this.state=1015,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,140,this._ctx);2!==e&&e!==me.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),a=n,n=new rs(new is(i,r)),this.pushNewRecursionContext(n,100,Er.RULE_multiplicativeExp),this.state=997,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");for(this.state=1001,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=998,this.match(Er.WS),this.state=1003,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=1004,this.multiplicativeOp(),this.state=1008,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=1005,this.match(Er.WS),this.state=1010,this._errHandler.sync(this),t=this._input.LA(1);this.state=1011,this.atomicExp()}this.state=1017,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,140,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(i)}return n}exp(){let e=new as(this._ctx,this.state);this.enterRule(e,102,Er.RULE_exp);try{e=new ss(e),this.enterOuterAlt(e,1),this.state=1018,this.additiveExp(0)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}atomicEvalExp(){let e,t=new os(this._ctx,this.state);this.enterRule(t,104,Er.RULE_atomicEvalExp);try{let i;switch(this.state=1081,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,149,this._ctx)){case 1:t=new ls(t),this.enterOuterAlt(t,1),this.state=1020,this.number();break;case 2:t=new cs(t),this.enterOuterAlt(t,2),this.state=1021,this.match(Er.UNDERSCORE_VALUE);break;case 3:t=new ds(t),this.enterOuterAlt(t,3),this.state=1022,this.reducerFn();break;case 4:for(t=new us(t),this.enterOuterAlt(t,4),this.state=1023,this.mathFn(),this.state=1027,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1024,this.match(Er.WS),this.state=1029,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1030,this.match(Er.LPAREN),this.state=1034,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1031,this.match(Er.WS),this.state=1036,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1037,this.evalExp(),this.state=1054,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,145,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i){for(this.state=1041,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1038,this.match(Er.WS),this.state=1043,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1044,this.match(Er.COMMA),this.state=1048,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1045,this.match(Er.WS),this.state=1050,this._errHandler.sync(this),e=this._input.LA(1);this.state=1051,this.evalExp()}this.state=1056,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,145,this._ctx)}for(this.state=1060,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1057,this.match(Er.WS),this.state=1062,this._errHandler.sync(this),e=this._input.LA(1);this.state=1063,this.match(Er.RPAREN);break;case 5:for(t=new ps(t),this.enterOuterAlt(t,5),this.state=1065,this.match(Er.LPAREN),this.state=1069,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1066,this.match(Er.WS),this.state=1071,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1072,this.evalExp(),this.state=1076,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1073,this.match(Er.WS),this.state=1078,this._errHandler.sync(this),e=this._input.LA(1);this.state=1079,this.match(Er.RPAREN)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}additiveEvalExp(e){void 0===e&&(e=0);let t,i=this._ctx,r=this.state,n=new hs(this._ctx,r),a=n;this.enterRecursionRule(n,106,Er.RULE_additiveEvalExp,e);try{let e;for(this.enterOuterAlt(n,1),n=new gs(n),this._ctx=n,a=n,this.state=1084,this.multiplicativeEvalExp(0),this._ctx._stop=this._input.tryLT(-1),this.state=1104,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,152,this._ctx);2!==e&&e!==me.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),a=n,n=new ms(new hs(i,r)),this.pushNewRecursionContext(n,106,Er.RULE_additiveEvalExp),this.state=1086,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");for(this.state=1090,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=1087,this.match(Er.WS),this.state=1092,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=1093,this.additiveOp(),this.state=1097,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=1094,this.match(Er.WS),this.state=1099,this._errHandler.sync(this),t=this._input.LA(1);this.state=1100,this.multiplicativeEvalExp(0)}this.state=1106,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,152,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(i)}return n}multiplicativeEvalExp(e){void 0===e&&(e=0);let t,i=this._ctx,r=this.state,n=new ys(this._ctx,r),a=n;this.enterRecursionRule(n,108,Er.RULE_multiplicativeEvalExp,e);try{let e;for(this.enterOuterAlt(n,1),n=new fs(n),this._ctx=n,a=n,this.state=1108,this.atomicEvalExp(),this._ctx._stop=this._input.tryLT(-1),this.state=1128,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,155,this._ctx);2!==e&&e!==me.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),a=n,n=new vs(new ys(i,r)),this.pushNewRecursionContext(n,108,Er.RULE_multiplicativeEvalExp),this.state=1110,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");for(this.state=1114,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=1111,this.match(Er.WS),this.state=1116,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=1117,this.multiplicativeOp(),this.state=1121,this._errHandler.sync(this),t=this._input.LA(1);t===Er.WS;)this.state=1118,this.match(Er.WS),this.state=1123,this._errHandler.sync(this),t=this._input.LA(1);this.state=1124,this.atomicEvalExp()}this.state=1130,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,155,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(i)}return n}evalExp(){let e=new _s(this._ctx,this.state);this.enterRule(e,110,Er.RULE_evalExp);try{e=new Ss(e),this.enterOuterAlt(e,1),this.state=1131,this.additiveEvalExp(0)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}atomicReducerExp(){let e,t=new bs(this._ctx,this.state);this.enterRule(t,112,Er.RULE_atomicReducerExp);try{let i;switch(this.state=1194,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,164,this._ctx)){case 1:t=new Es(t),this.enterOuterAlt(t,1),this.state=1133,this.number();break;case 2:t=new Ts(t),this.enterOuterAlt(t,2),this.state=1134,this.match(Er.UNDERSCORE_VALUE);break;case 3:for(t=new xs(t),this.enterOuterAlt(t,3),this.state=1135,this.mathFn(),this.state=1139,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1136,this.match(Er.WS),this.state=1141,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1142,this.match(Er.LPAREN),this.state=1146,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1143,this.match(Er.WS),this.state=1148,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1149,this.reducerExp(),this.state=1166,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,160,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;){if(1===i){for(this.state=1153,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1150,this.match(Er.WS),this.state=1155,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1156,this.match(Er.COMMA),this.state=1160,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1157,this.match(Er.WS),this.state=1162,this._errHandler.sync(this),e=this._input.LA(1);this.state=1163,this.reducerExp()}this.state=1168,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,160,this._ctx)}for(this.state=1172,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1169,this.match(Er.WS),this.state=1174,this._errHandler.sync(this),e=this._input.LA(1);this.state=1175,this.match(Er.RPAREN);break;case 4:t=new Cs(t),this.enterOuterAlt(t,4),this.state=1177,this.reducerFn();break;case 5:for(t=new As(t),this.enterOuterAlt(t,5),this.state=1178,this.match(Er.LPAREN),this.state=1182,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1179,this.match(Er.WS),this.state=1184,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1185,this.reducerExp(),this.state=1189,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1186,this.match(Er.WS),this.state=1191,this._errHandler.sync(this),e=this._input.LA(1);this.state=1192,this.match(Er.RPAREN)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}additiveReducerExp(e){void 0===e&&(e=0);let t=this._ctx,i=this.state,r=new ws(this._ctx,i),n=r;this.enterRecursionRule(r,114,Er.RULE_additiveReducerExp,e);try{let e;for(this.enterOuterAlt(r,1),r=new Rs(r),this._ctx=r,n=r,this.state=1197,this.multiplicativeReducerExp(0),this._ctx._stop=this._input.tryLT(-1),this.state=1205,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,165,this._ctx);2!==e&&e!==me.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),n=r,r=new Is(new ws(t,i)),this.pushNewRecursionContext(r,114,Er.RULE_additiveReducerExp),this.state=1199,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");this.state=1200,this.additiveOp(),this.state=1201,this.multiplicativeReducerExp(0)}this.state=1207,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,165,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;r.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return r}multiplicativeReducerExp(e){void 0===e&&(e=0);let t=this._ctx,i=this.state,r=new Ds(this._ctx,i),n=r;this.enterRecursionRule(r,116,Er.RULE_multiplicativeReducerExp,e);try{let e;for(this.enterOuterAlt(r,1),r=new Ns(r),this._ctx=r,n=r,this.state=1209,this.atomicReducerExp(),this._ctx._stop=this._input.tryLT(-1),this.state=1217,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,166,this._ctx);2!==e&&e!==me.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),n=r,r=new Os(new Ds(t,i)),this.pushNewRecursionContext(r,116,Er.RULE_multiplicativeReducerExp),this.state=1211,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");this.state=1212,this.multiplicativeOp(),this.state=1213,this.atomicReducerExp()}this.state=1219,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,166,this._ctx)}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;r.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return r}reducerExp(){let e=new Ms(this._ctx,this.state);this.enterRule(e,118,Er.RULE_reducerExp);try{e=new ks(e),this.enterOuterAlt(e,1),this.state=1220,this.additiveReducerExp(0)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}reducerBoolExp(){let e,t=new Ls(this._ctx,this.state);this.enterRule(t,120,Er.RULE_reducerBoolExp);try{switch(t=new Ps(t),this.enterOuterAlt(t,1),this.state=1222,this.reducerBoolTerm(),this.state=1235,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,169,this._ctx)){case 1:this.state=1224,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1223,this.match(Er.WS),this.state=1226,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1228,this.match(Er.OR),this.state=1230,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1229,this.match(Er.WS),this.state=1232,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1234,this.reducerBoolTerm()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}reducerBoolTerm(){let e,t=new Fs(this._ctx,this.state);this.enterRule(t,122,Er.RULE_reducerBoolTerm);try{switch(t=new Us(t),this.enterOuterAlt(t,1),this.state=1237,this.reducerBoolFactor(),this.state=1250,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,172,this._ctx)){case 1:this.state=1239,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1238,this.match(Er.WS),this.state=1241,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1243,this.match(Er.AND),this.state=1245,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1244,this.match(Er.WS),this.state=1247,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1249,this.reducerBoolFactor()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}reducerBoolFactor(){let e,t=new Vs(this._ctx,this.state);this.enterRule(t,124,Er.RULE_reducerBoolFactor);try{switch(this.state=1293,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,178,this._ctx)){case 1:for(t=new Bs(t),this.enterOuterAlt(t,1),this.state=1252,this.match(Er.EXCLAM),this.state=1256,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1253,this.match(Er.WS),this.state=1258,this._errHandler.sync(this),e=this._input.LA(1);this.state=1259,this.reducerBoolFactor();break;case 2:for(t=new $s(t),this.enterOuterAlt(t,2),this.state=1260,this.match(Er.LPAREN),this.state=1264,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1261,this.match(Er.WS),this.state=1266,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1267,this.reducerBoolExp(),this.state=1271,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1268,this.match(Er.WS),this.state=1273,this._errHandler.sync(this),e=this._input.LA(1);this.state=1274,this.match(Er.RPAREN);break;case 3:for(t=new Hs(t),this.enterOuterAlt(t,3),this.state=1276,this.reducerExp(),this.state=1280,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1277,this.match(Er.WS),this.state=1282,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1283,this.comparator(),this.state=1287,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1284,this.match(Er.WS),this.state=1289,this._errHandler.sync(this),e=this._input.LA(1);this.state=1290,this.reducerExp();break;case 4:t=new Ws(t),this.enterOuterAlt(t,4),this.state=1292,this.booleanValue()}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}booleanValue(){let e,t=new qs(this._ctx,this.state);this.enterRule(t,126,Er.RULE_booleanValue);try{this.enterOuterAlt(t,1),this.state=1295,e=this._input.LA(1),e===Er.TRUE||e===Er.FALSE?(this._input.LA(1)===we.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}comparator(){let e,t=new js(this._ctx,this.state);this.enterRule(t,128,Er.RULE_comparator);try{this.enterOuterAlt(t,1),this.state=1297,e=this._input.LA(1),0==(-32&e)&&0!=(1<<e&(1<<Er.EQ|1<<Er.NE|1<<Er.LT|1<<Er.LE|1<<Er.GT|1<<Er.GE))?(this._input.LA(1)===we.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}join(){let e,t=new Qs(this._ctx,this.state);this.enterRule(t,130,Er.RULE_join);try{let i;switch(this.state=1349,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,189,this._ctx)){case 1:for(t=new zs(t),this.enterOuterAlt(t,1),this.state=1299,this.exp(),this.state=1303,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,179,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=1300,this.match(Er.WS)),this.state=1305,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,179,this._ctx);if(this.state=1313,this._errHandler.sync(this),e=this._input.LA(1),e===Er.ALONG){this.state=1306,this.match(Er.ALONG),this.state=1308,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1307,this.match(Er.WS),this.state=1310,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1312,this.dimensionKeyList()}if(this.state=1322,this._errHandler.sync(this),e=this._input.LA(1),e===Er.AS){this.state=1315,this.match(Er.AS),this.state=1317,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1316,this.match(Er.WS),this.state=1319,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1321,this.metricIdentifier()}break;case 2:for(t=new Gs(t),this.enterOuterAlt(t,2),this.state=1324,this.exp(),this.state=1328,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,184,this._ctx);2!==i&&i!==me.ATN.INVALID_ALT_NUMBER;)1===i&&(this.state=1325,this.match(Er.WS)),this.state=1330,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,184,this._ctx);if(this.state=1338,this._errHandler.sync(this),e=this._input.LA(1),e===Er.AS){this.state=1331,this.match(Er.AS),this.state=1333,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1332,this.match(Er.WS),this.state=1335,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1337,this.metricIdentifier()}if(this.state=1347,this._errHandler.sync(this),e=this._input.LA(1),e===Er.ALONG){this.state=1340,this.match(Er.ALONG),this.state=1342,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=1341,this.match(Er.WS),this.state=1344,this._errHandler.sync(this),e=this._input.LA(1)}while(e===Er.WS);this.state=1346,this.dimensionKeyList()}}}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}rowVar(){let e=new Ks(this._ctx,this.state);this.enterRule(e,132,Er.RULE_rowVar);try{this.enterOuterAlt(e,1),this.state=1351,this.match(Er.ROW_IDENT)}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}header(){let e=new Ys(this._ctx,this.state);this.enterRule(e,134,Er.RULE_header);try{switch(this.state=1356,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,190,this._ctx)){case 1:e=new Zs(e),this.enterOuterAlt(e,1),this.state=1353,this.join();break;case 2:e=new Xs(e),this.enterOuterAlt(e,2),this.state=1354,this.rowVar();break;case 3:e=new Js(e),this.enterOuterAlt(e,3),this.state=1355,this.select()}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}queryClause(){let e=new eo(this._ctx,this.state);this.enterRule(e,136,Er.RULE_queryClause);try{switch(this.state=1375,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,191,this._ctx)){case 1:e=new to(e),this.enterOuterAlt(e,1),this.state=1358,this.aggregate();break;case 2:e=new io(e),this.enterOuterAlt(e,2),this.state=1359,this.rollup();break;case 3:e=new ro(e),this.enterOuterAlt(e,3),this.state=1360,this.quantize();break;case 4:e=new no(e),this.enterOuterAlt(e,4),this.state=1361,this.timeShift();break;case 5:e=new ao(e),this.enterOuterAlt(e,5),this.state=1362,this.accum();break;case 6:e=new so(e),this.enterOuterAlt(e,6),this.state=1363,this.parse();break;case 7:e=new oo(e),this.enterOuterAlt(e,7),this.state=1364,this.rate();break;case 8:e=new lo(e),this.enterOuterAlt(e,8),this.state=1365,this.delta();break;case 9:e=new co(e),this.enterOuterAlt(e,9),this.state=1366,this.eval();break;case 10:e=new uo(e),this.enterOuterAlt(e,10),this.state=1367,this.topBottom();break;case 11:e=new po(e),this.enterOuterAlt(e,11),this.state=1368,this.filter();break;case 12:e=new ho(e),this.enterOuterAlt(e,12),this.state=1369,this.histogramQuantile();break;case 13:e=new mo(e),this.enterOuterAlt(e,13),this.state=1370,this.outlier();break;case 14:e=new go(e),this.enterOuterAlt(e,14),this.state=1371,this.fillmissing();break;case 15:e=new yo(e),this.enterOuterAlt(e,15),this.state=1372,this.where();break;case 16:e=new vo(e),this.enterOuterAlt(e,16),this.state=1373,this.timeslice();break;case 17:e=new fo(e),this.enterOuterAlt(e,17),this.state=1374,this.ewma()}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}queryRow(){let e,t=new _o(this._ctx,this.state);this.enterRule(t,138,Er.RULE_queryRow);try{for(this.enterOuterAlt(t,1),this.state=1377,this.header(),this.state=1394,this._errHandler.sync(this),e=this._input.LA(1);e===Er.PIPE||e===Er.WS;){for(this.state=1381,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1378,this.match(Er.WS),this.state=1383,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=1384,this.match(Er.PIPE),this.state=1388,this._errHandler.sync(this),e=this._input.LA(1);e===Er.WS;)this.state=1385,this.match(Er.WS),this.state=1390,this._errHandler.sync(this),e=this._input.LA(1);this.state=1391,this.queryClause(),this.state=1396,this._errHandler.sync(this),e=this._input.LA(1)}this.state=1397,this.match(Er.EOF)}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}graphiteMetricIdentifier(){let e=new So(this._ctx,this.state);this.enterRule(e,140,Er.RULE_graphiteMetricIdentifier);try{switch(this.state=1409,this._errHandler.sync(this),this._input.LA(1)){case Er.EQ:case Er.NE:case Er.LT:case Er.LE:case Er.GT:case Er.GE:case Er.AVG:case Er.COUNT:case Er.DELTA:case Er.MAX:case Er.MIN:case Er.PCT:case Er.OUTLIER:case Er.FILLMISSING:case Er.EMPTY:case Er.INTERPOLATION:case Er.LAST:case Er.STDDEV:case Er.LATEST:case Er.RATE:case Er.SUM:case Er.ALONG:case Er.AS:case Er.BY:case Er.TO:case Er.USING:case Er.EVAL:case Er.TOPK:case Er.BOTTOMK:case Er.SIN:case Er.COS:case Er.TAN:case Er.LOG:case Er.CEIL:case Er.FLOOR:case Er.ROUND:case Er.ABS:case Er.SQRT:case Er.EXP:case Er.FILTER:case Er.WINDOW:case Er.THRESHOLD:case Er.DIRECTION:case Er.WHERE:case Er.TIMESLICE:case Er.OVER:case Er.EWMA:case Er.SPAN:case Er.ALPHA:case Er.TIMESHIFT:case Er.QUANTIZE:case Er.ACCUM:case Er.PARSE:case Er.FIELD:case Er.NODROP:case Er.INCREASING:case Er.DECREASING:case Er.HISTOGRAM_QUANTILE:e=new bo(e),this.enterOuterAlt(e,1),this.state=1399,this.keyword();break;case Er.MINUS:e=new Eo(e),this.enterOuterAlt(e,2),this.state=1400,this.match(Er.MINUS);break;case Er.PLUS:e=new To(e),this.enterOuterAlt(e,3),this.state=1401,this.match(Er.PLUS);break;case Er.DIV:e=new xo(e),this.enterOuterAlt(e,4),this.state=1402,this.match(Er.DIV);break;case Er.UNSIGNED_INTEGER:e=new Co(e),this.enterOuterAlt(e,5),this.state=1403,this.match(Er.UNSIGNED_INTEGER);break;case Er.UNSIGNED_DECIMAL:e=new Ao(e),this.enterOuterAlt(e,6),this.state=1404,this.match(Er.UNSIGNED_DECIMAL);break;case Er.TIMEUNIT:e=new wo(e),this.enterOuterAlt(e,7),this.state=1405,this.match(Er.TIMEUNIT);break;case Er.UNSIGNED_TIME_DURATION:e=new Io(e),this.enterOuterAlt(e,8),this.state=1406,this.match(Er.UNSIGNED_TIME_DURATION);break;case Er.UNDERSCORE_VALUE:e=new Ro(e),this.enterOuterAlt(e,9),this.state=1407,this.match(Er.UNDERSCORE_VALUE);break;case Er.GRAPHITE_METRIC_IDENT:e=new Do(e),this.enterOuterAlt(e,10),this.state=1408,this.match(Er.GRAPHITE_METRIC_IDENT);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}graphiteMetricWildcardIdentifier(){let e=new Oo(this._ctx,this.state);this.enterRule(e,142,Er.RULE_graphiteMetricWildcardIdentifier);try{switch(this.state=1414,this._errHandler.sync(this),this._input.LA(1)){case Er.EQ:case Er.NE:case Er.LT:case Er.LE:case Er.GT:case Er.GE:case Er.PLUS:case Er.MINUS:case Er.DIV:case Er.AVG:case Er.COUNT:case Er.DELTA:case Er.MAX:case Er.MIN:case Er.PCT:case Er.OUTLIER:case Er.FILLMISSING:case Er.EMPTY:case Er.INTERPOLATION:case Er.LAST:case Er.STDDEV:case Er.LATEST:case Er.RATE:case Er.SUM:case Er.ALONG:case Er.AS:case Er.BY:case Er.TO:case Er.USING:case Er.EVAL:case Er.TOPK:case Er.BOTTOMK:case Er.SIN:case Er.COS:case Er.TAN:case Er.LOG:case Er.CEIL:case Er.FLOOR:case Er.ROUND:case Er.ABS:case Er.SQRT:case Er.EXP:case Er.FILTER:case Er.WINDOW:case Er.THRESHOLD:case Er.DIRECTION:case Er.WHERE:case Er.TIMESLICE:case Er.OVER:case Er.EWMA:case Er.SPAN:case Er.ALPHA:case Er.TIMESHIFT:case Er.QUANTIZE:case Er.ACCUM:case Er.PARSE:case Er.FIELD:case Er.NODROP:case Er.INCREASING:case Er.DECREASING:case Er.HISTOGRAM_QUANTILE:case Er.TIMEUNIT:case Er.UNSIGNED_INTEGER:case Er.UNSIGNED_DECIMAL:case Er.UNSIGNED_TIME_DURATION:case Er.UNDERSCORE_VALUE:case Er.GRAPHITE_METRIC_IDENT:e=new No(e),this.enterOuterAlt(e,1),this.state=1411,this.graphiteMetricIdentifier();break;case Er.MULT:e=new Mo(e),this.enterOuterAlt(e,2),this.state=1412,this.match(Er.MULT);break;case Er.GRAPHITE_METRIC_WILDCARD_IDENT:e=new ko(e),this.enterOuterAlt(e,3),this.state=1413,this.match(Er.GRAPHITE_METRIC_WILDCARD_IDENT);break;default:throw new be.NoViableAltException(this)}}catch(t){if(!(t instanceof Ce.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}reservedKeyword(){let e,t=new Lo(this._ctx,this.state);this.enterRule(t,144,Er.RULE_reservedKeyword);try{this.enterOuterAlt(t,1),this.state=1416,e=this._input.LA(1),0==(e-35&-32)&&0!=(1<<e-35&(1<<Er.OR-35|1<<Er.AND-35|1<<Er.NOT-35))?(this._input.LA(1)===we.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}keyword(){let e,t=new Po(this._ctx,this.state);this.enterRule(t,146,Er.RULE_keyword);try{this.enterOuterAlt(t,1),this.state=1418,e=this._input.LA(1),0==(-32&e)&&0!=(1<<e&(1<<Er.EQ|1<<Er.NE|1<<Er.LT|1<<Er.LE|1<<Er.GT|1<<Er.GE|1<<Er.AVG|1<<Er.COUNT|1<<Er.DELTA|1<<Er.MAX|1<<Er.MIN|1<<Er.PCT|1<<Er.OUTLIER|1<<Er.FILLMISSING|1<<Er.EMPTY|1<<Er.INTERPOLATION|1<<Er.LAST|1<<Er.STDDEV|1<<Er.LATEST|1<<Er.RATE|1<<Er.SUM))||0==(e-32&-32)&&0!=(1<<e-32&(1<<Er.ALONG-32|1<<Er.AS-32|1<<Er.BY-32|1<<Er.TO-32|1<<Er.USING-32|1<<Er.EVAL-32|1<<Er.TOPK-32|1<<Er.BOTTOMK-32|1<<Er.SIN-32|1<<Er.COS-32|1<<Er.TAN-32|1<<Er.LOG-32|1<<Er.CEIL-32|1<<Er.FLOOR-32|1<<Er.ROUND-32|1<<Er.ABS-32|1<<Er.SQRT-32|1<<Er.EXP-32|1<<Er.FILTER-32|1<<Er.WINDOW-32|1<<Er.THRESHOLD-32|1<<Er.DIRECTION-32|1<<Er.WHERE-32|1<<Er.TIMESLICE-32|1<<Er.OVER-32|1<<Er.EWMA-32|1<<Er.SPAN-32|1<<Er.ALPHA-32|1<<Er.TIMESHIFT-32))||0==(e-64&-32)&&0!=(1<<e-64&(1<<Er.QUANTIZE-64|1<<Er.ACCUM-64|1<<Er.PARSE-64|1<<Er.FIELD-64|1<<Er.NODROP-64|1<<Er.INCREASING-64|1<<Er.DECREASING-64|1<<Er.HISTOGRAM_QUANTILE-64))?(this._input.LA(1)===we.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(e){if(!(e instanceof Ce.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}sempred(e,t,i){switch(t){case 49:return this.additiveExp_sempred(e,i);case 50:return this.multiplicativeExp_sempred(e,i);case 53:return this.additiveEvalExp_sempred(e,i);case 54:return this.multiplicativeEvalExp_sempred(e,i);case 57:return this.additiveReducerExp_sempred(e,i);case 58:return this.multiplicativeReducerExp_sempred(e,i)}return!0}additiveExp_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,2)}return!0}multiplicativeExp_sempred(e,t){switch(t){case 1:return this.precpred(this._ctx,2)}return!0}additiveEvalExp_sempred(e,t){switch(t){case 2:return this.precpred(this._ctx,2)}return!0}multiplicativeEvalExp_sempred(e,t){switch(t){case 3:return this.precpred(this._ctx,2)}return!0}additiveReducerExp_sempred(e,t){switch(t){case 4:return this.precpred(this._ctx,2)}return!0}multiplicativeReducerExp_sempred(e,t){switch(t){case 5:return this.precpred(this._ctx,2)}return!0}static get _ATN(){return Er.__ATN||(Er.__ATN=(new ge.ATNDeserializer).deserialize(_e.toCharArray(Er._serializedATN))),Er.__ATN}};let Tr=Er;Tr.EXCLAM=1,Tr.LPAREN=2,Tr.RPAREN=3,Tr.COMMA=4,Tr.EQ=5,Tr.NE=6,Tr.LT=7,Tr.LE=8,Tr.GT=9,Tr.GE=10,Tr.PIPE=11,Tr.PLUS=12,Tr.MINUS=13,Tr.PLUSMINUS=14,Tr.MULT=15,Tr.DIV=16,Tr.AVG=17,Tr.COUNT=18,Tr.DELTA=19,Tr.MAX=20,Tr.MIN=21,Tr.PCT=22,Tr.OUTLIER=23,Tr.FILLMISSING=24,Tr.EMPTY=25,Tr.INTERPOLATION=26,Tr.LAST=27,Tr.STDDEV=28,Tr.LATEST=29,Tr.RATE=30,Tr.SUM=31,Tr.ALONG=32,Tr.AS=33,Tr.BY=34,Tr.OR=35,Tr.AND=36,Tr.NOT=37,Tr.TO=38,Tr.USING=39,Tr.EVAL=40,Tr.TOPK=41,Tr.BOTTOMK=42,Tr.SIN=43,Tr.COS=44,Tr.TAN=45,Tr.LOG=46,Tr.CEIL=47,Tr.FLOOR=48,Tr.ROUND=49,Tr.ABS=50,Tr.SQRT=51,Tr.EXP=52,Tr.FILTER=53,Tr.WINDOW=54,Tr.THRESHOLD=55,Tr.DIRECTION=56,Tr.WHERE=57,Tr.TIMESLICE=58,Tr.OVER=59,Tr.EWMA=60,Tr.SPAN=61,Tr.ALPHA=62,Tr.TIMESHIFT=63,Tr.QUANTIZE=64,Tr.ACCUM=65,Tr.PARSE=66,Tr.FIELD=67,Tr.NODROP=68,Tr.INCREASING=69,Tr.DECREASING=70,Tr.HISTOGRAM_QUANTILE=71,Tr.TRUE=72,Tr.FALSE=73,Tr.TIMEUNIT=74,Tr.STRING_LITERAL=75,Tr.UNSIGNED_INTEGER=76,Tr.PLUS_INTEGER=77,Tr.MINUS_INTEGER=78,Tr.UNSIGNED_DECIMAL=79,Tr.PLUS_DECIMAL=80,Tr.MINUS_DECIMAL=81,Tr.UNSIGNED_TIME_DURATION=82,Tr.PLUS_TIME_DURATION=83,Tr.MINUS_TIME_DURATION=84,Tr.UNDERSCORE_VALUE=85,Tr.COMMENT=86,Tr.BLOCK_COMMENT=87,Tr.GRAPHITE_METRIC_IDENT=88,Tr.GRAPHITE_METRIC_WILDCARD_IDENT=89,Tr.ROW_IDENT=90,Tr.WS=91,Tr.RULE_select=0,Tr.RULE_selectorBoolExp=1,Tr.RULE_selectorBoolTerm=2,Tr.RULE_selectorBoolFactor=3,Tr.RULE_selectorAtomicExp=4,Tr.RULE_selector=5,Tr.RULE_metricIdentifier=6,Tr.RULE_dimensionKey=7,Tr.RULE_dimensionKeyList=8,Tr.RULE_dimensionValueExpr=9,Tr.RULE_singleDimensionValueExpr=10,Tr.RULE_dimensionSelector=11,Tr.RULE_metricNameSelector=12,Tr.RULE_positiveInteger=13,Tr.RULE_negativeInteger=14,Tr.RULE_positiveNumber=15,Tr.RULE_negativeNumber=16,Tr.RULE_number=17,Tr.RULE_positiveTimeDuration=18,Tr.RULE_negativeTimeDuration=19,Tr.RULE_signedTimeDuration=20,Tr.RULE_timeShift=21,Tr.RULE_histogramQuantile=22,Tr.RULE_outlier=23,Tr.RULE_fillmissing=24,Tr.RULE_ewma=25,Tr.RULE_fillmissingParameter=26,Tr.RULE_outlierParameter=27,Tr.RULE_ewmaParameter=28,Tr.RULE_aggregatorFn=29,Tr.RULE_aggregate=30,Tr.RULE_rollupFn=31,Tr.RULE_quantize=32,Tr.RULE_timeslice=33,Tr.RULE_rollup=34,Tr.RULE_accum=35,Tr.RULE_parse=36,Tr.RULE_rate=37,Tr.RULE_rateModifier=38,Tr.RULE_delta=39,Tr.RULE_eval=40,Tr.RULE_topBottom=41,Tr.RULE_filter=42,Tr.RULE_where=43,Tr.RULE_reducerFn=44,Tr.RULE_mathFn=45,Tr.RULE_additiveOp=46,Tr.RULE_multiplicativeOp=47,Tr.RULE_atomicExp=48,Tr.RULE_additiveExp=49,Tr.RULE_multiplicativeExp=50,Tr.RULE_exp=51,Tr.RULE_atomicEvalExp=52,Tr.RULE_additiveEvalExp=53,Tr.RULE_multiplicativeEvalExp=54,Tr.RULE_evalExp=55,Tr.RULE_atomicReducerExp=56,Tr.RULE_additiveReducerExp=57,Tr.RULE_multiplicativeReducerExp=58,Tr.RULE_reducerExp=59,Tr.RULE_reducerBoolExp=60,Tr.RULE_reducerBoolTerm=61,Tr.RULE_reducerBoolFactor=62,Tr.RULE_booleanValue=63,Tr.RULE_comparator=64,Tr.RULE_join=65,Tr.RULE_rowVar=66,Tr.RULE_header=67,Tr.RULE_queryClause=68,Tr.RULE_queryRow=69,Tr.RULE_graphiteMetricIdentifier=70,Tr.RULE_graphiteMetricWildcardIdentifier=71,Tr.RULE_reservedKeyword=72,Tr.RULE_keyword=73,Tr.ruleNames=["select","selectorBoolExp","selectorBoolTerm","selectorBoolFactor","selectorAtomicExp","selector","metricIdentifier","dimensionKey","dimensionKeyList","dimensionValueExpr","singleDimensionValueExpr","dimensionSelector","metricNameSelector","positiveInteger","negativeInteger","positiveNumber","negativeNumber","number","positiveTimeDuration","negativeTimeDuration","signedTimeDuration","timeShift","histogramQuantile","outlier","fillmissing","ewma","fillmissingParameter","outlierParameter","ewmaParameter","aggregatorFn","aggregate","rollupFn","quantize","timeslice","rollup","accum","parse","rate","rateModifier","delta","eval","topBottom","filter","where","reducerFn","mathFn","additiveOp","multiplicativeOp","atomicExp","additiveExp","multiplicativeExp","exp","atomicEvalExp","additiveEvalExp","multiplicativeEvalExp","evalExp","atomicReducerExp","additiveReducerExp","multiplicativeReducerExp","reducerExp","reducerBoolExp","reducerBoolTerm","reducerBoolFactor","booleanValue","comparator","join","rowVar","header","queryClause","queryRow","graphiteMetricIdentifier","graphiteMetricWildcardIdentifier","reservedKeyword","keyword"],Tr._LITERAL_NAMES=[void 0,"'!'","'('","')'","','","'='","'!='","'<'","'<='","'>'","'>='","'|'","'+'","'-'","'+-'","'*'","'/'",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'_value'"],Tr._SYMBOLIC_NAMES=[void 0,"EXCLAM","LPAREN","RPAREN","COMMA","EQ","NE","LT","LE","GT","GE","PIPE","PLUS","MINUS","PLUSMINUS","MULT","DIV","AVG","COUNT","DELTA","MAX","MIN","PCT","OUTLIER","FILLMISSING","EMPTY","INTERPOLATION","LAST","STDDEV","LATEST","RATE","SUM","ALONG","AS","BY","OR","AND","NOT","TO","USING","EVAL","TOPK","BOTTOMK","SIN","COS","TAN","LOG","CEIL","FLOOR","ROUND","ABS","SQRT","EXP","FILTER","WINDOW","THRESHOLD","DIRECTION","WHERE","TIMESLICE","OVER","EWMA","SPAN","ALPHA","TIMESHIFT","QUANTIZE","ACCUM","PARSE","FIELD","NODROP","INCREASING","DECREASING","HISTOGRAM_QUANTILE","TRUE","FALSE","TIMEUNIT","STRING_LITERAL","UNSIGNED_INTEGER","PLUS_INTEGER","MINUS_INTEGER","UNSIGNED_DECIMAL","PLUS_DECIMAL","MINUS_DECIMAL","UNSIGNED_TIME_DURATION","PLUS_TIME_DURATION","MINUS_TIME_DURATION","UNDERSCORE_VALUE","COMMENT","BLOCK_COMMENT","GRAPHITE_METRIC_IDENT","GRAPHITE_METRIC_WILDCARD_IDENT","ROW_IDENT","WS"],Tr.VOCABULARY=new fe.VocabularyImpl(Er._LITERAL_NAMES,Er._SYMBOLIC_NAMES,[]),Tr._serializedATNSegments=3,Tr._serializedATNSegment0=']\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!"\t"#\t#$\t$%\t%&\t&\'\t\'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t23\t34\t45\t56\t67\t78\t89\t9:\t:;\t;<\t<=\t=>\t>?\t?@\t@A\tAB\tBC\tCD\tDE\tEF\tFG\tGH\tHI\tIJ\tJK\tK\n\f\v\n\f\v\n\f\v\n\r\n\f\v\n\r\n\r\n\f\v\n\f\v\n\f\v\n\r\n\f\v\n\n\f\v\n\f\v\n\n\b\b\b\n\b\t\t\n\n\n\n\n\n\f\n\n\v\n\n\n\n\n\f\n\n\v\n\v\v\v\v\n\v\f\v\v\v\v\v\v\n\v\f\v\v\v\v\v\v\n\v\r\v\v\v\v\v\n\v\r\v\v\v\v\n\v\f\v\v\v\v\v\v\v\n\v\f\v\v\v\v\v\n\v\v\v\n\v\f\v\v\v\v\v\v\n\v\f\v\v\v\v\v\n\v\f\v\v\v\v\v\v\n\v\f\v\v\v\v\v\v\n\v\f\f\f\f\n\f\r\r\r\n\r\f\r\r\v\r\r\r\r\n\r\f\r\r\v\r\r\r\n\n\n\n\n\n\n\n\n\r\n\r\n\f\v\n\f\v\n\f\v\n\n\r\n\f\v\n\f\v\n\n\r\n\r\n\n\r\n\n\n\f\v\n\f\v\n\f\v\n\f\v\n\f\v\n\f\v\n\n\f\v\n\f\v\n\f\v\n\f\v\n\n\f\v\n\f\v\n\f\v\n   \n \r     \n \r    \n !!!!!!!\n!"""\n"\r"""""\n"\r"""\n""""\n"\r"""""\n"\r""""\n"###\n#\r####\n###\n#\r#####\n#\r####$$$\n$\r$$$$$\n$\r$$$$%%&&&\n&\r&&&&&\n&\f&&\v&&&&\n&\f&&\v&&&&\n&\r&&&&&\n&\r&&&&&\n&\r&&&&&\n&\r&&&&\n&&&&\n&\r&&&&&\n&\r&&&&&\n&\r&&&&&\n&\r&&&&\n&&\n&\'\'\'\n\'\r\'\'\'\'\n\'(((\n())***\n*\r****+++\n+\f++\v++++\n+\f++\v++++\n+\f++\v++++\n+\f++\v++++\n+\f++\v++++\n+\r+++++\n+\r++++\n+,,,\n,\f,,\v,,,---\n-\f--\v---..........\n.\f..\v....\n.\f..\v....\n.\f..\v....\n./////////////\n/000\n0111\n1222222\n2\f22\v2222\n2\f22\v2222\n2\f22\v222\n2\f22\v222\n2\f22\v222222\n2\f22\v2222\n2\f22\v2222\n2333333\n3\f33\v3333\n3\f33\v3333\n3\f33\v3444444\n4\f44\v4444\n4\f44\v4444\n4\f44\v455666666\n6\f66\v6666\n6\f66\v6666\n6\f66\v6666\n6\f66\v666\n6\f66\v666\n6\f66\v666666\n6\f66\v6666\n6\f66\v6666\n6777777\n7\f77\v7777\n7\f77\v7777\n7\f77\v7888888\n8\f88\v8888\n8\f88\v8888\n8\f88\v899:::::\n:\f::\v::::\n:\f::\v::::\n:\f::\v::::\n:\f::\v:::\n:\f::\v:::\n:\f::\v:::::::\n:\f::\v::::\n:\f::\v::::\n:;;;;;;;;\n;\f;;\v;<<<<<<<<\n<\f<<\v<==>>>\n>\r>>>>>\n>\r>>>>\n>???\n?\r?????\n?\r????\n?@@@\n@\f@@\v@@@@@\n@\f@@\v@@@@\n@\f@@\v@@@@@@\n@\f@@\v@@@@\n@\f@@\v@@@@@\n@AABBCCC\nC\fCC\vCCCC\nC\rCCCC\nCCCC\nC\rCCCC\nCCCC\nC\fCC\vCCCC\nC\rCCCC\nCCCC\nC\rCCCC\nCC\nCDDEEEE\nEFFFFFFFFFFFFFFFFFF\nFGGG\nG\fGG\vGGGG\nG\fGG\vGGG\nG\fGG\vGGGHHHHHHHHHHH\nHIIII\nIJJKKK\bdflntvL\b\n\f "$&(*,.02468:<>@BDFHJLNPRTVXZ\\^`bdfhjlnprtvxz|~\b+,JK\f%\'\f$(I\b\n\f "$&(*,.02468:<>@BDFHJLNPRTVXZ\\^`bdfhjlnprtvxz|~]]]%]\b]&]\b]]\b\']]\b]]\n\t\f\v\r\rHM\b\t]\t\f]\f]%]]]\f',Tr._serializedATNSegment1="]]\bIA\t]]\v\bIONPRQ!S# \"%TUL'VL)&(+A]*-I] I]] ]/]8]81])]63>>]:5$78]]&9]]$:]]\t9?]] @]] ;!]] ]=<]$]\n?! AB](]&])]@!C<]@!]=]&EB])]@!GCID]E]]\t]\f]#]\n]FD]]#]\n]FK ]N(MGHOQ*]p9S\t]]]]x=]]$]\nU7]z>W;]z>Y!]] ][-./0123456]_a$D\\/]h5]]h5]]h5]c\b3f4\f]^0]f4e\b4b2\f]",Tr._serializedATNSegment2='`1]b2gd3i$WZ.\\/]]p9]]p9]]p9]k\b7n8\f]^0]n8m\b8j6\f]`1]j6ol7q$W\\/]]x=]]x=]Z.]x=]s\b;v<\f^0v<u\b<r:\f`1r:wt;y|?]%]|?{~@]&]~@}]~@]z>]x=]B]x=A\t\th5]"]\n#]\bh5]#]\b"]\n\\CD> F$B",H%J&L\'P)R*T+V,.02X-D#4E]\r]FKNQLTWZH[\t\t',Tr._serializedATN=_e.join([Er._serializedATNSegment0,Er._serializedATNSegment1,Er._serializedATNSegment2],"");class xr extends Te.ParserRuleContext{selectorBoolExp(){return this.getRuleContext(0,Cr)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_select}enterRule(e){e.enterSelect&&e.enterSelect(this)}exitRule(e){e.exitSelect&&e.exitSelect(this)}accept(e){return e.visitSelect?e.visitSelect(this):e.visitChildren(this)}}class Cr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_selectorBoolExp}copyFrom(e){super.copyFrom(e)}}class Ar extends Cr{selectorBoolTerm(e){return void 0===e?this.getRuleContexts(wr):this.getRuleContext(e,wr)}OR(e){return void 0===e?this.getTokens(Tr.OR):this.getToken(Tr.OR,e)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterOrExpAsSelectorBoolExp&&e.enterOrExpAsSelectorBoolExp(this)}exitRule(e){e.exitOrExpAsSelectorBoolExp&&e.exitOrExpAsSelectorBoolExp(this)}accept(e){return e.visitOrExpAsSelectorBoolExp?e.visitOrExpAsSelectorBoolExp(this):e.visitChildren(this)}}class wr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_selectorBoolTerm}copyFrom(e){super.copyFrom(e)}}class Ir extends wr{selectorBoolFactor(e){return void 0===e?this.getRuleContexts(Rr):this.getRuleContext(e,Rr)}AND(e){return void 0===e?this.getTokens(Tr.AND):this.getToken(Tr.AND,e)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAndExpAsSelectorBoolTerm&&e.enterAndExpAsSelectorBoolTerm(this)}exitRule(e){e.exitAndExpAsSelectorBoolTerm&&e.exitAndExpAsSelectorBoolTerm(this)}accept(e){return e.visitAndExpAsSelectorBoolTerm?e.visitAndExpAsSelectorBoolTerm(this):e.visitChildren(this)}}class Rr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_selectorBoolFactor}copyFrom(e){super.copyFrom(e)}}class Dr extends Rr{selectorBoolFactor(){return this.getRuleContext(0,Rr)}NOT(){return this.tryGetToken(Tr.NOT,0)}EXCLAM(){return this.tryGetToken(Tr.EXCLAM,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNotExpAsSelectorBoolFactor&&e.enterNotExpAsSelectorBoolFactor(this)}exitRule(e){e.exitNotExpAsSelectorBoolFactor&&e.exitNotExpAsSelectorBoolFactor(this)}accept(e){return e.visitNotExpAsSelectorBoolFactor?e.visitNotExpAsSelectorBoolFactor(this):e.visitChildren(this)}}class Or extends Rr{LPAREN(){return this.tryGetToken(Tr.LPAREN,0)}selectorBoolExp(){return this.tryGetRuleContext(0,Cr)}RPAREN(){return this.tryGetToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParenExpAsSelectorBoolFactor&&e.enterParenExpAsSelectorBoolFactor(this)}exitRule(e){e.exitParenExpAsSelectorBoolFactor&&e.exitParenExpAsSelectorBoolFactor(this)}accept(e){return e.visitParenExpAsSelectorBoolFactor?e.visitParenExpAsSelectorBoolFactor(this):e.visitChildren(this)}}class Nr extends Rr{selectorAtomicExp(){return this.getRuleContext(0,Mr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAtomicExpAsSelectorBoolFactor&&e.enterAtomicExpAsSelectorBoolFactor(this)}exitRule(e){e.exitAtomicExpAsSelectorBoolFactor&&e.exitAtomicExpAsSelectorBoolFactor(this)}accept(e){return e.visitAtomicExpAsSelectorBoolFactor?e.visitAtomicExpAsSelectorBoolFactor(this):e.visitChildren(this)}}class Mr extends Te.ParserRuleContext{selector(){return this.getRuleContext(0,kr)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_selectorAtomicExp}enterRule(e){e.enterSelectorAtomicExp&&e.enterSelectorAtomicExp(this)}exitRule(e){e.exitSelectorAtomicExp&&e.exitSelectorAtomicExp(this)}accept(e){return e.visitSelectorAtomicExp?e.visitSelectorAtomicExp(this):e.visitChildren(this)}}class kr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_selector}copyFrom(e){super.copyFrom(e)}}class Lr extends kr{dimensionSelector(){return this.getRuleContext(0,Kr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDimensionSelectorAsSelector&&e.enterDimensionSelectorAsSelector(this)}exitRule(e){e.exitDimensionSelectorAsSelector&&e.exitDimensionSelectorAsSelector(this)}accept(e){return e.visitDimensionSelectorAsSelector?e.visitDimensionSelectorAsSelector(this):e.visitChildren(this)}}class Pr extends kr{metricNameSelector(){return this.getRuleContext(0,Yr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMetricNameSelectorAsSelector&&e.enterMetricNameSelectorAsSelector(this)}exitRule(e){e.exitMetricNameSelectorAsSelector&&e.exitMetricNameSelectorAsSelector(this)}accept(e){return e.visitMetricNameSelectorAsSelector?e.visitMetricNameSelectorAsSelector(this):e.visitChildren(this)}}class Fr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_metricIdentifier}copyFrom(e){super.copyFrom(e)}}class Ur extends Fr{graphiteMetricIdentifier(){return this.getRuleContext(0,So)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGraphiteMetricIdentifierAsMetricIdentifier&&e.enterGraphiteMetricIdentifierAsMetricIdentifier(this)}exitRule(e){e.exitGraphiteMetricIdentifierAsMetricIdentifier&&e.exitGraphiteMetricIdentifierAsMetricIdentifier(this)}accept(e){return e.visitGraphiteMetricIdentifierAsMetricIdentifier?e.visitGraphiteMetricIdentifierAsMetricIdentifier(this):e.visitChildren(this)}}class Vr extends Fr{STRING_LITERAL(){return this.getToken(Tr.STRING_LITERAL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterStringLiteralAsMetricIdentifier&&e.enterStringLiteralAsMetricIdentifier(this)}exitRule(e){e.exitStringLiteralAsMetricIdentifier&&e.exitStringLiteralAsMetricIdentifier(this)}accept(e){return e.visitStringLiteralAsMetricIdentifier?e.visitStringLiteralAsMetricIdentifier(this):e.visitChildren(this)}}class Br extends Te.ParserRuleContext{metricIdentifier(){return this.getRuleContext(0,Fr)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_dimensionKey}enterRule(e){e.enterDimensionKey&&e.enterDimensionKey(this)}exitRule(e){e.exitDimensionKey&&e.exitDimensionKey(this)}accept(e){return e.visitDimensionKey?e.visitDimensionKey(this):e.visitChildren(this)}}class $r extends Te.ParserRuleContext{dimensionKey(e){return void 0===e?this.getRuleContexts(Br):this.getRuleContext(e,Br)}COMMA(e){return void 0===e?this.getTokens(Tr.COMMA):this.getToken(Tr.COMMA,e)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_dimensionKeyList}enterRule(e){e.enterDimensionKeyList&&e.enterDimensionKeyList(this)}exitRule(e){e.exitDimensionKeyList&&e.exitDimensionKeyList(this)}accept(e){return e.visitDimensionKeyList?e.visitDimensionKeyList(this):e.visitChildren(this)}}class Hr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_dimensionValueExpr}copyFrom(e){super.copyFrom(e)}}class Wr extends Hr{singleDimensionValueExpr(){return this.getRuleContext(0,jr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSingleDimensionValueExprAsDimensionValueExpr&&e.enterSingleDimensionValueExprAsDimensionValueExpr(this)}exitRule(e){e.exitSingleDimensionValueExprAsDimensionValueExpr&&e.exitSingleDimensionValueExprAsDimensionValueExpr(this)}accept(e){return e.visitSingleDimensionValueExprAsDimensionValueExpr?e.visitSingleDimensionValueExprAsDimensionValueExpr(this):e.visitChildren(this)}}class qr extends Hr{LPAREN(){return this.getToken(Tr.LPAREN,0)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}singleDimensionValueExpr(e){return void 0===e?this.getRuleContexts(jr):this.getRuleContext(e,jr)}OR(e){return void 0===e?this.getTokens(Tr.OR):this.getToken(Tr.OR,e)}COMMA(e){return void 0===e?this.getTokens(Tr.COMMA):this.getToken(Tr.COMMA,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultipleDimensionValueExprsAsDimensionValueExpr&&e.enterMultipleDimensionValueExprsAsDimensionValueExpr(this)}exitRule(e){e.exitMultipleDimensionValueExprsAsDimensionValueExpr&&e.exitMultipleDimensionValueExprsAsDimensionValueExpr(this)}accept(e){return e.visitMultipleDimensionValueExprsAsDimensionValueExpr?e.visitMultipleDimensionValueExprsAsDimensionValueExpr(this):e.visitChildren(this)}}class jr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_singleDimensionValueExpr}copyFrom(e){super.copyFrom(e)}}class Qr extends jr{metricIdentifier(){return this.getRuleContext(0,Fr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMetricIdentifierAsSingleDimensionValueExpr&&e.enterMetricIdentifierAsSingleDimensionValueExpr(this)}exitRule(e){e.exitMetricIdentifierAsSingleDimensionValueExpr&&e.exitMetricIdentifierAsSingleDimensionValueExpr(this)}accept(e){return e.visitMetricIdentifierAsSingleDimensionValueExpr?e.visitMetricIdentifierAsSingleDimensionValueExpr(this):e.visitChildren(this)}}class zr extends jr{graphiteMetricWildcardIdentifier(){return this.getRuleContext(0,Oo)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGraphiteMetricWildcardIdentifierAsSingleDimensionValueExpr&&e.enterGraphiteMetricWildcardIdentifierAsSingleDimensionValueExpr(this)}exitRule(e){e.exitGraphiteMetricWildcardIdentifierAsSingleDimensionValueExpr&&e.exitGraphiteMetricWildcardIdentifierAsSingleDimensionValueExpr(this)}accept(e){return e.visitGraphiteMetricWildcardIdentifierAsSingleDimensionValueExpr?e.visitGraphiteMetricWildcardIdentifierAsSingleDimensionValueExpr(this):e.visitChildren(this)}}class Gr extends jr{booleanValue(){return this.getRuleContext(0,qs)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterBooleanValueAsSingleDimensionValueExpr&&e.enterBooleanValueAsSingleDimensionValueExpr(this)}exitRule(e){e.exitBooleanValueAsSingleDimensionValueExpr&&e.exitBooleanValueAsSingleDimensionValueExpr(this)}accept(e){return e.visitBooleanValueAsSingleDimensionValueExpr?e.visitBooleanValueAsSingleDimensionValueExpr(this):e.visitChildren(this)}}class Kr extends Te.ParserRuleContext{dimensionKey(){return this.getRuleContext(0,Br)}EQ(){return this.getToken(Tr.EQ,0)}dimensionValueExpr(){return this.getRuleContext(0,Hr)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_dimensionSelector}enterRule(e){e.enterDimensionSelector&&e.enterDimensionSelector(this)}exitRule(e){e.exitDimensionSelector&&e.exitDimensionSelector(this)}accept(e){return e.visitDimensionSelector?e.visitDimensionSelector(this):e.visitChildren(this)}}class Yr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_metricNameSelector}copyFrom(e){super.copyFrom(e)}}class Zr extends Yr{metricIdentifier(){return this.getRuleContext(0,Fr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMetricIdentifierAsMetricNameSelector&&e.enterMetricIdentifierAsMetricNameSelector(this)}exitRule(e){e.exitMetricIdentifierAsMetricNameSelector&&e.exitMetricIdentifierAsMetricNameSelector(this)}accept(e){return e.visitMetricIdentifierAsMetricNameSelector?e.visitMetricIdentifierAsMetricNameSelector(this):e.visitChildren(this)}}class Xr extends Yr{graphiteMetricWildcardIdentifier(){return this.getRuleContext(0,Oo)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGraphiteMetricWildcardIdentifierAsMetricNameSelector&&e.enterGraphiteMetricWildcardIdentifierAsMetricNameSelector(this)}exitRule(e){e.exitGraphiteMetricWildcardIdentifierAsMetricNameSelector&&e.exitGraphiteMetricWildcardIdentifierAsMetricNameSelector(this)}accept(e){return e.visitGraphiteMetricWildcardIdentifierAsMetricNameSelector?e.visitGraphiteMetricWildcardIdentifierAsMetricNameSelector(this):e.visitChildren(this)}}class Jr extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_positiveInteger}copyFrom(e){super.copyFrom(e)}}class en extends Jr{PLUS_INTEGER(){return this.getToken(Tr.PLUS_INTEGER,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPlusIntegerAsPositiveInteger&&e.enterPlusIntegerAsPositiveInteger(this)}exitRule(e){e.exitPlusIntegerAsPositiveInteger&&e.exitPlusIntegerAsPositiveInteger(this)}accept(e){return e.visitPlusIntegerAsPositiveInteger?e.visitPlusIntegerAsPositiveInteger(this):e.visitChildren(this)}}class tn extends Jr{UNSIGNED_INTEGER(){return this.getToken(Tr.UNSIGNED_INTEGER,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnsignedIntegerAsPositiveInteger&&e.enterUnsignedIntegerAsPositiveInteger(this)}exitRule(e){e.exitUnsignedIntegerAsPositiveInteger&&e.exitUnsignedIntegerAsPositiveInteger(this)}accept(e){return e.visitUnsignedIntegerAsPositiveInteger?e.visitUnsignedIntegerAsPositiveInteger(this):e.visitChildren(this)}}class rn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_negativeInteger}copyFrom(e){super.copyFrom(e)}}class nn extends rn{MINUS_INTEGER(){return this.getToken(Tr.MINUS_INTEGER,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinusIntegerAsNegativeInteger&&e.enterMinusIntegerAsNegativeInteger(this)}exitRule(e){e.exitMinusIntegerAsNegativeInteger&&e.exitMinusIntegerAsNegativeInteger(this)}accept(e){return e.visitMinusIntegerAsNegativeInteger?e.visitMinusIntegerAsNegativeInteger(this):e.visitChildren(this)}}class an extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_positiveNumber}copyFrom(e){super.copyFrom(e)}}class sn extends an{positiveInteger(){return this.getRuleContext(0,Jr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPositiveIntegerAsPositiveNumber&&e.enterPositiveIntegerAsPositiveNumber(this)}exitRule(e){e.exitPositiveIntegerAsPositiveNumber&&e.exitPositiveIntegerAsPositiveNumber(this)}accept(e){return e.visitPositiveIntegerAsPositiveNumber?e.visitPositiveIntegerAsPositiveNumber(this):e.visitChildren(this)}}class on extends an{PLUS_DECIMAL(){return this.getToken(Tr.PLUS_DECIMAL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPlusDecimalAsPositiveNumber&&e.enterPlusDecimalAsPositiveNumber(this)}exitRule(e){e.exitPlusDecimalAsPositiveNumber&&e.exitPlusDecimalAsPositiveNumber(this)}accept(e){return e.visitPlusDecimalAsPositiveNumber?e.visitPlusDecimalAsPositiveNumber(this):e.visitChildren(this)}}class ln extends an{UNSIGNED_DECIMAL(){return this.getToken(Tr.UNSIGNED_DECIMAL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnsignedDecimalAsPositiveNumber&&e.enterUnsignedDecimalAsPositiveNumber(this)}exitRule(e){e.exitUnsignedDecimalAsPositiveNumber&&e.exitUnsignedDecimalAsPositiveNumber(this)}accept(e){return e.visitUnsignedDecimalAsPositiveNumber?e.visitUnsignedDecimalAsPositiveNumber(this):e.visitChildren(this)}}class cn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_negativeNumber}copyFrom(e){super.copyFrom(e)}}class dn extends cn{negativeInteger(){return this.getRuleContext(0,rn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNegativeIntegerAsNegativeNumber&&e.enterNegativeIntegerAsNegativeNumber(this)}exitRule(e){e.exitNegativeIntegerAsNegativeNumber&&e.exitNegativeIntegerAsNegativeNumber(this)}accept(e){return e.visitNegativeIntegerAsNegativeNumber?e.visitNegativeIntegerAsNegativeNumber(this):e.visitChildren(this)}}class un extends cn{MINUS_DECIMAL(){return this.getToken(Tr.MINUS_DECIMAL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinusDecimalAsNegativeNumber&&e.enterMinusDecimalAsNegativeNumber(this)}exitRule(e){e.exitMinusDecimalAsNegativeNumber&&e.exitMinusDecimalAsNegativeNumber(this)}accept(e){return e.visitMinusDecimalAsNegativeNumber?e.visitMinusDecimalAsNegativeNumber(this):e.visitChildren(this)}}class pn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_number}copyFrom(e){super.copyFrom(e)}}class hn extends pn{positiveNumber(){return this.getRuleContext(0,an)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPositiveNumberAsNumber&&e.enterPositiveNumberAsNumber(this)}exitRule(e){e.exitPositiveNumberAsNumber&&e.exitPositiveNumberAsNumber(this)}accept(e){return e.visitPositiveNumberAsNumber?e.visitPositiveNumberAsNumber(this):e.visitChildren(this)}}class mn extends pn{negativeNumber(){return this.getRuleContext(0,cn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNegativeNumberAsNumber&&e.enterNegativeNumberAsNumber(this)}exitRule(e){e.exitNegativeNumberAsNumber&&e.exitNegativeNumberAsNumber(this)}accept(e){return e.visitNegativeNumberAsNumber?e.visitNegativeNumberAsNumber(this):e.visitChildren(this)}}class gn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_positiveTimeDuration}copyFrom(e){super.copyFrom(e)}}class yn extends gn{UNSIGNED_TIME_DURATION(){return this.getToken(Tr.UNSIGNED_TIME_DURATION,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnsignedTimeDurationAsPositiveTimeDuration&&e.enterUnsignedTimeDurationAsPositiveTimeDuration(this)}exitRule(e){e.exitUnsignedTimeDurationAsPositiveTimeDuration&&e.exitUnsignedTimeDurationAsPositiveTimeDuration(this)}accept(e){return e.visitUnsignedTimeDurationAsPositiveTimeDuration?e.visitUnsignedTimeDurationAsPositiveTimeDuration(this):e.visitChildren(this)}}class vn extends gn{PLUS_TIME_DURATION(){return this.getToken(Tr.PLUS_TIME_DURATION,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPlusTimeDurationAsPositiveTimeDuration&&e.enterPlusTimeDurationAsPositiveTimeDuration(this)}exitRule(e){e.exitPlusTimeDurationAsPositiveTimeDuration&&e.exitPlusTimeDurationAsPositiveTimeDuration(this)}accept(e){return e.visitPlusTimeDurationAsPositiveTimeDuration?e.visitPlusTimeDurationAsPositiveTimeDuration(this):e.visitChildren(this)}}class fn extends gn{positiveInteger(){return this.getRuleContext(0,Jr)}TIMEUNIT(){return this.getToken(Tr.TIMEUNIT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPositiveIntegerAndTimeunitAsPositiveTimeDuration&&e.enterPositiveIntegerAndTimeunitAsPositiveTimeDuration(this)}exitRule(e){e.exitPositiveIntegerAndTimeunitAsPositiveTimeDuration&&e.exitPositiveIntegerAndTimeunitAsPositiveTimeDuration(this)}accept(e){return e.visitPositiveIntegerAndTimeunitAsPositiveTimeDuration?e.visitPositiveIntegerAndTimeunitAsPositiveTimeDuration(this):e.visitChildren(this)}}class _n extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_negativeTimeDuration}copyFrom(e){super.copyFrom(e)}}class Sn extends _n{MINUS_TIME_DURATION(){return this.getToken(Tr.MINUS_TIME_DURATION,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinusTimeDurationAsNegativeTimeDuration&&e.enterMinusTimeDurationAsNegativeTimeDuration(this)}exitRule(e){e.exitMinusTimeDurationAsNegativeTimeDuration&&e.exitMinusTimeDurationAsNegativeTimeDuration(this)}accept(e){return e.visitMinusTimeDurationAsNegativeTimeDuration?e.visitMinusTimeDurationAsNegativeTimeDuration(this):e.visitChildren(this)}}class bn extends _n{negativeInteger(){return this.getRuleContext(0,rn)}TIMEUNIT(){return this.getToken(Tr.TIMEUNIT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNegativeIntegerAndTimeunitAsNegativeTimeDuration&&e.enterNegativeIntegerAndTimeunitAsNegativeTimeDuration(this)}exitRule(e){e.exitNegativeIntegerAndTimeunitAsNegativeTimeDuration&&e.exitNegativeIntegerAndTimeunitAsNegativeTimeDuration(this)}accept(e){return e.visitNegativeIntegerAndTimeunitAsNegativeTimeDuration?e.visitNegativeIntegerAndTimeunitAsNegativeTimeDuration(this):e.visitChildren(this)}}class En extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_signedTimeDuration}copyFrom(e){super.copyFrom(e)}}class Tn extends En{positiveTimeDuration(){return this.getRuleContext(0,gn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPositiveTimeDurationAsSignedTimeDuration&&e.enterPositiveTimeDurationAsSignedTimeDuration(this)}exitRule(e){e.exitPositiveTimeDurationAsSignedTimeDuration&&e.exitPositiveTimeDurationAsSignedTimeDuration(this)}accept(e){return e.visitPositiveTimeDurationAsSignedTimeDuration?e.visitPositiveTimeDurationAsSignedTimeDuration(this):e.visitChildren(this)}}class xn extends En{negativeTimeDuration(){return this.getRuleContext(0,_n)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNegativeTimeDurationAsSignedTimeDuration&&e.enterNegativeTimeDurationAsSignedTimeDuration(this)}exitRule(e){e.exitNegativeTimeDurationAsSignedTimeDuration&&e.exitNegativeTimeDurationAsSignedTimeDuration(this)}accept(e){return e.visitNegativeTimeDurationAsSignedTimeDuration?e.visitNegativeTimeDurationAsSignedTimeDuration(this):e.visitChildren(this)}}class Cn extends Te.ParserRuleContext{TIMESHIFT(){return this.getToken(Tr.TIMESHIFT,0)}signedTimeDuration(){return this.getRuleContext(0,En)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_timeShift}enterRule(e){e.enterTimeShift&&e.enterTimeShift(this)}exitRule(e){e.exitTimeShift&&e.exitTimeShift(this)}accept(e){return e.visitTimeShift?e.visitTimeShift(this):e.visitChildren(this)}}class An extends Te.ParserRuleContext{HISTOGRAM_QUANTILE(){return this.getToken(Tr.HISTOGRAM_QUANTILE,0)}positiveNumber(){return this.getRuleContext(0,an)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}LPAREN(){return this.tryGetToken(Tr.LPAREN,0)}RPAREN(){return this.tryGetToken(Tr.RPAREN,0)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_histogramQuantile}enterRule(e){e.enterHistogramQuantile&&e.enterHistogramQuantile(this)}exitRule(e){e.exitHistogramQuantile&&e.exitHistogramQuantile(this)}accept(e){return e.visitHistogramQuantile?e.visitHistogramQuantile(this):e.visitChildren(this)}}class wn extends Te.ParserRuleContext{OUTLIER(){return this.getToken(Tr.OUTLIER,0)}outlierParameter(e){return void 0===e?this.getRuleContexts(Nn):this.getRuleContext(e,Nn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_outlier}enterRule(e){e.enterOutlier&&e.enterOutlier(this)}exitRule(e){e.exitOutlier&&e.exitOutlier(this)}accept(e){return e.visitOutlier?e.visitOutlier(this):e.visitChildren(this)}}class In extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_fillmissing}copyFrom(e){super.copyFrom(e)}}class Rn extends In{FILLMISSING(){return this.getToken(Tr.FILLMISSING,0)}fillmissingParameter(){return this.getRuleContext(0,On)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}USING(){return this.tryGetToken(Tr.USING,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFillmissingAsFillmissing&&e.enterFillmissingAsFillmissing(this)}exitRule(e){e.exitFillmissingAsFillmissing&&e.exitFillmissingAsFillmissing(this)}accept(e){return e.visitFillmissingAsFillmissing?e.visitFillmissingAsFillmissing(this):e.visitChildren(this)}}class Dn extends Te.ParserRuleContext{EWMA(){return this.getToken(Tr.EWMA,0)}ewmaParameter(){return this.tryGetRuleContext(0,Pn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_ewma}enterRule(e){e.enterEwma&&e.enterEwma(this)}exitRule(e){e.exitEwma&&e.exitEwma(this)}accept(e){return e.visitEwma?e.visitEwma(this):e.visitChildren(this)}}class On extends Te.ParserRuleContext{EMPTY(){return this.tryGetToken(Tr.EMPTY,0)}INTERPOLATION(){return this.tryGetToken(Tr.INTERPOLATION,0)}LAST(){return this.tryGetToken(Tr.LAST,0)}number(){return this.tryGetRuleContext(0,pn)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_fillmissingParameter}enterRule(e){e.enterFillmissingParameter&&e.enterFillmissingParameter(this)}exitRule(e){e.exitFillmissingParameter&&e.exitFillmissingParameter(this)}accept(e){return e.visitFillmissingParameter?e.visitFillmissingParameter(this):e.visitChildren(this)}}class Nn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_outlierParameter}copyFrom(e){super.copyFrom(e)}}class Mn extends Nn{WINDOW(){return this.getToken(Tr.WINDOW,0)}EQ(){return this.getToken(Tr.EQ,0)}positiveTimeDuration(){return this.getRuleContext(0,gn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterWindowAsOutlierParameter&&e.enterWindowAsOutlierParameter(this)}exitRule(e){e.exitWindowAsOutlierParameter&&e.exitWindowAsOutlierParameter(this)}accept(e){return e.visitWindowAsOutlierParameter?e.visitWindowAsOutlierParameter(this):e.visitChildren(this)}}class kn extends Nn{THRESHOLD(){return this.getToken(Tr.THRESHOLD,0)}EQ(){return this.getToken(Tr.EQ,0)}number(){return this.getRuleContext(0,pn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterThresholdAsOutlierParameter&&e.enterThresholdAsOutlierParameter(this)}exitRule(e){e.exitThresholdAsOutlierParameter&&e.exitThresholdAsOutlierParameter(this)}accept(e){return e.visitThresholdAsOutlierParameter?e.visitThresholdAsOutlierParameter(this):e.visitChildren(this)}}class Ln extends Nn{DIRECTION(){return this.getToken(Tr.DIRECTION,0)}EQ(){return this.getToken(Tr.EQ,0)}PLUS(){return this.tryGetToken(Tr.PLUS,0)}MINUS(){return this.tryGetToken(Tr.MINUS,0)}PLUSMINUS(){return this.tryGetToken(Tr.PLUSMINUS,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDirectionAsOutlierParameter&&e.enterDirectionAsOutlierParameter(this)}exitRule(e){e.exitDirectionAsOutlierParameter&&e.exitDirectionAsOutlierParameter(this)}accept(e){return e.visitDirectionAsOutlierParameter?e.visitDirectionAsOutlierParameter(this):e.visitChildren(this)}}class Pn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_ewmaParameter}copyFrom(e){super.copyFrom(e)}}class Fn extends Pn{SPAN(){return this.getToken(Tr.SPAN,0)}EQ(){return this.getToken(Tr.EQ,0)}positiveNumber(){return this.getRuleContext(0,an)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSpanAsEmwaParameter&&e.enterSpanAsEmwaParameter(this)}exitRule(e){e.exitSpanAsEmwaParameter&&e.exitSpanAsEmwaParameter(this)}accept(e){return e.visitSpanAsEmwaParameter?e.visitSpanAsEmwaParameter(this):e.visitChildren(this)}}class Un extends Pn{ALPHA(){return this.getToken(Tr.ALPHA,0)}EQ(){return this.getToken(Tr.EQ,0)}positiveNumber(){return this.getRuleContext(0,an)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAlphaAsEmwaParameter&&e.enterAlphaAsEmwaParameter(this)}exitRule(e){e.exitAlphaAsEmwaParameter&&e.exitAlphaAsEmwaParameter(this)}accept(e){return e.visitAlphaAsEmwaParameter?e.visitAlphaAsEmwaParameter(this):e.visitChildren(this)}}class Vn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_aggregatorFn}copyFrom(e){super.copyFrom(e)}}class Bn extends Vn{AVG(){return this.getToken(Tr.AVG,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAvgAsAggregatorFn&&e.enterAvgAsAggregatorFn(this)}exitRule(e){e.exitAvgAsAggregatorFn&&e.exitAvgAsAggregatorFn(this)}accept(e){return e.visitAvgAsAggregatorFn?e.visitAvgAsAggregatorFn(this):e.visitChildren(this)}}class $n extends Vn{COUNT(){return this.getToken(Tr.COUNT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterCountAsAggregatorFn&&e.enterCountAsAggregatorFn(this)}exitRule(e){e.exitCountAsAggregatorFn&&e.exitCountAsAggregatorFn(this)}accept(e){return e.visitCountAsAggregatorFn?e.visitCountAsAggregatorFn(this):e.visitChildren(this)}}class Hn extends Vn{SUM(){return this.getToken(Tr.SUM,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSumAsAggregatorFn&&e.enterSumAsAggregatorFn(this)}exitRule(e){e.exitSumAsAggregatorFn&&e.exitSumAsAggregatorFn(this)}accept(e){return e.visitSumAsAggregatorFn?e.visitSumAsAggregatorFn(this):e.visitChildren(this)}}class Wn extends Vn{MIN(){return this.getToken(Tr.MIN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinAsAggregatorFn&&e.enterMinAsAggregatorFn(this)}exitRule(e){e.exitMinAsAggregatorFn&&e.exitMinAsAggregatorFn(this)}accept(e){return e.visitMinAsAggregatorFn?e.visitMinAsAggregatorFn(this):e.visitChildren(this)}}class qn extends Vn{MAX(){return this.getToken(Tr.MAX,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMaxAsAggregatorFn&&e.enterMaxAsAggregatorFn(this)}exitRule(e){e.exitMaxAsAggregatorFn&&e.exitMaxAsAggregatorFn(this)}accept(e){return e.visitMaxAsAggregatorFn?e.visitMaxAsAggregatorFn(this):e.visitChildren(this)}}class jn extends Vn{STDDEV(){return this.getToken(Tr.STDDEV,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterStdDevAsAggregatorFn&&e.enterStdDevAsAggregatorFn(this)}exitRule(e){e.exitStdDevAsAggregatorFn&&e.exitStdDevAsAggregatorFn(this)}accept(e){return e.visitStdDevAsAggregatorFn?e.visitStdDevAsAggregatorFn(this):e.visitChildren(this)}}class Qn extends Vn{PCT(){return this.getToken(Tr.PCT,0)}LPAREN(){return this.getToken(Tr.LPAREN,0)}positiveNumber(){return this.getRuleContext(0,an)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPctAsAggregatorFn&&e.enterPctAsAggregatorFn(this)}exitRule(e){e.exitPctAsAggregatorFn&&e.exitPctAsAggregatorFn(this)}accept(e){return e.visitPctAsAggregatorFn?e.visitPctAsAggregatorFn(this):e.visitChildren(this)}}class zn extends Te.ParserRuleContext{aggregatorFn(){return this.getRuleContext(0,Vn)}BY(){return this.tryGetToken(Tr.BY,0)}dimensionKeyList(){return this.tryGetRuleContext(0,$r)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_aggregate}enterRule(e){e.enterAggregate&&e.enterAggregate(this)}exitRule(e){e.exitAggregate&&e.exitAggregate(this)}accept(e){return e.visitAggregate?e.visitAggregate(this):e.visitChildren(this)}}class Gn extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_rollupFn}copyFrom(e){super.copyFrom(e)}}class Kn extends Gn{AVG(){return this.getToken(Tr.AVG,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAvgAsRollupFn&&e.enterAvgAsRollupFn(this)}exitRule(e){e.exitAvgAsRollupFn&&e.exitAvgAsRollupFn(this)}accept(e){return e.visitAvgAsRollupFn?e.visitAvgAsRollupFn(this):e.visitChildren(this)}}class Yn extends Gn{COUNT(){return this.getToken(Tr.COUNT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterCountAsRollupFn&&e.enterCountAsRollupFn(this)}exitRule(e){e.exitCountAsRollupFn&&e.exitCountAsRollupFn(this)}accept(e){return e.visitCountAsRollupFn?e.visitCountAsRollupFn(this):e.visitChildren(this)}}class Zn extends Gn{SUM(){return this.getToken(Tr.SUM,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSumAsRollupFn&&e.enterSumAsRollupFn(this)}exitRule(e){e.exitSumAsRollupFn&&e.exitSumAsRollupFn(this)}accept(e){return e.visitSumAsRollupFn?e.visitSumAsRollupFn(this):e.visitChildren(this)}}class Xn extends Gn{MIN(){return this.getToken(Tr.MIN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinAsRollupFn&&e.enterMinAsRollupFn(this)}exitRule(e){e.exitMinAsRollupFn&&e.exitMinAsRollupFn(this)}accept(e){return e.visitMinAsRollupFn?e.visitMinAsRollupFn(this):e.visitChildren(this)}}class Jn extends Gn{MAX(){return this.getToken(Tr.MAX,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMaxAsRollupFn&&e.enterMaxAsRollupFn(this)}exitRule(e){e.exitMaxAsRollupFn&&e.exitMaxAsRollupFn(this)}accept(e){return e.visitMaxAsRollupFn?e.visitMaxAsRollupFn(this):e.visitChildren(this)}}class ea extends Gn{RATE(){return this.getToken(Tr.RATE,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRateAsRollupFn&&e.enterRateAsRollupFn(this)}exitRule(e){e.exitRateAsRollupFn&&e.exitRateAsRollupFn(this)}accept(e){return e.visitRateAsRollupFn?e.visitRateAsRollupFn(this):e.visitChildren(this)}}class ta extends Te.ParserRuleContext{QUANTIZE(){return this.getToken(Tr.QUANTIZE,0)}positiveTimeDuration(){return this.getRuleContext(0,gn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}TO(){return this.tryGetToken(Tr.TO,0)}USING(){return this.tryGetToken(Tr.USING,0)}rollupFn(){return this.tryGetRuleContext(0,Gn)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_quantize}enterRule(e){e.enterQuantize&&e.enterQuantize(this)}exitRule(e){e.exitQuantize&&e.exitQuantize(this)}accept(e){return e.visitQuantize?e.visitQuantize(this):e.visitChildren(this)}}class ia extends Te.ParserRuleContext{TIMESLICE(){return this.getToken(Tr.TIMESLICE,0)}OVER(){return this.getToken(Tr.OVER,0)}positiveTimeDuration(){return this.getRuleContext(0,gn)}rollupFn(){return this.tryGetRuleContext(0,Gn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_timeslice}enterRule(e){e.enterTimeslice&&e.enterTimeslice(this)}exitRule(e){e.exitTimeslice&&e.exitTimeslice(this)}accept(e){return e.visitTimeslice?e.visitTimeslice(this):e.visitChildren(this)}}class ra extends Te.ParserRuleContext{QUANTIZE(){return this.getToken(Tr.QUANTIZE,0)}USING(){return this.getToken(Tr.USING,0)}rollupFn(){return this.getRuleContext(0,Gn)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_rollup}enterRule(e){e.enterRollup&&e.enterRollup(this)}exitRule(e){e.exitRollup&&e.exitRollup(this)}accept(e){return e.visitRollup?e.visitRollup(this):e.visitChildren(this)}}class na extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_accum}copyFrom(e){super.copyFrom(e)}}class aa extends na{ACCUM(){return this.getToken(Tr.ACCUM,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAccumAsAccum&&e.enterAccumAsAccum(this)}exitRule(e){e.exitAccumAsAccum&&e.exitAccumAsAccum(this)}accept(e){return e.visitAccumAsAccum?e.visitAccumAsAccum(this):e.visitChildren(this)}}class sa extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_parse}copyFrom(e){super.copyFrom(e)}}class oa extends sa{PARSE(){return this.getToken(Tr.PARSE,0)}FIELD(){return this.getToken(Tr.FIELD,0)}EQ(){return this.getToken(Tr.EQ,0)}dimensionKey(){return this.getRuleContext(0,Br)}singleDimensionValueExpr(){return this.getRuleContext(0,jr)}AS(){return this.getToken(Tr.AS,0)}dimensionKeyList(){return this.getRuleContext(0,$r)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}NODROP(){return this.tryGetToken(Tr.NODROP,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParseKey&&e.enterParseKey(this)}exitRule(e){e.exitParseKey&&e.exitParseKey(this)}accept(e){return e.visitParseKey?e.visitParseKey(this):e.visitChildren(this)}}class la extends sa{PARSE(){return this.getToken(Tr.PARSE,0)}metricNameSelector(){return this.getRuleContext(0,Yr)}AS(){return this.getToken(Tr.AS,0)}dimensionKeyList(){return this.getRuleContext(0,$r)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}NODROP(){return this.tryGetToken(Tr.NODROP,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParseRaw&&e.enterParseRaw(this)}exitRule(e){e.exitParseRaw&&e.exitParseRaw(this)}accept(e){return e.visitParseRaw?e.visitParseRaw(this):e.visitChildren(this)}}class ca extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_rate}copyFrom(e){super.copyFrom(e)}}class da extends ca{RATE(){return this.getToken(Tr.RATE,0)}rateModifier(){return this.tryGetRuleContext(0,ua)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRateAsRate&&e.enterRateAsRate(this)}exitRule(e){e.exitRateAsRate&&e.exitRateAsRate(this)}accept(e){return e.visitRateAsRate?e.visitRateAsRate(this):e.visitChildren(this)}}class ua extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_rateModifier}copyFrom(e){super.copyFrom(e)}}class pa extends ua{INCREASING(){return this.getToken(Tr.INCREASING,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterIncreasingAsIncreasingRateModifier&&e.enterIncreasingAsIncreasingRateModifier(this)}exitRule(e){e.exitIncreasingAsIncreasingRateModifier&&e.exitIncreasingAsIncreasingRateModifier(this)}accept(e){return e.visitIncreasingAsIncreasingRateModifier?e.visitIncreasingAsIncreasingRateModifier(this):e.visitChildren(this)}}class ha extends ua{DECREASING(){return this.getToken(Tr.DECREASING,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDecreasingAsDecreasingRateModifier&&e.enterDecreasingAsDecreasingRateModifier(this)}exitRule(e){e.exitDecreasingAsDecreasingRateModifier&&e.exitDecreasingAsDecreasingRateModifier(this)}accept(e){return e.visitDecreasingAsDecreasingRateModifier?e.visitDecreasingAsDecreasingRateModifier(this):e.visitChildren(this)}}class ma extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_delta}copyFrom(e){super.copyFrom(e)}}class ga extends ma{DELTA(){return this.getToken(Tr.DELTA,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDeltaAsDelta&&e.enterDeltaAsDelta(this)}exitRule(e){e.exitDeltaAsDelta&&e.exitDeltaAsDelta(this)}accept(e){return e.visitDeltaAsDelta?e.visitDeltaAsDelta(this):e.visitChildren(this)}}class ya extends Te.ParserRuleContext{EVAL(){return this.getToken(Tr.EVAL,0)}evalExp(){return this.getRuleContext(0,_s)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_eval}enterRule(e){e.enterEval&&e.enterEval(this)}exitRule(e){e.exitEval&&e.exitEval(this)}accept(e){return e.visitEval?e.visitEval(this):e.visitChildren(this)}}class va extends Te.ParserRuleContext{LPAREN(){return this.getToken(Tr.LPAREN,0)}positiveInteger(){return this.getRuleContext(0,Jr)}COMMA(){return this.getToken(Tr.COMMA,0)}reducerExp(){return this.getRuleContext(0,Ms)}RPAREN(){return this.getToken(Tr.RPAREN,0)}TOPK(){return this.tryGetToken(Tr.TOPK,0)}BOTTOMK(){return this.tryGetToken(Tr.BOTTOMK,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}BY(){return this.tryGetToken(Tr.BY,0)}dimensionKeyList(){return this.tryGetRuleContext(0,$r)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_topBottom}enterRule(e){e.enterTopBottom&&e.enterTopBottom(this)}exitRule(e){e.exitTopBottom&&e.exitTopBottom(this)}accept(e){return e.visitTopBottom?e.visitTopBottom(this):e.visitChildren(this)}}class fa extends Te.ParserRuleContext{FILTER(){return this.getToken(Tr.FILTER,0)}reducerBoolExp(){return this.getRuleContext(0,Ls)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_filter}enterRule(e){e.enterFilter&&e.enterFilter(this)}exitRule(e){e.exitFilter&&e.exitFilter(this)}accept(e){return e.visitFilter?e.visitFilter(this):e.visitChildren(this)}}class _a extends Te.ParserRuleContext{WHERE(){return this.getToken(Tr.WHERE,0)}reducerBoolExp(){return this.getRuleContext(0,Ls)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_where}enterRule(e){e.enterWhere&&e.enterWhere(this)}exitRule(e){e.exitWhere&&e.exitWhere(this)}accept(e){return e.visitWhere?e.visitWhere(this):e.visitChildren(this)}}class Sa extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_reducerFn}copyFrom(e){super.copyFrom(e)}}class ba extends Sa{AVG(){return this.getToken(Tr.AVG,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAvgAsReducerFn&&e.enterAvgAsReducerFn(this)}exitRule(e){e.exitAvgAsReducerFn&&e.exitAvgAsReducerFn(this)}accept(e){return e.visitAvgAsReducerFn?e.visitAvgAsReducerFn(this):e.visitChildren(this)}}class Ea extends Sa{COUNT(){return this.getToken(Tr.COUNT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterCountAsReducerFn&&e.enterCountAsReducerFn(this)}exitRule(e){e.exitCountAsReducerFn&&e.exitCountAsReducerFn(this)}accept(e){return e.visitCountAsReducerFn?e.visitCountAsReducerFn(this):e.visitChildren(this)}}class Ta extends Sa{SUM(){return this.getToken(Tr.SUM,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSumAsReducerFn&&e.enterSumAsReducerFn(this)}exitRule(e){e.exitSumAsReducerFn&&e.exitSumAsReducerFn(this)}accept(e){return e.visitSumAsReducerFn?e.visitSumAsReducerFn(this):e.visitChildren(this)}}class xa extends Sa{MIN(){return this.getToken(Tr.MIN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinAsReducerFn&&e.enterMinAsReducerFn(this)}exitRule(e){e.exitMinAsReducerFn&&e.exitMinAsReducerFn(this)}accept(e){return e.visitMinAsReducerFn?e.visitMinAsReducerFn(this):e.visitChildren(this)}}class Ca extends Sa{MAX(){return this.getToken(Tr.MAX,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMaxAsReducerFn&&e.enterMaxAsReducerFn(this)}exitRule(e){e.exitMaxAsReducerFn&&e.exitMaxAsReducerFn(this)}accept(e){return e.visitMaxAsReducerFn?e.visitMaxAsReducerFn(this):e.visitChildren(this)}}class Aa extends Sa{STDDEV(){return this.getToken(Tr.STDDEV,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterStddevAsReducerFn&&e.enterStddevAsReducerFn(this)}exitRule(e){e.exitStddevAsReducerFn&&e.exitStddevAsReducerFn(this)}accept(e){return e.visitStddevAsReducerFn?e.visitStddevAsReducerFn(this):e.visitChildren(this)}}class wa extends Sa{LATEST(){return this.getToken(Tr.LATEST,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLatestAsReducerFn&&e.enterLatestAsReducerFn(this)}exitRule(e){e.exitLatestAsReducerFn&&e.exitLatestAsReducerFn(this)}accept(e){return e.visitLatestAsReducerFn?e.visitLatestAsReducerFn(this):e.visitChildren(this)}}class Ia extends Sa{PCT(){return this.getToken(Tr.PCT,0)}LPAREN(){return this.getToken(Tr.LPAREN,0)}positiveNumber(){return this.getRuleContext(0,an)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPctAsReducerFn&&e.enterPctAsReducerFn(this)}exitRule(e){e.exitPctAsReducerFn&&e.exitPctAsReducerFn(this)}accept(e){return e.visitPctAsReducerFn?e.visitPctAsReducerFn(this):e.visitChildren(this)}}class Ra extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_mathFn}copyFrom(e){super.copyFrom(e)}}class Da extends Ra{SIN(){return this.getToken(Tr.SIN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSinAsMathFn&&e.enterSinAsMathFn(this)}exitRule(e){e.exitSinAsMathFn&&e.exitSinAsMathFn(this)}accept(e){return e.visitSinAsMathFn?e.visitSinAsMathFn(this):e.visitChildren(this)}}class Oa extends Ra{COS(){return this.getToken(Tr.COS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterCosAsMathFn&&e.enterCosAsMathFn(this)}exitRule(e){e.exitCosAsMathFn&&e.exitCosAsMathFn(this)}accept(e){return e.visitCosAsMathFn?e.visitCosAsMathFn(this):e.visitChildren(this)}}class Na extends Ra{TAN(){return this.getToken(Tr.TAN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTanAsMathFn&&e.enterTanAsMathFn(this)}exitRule(e){e.exitTanAsMathFn&&e.exitTanAsMathFn(this)}accept(e){return e.visitTanAsMathFn?e.visitTanAsMathFn(this):e.visitChildren(this)}}class Ma extends Ra{LOG(){return this.getToken(Tr.LOG,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLogAsMathFn&&e.enterLogAsMathFn(this)}exitRule(e){e.exitLogAsMathFn&&e.exitLogAsMathFn(this)}accept(e){return e.visitLogAsMathFn?e.visitLogAsMathFn(this):e.visitChildren(this)}}class ka extends Ra{CEIL(){return this.getToken(Tr.CEIL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterCeilAsMathFn&&e.enterCeilAsMathFn(this)}exitRule(e){e.exitCeilAsMathFn&&e.exitCeilAsMathFn(this)}accept(e){return e.visitCeilAsMathFn?e.visitCeilAsMathFn(this):e.visitChildren(this)}}class La extends Ra{FLOOR(){return this.getToken(Tr.FLOOR,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFloorAsMathFn&&e.enterFloorAsMathFn(this)}exitRule(e){e.exitFloorAsMathFn&&e.exitFloorAsMathFn(this)}accept(e){return e.visitFloorAsMathFn?e.visitFloorAsMathFn(this):e.visitChildren(this)}}class Pa extends Ra{ROUND(){return this.getToken(Tr.ROUND,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRoundAsMathFn&&e.enterRoundAsMathFn(this)}exitRule(e){e.exitRoundAsMathFn&&e.exitRoundAsMathFn(this)}accept(e){return e.visitRoundAsMathFn?e.visitRoundAsMathFn(this):e.visitChildren(this)}}class Fa extends Ra{ABS(){return this.getToken(Tr.ABS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAbsAsMathFn&&e.enterAbsAsMathFn(this)}exitRule(e){e.exitAbsAsMathFn&&e.exitAbsAsMathFn(this)}accept(e){return e.visitAbsAsMathFn?e.visitAbsAsMathFn(this):e.visitChildren(this)}}class Ua extends Ra{SQRT(){return this.getToken(Tr.SQRT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSqrtAsMathFn&&e.enterSqrtAsMathFn(this)}exitRule(e){e.exitSqrtAsMathFn&&e.exitSqrtAsMathFn(this)}accept(e){return e.visitSqrtAsMathFn?e.visitSqrtAsMathFn(this):e.visitChildren(this)}}class Va extends Ra{EXP(){return this.getToken(Tr.EXP,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExpAsMathFn&&e.enterExpAsMathFn(this)}exitRule(e){e.exitExpAsMathFn&&e.exitExpAsMathFn(this)}accept(e){return e.visitExpAsMathFn?e.visitExpAsMathFn(this):e.visitChildren(this)}}class Ba extends Ra{MAX(){return this.getToken(Tr.MAX,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMaxAsMathFn&&e.enterMaxAsMathFn(this)}exitRule(e){e.exitMaxAsMathFn&&e.exitMaxAsMathFn(this)}accept(e){return e.visitMaxAsMathFn?e.visitMaxAsMathFn(this):e.visitChildren(this)}}class $a extends Ra{MIN(){return this.getToken(Tr.MIN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinAsMathFn&&e.enterMinAsMathFn(this)}exitRule(e){e.exitMinAsMathFn&&e.exitMinAsMathFn(this)}accept(e){return e.visitMinAsMathFn?e.visitMinAsMathFn(this):e.visitChildren(this)}}class Ha extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_additiveOp}copyFrom(e){super.copyFrom(e)}}class Wa extends Ha{PLUS(){return this.getToken(Tr.PLUS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPlusAsAdditiveOp&&e.enterPlusAsAdditiveOp(this)}exitRule(e){e.exitPlusAsAdditiveOp&&e.exitPlusAsAdditiveOp(this)}accept(e){return e.visitPlusAsAdditiveOp?e.visitPlusAsAdditiveOp(this):e.visitChildren(this)}}class qa extends Ha{MINUS(){return this.getToken(Tr.MINUS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinusAsAdditiveOp&&e.enterMinusAsAdditiveOp(this)}exitRule(e){e.exitMinusAsAdditiveOp&&e.exitMinusAsAdditiveOp(this)}accept(e){return e.visitMinusAsAdditiveOp?e.visitMinusAsAdditiveOp(this):e.visitChildren(this)}}class ja extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_multiplicativeOp}copyFrom(e){super.copyFrom(e)}}class Qa extends ja{MULT(){return this.getToken(Tr.MULT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultAsMultiplicativeOp&&e.enterMultAsMultiplicativeOp(this)}exitRule(e){e.exitMultAsMultiplicativeOp&&e.exitMultAsMultiplicativeOp(this)}accept(e){return e.visitMultAsMultiplicativeOp?e.visitMultAsMultiplicativeOp(this):e.visitChildren(this)}}class za extends ja{DIV(){return this.getToken(Tr.DIV,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDivAsMultiplicativeOp&&e.enterDivAsMultiplicativeOp(this)}exitRule(e){e.exitDivAsMultiplicativeOp&&e.exitDivAsMultiplicativeOp(this)}accept(e){return e.visitDivAsMultiplicativeOp?e.visitDivAsMultiplicativeOp(this):e.visitChildren(this)}}class Ga extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_atomicExp}copyFrom(e){super.copyFrom(e)}}class Ka extends Ga{number(){return this.getRuleContext(0,pn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNumberAsAtomicExp&&e.enterNumberAsAtomicExp(this)}exitRule(e){e.exitNumberAsAtomicExp&&e.exitNumberAsAtomicExp(this)}accept(e){return e.visitNumberAsAtomicExp?e.visitNumberAsAtomicExp(this):e.visitChildren(this)}}class Ya extends Ga{rowVar(){return this.getRuleContext(0,Ks)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRowVarAsAtomicExp&&e.enterRowVarAsAtomicExp(this)}exitRule(e){e.exitRowVarAsAtomicExp&&e.exitRowVarAsAtomicExp(this)}accept(e){return e.visitRowVarAsAtomicExp?e.visitRowVarAsAtomicExp(this):e.visitChildren(this)}}class Za extends Ga{mathFn(){return this.getRuleContext(0,Ra)}LPAREN(){return this.getToken(Tr.LPAREN,0)}exp(e){return void 0===e?this.getRuleContexts(as):this.getRuleContext(e,as)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}COMMA(e){return void 0===e?this.getTokens(Tr.COMMA):this.getToken(Tr.COMMA,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMathFnAsAtomicExp&&e.enterMathFnAsAtomicExp(this)}exitRule(e){e.exitMathFnAsAtomicExp&&e.exitMathFnAsAtomicExp(this)}accept(e){return e.visitMathFnAsAtomicExp?e.visitMathFnAsAtomicExp(this):e.visitChildren(this)}}class Xa extends Ga{LPAREN(){return this.getToken(Tr.LPAREN,0)}exp(){return this.getRuleContext(0,as)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParenthesizedExpAsAtomicExp&&e.enterParenthesizedExpAsAtomicExp(this)}exitRule(e){e.exitParenthesizedExpAsAtomicExp&&e.exitParenthesizedExpAsAtomicExp(this)}accept(e){return e.visitParenthesizedExpAsAtomicExp?e.visitParenthesizedExpAsAtomicExp(this):e.visitChildren(this)}}class Ja extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_additiveExp}copyFrom(e){super.copyFrom(e)}}class es extends Ja{additiveExp(){return this.getRuleContext(0,Ja)}additiveOp(){return this.getRuleContext(0,Ha)}multiplicativeExp(){return this.getRuleContext(0,is)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAdditiveExpOpMultiplicativeExpAsAdditiveExp&&e.enterAdditiveExpOpMultiplicativeExpAsAdditiveExp(this)}exitRule(e){e.exitAdditiveExpOpMultiplicativeExpAsAdditiveExp&&e.exitAdditiveExpOpMultiplicativeExpAsAdditiveExp(this)}accept(e){return e.visitAdditiveExpOpMultiplicativeExpAsAdditiveExp?e.visitAdditiveExpOpMultiplicativeExpAsAdditiveExp(this):e.visitChildren(this)}}class ts extends Ja{multiplicativeExp(){return this.getRuleContext(0,is)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultiplicativeExpAsAdditiveExp&&e.enterMultiplicativeExpAsAdditiveExp(this)}exitRule(e){e.exitMultiplicativeExpAsAdditiveExp&&e.exitMultiplicativeExpAsAdditiveExp(this)}accept(e){return e.visitMultiplicativeExpAsAdditiveExp?e.visitMultiplicativeExpAsAdditiveExp(this):e.visitChildren(this)}}class is extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_multiplicativeExp}copyFrom(e){super.copyFrom(e)}}class rs extends is{multiplicativeExp(){return this.getRuleContext(0,is)}multiplicativeOp(){return this.getRuleContext(0,ja)}atomicExp(){return this.getRuleContext(0,Ga)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultiplicativeExpOpAtomicExpAsMultiplicativeExp&&e.enterMultiplicativeExpOpAtomicExpAsMultiplicativeExp(this)}exitRule(e){e.exitMultiplicativeExpOpAtomicExpAsMultiplicativeExp&&e.exitMultiplicativeExpOpAtomicExpAsMultiplicativeExp(this)}accept(e){return e.visitMultiplicativeExpOpAtomicExpAsMultiplicativeExp?e.visitMultiplicativeExpOpAtomicExpAsMultiplicativeExp(this):e.visitChildren(this)}}class ns extends is{atomicExp(){return this.getRuleContext(0,Ga)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAtomicExpAsMultiplicativeExp&&e.enterAtomicExpAsMultiplicativeExp(this)}exitRule(e){e.exitAtomicExpAsMultiplicativeExp&&e.exitAtomicExpAsMultiplicativeExp(this)}accept(e){return e.visitAtomicExpAsMultiplicativeExp?e.visitAtomicExpAsMultiplicativeExp(this):e.visitChildren(this)}}class as extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_exp}copyFrom(e){super.copyFrom(e)}}class ss extends as{additiveExp(){return this.getRuleContext(0,Ja)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAdditiveExpAsExp&&e.enterAdditiveExpAsExp(this)}exitRule(e){e.exitAdditiveExpAsExp&&e.exitAdditiveExpAsExp(this)}accept(e){return e.visitAdditiveExpAsExp?e.visitAdditiveExpAsExp(this):e.visitChildren(this)}}class os extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_atomicEvalExp}copyFrom(e){super.copyFrom(e)}}class ls extends os{number(){return this.getRuleContext(0,pn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNumberAsAtomicEvalExp&&e.enterNumberAsAtomicEvalExp(this)}exitRule(e){e.exitNumberAsAtomicEvalExp&&e.exitNumberAsAtomicEvalExp(this)}accept(e){return e.visitNumberAsAtomicEvalExp?e.visitNumberAsAtomicEvalExp(this):e.visitChildren(this)}}class cs extends os{UNDERSCORE_VALUE(){return this.getToken(Tr.UNDERSCORE_VALUE,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnderscoreValueAsAtomicEvalExp&&e.enterUnderscoreValueAsAtomicEvalExp(this)}exitRule(e){e.exitUnderscoreValueAsAtomicEvalExp&&e.exitUnderscoreValueAsAtomicEvalExp(this)}accept(e){return e.visitUnderscoreValueAsAtomicEvalExp?e.visitUnderscoreValueAsAtomicEvalExp(this):e.visitChildren(this)}}class ds extends os{reducerFn(){return this.getRuleContext(0,Sa)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterReducerFnAsAtomicEvalExp&&e.enterReducerFnAsAtomicEvalExp(this)}exitRule(e){e.exitReducerFnAsAtomicEvalExp&&e.exitReducerFnAsAtomicEvalExp(this)}accept(e){return e.visitReducerFnAsAtomicEvalExp?e.visitReducerFnAsAtomicEvalExp(this):e.visitChildren(this)}}class us extends os{mathFn(){return this.getRuleContext(0,Ra)}LPAREN(){return this.getToken(Tr.LPAREN,0)}evalExp(e){return void 0===e?this.getRuleContexts(_s):this.getRuleContext(e,_s)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}COMMA(e){return void 0===e?this.getTokens(Tr.COMMA):this.getToken(Tr.COMMA,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMathFnAsAtomicEvalExp&&e.enterMathFnAsAtomicEvalExp(this)}exitRule(e){e.exitMathFnAsAtomicEvalExp&&e.exitMathFnAsAtomicEvalExp(this)}accept(e){return e.visitMathFnAsAtomicEvalExp?e.visitMathFnAsAtomicEvalExp(this):e.visitChildren(this)}}class ps extends os{LPAREN(){return this.getToken(Tr.LPAREN,0)}evalExp(){return this.getRuleContext(0,_s)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParenthesizedEvalExpAsAtomicEvalExp&&e.enterParenthesizedEvalExpAsAtomicEvalExp(this)}exitRule(e){e.exitParenthesizedEvalExpAsAtomicEvalExp&&e.exitParenthesizedEvalExpAsAtomicEvalExp(this)}accept(e){return e.visitParenthesizedEvalExpAsAtomicEvalExp?e.visitParenthesizedEvalExpAsAtomicEvalExp(this):e.visitChildren(this)}}class hs extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_additiveEvalExp}copyFrom(e){super.copyFrom(e)}}class ms extends hs{additiveEvalExp(){return this.getRuleContext(0,hs)}additiveOp(){return this.getRuleContext(0,Ha)}multiplicativeEvalExp(){return this.getRuleContext(0,ys)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExp&&e.enterAdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExp(this)}exitRule(e){e.exitAdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExp&&e.exitAdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExp(this)}accept(e){return e.visitAdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExp?e.visitAdditiveEvalExpOpMultiplicativeEvalExpAsAdditiveEvalExp(this):e.visitChildren(this)}}class gs extends hs{multiplicativeEvalExp(){return this.getRuleContext(0,ys)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultiplicativeEvalExpAsAdditiveEvalExp&&e.enterMultiplicativeEvalExpAsAdditiveEvalExp(this)}exitRule(e){e.exitMultiplicativeEvalExpAsAdditiveEvalExp&&e.exitMultiplicativeEvalExpAsAdditiveEvalExp(this)}accept(e){return e.visitMultiplicativeEvalExpAsAdditiveEvalExp?e.visitMultiplicativeEvalExpAsAdditiveEvalExp(this):e.visitChildren(this)}}class ys extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_multiplicativeEvalExp}copyFrom(e){super.copyFrom(e)}}class vs extends ys{multiplicativeEvalExp(){return this.getRuleContext(0,ys)}multiplicativeOp(){return this.getRuleContext(0,ja)}atomicEvalExp(){return this.getRuleContext(0,os)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExp&&e.enterMultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExp(this)}exitRule(e){e.exitMultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExp&&e.exitMultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExp(this)}accept(e){return e.visitMultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExp?e.visitMultiplicativeEvalExpOpAtomicEvalExpAsMultiplicativeEvalExp(this):e.visitChildren(this)}}class fs extends ys{atomicEvalExp(){return this.getRuleContext(0,os)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAtomicEvalExpAsMultiplicativeEvalExp&&e.enterAtomicEvalExpAsMultiplicativeEvalExp(this)}exitRule(e){e.exitAtomicEvalExpAsMultiplicativeEvalExp&&e.exitAtomicEvalExpAsMultiplicativeEvalExp(this)}accept(e){return e.visitAtomicEvalExpAsMultiplicativeEvalExp?e.visitAtomicEvalExpAsMultiplicativeEvalExp(this):e.visitChildren(this)}}class _s extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_evalExp}copyFrom(e){super.copyFrom(e)}}class Ss extends _s{additiveEvalExp(){return this.getRuleContext(0,hs)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAdditiveEvalExpAsEvalExp&&e.enterAdditiveEvalExpAsEvalExp(this)}exitRule(e){e.exitAdditiveEvalExpAsEvalExp&&e.exitAdditiveEvalExpAsEvalExp(this)}accept(e){return e.visitAdditiveEvalExpAsEvalExp?e.visitAdditiveEvalExpAsEvalExp(this):e.visitChildren(this)}}class bs extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_atomicReducerExp}copyFrom(e){super.copyFrom(e)}}class Es extends bs{number(){return this.getRuleContext(0,pn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNumberAsAtomicReducerExp&&e.enterNumberAsAtomicReducerExp(this)}exitRule(e){e.exitNumberAsAtomicReducerExp&&e.exitNumberAsAtomicReducerExp(this)}accept(e){return e.visitNumberAsAtomicReducerExp?e.visitNumberAsAtomicReducerExp(this):e.visitChildren(this)}}class Ts extends bs{UNDERSCORE_VALUE(){return this.getToken(Tr.UNDERSCORE_VALUE,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnderscoreValueAsAtomicReducerExp&&e.enterUnderscoreValueAsAtomicReducerExp(this)}exitRule(e){e.exitUnderscoreValueAsAtomicReducerExp&&e.exitUnderscoreValueAsAtomicReducerExp(this)}accept(e){return e.visitUnderscoreValueAsAtomicReducerExp?e.visitUnderscoreValueAsAtomicReducerExp(this):e.visitChildren(this)}}class xs extends bs{mathFn(){return this.getRuleContext(0,Ra)}LPAREN(){return this.getToken(Tr.LPAREN,0)}reducerExp(e){return void 0===e?this.getRuleContexts(Ms):this.getRuleContext(e,Ms)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}COMMA(e){return void 0===e?this.getTokens(Tr.COMMA):this.getToken(Tr.COMMA,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMathFnAsAtomicReducerExp&&e.enterMathFnAsAtomicReducerExp(this)}exitRule(e){e.exitMathFnAsAtomicReducerExp&&e.exitMathFnAsAtomicReducerExp(this)}accept(e){return e.visitMathFnAsAtomicReducerExp?e.visitMathFnAsAtomicReducerExp(this):e.visitChildren(this)}}class Cs extends bs{reducerFn(){return this.getRuleContext(0,Sa)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterReducerFnAsAtomicReducerExp&&e.enterReducerFnAsAtomicReducerExp(this)}exitRule(e){e.exitReducerFnAsAtomicReducerExp&&e.exitReducerFnAsAtomicReducerExp(this)}accept(e){return e.visitReducerFnAsAtomicReducerExp?e.visitReducerFnAsAtomicReducerExp(this):e.visitChildren(this)}}class As extends bs{LPAREN(){return this.getToken(Tr.LPAREN,0)}reducerExp(){return this.getRuleContext(0,Ms)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParenthesizedReducerExpAsAtomicReducerExp&&e.enterParenthesizedReducerExpAsAtomicReducerExp(this)}exitRule(e){e.exitParenthesizedReducerExpAsAtomicReducerExp&&e.exitParenthesizedReducerExpAsAtomicReducerExp(this)}accept(e){return e.visitParenthesizedReducerExpAsAtomicReducerExp?e.visitParenthesizedReducerExpAsAtomicReducerExp(this):e.visitChildren(this)}}class ws extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_additiveReducerExp}copyFrom(e){super.copyFrom(e)}}class Is extends ws{additiveReducerExp(){return this.getRuleContext(0,ws)}additiveOp(){return this.getRuleContext(0,Ha)}multiplicativeReducerExp(){return this.getRuleContext(0,Ds)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExp&&e.enterAdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExp(this)}exitRule(e){e.exitAdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExp&&e.exitAdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExp(this)}accept(e){return e.visitAdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExp?e.visitAdditiveReducerExpOpMultiplicativeReducerExpAsAdditiveReducerExp(this):e.visitChildren(this)}}class Rs extends ws{multiplicativeReducerExp(){return this.getRuleContext(0,Ds)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultiplicativeReducerExpAsAdditiveReducerExp&&e.enterMultiplicativeReducerExpAsAdditiveReducerExp(this)}exitRule(e){e.exitMultiplicativeReducerExpAsAdditiveReducerExp&&e.exitMultiplicativeReducerExpAsAdditiveReducerExp(this)}accept(e){return e.visitMultiplicativeReducerExpAsAdditiveReducerExp?e.visitMultiplicativeReducerExpAsAdditiveReducerExp(this):e.visitChildren(this)}}class Ds extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_multiplicativeReducerExp}copyFrom(e){super.copyFrom(e)}}class Os extends Ds{multiplicativeReducerExp(){return this.getRuleContext(0,Ds)}multiplicativeOp(){return this.getRuleContext(0,ja)}atomicReducerExp(){return this.getRuleContext(0,bs)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExp&&e.enterMultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExp(this)}exitRule(e){e.exitMultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExp&&e.exitMultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExp(this)}accept(e){return e.visitMultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExp?e.visitMultiplicativeReducerExpOpAtomicReducerExpAsMultiplicativeReducerExp(this):e.visitChildren(this)}}class Ns extends Ds{atomicReducerExp(){return this.getRuleContext(0,bs)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAtomicReducerExpAsMultiplicativeReducerExp&&e.enterAtomicReducerExpAsMultiplicativeReducerExp(this)}exitRule(e){e.exitAtomicReducerExpAsMultiplicativeReducerExp&&e.exitAtomicReducerExpAsMultiplicativeReducerExp(this)}accept(e){return e.visitAtomicReducerExpAsMultiplicativeReducerExp?e.visitAtomicReducerExpAsMultiplicativeReducerExp(this):e.visitChildren(this)}}class Ms extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_reducerExp}copyFrom(e){super.copyFrom(e)}}class ks extends Ms{additiveReducerExp(){return this.getRuleContext(0,ws)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAdditiveReducerExpAsReducerExp&&e.enterAdditiveReducerExpAsReducerExp(this)}exitRule(e){e.exitAdditiveReducerExpAsReducerExp&&e.exitAdditiveReducerExpAsReducerExp(this)}accept(e){return e.visitAdditiveReducerExpAsReducerExp?e.visitAdditiveReducerExpAsReducerExp(this):e.visitChildren(this)}}class Ls extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_reducerBoolExp}copyFrom(e){super.copyFrom(e)}}class Ps extends Ls{reducerBoolTerm(e){return void 0===e?this.getRuleContexts(Fs):this.getRuleContext(e,Fs)}OR(){return this.tryGetToken(Tr.OR,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterOrExpAsReducerBoolExp&&e.enterOrExpAsReducerBoolExp(this)}exitRule(e){e.exitOrExpAsReducerBoolExp&&e.exitOrExpAsReducerBoolExp(this)}accept(e){return e.visitOrExpAsReducerBoolExp?e.visitOrExpAsReducerBoolExp(this):e.visitChildren(this)}}class Fs extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_reducerBoolTerm}copyFrom(e){super.copyFrom(e)}}class Us extends Fs{reducerBoolFactor(e){return void 0===e?this.getRuleContexts(Vs):this.getRuleContext(e,Vs)}AND(){return this.tryGetToken(Tr.AND,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAndExpAsReducerBoolTerm&&e.enterAndExpAsReducerBoolTerm(this)}exitRule(e){e.exitAndExpAsReducerBoolTerm&&e.exitAndExpAsReducerBoolTerm(this)}accept(e){return e.visitAndExpAsReducerBoolTerm?e.visitAndExpAsReducerBoolTerm(this):e.visitChildren(this)}}class Vs extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_reducerBoolFactor}copyFrom(e){super.copyFrom(e)}}class Bs extends Vs{EXCLAM(){return this.getToken(Tr.EXCLAM,0)}reducerBoolFactor(){return this.getRuleContext(0,Vs)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNotExpAsReducerBoolFactor&&e.enterNotExpAsReducerBoolFactor(this)}exitRule(e){e.exitNotExpAsReducerBoolFactor&&e.exitNotExpAsReducerBoolFactor(this)}accept(e){return e.visitNotExpAsReducerBoolFactor?e.visitNotExpAsReducerBoolFactor(this):e.visitChildren(this)}}class $s extends Vs{LPAREN(){return this.getToken(Tr.LPAREN,0)}reducerBoolExp(){return this.getRuleContext(0,Ls)}RPAREN(){return this.getToken(Tr.RPAREN,0)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParenExpAsReducerBoolFactor&&e.enterParenExpAsReducerBoolFactor(this)}exitRule(e){e.exitParenExpAsReducerBoolFactor&&e.exitParenExpAsReducerBoolFactor(this)}accept(e){return e.visitParenExpAsReducerBoolFactor?e.visitParenExpAsReducerBoolFactor(this):e.visitChildren(this)}}class Hs extends Vs{reducerExp(e){return void 0===e?this.getRuleContexts(Ms):this.getRuleContext(e,Ms)}comparator(){return this.getRuleContext(0,js)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterComparatorExpAsReducerBoolFactor&&e.enterComparatorExpAsReducerBoolFactor(this)}exitRule(e){e.exitComparatorExpAsReducerBoolFactor&&e.exitComparatorExpAsReducerBoolFactor(this)}accept(e){return e.visitComparatorExpAsReducerBoolFactor?e.visitComparatorExpAsReducerBoolFactor(this):e.visitChildren(this)}}class Ws extends Vs{booleanValue(){return this.getRuleContext(0,qs)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterBooleanValueAsReducerBoolFactor&&e.enterBooleanValueAsReducerBoolFactor(this)}exitRule(e){e.exitBooleanValueAsReducerBoolFactor&&e.exitBooleanValueAsReducerBoolFactor(this)}accept(e){return e.visitBooleanValueAsReducerBoolFactor?e.visitBooleanValueAsReducerBoolFactor(this):e.visitChildren(this)}}class qs extends Te.ParserRuleContext{TRUE(){return this.tryGetToken(Tr.TRUE,0)}FALSE(){return this.tryGetToken(Tr.FALSE,0)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_booleanValue}enterRule(e){e.enterBooleanValue&&e.enterBooleanValue(this)}exitRule(e){e.exitBooleanValue&&e.exitBooleanValue(this)}accept(e){return e.visitBooleanValue?e.visitBooleanValue(this):e.visitChildren(this)}}class js extends Te.ParserRuleContext{GE(){return this.tryGetToken(Tr.GE,0)}LE(){return this.tryGetToken(Tr.LE,0)}NE(){return this.tryGetToken(Tr.NE,0)}GT(){return this.tryGetToken(Tr.GT,0)}LT(){return this.tryGetToken(Tr.LT,0)}EQ(){return this.tryGetToken(Tr.EQ,0)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_comparator}enterRule(e){e.enterComparator&&e.enterComparator(this)}exitRule(e){e.exitComparator&&e.exitComparator(this)}accept(e){return e.visitComparator?e.visitComparator(this):e.visitChildren(this)}}class Qs extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_join}copyFrom(e){super.copyFrom(e)}}class zs extends Qs{exp(){return this.getRuleContext(0,as)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}ALONG(){return this.tryGetToken(Tr.ALONG,0)}dimensionKeyList(){return this.tryGetRuleContext(0,$r)}AS(){return this.tryGetToken(Tr.AS,0)}metricIdentifier(){return this.tryGetRuleContext(0,Fr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterJoinOutputAlong&&e.enterJoinOutputAlong(this)}exitRule(e){e.exitJoinOutputAlong&&e.exitJoinOutputAlong(this)}accept(e){return e.visitJoinOutputAlong?e.visitJoinOutputAlong(this):e.visitChildren(this)}}class Gs extends Qs{exp(){return this.getRuleContext(0,as)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}AS(){return this.tryGetToken(Tr.AS,0)}metricIdentifier(){return this.tryGetRuleContext(0,Fr)}ALONG(){return this.tryGetToken(Tr.ALONG,0)}dimensionKeyList(){return this.tryGetRuleContext(0,$r)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterJoinOutputAs&&e.enterJoinOutputAs(this)}exitRule(e){e.exitJoinOutputAs&&e.exitJoinOutputAs(this)}accept(e){return e.visitJoinOutputAs?e.visitJoinOutputAs(this):e.visitChildren(this)}}class Ks extends Te.ParserRuleContext{ROW_IDENT(){return this.getToken(Tr.ROW_IDENT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_rowVar}enterRule(e){e.enterRowVar&&e.enterRowVar(this)}exitRule(e){e.exitRowVar&&e.exitRowVar(this)}accept(e){return e.visitRowVar?e.visitRowVar(this):e.visitChildren(this)}}class Ys extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_header}copyFrom(e){super.copyFrom(e)}}class Zs extends Ys{join(){return this.getRuleContext(0,Qs)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterJoinAsHeader&&e.enterJoinAsHeader(this)}exitRule(e){e.exitJoinAsHeader&&e.exitJoinAsHeader(this)}accept(e){return e.visitJoinAsHeader?e.visitJoinAsHeader(this):e.visitChildren(this)}}class Xs extends Ys{rowVar(){return this.getRuleContext(0,Ks)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRowVarAsHeader&&e.enterRowVarAsHeader(this)}exitRule(e){e.exitRowVarAsHeader&&e.exitRowVarAsHeader(this)}accept(e){return e.visitRowVarAsHeader?e.visitRowVarAsHeader(this):e.visitChildren(this)}}class Js extends Ys{select(){return this.getRuleContext(0,xr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSelectAsHeader&&e.enterSelectAsHeader(this)}exitRule(e){e.exitSelectAsHeader&&e.exitSelectAsHeader(this)}accept(e){return e.visitSelectAsHeader?e.visitSelectAsHeader(this):e.visitChildren(this)}}class eo extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_queryClause}copyFrom(e){super.copyFrom(e)}}class to extends eo{aggregate(){return this.getRuleContext(0,zn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAggregateAsQueryClause&&e.enterAggregateAsQueryClause(this)}exitRule(e){e.exitAggregateAsQueryClause&&e.exitAggregateAsQueryClause(this)}accept(e){return e.visitAggregateAsQueryClause?e.visitAggregateAsQueryClause(this):e.visitChildren(this)}}class io extends eo{rollup(){return this.getRuleContext(0,ra)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRollupAsQueryClause&&e.enterRollupAsQueryClause(this)}exitRule(e){e.exitRollupAsQueryClause&&e.exitRollupAsQueryClause(this)}accept(e){return e.visitRollupAsQueryClause?e.visitRollupAsQueryClause(this):e.visitChildren(this)}}class ro extends eo{quantize(){return this.getRuleContext(0,ta)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterQuantizeAsQueryClause&&e.enterQuantizeAsQueryClause(this)}exitRule(e){e.exitQuantizeAsQueryClause&&e.exitQuantizeAsQueryClause(this)}accept(e){return e.visitQuantizeAsQueryClause?e.visitQuantizeAsQueryClause(this):e.visitChildren(this)}}class no extends eo{timeShift(){return this.getRuleContext(0,Cn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTimeShiftAsQueryClause&&e.enterTimeShiftAsQueryClause(this)}exitRule(e){e.exitTimeShiftAsQueryClause&&e.exitTimeShiftAsQueryClause(this)}accept(e){return e.visitTimeShiftAsQueryClause?e.visitTimeShiftAsQueryClause(this):e.visitChildren(this)}}class ao extends eo{accum(){return this.getRuleContext(0,na)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAccumulateAsQueryClause&&e.enterAccumulateAsQueryClause(this)}exitRule(e){e.exitAccumulateAsQueryClause&&e.exitAccumulateAsQueryClause(this)}accept(e){return e.visitAccumulateAsQueryClause?e.visitAccumulateAsQueryClause(this):e.visitChildren(this)}}class so extends eo{parse(){return this.getRuleContext(0,sa)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParseAsQueryClause&&e.enterParseAsQueryClause(this)}exitRule(e){e.exitParseAsQueryClause&&e.exitParseAsQueryClause(this)}accept(e){return e.visitParseAsQueryClause?e.visitParseAsQueryClause(this):e.visitChildren(this)}}class oo extends eo{rate(){return this.getRuleContext(0,ca)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterRateAsQueryClause&&e.enterRateAsQueryClause(this)}exitRule(e){e.exitRateAsQueryClause&&e.exitRateAsQueryClause(this)}accept(e){return e.visitRateAsQueryClause?e.visitRateAsQueryClause(this):e.visitChildren(this)}}class lo extends eo{delta(){return this.getRuleContext(0,ma)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDeltaAsQueryClause&&e.enterDeltaAsQueryClause(this)}exitRule(e){e.exitDeltaAsQueryClause&&e.exitDeltaAsQueryClause(this)}accept(e){return e.visitDeltaAsQueryClause?e.visitDeltaAsQueryClause(this):e.visitChildren(this)}}class co extends eo{eval(){return this.getRuleContext(0,ya)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterEvalAsQueryClause&&e.enterEvalAsQueryClause(this)}exitRule(e){e.exitEvalAsQueryClause&&e.exitEvalAsQueryClause(this)}accept(e){return e.visitEvalAsQueryClause?e.visitEvalAsQueryClause(this):e.visitChildren(this)}}class uo extends eo{topBottom(){return this.getRuleContext(0,va)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTopBottomAsQueryClause&&e.enterTopBottomAsQueryClause(this)}exitRule(e){e.exitTopBottomAsQueryClause&&e.exitTopBottomAsQueryClause(this)}accept(e){return e.visitTopBottomAsQueryClause?e.visitTopBottomAsQueryClause(this):e.visitChildren(this)}}class po extends eo{filter(){return this.getRuleContext(0,fa)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFilterAsQueryClause&&e.enterFilterAsQueryClause(this)}exitRule(e){e.exitFilterAsQueryClause&&e.exitFilterAsQueryClause(this)}accept(e){return e.visitFilterAsQueryClause?e.visitFilterAsQueryClause(this):e.visitChildren(this)}}class ho extends eo{histogramQuantile(){return this.getRuleContext(0,An)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterHistogramQuantileClause&&e.enterHistogramQuantileClause(this)}exitRule(e){e.exitHistogramQuantileClause&&e.exitHistogramQuantileClause(this)}accept(e){return e.visitHistogramQuantileClause?e.visitHistogramQuantileClause(this):e.visitChildren(this)}}class mo extends eo{outlier(){return this.getRuleContext(0,wn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterOutlierAsQueryClause&&e.enterOutlierAsQueryClause(this)}exitRule(e){e.exitOutlierAsQueryClause&&e.exitOutlierAsQueryClause(this)}accept(e){return e.visitOutlierAsQueryClause?e.visitOutlierAsQueryClause(this):e.visitChildren(this)}}class go extends eo{fillmissing(){return this.getRuleContext(0,In)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFillmissingAsQueryClause&&e.enterFillmissingAsQueryClause(this)}exitRule(e){e.exitFillmissingAsQueryClause&&e.exitFillmissingAsQueryClause(this)}accept(e){return e.visitFillmissingAsQueryClause?e.visitFillmissingAsQueryClause(this):e.visitChildren(this)}}class yo extends eo{where(){return this.getRuleContext(0,_a)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterWhereAsQueryClause&&e.enterWhereAsQueryClause(this)}exitRule(e){e.exitWhereAsQueryClause&&e.exitWhereAsQueryClause(this)}accept(e){return e.visitWhereAsQueryClause?e.visitWhereAsQueryClause(this):e.visitChildren(this)}}class vo extends eo{timeslice(){return this.getRuleContext(0,ia)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTimesliceAsQueryClause&&e.enterTimesliceAsQueryClause(this)}exitRule(e){e.exitTimesliceAsQueryClause&&e.exitTimesliceAsQueryClause(this)}accept(e){return e.visitTimesliceAsQueryClause?e.visitTimesliceAsQueryClause(this):e.visitChildren(this)}}class fo extends eo{ewma(){return this.getRuleContext(0,Dn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterEwmaAsQueryClause&&e.enterEwmaAsQueryClause(this)}exitRule(e){e.exitEwmaAsQueryClause&&e.exitEwmaAsQueryClause(this)}accept(e){return e.visitEwmaAsQueryClause?e.visitEwmaAsQueryClause(this):e.visitChildren(this)}}class _o extends Te.ParserRuleContext{header(){return this.getRuleContext(0,Ys)}EOF(){return this.getToken(Tr.EOF,0)}PIPE(e){return void 0===e?this.getTokens(Tr.PIPE):this.getToken(Tr.PIPE,e)}queryClause(e){return void 0===e?this.getRuleContexts(eo):this.getRuleContext(e,eo)}WS(e){return void 0===e?this.getTokens(Tr.WS):this.getToken(Tr.WS,e)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_queryRow}enterRule(e){e.enterQueryRow&&e.enterQueryRow(this)}exitRule(e){e.exitQueryRow&&e.exitQueryRow(this)}accept(e){return e.visitQueryRow?e.visitQueryRow(this):e.visitChildren(this)}}class So extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_graphiteMetricIdentifier}copyFrom(e){super.copyFrom(e)}}class bo extends So{keyword(){return this.getRuleContext(0,Po)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterKeywordAsGraphiteMetricIdentifier&&e.enterKeywordAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitKeywordAsGraphiteMetricIdentifier&&e.exitKeywordAsGraphiteMetricIdentifier(this)}accept(e){return e.visitKeywordAsGraphiteMetricIdentifier?e.visitKeywordAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Eo extends So{MINUS(){return this.getToken(Tr.MINUS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMinusAsGraphiteMetricIdentifier&&e.enterMinusAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitMinusAsGraphiteMetricIdentifier&&e.exitMinusAsGraphiteMetricIdentifier(this)}accept(e){return e.visitMinusAsGraphiteMetricIdentifier?e.visitMinusAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class To extends So{PLUS(){return this.getToken(Tr.PLUS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterPlusAsGraphiteMetricIdentifier&&e.enterPlusAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitPlusAsGraphiteMetricIdentifier&&e.exitPlusAsGraphiteMetricIdentifier(this)}accept(e){return e.visitPlusAsGraphiteMetricIdentifier?e.visitPlusAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class xo extends So{DIV(){return this.getToken(Tr.DIV,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDivAsGraphiteMetricIdentifier&&e.enterDivAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitDivAsGraphiteMetricIdentifier&&e.exitDivAsGraphiteMetricIdentifier(this)}accept(e){return e.visitDivAsGraphiteMetricIdentifier?e.visitDivAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Co extends So{UNSIGNED_INTEGER(){return this.getToken(Tr.UNSIGNED_INTEGER,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnsignedIntegerAsGraphiteMetricIdentifier&&e.enterUnsignedIntegerAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitUnsignedIntegerAsGraphiteMetricIdentifier&&e.exitUnsignedIntegerAsGraphiteMetricIdentifier(this)}accept(e){return e.visitUnsignedIntegerAsGraphiteMetricIdentifier?e.visitUnsignedIntegerAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Ao extends So{UNSIGNED_DECIMAL(){return this.getToken(Tr.UNSIGNED_DECIMAL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnsignedDecimalAsGraphiteMetricIdentifier&&e.enterUnsignedDecimalAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitUnsignedDecimalAsGraphiteMetricIdentifier&&e.exitUnsignedDecimalAsGraphiteMetricIdentifier(this)}accept(e){return e.visitUnsignedDecimalAsGraphiteMetricIdentifier?e.visitUnsignedDecimalAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class wo extends So{TIMEUNIT(){return this.getToken(Tr.TIMEUNIT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTimeunitAsGraphiteMetricIdentifier&&e.enterTimeunitAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitTimeunitAsGraphiteMetricIdentifier&&e.exitTimeunitAsGraphiteMetricIdentifier(this)}accept(e){return e.visitTimeunitAsGraphiteMetricIdentifier?e.visitTimeunitAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Io extends So{UNSIGNED_TIME_DURATION(){return this.getToken(Tr.UNSIGNED_TIME_DURATION,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnsignedTimeDurationAsGraphiteMetricIdentifier&&e.enterUnsignedTimeDurationAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitUnsignedTimeDurationAsGraphiteMetricIdentifier&&e.exitUnsignedTimeDurationAsGraphiteMetricIdentifier(this)}accept(e){return e.visitUnsignedTimeDurationAsGraphiteMetricIdentifier?e.visitUnsignedTimeDurationAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Ro extends So{UNDERSCORE_VALUE(){return this.getToken(Tr.UNDERSCORE_VALUE,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnderscoreValueAsGraphiteMetricIdentifier&&e.enterUnderscoreValueAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitUnderscoreValueAsGraphiteMetricIdentifier&&e.exitUnderscoreValueAsGraphiteMetricIdentifier(this)}accept(e){return e.visitUnderscoreValueAsGraphiteMetricIdentifier?e.visitUnderscoreValueAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Do extends So{GRAPHITE_METRIC_IDENT(){return this.getToken(Tr.GRAPHITE_METRIC_IDENT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGraphiteMetricIdentAsGraphiteMetricIdentifier&&e.enterGraphiteMetricIdentAsGraphiteMetricIdentifier(this)}exitRule(e){e.exitGraphiteMetricIdentAsGraphiteMetricIdentifier&&e.exitGraphiteMetricIdentAsGraphiteMetricIdentifier(this)}accept(e){return e.visitGraphiteMetricIdentAsGraphiteMetricIdentifier?e.visitGraphiteMetricIdentAsGraphiteMetricIdentifier(this):e.visitChildren(this)}}class Oo extends Te.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_graphiteMetricWildcardIdentifier}copyFrom(e){super.copyFrom(e)}}class No extends Oo{graphiteMetricIdentifier(){return this.getRuleContext(0,So)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifier&&e.enterGraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifier(this)}exitRule(e){e.exitGraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifier&&e.exitGraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifier(this)}accept(e){return e.visitGraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifier?e.visitGraphiteMetricIdentifierAsGraphiteMetricWildcardIdentifier(this):e.visitChildren(this)}}class Mo extends Oo{MULT(){return this.getToken(Tr.MULT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterMultAsGraphiteMetricWildcardIdentifier&&e.enterMultAsGraphiteMetricWildcardIdentifier(this)}exitRule(e){e.exitMultAsGraphiteMetricWildcardIdentifier&&e.exitMultAsGraphiteMetricWildcardIdentifier(this)}accept(e){return e.visitMultAsGraphiteMetricWildcardIdentifier?e.visitMultAsGraphiteMetricWildcardIdentifier(this):e.visitChildren(this)}}class ko extends Oo{GRAPHITE_METRIC_WILDCARD_IDENT(){return this.getToken(Tr.GRAPHITE_METRIC_WILDCARD_IDENT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifier&&e.enterGraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifier(this)}exitRule(e){e.exitGraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifier&&e.exitGraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifier(this)}accept(e){return e.visitGraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifier?e.visitGraphiteMetricWildcardIdentAsGraphiteMetricWildcardIdentifier(this):e.visitChildren(this)}}class Lo extends Te.ParserRuleContext{OR(){return this.tryGetToken(Tr.OR,0)}AND(){return this.tryGetToken(Tr.AND,0)}NOT(){return this.tryGetToken(Tr.NOT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_reservedKeyword}enterRule(e){e.enterReservedKeyword&&e.enterReservedKeyword(this)}exitRule(e){e.exitReservedKeyword&&e.exitReservedKeyword(this)}accept(e){return e.visitReservedKeyword?e.visitReservedKeyword(this):e.visitChildren(this)}}class Po extends Te.ParserRuleContext{AVG(){return this.tryGetToken(Tr.AVG,0)}COUNT(){return this.tryGetToken(Tr.COUNT,0)}MAX(){return this.tryGetToken(Tr.MAX,0)}MIN(){return this.tryGetToken(Tr.MIN,0)}PCT(){return this.tryGetToken(Tr.PCT,0)}SUM(){return this.tryGetToken(Tr.SUM,0)}ALONG(){return this.tryGetToken(Tr.ALONG,0)}AS(){return this.tryGetToken(Tr.AS,0)}BY(){return this.tryGetToken(Tr.BY,0)}OUTLIER(){return this.tryGetToken(Tr.OUTLIER,0)}STDDEV(){return this.tryGetToken(Tr.STDDEV,0)}LATEST(){return this.tryGetToken(Tr.LATEST,0)}FILTER(){return this.tryGetToken(Tr.FILTER,0)}TO(){return this.tryGetToken(Tr.TO,0)}USING(){return this.tryGetToken(Tr.USING,0)}TIMESHIFT(){return this.tryGetToken(Tr.TIMESHIFT,0)}HISTOGRAM_QUANTILE(){return this.tryGetToken(Tr.HISTOGRAM_QUANTILE,0)}QUANTIZE(){return this.tryGetToken(Tr.QUANTIZE,0)}ACCUM(){return this.tryGetToken(Tr.ACCUM,0)}PARSE(){return this.tryGetToken(Tr.PARSE,0)}FIELD(){return this.tryGetToken(Tr.FIELD,0)}NODROP(){return this.tryGetToken(Tr.NODROP,0)}RATE(){return this.tryGetToken(Tr.RATE,0)}DELTA(){return this.tryGetToken(Tr.DELTA,0)}EVAL(){return this.tryGetToken(Tr.EVAL,0)}TOPK(){return this.tryGetToken(Tr.TOPK,0)}BOTTOMK(){return this.tryGetToken(Tr.BOTTOMK,0)}SIN(){return this.tryGetToken(Tr.SIN,0)}COS(){return this.tryGetToken(Tr.COS,0)}TAN(){return this.tryGetToken(Tr.TAN,0)}LOG(){return this.tryGetToken(Tr.LOG,0)}CEIL(){return this.tryGetToken(Tr.CEIL,0)}FLOOR(){return this.tryGetToken(Tr.FLOOR,0)}ROUND(){return this.tryGetToken(Tr.ROUND,0)}ABS(){return this.tryGetToken(Tr.ABS,0)}SQRT(){return this.tryGetToken(Tr.SQRT,0)}EXP(){return this.tryGetToken(Tr.EXP,0)}LT(){return this.tryGetToken(Tr.LT,0)}LE(){return this.tryGetToken(Tr.LE,0)}GT(){return this.tryGetToken(Tr.GT,0)}GE(){return this.tryGetToken(Tr.GE,0)}NE(){return this.tryGetToken(Tr.NE,0)}EQ(){return this.tryGetToken(Tr.EQ,0)}INCREASING(){return this.tryGetToken(Tr.INCREASING,0)}DECREASING(){return this.tryGetToken(Tr.DECREASING,0)}THRESHOLD(){return this.tryGetToken(Tr.THRESHOLD,0)}WINDOW(){return this.tryGetToken(Tr.WINDOW,0)}DIRECTION(){return this.tryGetToken(Tr.DIRECTION,0)}FILLMISSING(){return this.tryGetToken(Tr.FILLMISSING,0)}EMPTY(){return this.tryGetToken(Tr.EMPTY,0)}LAST(){return this.tryGetToken(Tr.LAST,0)}INTERPOLATION(){return this.tryGetToken(Tr.INTERPOLATION,0)}WHERE(){return this.tryGetToken(Tr.WHERE,0)}TIMESLICE(){return this.tryGetToken(Tr.TIMESLICE,0)}OVER(){return this.tryGetToken(Tr.OVER,0)}EWMA(){return this.tryGetToken(Tr.EWMA,0)}SPAN(){return this.tryGetToken(Tr.SPAN,0)}ALPHA(){return this.tryGetToken(Tr.ALPHA,0)}constructor(e,t){super(e,t)}get ruleIndex(){return Tr.RULE_keyword}enterRule(e){e.enterKeyword&&e.enterKeyword(this)}exitRule(e){e.exitKeyword&&e.exitKeyword(this)}accept(e){return e.visitKeyword?e.visitKeyword(this):e.visitChildren(this)}}class Fo extends _r{constructor(){super()}defaultResult(){return[]}aggregateResult(e,t){return[...e,...t]}visitDimensionSelector(e){var t,i,r,n,a,s;const o=null==(t=e.children)?void 0:t.find((e=>e instanceof Br)),l=e.children[e.childCount-1],c=l instanceof qr?l.children.filter((e=>e instanceof Qr)):[];if((null==c?void 0:c.length)>1){const e=[];for(let t=0;t<l.childCount;t++){const n=l.getChild(t);if(n instanceof Qr){const a=[{start:n.start.startIndex,stop:n.stop.stopIndex}],s=Uo(n,t,!1);if(s){const e=null==(i=s.symbol)?void 0:i.startIndex,t=null==(r=s.symbol)?void 0:r.stopIndex;a.push({start:e,stop:t})}e.push({key:Ho(o),value:Ho(n),positions:a})}}return e}const d=[{start:e.start.startIndex,stop:e.stop.stopIndex}];let u=e,p=e.parent,h=!1;for(;!h&&p;){if(p.childCount>1)for(let e=0;e<p.childCount;e++){const t=p.getChild(e);if(t!==u&&Vo(t)){h=!0,d[0].start=u.start.startIndex,d[0].stop=u.stop.stopIndex;const e=null==(n=null==p?void 0:p.children)?void 0:n.findIndex((e=>e===u)),t=Uo(u,e);if(t){const e=null==(a=t.symbol)?void 0:a.startIndex,i=null==(s=t.symbol)?void 0:s.stopIndex;d.push({start:e,stop:i})}}}u=p,p=u.parent}const m=1===c.length?c[0]:l;return[{key:Ho(o),value:Ho(m),positions:d}]}}const Uo=(e,t,i=!0)=>{const r=Bo(e.parent,t,i),n=r.text.toLowerCase();return"and"===n||"or"===n?r:void 0},Vo=e=>{if(e&&e instanceof Kr)return!0;if(!e.childCount)return!1;for(let t=0;t<e.childCount;t++)if(Vo(e.getChild(t)))return!0;return!1},Bo=(e,t,i)=>{const r=i?0===t:$o(e,t);let n,a=!1,s=r?i?1:t:t-1;for(;!a;)s=r?s+1:s-1,""!==e.children[s].text.trim()&&(a=!0,n=e.children[s]);return n},$o=(e,t)=>{const i=e.getChild(t);return e.children.filter((e=>e instanceof Qr))[0].text===i.text},Ho=e=>{if(null==e||!e.text)return"";const{text:t}=e;return(t.startsWith('"')?t.substring(1,t.length-1):t).toLowerCase()},Wo=e=>{const t=e.trim(),i=pe.CharStreams.fromString(t),r=new br(i),n=new pe.CommonTokenStream(r),a=new Tr(n);a.removeErrorListeners();try{return a.queryRow().accept(new Fo)}catch(e){return[]}},qo={[le.BooleanOperation.lt]:{label:"<",operator:le.BooleanOperation.lt},[le.BooleanOperation.lte]:{label:"",operator:le.BooleanOperation.lte},[le.BooleanOperation.gt]:{label:">",operator:le.BooleanOperation.gt},[le.BooleanOperation.gte]:{label:"",operator:le.BooleanOperation.gte},[le.BooleanOperation.equals]:{label:"=",operator:le.BooleanOperation.equals},[le.BooleanOperation.notEqual]:{label:"",operator:le.BooleanOperation.notEqual}},jo={[le.Operator.Accum]:{fullName:"accumulate",operator:le.Operator.Accum,shouldAutoFocusInput:!1},[le.Operator.Delta]:{fullName:"delta",operator:le.Operator.Delta,shouldAutoFocusInput:!1},[le.Operator.Rate]:{fullName:"rate",operator:le.Operator.Rate,shouldAutoFocusInput:!1},[le.Operator.Filter]:{fullName:"filter",operator:le.Operator.Filter},[le.Operator.Avg]:{fullName:"average",operator:le.Operator.Avg},[le.Operator.Count]:{fullName:"count",operator:le.Operator.Count},[le.Operator.Max]:{fullName:"maximum",operator:le.Operator.Max},[le.Operator.Min]:{fullName:"minimum",operator:le.Operator.Min},[le.Operator.Sum]:{fullName:"sum",operator:le.Operator.Sum},[le.Operator.Percentile]:{fullName:"percentile",operator:le.Operator.Percentile},[le.Operator.Bottomk]:{fullName:"bottomk",operator:le.Operator.Bottomk},[le.Operator.Topk]:{fullName:"topk",operator:le.Operator.Topk},[le.Operator.Quantize]:{fullName:"quantize",operator:le.Operator.Quantize},[le.Operator.Eval]:{fullName:"evaluate",operator:le.Operator.Eval},[le.Operator.Parse]:{fullName:"parse",operator:le.Operator.Parse},[le.Operator.TimeShift]:{fullName:"timeshift",operator:le.Operator.TimeShift},[le.Operator.FillMissing]:{fullName:"fillmissing",operator:le.Operator.FillMissing,shouldAutoFocusInput:!1},[le.Operator.Outlier]:{fullName:"outlier",operator:le.Operator.Outlier,shouldAutoFocusInput:!1},[le.Operator.HistogramQuantile]:{fullName:"histogram_quantile",operator:le.Operator.HistogramQuantile},[le.Operator.StandardDeviation]:{fullName:"stddev",operator:le.Operator.StandardDeviation},[le.Operator.Where]:{fullName:"where",operator:le.Operator.Where},[le.Operator.Ewma]:{fullName:"ewma",operator:le.Operator.Ewma},[le.Operator.Timeslice]:{fullName:"timeslice",operator:le.Operator.Timeslice}},Qo=Object.values(jo).sort(((e,t)=>e.fullName.localeCompare(t.fullName))),zo=[le.VisualSettingsType.AREA,le.VisualSettingsType.BAR,le.VisualSettingsType.BUBBLE,le.VisualSettingsType.COLUMN,le.VisualSettingsType.HONEYCOMB,le.VisualSettingsType.LINE,le.VisualSettingsType.PIE,le.VisualSettingsType.PYRAMID,le.VisualSettingsType.SCATTER,le.VisualSettingsType.TABLE];var Go=(e=>(e.TIMESERIES="timeseries",e.NONTIMESERIES="nontimeseries",e.OUTLIER="outlier",e.TRANSPOSE="transpose",e.TABLE="table",e))(Go||{}),Ko=(e=>(e.primary="axisY",e.secondary="axisY2",e))(Ko||{}),Yo=(e=>(e.DISTRIBUTION="distribution",e.HONEYCOMB="honeyComb",e.IMAGE="ImagePanel",e.MAP="map",e.SINGLE_VALUE_METRICS="singleValueMetrics",e.TEXT="TextPanel",e.TIME_SERIES="timeSeries",e))(Yo||{}),Zo=(e=>(e.GREATER="greater",e.GREATER_OR_EQUAL="greater_or_equal",e.LESS="less",e.LESS_OR_EQUAL="less_or_equal",e.EXCLUDES="excludes",e.INCLUDES="includes",e))(Zo||{}),Xo=(e=>(e.CATEGORICAL_DEFAULT="Categorical Default",e.CATEGORICAL_LIGHT="Categorical Light",e.CATEGORICAL_DARK="Categorical Dark",e.DIVERGING_1="Diverging 1",e.DIVERGING_2="Diverging 2",e.SEQUENTIAL_1="Sequential 1",e.SEQUENTIAL_2="Sequential 2",e.COLOR_SAFE="Colorsafe",e.SET3="SET3",e.SET1="SET1",e.METRIC_DEFAULT="METRIC_DEFAULT",e))(Xo||{}),Jo=(e=>(e.HEXAGON="hexagon",e.CIRCLE="circle",e))(Jo||{}),el=(e=>(e.CLUSTER="Cluster",e.HEATMAP="Heat",e))(el||{}),tl=(e=>(e[e.AUTO=0]="AUTO",e[e.FIXED=1]="FIXED",e))(tl||{}),il=(e=>(e.DARK="dark",e.LIGHT="light",e.BRANDLIGHT="brandLight",e.BRANDDARK="brandDark",e))(il||{}),rl=(e=>(e.HEIGHT="height",e.AREA="area",e))(rl||{}),nl=(e=>(e.DEFAULT="default",e.REVERSED="reversed",e))(nl||{}),al=(e=>(e.DEFAULT="default",e.INTERPOLATION="interpolation",e.EMPTY="empty",e.FIXED="fixed",e.LATEST="latest",e))(al||{});const sl=(e,t,i=6)=>{const r=new Array(i);r[0]=e,r[i-1]=t;for(let n=1;n<i-1;n++)r[n]=(0,Me.mixColor)(e,t,1-n/i);return r},ol={"BLUE-GREEN":sl("#b2d4e6","#4b906f"),"BLUE-PURPLE":sl("#bce2ea","#71358d"),"YELLOW-RED":sl("#efcf91","#ec5f5d"),"YELLOW-BLUE":sl("#efcf91","#283e87")},ll="BLUE-GREEN",cl="#3676B1",dl="spectrum",ul={colorMode:"spectrum",colorSchemeName:ll,baseOpacityColor:cl},pl=100;var hl=(e=>(e.FINISHED_SUCCESSFULLY="FinishedSuccessfully",e.NOT_STARTED="NotStarted",e.IN_PROGRESS="InProgress",e.QUERY_CANCELLED="QueryCancelled",e))(hl||{}),ml=(e=>(e.CONTAINER="ContainerPanel",e.TEXT="TextPanel",e.SUMO_SEARCH="SumoSearchPanel",e.REPEATING="RepeatingPanel",e.IMAGE="ImagePanel",e.TSAT_EOI="EventsOfInterestScatterPanel",e.SERVICE_MAP="ServiceMapPanel",e.TRACE_LIST="TracesListPanel",e))(ml||{}),gl=(e=>(e.TIME_SERIES="TIME_SERIES",e.DISTRIBUTION="DISTRIBUTION",e.SINGLE_VALUE_METRICS="SINGLE_VALUE_METRICS",e.HONEYCOMB="HONEYCOMB",e.MAP="MAP",e.TEXT="TEXT",e.IMAGE="IMAGE",e.TRACE_LIST="TRACE_LIST",e.SERVICE_MAP="SERVICE_MAP",e))(gl||{});const yl={TIME_SERIES:{explanationMessage:"sharedAnalytics.renderTypes.timeSeries.explanation",icon:"time-series",label:"sharedAnalytics.renderTypes.timeSeries.label",panelType:"SumoSearchPanel",visualSettings:{general:{mode:"timeSeries"}},pristineMessage:"sharedAnalytics.emptyVisualization.timeSeries"},DISTRIBUTION:{explanationMessage:"sharedAnalytics.renderTypes.distribution.explanation",icon:"pie-chart-brand",label:"sharedAnalytics.renderTypes.distribution.label",panelType:"SumoSearchPanel",visualSettings:{general:{mode:"distribution"}},pristineMessage:"sharedAnalytics.emptyVisualization.distribution"},SINGLE_VALUE_METRICS:{explanationMessage:"sharedAnalytics.renderTypes.singleValueMetrics.explanation",icon:"single-value-metrics",label:"sharedAnalytics.renderTypes.singleValueMetrics.label",panelType:"SumoSearchPanel",visualSettings:{general:{mode:"singleValueMetrics"}},pristineMessage:"sharedAnalytics.emptyVisualization.singleValueMetrics"},MAP:{explanationMessage:"sharedAnalytics.renderTypes.map.explanation",icon:"world-map",label:"sharedAnalytics.renderTypes.map.label",panelType:"SumoSearchPanel",visualSettings:{general:{mode:"map"}},pristineMessage:"sharedAnalytics.emptyVisualization.map"},TEXT:{explanationMessage:"sharedAnalytics.renderTypes.text.explanation",icon:"text",label:"sharedAnalytics.renderTypes.text.label",panelType:"TextPanel",visualSettings:{general:{mode:"TextPanel"}},pristineMessage:"sharedAnalytics.emptyVisualization.text"},IMAGE:{explanationMessage:"sharedAnalytics.renderTypes.image.explanation",icon:"image",label:"sharedAnalytics.renderTypes.image.label",panelType:"ImagePanel",visualSettings:{general:{mode:"ImagePanel"}},pristineMessage:"sharedAnalytics.emptyVisualization.image"},HONEYCOMB:{explanationMessage:"sharedAnalytics.renderTypes.honeyComb.explanation",icon:"honey-comb",label:"sharedAnalytics.renderTypes.honeyComb.label",panelType:"SumoSearchPanel",visualSettings:{general:{mode:"honeyComb"}},pristineMessage:"sharedAnalytics.emptyVisualization.honeyComb"},TRACE_LIST:{explanationMessage:"sharedAnalytics.renderTypes.traceList.explanation",icon:"trace-list",label:"sharedAnalytics.renderTypes.traceList.label",panelType:"TracesListPanel",visualSettings:{general:{mode:"traceList"}},pristineMessage:"sharedAnalytics.emptyVisualization.traceList"},SERVICE_MAP:{explanationMessage:"sharedAnalytics.renderTypes.serviceMap.explanation",icon:"service-map",label:"sharedAnalytics.renderTypes.serviceMap.label",panelType:"ServiceMapPanel",visualSettings:{general:{mode:"serviceMap"}},pristineMessage:"sharedAnalytics.emptyVisualization.serviceMap"}},vl=(e,{scientificNotationOffsetShift:t=0}={})=>{if(Math.abs(e)>=1)return{};const i=e?(0,Re.getLeadingDecimalZeroes)(e):0;return i>5?{scientificNotationOffset:-(i+t)}:{}},fl=()=>{let e;return(t,i,r)=>(!e&&0!==t&&(e=vl(t,{scientificNotationOffsetShift:-1})),(0,Re.labelFormatter)(t,i,r,Boolean(e&&0!==t)?e:void 0))},_l=[le.VisualSettingsType.DOUGHNUT,le.VisualSettingsType.FUNNEL,le.VisualSettingsType.PIE,le.VisualSettingsType.PYRAMID],Sl=[..._l,le.VisualSettingsType.LINE,le.VisualSettingsType.AREA,le.VisualSettingsType.BAR,le.VisualSettingsType.COLUMN],bl=[le.VisualSettingsType.AREA,le.VisualSettingsType.BAR,le.VisualSettingsType.COLUMN,le.VisualSettingsType.LINE],El=[le.VisualSettingsType.BUBBLE,le.VisualSettingsType.SCATTER],Tl=[le.VisualSettingsType.BUBBLE,le.VisualSettingsType.SCATTER],xl=[le.VisualSettingsType.DOUGHNUT,le.VisualSettingsType.FUNNEL,le.VisualSettingsType.PIE,le.VisualSettingsType.PYRAMID];var Cl=(e=>(e.COLOR="svp",e.GAUGE="svpGauge",e.SPARKLINE="svpSparkline",e))(Cl||{}),Al=(e=>(e.TABLE="table",e.HONEY_COMB="honeyComb",e.SVP="svp",e.MAP="map",e.TEXT="text",e.IMAGE="image",e))(Al||{});const wl="Others",Il={max:-1/0,min:1/0,avg:0,sum:0,latest:NaN,count:0};var Rl=(e=>(e.UPPER="upper",e.STD="std",e.VIOLATION="violation",e.INDICATOR="indicator",e.LOWER="lower",e.MEAN="mean",e.ERROR="error",e))(Rl||{});const Dl=["#90C300","#FFCC1D","#E64B00"],Ol=[r.SUMO_DATA_VIZ_COLORS.green,r.SUMO_DATA_VIZ_COLORS.yellow,r.SUMO_DATA_VIZ_COLORS.red],Nl=e=>["case",[">=",["get",e],1e4],["concat",["to-string",["round",["/",["get",e],1e3]]],"k"],[">=",["get",e],1e3],["concat",["to-string",["/",["round",["/",["get",e],100]],10]],"k"],[">=",["get",e],10],["to-string",["round",["get",e]]],[">=",["get",e],0],["number-format",["get",e],{"min-fraction-digits":0,"max-fraction-digits":1}]].concat(new Array(20).fill(null).map(((t,i)=>[[">=",["get",e],1/Math.pow(10,i+1)],["number-format",["get",e],{"min-fraction-digits":i,"max-fraction-digits":i+1}]])).flat()).concat([["to-string",["get",e]]]),Ml=e=>({id:e,type:"circle",filter:["has","point_count"],paint:{"circle-blur":.6}}),kl=e=>({id:e,type:"circle",filter:["!has","point_count"],paint:{"circle-stroke-width":.7,"circle-stroke-opacity":.4,"circle-stroke-color":Ne.ColorsV1.white}}),Ll=(e,t)=>({id:e,type:"symbol",filter:["has",t],layout:{"text-field":Nl(t),"text-font":["Roboto Regular","Arial Unicode MS Bold"],"text-size":12,"text-allow-overlap":!0},paint:{"text-halo-color":Ne.ColorsV1.orca,"text-halo-width":.3,"text-color":Ne.ColorsV1.orca}}),Pl=1e3,Fl=2e3,Ul=12,Vl=2,Bl={step0:"#BBFFF0",step1:"#77EAD0",step2:"#50CAF2",step3:"#03AAE3",step4:"#445CE3",step5:"#2E42B3"},$l=[{type:gl.TIME_SERIES},{type:gl.DISTRIBUTION},{type:gl.SINGLE_VALUE_METRICS},{type:gl.MAP},{type:gl.TEXT},{type:gl.HONEYCOMB},{type:gl.TRACE_LIST},{type:gl.SERVICE_MAP}],Hl=[{type:gl.TIME_SERIES},{type:gl.DISTRIBUTION},{type:gl.SINGLE_VALUE_METRICS},{type:gl.HONEYCOMB}],Wl={[Xo.CATEGORICAL_DEFAULT]:["#1677B6","#A5CEE4","#2CA221","#B1E086","#FF7F00","#FFC068","#6B399C","#CAB1D7"],[Xo.CATEGORICAL_LIGHT]:["#37B067","#6296BC","#EDB40D","#7FD7C1","#EB6672","#E3791A","#EE9DCC","#9F765E"],[Xo.CATEGORICAL_DARK]:["#E8BF39","#EC7A22","#FD8897","#65AAA3","#3E6496","#4A933E","#9F6490"],[Xo.DIVERGING_1]:["#C51B7D","#DE77AE","#F1B6DA","#FDE0EF","#E6F5D0","#B8E186","#7FBC41","#4D9221"],[Xo.DIVERGING_2]:["#D53E4F","#F46D43","#FDAE61","#FEE08B","#E6F598","#ABDDA4","#66C2A5","#3288BD"],[Xo.SEQUENTIAL_1]:["#A8DDB5","#7BCCC4","#4EB3D3","#2B8CBE","#0868AC","#084081"],[Xo.SEQUENTIAL_2]:["#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02"],[Xo.COLOR_SAFE]:["#8ECC1B","#24B596","#00A0D6","#445CE3","#AC99FF","#8C1C74","#0C6B56"],[Xo.SET3]:["#9CD1C7","#FFFEBB","#BDBBD7","#EB8677","#89B1D0","#F2B670","#BCDC78","#F4CFE4","#D9D9D9"],[Xo.SET1]:["#D2352B","#497DB3","#68AC57","#8E549F","#F08532","#FFFD61","#9C5933","#E888BD","#999999"],[Xo.METRIC_DEFAULT]:["#45A0E1","#9EDAE0","#4C70E7","#B2C6FA","#ED784D","#F9D9A5","#5E3225","#EC6ABA","#812375"]},ql="#dde4e9",jl="#E6EAED",Ql="#344666",zl="#222D3B",Gl=Ne.ColorsV2["grey-40"],Kl="#222D3B",Yl=10,Zl=40,Xl=10,Jl=3e3,ec=1e3,tc="LABEL_ONLY",ic="FULL",rc="_value",nc="_label",ac="ASC",sc="DESC",oc="chart-tooltip__date___C8gyu",lc="chart-tooltip__value___wjMEB",cc="chart-tooltip__slim___QHTGm",dc="no-break___IZUmV",uc="chart-tooltip___RS5Aj",pc="chart-tooltip__header___wZyaM",hc="chart-tooltip__header-slim___FLdCG",mc="chart-tooltip__total___umySf",gc="chart-tooltip__indicator___xDnGM",yc="chart-tooltip__label_key_value___zvjEb",vc="chart-tooltip__trend___yKdos",fc="label___Qp2Yw",_c="chart-tooltip__value-slim___9kaqj",Sc="metadata___G-FAO",bc=[a.defaultPreset[4][0],a.defaultPreset[2][0],a.defaultPreset[0][0]],Ec={get thresholds(){return De.currentUserHelper.hasFeatureFlag("UIThresholdsNMT")?[{id:-2,value:null,from:null,to:null,color:"#abd7ed"},{id:-1,value:null,from:null,to:null,color:"#18406e"}]:bc.map((e=>({from:null,to:null,color:e})))},shape:Jo.HEXAGON,groupBy:[],aggregationType:"avg"},Tc=e=>e.split(" ").reduce(((e,t,i)=>0===i?[t]:([(0,m.Z)(e),t].some((e=>(null!=e?e:"").includes("=")))?e.push(t):e[e.length-1]=`${(0,m.Z)(e)} ${t}`.trim(),e)),[]),xc=e=>{const t=/metric=(.*)(\s|$)/,i=e.match(t);return i?`${i[1]} ${e.replace(t,"")}`.trim():e};function Cc({color:e,value:t,unit:i,unitDecimals:n,name:a,labels:s,isFilled:o,percentage:l,total:c,valueFormatter:d}){var u;const p="string"==typeof t?""===t?0:parseFloat(t):t,h=d?d(p):(0,Re.labelFormatter)(p,i,n,vl(p)),m=void 0!==l?` (${(0,r.formatNumber)(100*l,{fractionDigits:1})}%)`:"",g=void 0!==c?`${r.i18nUtil.get("sharedAnalytics.charts.tooltips.total")} ${(0,r.formatNumber)(c,{fractionDigits:3})}`:"";return`\n      <div data-sumo-test="canvas_chart_tooltip_container" class="${ue(uc,cc)}">\n        <div class="${ue(pc,hc)}">\n          <span data-sumo-test="chartTooltipIndicator" class="${gc}" ${e?`style="background-color: ${(0,r.encodeAttr)(e)}"`:""}></span>\n          <span data-sumo-test="chartTooltipValue" class="${ue(lc,_c)}">${(0,r.encode)(h)}${(0,r.encode)(m)}${""!==g?` <span class="${mc}">${(0,r.encode)(g)}</span>`:""}</span>\n        </div>\n        ${null!=(u=null==s?void 0:s.map((({label:e,value:t})=>`<div data-sumo-test="chartTooltipDate" class="${ue(oc,dc,fc)} ${e?`${yc}`:""}">${e?`<span>${(0,r.encode)(e)}: </span>`:""}${(0,r.encode)(t)}</div>`)).join(""))?u:""}\n        ${o?`<div data-sumo-test="chartTooltipDate" class="${ue(oc,dc,fc)}">${r.i18nUtil.get("sharedAnalytics.filled")}</div>`:""}\n        ${Tc(xc(a)).map((e=>`<div data-sumo-test="chartTooltipDate" class="${ue(oc,dc,Sc)}">${(0,r.encode)(e).replace("="," = ")}</div>`)).join("")}\n        <div class="${vc}"></div>\n      </div>\n    `}const Ac=(0,oe.default)((()=>Boolean(De.currentUserHelper.hasFeatureFlag("UIMetricsScrubberSnapping")))),wc={enabled:!0,color:"#AD2200",lineDashType:"dot",thickness:1,labelBackgroundColor:"#88C4BD",labelFontColor:"#FFFFFF",labelFontSize:11,labelFormatter:e=>{if("dateTime"===e.chart.data[0].xValueType){const t=Ie.timeZoneServiceV2.getUserTimeZone(),i=moment(e.value).tz(t);return moment(e.chart.axisX[0].dataInfo.min).tz(t).format("YYYY/MM/DD")===moment(e.chart.axisX[0].dataInfo.max).tz(t).format("YYYY/MM/DD")?Ie.userDateService.formatTime(i,t,r.DATE_FORMAT_PRESET.TIME_24_HOURS):Ie.userDateService.formatDateTime(i,t,r.DATE_FORMAT_PRESET.DATE_TIME_24_HOURS)}{const t=Math.round(e.value);return e.chart.axisX[0].labels[t]}}},Ic=Object.assign({get snapToDataPoint(){return Ac()}},wc),Rc={titleFontSize:11,titleFontFamily:'RobotoBold, "Arial Bold", sans-serif',titleFontColor:"#666666",titleFontWeight:"bold",labelFontColor:"#9badbf",lineColor:"#DDE4E9",stripLines:null,gridThickness:0,labelMaxWidth:120,labelFontSize:10,labelWrap:!0,crosshair:Ic,labelFormatter:e=>null===e.label?"":e.label},Dc={titleFontSize:11,titleFontFamily:'RobotoBold, "Arial Bold", sans-serif',titleFontColor:"#666666",titleFontWeight:"bold",labelFontColor:"#9badbf",lineColor:"#DDE4E9",stripLines:null,gridThickness:1,lineThickness:0,labelFontSize:12,tickColor:"#dde4e9",logarithmic:!1,linear:!1,unit:ce.EMPTY_UNIT_SELECTOR_EVENT,labelFormatter:e=>(0,Re.labelFormatter)(e.value,e.axis.unit,e.axis.unitDecimals)},Oc={title:"",titleFontSize:11,titleFontFamily:'RobotoBold, "Arial Bold", sans-serif',titleFontColor:"#666666",titleFontWeight:"bold",labelFontColor:"#9badbf",lineColor:"#DDE4E9",stripLines:null,lineThickness:0,labelFontSize:12,tickColor:"#dde4e9",logarithmic:!1,linear:!1,unit:ce.EMPTY_UNIT_SELECTOR_EVENT,labelFormatter:e=>(0,Re.labelFormatter)(e.value,e.axis.unit,e.axis.unitDecimals),gridThickness:0,valueFormatString:""},Nc={axisX:Rc,axisY:Dc,axisY2:Oc},Mc={enabled:!0,zoom:{zoomEnabled:!0,zoomType:"x"}},kc=e=>[ce.ChartType.RANGE_SPLINE_AREA,ce.ChartType.RANGE_AREA].includes(e),Lc={contentFormatter:(e,t,i=[],n,a)=>{var s,o,l,c,d,u,p,h;const{dataSeries:m={},dataPoint:g}=e.entries[0],{x:y,y:v,label:f}=g;if(m.type&&kc(m.type))return null;const _=null==(s=g.sumoMetadata)?void 0:s.isFilled,S="distribution"===t?null!=(o=g.color)?o:m.color:null!=(l=m.color)?l:g.color;let b,E,T=f;if(void 0===f)if("dateTime"===m.xValueType){const e=moment(y);e.isValid()&&(T=Ie.userDateService.formatter(r.DATE_FORMAT_PRESET.DATE_TIME_24_HOURS)(e,Ie.timeZoneServiceV2.getUserTimeZone()))}else T=y;T&&i.unshift({value:T});const x=null==(u=null==(d=null==(c=e.chart)?void 0:c.data)?void 0:d[0])?void 0:u.type,C=[ce.CartesianChartTypes.STACKED_AREA_100,ce.CartesianChartTypes.STACKED_BAR_100,ce.CartesianChartTypes.STACKED_COLUMN_100,ce.CartesianChartTypes.STACKED_LINE_100].includes(x);if(C||x===ce.CartesianChartTypes.STACKED_AREA){const t=e.chart.data;let i=0;t.forEach((e=>{e.dataPoints.forEach((e=>{e.x===y&&"number"==typeof e.y&&(i+=e.y)}))})),E=i,C&&(b=0===E?void 0:v/i)}return Cc({color:S,percentage:b,total:E,value:v,unit:n,unitDecimals:a,labels:i,name:null!=(p=m.name||g.name)?p:"",isFilled:_,valueFormatter:null!=(h=m.axisY)&&h.labelFormatter?e=>m.axisY.labelFormatter({value:e,axis:{unit:n,unitDecimals:a}}):void 0})},classNames:{chartTooltip:uc,chartTooltipTrend:vc}},Pc={enabled:!0,verticalAlign:ce.LegendPosition.BOTTOM,horizontalAlign:"right",maxWidth:150,maxHeight:50,fontFamily:"Roboto",fontSize:12,fontWeight:"normal",showAsTable:!1,wrap:!0},Fc={xDimension:[],yDimension:[],zDimension:[]},Uc={outlierBandColor:"#FDECF5",outlierBandMarkerColor:"#F032A9",outlierBandFillOpacity:.5,outlierBandLineThickness:1,outlierBandMarkerSize:10,outlierBandMarkerType:"triangle",outlierBandLineDashType:"solid",outlierBandDisplayType:le.ChartDisplayTypeOptions.DEFAULT},Vc={markerSize:5,fillOpacity:1,lineDashType:le.LineDashStyleOptions.SOLID,markerType:le.MarkerTypeOptions.NONE,lineThickness:1,nullValue:al.INTERPOLATION,nullFixedValue:0,aggregationType:"avg"},Bc=5,$c=xt({showInLegend:!1,cursor:"crosshair"},Vc),Hc={light:.07,dark:.1},Wc={light:{warning:Ne.ColorsV2["warning-30"],critical:Ne.ColorsV2["critical-50"],remainingArea:Ne.ColorsV2["success-50"]},dark:{warning:Ne.ColorsV2["warning-30"],critical:Ne.ColorsV2["critical-30"],remainingArea:Ne.ColorsV2["success-30"]}},qc={fillRemainingGreen:!1,showThresholds:!1,thresholds:{warning:{display:!0,comparator:Zo.GREATER_OR_EQUAL,value:80},critical:{display:!0,comparator:Zo.GREATER_OR_EQUAL,value:100}}},jc={type:le.VisualSettingsType.LINE,displayType:le.ChartDisplayTypeOptions.DEFAULT};function Qc(e){switch(e){case gl.TIME_SERIES:return le.VisualSettingsType.LINE;case gl.DISTRIBUTION:return le.VisualSettingsType.PIE;case gl.SINGLE_VALUE_METRICS:return le.VisualSettingsType.SVP;case gl.MAP:return le.VisualSettingsType.MAP;case gl.TEXT:return le.VisualSettingsType.TEXT;case gl.IMAGE:return le.VisualSettingsType.IMAGE;case gl.HONEYCOMB:return le.VisualSettingsType.HONEYCOMB;case gl.TRACE_LIST:return le.VisualSettingsType.TRACE_LIST_TABLE;case gl.SERVICE_MAP:return le.VisualSettingsType.SERVICE_MAP_GRAPH}}const zc={title:"",fontSize:14,description:""};function Gc(e=!1){if(De.currentUserHelper.hasFeatureFlag("UIThresholdsNMT"))return[{id:-1,value:null,from:null,to:null,color:e?a.defaultPreset[4][0]:a.defaultPreset[4][3]}];const t=[a.defaultPreset[4][3],a.defaultPreset[2][1],a.defaultPreset[0][4]],i=[a.defaultPreset[4][0],a.defaultPreset[2][0],a.defaultPreset[0][0]];return(e?i:t).map((e=>({from:null,to:null,color:e})))}const Kc={option:"Latest",unitify:!1,label:"Label",useBackgroundColor:!1,useNoData:!1,noDataString:"No data",hideData:!1,hideLabel:!1,rounding:2,valueFontSize:24,labelFontSize:14,get thresholds(){return Gc()},sparkline:{show:!1,color:"#222D3B"},gauge:{show:!1,min:0,max:100,showThreshold:!1,showThresholdMarker:!1}},Yc={kind:"Color"},Zc={show:!1,min:0,max:100,showThreshold:!1,showThresholdMarker:!1},Xc={family:Xo.CATEGORICAL_DEFAULT,overrides:[]},Jc={interactivity:Mc,axes:Nc,series:$c,legend:Pc,general:jc,toolTip:Lc,svp:Kc,gauge:Zc,color:Xc,title:zc,honeyComb:Ec,xy:Fc},ed={axisX:(({hideLabels:e,title:t,titleFontSize:i,labelFontSize:r})=>({hideLabels:e,title:t,titleFontSize:i,labelFontSize:r}))(Rc),axisY:(({hideLabels:e,title:t,titleFontSize:i,labelFontSize:r,logarithmic:n,gridColor:a})=>({hideLabels:e,title:t,titleFontSize:i,labelFontSize:r,logarithmic:n,gridColor:a}))(Dc)},td=(({fontSize:e})=>({fontSize:e}))(zc),id=(({enabled:e,verticalAlign:t,fontSize:i,maxHeight:r,showAsTable:n,wrap:a})=>({enabled:e,verticalAlign:t,fontSize:i,maxHeight:r,showAsTable:n,wrap:a}))(Pc),rd={family:Xc.family},nd={title:td,general:jc},ad=Ct(xt({},nd),{general:xt(xt({},jc),(({markerSize:e,lineDashType:t,markerType:i,lineThickness:r})=>({markerSize:e,lineDashType:t,markerType:i,lineThickness:r}))($c)),axes:ed,legend:id,color:rd}),sd=Ct(xt({},nd),{general:xt(xt({},jc),(({markerSize:e,lineDashType:t,markerType:i,lineThickness:r,fillOpacity:n})=>({markerSize:e,lineDashType:t,markerType:i,lineThickness:r,fillOpacity:n}))($c)),axes:ed,legend:id,color:rd}),od=Ct(xt({},nd),{general:xt(xt({},jc),(({fillOpacity:e})=>({fillOpacity:e}))($c)),axes:ed,legend:id,color:rd}),ld=Ct(xt({},nd),{general:xt(xt({},jc),(({fillOpacity:e})=>({fillOpacity:e}))($c)),axes:ed,legend:id,color:rd}),cd=Ct(xt({},nd),{general:xt(xt({},jc),(({markerSize:e,markerType:t,fillOpacity:i})=>({markerSize:e,markerType:t,fillOpacity:i}))($c)),axes:ed,legend:id,color:rd,xy:xt({},(({xDimension:e,yDimension:t})=>({xDimension:e,yDimension:t}))(Fc))}),dd=Ct(xt({},nd),{general:xt(xt({},jc),(({markerType:e,fillOpacity:t})=>({markerType:e,fillOpacity:t}))($c)),axes:ed,legend:id,color:rd,xy:Fc}),ud=Ct(xt({},nd),{svp:Kc}),pd=Ct(xt({},nd),{honeyComb:Ec}),hd=Ct(xt({},nd),{color:{colorMode:dl,colorSchemeName:ll}}),md={[le.VisualSettingsType.LINE]:ad,[le.VisualSettingsType.AREA]:sd,[le.VisualSettingsType.BAR]:od,[le.VisualSettingsType.COLUMN]:ld,[le.VisualSettingsType.SCATTER]:cd,[le.VisualSettingsType.BUBBLE]:dd,[le.VisualSettingsType.PIE]:nd,[le.VisualSettingsType.SVP]:ud,[le.VisualSettingsType.HONEYCOMB]:pd,[le.VisualSettingsType.DOUGHNUT]:nd,[le.VisualSettingsType.FUNNEL]:nd,[le.VisualSettingsType.PYRAMID]:nd,[le.VisualSettingsType.TRACE_LIST_TABLE]:nd,[le.VisualSettingsType.HEATMAP]:hd},gd=12,yd={axes:{axisX:{titleFontSize:gd,labelFontSize:gd},axisY:{titleFontSize:gd,labelFontSize:gd}}},vd={axes:{axisX:{titleFontSize:gd,labelFontSize:gd},axisY:{titleFontSize:gd,labelFontSize:gd}}},fd={axes:{axisY:{gridColor:ql},axisY2:{gridColor:ql}}},_d={axes:{axisX:{titleFontSize:gd,labelFontSize:gd,titleFontFamily:'Lab Grotesque Medium, "Arial Bold", sans-serif',labelFontFamily:'Lab Grotesque Regular, "Arial", sans-serif',titleFontColor:Ne.ColorsV2["grey-50"],titleFontWeight:"normal",labelFontColor:Ne.ColorsV2["grey-50"],labelFontWeight:"normal",lineColor:Ne.ColorsV2["white-50"],tickColor:Ne.ColorsV2["white-50"],crosshair:{color:Ne.ColorsV2["primary-60"],lineDashType:"dash",labelBackgroundColor:Ne.ColorsV2["black-60"],labelFontColor:Ne.ColorsV2["white-30"]}},axisY:{titleFontSize:gd,labelFontSize:gd,gridColor:Ne.ColorsV2["white-50"],titleFontFamily:'Lab Grotesque Medium, "Arial Bold", sans-serif',labelFontFamily:'Lab Grotesque Regular, "Arial", sans-serif',titleFontColor:Ne.ColorsV2["grey-50"],titleFontWeight:"normal",labelFontColor:Ne.ColorsV2["grey-50"],labelFontWeight:"normal",tickColor:Ne.ColorsV2["white-50"]},axisY2:{gridColor:Ne.ColorsV2["white-50"],titleFontFamily:'Lab Grotesque Medium, "Arial Bold", sans-serif',labelFontFamily:'Lab Grotesque Regular, "Arial", sans-serif',titleFontColor:Ne.ColorsV2["grey-50"],titleFontWeight:"normal",labelFontColor:Ne.ColorsV2["grey-50"],labelFontWeight:"normal",tickColor:Ne.ColorsV2["white-50"]}},toolTip:{backgroundColor:"transparent"}},Sd={axes:{axisX:{titleFontSize:gd,labelFontSize:gd,titleFontFamily:'Lab Grotesque Medium, "Arial Bold", sans-serif',labelFontFamily:'Lab Grotesque Regular, "Arial", sans-serif',titleFontColor:Ne.ColorsV2["white-40"],titleFontWeight:"normal",labelFontColor:Ne.ColorsV2["white-40"],labelFontWeight:"normal",lineColor:Ne.ColorsV2["black-50"],tickColor:Ne.ColorsV2["black-50"],crosshair:{color:Ne.ColorsV2["primary-50"],lineDashType:"dash",labelBackgroundColor:Ne.ColorsV2["grey-10"],labelFontColor:Ne.ColorsV2["black-90"]}},axisY:{titleFontSize:gd,labelFontSize:gd,gridColor:Ne.ColorsV2["black-50"],titleFontFamily:'Lab Grotesque Medium, "Arial Bold", sans-serif',labelFontFamily:'Lab Grotesque Regular, "Arial", sans-serif',titleFontColor:Ne.ColorsV2["white-40"],titleFontWeight:"normal",labelFontColor:Ne.ColorsV2["white-40"],labelFontWeight:"normal",tickColor:Ne.ColorsV2["black-50"]},axisY2:{gridColor:Ne.ColorsV2["black-50"],titleFontFamily:'Lab Grotesque Medium, "Arial Bold", sans-serif',labelFontFamily:'Lab Grotesque Regular, "Arial", sans-serif',titleFontColor:Ne.ColorsV2["white-40"],titleFontWeight:"normal",labelFontColor:Ne.ColorsV2["white-40"],labelFontWeight:"normal",tickColor:Ne.ColorsV2["black-50"]}},toolTip:{backgroundColor:"transparent"}},bd={fillOpacity:.25},Ed={general:bd},Td={series:bd,axes:fd.axes},xd={axes:_d.axes,toolTip:_d.toolTip,series:bd},Cd={axes:Sd.axes,toolTip:Sd.toolTip,series:bd},Ad=1,wd=1,Id={general:{fillOpacity:Ad}},Rd={general:{fillOpacity:Ad,dataPointMinWidth:wd},axes:fd.axes},Dd={general:{fillOpacity:Ad,dataPointMinWidth:wd},axes:_d.axes,toolTip:_d.toolTip},Od={general:{fillOpacity:Ad,dataPointMinWidth:wd},axes:Sd.axes,toolTip:Sd.toolTip},Nd={fillOpacity:1},Md={general:Nd},kd={general:Nd,axes:fd.axes},Ld={axes:_d.axes,toolTip:_d.toolTip,general:Nd},Pd={axes:Sd.axes,toolTip:Sd.toolTip,general:Nd},Fd={lineThickness:1,lineDashType:"solid"},Ud=(e,t=2)=>(0,r.formatNumberWithCommas)(e.toString(),t),Vd={contentFormatter:(e,t,i=[],n,a)=>{var s;const{dataPoint:o,dataSeries:l}=e.entries[0];if(kc(l.type))return null;const c=e.chart.data.find((({type:e,options:t})=>kc(e)&&t.blockId===l.options.blockId));if(c){const e=c.dataPoints.find((({x:e})=>e===o.x));e&&Array.isArray(e.y)&&2===(null==(s=e.y)?void 0:s.length)&&i.push({label:r.i18nUtil.get("sharedAnalytics.chartTooltip.thresholdLabel"),value:`${Ud(e.y[0])} - ${Ud(e.y[1])}`})}return Lc.contentFormatter(e,t,i,n,a)}},Bd={general:Fd},$d={series:Fd,toolTip:Vd,axes:fd.axes},Hd={series:Fd,axes:_d.axes,toolTip:xt(xt({},Vd),_d.toolTip)},Wd={series:Fd,axes:Sd.axes,toolTip:xt(xt({},Vd),Sd.toolTip)},qd={fillOpacity:.25,series:Fd,axes:fd.axes},jd={fillOpacity:.25,series:Fd,axes:_d.axes,toolTip:Vd},Qd={fillOpacity:.25,series:Fd,axes:Sd.axes,toolTip:Vd},zd={indexLabelFontSize:14,indexLabelFormatter:({total:e,dataPoint:{y:t,label:i}})=>{if(e){const r=(t/e*100).toFixed(1);return`${(0,Re.labelFormatter)(t,void 0,void 0,Ct(xt({},vl(t)),{maxFractionDigits:5}))} (${r}%) ${i}`}return""}},Gd=xt({fillOpacity:1,startAngle:270,innerRadius:"30%",radius:"75%"},zd),Kd=xt({maxNumOfSlices:10},Gd),Yd={general:(({fillOpacity:e,startAngle:t,innerRadius:i,maxNumOfSlices:r})=>({fillOpacity:e,startAngle:t,innerRadius:i,maxNumOfSlices:r}))(Kd)},Zd={contentFormatter:(e,t,i=[],r,n)=>{const{dataPoint:a}=e.entries[0],{y:s}=a;return Cc({color:a.color,value:s,name:a.originalLabel,isFilled:!1})}},Xd={general:Kd,toolTip:Zd,axes:{}},Jd={general:Kd,toolTip:Zd,axes:{},series:{indexLabelFontColor:Ne.ColorsV1.white}},eu={general:Kd,axes:_d.axes,toolTip:{backgroundColor:_d.toolTip.backgroundColor,contentFormatter:Zd.contentFormatter},series:{indexLabelFontColor:Ne.ColorsV2["black-80"],indexLabelFontSize:12}},tu={general:Kd,axes:Sd.axes,toolTip:{backgroundColor:Sd.toolTip.backgroundColor,contentFormatter:Zd.contentFormatter},series:{indexLabelFontColor:Ne.ColorsV2["white-40"],indexLabelFontSize:12}},iu={indexLabelFontSize:zd.indexLabelFontSize,indexLabelFormatter:zd.indexLabelFormatter,orientation:nl.DEFAULT,valueRepresents:rl.HEIGHT},ru={maxNumOfSlices:10,indexLabelFontSize:zd.indexLabelFontSize,indexLabelFormatter:zd.indexLabelFormatter,orientation:nl.DEFAULT,valueRepresents:rl.HEIGHT},nu={general:ru,toolTip:Zd,axes:{}},au={general:ru,toolTip:Zd,axes:{},series:{indexLabelFontColor:Ne.ColorsV1.white}},su={general:ru,toolTip:{backgroundColor:_d.toolTip.backgroundColor,contentFormatter:Zd.contentFormatter},axes:_d.axes},ou={general:ru,toolTip:{backgroundColor:Sd.toolTip.backgroundColor,contentFormatter:Zd.contentFormatter},axes:Sd.axes,series:{indexLabelFontColor:Ne.ColorsV1.white}},lu={markerSize:8,fillOpacity:1,xValueType:"number",indexLabelFormatter:()=>"",markerType:le.MarkerTypeOptions.CIRCLE},cu={contentFormatter:(e,t,i=[],n,a)=>{const{dataPoint:s}=e.entries[0],o=e.chart.options.type,{y:l,z:c,sumoMetadata:{xAxisValues:d},markerType:u}=s,p=o===le.VisualSettingsType.SCATTER?l:c,h=p%1!=0?p.toFixed(3):p,m=Math.floor(e.chart.width/2);let g="",y=0;return Object.keys(d).some((e=>{d[e]&&(y+=1,g=`${g}<div class="chart-tooltip__date no-break">${(0,r.encode)(e)} : ${(0,r.encode)(d[e])}</div>`);const t=10===y;return t&&(g=`${g}<div>...</div>`),t})),u?"":`\n      <div class="chart-tooltip chart-tooltip__slim">\n        <div class="chart-tooltip__header chart-tooltip__header-slim">\n          <span class="chart-tooltip__indicator" ${s.color?`style="background-color: ${(0,r.encodeAttr)(s.color)}"`:""}></span>\n          <span class="chart-tooltip__value chart-tooltip__ellipsify" style="max-width: ${m}px">${(0,r.encode)(h)} ${(0,r.encode)(s.label)}</span>\n        </div>\n        ${g}\n      </div>`}},du={general:{markerSize:lu.markerSize,fillOpacity:lu.fillOpacity,markerType:lu.markerType}},uu={title:Rc.title,titleFontSize:Rc.titleFontSize,titleFontFamily:Rc.titleFontFamily,titleFontColor:Rc.titleFontColor,titleFontWeight:Rc.titleFontWeight,labelFontColor:Rc.labelFontColor,lineColor:Rc.lineColor,stripLines:Rc.stripLines,gridThickness:Rc.gridThickness,labelMaxWidth:Rc.labelMaxWidth,labelFontSize:Rc.labelFontSize,labelWrap:Rc.labelWrap,crosshair:Rc.crosshair,labelFormatter:e=>(0,Re.labelFormatter)(e.value),labelAngle:0},pu={axisX:uu,axisY:Dc,axisY2:Oc},hu={toolTip:cu,series:lu,axes:pu,interactivity:{enabled:!0,zoom:{zoomEnabled:!0,zoomType:"xy"}}},mu={toolTip:{background:_d.toolTip.backgroundColor,contentFormatter:cu.contentFormatter},series:lu,axes:{axisX:{title:uu.title,titleFontWeight:uu.titleFontWeight,stripLines:uu.stripLines,gridThickness:uu.gridThickness,labelMaxWidth:uu.labelMaxWidth,labelWrap:uu.labelWrap,labelFormatter:uu.labelFormatter,labelAngle:uu.labelAngle,titleFontSize:_d.axes.axisX.titleFontSize,labelFontSize:_d.axes.axisX.labelFontSize,titleFontFamily:_d.axes.axisX.titleFontFamily,labelFontFamily:_d.axes.axisX.labelFontFamily,titleFontColor:_d.axes.axisX.titleFontColor,labelFontColor:_d.axes.axisX.labelFontColor,lineColor:_d.axes.axisX.lineColor,tickColor:_d.axes.axisX.tickColor,crosshair:{enabled:uu.crosshair.enabled,get snapToDataPoint(){return uu.crosshair.snapToDataPoint},thickness:uu.crosshair.thickness,labelFontSize:uu.crosshair.labelFontSize,labelFormatter:uu.crosshair.labelFormatter,color:_d.axes.axisX.crosshair.color,lineDashType:_d.axes.axisX.crosshair.lineDashType,labelBackgroundColor:_d.axes.axisX.crosshair.labelBackgroundColor,labelFontColor:_d.axes.axisX.crosshair.labelFontColor}},axisY:{title:pu.axisY.title,titleFontWeight:pu.axisY.titleFontWeight,lineColor:pu.axisY.lineColor,stripLines:pu.axisY.stripLines,gridThickness:pu.axisY.gridThickness,lineThickness:pu.axisY.lineThickness,logarithmic:pu.axisY.logarithmic,linear:pu.axisY.linear,labelFormatter:pu.axisY.labelFormatter,titleFontSize:_d.axes.axisY.titleFontSize,labelFontSize:_d.axes.axisY.labelFontSize,gridColor:_d.axes.axisY.gridColor,titleFontFamily:_d.axes.axisY.titleFontFamily,labelFontFamily:_d.axes.axisY.labelFontFamily,titleFontColor:_d.axes.axisY.titleFontColor,labelFontColor:_d.axes.axisY.labelFontColor,tickColor:_d.axes.axisY.tickColor},axisY2:Oc},interactivity:{enabled:!0,zoom:{zoomEnabled:!0,zoomType:"xy"}}},gu={toolTip:{background:Sd.toolTip.backgroundColor,contentFormatter:cu.contentFormatter},series:lu,axes:{axisX:{title:uu.title,titleFontWeight:uu.titleFontWeight,stripLines:uu.stripLines,gridThickness:uu.gridThickness,labelMaxWidth:uu.labelMaxWidth,labelWrap:uu.labelWrap,labelFormatter:uu.labelFormatter,labelAngle:uu.labelAngle,titleFontSize:Sd.axes.axisX.titleFontSize,labelFontSize:Sd.axes.axisX.labelFontSize,titleFontFamily:Sd.axes.axisX.titleFontFamily,labelFontFamily:Sd.axes.axisX.labelFontFamily,titleFontColor:Sd.axes.axisX.titleFontColor,labelFontColor:Sd.axes.axisX.labelFontColor,lineColor:Sd.axes.axisX.lineColor,tickColor:Sd.axes.axisX.tickColor,crosshair:{enabled:uu.crosshair.enabled,get snapToDataPoint(){return uu.crosshair.snapToDataPoint},thickness:uu.crosshair.thickness,labelFontSize:uu.crosshair.labelFontSize,labelFormatter:uu.crosshair.labelFormatter,color:Sd.axes.axisX.crosshair.color,lineDashType:Sd.axes.axisX.crosshair.lineDashType,labelBackgroundColor:Sd.axes.axisX.crosshair.labelBackgroundColor,labelFontColor:Sd.axes.axisX.crosshair.labelFontColor}},axisY:{title:pu.axisY.title,titleFontWeight:pu.axisY.titleFontWeight,lineColor:pu.axisY.lineColor,stripLines:pu.axisY.stripLines,gridThickness:pu.axisY.gridThickness,lineThickness:pu.axisY.lineThickness,logarithmic:pu.axisY.logarithmic,linear:pu.axisY.linear,labelFormatter:pu.axisY.labelFormatter,titleFontSize:Sd.axes.axisY.titleFontSize,labelFontSize:Sd.axes.axisY.labelFontSize,gridColor:Sd.axes.axisY.gridColor,titleFontFamily:Sd.axes.axisY.titleFontFamily,labelFontFamily:Sd.axes.axisY.labelFontFamily,titleFontColor:Sd.axes.axisY.titleFontColor,labelFontColor:Sd.axes.axisY.labelFontColor,tickColor:Sd.axes.axisY.tickColor},axisY2:Oc},interactivity:{enabled:!0,zoom:{zoomEnabled:!0,zoomType:"xy"}}},yu={general:{paginationPageSize:100,fontSize:12}},vu={paginationPageSize:100,rowStyle:{"font-size":"12px"}},fu=(0,r.memoize)((e=>{const t={[ce.ChartType.AREA]:Ed,[ce.ChartType.HEATMAP]:{},[ce.ChartType.BAR]:Id,[ce.ChartType.BUBBLE]:du,[ce.ChartType.COLUMN]:Md,[ce.ChartType.DOUGHNUT]:Yd,[ce.ChartType.FUNNEL]:nu,[ce.ChartType.LINE]:Bd,[ce.ChartType.PIE]:Yd,[ce.ChartType.PYRAMID]:nu,[ce.ChartType.SCATTER]:du,[ce.ChartType.TABLE]:yu};return((e,t)=>{if(t===il.BRANDLIGHT)for(const t in e)e[t]=(0,g.Z)({},e[t],yd);else if(t===il.BRANDDARK)for(const t in e)e[t]=(0,g.Z)({},e[t],vd)})(t,e),t}),{maxNumberOfResults:10}),_u=(0,r.memoize)(((e,t)=>{var i;const r=null==(i=fu(t))?void 0:i[e],n=(null==md?void 0:md[e])||nd,a=r?(0,g.Z)({},n,r):n;return Oe(a,{general:{$merge:{type:e}}})}),{maxNumberOfResults:100}),Su=(0,r.memoize)(((e,t)=>{const i=((e,t)=>{switch(e){case ce.ChartType.RANGE_AREA:case ce.ChartType.RANGE_SPLINE_AREA:switch(t){case il.BRANDDARK:return Qd;case il.BRANDLIGHT:return jd;default:return qd}case ce.ChartType.LINE:switch(t){case il.BRANDDARK:return Wd;case il.BRANDLIGHT:return Hd;default:return $d}case ce.ChartType.HEATMAP:return{};case ce.ChartType.AREA:switch(t){case il.BRANDDARK:return Cd;case il.BRANDLIGHT:return xd;default:return Td}case ce.ChartType.BAR:switch(t){case il.BRANDDARK:return Od;case il.BRANDLIGHT:return Dd;default:return Rd}case ce.ChartType.COLUMN:switch(t){case il.BRANDDARK:return Pd;case il.BRANDLIGHT:return Ld;default:return kd}case ce.ChartType.SCATTER:case ce.ChartType.BUBBLE:switch(t){case il.BRANDDARK:return gu;case il.BRANDLIGHT:return mu;default:return hu}case ce.ChartType.PIE:case ce.ChartType.DOUGHNUT:switch(t){case il.DARK:return Jd;case il.BRANDLIGHT:return eu;case il.BRANDDARK:return tu;default:return Xd}case ce.ChartType.FUNNEL:case ce.ChartType.PYRAMID:switch(t){case il.DARK:return au;case il.BRANDLIGHT:return su;case il.BRANDDARK:return ou;default:return nu}}})(e,t),r=i?(0,g.Z)({},Jc,i):Jc;return Oe(r,{series:{$merge:{chartType:e}}})}),{maxNumberOfResults:150}),bu=(e,t)=>{const i=document.body.getAttribute("data-theme");let r=i&&i.split("-")[0];return(!r||"null"===r)&&(r=il.LIGHT),_u(e,t||r)},Eu=(e,t)=>{if(!t){const t=document.body.dataset.theme;let i=null==t?void 0:t.split("-")[0];return(!i||"null"===i)&&(i=il.LIGHT),Su(e,i)}return Su(e,t)},Tu=le.MarkerTypeOptions.CIRCLE,xu=5,Cu=3,Au=e=>void 0!==e&&e!==le.MarkerTypeOptions.NONE?e:Tu,wu=e=>"number"!=typeof e?xu:e<Cu?Cu:e,Iu=(e,t)=>{const i=t[0]<t[1]?t:[t[0],t[0]],r=e.map((e=>{var t=e,{to:r}=t,n=At(t,["to"]);return Ct(xt({},n),{to:r&&r>i[1]?i[1]:r})}));return r.map((e=>(({from:e,to:t,color:r})=>null!==e&&null!==t&&e<t&&e>=i[0]&&t<=i[1]?{from:e,to:t,color:r}:{})(e))).filter((e=>!(0,u.Z)(e)))};function Ru(e,t,i,r){const{visualizations:n}=e,a=n.gauge;if(!a)throw new Error("Invalid visualization settings provided for Gauge");const{range:s,showThresholdMarker:o}=a,{thresholds:l}=e,c=s[0]<s[1]?s:[s[0],s[0]];let d=[];return o&&(d=De.currentUserHelper.hasFeatureFlag("UIThresholdsNMT")&&"value"in l[0]?((e,[t,i])=>{const r=e.filter((({value:e})=>null===e||e>t&&e<i)).map((({color:r,value:n},a)=>{var s,o;return{from:null!=n?n:t,to:null!=(o=null==(s=e[a+1])?void 0:s.value)?o:i,color:r}}));return r.length>1?r:[]})(l,s):Iu(l,s)),Ct(xt({},function(e){return{chart:{type:"solidgauge",animation:!1,backgroundColor:"rgba(255, 255, 255, 0.0)",events:xt({},e?{load:e}:{}),margin:0},exporting:{enabled:!1},title:{text:"",verticalAlign:"bottom",y:-10},pane:{size:"100%",center:["50%","70%"],startAngle:-90,endAngle:90,background:{innerRadius:"80%",outerRadius:"100%",shape:"arc",backgroundColor:""}},tooltip:{enabled:!1},plotOptions:{solidgauge:{dataLabels:{enabled:!1}}},credits:{enabled:!1},series:[{data:[{innerRadius:"80%",outerRadius:"100%",y:0}]}]}}(t)),{yAxis:[{min:c[0],max:c[1],tickPositions:[c[0],c[1]],lineWidth:0,labels:{y:16,style:{color:r===il.BRANDDARK?Ne.ColorsV2["white-30"]:"black"}},gridLineWidth:0,minorTickInterval:void 0,plotBands:d.map((e=>Ct(xt({},e),{innerRadius:"101%",outerRadius:"105%",className:i[`band-${e.color}`]})))}]})}function Du(e){const t=[{maxChartHeight:200,labelDistance:-5},{maxChartHeight:400,labelDistance:-10},{maxChartHeight:600,labelDistance:-15},{maxChartHeight:800,labelDistance:-25}];for(const i of t){const{maxChartHeight:t,labelDistance:r}=i;if(e<t)return r}return 15}const Ou=1,Nu=1e3*Ou,Mu=1e3*Nu,ku=1e3*Mu,Lu=60*ku,Pu=60*Lu,Fu=1e3,Uu=60*Fu,Vu=60*Uu,Bu=24*Vu;var $u=(e=>(e.METRICS="Metrics",e.LOGS="Logs",e))($u||{}),Hu=(e=>(e.FINISHED_SUCCESSFULLY="FinishedSuccessfully",e.NOT_STARTED="NotStarted",e.IN_PROGRESS="InProgress",e.QUERY_CANCELLED="QueryCancelled",e))(Hu||{}),Wu=(e=>(e.TIME_SERIES="timeseries",e.NON_TIME_SERIES="nontimeseries",e.TABLE="table",e.OUTLIER="outlier",e.TRANSPOSE="transpose",e))(Wu||{}),qu=(e=>(e.Double="Double",e.String="String",e))(qu||{}),ju=(e=>(e.AUTO="Auto",e.MANUAL="Manual",e))(ju||{}),Qu=(e=>(e.MESSAGE="Message",e.RECEIPT="Receipt",e))(Qu||{});const zu='[{"t":"relative","d":-900000}]',Gu=JSON.stringify([{t:"relative",d:-9e5}]),Ku=500,Yu=36e5,Zu=200,Xu=200,Ju={[le.QueryTypes.METRICS]:6,[le.QueryTypes.LOGS]:6,[le.QueryTypes.TRACES]:6,[le.QueryTypes.SPANS]:6},ep=[{label:"sharedAnalytics.common.logsQueryType",value:le.QueryTypes.LOGS,icon:"search-view-icon"},{label:"sharedAnalytics.common.metricsQueryType",value:le.QueryTypes.METRICS,icon:"metrics-view-icon"},{label:"sharedAnalytics.common.tracesQueryType",value:le.QueryTypes.TRACES,icon:"traces-view-icon"},{label:"sharedAnalytics.common.spansQueryType",value:le.QueryTypes.SPANS,icon:"spans-view-icon"}],tp=ep.reduce(((e,t)=>(e[t.value]=t,e)),{}),ip=250,rp=389;var np=(e=>(e.DISTRIBUTION="distribution",e.HONEY_COMB="honeyComb",e.MAP="map",e.SINGLE_VALUE_METRICS="singleValueMetrics",e.HEATMAP="heatmap",e.TABLE="table",e.TIME_SERIES="timeSeries",e))(np||{});const ap={timeSeries:{icon:"time-series",label:"sharedAnalytics.renderTypes.timeSeries.label",pristineMessage:"sharedAnalytics.emptyVisualization.timeSeries"},heatmap:{icon:"time-series",label:"sharedAnalytics.renderTypes.heatmap.label",pristineMessage:"sharedAnalytics.emptyVisualization.timeSeries"},distribution:{icon:"pie-chart-brand",label:"sharedAnalytics.renderTypes.distribution.label",pristineMessage:"sharedAnalytics.emptyVisualization.distribution"},singleValueMetrics:{icon:"single-value-metrics",label:"sharedAnalytics.renderTypes.singleValueMetrics.label",pristineMessage:"sharedAnalytics.emptyVisualization.singleValueMetrics"},map:{icon:"world-map",label:"sharedAnalytics.renderTypes.map.label",pristineMessage:"sharedAnalytics.emptyVisualization.map"},honeyComb:{icon:"honey-comb",label:"sharedAnalytics.renderTypes.honeyComb.label",pristineMessage:"sharedAnalytics.emptyVisualization.honeyComb"},table:{icon:"time-series",label:"sharedAnalytics.table",pristineMessage:"sharedAnalytics.emptyVisualization.timeSeries"}},sp={LOGS_PREFIX:"logs:",METRICS_PREFIX:"metrics:",CLIENT_SIDE_ERROR:"clientSide",ErrorCodeDashboardNotFound:"dashboard:not_found",ErrorCodeDashboardDeserializationError:"dashboard:deserialization_error",ErrorCodeDashboardUnexpectedPanelType:"dashboard:unexpected_panel_type",ErrorCodeDashboardSessionIdNotExist:"dashboard:session_id_not_exist",ErrorCodeDashboardUpdateError:"dashboard:update_dashboard_error",ErrorCodeDashboardDeleteError:"dashboard:delete_dashboard_error",ErrorCodeDashboardDuplicateVariable:"dashboard:duplicate_variable",ErrorCodePanelValidationError:"dashboard:validation_error",ErrorCodeSeriesTypeConsistencyError:"dashboard:series_type_consistency_error",ErrorCodeFieldDimensionalityError:"dashboard:field_dimensionality_error",ErrorCodeLogQueryValidationError:"dashboard:log_query_validation_error",ErrorCodeMetricsQueryValidationError:"dashboard:metrics_query_validation_error",ErrorCodeSpanQueryValidationError:"dashboard:span_query_validation_error",ErrorCodeLogsSearchError:"dashboard:logs_search_error",ErrorCodeMetricsSearchError:"dashboard:metrics_search_error",ErrorCodeDashboardGenericError:"dashboard:generic_error",ErrorCodeInvalidTimeRangeError:"dashboard:invalid_timerange_error",ErrorCodeLogQueryTimeoutError:"dashboard:log_query_timeout_error",ErrorCodeVariableValuesError:"dashboard:variable_values_error",ErrorCodeTooManyQueriesSubmitted:"dashboard:too_many_queries_submitted",ErrorCodeLogsPanelTimeRangeError:"dashboard:logs_panel_timerange_error",NonExistentKey:"metrics:non_existent_key"},op=250,lp=3,cp=(0,oe.default)((()=>({label:It.table,value:Al.TABLE,icon:"table",dataSumoTest:"tableChart"}))),dp=()=>De.currentUserHelper.hasFeatureFlag("UIChartHistogramNMT")?[{label:It.heatmapChart,value:ce.ChartType.HEATMAP,icon:"chart-heatmap",dataSumoTest:"heatmapChart"}]:[],up=(0,oe.default)((()=>[{label:It.lineChart,value:ce.ChartType.LINE,icon:"line-chart",dataSumoTest:"lineChart"},{label:It.areaChart,value:ce.ChartType.AREA,icon:"area-chart",dataSumoTest:"areaChart"},{label:It.columnChart,value:ce.ChartType.COLUMN,icon:"chart-column",dataSumoTest:"columnChart"},{label:It.barChart,value:ce.ChartType.BAR,icon:"chart-bar",dataSumoTest:"barChart"}])),pp=(0,oe.default)((()=>Object.entries((0,y.Z)(up(),(e=>e.value))).reduce(((e,[t,[i]])=>Ct(xt({},e),{[t]:i})),{}))),hp=(0,oe.default)((()=>[{label:It.pieChart,value:ce.ChartType.PIE,icon:"pie-chart",dataSumoTest:"pieChart"},...De.currentUserHelper.hasFeatureFlag("UIChartFunnelNMT")?[{label:It.funnelChart,value:ce.ChartType.FUNNEL,icon:"chart-funnel-flat",dataSumoTest:"funnelChart"}]:[],{label:It.scatterChart,value:ce.ChartType.SCATTER,icon:"chart-scatter",dataSumoTest:"scatterChart"},{label:It.bubbleChart,value:ce.ChartType.BUBBLE,icon:"chart-bubble",dataSumoTest:"bubbleChart"},cp()])),mp={parseMode:ju.AUTO,timeSource:Qu.MESSAGE},gp="ui.metricsHintsDisabled",yp={value:"security",label:"Security"},vp={value:"continuous",label:"Continuous"},fp={value:"frequent",label:"Frequent"},_p={value:"infrequent",label:"Infrequent"},Sp={value:"flex",label:"Flex"},bp={value:"all",label:"All"},Ep=[vp,fp,_p,yp,Sp,bp];var Tp=(e=>(e.DATA_FORWARDING="DataForwarding",e.CSE_DATA="CSEData",e.PARTITIONS="Partitions",e.DATA_TIER_IN_QUERY="DataTierInQuery",e.SCHEDULED_VIEW="ScheduledView",e.SCHEDULING_SEARCH_DISABLED="SchedulingSearchDisabled",e.SCHEDULE_SEARCH_SCANNED_BYTES="ScheduleSearchScannedBytes",e))(Tp||{});const xp="container___E1P1c",Cp="text-field___6KNov",Ap=n.memo((({data:e,disabled:t,changeOperatorData:i,firstInputRef:s,onInputKeyDown:o})=>{const[l,c]=(0,n.useState)(e.span),[d,u]=(0,n.useState)(e.alpha),p=(0,r.useDebounce)((t=>i(Ct(xt({},e),{key:le.Operator.Ewma,span:t}))),ip),h=(0,r.useDebounce)((t=>i(Ct(xt({},e),{key:le.Operator.Ewma,alpha:t}))),ip);return n.createElement("div",{className:xp},n.createElement(a.Select,{ref:s,"data-sumo-test":"ewma-operator-parameter-value",disabled:t,value:e.parameter,handleChange:t=>{(t=>{i(Ct(xt({},e),{key:le.Operator.Ewma,parameter:t}))})(t.target.value)},inline:!0},["span","alpha"].map((e=>n.createElement(a.Select.Item,{"data-sumo-test":"ewma-operator-parameter-item",key:e,value:e,dense:!0},e)))),"span"===e.parameter?n.createElement(a.TextField,{"data-sumo-test":"ewma-operator-span-value",fullWidth:!1,inline:!0,value:null!=l?l:"",className:Cp,disabled:t,onKeyDown:o,onChange:e=>{const t=parseInt(e.target.value);c(t),!isNaN(t)&&p(t)},placeholder:"3",type:"number",inputProps:{min:1}}):n.createElement(a.TextField,{"data-sumo-test":"ewma-operator-alpha-value",fullWidth:!1,inline:!0,value:null!=d?d:"",className:Cp,disabled:t,onKeyDown:o,onChange:e=>{const t=parseFloat(e.target.value);u(t),!isNaN(t)&&h(t)},placeholder:"0.5",type:"number",inputProps:{min:0,step:.01,max:1}}))})),wp=e=>e?0:Ku,Ip=e=>e.map((e=>({label:e,value:e}))),Rp=(e,t="")=>Object.keys(e).filter((e=>e.toLowerCase().includes(t.toLowerCase()))).map((e=>`{{${e}}}`)),Dp=(e,t,i)=>{const[,r]=e.split("=");return[...Rp(t,r),...i]},Op=(e,t=new Set)=>e.map((e=>{const i=e.negation?"!":"",r=e.value.startsWith("(")&&e.value.endsWith(")");switch(e.type){case"NewMetricsQueryFilterByValue":return r?`${i}${e.value}`:`${i}${Pp(e.value)}`;case"NewMetricsQueryFilterByPair":return`${i}${Pp(e.key)}=${r?e.value:Pp(e.value,t)}`}})),Np=(e,t=new Set)=>{if(!e)return"";const i=e.metric.trim(),r=e.filters,{operators:n}=e,a=i.length>0?`metric=${Pp(i,t)}`:void 0,s=Op(r,t),o=a?[a].concat(s):s;return(()=>{const e=Fp(n);return o.length>0&&e.length>0?o.concat("|",e):o})().join(" ")},Mp=e=>{var t,i;const r=null==e?void 0:e.find((e=>e.queryType===le.QueryTypes.LOGS));return{parseMode:null!=(t=null==r?void 0:r.parseMode)?t:mp.parseMode,timeSource:null!=(i=null==r?void 0:r.timeSource)?i:mp.timeSource}},kp=e=>{const{parseMode:t,timeSource:i}=Mp(e);return e.every((e=>e.queryType!==le.QueryTypes.LOGS||e.parseMode===t&&e.timeSource===i))?e:e.map((e=>{if(e.queryType===le.QueryTypes.LOGS){if(e.parseMode!==t&&e.timeSource!==i)return Ct(xt({},e),{parseMode:t,timeSource:i});if(e.parseMode!==t)return Ct(xt({},e),{parseMode:t});if(e.timeSource!==i)return Ct(xt({},e),{timeSource:i})}return e}))};function Lp(e){return e.replace(/[\\"']/g,"\\$&")}const Pp=(e,t=new Set)=>t.has(e)||e.includes("*")&&!e.includes("=")?e:/["']/g.test(e)?/^"(.*)"$/.test(e)?`"${Lp(e.slice(1,-1))}"`:`"${Lp(e)}"`:/[\s(){}<>\[\]=!&|,~`]/g.test(e)?`"${e}"`:""===e?'""':e,Fp=e=>e.map((e=>{var t,i;switch(e.key){case le.Operator.Accum:case le.Operator.Delta:return e.key;case le.Operator.Rate:return e.key+(e.policy!==le.RatePolicy.All?` ${e.policy}`:"");case le.Operator.Outlier:return`outlier direction=${e.direction}`+(e.window?` window=${e.window}`:"")+(e.threshold?` threshold=${e.threshold}`:"");case le.Operator.Filter:return e.aggregator&&e.operation&&void 0!==e.value?`filter ${e.aggregator} ${e.operation} ${e.value}`:null;case le.Operator.Where:return e.operation&&void 0!==e.value?`where _value ${e.operation} ${e.value}`:null;case le.Operator.Timeslice:return e.operation&&void 0!==e.value?`timeslice ${e.operation} over ${e.value}`:null;case le.Operator.Ewma:return"alpha"===e.parameter?`ewma alpha=${null!=(t=e.alpha)?t:"0.5"}`:`ewma span=${null!=(i=e.span)?i:"3"}`;case le.Operator.Avg:case le.Operator.Count:case le.Operator.Max:case le.Operator.Min:case le.Operator.Sum:case le.Operator.StandardDeviation:return e.key+(e.value?` by ${e.value}`:"");case le.Operator.Percentile:return void 0!==e.value?`pct(${e.value})`+(e.by?` by ${e.by}`:""):null;case le.Operator.TimeShift:case le.Operator.Eval:case le.Operator.Parse:case le.Operator.HistogramQuantile:return Boolean(e.value)?`${e.key} ${e.value}`:null;case le.Operator.Bottomk:case le.Operator.Topk:return e.using&&void 0!==e.value?`${e.key} (${e.value}, ${e.using})`:null;case le.Operator.Quantize:return e.using&&void 0===e.value?`quantize using ${e.using}`:e.using&&void 0!==e.value?`quantize to ${e.value} using ${e.using}`:null;case le.Operator.FillMissing:return e.policy.type===le.FillMissingPolicyKey.fixed?`fillmissing using ${e.policy.value}`:`fillmissing using ${e.policy.type}`}})).filter((e=>null!=e)).join(" | "),Up=e=>({queryKey:e,queryString:"",type:"BasicMetricsQuery",metricsQueryData:Vp(),queryType:le.QueryTypes.METRICS,metricsQueryMode:le.QueryModes.BASIC}),Vp=()=>({type:"NewMetricsQueryData",metric:"",filters:[],operators:[]}),Bp=e=>({queryKey:e,queryString:"",type:"AdvancedMetricsQuery",queryType:le.QueryTypes.METRICS,metricsQueryMode:le.QueryModes.ADVANCED}),$p=e=>({queryKey:e,queryString:"",type:"LogsQuery",queryType:le.QueryTypes.LOGS,parseMode:mp.parseMode,timeSource:mp.timeSource}),Hp=e=>({queryKey:e,queryString:"",type:"BasicTracesQuery",queryType:le.QueryTypes.TRACES,tracesQueryData:{filters:[]}}),Wp=(e,t)=>e.map((e=>Ct(xt({},e),{value:Kp({query:e.value,variables:t})})));function qp(e){return Object.keys(e).reduce(((t,i)=>{var r;return t[i]=null==(r=e[i])?void 0:r.selectedValue[0],t}),{})}function jp(e,t){return Wp(e,qp(t))}const Qp=e=>{const t=e,{startMillis:i,endMillis:r}=t,n=At(t,["startMillis","endMillis"]),{currentWorkspace:a}=Re.workspacesManager;a.handleSearchDrillDown({data:Ct(xt({},n),{timeRange:{startMillis:i,endMillis:r},timeZone:Ie.timeZoneServiceV2.getUserTimeZone()}),isMetrics:!1,fromMetricsSearch:!0})},zp=()=>{let e;e=De.currentUserHelper.hasFeatureFlag("UISplitSettings")?"app.logs-config.fields":"app.config.fields",Re.applicationState.go(e)};function Gp(e){return null!==/\|\s*timeslice.*\|.*by _timeslice\s*.*\|\s*outlier/gi.exec(e.replace(/\n/g,""))}const Kp=({query:e,variables:t,quote:i=!1,placeholder:r,variablesToEscapeAndQuote:n})=>{const a="\\s*(.*?)\\s*",s=new RegExp(`${`{{(?!{)${a}}}(?!})`}|${`{{{${a}}}}`}`,"g");return e.replace(s,((e,a,s)=>{const o=null!=a?a:s,l=t[o];return l?null!=n&&n.includes(o)?`"${l.replace(/"/g,'\\"')}"`:i?`"${l}"`:l:null!=r?r:e}))};var Yp=(e=>(e.COPY_VALUE="copy-value",e.COPY_DIMENSION_AND_VALUE="copy-dimension-and-value",e.COPY_ENTIRE_TIME_SERIES="copy-entire-time-series",e.ADD_TO_QUERY="add-to-query",e.ADD_TO_QUERY_AND_RUN="add-to-query-and-run",e.DELETE_FROM_QUERY="delete-from-query",e.DELETE_FROM_QUERY_AND_RUN="delete-from-query-and-run",e.ADD_TO_QUERY_AS_NOT="add-to-query-as-not",e.ADD_TO_QUERY_AS_NOT_AND_RUN="add-to-query-as-not-and-run",e))(Yp||{});const Zp={"copy-value":{contextMenuActionKey:"copy-value",getText:()=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.copyValue"),onClick:e=>{ah(e.value)}},"copy-dimension-and-value":{contextMenuActionKey:"copy-dimension-and-value",getText:()=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.copyDimensionAndValue"),onClick:e=>{ah(function(e){const t=e.colDef.colId,i=e.value,r={[`${t}`]:i};return JSON.stringify(r)}(e))}},"copy-entire-time-series":{contextMenuActionKey:"copy-entire-time-series",getText:()=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.copyEntireTimeSeries"),onClick:e=>{ah(function(e){const{queryId:t,metaData:i,aggregateInfo:r}=e.data,n=xt(xt({queryId:t},i),r);return JSON.stringify(n)}(e))}},"add-to-query":{contextMenuActionKey:"add-to-query",getText:(e,{isMultiQuery:t})=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.addToQuery",t?`query ${e.data.queryId}`:"query"),onClick:()=>{throw new Error("not implemented, to be overridden")}},"add-to-query-and-run":{contextMenuActionKey:"add-to-query-and-run",getText:(e,{isMultiQuery:t})=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.addToQueryAndRun",t?`query ${e.data.queryId}`:"query"),onClick:()=>{throw new Error("not implemented, to be overridden")}},"add-to-query-as-not":{contextMenuActionKey:"add-to-query-as-not",getText:(e,{isMultiQuery:t})=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.addToQueryAsNot",t?`query ${e.data.queryId}`:"query"),onClick:()=>{throw new Error("not implemented, to be overridden")}},"add-to-query-as-not-and-run":{contextMenuActionKey:"add-to-query-as-not-and-run",getText:(e,{isMultiQuery:t})=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.addToQueryAsNotAndRun",t?`query ${e.data.queryId}`:"query"),onClick:()=>{throw new Error("not implemented, to be overridden")}},"delete-from-query":{contextMenuActionKey:"delete-from-query",getText:(e,{isMultiQuery:t})=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.removeFromQuery",t?`query ${e.data.queryId}`:"query"),onClick:()=>{throw new Error("not implemented, to be overridden")}},"delete-from-query-and-run":{contextMenuActionKey:"delete-from-query-and-run",getText:(e,{isMultiQuery:t})=>r.i18nUtil.get("sharedAnalytics.metricsQueryPreviewTable.contextMenu.items.removeFromQueryAndRun",t?`query ${e.data.queryId}`:"query"),onClick:()=>{throw new Error("not implemented, to be overridden")}}};const Xp=[Li.MAX,Li.MIN,Li.SUM,Li.AVG,Li.LATEST,Li.COUNT],Jp=["copy-value","copy-dimension-and-value","copy-entire-time-series"],eh=["add-to-query","add-to-query-and-run","add-to-query-as-not","add-to-query-as-not-and-run"],th=["delete-from-query","delete-from-query-and-run"],ih=(e,t,i)=>{const{colDef:{colId:r},value:n}=t;if(r===Li.QUERY_ID||void 0===n)return"copy-entire-time-series"===e;if(Xp.includes(r))return Jp.includes(e);if(Jp.includes(e))return!0;const a=i.find((({queryKey:e})=>e===t.data.queryId));return"BasicMetricsQuery"!==a.type&&"AdvancedMetricsQuery"!==a.type?Jp.includes(e):("AdvancedMetricsQuery"===a.type?nh(a,t):rh(a,t))?th.includes(e):eh.includes(e)},rh=(e,t)=>{const{colDef:i,value:r}=t;return e.metricsQueryData.filters.some((e=>{var t;return e.key.toLowerCase()===(null==(t=i.colId)?void 0:t.toLowerCase())&&e.value.toLowerCase()===r.toLowerCase()}))},nh=(e,t)=>{const{queryString:i}=e,{value:r="",colDef:{colId:n=""}}=t;return Wo(i).some((e=>{const{key:t,value:i}=e;return t===n.toLowerCase()&&i===r.toLowerCase()}))};function ah(e){return wt(this,null,(function*(){try{yield navigator.clipboard.writeText(e),(0,ce.showCasualNotification)({message:r.i18nUtil.get("library.copyToClipboardSuccess")})}catch(e){(0,ce.showCriticalNotification)({autoDismiss:!0,message:r.i18nUtil.get("library.copyToClipBoardError")})}}))}const sh=(e,t,i={})=>r=>{const{queries:n}=t,a=n.find((({queryKey:e})=>e===r.data.queryId));if(!a||"BasicMetricsQuery"!==a.type&&"AdvancedMetricsQuery"!==a.type)return;const s="BasicMetricsQuery"===a.type?oh(a,r,i):dh(a,r,i),o=n.map((e=>e.queryKey===s.queryKey?s:e));e(o,Boolean(i.shouldSubmit))},oh=(e,t,i)=>{const{filters:r}=e.metricsQueryData,n=i.isDelete?ch(r,t):lh(r,t,i),a=Ct(xt({},e.metricsQueryData),{filters:n});return Ct(xt({},e),{queryString:Np(a),metricsQueryData:a})},lh=(e=[],t,i)=>[...e,{type:"NewMetricsQueryFilterByPair",key:t.colDef.colId,value:t.value,negation:Boolean(i.isNegation)}],ch=(e=[],t)=>{const i=t.colDef.colId,r=t.value,n=e.findIndex((e=>"NewMetricsQueryFilterByPair"===e.type&&(e.key===i&&e.value===r)));return-1!==n&&e.splice(n,1),e},dh=(e,t,i)=>{const{queryString:r}=e,n=i.isDelete?ph(r,t):uh(r,t,i);return Ct(xt({},e),{queryString:n})},uh=(e,t,i)=>{const{colDef:r,value:n}=t,a=/["']/g.test(o=n)?`"${o.replace(/[\\"']/g,"\\$&")}"`:`"${o}"`,s=`${r.colId}=${a} ${e}`;var o;return i.isNegation?`!${s}`:s},ph=(e,t)=>{const{value:i="",colDef:{colId:r=""}}=t;let n=e.trim(),a=!1;for(;!a;){const e=Wo(n);if(0===e.length){a=!0;break}const t=e.findIndex((e=>e.key===r.toLowerCase()&&e.value===i.toLowerCase()));if(t<0){a=!0;break}n=hh(n,e[t]).trim()}return n.trim()},hh=(e,t)=>{const{positions:i}=t,r=[],n={};i.forEach((e=>{let t=e.start;for(;t<=e.stop;)n[t]=!0,t++}));for(let t=0;t<e.length;t++)n[t]||r.push(e[t]);return r.join("")},mh={tableContainer:"tableContainer___RGAeG",tableCell:"tableCell___RwwpZ",tableCellKebabIcon:"tableCellKebabIcon___w7Cek",tableCellTooltipContainer:"tableCellTooltipContainer___PunWc"},gh={tableContainer:"tableContainer___9Sjcb",tableCell:"tableCell___Mn3J5",tableCellKebabIcon:"tableCellKebabIcon___n7kVN",tableCellTooltipContainer:"tableCellTooltipContainer___b9jZi"},yh=e=>({"no-dimensions":{overlayType:"emptyPreview",title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noDimensions.title"),description:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noDimensions.description")},"no-matching-results":{overlayType:"noRow",title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noMatchingResults.title"),description:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noMatchingResults.description"),buttonText:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noMatchingResults.buttonText")},"no-query-results":{overlayType:"noRow",title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryResults.title"),description:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryResults.description")}}[e]);const vh="tableCellTooltipContainer",fh=()=>{document.getElementById(vh).style.display="none"},_h=(e,t)=>{const i=document.getElementById(vh);i.innerText=e.innerText,i.style.display="block";const{left:r,top:n}=((e,t,i)=>{const r="table"===i?"table-container-root":"preview-table_column-filter",n=document.querySelector(`[data-sumo-test="${r}"]`).getBoundingClientRect(),a=e.getBoundingClientRect(),{clientWidth:s,clientHeight:o}=e,{clientWidth:l,clientHeight:c}=t,d=a.left-.5*(l-s),u=a.top+e.clientHeight+8,p=d<n.left,h=d+l>n.right;if("table"===i&&(p||h)){const e=p?a.right+8:a.left-8-l,t=a.top-.5*(c-o);return{left:e,top:t+c>n.bottom?t-(t+c-n.bottom):t}}return u+c>n.bottom?{left:d,top:a.top-8-c}:{left:d,top:u}})(e,i,t);i.style.left=`${r}px`,i.style.top=`${n}px`},Sh=(e,t=0)=>{const i=e.cloneNode(!0);i.style.display="inline",i.style.width="auto",i.style.visibility="hidden",document.body.appendChild(i);const r=e.offsetWidth-t,n=i.offsetWidth>r;return i.remove(),n},bh="tableCellKebabIconContainer",Eh=(0,a.withCssModulesTheme)({brandLight:gh,brandDark:mh},gh,(({styles:e,loading:t,data:i,columns:r,filters:s,previewParameters:o,onQueryFiltersUpdate:l,onRenderFinished:c,onSearchClear:d})=>{var u,p,h;const m=(0,n.useRef)(),g=function({columns:e,data:t,filters:i,clearSearch:r}){const n=!(null!=t&&t.length);return Boolean(null==i?void 0:i.searchPhrase)&&n?Ct(xt({},yh("no-matching-results")),{buttonOnClick:r}):n?yh("no-query-results"):Array.isArray(null==i?void 0:i.hiddenColumns)&&e.every((({field:e})=>i.hiddenColumns.includes(e)))?yh("no-dimensions"):void 0}({data:i,columns:r,filters:s,clearSearch:d}),y=o?Ct(xt({},((e,{queries:t=[]})=>({"data-sumo-test":"preview-table_context-menu",baseMenuProps:{border:!1,dense:!1},contextMenuItemRenderers:e.map((({contextMenuActionKey:e,getText:i,onClick:r})=>s=>{if(null===s||!ih(e,s,t))return null;const o=Boolean(t&&t.length>1),l=i(s,{isMultiQuery:o});return n.createElement(a.Menu.Item,{key:e,"data-sumo-test":e,onClick:()=>r(s)},n.createElement(a.Menu.Text,null,l))}))}))([Zp[Yp.COPY_VALUE],Zp[Yp.COPY_DIMENSION_AND_VALUE],Zp[Yp.COPY_ENTIRE_TIME_SERIES],Ct(xt({},Zp[Yp.ADD_TO_QUERY]),{onClick:sh(l,o)}),Ct(xt({},Zp[Yp.ADD_TO_QUERY_AND_RUN]),{onClick:sh(l,o,{shouldSubmit:!0})}),Ct(xt({},Zp[Yp.DELETE_FROM_QUERY]),{onClick:sh(l,o,{isDelete:!0})}),Ct(xt({},Zp[Yp.DELETE_FROM_QUERY_AND_RUN]),{onClick:sh(l,o,{isDelete:!0,shouldSubmit:!0})}),Ct(xt({},Zp[Yp.ADD_TO_QUERY_AS_NOT]),{onClick:sh(l,o,{isNegation:!0})}),Ct(xt({},Zp[Yp.ADD_TO_QUERY_AS_NOT_AND_RUN]),{onClick:sh(l,o,{isNegation:!0,shouldSubmit:!0})})],o)),{onClose:()=>{document.querySelectorAll(`.${e.tableContainer} .${e.tableCellKebabIcon}`).forEach((e=>{e.remove()}))}}):void 0,v=(0,n.useCallback)((e=>{var t,i,r;"eText"===(null==(r=null==(i=null==(t=e.target)?void 0:t.attributes)?void 0:i.ref)?void 0:r.value)&&Sh(e.target,20)&&_h(e.target,"table")}),[]),f=(0,n.useCallback)((e=>{m.current=e,null==c||c("ag-grid");const t=document.querySelector(".ag-header-container");t&&(t.addEventListener("mouseover",v),t.addEventListener("mouseout",fh))}),[c,v]),_=(null!=(p=null==(u=null==s?void 0:s.hiddenColumns)?void 0:u.length)?p:0)>0?r.filter((e=>{var t;return!(null!=(t=null==s?void 0:s.hiddenColumns)&&t.includes(e.field))})):r,S=_.length<30,b=Ct(xt({},fr),{stateOverlayConfig:g,showLoadingOverlay:t,suppressCustomOverlay:!0,context:{searchPhrase:null==(h=null==s?void 0:s.searchPhrase)?void 0:h.toLowerCase()},onTableInit:f,onCellClicked:t=>{var i,r,n,a,s,o;const l=null==(i=t.event)?void 0:i.target;[l,l.parentNode,null==(r=l.parentNode)?void 0:r.parentNode].some((t=>t.classList.contains(e.tableCellKebabIcon)))&&(null==(a=null==(n=m.current)?void 0:n.contextMenuAPI)||a.setCellContext(t),null==(o=null==(s=m.current)?void 0:s.contextMenuAPI)||o.setOpen(!0))},onCellMouseOver:t=>{var i,r,n,a;const s=(null==(i=t.event)?void 0:i.target).closest(".ag-cell");Sh(s,32)&&_h(s,"table");const o=null==(r=t.event)?void 0:r.relatedTarget;if(null!=o&&o.classList.contains("icon-kebab")){const e=o.closest(".ag-cell");e.removeChild(e.querySelector("button"))}if(!s||s.querySelector(`.${e.tableCellKebabIcon}`))return;const l=null==(a=null==(n=document.getElementById(bh))?void 0:n.querySelector(`.${e.tableCellKebabIcon}`))?void 0:a.cloneNode(!0);l?(s.appendChild(l),["mouseover","mouseout"].forEach((e=>{l.addEventListener(e,(e=>{e.stopPropagation()}))}))):$.logErrorLocal("metricsPreviewTableV2: cloned kebab icon element is missing")},onCellMouseOut:t=>{var i;const r=document.querySelector(`.${e.tableCellKebabIcon}`),n=(null==(i=t.event)?void 0:i.target).closest(".ag-cell");r&&!(null!=n&&n.contains(t.event.relatedTarget))&&document.querySelectorAll(`.${e.tableContainer} .${e.tableCellKebabIcon}`).forEach((e=>{e.remove()})),fh()},enableSizeColumnsToContent:!1,suppressContextMenuOnRightClick:!0,suppressColumnVirtualisation:S});return(0,n.useEffect)((()=>{var e;null==(e=m.current)||e.refreshCells({force:!0})}),[null==s?void 0:s.searchPhrase]),n.createElement(n.Fragment,null,n.createElement("div",{id:bh},n.createElement(a.IconButton,{icon:a.IconName.Kebab,className:e.tableCellKebabIcon})),n.createElement("div",{className:e.tableCellTooltipContainer,id:vh}),n.createElement("div",{className:e.tableContainer,"data-sumo-test":"previewTableV2",key:String(S)},n.createElement(a.Table,{data:b.stateOverlayConfig?void 0:i,columnOptions:_,gridOptions:b,contextMenuConfig:y})))})),Th=({classes:e,index:t,title:i,name:s,items:o,hiddenColumns:l,onChange:c})=>{const d=e=>!l.includes(e),u=o.filter((e=>d(e.value))).length,p=u===o.length,h=({target:{name:e}},t)=>{if(t){const t=l.filter((t=>t!==e));c(t)}else c([...l,e])};return null!=o&&o.length?n.createElement("div",{"data-sumo-test":`previewTable_column-group_${i}`},n.createElement("div",{"data-sumo-test":`${i}-column-group-title`,className:ue(e.columnFilterGroupTitleRow,e.item,{[e.groupDivider]:t>0})},n.createElement(a.Checkbox,{indeterminate:!p&&u>0,checked:u>0,onChange:()=>{const e=l.filter((e=>{const t=Ui.includes(e);return"dimensions"===s?t:!t}));if(p){const t=o.map((e=>e.value));c([...e,...t])}else c(e)},label:i,classes:{label:e.itemGroupTitleLabel},"data-sumo-test":`${i}-column-group-wrapper`}),n.createElement("div",{className:e.noOfSelected,"data-sumo-test":`number-of-selected-${i}`},r.i18nUtil.get("sharedAnalytics.selected",u))),o.map((({value:t,label:i})=>n.createElement("div",{key:t,className:e.item,"data-col-id":t},n.createElement(a.Checkbox,{classes:{labelRoot:e.itemCheckbox,label:e.itemLabel},name:t,label:i,checked:d(t),onChange:h,"data-sumo-test":`${t}-column-wrapper`}))))):null},xh={label:"label___xwg9-",divider:"divider___R-lI0",item:"item___U2eHf",itemCheckbox:"itemCheckbox___NGLoS",itemLabel:"itemLabel___KwcxN",itemGroupTitleLabel:"itemGroupTitleLabel___MFwmO",columnFilterGroupTitleRow:"columnFilterGroupTitleRow___dMMYY",groupDivider:"groupDivider___LMw-X",noOfSelected:"noOfSelected___04142"},Ch={label:"label___-do6P",divider:"divider___-gPj5",item:"item___WBnKr",itemCheckbox:"itemCheckbox___iv4Vz",itemLabel:"itemLabel___vf1Yr",itemGroupTitleLabel:"itemGroupTitleLabel___ROUbP",columnFilterGroupTitleRow:"columnFilterGroupTitleRow___swsl8",groupDivider:"groupDivider___TpROq",noOfSelected:"noOfSelected___twFno"},Ah=(0,a.withCssModulesTheme)({brandLight:Ch,brandDark:xh},Ch,(({styles:e,data:t,loading:i,hiddenColumns:r=[],onChange:s})=>n.createElement("div",{"data-sumo-test":"preview-table_column-filter",onMouseOver:e=>{const t=e.target;(null==t?void 0:t.classList.contains("MuiTypography-root"))&&Sh(t,0)&&_h(t,"filters")},onMouseOut:fh},i?n.createElement(a.SkeletonLoadingPanel,{numRows:5,dense:!0}):t.groups.map(((t,i)=>n.createElement(Th,Ct(xt({},t),{key:t.name,classes:{divider:e.divider,item:e.item,label:e.label,itemGroupTitleLabel:e.itemGroupTitleLabel,itemCheckbox:e.itemCheckbox,itemLabel:e.itemLabel,columnFilterGroupTitleRow:e.columnFilterGroupTitleRow,noOfSelected:e.noOfSelected,groupDivider:e.groupDivider},index:i,hiddenColumns:r,onChange:s}))))))),wh="searchBar___bEXhw",Ih="textMeasurementDiv___KqBuB",Rh=n.memo((({value:e,onChange:t})=>{const[i,s]=(0,n.useState)(e),o=(0,n.useRef)(null);(0,n.useEffect)((()=>{s(e)}),[e]);const l=(0,r.useDebounce)(t,300);return n.createElement(n.Fragment,null,n.createElement(a.SearchBar,{onClear:()=>{s(""),l("")},"data-sumo-test":"preview-table_search-bar",className:wh,style:{width:(()=>{if(!i||null==i||!i.length||null==o||!o.current)return 180;o.current.textContent=i;const e=o.current.offsetWidth+56;return e<180?180:e})()}},n.createElement(a.SearchBar.Input,{placeholder:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.searchBar.placeholder"),value:i,onChange:e=>{const t=e.target.value;s(t),l(t)},disableUnderline:!0,"data-sumo-test":"preview-table_search-bar-input"})),n.createElement("div",{ref:o,className:Ih}))})),Dh={matchingTimeSeries:"matchingTimeSeries___pCfQ2",container:"container___7a6wD",filters:"filters___jtVU-",table:"table___ewDPJ"},Oh={matchingTimeSeries:"matchingTimeSeries___RMxRB",container:"container___MOusH",filters:"filters___WJkZk",table:"table___Svs3R"},Nh=e=>{var t=e,{styles:i,classNames:s={},timeSeriesData:o,hiddenQueryKeys:l=[],previewParameters:c,filters:p,fetchStatus:m,hideHeader:g,updateFilters:y,onDidRender:v,onUpdatePreviewParameters:f}=t,_=At(t,["styles","classNames","timeSeriesData","hiddenQueryKeys","previewParameters","filters","fetchStatus","hideHeader","updateFilters","onDidRender","onUpdatePreviewParameters"]);const S=[le.FetchStatus.Loading,le.FetchStatus.Reloading,le.FetchStatus.PollingInProgress].includes(m),b=(0,n.useCallback)((e=>{y(Ct(xt({},p),{hiddenColumns:e}))}),[p,y]),E=(0,n.useCallback)((e=>{y(Ct(xt({},p),{searchPhrase:e}))}),[p,y]),T=(0,n.useCallback)((()=>{E("")}),[E]),x=(0,n.useMemo)((()=>S?[]:function(e,{previewParameters:t,hiddenQueryKeys:i}){if(!t||!e)return[];let r=e;return(0,u.Z)(i)||(r=r.filter((({queryId:e})=>!i.includes(e)))),r=(0,d.Z)(r,(({queryId:e})=>e)),r.map((e=>Ct(xt({},e),{aggregateInfo:Object.keys(e.aggregateInfo).reduce(((t,i)=>(t[i]=pr(e.aggregateInfo[i]),t)),{})})))}(o,{hiddenQueryKeys:l,previewParameters:c})),[o,l,S]),C=(0,n.useMemo)((()=>{var e;return S?[]:hr(x,{hiddenColumns:null!=(e=null==p?void 0:p.hiddenColumns)?e:[],searchPhrase:null==p?void 0:p.searchPhrase})}),[x,null==p?void 0:p.hiddenColumns,null==p?void 0:p.searchPhrase]),A=(0,n.useMemo)((()=>{const{hiddenColumns:e,searchPhrase:t=""}=null!=p?p:{},i=t.toLowerCase().trim(),r=e&&e.length>0?C.filter((t=>!e.includes(t.field))):C;return function(e,t,i){if(!i)return e;const r=new Set(Object.keys((0,h.Z)(t,"field")));return e.filter((e=>[...Object.entries(e.metaData),...Object.entries(e.aggregateInfo)].some((([e,t])=>r.has(e)&&(t+"").toLowerCase().includes(i)))))}(x,r,i)}),[x,C,p]),w=(0,n.useMemo)((()=>function(e){const t={name:"data",title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.filters.groups.data.title"),items:[]},i={name:"dimensions",title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.filters.groups.dimensions.title"),items:[]};for(const{field:r,headerName:n}of e)if("queryId"!==r){const e={value:r,label:n};Ui.includes(r)?t.items.push(e):i.items.push(e)}return{groups:[t,i]}}(C)),[C]);return n.createElement("div",{className:ue(i.container,s.card),"data-sumo-test":`previewTable_${m}`},n.createElement("div",{className:i.filters},n.createElement(Ah,{data:w,hiddenColumns:null==p?void 0:p.hiddenColumns,loading:S,onChange:b})),n.createElement(a.Card,{className:i.table},!g&&n.createElement(a.Card.Header,null,n.createElement(Rh,{value:null==p?void 0:p.searchPhrase,onChange:E}),c&&n.createElement(n.Fragment,null,n.createElement(a.Text,{variant:"text",className:i.matchingTimeSeries,"data-sumo-test":"previewTable_matchingTimeSeries_result"},!S&&r.i18nUtil.get("sharedAnalytics.matchingTimeSeriesCount",A.length)),!(null==o||!o.length)&&n.createElement(vr,{hiddenColumns:null==p?void 0:p.hiddenColumns,timeSeriesData:o}))),n.createElement(a.Card.Content,null,n.createElement(Eh,Ct(xt({},_),{data:A,columns:C,filters:p,previewParameters:c,loading:S,onRenderFinished:v,onQueryFiltersUpdate:f,onSearchClear:T})))))},Mh=(0,a.withCssModulesTheme)({brandLight:Oh,brandDark:Dh},Oh,Nh),kh=n.memo(Mh,((e,t)=>{const i=e.timeSeriesData===t.timeSeriesData||(0,o.Z)(e.timeSeriesData,t.timeSeriesData),r=e.previewParameters===t.previewParameters||(0,o.Z)(e.previewParameters,t.previewParameters);return i&&r&&e.hiddenQueryKeys===t.hiddenQueryKeys&&e.fetchStatus===t.fetchStatus&&e.hideHeader===t.hideHeader&&e.filters===t.filters&&e.fetchStatus===t.fetchStatus})),Lh=/(\/\/.*(\n)?)/g,Ph=/(\/\*[^]*?(\*\/))/g,Fh=/(\|\s*fillmissing\s+(using\s+)?empty)/g,Uh=new RegExp("(\\|?\\s*quantize(\\s+(to\\s+)?(?<granularity>\\d+(d|h|m|s)))?(\\s+using\\s+(?<rollup>avg|min|max|sum|count|rate))?)","g"),Vh=new RegExp("(\\|?\\s*timeslice(\\s+(?<rollup>avg|min|max|sum|count|rate)\\s+over\\s+(?<granularity>\\d+(d|h|m|s))))","g"),Bh=/(\|)/g,$h=/([#][a-zA-Z0-9]+)/g,Hh=(e,t)=>{let i=0;for(;t>=0&&"\\"===e[t];)i++,t--;return i%2>0},Wh=(e,t)=>{const i=[];let r=!1;for(let t=0;t<e.length;t++)'"'===e[t]&&!Hh(e,t-1)&&(r?i[i.length-1].end=t:i.push({start:t,end:-1}),r=!r);return[...e.matchAll(t)].filter((e=>void 0!==e.index&&!i.some((t=>t.start<e.index&&t.end>e.index+e[0].length-1))))},qh=(e,t)=>Wh(e,t).map((e=>({start:e.index,end:e.index+e[0].length-1}))),jh=(e,t)=>{const i=qh(e,t),r={};return i.forEach((e=>{for(let t=e.start;t<=e.end;t++)r[t]=!0})),e.split("").filter(((e,t)=>!r[t])).join("")},Qh=e=>jh(e,Ph),zh=e=>jh(e,Lh),Gh=e=>Qh(zh(e)),Kh=e=>e.queryType===le.QueryTypes.METRICS,Yh=e=>e.queryType===le.QueryTypes.METRICS&&e.metricsQueryMode===le.QueryModes.BASIC,Zh=e=>e.queryType===le.QueryTypes.METRICS&&e.metricsQueryMode===le.QueryModes.ADVANCED,Xh=e=>e.some((e=>Kh(e)&&e.queryString)),Jh=e=>e.queryType===le.QueryTypes.TRACES?0===e.tracesQueryData.filters.length:""===e.queryString.trim(),em=e=>!!Jh(e)||e.queryType===le.QueryTypes.METRICS&&(""===zh(e.queryString).trim()||""===Qh(e.queryString).trim()),tm=e=>({queryKey:e.queryKey,queryString:e.queryString.trim()}),im=e=>{const t=Ct(xt({},tm(e)),{queryType:e.queryType});return e.queryType===le.QueryTypes.TRACES&&(t.tracesQueryData=e.tracesQueryData),e.queryType===le.QueryTypes.SPANS&&(t.spansQueryData=e.spansQueryData),t},rm=(e,t,i)=>{const[r,n]=[e,t].map((e=>(({queries:e,queryKeysToOmit:t})=>null==e?void 0:e.filter((({queryKey:e})=>!(null!=t&&t.includes(e)))))({queries:e,queryKeysToOmit:null==i?void 0:i.queryKeysToOmit}))).map((e=>((e,t=!1)=>null==e?void 0:e.map(t?im:tm).filter((e=>Boolean(e.queryString)||e.queryType===le.QueryTypes.TRACES||e.queryType===le.QueryTypes.SPANS)))(e,null==i?void 0:i.shouldCompareQueryTypes)));return(0,o.Z)(r,n)},nm=e=>({keysInFilter:t,keysRest:i,results:r})=>({rowKey:e,keys:[...t,...i].map((e=>e.toLowerCase())),keysInFilter:t.map((e=>e.toLowerCase())),matchingMetrics:r.map((({name:e,dimensions:t,metaTags:i})=>({name:e,fields:(0,v.Z)([...t,...i].map((({key:e,value:t})=>[e.toLowerCase(),t])))})))}),am=e=>e.map((({key:e,value:t})=>`${e}="${(e=>e.replace(/"/g,""))(t)}"`)).join(" "),sm=5,om=30,lm=20,cm=[1],dm=e=>{if(!e)return e;const t=[];return 0===t.length?e:(0,r.migrateData)(e,t)},um=({lastUsed:e})=>Date.now()-e<1e3*om*60*60*24,pm=(e,t)=>(null!=e?e:[]).filter((e=>e.suggestion!==t)).filter(um).concat({suggestion:t,lastUsed:Date.now()}).slice(-lm),hm=({key:e,value:t},i)=>r=>Ct(xt(xt({},r),null!=i&&i.doNotChangeKeySuggestions?{}:{keys:pm(r.keys,e)}),{valuesByKey:Ct(xt({},r.valuesByKey),{[e]:pm(r.valuesByKey[e],t)})}),mm=e=>[r.i18nUtil.get("sharedAnalytics.queryBuilder.topSuggestions.topSuggestionsHeaders.dimensionsHeader"),r.i18nUtil.get("sharedAnalytics.queryBuilder.topSuggestions.topSuggestionsHeaders.valuesHeader"),r.i18nUtil.get("sharedAnalytics.queryBuilder.topSuggestions.topSuggestionsHeaders.metricsHeader")].includes(e)?-1:1,gm=e=>{const t=e.keys.filter(um),i=Object.keys(e.valuesByKey).reduce(((t,i)=>{const r=e.valuesByKey[i],n=r.filter(um);return n.length===r.length?(t.topSuggestions[i]=r,t):(n.length>0&&(t.topSuggestions[i]=n),t.hasChanged=!0,t)}),{hasChanged:!1,topSuggestions:{}});return t.length!==e.keys.length||i.hasChanged?{keys:t,valuesByKey:i.topSuggestions}:e},ym={syncDelay:1e3,syncKeyMappings:new Map,updateUserSetting:()=>{}};class vm{constructor(e={}){this.inMemoryStorage=new r.InMemoryStorage,this.keysToSync=new Set,this.options=xt(xt({},ym),e),this.throttledSyncRecorded=(0,f.Z)(this.syncRecorded,this.options.syncDelay),this.populateFromUserSettings()}populateFromUserSettings(){for(const[e,t]of this.options.syncKeyMappings.entries()){const i=De.currentUserHelper.getUserSetting(t);try{const t=JSON.stringify(i);this.inMemoryStorage.setItem(e,t)}catch(e){window.console.error(`User settings for "${t}" incorrect:`,i)}}}syncRecorded(){const{syncKeyMappings:e,updateUserSetting:t}=this.options;for(const i of this.keysToSync){this.keysToSync.delete(i);const r=e.get(i),n=this.inMemoryStorage.getItem(i);void 0!==r&&t(r,null!=n?n:"null")}}throttledSync(e){this.keysToSync.add(e),this.throttledSyncRecorded()}get length(){return this.inMemoryStorage.length}clear(){this.inMemoryStorage.clear();for(const e of this.options.syncKeyMappings.keys())this.throttledSync(e)}getItem(e){return this.inMemoryStorage.getItem(e)}key(){return null}removeItem(e){const t=this.inMemoryStorage.length;this.inMemoryStorage.removeItem(e),t!==this.inMemoryStorage.length&&this.throttledSync(e)}setItem(e,t){this.inMemoryStorage.getItem(e)!==t&&(this.inMemoryStorage.setItem(e,t),this.throttledSync(e))}}const fm="metricsQueryBuilderTopSuggestions",_m=(0,oe.default)((()=>new r.StorageFactory(new vm({syncKeyMappings:new Map([[fm,fm]]),updateUserSetting:(e,t)=>{var i,r;null==(r=null==(i=De.currentUserActions)?void 0:i.getActionCreators())||r.updateUserSetting({key:e,value:t})}})))),Sm={keys:[],valuesByKey:{}},bm=()=>{var e,t,i;try{const n=JSON.parse(null!=(e=_m().getItem(fm))?e:"");return(0,r.assertVersionedData)(n),null!=(i=null==(t=dm(n))?void 0:t.data)?i:Sm}catch(e){return Sm}},Em=e=>{const t=bm(),i={data:xt(xt({},t),"function"==typeof e?e(t):e),version:(0,r.ensureDefined)((0,m.Z)(cm))};_m().setItem(fm,JSON.stringify(i))},Tm=(e,t,i)=>new Set([r.i18nUtil.get(`sharedAnalytics.queryBuilder.topSuggestions.${i}`),...null!=e&&e.some((e=>e.suggestion===t))?[r.i18nUtil.get(`sharedAnalytics.queryBuilder.topSuggestions.topSuggestionsHeaders.${i}`)]:[]]),xm=e=>t=>e.some((({label:e,suggestionsLabel:i})=>e===t.suggestion||i===t.suggestion)),Cm=({suggestions:e,topSuggestions:t,exhaustive:i,topSuggestionsHeader:n,valueSearchTerm:a})=>{const s=(null!=t?t:[]).filter(um);if(i)return{topSuggestions:s.filter(xm(e)).slice(-sm),additionalTopSuggestionAutoCompleteItems:[]};const o=s.slice().reverse().reduce(((t,i)=>(t.topSuggestions.length+t.additionalTopSuggestionAutoCompleteItems.length===sm||(xm(e)(i)?t.topSuggestions.push(i):t.additionalTopSuggestionAutoCompleteItems.push({value:i.suggestion,label:i.suggestion,categories:new Set([r.i18nUtil.get(`sharedAnalytics.queryBuilder.topSuggestions.topSuggestionsHeaders.${n}`)])})),t)),{topSuggestions:[],additionalTopSuggestionAutoCompleteItems:[]});return o.additionalTopSuggestionAutoCompleteItems=o.additionalTopSuggestionAutoCompleteItems.filter((e=>Um(e.label,[a]))),o.additionalTopSuggestionAutoCompleteItems=(0,d.Z)(o.additionalTopSuggestionAutoCompleteItems,(({value:e})=>e)),o},Am=e=>{const{additionalTopSuggestionAutoCompleteItems:t,topSuggestions:i}=Cm({suggestions:e.data,topSuggestions:bm().valuesByKey.metric,exhaustive:e.exhaustive,topSuggestionsHeader:"metricsHeader",valueSearchTerm:e.term});return t.concat(e.data.map((e=>Ct(xt({},e),{categories:Tm(i,e.value,"metricsHeader")}))))},wm=e=>Op(e).join(" "),Im=e=>{const t=e.metric.trim();return""===t?[]:[{type:"NewMetricsQueryFilterByPair",key:"metric",value:t,negation:!1}]},Rm=(e,t)=>t.filter((t=>e.filters.every((e=>"NewMetricsQueryFilterByValue"===e.type||e.key!==t)))),Dm=(()=>{const e=()=>r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.emptyText");return{getEmptyTextValuePartial:()=>({secondaryAction:e()}),isFilterWithEmptyTextValue:t=>t.secondaryAction===e()}})(),{getEmptyTextValuePartial:Om}=Dm,{isFilterWithEmptyTextValue:Nm}=Dm,Mm=(e,t,i)=>`${e.substring(0,t.start)}${i}${e.substring(t.end)}`,km=({values:e,term:t,variables:i,exhaustive:r,suffix:n="",range:a,completeQuery:s})=>{const o=t.replace(/=.*$/,""),l=t.replace(/=.*$/,"="),c=Dp(t,i,e).map((e=>xt({value:a&&s?Mm(s,a,`${Pp(e)}${n}`):`${l}${e}`,label:a&&s?Mm(s,a,`${Pp(e)}${n}`):e,suggestionsLabel:e},""===e?Om():{}))),d=Pm(t),{additionalTopSuggestionAutoCompleteItems:u,topSuggestions:p}=Cm({suggestions:c,topSuggestions:bm().valuesByKey[o],exhaustive:r,topSuggestionsHeader:"valuesHeader",valueSearchTerm:d.valueSearchTerm});return u.concat(c.map((e=>Ct(xt({},e),{categories:Tm(p,e.suggestionsLabel,"valuesHeader")}))))},Lm=({keys:e,queryData:t,allowDuplicateKeys:i,exhaustive:r,suffix:n,category:a})=>{const s=i?e:Rm(t,e);return s.map((e=>({label:`${e}${n}`,value:`${e}${n}`,categories:(()=>{if(a)return[a];const n=bm().keys.filter(((e,t,{allowDuplicateKeys:i,exhaustive:r})=>n=>!!um(n)&&(!!i||(r?e.includes(n.suggestion):!t.filters.some((e=>"NewMetricsQueryFilterByPair"===e.type&&e.key===n.suggestion)))))(s,t,{allowDuplicateKeys:i,exhaustive:r})).slice(-sm);return Tm(n,e,"dimensionsHeader")})()})))},Pm=e=>{const[t,i]=e.split("=");return i||e.endsWith("=")?{type:"SearchValues",selectedKey:t,valueSearchTerm:i}:{type:"SearchKeys",keySearchTerm:e}},Fm=e=>e.split(/\-|\.|\/|\_|\s/),Um=(e,t)=>{const i=Fm(e);return t.every((e=>i.some((t=>t.startsWith(e)))))},Vm=(e,t,i,r)=>{const n=Fm(i.toLowerCase()),a=e.filter((({metaData:e})=>r.every((t=>t.negation?e[t.key]!==t.value:e[t.key]===t.value))));return(0,_.Z)((0,d.Z)(a.map((({metaData:e})=>e[t])))).filter((e=>void 0!==e&&Um(e.toLowerCase(),n)))},Bm=(e,t)=>{if(0===e.length)return[];const i=(e=>e.reduce(((e,{metaData:t})=>(Object.entries(t).forEach((([t,i])=>{e[t]=i})),e)),{}))(e);return(0,d.Z)(Object.keys(i)).filter((e=>void 0!==e&&e.toLowerCase().includes(t.toLowerCase())))},$m=(e,t,i)=>{const r=Pm(e.term),n=Pm(t);if(!e.exhaustive||t.endsWith("=")||((e,t)=>"startsWith"===t&&/^_[0-9]*$/.test(e))(t,i)||!((e,t)=>"SearchKeys"===e.type?"SearchKeys"===t.type&&e.keySearchTerm.startsWith(t.keySearchTerm):"SearchValues"===t.type&&e.selectedKey===t.selectedKey&&e.valueSearchTerm.startsWith(t.valueSearchTerm))(n,r))return;const a=(e,i)=>Ct(xt({},e),{data:i,term:t});if("SearchKeys"===n.type){const t="tokenize"===i?Fm(n.keySearchTerm.toLowerCase()):[],r=e.data.filter((e=>{switch(i){case"tokenize":return Um(e.label.toLowerCase(),t);case"startsWith":return e.label.toLowerCase().startsWith(n.keySearchTerm.toLowerCase())}}));return a(e,r)}{const t=Fm(n.valueSearchTerm.toLowerCase()),i=e.data.filter((e=>Um(e.label.split("=")[1].toLowerCase(),t)));return a(e,i)}},Hm=({term:e,previousSuggestions:t,getAllSuggestions:i,keyMatchingStrategy:r})=>{const n=$m(t,e,r);if(n)return n;const a=i();return a?$m(a,e,r):void 0};class Wm extends he.AbstractParseTreeVisitor{static isTerminalNode(e){return Boolean(e.symbol)}static getNodeStartLine(e){return e.start.line}static getNodeStartIndex(e){return e.start.charPositionInLine}static getNodeEndLine(e){var t,i;return null!=(i=null==(t=e.stop)?void 0:t.line)?i:e.start.line}static getNodeEndIndex(e){const t=e.text.length;return e.start.charPositionInLine+t-1}static getNodeResultIndex(e){return Wm.getNodeStartLine(e)+"_"+Wm.getNodeStartIndex(e)+"-"+Wm.getNodeEndLine(e)+"_"+Wm.getNodeEndIndex(e)}defaultResult(){return{}}visitChildren(e){let t={};if(!Wm.isTerminalNode(e)){const i=e;t={[Wm.getNodeResultIndex(i)]:{start:{line:Wm.getNodeStartLine(i),char:Wm.getNodeStartIndex(i)},end:{line:Wm.getNodeEndLine(i),char:Wm.getNodeEndIndex(i)},types:[Tr.ruleNames[i.ruleIndex]]}}}const i=super.visitChildren(e);return this.aggregateResult(i,t)}aggregateResult(e,t){return Object.entries(t).reduce(((e,[t,i])=>(e[t]?e[t]={start:i.start,end:i.end,types:[...e[t].types,...i.types]}:e[t]=i,e)),e)}}const qm=e=>e.getTokens().filter((e=>e.channel===pe.Token.HIDDEN_CHANNEL)).map((e=>{var t;const i=null!=(t=e.text)?t:"",r=i.split("\n");let n,a;return r.length>1?(n=e.line+r.length-1,a=r[r.length-1].length):(n=e.line,a=e.charPositionInLine+i.length-1),{start:{line:e.line,char:e.charPositionInLine},end:{line:n,char:a},types:["comment"],text:i}})),jm=(e,t,i)=>{const{tree:r,tokenStream:n}=Qm(e);(new Wm).visit(r);const a=qm(n),s=t+1;return a.some((e=>e.text.startsWith("//")?(e=>e.start.line===s&&e.start.char<=i)(e):e.start.line===e.end.line?(e=>e.start.line===s&&e.start.char<=i&&e.end.char>=i)(e):(e=>e.start.line===s&&e.start.char<=i)(e)||(e=>e.end.line>s&&e.start.line<s)(e)||(e=>e.end.line===s&&e.end.char>=i)(e)))},Qm=e=>{const t=pe.CharStreams.fromString(e),i=new br(t),r=new pe.CommonTokenStream(i),n=new Tr(r);return n.removeErrorListeners(),{tree:n.queryRow(),tokenStream:r}};class zm extends he.AbstractParseTreeVisitor{defaultResult(){return[]}aggregateResult(e,t){return e.concat(t)}visitRowVar(e){return[{type:"RowVar",value:e.text}]}visitQuantizeAsQueryClause(){return[{type:"QueryOperator",value:le.Operator.Quantize}]}}const Gm=new zm,Km=e=>{const t=e.trim();return t?Qm(t).tree.accept(Gm):[]},Ym=e=>Qm(e).tree.accept(Gm).some((e=>"RowVar"===e.type)),Zm="metricsQueryHistory",Xm=(0,oe.default)((()=>new r.StorageFactory(new vm({syncKeyMappings:new Map([[Zm,Zm]]),updateUserSetting:(e,t)=>{var i,r;null==(r=null==(i=De.currentUserActions)?void 0:i.getActionCreators())||r.updateUserSetting({key:e,value:t})}})))),Jm=()=>{try{const e=Xm().getItem(Zm);return JSON.parse(null!=e?e:"")||[]}catch(e){return[]}},eg=(e,t)=>{const i=Jm(),n=tg(e).map((e=>({id:r.idGeneratorService.generateId(),query:e,variables:rg(e.queryString,t)})));if(0===n.length)return;const a=ng(e,i),s=i.filter(((e,t)=>!a.includes(t)));let o=[...n.reverse(),...s];o.length>50&&(o=o.slice(0,50)),Xm().setItem(Zm,JSON.stringify(o))},tg=e=>{const t=e.filter(((e,t)=>e.queryType===le.QueryTypes.METRICS&&""!==e.queryString.trim())).map((e=>Ct(xt({},e),{queryString:e.queryString.trim()})));return t.filter(((e,i)=>t.findIndex((t=>t.queryString===e.queryString))===i&&!Ym(e.queryString)))},ig=(e,t)=>{const i=`s*{{${t}}}s*`;return Boolean(e.match(new RegExp(i)))},rg=(e,t)=>{if(!t)return null;const i=(t&&Object.keys(t)).reduce(((i,r)=>(ig(e,r)&&(i[r]=t[r]),i)),{});return Object.keys(i)?i:null},ng=(e,t)=>{const i=[];return e.forEach((e=>{const r=t.findIndex((t=>t.query.queryString.trim()===e.queryString.trim()));r>-1&&i.push(r)})),i},ag=({elemRef:e,shouldAutoFocus:t})=>{const i=(0,r.usePrevious)(e.current);(0,n.useEffect)((()=>{!i&&e.current&&t.current&&setTimeout((()=>{var i;null==(i=e.current)||i.focus(),t.current=!1}),400)}),[i,e,t])};function sg(e,t,i,r){const[a,s]=(0,n.useReducer)(t,e),o=(0,n.useRef)(e),l=(0,n.useRef)();(0,n.useEffect)((()=>{l.current=r}),[r]),(0,n.useEffect)((()=>{o.current=a}),[a]);const c=(0,n.useCallback)((e=>{var t;null==(t=l.current)||t.call(l,e)}),[]),d=(0,n.useMemo)((()=>{const e=(0,ke.k)(),t=e=>((e=>{s(e),c(e)})(e),e);let r=t;return r=e({getState:()=>o.current,dispatch:e=>r(e)})(t),e.run(i),r}),[i,c]);return[a,d]}const og={drillDownQueries:[],anchorEl:null,anchorPosition:{top:0,left:0},transformOrigin:{vertical:"top",horizontal:"left"},canvasEvent:{}};function lg({handleError:e=ce.showCriticalNotification,fetchDrilldownQueries:t,shouldShowContextualMenu:i}){const[a,s]=(0,n.useState)(og),o=(0,n.useCallback)((()=>e({message:r.i18nUtil.get("sharedAnalytics.noDrilldownOptions"),variant:"warning"})),[e]);return(0,n.useMemo)((()=>({drilldown:a,updateDrilldown:(e,r)=>{if(e&&r){const{currentTarget:n,clientX:a,clientY:l}=r,{position:c,transformOrigin:d}=function(e,{clientX:t,clientY:i}){const{chart:{toolTip:{container:r}}}=e,{left:n,bottom:a,top:s}=r.getBoundingClientRect();let o;const l={vertical:"top",horizontal:"left"};return t>n?o={top:i,left:t}:Math.abs(s-i)<Math.abs(a-i)?(l.vertical="bottom",o={top:s,left:n}):o={top:a,left:n},o.top=o.top-5,o.left=o.left+5,{position:o,transformOrigin:l}}(e,{clientX:a,clientY:l});if(s({anchorPosition:c,transformOrigin:d,anchorEl:n,drillDownQueries:[],canvasEvent:e}),t){if(i)return t(e).then((t=>{(0,u.Z)(t)?o():s({anchorPosition:c,transformOrigin:d,anchorEl:n,drillDownQueries:t,canvasEvent:e})}),o);t(e)}}else{if(i)return Promise.resolve(s(og));s(og)}}})),[a,t,i,o])}const cg=({elementRef:e,data:t,pageSize:i})=>{const[a,s]=(0,n.useState)(i),o=(0,r.useDebounce)(s,10),l=t.length>a;(({elementRef:e,hasMoreData:t,loadedIndex:i,setLoadedIndex:r,pageSize:a})=>{const[s,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(!t||s)return;const n=e.current;!n||requestAnimationFrame((()=>{n.scrollHeight>n.clientHeight?o(!0):r(i+a)}))}),[e,s,t,a,i,r])})({elementRef:e,hasMoreData:l,loadedIndex:a,setLoadedIndex:o,pageSize:i});const c=(({elementRef:e})=>{const[t,i]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{i(!0)}),[]);(0,n.useEffect)((()=>{const i=e.current;if(!t)return null==i||i.addEventListener("scroll",r),()=>null==i?void 0:i.removeEventListener("scroll",r);null==i||i.removeEventListener("scroll",r)}),[e,t,r]);const a=(0,n.useCallback)((()=>{i(!1)}),[]);return(0,n.useEffect)((()=>{const t=e.current;return null==t||t.addEventListener("mouseout",a),()=>null==t?void 0:t.removeEventListener("mouseout",a)}),[e,a]),t})({elementRef:e});return(0,n.useEffect)((()=>{l&&c&&o(a+i)}),[l,c,o,a,i]),{loadedIndex:a}},dg=({preventFocusingButtonRef:e}={})=>{const[t,i]=(0,n.useState)(!1),r=(0,n.useRef)(null),a=(0,n.useRef)(!1),s=(0,n.useCallback)((()=>{a.current=!1}),[]),o=(0,n.useCallback)(((t,r)=>{t(r),e&&(e.current=!1),setTimeout((()=>{i(!0)}))}),[e]),l=(0,n.useCallback)(((e,t)=>{o(e,t),a.current=!1}),[o]),c=(0,n.useCallback)(((e,t)=>{a.current||o(e,t),a.current=!1}),[o]),d=(0,n.useCallback)((()=>{var t;a.current=!0,null!=e&&e.current||null==(t=r.current)||t.focus()}),[e]),u=(0,n.useCallback)((()=>{i(!1),d(),setTimeout((()=>{d()}))}),[d]);return{buttonRef:r,isMenuOpen:t,buttonProps:{onBlur:s,onClick:l,onFocus:c},menuProps:{onClose:u}}},ug=12e4,pg="QUERY_BUILDER_AUTOCOMPLETE_KEYS",hg="QUERY_BUILDER_AUTOCOMPLETE_VALUES",mg="QUERY_BUILDER_AUTOCOMPLETE_VALUES_WITHIN_KEY",gg=1e3,yg=class{searchKeys({filters:e,term:t,range:[i,n],from:a=0,size:s=gg}){const o={filters:e,from:a,size:s,term:t,timeRangeStart:i,timeRangeEnd:n};return(0,r.postWithObservable)(yg.BASE_URL+"/meta/magellan/searchKeys",o)}searchValues({filters:e,term:t,range:[i,n],from:a=0,size:s=gg,maxSamples:o=5}){const l={filters:e,from:a,size:s,term:t,timeRangeStart:i,timeRangeEnd:n,maxSamples:o};return(0,r.postWithObservable)(yg.BASE_URL+"/meta/magellan/searchValues",l)}searchValuesWithinKey({key:e,filters:t,term:i,range:[n,a],from:s=0,size:o=gg}){const l={filters:t,from:s,size:o,term:i,timeRangeStart:n,timeRangeEnd:a,key:e};return(0,r.postWithObservable)(yg.BASE_URL+"/meta/magellan/searchValuesWithinKey",l).pipe((0,He.K)((()=>(0,Pe.of)({exhaustive:!0,valuesWithCount:[]}))))}};let vg=yg;vg.BASE_URL="/sumo/v1/metrics";const fg=new vg,_g=(e,t)=>{const i=new Map,n=({wasResultInCache:e})=>t=>({result:t,wasResultInCache:e});return a=>{const s=bg(a),o=t(a.term).load(s);if(o)return(0,Pe.of)(o).pipe((0,We.U)(n({wasResultInCache:!0})));if(i.has(s))return(0,r.ensureDefined)(i.get(s));const l=e(a).pipe((0,qe.b)((e=>{t(a.term).save(s,e),i.delete(s)})),(0,We.U)(n({wasResultInCache:Boolean(o)})),(0,je.d)(1));return i.set(s,l),l}},Sg=(e,t)=>({storage:new r.StorageLRUService(e),storageAllResults:new r.StorageLRUService(t)}),bg=e=>{const t=Ct(xt({},e),{range:e.range.map(Eg)});return JSON.stringify(Object.keys(t).sort().map((e=>[e,t[e]])))},Eg=e=>e-e%Yu;class Tg{constructor(e){this.networkService=e,this.searchKeysConfig=xt({fetch:_g((e=>this.networkService.searchKeys(e)),(e=>this.getKeysStorage(e)))},Sg({maxAge:ug,maxNumberOfItems:30,storageKeySuffix:pg,storage:new r.StorageFactory},{maxAge:ug,maxNumberOfItems:10,storageKeySuffix:`${pg}_ALL_RESULTS`,storage:new r.StorageFactory})),this.searchValuesConfig=xt({fetch:_g((e=>this.networkService.searchValues(e)),(e=>this.getValuesStorage(e)))},Sg({maxAge:ug,maxNumberOfItems:30,storageKeySuffix:hg,storage:new r.StorageFactory},{maxAge:ug,maxNumberOfItems:10,storageKeySuffix:`${hg}_ALL_RESULTS`,storage:new r.StorageFactory})),this.searchValuesWithinKeyConfig=xt({fetch:_g((e=>this.networkService.searchValuesWithinKey(e)),(e=>this.getValuesWithinKeyStorage(e)))},Sg({maxAge:ug,maxNumberOfItems:30,storageKeySuffix:mg,storage:new r.StorageFactory},{maxAge:ug,maxNumberOfItems:10,storageKeySuffix:`${mg}_ALL_RESULTS`,storage:new r.StorageFactory}))}get searchKeys(){return this.searchKeysConfig.fetch}get searchValues(){return this.searchValuesConfig.fetch}get searchValuesWithinKey(){return this.searchValuesWithinKeyConfig.fetch}areKeysCached(e){return this.getKeysStorage(e.term).has(bg(e))}areValuesCached(e){return this.getValuesStorage(e.term).has(bg(e))}areValuesWithinKeyCached(e){return this.getValuesWithinKeyStorage(e.term).has(bg(e))}getKeys(e){return this.getKeysStorage(e.term).load(bg(e))}getValues(e){return this.getValuesStorage(e.term).load(bg(e))}getValuesWithinKey(e){return this.getValuesWithinKeyStorage(e.term).load(bg(e))}clearAll(){[this.searchKeysConfig,this.searchValuesConfig,this.searchValuesWithinKeyConfig].forEach((e=>{e.storage.clear(),e.storageAllResults.clear()}))}getKeysStorage(e){return e?this.searchKeysConfig.storage:this.searchKeysConfig.storageAllResults}getValuesStorage(e){return e?this.searchValuesConfig.storage:this.searchValuesConfig.storageAllResults}getValuesWithinKeyStorage(e){return e?this.searchValuesWithinKeyConfig.storage:this.searchValuesWithinKeyConfig.storageAllResults}}const xg=new Tg(fg),Cg=({onChange:e,cancelSuggestions:t})=>{const[i,r]=(0,n.useState)();return(0,n.useLayoutEffect)((()=>{void 0!==i&&(i.onChange(i.selectedItems),i.cancelSuggestions())}),[i]),i=>{r({selectedItems:i,onChange:e,cancelSuggestions:t})}},Ag="by-operator___J3pSE",wg="input-field___9azoz",Ig=({data:e,disabled:t,changeOperatorData:i,firstInputRef:s,onInputKeyDown:o,suggestionsState:l,fetchSuggestions:c,cancelSuggestionsQuery:d})=>{var u;const p=(0,r.useDebounce)((t=>i(Ct(xt({},e),{value:t&&t.length>0?t.join(", "):void 0}))),ip),h=Cg({cancelSuggestions:d,onChange:p}),m=(0,n.useMemo)((()=>(e=>{var t;return null!=(t=null==e?void 0:e.split(",").map((e=>e.trim())).filter(Boolean).map((e=>({label:e,value:e}))))?t:[]})(e.value)),[e.value]);return n.createElement("div",{className:Ag,onKeyDown:o},n.createElement(a.AutoComplete,{dataSumoTest:{input:"by-operator.value"},className:wg,label:`${r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.operators.by")}`,inlineLabel:!0,optional:!0,placeholder:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.operators.byPlaceholder"),multiselect:!0,dense:!0,loading:l.isLoading,error:l.error,selectedItems:m,items:null!=(u=l.data)?u:[],onSelectedItemsChange:e=>{h((0,S.Z)((0,b.Z)(e,"value")))},onSearchTextChange:t=>{var i;!t||(null==(i=e.value)?void 0:i.includes(t))||c(t)},onIsOpenChange:e=>{e?c(""):d()},isFilteringEnabled:!1,flexibleWidth:!1,disabled:t,clearable:!0,inputRef:s}))},Rg="fill-missing-operator___Sz50a",Dg="input-field___OoIvA",Og="select-field___RPbtm",Ng=e=>{switch(e){case le.FillMissingPolicyKey.fixed:return{type:e};case le.FillMissingPolicyKey.empty:case le.FillMissingPolicyKey.interpolation:case le.FillMissingPolicyKey.last:return{type:e}}},Mg=()=>({key:le.Operator.FillMissing,policy:{type:le.FillMissingPolicyKey.interpolation}}),kg=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{const{policy:l}=e,[c,d]=(0,n.useState)("fixed"===l.type?l.value:void 0),u=(0,r.useDebounce)((e=>s({key:le.Operator.FillMissing,policy:{type:le.FillMissingPolicyKey.fixed,value:e}})),ip);return n.createElement("div",{className:Rg},n.createElement(a.Select,{selectProps:{inputRef:o},className:Og,value:l.type,disabled:t,handleChange:e=>s({key:le.Operator.FillMissing,policy:Ng(e.target.value)})},Object.keys(le.FillMissingPolicyKey).map((e=>n.createElement(a.Select.Item,{value:e,key:e},e)))),l.type===le.FillMissingPolicyKey.fixed&&n.createElement(a.TextField,{className:Dg,fullWidth:!1,disabled:t,value:void 0===c||Number.isNaN(c)?"":c,placeholder:"50",type:"number",onKeyDown:i,onChange:e=>{const t=parseFloat(e.target.value);d(t),!isNaN(t)&&u(t)}}))},Lg="filter-operator___Y4XVg",Pg="input-field___dORrC",Fg="select-field___WJNmW",Ug=new Set([le.Aggregator.avg,le.Aggregator.min,le.Aggregator.max,le.Aggregator.sum,le.Aggregator.count,le.Aggregator.latest]),Vg=()=>({key:le.Operator.Filter,aggregator:[...Ug][0],operation:[...Object.values(qo)][0].operator}),Bg=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{const{aggregator:l,operation:c}=e,[d,u]=(0,n.useState)(e.value),p=(0,r.useDebounce)((t=>s(Ct(xt({},e),{key:le.Operator.Filter,value:t}))),ip);return n.createElement("div",{className:Lg},n.createElement(a.Select,{className:Fg,value:l||"",disabled:t,handleChange:t=>s(Ct(xt({},e),{key:le.Operator.Filter,aggregator:t.target.value}))},[...Ug].map((e=>n.createElement(a.Select.Item,{value:e,key:e},e)))),n.createElement(a.Select,{className:Fg,value:c||"",disabled:t,handleChange:t=>s(Ct(xt({},e),{key:le.Operator.Filter,operation:t.target.value}))},Object.values(qo).map((e=>n.createElement(a.Select.Item,{value:e.operator,key:e.operator},e.label)))),n.createElement(a.TextField,{"data-sumo-test":"filter-operator.value",className:Pg,fullWidth:!1,disabled:t,value:null!=d?d:"",placeholder:"50",type:"number",onKeyDown:i,inputProps:{ref:o,step:.01},onChange:e=>{const t=parseFloat(e.target.value);u(t),!isNaN(t)&&p(t)}}))},$g="free-text-operator___Jka-o",Hg="text-field___zmOxN",Wg="time-shift___Vh8a0",qg="parse-eval___rZYaA",jg=e=>{switch(e){case le.Operator.TimeShift:return"10s";case le.Operator.Eval:return"_value * 100";default:return""}},Qg=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{const[l,c]=(0,n.useState)(e.value),d=(0,r.useDebounce)((t=>s(Ct(xt({},e),{value:t}))),ip);return n.createElement("div",{className:$g},n.createElement(a.TextField,{"data-sumo-test":"free-text-operator.value",className:ue(Hg,e.key===le.Operator.TimeShift?Wg:qg),value:l||"",disabled:t,onKeyDown:i,onChange:e=>{c(e.target.value),d(e.target.value)},placeholder:jg(e.key),type:"text",inputProps:{ref:o}}))},zg="container___unLmn",Gg="value-input-field___JLrVw",Kg=()=>({key:le.Operator.HistogramQuantile}),Yg=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{const[l,c]=(0,n.useState)(e.value),d=(0,r.useDebounce)((t=>s(Ct(xt({},e),{key:le.Operator.HistogramQuantile,value:t}))),ip);return n.createElement("div",{className:zg},n.createElement(a.Input,{"data-sumo-test":"histogram-quantile-operator.value",className:Gg,disabled:t,value:null!=l?l:"",placeholder:"0",type:"number",inputProps:{min:0,max:1,ref:o,step:.01},onKeyDown:i,onChange:e=>{const t=parseFloat(e.target.value);c(t),!isNaN(t)&&d(t)}}))},Zg="container___ImAWA",Xg="text-field___PkDP7",Jg=()=>({key:le.Operator.Outlier,direction:le.OperatorDirection.BOTH}),ey=n.memo((({data:e,disabled:t,changeOperatorData:i,firstInputRef:s,onInputKeyDown:o})=>{const[l,c]=(0,n.useState)(e.window),[d,u]=(0,n.useState)(e.threshold),p=(0,r.useDebounce)((t=>i(Ct(xt({},e),{key:le.Operator.Outlier,window:t}))),ip),h=(0,r.useDebounce)((t=>i(Ct(xt({},e),{key:le.Operator.Outlier,threshold:t}))),ip);return n.createElement("div",{className:Zg},n.createElement(a.Select,{ref:s,"data-sumo-test":"direction-operator.value",disabled:t,value:e.direction,handleChange:t=>{(t=>{i(Ct(xt({},e),{key:le.Operator.Outlier,direction:t}))})(t.target.value)},inline:!0,label:r.i18nUtil.get("sharedAnalytics.operators.direction")},Object.values(le.OperatorDirection).map((e=>n.createElement(a.Select.Item,{"data-sumo-test":"direction-operator.value-item",key:e,value:e,dense:!0},e)))),n.createElement(a.TextField,{"data-sumo-test":"window-operator.value",label:r.i18nUtil.get("sharedAnalytics.operators.window"),fullWidth:!1,inline:!0,className:Xg,value:null!=l?l:"",disabled:t,onKeyDown:o,onChange:e=>{c(e.target.value),p(e.target.value)},placeholder:"5m",type:"text"}),n.createElement(a.TextField,{"data-sumo-test":"threshold-operator.value",label:r.i18nUtil.get("sharedAnalytics.operators.threshold"),fullWidth:!1,inline:!0,className:Xg,value:null!=d?d:"",disabled:t,onKeyDown:o,onChange:e=>{const t=parseFloat(e.target.value);u(t),!isNaN(t)&&h(t)},placeholder:"3",type:"number",inputProps:{min:.01,step:.01}}))})),ty="percentile-operator___To4Ff",iy="value-input-field___asI20",ry="by-input-field___IPobN",ny=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{const[l,c]=(0,n.useState)(e.value),[d,u]=(0,n.useState)(e.by),p=(0,r.useDebounce)((t=>s(Ct(xt({},e),{key:le.Operator.Percentile,value:t}))),ip),h=(0,r.useDebounce)((t=>s(Ct(xt({},e),{key:le.Operator.Percentile,by:t}))),ip);return n.createElement("div",{className:ty},n.createElement(a.TextField,{className:iy,disabled:t,value:l||"",placeholder:"50",type:"number",onKeyDown:i,onChange:e=>{const t=parseFloat(e.target.value);c(t),!isNaN(t)&&p(t)},inputProps:{ref:o}}),n.createElement(a.TextField,{className:ry,disabled:t,value:d||"",placeholder:r.i18nUtil.get("sharedAnalytics.node"),label:r.i18nUtil.get("sharedAnalytics.by"),inline:!0,type:"text",onKeyDown:i,onChange:e=>{u(e.target.value),h(e.target.value)}}))},ay="field___ZF--T",sy=()=>({key:le.Operator.Rate,policy:le.RatePolicy.All}),oy=n.memo((({data:e,disabled:t,changeOperatorData:i,firstInputRef:r})=>{const{policy:s}=e;return n.createElement(a.Select,{className:ay,selectProps:{inputRef:r},value:s,disabled:t,handleChange:e=>i({key:le.Operator.Rate,policy:e.target.value})},Object.values(le.RatePolicy).map((e=>n.createElement(a.Select.Item,{value:e,key:e},e))))})),ly=new Set([le.TimesliceOperation.avg,le.TimesliceOperation.count,le.TimesliceOperation.max,le.TimesliceOperation.min,le.TimesliceOperation.rate,le.TimesliceOperation.sum]),cy=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{const{operation:l}=e,[c,d]=(0,n.useState)(e.value),u=(0,r.useDebounce)((t=>s(Ct(xt({},e),{key:le.Operator.Timeslice,value:t}))),ip);return n.createElement("div",{className:Lg},n.createElement(a.Select,{inline:!0,className:Fg,value:l||"",disabled:t,handleChange:t=>s(Ct(xt({},e),{key:le.Operator.Timeslice,operation:t.target.value}))},[...ly].map((e=>n.createElement(a.Select.Item,{value:e,key:e},e)))),n.createElement(a.TextField,{"data-sumo-test":"timeslice-operator-value",className:Pg,fullWidth:!1,disabled:t,value:null!=c?c:"",label:r.i18nUtil.get("sharedAnalytics.codeAutocomplete.operatorsParams.over"),inline:!0,placeholder:"3m",onKeyDown:i,onChange:e=>{const t=e.target.value;d(t),u(t)}}))},dy="using-operator___WZRJk",uy="input-field___XoTMc",py=new Set([le.Aggregator.avg,le.Aggregator.min,le.Aggregator.max,le.Aggregator.sum,le.Aggregator.count]),hy=new Set([le.Aggregator.avg,le.Aggregator.min,le.Aggregator.max,le.Aggregator.sum,le.Aggregator.count,le.Aggregator.latest]),my=e=>e===le.Operator.Quantize?[...py,...De.currentUserHelper.hasFeatureFlag("UIMetricsQuantizeByRate")?[le.Aggregator.rate]:[]]:[...hy],gy=e=>({key:e,using:my(e)[0],value:void 0}),yy=({data:e,disabled:t,changeOperatorData:i,onInputKeyDown:s,firstInputRef:o})=>{const[l,c]=(0,n.useState)(e.value),d=(0,r.useDebounce)((t=>i(Ct(xt({},e),{value:t}))),ip);return n.createElement("div",{className:dy},e.key===le.Operator.Quantize?n.createElement(a.TextField,{className:uy,fullWidth:!1,disabled:t,value:l||"",type:"text",placeholder:"30s",onKeyDown:s,onChange:e=>{c(e.target.value),d(e.target.value)},inputProps:{ref:o}}):n.createElement(a.TextField,{className:uy,fullWidth:!1,disabled:t,value:l||"",type:"number",placeholder:"10",onKeyDown:s,onChange:e=>{const t=parseInt(e.target.value,10);c(t),d(t)},inputProps:{ref:o}}),n.createElement(a.Select,{value:e.using||"",disabled:t,handleChange:t=>i(Ct(xt({},e),{using:t.target.value})),inline:!0,label:r.i18nUtil.get("sharedAnalytics.operators.using")},my(e.key).map((e=>n.createElement(a.Select.Item,{value:e,key:e},e)))))},vy=({data:e,disabled:t,onInputKeyDown:i,changeOperatorData:s,firstInputRef:o})=>{var l;const{operation:c}=e,[d,u]=(0,n.useState)(null==(l=e.value)?void 0:l.toString()),p=(0,r.useDebounce)((t=>s(Ct(xt({},e),{key:le.Operator.Where,value:t}))),ip);return n.createElement("div",{className:Lg},n.createElement(a.Select,{inline:!0,label:r.i18nUtil.get("sharedAnalytics.codeAutocomplete.operatorsParams.underscoreValue"),className:Fg,value:c||"",disabled:t,handleChange:t=>s(Ct(xt({},e),{key:le.Operator.Where,operation:t.target.value}))},Object.values(qo).map((e=>n.createElement(a.Select.Item,{value:e.operator,key:e.operator},e.label)))),n.createElement(a.TextField,{"data-sumo-test":"where-operator-value",className:Pg,fullWidth:!1,disabled:t,value:null!=d?d:"",placeholder:"50",type:"number",onKeyDown:i,inputProps:{ref:o},onChange:({target:{value:e}})=>{u(e);const t=parseFloat(e);isNaN(t)||p(t)}}))},fy="operatorSelect___M0rAC",_y="operatorSelectItem___j-HZr",Sy=({selectedOperatorData:e,disabled:t,changeOperatorData:i,onInputKeyDown:r,resetOperatorData:s,shouldAutoFocusOperatorInputRef:o,suggestionsState:l,fetchSuggestions:c,cancelSuggestionsQuery:d,selectableOperators:u})=>{const p=(0,n.useRef)(null),h=(0,n.useMemo)((()=>{switch(e.key){case le.Operator.Rate:return n.createElement(oy,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p});case le.Operator.Delta:case le.Operator.Accum:return null;case le.Operator.Outlier:return n.createElement(ey,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Filter:return n.createElement(Bg,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Avg:case le.Operator.Count:case le.Operator.Max:case le.Operator.Min:case le.Operator.Sum:case le.Operator.StandardDeviation:return n.createElement(Ig,{data:e,disabled:t,changeOperatorData:i,suggestionsState:l,fetchSuggestions:c,cancelSuggestionsQuery:d,firstInputRef:p,onInputKeyDown:r});case le.Operator.Percentile:return n.createElement(ny,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Eval:case le.Operator.Parse:case le.Operator.TimeShift:return n.createElement(Qg,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Quantize:case le.Operator.Bottomk:case le.Operator.Topk:return n.createElement(yy,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.FillMissing:return n.createElement(kg,{data:e,disabled:t,changeOperatorData:i,onInputKeyDown:r,firstInputRef:p});case le.Operator.HistogramQuantile:return n.createElement(Yg,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Where:return n.createElement(vy,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Ewma:return n.createElement(Ap,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r});case le.Operator.Timeslice:return n.createElement(cy,{data:e,disabled:t,changeOperatorData:i,firstInputRef:p,onInputKeyDown:r})}}),[r,d,i,t,c,e,l]);ag({shouldAutoFocus:o,elemRef:p});const m=(0,n.useCallback)((t=>{const r={key:t.target.value};Ry(e)&&Ry(r)?i(Dy(e,r)):s(r.key)}),[i,s,e]);return n.createElement(n.Fragment,null,n.createElement(a.Select,{selectProps:xt({"data-sumo-test":"operator-select"},!h&&{inputRef:p}),value:e.key,disabled:t,handleChange:m,classes:{paper:fy}},u.map((e=>n.createElement(a.Select.Item,{value:e.operator,key:e.operator,dense:!0,"data-sumo-test":`operator-select-item-${e.operator}`},n.createElement(Py,{config:e},n.createElement("span",{className:_y},e.fullName)))))),h)},by={isLoading:!1},Ey=()=>e=>e.pipe((0,Le.l)("CancelSuggestionsQuery")),Ty=e=>t=>(0,Fe.T)((e=>e.pipe((0,Le.l)("FetchSuggestionsIntent"),(0,r.debounceTimeOrCancel)(Ku,(()=>e.pipe(Ey()))),(0,We.U)((({payload:e})=>({type:"FetchSuggestionsRequest",payload:e})))))(t),(e=>t=>t.pipe((0,Le.l)("FetchSuggestionsRequest"),(0,Qe.w)((({payload:{term:i,timeRange:n,queryData:a,variables:s}})=>{const{startTime:o,endTime:l}=Ie.timeRangeUtil.parseTimeRangeDetails(n),c=jp([...a.filters,...Im(a)],s);return e.searchKeys({term:i,filters:wm(c),range:[(0,r.ensureDefined)(o),(0,r.ensureDefined)(l)]}).pipe((0,We.U)((({result:e})=>({type:"FetchSuggestionsSuccess",suggestions:Ip(e.keysWithCount.map((e=>e.name)))}))),(0,He.K)((0,r.ifSumoErrorResponse)((e=>(0,Pe.of)({type:"FetchSuggestionsFailure",errorMessage:e.errors[0].message})))),(0,ze.R)(t.pipe(Ey())))}))))(e)(t)),xy=(e,t)=>{switch(t.type){case"FetchSuggestionsRequest":return{isLoading:!0};case"FetchSuggestionsSuccess":return(e=>({isLoading:!1,data:e.suggestions,error:void 0}))(t);case"FetchSuggestionsFailure":return(e=>({isLoading:!1,data:void 0,error:e.errorMessage}))(t);case"CancelSuggestionsQuery":return{isLoading:!1};case"FetchSuggestionsIntent":return e}},Cy=({selectedOperatorData:e,disabled:t,changeOperatorData:i,resetOperatorData:r,timeRange:a,queryData:s,onInputKeyDown:o,variables:l,shouldAutoFocusOperatorInputRef:c})=>{const[d,u]=sg(by,xy,Ty(xg)),p=(0,n.useCallback)((e=>u({type:"FetchSuggestionsIntent",payload:{term:e,timeRange:a,queryData:s,variables:l}})),[u,s,a,l]),h=(0,n.useCallback)((()=>u({type:"CancelSuggestionsQuery"})),[u]);return n.createElement(Sy,{selectedOperatorData:e,disabled:t,changeOperatorData:i,resetOperatorData:r,shouldAutoFocusOperatorInputRef:c,suggestionsState:d,fetchSuggestions:p,onInputKeyDown:o,cancelSuggestionsQuery:h,selectableOperators:Qo})},Ay=e=>{switch(e.key){case le.Operator.Accum:case le.Operator.Delta:case le.Operator.Rate:return!0;case le.Operator.Outlier:case le.Operator.Avg:case le.Operator.Count:case le.Operator.Max:case le.Operator.Min:case le.Operator.Sum:case le.Operator.StandardDeviation:case le.Operator.Ewma:return!0;case le.Operator.FillMissing:return e.policy.type!==le.FillMissingPolicyKey.fixed||void 0!==e.policy.value;case le.Operator.Filter:return Boolean(e.operation&&e.aggregator)&&void 0!==e.value;case le.Operator.Percentile:return Boolean(e.value);case le.Operator.Quantize:return Boolean(e.using);case le.Operator.Topk:case le.Operator.Bottomk:return Boolean(e.value&&e.using);case le.Operator.TimeShift:case le.Operator.Eval:case le.Operator.Parse:return Boolean(e.value);case le.Operator.HistogramQuantile:return void 0!==e.value;case le.Operator.Where:return Boolean(e.operation)&&void 0!==e.value;case le.Operator.Timeslice:return e.operation&&void 0!==e.value}},wy=e=>{switch(e){case le.Operator.Filter:return Vg();case le.Operator.Quantize:case le.Operator.Topk:case le.Operator.Bottomk:return gy(e);case le.Operator.FillMissing:return Mg();case le.Operator.HistogramQuantile:return Kg();case le.Operator.Outlier:return Jg();case le.Operator.Rate:return sy();case le.Operator.Where:return{key:le.Operator.Where,operation:[...Object.values(qo)][0].operator};case le.Operator.Ewma:return{key:le.Operator.Ewma,parameter:"span"};case le.Operator.Timeslice:return{key:le.Operator.Timeslice,operation:[...ly][0]};case le.Operator.Accum:case le.Operator.Delta:case le.Operator.Avg:case le.Operator.Count:case le.Operator.Max:case le.Operator.Min:case le.Operator.Sum:case le.Operator.StandardDeviation:case le.Operator.Percentile:case le.Operator.TimeShift:case le.Operator.Eval:case le.Operator.Parse:return{key:e}}},Iy={[le.Operator.Sum]:!0,[le.Operator.Avg]:!0,[le.Operator.Min]:!0,[le.Operator.Max]:!0,[le.Operator.Count]:!0,[le.Operator.StandardDeviation]:!0};const Ry=e=>function(e,t){return t.hasOwnProperty(e)}(e.key,Iy),Dy=(e,t)=>({key:t.key,value:e.value}),Oy=[le.Operator.Accum,le.Operator.Avg,le.Operator.Bottomk,le.Operator.Count,le.Operator.Delta,le.Operator.Eval,le.Operator.Ewma,le.Operator.FillMissing,le.Operator.Filter,le.Operator.HistogramQuantile,le.Operator.Max,le.Operator.Min,le.Operator.Outlier,le.Operator.Parse,le.Operator.Percentile,le.Operator.Quantize,le.Operator.Rate,le.Operator.StandardDeviation,le.Operator.Sum,le.Operator.TimeShift,le.Operator.Topk,le.Operator.Where],Ny="operatorHint___5YrD2",My="documentationLink___8116Z",ky=e=>{const t=`sharedAnalytics.metricsQueryBuilder.operators.${e}`;return{code:r.i18nUtil.get(`${t}.code`),description:r.i18nUtil.get(`${t}.description`)}},Ly="https://help.sumologic.com/Metrics/Metric-Queries-and-Alerts/07Metrics_Operators",Py=({config:e,children:t})=>{const{code:i,description:s}=ky(e.fullName);if(!i)throw new Error(`Code for operator ${e.fullName} not defined`);if(!s)throw new Error(`Description for operator ${e.fullName} not defined`);const o=n.createElement("div",{className:Ny},n.createElement(a.Text,{variant:"textSmallHeavy"},e.fullName),n.createElement(a.Text,{variant:"code"},i),n.createElement(a.Text,{variant:"textSmall",noWrap:!1},s),Oy.includes(e.operator)&&n.createElement(a.TextLink,{external:!0,fontType:"small",href:`${Ly}/${e.operator}`,className:My},r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.operators.documentation"))),[l,c]=n.useState({}),d=n.useCallback((e=>()=>{c(e)}),[]);return n.createElement(a.Tooltip,{onOpen:d({"data-sumo-test":`tooltip.operator.${e.operator}`}),onClose:d({}),title:o,placement:"right",key:e.operator,debounced:!0,interactive:!0,leaveDelay:200,enterNextDelay:200},n.cloneElement(t,l))},Fy="operatorTooltip___x7RjD",Uy="fullName___sG2kL",Vy="code___Fs6HG",By="description___SFR1U",$y="documentationLink___sNDFz",Hy="categoryOperator___CAT7q",Wy="categoryActivePart___pMWgl",qy=e=>jy("div",e),jy=(e,{innerText:t,className:i}={})=>{const r=document.createElement(e);return i&&(r.className=i),t&&(r.innerText=t),r},Qy=(e,t,i={})=>{const r=qy(),n=jy("span",{innerText:e===le.Operator.Quantize?`${e} to`:e,className:Hy}),a=(e,r=!1)=>jy("span",{innerText:i[e]?` ${r?`${e}=`:""}${i[e]}`:` <${e}>`,className:t===e?Wy:""}),s=jy("span",{innerText:" by <dimension>",className:"by"===t?Wy:""});switch(e){case le.Operator.FillMissing:case le.Operator.Rate:r.append(n,a("policy"));break;case le.Operator.Eval:case le.Operator.Parse:r.append(n,a("expression"));break;case le.Operator.Percentile:r.append(n,"(",a("value"),")",s);break;case le.Operator.Bottomk:case le.Operator.Topk:{const e=a("value"),t=a("using");r.append(n,"(",e,", ",t,")",s);break}case le.Operator.HistogramQuantile:r.append(n,a("value"));break;case le.Operator.TimeShift:r.append(n,a("time"));break;case le.Operator.Outlier:{const e=a("direction",!0),t=a("window",!0),i=a("threshold",!0);r.append(n,e,t,i);break}case le.Operator.Ewma:{const e=[n];i.span?e.push(a("span",!0)):i.alpha?e.push(a("alpha",!0)):e.push(jy("span",{innerText:" <span | alpha>",className:Wy})),r.append(...e);break}case le.Operator.Quantize:{const e=a("time"),t=a("rollup");r.append(n,e," using",t);break}case le.Operator.Filter:{const e=a("aggregator"),t=a("operation"),i=a("value");r.append(n,e,t,i);break}case le.Operator.Where:{const e=jy("span",{innerText:"_value",className:"underscoreValue"===t?Wy:""}),i=a("operation"),s=a("value");r.append(n,e,i,s);break}case le.Operator.Timeslice:{const e=jy("span",{innerText:" over",className:"over"===t?Wy:""}),i=a("operation"),s=a("value");r.append(n,i,e,s);break}default:r.append(n,s)}return r},zy=e=>{const t=(e=>{const t=Object.values(le.Operator).indexOf(e);if(-1===t)return;const i=Object.keys(le.Operator)[t];return le.Operator[i]})(e);if(!t)return;const i=jo[t],{code:n,description:a}=ky(i.fullName),s=qy({className:Uy,innerText:i.fullName}),o=qy({className:Vy,innerText:n}),l=qy({className:By,innerText:a}),c=jy("div",{className:$y}),d="pop-out";c.innerHTML=`\n  <a href="${(e=>`${Ly}/${e}`)(t)}" target="_blank">\n${et.sanitize(r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.operators.documentation"))}\n  </a>\n  <svg data-component="Icon" data-icon="${d}">\n    <use xlink:href="#bundle_${d}"></use>\n  </svg>\n`;const u=qy({className:Fy});return u.append(s,o,l,...Oy.includes(t)?[c]:[]),u},Gy=e=>{if(Zy(e)){const[t]=e.split("=");return{key:t.trim(),value:""}}const[t,...i]=e.split("=").map((e=>e.trim()));return{key:t,value:i.join("=")}},Ky=e=>e.match(/[^\s]\s$/)&&-1===e.indexOf("="),Yy=(e,t)=>{const i=e.substring(0,t),r=e.substring(t);return i.match(/^[^=]*=\s*\(.*$/)&&r.match(/^.*\)$/)},Zy=e=>e.match(/^.+=\s*\(\s*\)\s*$/),Xy=e=>e.match(/^.+=\s*\(.*\)$/),Jy=e=>({markStart:t=>{var i,r,n;return de.basicPerformanceMeasurement.createMark({id:`queryBuilder_${e}_fetching_${t}`,module:null!=(n=null==(r=null==(i=Re.applicationState)?void 0:i.current)?void 0:r.name)?n:"",component:`queryBuilder_${e}`,action:"view_queryBuilder",checkpoint:"start_fetching"})},measureFinish:(t,i)=>de.basicPerformanceMeasurement.measure({id:`queryBuilder_${e}_fetching_${t}`,name:"fetch_data",from:"start_fetching",to:"finish_fetching",metadata:{is_cached:i}})}),ev=Jy("filter_selector"),tv=e=>{const t=Pm(e.term);return Ct(xt({},iv(e)),{key:"SearchValues"===t.type?t.selectedKey:"",term:"SearchValues"===t.type?t.valueSearchTerm:""})},iv=({term:e,timeRange:t,queryData:i,variables:r,hasUnexpectedTokenError:n,overridingFilters:a})=>{const{startTime:s,endTime:o}=Ie.timeRangeUtil.parseTimeRangeDetails(t),l=[s,o],c=jp(n?[]:a||[...Im(i),...i.filters],r);return{term:e,filters:wm(c),range:l}},rv=(e,t)=>({data:km({values:t.valuesWithCount.map((({name:e})=>e)),term:e.term,variables:e.variables,exhaustive:t.exhaustive,range:e.range,completeQuery:e.completeQuery,suffix:e.suffix}),term:e.term,exhaustive:t.exhaustive}),nv=(e,t)=>{var i;const r=Lm({keys:t.keysWithCount.map((({name:e})=>e)),queryData:e.queryData,allowDuplicateKeys:e.allowDuplicateKeys,exhaustive:t.exhaustive,suffix:null!=e.suffix?e.suffix:"",category:e.category||void 0}),n=(null==(i=e.metadata)?void 0:i.operator)&&e.category?Qy(e.metadata.operator,"by",e.metadata.params):void 0;return{data:r,categoriesNodes:n?{[e.category]:n}:void 0,term:e.term,exhaustive:t.exhaustive}},av=(e,t)=>"SearchValues"===Pm(e.term).type?t.areValuesWithinKeyCached(tv(e)):t.areKeysCached(iv(e)),sv=(e,t)=>{var i,r;if(!De.currentUserHelper.hasFeatureFlag("UIQueryBuilderSuggestionsFromMemory")||null==t||!t.exhaustive||null==(i=null==t?void 0:t.data)||!i.length)return!1;const n=Pm(null!=(r=null==t?void 0:t.term)?r:""),a=Pm(e),s="SearchKeys"===a.type?a.keySearchTerm:a.valueSearchTerm,o="SearchKeys"===n.type?n.keySearchTerm:n.valueSearchTerm;return""!==s&&n.type===a.type&&s.startsWith(null!=o?o:"")&&("SearchKeys"===a.type||a.selectedKey===n.selectedKey)&&t.data.some((({label:e})=>e.toLowerCase().includes(s.toLowerCase())))},ov=e=>e.pipe((0,Ge.h)((({type:e})=>"CancelFilterSuggestionsQuery"===e))),lv=e=>(t,i)=>(0,Fe.T)((e=>(t,i)=>t.pipe((0,Le.l)("FetchFilterSuggestionsOnInputIntent"),(0,Ke.M)(i),(0,We.U)((([{payload:t},{suggestions:i}])=>sv(t.term,i)?{type:"FetchFilterSuggestionsFromTimeSeries",payload:t}:{type:"FetchFilterSuggestions",payload:Ct(xt({},t),{isResultInCache:av(t,e)})}))))(e)(t,i),(e=>(t,i)=>t.pipe((0,Le.l)("FetchFilterSuggestionsOnFocusIntent"),(0,Ke.M)(i),(0,We.U)((([{payload:t},{suggestions:i}])=>sv(t.term,i)?{type:"FetchFilterSuggestionsFromTimeSeries",payload:t}:{type:"FetchFilterSuggestionsRequest",payload:Ct(xt({},t),{isResultInCache:av(t,e)})}))))(e)(t,i),(e=>t=>t.pipe((0,Le.l)("FetchFilterSuggestionsRequest"),(0,Qe.w)((({payload:i})=>(ev.markStart(i.rowKey),("SearchValues"===Pm(i.term).type?e.searchValuesWithinKey(tv(i)).pipe((0,qe.b)((({wasResultInCache:e})=>{ev.measureFinish(i.rowKey,e)})),(0,We.U)((({result:e})=>({type:"FetchFilterSuggestionsSuccess",suggestions:rv(i,e)})))):(0,Fe.T)(e.searchKeys(iv(i)).pipe((0,qe.b)((({wasResultInCache:e})=>{ev.measureFinish(i.rowKey,e)})),(0,We.U)((({result:e})=>({type:"FetchFilterSuggestionsSuccess",suggestions:nv(i,e)})))))).pipe((0,He.K)((0,r.ifSumoErrorResponse)((e=>(0,Pe.of)({type:"FetchFilterSuggestionsFailure",errorMessage:e.errors[0].message})))),(0,ze.R)(ov(t))))))))(e)(t),(e=>e.pipe((0,Le.l)("SelectFilterSuggestion"),(0,We.U)((()=>({type:"CancelFilterSuggestionsQuery"})))))(t),(e=>t=>t.pipe((0,Le.l)("PreloadFilterCache"),(0,Qe.w)((({payload:t})=>e.searchKeys(iv(t)))),(0,Ye.l)()))(e)(t),(e=>t=>t.pipe((0,Le.l)("FetchFilterSuggestions"),(0,Qe.w)((i=>Ue.y.create((e=>{e.next(i)})).pipe((0,r.debounceTimeOrCancel)(wp(av(i.payload,e)),(()=>ov(t))),(0,We.U)((({payload:e})=>({type:"FetchFilterSuggestionsRequest",payload:e}))),(0,ze.R)(ov(t)))))))(e)(t),(e=>e.pipe((0,Le.l)("SelectFilterSuggestion"),(0,We.U)((e=>({type:"FilterItemsSelected",selectedItems:e.selectedItems.flatMap((e=>{if(void 0===e.value)return[];const{key:t,value:i}=Gy(e.value);return i||Nm(e)?[{type:"NewMetricsQueryFilterByPair",key:t,value:i,negation:Boolean(e.prefixed)}]:[{type:"NewMetricsQueryFilterByValue",value:t,negation:Boolean(e.prefixed)}]}))})))))(t),(e=>e.pipe((0,Le.l)("ToggleFilterNegation"),(0,We.U)((e=>({type:"FilterNegationToggled",filterIndex:e.filterIndex})))))(t)).pipe((0,Ze.X)()),cv={isLoading:!1,selectedItems:[]},dv=(e,t)=>{switch(t.type){case"FetchFilterSuggestions":case"FetchFilterSuggestionsRequest":return((e,{payload:{isResultInCache:t}})=>Ct(xt({},e),{isLoading:!t}))(e,t);case"FetchFilterSuggestionsSuccess":return((e,{suggestions:t})=>Ct(xt({},e),{isLoading:!1,suggestions:t,error:void 0}))(e,t);case"FetchFilterSuggestionsFailure":return((e,t)=>Ct(xt({},e),{isLoading:!1,suggestions:void 0,error:t.errorMessage}))(e,t);case"CancelFilterSuggestionsQuery":return(e=>Ct(xt({},e),{isLoading:!1}))(e);case"SelectFilterSuggestion":case"UpdateSelectedItems":return((e,t)=>Ct(xt({},e),{selectedItems:t.selectedItems}))(e,t);case"FetchFilterSuggestionsFromTimeSeries":return((e,{payload:{term:t,variables:i,queryData:r,allowDuplicateKeys:n,suffix:a,range:s,completeQuery:o}})=>{const l=Pm(t);if("SearchValues"===l.type){const r=e.suggestions.data.map((e=>{var t;return null!=(t=e.suggestionsLabel)?t:""})).filter((e=>void 0!==e&&e.toLowerCase().includes(l.valueSearchTerm.toLowerCase())));return Ct(xt({},e),{isLoading:!1,error:void 0,suggestions:{data:km({values:r,term:t,variables:i,exhaustive:!0,range:s,completeQuery:o,suffix:a}),term:t,exhaustive:!0}})}{const i=e.suggestions.data.map((e=>e.label)).filter((e=>void 0!==e&&e.toLowerCase().includes(l.keySearchTerm.toLowerCase())));return Ct(xt({},e),{isLoading:!1,error:void 0,suggestions:{data:Lm({keys:i,queryData:r,allowDuplicateKeys:n,exhaustive:!0,suffix:""}),term:t,exhaustive:!0}})}})(e,t);case"FetchFilterSuggestionsOnFocusIntent":case"PreloadFilterCache":case"ToggleFilterNegation":case"FilterItemsSelected":case"FilterNegationToggled":case"FetchFilterSuggestionsOnInputIntent":return e}},uv="AUTOCOMPLETE_HINT",pv=["avg","min","max","sum","count","latest"],hv=["avg","min","max","sum","count","rate"],mv={[le.Operator.Accum]:{},[le.Operator.Avg]:{},[le.Operator.Bottomk]:{suffix:"()",moveCursor:-2},[le.Operator.Count]:{},[le.Operator.Delta]:{},[le.Operator.Eval]:{},[le.Operator.FillMissing]:{},[le.Operator.Filter]:{},[le.Operator.HistogramQuantile]:{},[le.Operator.Max]:{},[le.Operator.Min]:{},[le.Operator.Outlier]:{},[le.Operator.Parse]:{},[le.Operator.Percentile]:{suffix:"()",moveCursor:-2},[le.Operator.Quantize]:{suffix:" to"},[le.Operator.Rate]:{},[le.Operator.Sum]:{},[le.Operator.TimeShift]:{},[le.Operator.Topk]:{suffix:"()",moveCursor:-2}},gv=()=>{const e=xt({},mv);return De.currentUserHelper.hasFeatureFlag("UIMetricsStdDevOperator")&&(e[le.Operator.StandardDeviation]={}),De.currentUserHelper.hasFeatureFlag("UIMetricsWhereOperator")&&(e[le.Operator.Where]={suffix:" _value"}),De.currentUserHelper.hasFeatureFlag("UIMetricsTimesliceOperator")&&(e[le.Operator.Timeslice]={}),De.currentUserHelper.hasFeatureFlag("UIMetricsEwmaOperator")&&(e[le.Operator.Ewma]={}),e},yv=[le.Operator.Accum,le.Operator.Delta],vv=[le.Operator.Bottomk,le.Operator.Eval,le.Operator.FillMissing,le.Operator.Filter,le.Operator.HistogramQuantile,le.Operator.Outlier,le.Operator.Parse,le.Operator.Percentile,le.Operator.Quantize,le.Operator.Rate,le.Operator.TimeShift,le.Operator.Topk,le.Operator.Where,le.Operator.Ewma,le.Operator.Timeslice],fv={label:"",value:"",categories:[uv]},_v=e=>Ct(xt({},fv),{suggestionsLabel:r.i18nUtil.get(`sharedAnalytics.codeAutocomplete.operatorsParams.${e}`)});class Sv extends _r{constructor(e){super(),this.caretPosition=e}static getNodeRange(e,t=!0){var i;return _r.isTerminalNode(e)?{start:e.symbol.startIndex,end:e.symbol.stopIndex}:{start:e.start.startIndex,end:t?e.start.startIndex+e.text.length:(null!=(i=e.stop)?i:e.start).stopIndex}}defaultResult(){}aggregateResult(e,t){return"NoResult"===(null==e?void 0:e.type)?e:"NoResult"===(null==t?void 0:t.type)?t:"Filters"===(null==e?void 0:e.type)&&"Filters"===(null==t?void 0:t.type)?{type:"Filters",filters:e.filters.concat(t.filters)}:"Filters"!==(null==e?void 0:e.type)||"Key"!==(null==t?void 0:t.type)&&"ValueWithinKey"!==(null==t?void 0:t.type)?"Filters"!==(null==t?void 0:t.type)||"Key"!==(null==e?void 0:e.type)&&"ValueWithinKey"!==(null==e?void 0:e.type)?null!=t?t:e:Ct(xt({},e),{filters:e.filters.concat(t.filters)}):Ct(xt({},t),{filters:t.filters.concat(e.filters)})}visitTerminal(e){if(this.isWithinCaretPosition(e)&&this.isSingleSpaceAfterDimensionKey(e))return{type:"Comparators",range:{start:this.caretPosition-1,end:this.caretPosition-1}}}visitOrExpAsSelectorBoolExp(e){var t;const i=null!=(t=e.children)?t:[];if(!i.some((e=>e instanceof Ae.TerminalNode&&"or"===e.text.toLowerCase())))return this.visitChildren(e);const r=i.find((e=>this.isWithinCaretPosition(e))),n=i.length>0&&(i[0]instanceof Ae.TerminalNode||i[i.length-1]instanceof Ae.TerminalNode);return r?r.accept(this):n?{type:"Key",filters:[],key:"",range:{start:this.caretPosition,end:this.caretPosition}}:{type:"Filters",filters:[{key:"",value:e.text,negation:!1}]}}visitAndExpAsSelectorBoolTerm(e){var t;let i;const r=null!=(t=e.children)?t:[];let n=0;for(;n<r.length;){const e=r[n],t=r[n+1];if(t&&t.text.startsWith("=")&&this.isBeforeCaret(t)){const r=e.childCount?e:e.parent;if(r){const e=_r.findNode(r,(e=>e instanceof Nr)),n=Sv.getNodeRange(t);i=this.aggregateResult(i,{type:"ValueWithinKey",key:e.text,value:"",filters:[],range:{start:n.start+1,end:n.end+1}})}n+=2}else if(e instanceof Dr){const t=_r.findNode(e,(e=>"!"===e.text));if(t&&this.isAfterCaret(t)){i=this.aggregateResult(i,{type:"NoResult"});break}if(this.isWithinCaretPosition(e))i=this.aggregateResult(i,e.accept(this));else{const t=_r.findNode(e,(e=>e instanceof Nr));if(t){const[e,r]=t.text.split("=");i=this.aggregateResult(i,{type:"Filters",filters:[{key:r?e:"",value:r||e,negation:!0}]})}}n+=1}else i=this.aggregateResult(i,e.accept(this)),n+=1}return i}visitDimensionSelector(e){var t,i,r,n;const a=null==(t=e.children)?void 0:t.find((e=>e instanceof Br)),s=null==(i=e.children)?void 0:i.find((e=>e instanceof Wr)),o=null==(r=e.children)?void 0:r.find((e=>e instanceof qr));if(a&&s&&this.isWithinCaretPosition(s))return{type:"ValueWithinKey",key:a.text,value:s.text,filters:[],range:Sv.getNodeRange(s)};if(a&&o&&this.isWithinCaretPosition(o)){const e=null!=(n=o.children)?n:[],t=e.find((e=>this.isWithinCaretPosition(e)));if(")"===(null==t?void 0:t.text))return{type:"NoResult"};const i=this.isCaretBetweenParenthesisOrCommas(e);if(t&&(!(t instanceof Ae.TerminalNode)||i)){const r=e.filter((e=>e instanceof Qr&&!this.isWithinCaretPosition(e))).map((e=>({key:a.text,value:e.text,negation:!0})));return{type:"ValueWithinKey",key:a.text,value:i?"":t.text,filters:r,range:i?{start:this.caretPosition,end:this.caretPosition}:Sv.getNodeRange(t),metadata:{suffix:""}}}return{type:"NoResult"}}const l=null!=s?s:o;return a&&l&&!this.isWithinCaretPosition(e)?{type:"Filters",filters:[{key:a.text,value:l.text.match(/^\(\s*\)/)?"":l.text,negation:!1}]}:this.visitChildren(e)}visitMetricNameSelectorAsSelector(e){return this.isWithinCaretPosition(e)?_r.findNode(e,(e=>e instanceof Po))?this.defaultResult():{type:"Key",key:e.text,filters:[],range:Sv.getNodeRange(e)}:_r.findNode(e,(e=>e instanceof Po))?this.defaultResult():{type:"Filters",filters:[{key:"",value:e.text,negation:!1}]}}visitDimensionKey(e){return this.isWithinCaretPosition(e)?{type:"Key",key:e.text,filters:[],range:Sv.getNodeRange(e)}:this.defaultResult()}visitParenExpAsSelectorBoolFactor(e){var t,i;return null!=(i=null==(t=e.children)?void 0:t.every((e=>!this.isWithinCaretPosition(e))))&&i?{type:"Filters",filters:[{key:"",value:Sv.joinTexts(e).join(" "),negation:!1}]}:this.visitChildren(e)}visitQueryClause(){return this.defaultResult()}getNextNotWhitespaceChild(e,t){let i=t+1;for(;i<e.length;){if(" "!==e[i].text)return e[i];i++}}getPrevNotWhitespaceChild(e,t){let i=t-1;for(;i>-1;){if(" "!==e[i].text)return e[i];i--}}isCaretBetweenParenthesisOrCommas(e){const t=e.findIndex((e=>this.isWithinCaretPosition(e))),i=" "!==e[t].text?e[t]:this.getPrevNotWhitespaceChild(e,t),r=this.getNextNotWhitespaceChild(e,t);if(!i||!r)return!1;const n=`${i.text.toLowerCase()}${r.text.toLowerCase()}`;return["(,",",)","()",",,"].includes(n)}shouldVisitNextChildWithIndex(e,t,i){if(e.childCount>1&&e instanceof Ar){const t=e.getChild(i);return this.isWithinCaretPosition(t)}return!0}isSingleSpaceAfterDimensionKey(e){if(" "!==e.text)return!1;const t=e.parent,i=t.children.findIndex((t=>t===e));if(0===i)return!1;let r=t.children[i-1];for(;r.children&&r.children.length>0;){if(r instanceof Pr&&"="!==r.text)return!0;r=r.children[r.children.length-1]}return!1}isWithinCaretPosition(e){const{start:t,end:i}=Sv.getNodeRange(e,!1);return t<=this.caretPosition&&Math.max(0,this.caretPosition-1)<=i}isBeforeCaret(e){const{start:t}=Sv.getNodeRange(e,!1);return t===this.caretPosition-1}isAfterCaret(e){const{start:t}=Sv.getNodeRange(e,!1);return t===this.caretPosition}}const bv=e=>e[e.length-1],Ev=e=>Boolean(e.symbol),Tv=e=>Ev(e)?e.symbol.startIndex:e.start.startIndex,xv=e=>{var t,i;return Ev(e)?e.symbol.stopIndex:null!=(i=null==(t=e.stop)?void 0:t.stopIndex)?i:e.start.startIndex},Cv=(e,t=!1)=>({start:Tv(e),end:xv(e)+(t?1:0)}),Av=(e,t)=>e.getChild(t),wv=(e,t,i=0,r=-1)=>{for(let r=i;r<e.childCount;r++)if(t(Av(e,r)))return r;return r},Iv=(e,t)=>{for(let i=0;i<e.childCount;i++){const r=Av(e,i);if(t(r))return r}},Rv=(e,t)=>{if(e)for(let i=0;i<e.childCount;i++){const r=Av(e,i);if(t(r))return r;{const e=Rv(r,t);if(e)return e}}},Dv=e=>Rv(e,(e=>e instanceof Kn||e instanceof Yn||e instanceof Zn||e instanceof Xn||e instanceof Jn||e instanceof ea)),Ov=(e,t,i,r=0,n=e.childCount)=>{let a=i;for(let i=r;i<=n;i++)a=t(a,e.getChild(i));return a},Nv=(e,t)=>(({text:e})=>"<EOF>"===e)(t)?e:`${e}${t.text}`,Mv=({text:e},t)=>e.substr(0,Math.min(e.length,t)).trim(),kv=(e,t,i)=>(null==e||i>e.range.end)&&i<t.range.start,Lv=(e,t)=>e.range.end===t.range.end?" ":"",Pv=(e,t,i,r)=>xt(xt({type:"Operators",text:Mv(e,t-e.range.start),range:e.range},i?{prefix:i}:{}),r?{suffix:r}:{}),Fv=(e,t,i,r,n,a)=>xt(xt(xt(xt({type:vv.includes(t.text)&&!a?"Parameters":"Fields",text:vv.includes(t.text)&&!a?e.text:Mv(e,i-e.range.start),operator:t.text,range:e.range},r?{prefix:r}:{}),n?{suffix:n}:{}),t.activeParam?{activeParam:t.activeParam}:{}),t.params?{params:t.params}:{}),Uv=(e,t,i,r,n,a)=>{var s,o;const l=vv.includes(i.text);return Fv({text:t===r?r.text:"",range:{start:e.range.end,end:t.range.end}},i,n,l&&!a?null!=(s=i.prefix)?s:" ":((e,t)=>e===t?" by ":", ")(e,i),l&&!a?null!=(o=i.suffix)?o:" ":Lv(t,r),a)};class Vv extends he.AbstractParseTreeVisitor{constructor(e){super(),this.caret=e}defaultResult(){return{}}getModifiedOperator(e){return((e,t="|")=>{const i=[],r=xv(Av(e,e.childCount-1));for(let n=e.childCount-1;n>=0;n--){const a=Av(e,n);if(a.text===t){const s=bv(i),o=xv(a)+1,l=n===e.childCount-1,c=l?null:e.childCount-1;i.push({start:o,end:s?s.start-t.length:Math.max(o,r),startNodeIndex:l?null:n+1,endNodeIndex:s&&null!=s.startNodeIndex?s.startNodeIndex-2:c})}}return i})(e).find((({start:e,end:t})=>this.caret>=e&&Math.max(0,this.caret-1)<=t))}visitSelectAsHeader(){return this.defaultResult()}visitQueryRow(e){return this.modifiedOperatorRange=this.getModifiedOperator(e),null==this.modifiedOperatorRange?this.defaultResult():this.aggregateResult(super.visitChildren(e),this.findUnrecognizedPart(e))}visitAggregateAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitAggregate(e){const t=Rv(e,(e=>e instanceof Qn));return t?t.accept(this):this.visitOperatorAsOperator(e)}visitTopBottomAsQueryClause(e){return this.isCaretInsideOperator(e)?super.visitChildren(e):this.defaultResult()}visitTopBottom(e){var t;const i={},{start:r,end:n}=Cv(e,!0),a=Rv(e,(e=>")"===e.text)),s=Rv(e,(e=>e instanceof tn)),o=Rv(e,(e=>e instanceof ks)),l=a&&this.caret>Cv(a).end;if(l){i.fields=[];const r=Iv(e,(e=>e instanceof $r));r&&(this.isWithinCaretPosition(r)||this.caret>Cv(r).end)&&(null==(t=r.children)||t.forEach((e=>{var t;const r=e.accept(this);null!=(t=r.fields)&&t.length&&i.fields.push(r.fields[0])})))}const c=xt(xt({},s?{value:s.text}:{}),o&&o.text?{using:o.text}:{}),d=Rv(e,(e=>","===e.text)),u=d?Cv(d,!0).end:void 0,p=!d||this.caret<u||!c.value?"value":"using";return this.aggregateResult(i,{operator:{params:c,activeParam:p,text:Av(e,0).text,range:{start:r,end:!l&&u?u:n},withCaretOn:this.isWithinCaretPosition(Av(e,0)),suffix:""}})}visitOutlierAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitOutlier(e){const t=Rv(e,(e=>e instanceof Ln)),i=Rv(e,(e=>e instanceof Mn)),r=Rv(i,(e=>e instanceof yn)),n=Rv(e,(e=>e instanceof kn)),a={},s=(e,t)=>{if(!t||!t.text.includes("="))return;const i=t.text.split("=");a[e]=i[1]};s("direction",t),s("window",r?i:void 0),s("threshold",n);const o=e=>{if(!e||!this.isWithinCaretPosition(e))return!1;const t=Rv(e,(e=>"="===e.text));return Boolean(t&&this.caret>Cv(t).end)},{start:l,end:c}=Cv(e),d=o(t)?"direction":o(i)?"window":o(n)?"threshold":void 0;return{operator:{params:a,activeParam:d,text:Av(e,0).text,range:{start:l,end:c+1},withCaretOn:this.isWithinCaretPosition(Av(e,0)),suffix:d?void 0:"",prefix:d?"":void 0}}}visitEwmaAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitEwma(e){const t=Rv(e,(e=>e instanceof Fn)),i=Rv(e,(e=>e instanceof Un)),r={},n=(e,t)=>{if(!t||!t.text.includes("="))return;const i=t.text.split("=");r[e]=i[1]};n("span",t),n("alpha",i);const a=e=>{if(!e||!this.isWithinCaretPosition(e))return!1;const t=Rv(e,(e=>"="===e.text));return Boolean(t&&this.caret>Cv(t).end)},{start:s,end:o}=Cv(e),l=a(t)?"span":a(i)?"alpha":void 0;return{operator:{params:r,activeParam:l,text:Av(e,0).text,range:{start:s,end:o+1},withCaretOn:this.isWithinCaretPosition(Av(e,0)),suffix:l?void 0:"",prefix:l?"":void 0}}}visitPctAsAggregatorFn(e){var t;const i={},{end:r}=Cv(e);if(this.caret>r){i.fields=[];const r=Iv(e.parent,(e=>e instanceof $r));r&&(null==(t=r.children)||t.forEach((e=>{var t;const r=e.accept(this);null!=(t=r.fields)&&t.length&&i.fields.push(r.fields[0])})))}const n=Iv(e,(e=>e instanceof sn||e instanceof ln));return this.aggregateResult(i,{operator:{params:xt({},n?{value:n.text}:{}),activeParam:"value",text:Av(e,0).text,range:Cv(e,!0),withCaretOn:this.isWithinCaretPosition(Av(e,0))}})}visitFilterAsQueryClause(e){return this.isCaretInsideOperator(e)?super.visitChildren(e):this.defaultResult()}visitFilter(e){const t=Rv(e,(e=>e instanceof Hs)),i=Rv(t,(e=>e instanceof Cs)),r=Rv(t,(e=>e instanceof js)),n=Rv(t,(e=>e instanceof Es)),a=xt(xt(xt({},i?{aggregator:i.text}:{}),r&&r.text?{operation:r.text}:{}),n?{value:n.text}:{});let s,o="",l=" ";if(!a.aggregator||this.isWithinCaretPosition(i))o="aggregator";else if(i&&this.caret>Cv(i).end&&(!a.operation||this.isWithinCaretPosition(r)))if(o="operation",a.operation){const{start:e}=Cv(r);s={start:e,end:e},l=""}else s=Cv(i,!0);else r&&this.caret>Cv(r).end&&(!a.value||this.isWithinCaretPosition(n))&&(o="value");return{operator:{params:a,activeParam:o,text:Av(e,0).text,range:null!=s?s:Cv(Av(e,0),!0),withCaretOn:this.isWithinCaretPosition(Av(e,0)),prefix:l}}}visitWhereAsQueryClause(e){return this.isCaretInsideOperator(e)?super.visitChildren(e):this.defaultResult()}visitWhere(e){var t;const i=Rv(e,(e=>e instanceof Hs)),r=Rv(i,(e=>"_value"===e.text)),n=Rv(i,(e=>e instanceof js)),a=Rv(i,(e=>e instanceof Es)),s=xt(xt({},n&&n.text?{operation:n.text}:{}),a?{value:a.text}:{}),{activeParam:o="",range:l,prefix:c=" "}=null!=(t=this.getWhereOperatorMetaData(s,r,n,a))?t:{};return{operator:{params:s,activeParam:o,text:Av(e,0).text,range:null!=l?l:Cv(Av(e,0),!0),withCaretOn:this.isWithinCaretPosition(Av(e,0)),prefix:c}}}visitTimesliceAsQueryClause(e){return this.isCaretInsideOperator(e)?super.visitChildren(e):this.defaultResult()}visitTimeslice(e){var t;const i=Dv(e),r=Rv(e,(e=>"over"===e.text)),n=Rv(e,(e=>e instanceof yn)),a=xt(xt({},i&&i.text?{operation:i.text}:{}),n?{value:n.text}:{}),{activeParam:s="",range:o,suffix:l}=null!=(t=this.getTimesliceOperatorMetaData(a,r,i,n))?t:{};return{operator:{params:a,activeParam:s,text:Av(e,0).text,range:null!=o?o:Cv(Av(e,0),!0),withCaretOn:this.isWithinCaretPosition(Av(e,0)),suffix:l}}}visitQuantizeAsQueryClause(e){return this.isCaretInsideOperator(e)?super.visitChildren(e):this.defaultResult()}visitQuantize(e){const t=Rv(e,(e=>e instanceof yn)),i=Dv(e),{start:r,end:n}=Cv(e),a=xt(xt({},t?{time:t.text}:{}),i?{rollup:i.text}:{}),s=Rv(e,(e=>"to"===e.text)),o=Rv(e,(e=>"using"===e.text));let l,c="";return(!s||this.caret>Cv(s,!0).end)&&(!a.time||this.isWithinCaretPosition(t)?(c="time",l=""):t&&this.caret>Cv(t).end&&(!a.rollup||this.isWithinCaretPosition(i))&&(c="rollup",l=o?" ":" using ")),{operator:{params:a,activeParam:c,text:Av(e,0).text,range:{start:r,end:n+1},withCaretOn:this.isWithinCaretPosition(Av(e,0)),suffix:c?void 0:"",prefix:l}}}visitAccumulateAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitAccumAsAccum(e){return this.visitOperatorAsOperator(e)}visitEvalAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitEval(e){return this.visitOperatorAsOperator(e,!0,void 0,"expression")}visitHistogramQuantileClause(e){return this.visitOperatorAsQueryClause(e)}visitHistogramQuantile(e){const t=Iv(e,(e=>e instanceof sn||e instanceof ln));return this.visitOperatorAsOperator(e,!0,void 0,"value",t?{value:t.text}:void 0)}visitParseAsQueryClause(e){return this.isCaretInsideOperator(e)?this.visitOperatorAsOperator(Av(e,0),!1,void 0,"expression"):this.defaultResult()}visitTimeShiftAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitTimeShift(e){const t=Rv(e,(e=>e instanceof yn));return this.visitOperatorAsOperator(e,!0,void 0,"time",t?{time:t.text}:void 0)}visitDeltaAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitDeltaAsDelta(e){return this.visitOperatorAsOperator(e)}visitRateAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitRateAsRate(e){return e.rateModifier()?{empty:!0}:this.visitOperatorAsOperator(e,!1,void 0,"policy")}visitFillmissingAsQueryClause(e){return this.visitOperatorAsQueryClause(e)}visitFillmissingAsFillmissing(e){const t=e.parent;return t?Iv(e,(e=>e instanceof On&&""!==e.text))?{empty:!0}:this.visitOperatorAsOperator(Av(t,0),!1,void 0,"policy"):{}}visitDimensionKey(e){const t=Tv(e),i=Math.max(t,xv(e)+1);return this.aggregateResult({},{fields:[{text:e.text,withCaretOn:this.isWithinCaretPosition(e),range:{start:t,end:i}}]})}aggregateResult(e,t){return xt(xt(xt({},e),t),t.fields?{fields:(e.fields||[]).concat(t.fields)}:{})}visitOperatorAsQueryClause(e){return this.isWithinModifiedOperator(e)?this.aggregateResult(super.visitChildren(e),this.defaultResult()):this.defaultResult()}visitOperatorAsOperator(e,t=!0,i,r,n){const a=Av(e,0);return this.aggregateResult(t?super.visitChildren(e):{},xt({operator:xt(xt({text:a.text,range:Cv(a,!0),withCaretOn:this.isWithinCaretPosition(a)},r?{activeParam:r}:{}),n?{params:n}:{})},i?{fields:i}:{}))}isWithinModifiedOperator(e){if(null==this.modifiedOperatorRange)return!1;const{start:t,end:i}=Cv(e),{start:r,end:n}=this.modifiedOperatorRange;return t>=r&&i<=n}isWithinCaretPosition(e){const{start:t,end:i}=Cv(e);return t<=this.caret&&Math.max(0,this.caret-1)<=i}isCaretInsideOperator(e){var t,i;const r=null!=(i=null==(t=e.parent)?void 0:t.text)?i:"",{end:n}=Cv(e);return 0===qh(r.substring(n,this.caret),Bh).length}getTail(e="",t=this.caret,i=this.caret){return{tail:{text:e,withCaretOn:!1,range:{start:t,end:i}}}}getOperatorTail(e){return this.getTail(e.text,Tv(e),xv(e)+1)}findTopBottomTail(e){if(!this.isWithinCaretPosition(e))return;const t=e.children[0];if(Rv(t,(e=>e instanceof tn&&this.isWithinCaretPosition(e))))return this.getTail();const i=Rv(t,(e=>this.isWithinCaretPosition(e)));return i&&!["(",",",")"," "].includes(i.text)?this.getOperatorTail(i):this.getTail()}findAggregateTail(e){if(Rv(e,(e=>e instanceof Qn&&this.isWithinCaretPosition(e))))return this.getTail()}findHistogramTail(e){const t=e.children[0],i=Iv(t,(e=>e instanceof sn||e instanceof ln));return i&&!this.isWithinCaretPosition(i)?this.getOperatorTail(i):this.getTail()}findQuantizeTail(e){const t=e.children[0],i=wv(t,(e=>"using"===e.text)),r=t.children.length-1;if(i>-1&&i<r){const e=Cv(Av(t,i)).end;if(this.caret>e){const e=Ov(t,Nv,"",i+1,r).trim(),{start:n,end:a}=Cv(Av(t,i+1));return this.getTail(e,n,a)}return this.getTail()}}findFilterWhereTail(e){const t=e.children[0],i=wv(t,(e=>e instanceof he.ErrorNode))>-1,r=i?void 0:Rv(t,(e=>e instanceof Hs));if(Rv(r,(e=>e instanceof ks&&this.isWithinCaretPosition(e))))return this.getTail();const n=Iv(!i&&r?r:t,(e=>this.isWithinCaretPosition(e))),{start:a,end:s}=n?Cv(n,!0):{start:this.caret,end:this.caret};return this.getTail(n?n.text:"",a,s)}findUnrecognizedPart(e){const{start:t,end:i,startNodeIndex:r,endNodeIndex:n}=this.modifiedOperatorRange,a=[co.name,so.name,no.name],s={[to.name]:this.findAggregateTail,[uo.name]:this.findTopBottomTail,[ho.name]:this.findHistogramTail,[ro.name]:this.findQuantizeTail,[po.name]:this.findFilterWhereTail,[yo.name]:this.findFilterWhereTail},o=wv(e,(e=>(Object.keys(s).includes(e.constructor.name)||a.includes(e.constructor.name)||e instanceof mo||e instanceof fo||e instanceof go||e instanceof vo||e instanceof oo)&&this.isWithinModifiedOperator(e))),l=o>-1?e.children[o]:void 0;if(l){if(a.includes(l.constructor.name))return this.getTail();if(l instanceof go){const e=Iv(l.children[0],(e=>e.text!==le.Operator.FillMissing&&"using"!==e.text&&""!==e.text.trim()));if(e)return this.getOperatorTail(e)}else if(s[l.constructor.name]){const e=s[l.constructor.name].apply(this,[l]);if(e)return e}}const c=-1!==o?o+1:r;return{tail:{text:null!=c&&null!=n?Ov(e,Nv,"",c,n):"",withCaretOn:!1,range:{start:null!=c?Tv(Av(e,c)):t,end:null!=n?xv(Av(e,n))+1:i}}}}getWhereOperatorMetaData(e,t,i,r){if(!t||this.isWithinCaretPosition(t))return{activeParam:"underscoreValue"};if(t&&this.caret>Cv(t).end&&(!e.operation||this.isWithinCaretPosition(i))){const r="operation";if(e.operation){const{start:e}=Cv(i);return{range:{start:e,end:e},prefix:"",activeParam:r}}return{range:Cv(t,!0),activeParam:r}}return i&&this.caret>Cv(i).end&&(!e.value||this.isWithinCaretPosition(r))?{activeParam:"value"}:void 0}getTimesliceOperatorMetaData(e,t,i,r){return!i||this.isWithinCaretPosition(i)?{activeParam:"operation",suffix:" over "}:i&&this.caret>Cv(i).end&&(!t||this.isWithinCaretPosition(t))?{activeParam:"over",range:Cv(i,!0)}:t&&this.caret>Cv(t).end&&(!e.value||this.isWithinCaretPosition(r))?{activeParam:"value"}:void 0}}const Bv=(e,t)=>{const i=(e=>{const t=pe.CharStreams.fromString(e),i=new br(t);i.removeErrorListeners();const r=new pe.CommonTokenStream(i);return new Tr(r)})(e);i.removeErrorListeners();const r=i.queryRow();return(({operator:e,fields:t,tail:i,empty:r},n)=>{if(r)return{type:"EmptyResult"};if(!i)return null;if(!e)return Pv(i,n," "," ");if(kv(null,e,n)||e.withCaretOn)return Pv(e,n,"",Lv(e,i));const a=[e,i,n];if(null!=t&&t.length){const[r]=t;if(kv(e,r,n))return Uv(e,r,...a,t);for(let r=0;r<t.length;r++){const s=t[r];if(s.withCaretOn)return Fv(s,e,n,"",Lv(s,i),t);const o=t[r-1];if(null!=o&&kv(o,s,n))return Uv(o,s,...a)}return Uv(bv(t),i,...a,t)}return yv.includes(e.text)?{type:"EmptyResult"}:Uv(e,i,...a,t)})(new Vv(t).visit(r),t)},$v=[void 0," "],Hv=new r.StorageLRUService({storageKeySuffix:"ADVANCED_METRICS_AUTOCOMPLETE_PARSE_RESULT",maxNumberOfItems:100}),Wv=()=>De.currentUserHelper.hasFeatureFlag("UIMetricsOperatorsAutocomplete"),qv=(e,t)=>{let i=!1;for(let r=0;r<e.length;r++){const n=e[r];if(n===t&&!i)return r;'"'===n&&!Hh(e,r-1)&&(i=!i)}return-1},jv=(e,t)=>{if(t<0||t>e.length)return;const i=!$v.includes(e[t-1])||!$v.includes(e[t]),r=((e,t,i)=>`${e}-${i?t:"noToken"}`)(e,t,i);if(Hv.has(r)){const e=Hv.load(r);return!e||"Key"!==e.type&&"ValueWithinKey"!==e.type?e:Ct(xt({},e),{range:i?e.range:{start:t,end:t}})}const n=Qv(e,t);return Hv.save(r,n),n},Qv=(e,t)=>{if(t<0||t>e.length||((e,t)=>{const i=qv(e,"|");return!Wv()&&-1!==i&&t>i})(e,t))return;if(!e.trim())return Yv([],t);const i=Kv(e),r=i.substring(t).search(/[\s=()|<>,]|$/),n=Kv(i.substring(0,t+(r>-1?r:0)));let a;if(Wh(n,$h).length>0)a={type:"NoResult"};else if(a=Gv(n,t),a&&"filters"in a&&n!==i){const e=Gv(i,t);e&&"filters"in e&&(a.filters=e.filters)}return Wv()?((e,t)=>{if(!e)return;if(!t)return e;if("EmptyResult"===t.type)return;const i={text:t.text,range:t.range,metadata:xt(xt({prefix:t.prefix,suffix:t.suffix},"activeParam"in t?{activeParam:t.activeParam}:{}),"params"in t?{params:t.params}:{}),filters:"filters"in e?e.filters:[]};switch(t.type){case"Operators":return xt({type:"Operators"},i);case"Fields":return Ct(xt({type:"Key",key:t.text},i),{metadata:Ct(xt({},i.metadata),{operator:t.operator}),allowDuplicates:!0});case"Parameters":return t.fields?void 0:Ct(xt({type:"Parameters",key:t.text},i),{metadata:Ct(xt({},i.metadata),{operator:t.operator})});default:return e}})(a,Bv(e,t)):a},zv=e=>{let t=0,i=!1;for(let r=0;r<e.length;r++){const n=e[r];"("!==n||i?")"!==n||i?'"'===n&&!Hh(e,r-1)&&(i=!i):t--:t++}return t},Gv=(e,t)=>{const{tree:i}=Qm(e),r=new Sv(t),n=i.accept(r);if(!n)return Yv([],t);if("NoResult"===n.type||"Comparators"===n.type)return n;"Key"===n.type?n.key=Zv(n.key):"ValueWithinKey"===n.type&&(n.key=Zv(n.key),n.value=Zv(n.value));for(const e of n.filters)e.key=Zv(e.key),e.value=Zv(e.value);return"Filters"===n.type?Yv(n.filters,t):n},Kv=e=>{const t=qv(e,"|"),i=-1!==t?e.substring(0,t):e,r=zv(i);return i+(0,E.Z)(")",r)},Yv=(e,t)=>({type:"Key",key:"",filters:e,range:{start:t,end:t}}),Zv=e=>e.startsWith('"')&&e.endsWith('"')?(0,T.Z)(e,'"'):e,Xv=(e,t,i)=>{switch(e){case le.Operator.Rate:return Object.values(le.RatePolicy).filter((e=>e!==le.RatePolicy.All)).map((e=>({label:e,value:e})));case le.Operator.FillMissing:const e=Object.values(le.FillMissingPolicyKey).filter((e=>e!==le.FillMissingPolicyKey.fixed)).map((e=>({label:e,value:e})));return e.push(_v("fillmissingFixed")),e;case le.Operator.Eval:return[_v("eval")];case le.Operator.HistogramQuantile:return[_v("numericalValue")];case le.Operator.Parse:return[_v("parse")];case le.Operator.TimeShift:return[_v("timeDuration")];case le.Operator.Percentile:return[_v("numericalValue")];case le.Operator.Topk:case le.Operator.Bottomk:return"value"===t?[_v("numericalValue")]:[...pv.map((e=>({label:e,value:e,moveCursor:2}))),_v("topBottom")];case le.Operator.Outlier:return"direction"===t?Object.values(le.OperatorDirection).map((e=>({label:e,value:e}))):"window"===t?[_v("timeDuration")]:"threshold"===t?[_v("numericalValue")]:["direction","window","threshold"].filter((e=>void 0===(null==i?void 0:i[e]))).map((e=>({label:e+"=",value:e+"="})));case le.Operator.Quantize:return t?"time"===t?[_v("timeDuration")]:hv.map((e=>({label:e,value:e}))):[];case le.Operator.Filter:case le.Operator.Where:if(!t)return[];if("underscoreValue"===t){const e=r.i18nUtil.get("sharedAnalytics.codeAutocomplete.operatorsParams.underscoreValue");return[{label:e,value:e}]}return"aggregator"===t?pv.map((e=>({label:e,value:e}))):"operation"===t?Object.values(le.BooleanOperation).map((e=>({label:e,value:e}))):[_v("numericalValue")];case le.Operator.Ewma:return t?[_v("numericalValue")]:(null==i?void 0:i.span)||(null==i?void 0:i.alpha)?[]:["span","alpha"].map((e=>({label:e+"=",value:e+"="})));case le.Operator.Timeslice:if(!t)return[];if("over"===t){const e=r.i18nUtil.get("sharedAnalytics.codeAutocomplete.operatorsParams.over");return[{label:e,value:e}]}return"operation"===t?Object.values(le.TimesliceOperation).map((e=>({label:e,value:e}))):[_v("timeDuration")];default:return[]}},Jv=e=>e&&"filters"in e?e.filters.map((({key:e,value:t,negation:i})=>e?{type:"NewMetricsQueryFilterByPair",key:e,value:t,negation:i}:{type:"NewMetricsQueryFilterByValue",value:t,negation:i})):[],ef=e=>({type:"NewMetricsQueryData",metric:"",filters:Jv(e),operators:[]}),tf=e=>e&&"metadata"in e?e.metadata:void 0,rf=e=>{if(!e)return"";switch(e.type){case"Key":return e.key;case"ValueWithinKey":return`${e.key}=${e.value}`;default:return""}},nf=e=>`${e.charAt(0).toUpperCase()}${e.substring(1)}`,af=(e="")=>({type:"FetchFilterSuggestionsSuccess",suggestions:{data:[{label:`${e.trim()}=`,value:`${e.trim()}=`,suggestionsLabel:"=",moveCursor:-1,secondaryAction:"Equals"},{label:`${e.trim()}=()`,value:`${e.trim()}=()`,suggestionsLabel:"=()",moveCursor:-2,secondaryAction:"In"}],term:"",exhaustive:!0}}),sf=({rowKey:e,timeRange:t,variables:i})=>{var a;const s=(0,n.useMemo)((()=>lv(xg)),[]),[o,l]=(0,n.useState)(),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[h,m]=sg(cv,dv,s);(0,n.useEffect)((()=>{m({type:"PreloadFilterCache",payload:{timeRange:t,queryData:ef({type:"Key",key:"",range:{start:0,end:0},filters:[]}),rowKey:e,term:"",variables:i,hasUnexpectedTokenError:!1}})}),[m,e,t,i]);const g=(0,n.useMemo)((()=>{if(h.suggestions)return d(!1),h.suggestions.data.map((({suggestionsLabel:e,value:t,label:i,categories:r,moveCursor:n,secondaryAction:a,tooltip:s})=>({label:i,suggestionsLabel:e,value:t,moveCursor:n,secondaryAction:a,tooltip:s,categories:r})))}),[h.suggestions]),y=(0,n.useCallback)((n=>{var a;const{query:s,start:o,end:c,line:u}=n,h=()=>{d(!1),l({query:s,start:o,end:c,line:u,activeQueryLine:"",resultType:void 0})};if(o!==c||jm(s,u,o))return void h();const g=s.split("\n"),y=g.slice(0,u).reduce(((e,t)=>e+t.length+1),0),v=of(n,y),f=jv(v.query,v.start);if(!f||"Filters"===f.type||"NoResult"===f.type)return void h();p(!1);const _=lf({flatQuery:f.range,query:s,line:u,lengthTillActiveLine:y});if(l(Ct(xt({},_),{activeQueryLine:null!=(a=g[u])?a:"",resultType:f.type,metadata:tf(f)})),["Operators","Parameters","Comparators"].includes(f.type))switch(m({type:"CancelFilterSuggestionsQuery"}),f.type){case"Operators":return m((({metadata:e,text:t})=>({type:"FetchFilterSuggestionsSuccess",suggestions:{data:Object.entries(gv()).filter((([e])=>e.toLowerCase().includes(t.toLowerCase()))).map((([t,i])=>xt({label:`${t}${i.suffix||""}`,suggestionsLabel:`${(null==e?void 0:e.prefix)||""}${t}${(null==e?void 0:e.suffix)||""}`,value:`${t}${i.suffix||""}`,categories:[r.i18nUtil.get("sharedAnalytics.codeAutocomplete.Operators")],tooltip:zy(t)},i.moveCursor?{moveCursor:i.moveCursor}:{}))).sort(((e,t)=>e.label.localeCompare(t.label))),term:t,exhaustive:!0}}))(f));case"Parameters":return m((({metadata:e,key:t})=>{var i;const n=null!=(i=null==e?void 0:e.operator)?i:r.i18nUtil.get("sharedAnalytics.codeAutocomplete.Parameters"),a=null!=e&&e.operator?Qy(e.operator,e.activeParam,e.params):void 0;return{type:"FetchFilterSuggestionsSuccess",suggestions:{data:Xv(null==e?void 0:e.operator,null==e?void 0:e.activeParam,null==e?void 0:e.params).filter((e=>e.label.toLowerCase().includes(t.trimLeft().toLowerCase()))).map((e=>{var t;return Ct(xt({},e),{categories:[n,...null!=(t=e.categories)?t:[]]})})),categoriesNodes:a?{[n]:a}:void 0,term:t,exhaustive:!0}}})(f));case"Comparators":return p(!0),m(af())}const S=((e,{rowKey:t,timeRange:i,variables:r})=>{const n=tf(e);return{rowKey:t.valueOf(),term:rf(e),timeRange:i,queryData:ef(e),variables:r,hasUnexpectedTokenError:!1,category:null!=(null==n?void 0:n.operator)?`${nf(n.operator)} by`:void 0,allowDuplicateKeys:e&&"allowDuplicates"in e&&e.allowDuplicates,metadata:n}})(f,{rowKey:e,timeRange:t,variables:i});av(S,xg)||d(!0),m({type:"FetchFilterSuggestionsOnInputIntent",payload:S})}),[m,e,t,i]);return{parsedSelection:o,isLoading:c,suggestions:g,parseSuggestions:y,cancelParsingSuggestions:(0,n.useCallback)((()=>{d(!1),m({type:"CancelFilterSuggestionsQuery"})}),[m]),suggestionsCategoriesNodes:null==(a=h.suggestions)?void 0:a.categoriesNodes,isSuggestingComparators:u}},of=(e,t)=>({query:e.query,start:t+e.start,end:t+e.end}),lf=({flatQuery:{start:e,end:t},query:i,line:r,lengthTillActiveLine:n})=>({query:i,start:e-n,end:t-n,line:r}),cf="inv_query_builder_suggestions_time",df=({componentName:e,suggestions:t,rowKey:i})=>{const a=(0,r.usePrevious)(t),s=(0,n.useCallback)((()=>{((e,t)=>{var i,r,n;de.basicPerformanceMeasurement.createMark({id:`render_${e}_${t}`,module:null!=(n=null==(r=null==(i=Re.applicationState)?void 0:i.current)?void 0:r.name)?n:"",component:`queryBuilder_${e}`,action:cf,checkpoint:"input_changed"})})(e,i)}),[e,i]);return(0,n.useEffect)((()=>{a===t||(0,x.Z)(t)||requestAnimationFrame((()=>{requestAnimationFrame((()=>{((e,t)=>{de.basicPerformanceMeasurement.measure({id:`render_${e}_${t}`,name:cf,from:"input_changed",to:"finish_rendering"})})(e,i)}))}))})),{startMeasuringTimeToRenderSuggestions:s}},uf=e=>{const{term:t,data:i}=null!=e?e:{},a=(0,n.useMemo)((()=>{if(t&&"other"!==(e=>""===e?"other":e.includes("=")?e.endsWith("*")?"keyAndValueWithStar":"other":"keyOnly")(t))return{value:t,label:t,secondaryAction:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.customValue"),useValueForInputValue:!0}}),[t]);return{getSuggestionsWithSearchText:(0,n.useCallback)((()=>[...a?[a]:[],...i||[]]),[a,i]),getHighlightedLabelSegments:(0,n.useCallback)((e=>((e,t)=>{var i;const r=Pm(t),n="SearchKeys"===r.type?r.keySearchTerm:r.valueSearchTerm;if(""===n)return[];const a=(null!=(i=e.suggestionsLabel)?i:e.label).toLowerCase().indexOf(n.toLowerCase());return a<0?[]:[[a,a+n.length]]})(e,null!=t?t:"")),[t])}},pf="row-field___TOnNv",hf=e=>{var t=e,{className:i,children:r}=t,a=At(t,["className","children"]);return n.createElement("div",xt({className:ue(i,pf)},a),r)},mf="autoComplete___wPyKn",gf="suggestions___F0zYP",yf="chip___xe0IK",vf="negatedChip___WLOmy",ff="chipIconButton___-Zdi2",_f="negatedChipIconButton___yuBCH",Sf="autoCompleteSecondaryAction___57g3j",bf="comparatorsSuggestions___soyit",Ef=(e,t)=>e.map(((e,i)=>{const r={className:ue(yf,{[vf]:e.negation}),iconButtonProps:{className:ue({[ff]:!e.negation,[_f]:e.negation}),"data-sumo-test":"sharedAnalytics.metricsFilterSelector.negatedChipIconButton",icon:a.IconName.Disabled,onClick:e=>{e.stopPropagation(),t(i)}}};switch(e.type){case"NewMetricsQueryFilterByPair":return{value:`${e.key}=${e.value}`,label:`${e.key} = ${e.value}`,chipProps:r,prefixed:e.negation,useValueForInputValue:!0};case"NewMetricsQueryFilterByValue":return{value:e.value,label:e.value,chipProps:r,prefixed:e.negation,useValueForInputValue:!0}}})),Tf=(0,oe.default)((()=>({dataSumoTest:{input:"sharedAnalytics.metricsFilterSelector.input",suggestions:"sharedAnalytics.metricsFilterSelector.suggestions"},label:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.filter"),placeholder:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.filterSelectorPlaceholder"),editableChips:!0}))),xf=(e,t)=>{const[i,r]=(0,n.useState)(e);return(0,n.useEffect)((()=>{void 0===t&&r(e),r(Ct(xt({},e),{filters:e.filters.filter((e=>{switch(e.type){case"NewMetricsQueryFilterByValue":return e.value!==(null==t?void 0:t.value);case"NewMetricsQueryFilterByPair":return`${e.key}=${e.value}`!==(null==t?void 0:t.value)}}))}))}),[t,e]),i},Cf=(e,t,i)=>{if(t!==i)return;const r=jv(e,t);if(!r)return{term:e};switch(r.type){case"Key":return e.substring(0,t).includes("=")?void 0:{term:r.key};case"ValueWithinKey":return{term:`${r.key}=${r.value}`,range:r.range};default:return{term:e}}},Af=({onFilterItemsSelected:e,onFilterNegationToggled:t,onKeyDown:i,timeRange:r,rowKey:s,queryData:o,variables:l,hasUnexpectedTokenError:c,inputRef:d,autoCompleteProps:u,rowFieldClassName:p,overridingFilters:h,allowDuplicateKeys:m,networkService:g,supportInOperator:y=!0})=>{const v=(0,n.useRef)(null),f=null!=d?d:v,_=null!=u?u:Tf(),S=(0,n.useCallback)((i=>{switch(i.type){case"FilterItemsSelected":e(i.selectedItems);break;case"FilterNegationToggled":t(i.filterIndex)}}),[e,t]),b=(0,n.useMemo)((()=>lv(new Tg(null!=g?g:fg))),[g]),[E,T]=sg(cv,dv,b,S),{startMeasuringTimeToRenderSuggestions:x}=df({componentName:"new_metrics_filter_selector",suggestions:E.suggestions,rowKey:s}),[C,A]=(0,n.useState)(),w=xf(o,C);(0,n.useEffect)((()=>{T({type:"PreloadFilterCache",payload:{timeRange:r,queryData:w,rowKey:s,term:"",variables:l,hasUnexpectedTokenError:c,overridingFilters:h,allowDuplicateKeys:m,suffix:" "}})}),[s,w,r,T,l,c,h,m]);const[I,R]=(0,n.useState)(""),D=(0,n.useCallback)((e=>{T({type:"ToggleFilterNegation",filterIndex:e})}),[T]);(0,n.useEffect)((()=>{T({type:"UpdateSelectedItems",selectedItems:Ef(o.filters,D)})}),[T,o.filters,D]);const{getSuggestionsWithSearchText:O,getHighlightedLabelSegments:N}=uf(E.suggestions),M=(0,n.useCallback)((e=>{var t,i,n,a,o;x();const d=Cf(e,null!=(i=null==(t=f.current)?void 0:t.selectionStart)?i:0,null!=(a=null==(n=f.current)?void 0:n.selectionEnd)?a:0);if(!d)return;const u=(null==(o=f.current)?void 0:o.selectionStart)&&Yy(e,f.current.selectionStart)?{range:d.range,completeQuery:e}:{};T({type:"FetchFilterSuggestionsOnInputIntent",payload:xt({term:d.term,rowKey:s,timeRange:r,queryData:w,variables:l,hasUnexpectedTokenError:c,overridingFilters:h,allowDuplicateKeys:m,suffix:y?" ":"="},u)})}),[x,T,s,r,w,l,c,h,m,f,y]),k=(0,n.useCallback)((e=>{x(),T({type:"FetchFilterSuggestionsOnFocusIntent",payload:{term:e,rowKey:s,timeRange:r,queryData:w,variables:l,hasUnexpectedTokenError:c,overridingFilters:h,allowDuplicateKeys:m,suffix:y?" ":"="}})}),[x,T,s,r,w,l,c,h,m,y]),L=(0,n.useCallback)((e=>{T({type:"SelectFilterSuggestion",selectedItems:e})}),[T]),P=(0,n.useCallback)((e=>{var t,i;if((null==(t=f.current)?void 0:t.selectionStart)===e.length&&(e.endsWith("=()")||e.endsWith(" )"))){const t=e.length-1;null==(i=f.current)||i.setSelectionRange(t,t)}Ky(e)?T(af(e)):M(e),R(e)}),[M,R,T,f]),F=(0,n.useCallback)((()=>{M(I)}),[M,I]),U=(0,n.useCallback)((e=>{e&&(I.endsWith("=")?k(I):k(""))}),[I,k]),V=(0,n.useCallback)(((e,t)=>{if("Shift"===e.key)return!1;if("!"===e.key){const e=E.selectedItems.indexOf(t);return!(e>-1)||(D(e),!1)}return!0}),[E.selectedItems,D]),B=(0,n.useCallback)(((e,{type:t})=>Boolean(e.value)&&("clickItem"!==t||e.value.endsWith("=")&&Nm(e)||"clickItem"===t&&!e.value.endsWith(" ")&&!e.value.endsWith("=")&&!Xy(e.value))),[]),$=(0,n.useMemo)((()=>O()),[O]),H=(0,n.useMemo)((()=>({secondaryAction:Sf,suggestionBox:Ky(I)?bf:gf})),[I]);return n.createElement(hf,{className:p,onKeyDown:i},n.createElement(a.AutoComplete,xt({allowedPrefix:"!",inlineLabel:!0,optional:!0,className:mf,dense:!0,loading:E.isLoading,error:E.error,selectedItems:E.selectedItems,items:$,categoriesComparator:mm,uncategorizedItemsShouldComeFirst:!0,onSelectedItemsChange:L,onSearchTextChange:P,onCaretPositionChange:F,onIsOpenChange:U,onChipKeyDown:V,flexibleWidth:!0,styleProps:H,multiselect:!0,isFilteringEnabled:!1,isCompleteItem:B,defaultHighlightedIndex:1,getHighlightedLabelSegments:N,createItemOnBlur:!0,createItemOnEnter:!0,inputRef:f,flexibleChipsWidth:!0,onItemBeingEditedChange:A},_)))},wf="editorContainer___PHDf6",If="editorContainerWithRunQueriesButton___pukJR",Rf="editorRowsNextToRunQueriesButton___7kI1r",Df="editorRowsWithSpaceForUnexecutedQueryNotification___n3RCW",Of="runQueriesButtonContainer___4TGjW";class Nf extends _r{constructor(){super()}defaultResult(){}aggregateResult(e,t){return"VisitorResultQueryTooComplex"===(null==e?void 0:e.type)||"VisitorResultQueryTooComplex"===(null==t?void 0:t.type)?{type:"VisitorResultQueryTooComplex"}:"VisitorResultEmptyQuery"===(null==e?void 0:e.type)||"VisitorResultEmptyQuery"===(null==t?void 0:t.type)?{type:"VisitorResultEmptyQuery"}:"VisitorResultSelector"===(null==e?void 0:e.type)&&"VisitorResultSelector"===(null==t?void 0:t.type)?{type:"VisitorResultSelectorSection",filters:[e,t]}:"VisitorResultSelectorSection"===(null==e?void 0:e.type)&&"VisitorResultSelector"===(null==t?void 0:t.type)?{type:"VisitorResultSelectorSection",filters:[...e.filters,t]}:"VisitorResultSelectorSection"===(null==e?void 0:e.type)&&"VisitorResultSelectorSection"===(null==t?void 0:t.type)?{type:"VisitorResultSelectorSection",filters:[...e.filters,...t.filters]}:null!=t?t:e}visitQueryRow(e){if((0,r.assert)(void 0!==e.children),e.children.every((e=>e instanceof Ae.TerminalNode)))return{type:"VisitorResultEmptyQuery"};(0,r.assert)(e.children[0]instanceof Ys);const[t,...i]=e.children,n=t.accept(this);if((0,r.assert)("VisitorResultSelectorSection"===(null==n?void 0:n.type)||"VisitorResultSelector"===(null==n?void 0:n.type)||"VisitorResultQueryTooComplex"===(null==n?void 0:n.type)),"VisitorResultQueryTooComplex"===n.type)return n;const a=[];for(const e of i)if(e instanceof eo){const t=e.accept(this);if("VisitorResultQueryTooComplex"===(null==t?void 0:t.type))return t;(0,r.assert)("VisitorResultOperator"===(null==t?void 0:t.type)),a.push(t)}return{type:"VisitorResultRoot",selectorPart:"VisitorResultSelectorSection"===n.type?n:{type:"VisitorResultSelectorSection",filters:[n]},operatorPart:{type:"VisitorResultOperatorSection",operators:a}}}visitOrExpAsSelectorBoolExp(e){var t,i,n;return(null!=(i=null==(t=e.children)?void 0:t.length)?i:0)>1?{type:"VisitorResultQueryTooComplex"}:((0,r.assert)(1===(null==(n=e.children)?void 0:n.length)),e.children[0].accept(this))}visitAndExpAsSelectorBoolTerm(e){var t;let i={type:"VisitorResultSelectorSection",filters:[]};return null==(t=e.children)||t.forEach((e=>{i=this.aggregateResult(i,e.accept(this))})),i}visitDimensionSelectorAsSelector(e){const t=e.dimensionSelector().children;(0,r.assert)(void 0!==t);const i=t.find((e=>e instanceof Br)),n=t.find((e=>e instanceof Wr||e instanceof qr));if(void 0===i||void 0===n)return{type:"VisitorResultQueryTooComplex"};const a='""'===n.text?"":n.text.trim();return{type:"VisitorResultSelector",filter:{type:"NewMetricsQueryFilterByPair",key:i.text,value:a,negation:!1}}}visitMetricNameSelectorAsSelector(e){return{type:"VisitorResultSelector",filter:{type:"NewMetricsQueryFilterByValue",negation:!1,value:e.text.trim()}}}visitNotExpAsSelectorBoolFactor(e){const t=e.selectorBoolFactor().accept(this);return(0,r.assert)("VisitorResultSelector"===(null==t?void 0:t.type)),Ct(xt({},t),{filter:Ct(xt({},t.filter),{negation:!0})})}visitAggregateAsQueryClause(e){var t;const i=e.aggregate(),n=i.aggregatorFn(),a=null==(t=i.dimensionKeyList())?void 0:t.dimensionKey().map((e=>e.text));if(n instanceof Qn)return{type:"VisitorResultOperator",operator:{key:le.Operator.Percentile,value:parseInt(n.positiveNumber().text),by:null==a?void 0:a.join(",")}};const s=De.currentUserHelper.hasFeatureFlag("UIMetricsStdDevOperator"),o=n.text;(0,r.assert)(s&&o===le.Operator.StandardDeviation||o===le.Operator.Avg||o===le.Operator.Count||o===le.Operator.Sum||o===le.Operator.Min||o===le.Operator.Max);return{type:"VisitorResultOperator",operator:{key:o,value:null==a?void 0:a.join(",")}}}visitRollupAsQueryClause(e){const t=e.rollup().rollupFn().text;return(0,r.assert)(Mf(t)),{type:"VisitorResultOperator",operator:{key:le.Operator.Quantize,using:t}}}visitQuantizeAsQueryClause(e){var t;const i=e.quantize(),n=null==(t=i.rollupFn())?void 0:t.text;return(0,r.assert)(void 0===n||Mf(n)),{type:"VisitorResultOperator",operator:{key:le.Operator.Quantize,using:null!=n?n:le.Aggregator.avg,value:i.positiveTimeDuration().text}}}visitTimeShiftAsQueryClause(e){const t=e.timeShift();return{type:"VisitorResultOperator",operator:{key:le.Operator.TimeShift,value:t.signedTimeDuration().text}}}visitAccumulateAsQueryClause(e){return{type:"VisitorResultOperator",operator:{key:le.Operator.Accum}}}visitParseAsQueryClause(e){const t=e.parse().text.replace("parse","").trim();return{type:"VisitorResultOperator",operator:{key:le.Operator.Parse,value:t}}}visitRateAsRate(e){const t=e.rateModifier();let i=le.RatePolicy.All;return t&&(i="increasing"===t.text?le.RatePolicy.Increasing:le.RatePolicy.Decreasing),{type:"VisitorResultOperator",operator:{key:le.Operator.Rate,policy:i}}}visitDeltaAsQueryClause(e){return{type:"VisitorResultOperator",operator:{key:le.Operator.Delta}}}visitEvalAsQueryClause(e){const t=e.eval();return{type:"VisitorResultOperator",operator:{key:le.Operator.Eval,value:t.evalExp().text}}}visitTopBottomAsQueryClause(e){var t,i;const r=e.topBottom(),n=void 0!==r.TOPK()?le.Operator.Topk:le.Operator.Bottomk,a=r.reducerExp().text;return Mf(a)?(null!=(i=null==(t=r.dimensionKeyList())?void 0:t.dimensionKey())?i:[]).length>0?{type:"VisitorResultQueryTooComplex"}:{type:"VisitorResultOperator",operator:{key:n,using:a,value:parseInt(r.positiveInteger().text)}}:{type:"VisitorResultQueryTooComplex"}}visitHistogramQuantileClause(e){const t=e.histogramQuantile();return{type:"VisitorResultOperator",operator:{key:le.Operator.HistogramQuantile,value:parseFloat(t.positiveNumber().text)}}}visitFilterAsQueryClause(e){var t,i,r;const n=e.filter().reducerBoolExp();if(void 0!==n.children){const e=n.children[0];if(e instanceof Us){const n=(null!=(t=e.children)?t:[])[0];if(n instanceof Hs){const e=null==(i=n.children)?void 0:i.filter((e=>e instanceof ks)),t=null==(r=n.children)?void 0:r.find((e=>e instanceof js));if(2===(null==e?void 0:e.length)&&void 0!==t){const i=e[0].text,r=e[1].text,n=t.text;if(kf(n)){if(Mf(i))return{type:"VisitorResultOperator",operator:{key:le.Operator.Filter,aggregator:i,operation:n,value:parseFloat(r)}};if(Mf(r))return{type:"VisitorResultOperator",operator:{key:le.Operator.Filter,aggregator:r,operation:n,value:parseFloat(i)}}}}}}}return{type:"VisitorResultQueryTooComplex"}}visitWhereAsQueryClause(e){var t,i,r;if(!De.currentUserHelper.hasFeatureFlag("UIMetricsWhereOperator"))return{type:"VisitorResultQueryTooComplex"};const n=e.where().reducerBoolExp();if(!(void 0!==n.children&&n.children[0]instanceof Us&&n.text.trimLeft().startsWith("_value")))return{type:"VisitorResultQueryTooComplex"};const a=(null!=(t=n.children[0].children)?t:[]).filter((e=>e instanceof Hs));if(1!==a.length)return{type:"VisitorResultQueryTooComplex"};const s=a[0],o=null==(i=s.children)?void 0:i.filter((e=>e instanceof ks)),l=null==(r=s.children)?void 0:r.find((e=>e instanceof js));if(2!==(null==o?void 0:o.length)||void 0===l)return{type:"VisitorResultQueryTooComplex"};const c=o[1].text,d=l.text;return kf(d)?{type:"VisitorResultOperator",operator:{key:le.Operator.Where,operation:d,value:parseFloat(c)}}:{type:"VisitorResultQueryTooComplex"}}visitTimesliceAsQueryClause(e){if(!De.currentUserHelper.hasFeatureFlag("UIMetricsTimesliceOperator"))return{type:"VisitorResultQueryTooComplex"};const t=e.timeslice(),i=t.rollupFn(),r=t.positiveTimeDuration();return i&&r?{type:"VisitorResultOperator",operator:{key:le.Operator.Timeslice,operation:i.text,value:r.text}}:{type:"VisitorResultQueryTooComplex"}}visitOutlierAsQueryClause(e){const t=e.outlier().outlierParameter();if(t.length>3)return{type:"VisitorResultQueryTooComplex"};if(!t.every((e=>e instanceof Ln||e instanceof Mn||e instanceof kn)))return{type:"VisitorResultQueryTooComplex"};const i={key:le.Operator.Outlier,direction:le.OperatorDirection.BOTH};return t.forEach((e=>{var t,r;if(e instanceof Ln){const t=e.PLUS()?le.OperatorDirection.POSITIVE:e.MINUS()?le.OperatorDirection.NEGATIVE:le.OperatorDirection.BOTH;i.direction=t}else e instanceof Mn?i.window=e.positiveTimeDuration().text:e instanceof kn&&(i.threshold=parseFloat(null!=(r=null==(t=e.number())?void 0:t.text)?r:""))})),{type:"VisitorResultOperator",operator:i}}visitEwmaAsQueryClause(e){if(!De.currentUserHelper.hasFeatureFlag("UIMetricsEwmaOperator"))return{type:"VisitorResultQueryTooComplex"};const t=e.ewma().ewmaParameter();if(!(void 0===t||t instanceof Fn||t instanceof Un))return{type:"VisitorResultQueryTooComplex"};const i={key:le.Operator.Ewma};return void 0===t||t instanceof Fn?(i.parameter="span",i.span=t?parseInt(t.positiveNumber().text):void 0):t instanceof Un&&(i.parameter="alpha",i.alpha=parseFloat(t.positiveNumber().text)),{type:"VisitorResultOperator",operator:i}}visitFillmissingAsFillmissing(e){var t,i;const r=e.fillmissingParameter(),n=r.LAST()?{type:le.FillMissingPolicyKey.last}:r.INTERPOLATION()?{type:le.FillMissingPolicyKey.interpolation}:r.EMPTY()?{type:le.FillMissingPolicyKey.empty}:{type:le.FillMissingPolicyKey.fixed,value:parseInt(null!=(i=null==(t=r.number())?void 0:t.text)?i:"")};return{type:"VisitorResultOperator",operator:{key:le.Operator.FillMissing,policy:n}}}}function Mf(e){return Object.keys(le.Aggregator).includes(e)}function kf(e){return Object.values(le.BooleanOperation).includes(e)}const Lf=Symbol(),Pf=e=>{const t=e.trim();if(""===t)return{type:"NewMetricsQueryData",metric:"",operators:[],filters:[]};const i=pe.CharStreams.fromString(t),r=new br(i),n=new pe.CommonTokenStream(r),a=new Tr(n);let s;a.removeErrorListeners(),a.addErrorListener({syntaxError:()=>{throw Lf}});try{s=a.queryRow().accept(new Nf)}catch(e){return e===Lf?"syntax_error":"unknown_error"}if("VisitorResultQueryTooComplex"===(null==s?void 0:s.type))return"query_too_complex";if("VisitorResultEmptyQuery"===(null==s?void 0:s.type))return"query_empty";if("VisitorResultRoot"!==(null==s?void 0:s.type))return"unknown_error";const o=s.selectorPart.filters.find((e=>"NewMetricsQueryFilterByPair"===e.filter.type&&"metric"===e.filter.key));return{filters:s.selectorPart.filters.filter((e=>e!==o)).map((e=>e.filter)),type:"NewMetricsQueryData",metric:void 0!==o?o.filter.value:"",operators:s.operatorPart.operators.map((e=>e.operator))}},Ff=["AdvancedMetricsQuery","BasicMetricsQuery"];const Uf="preferredQueryBuilderModeInMetricsExplorer",Vf=(0,oe.default)((()=>new vm({syncKeyMappings:new Map([[Uf,Uf]]),updateUserSetting:(e,t)=>{var i,r;null==(r=null==(i=De.currentUserActions)?void 0:i.getActionCreators())||r.updateUserSetting({key:e,value:t})}}))),Bf=()=>{var e;try{const t=JSON.parse(null!=(e=Vf().getItem(Uf))?e:"");return function(e){if("string"!=typeof e||!Ff.includes(e))throw new Error}(t),t}catch(e){return"BasicMetricsQuery"}},$f=e=>{Vf().setItem(Uf,JSON.stringify(e))},Hf=(e,t)=>{if(!t.length)return{query:"AdvancedMetricsQuery"===Bf()?Bp(e):Up(e),index:0};const i=t.findIndex((t=>t.queryKey===e));return{query:t[i],index:i}},Wf=(e,t)=>{const{metricsQueryQuantization:i,queryString:r,type:n}=e.query,a=Ct(xt({},t),{metricsQueryQuantization:i,queryString:r});if("BasicMetricsQuery"===(null==t?void 0:t.type)&&"AdvancedMetricsQuery"===n){const e=Pf(r);if("string"==typeof e){const{queryKey:e,queryType:t}=a;return{queryKey:e,queryType:t,queryString:r,metricsQueryQuantization:i,metricsQueryMode:"Advanced",type:"AdvancedMetricsQuery"}}return Ct(xt({},a),{metricsQueryMode:"Basic",type:"BasicMetricsQuery",metricsQueryData:e})}const s=Ct(xt({},t),{metricsQueryQuantization:i,queryString:r});return"BasicMetricsQuery"===s.type&&(s.metricsQueryData=e.query.metricsQueryData),s},qf=(e,t)=>{const i=Kp({query:e.queryString,variables:t});return"AdvancedMetricsQuery"===e.type?Ct(xt({},e),{queryString:i}):Ct(xt({},e),{queryString:i,metricsQueryData:Ct(xt({},e.metricsQueryData),{filters:Wp(e.metricsQueryData.filters,t),metric:Kp({query:e.metricsQueryData.metric,variables:t})})})},jf=(e,t=2)=>{if(!e)return"0.00 B";const i=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024)),n=Math.min(r,4);return parseFloat((e/Math.pow(1024,n)).toFixed(i))+" "+["B","KB","MB","GB","TB"][n]},Qf="chipStyles___sfmjQ",zf=e=>{const{classNames:t,scannedBytes:i,tooltipProps:r,tooltipText:s=""}=e,o=(0,n.useMemo)((()=>jf(i)),[i]);return n.createElement(a.Tooltip,xt({placement:"left",title:s,multiline:!0},r),n.createElement("div",{className:null==t?void 0:t.container},n.createElement(a.Chip,{className:Qf,readOnly:!0},o)))},Gf=({addOperatorButtonRef:e,className:t,onBlur:i,onClick:s,disabled:o})=>n.createElement(a.TextButton,{buttonProps:{ref:e,onBlur:i,"data-sumo-test":"metricsQueryBuilder.addOperator"},className:t,disabled:o,onClick:e=>{s(e)}},r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.addOperator")),Kf=Jy("metrics_selector"),Yf=({term:e,timeRange:t,queryData:i,variables:r,hasUnexpectedTokenError:n})=>{const{startTime:a,endTime:s}=Ie.timeRangeUtil.parseTimeRangeDetails(t),o=[a,s],l=jp(n?[]:i.filters,r);return{key:"metric",term:e,filters:wm(l),range:o}},Zf=(e,t)=>({data:Ip([...Rp(e.variables,e.term),...t.valuesWithCount.map((e=>e.name))]),term:e.term,exhaustive:t.exhaustive}),Xf=e=>e.pipe((0,Ge.h)((({type:e})=>"CancelMetricSuggestionsQuery"===e||"FetchMetricSuggestionsIntent"===e))),Jf=e=>(t,i)=>t.pipe((0,Le.l)("FetchMetricSuggestionsIntent"),(0,Ke.M)(i),(0,Qe.w)((([{payload:t},{suggestions:i}])=>{const r=Yf(t);if(t.forceFetch)return(0,Pe.of)({type:"FetchMetricSuggestions",payload:Ct(xt({},t),{isResultInCache:e.areValuesWithinKeyCached(r)})});const n=i?Hm({term:r.term,previousSuggestions:i,getAllSuggestions:()=>((e,t)=>{const i=Ct(xt({},e),{term:""}),r=t.getValuesWithinKey(Yf(i));return r?Zf(i,r):void 0})(t,e),keyMatchingStrategy:"tokenize"}):void 0;return n?(0,Pe.of)({type:"GetMetricSuggestionsFromPreviousSuggestions",payload:{newSuggestions:n,term:t.term}}):(0,Pe.of)({type:"FetchMetricSuggestions",payload:Ct(xt({},t),{isResultInCache:e.areValuesWithinKeyCached(r)})})}))),e_={error:"",isLoading:!1},t_=(e,t)=>{switch(t.type){case"FetchMetricSuggestions":return((e,{payload:{isResultInCache:t}})=>Ct(xt({},e),{isLoading:!t}))(e,t);case"FetchMetricSuggestionsSuccess":return((e,{suggestions:t})=>Ct(xt({},e),{isLoading:!1,error:void 0,suggestions:Ct(xt({},t),{data:Am(t)})}))(e,t);case"FetchMetricSuggestionsFailure":return((e,t)=>Ct(xt({},e),{isLoading:!1,suggestions:void 0,error:t.errorMessage}))(e,t);case"CancelMetricSuggestionsQuery":return{isLoading:!1,suggestions:void 0,error:void 0};case"GetMetricSuggestionsFromPreviousSuggestions":return((e,t)=>Ct(xt({},e),{suggestions:t.payload.newSuggestions,term:t.payload.term}))(e,t);case"FetchMetricSuggestionsIntent":case"MetricSuggestionSelected":case"PreloadMetricCache":case"FetchMetricSuggestionsRequest":return e}},i_="autoComplete___Hbm5-",r_="suggestions___f-gvX",n_="inputField___FA4QG",a_="autoCompleteSecondaryAction___0Dz9o",s_=e=>!e.current||e.current instanceof HTMLInputElement,o_=(I_=xg,(e,t)=>(0,Fe.T)((e=>t=>t.pipe((0,Le.l)("FetchMetricSuggestions"),(0,Qe.w)((i=>{const n=Yf(i.payload);return Ue.y.create((e=>{e.next(i)})).pipe((0,r.debounceTimeOrCancel)(wp(e.areValuesWithinKeyCached(n)),(()=>Xf(t))),(0,We.U)((e=>({type:"FetchMetricSuggestionsRequest",payload:e.payload}))),(0,ze.R)(Xf(t)))}))))(I_)(e),Jf(I_)(e,t),((e,t=Yf,i=Kf)=>n=>n.pipe((0,Le.l)("FetchMetricSuggestionsRequest"),(0,Qe.w)((({payload:a})=>(i.markStart(a.rowKey),e.searchValuesWithinKey(t(a)).pipe((0,We.U)((({result:e,wasResultInCache:t})=>(i.measureFinish(a.rowKey,t),e))),(0,We.U)((e=>({type:"FetchMetricSuggestionsSuccess",suggestions:Zf(a,e)}))),(0,He.K)((0,r.ifSumoErrorResponse)((e=>(0,Pe.of)({type:"FetchMetricSuggestionsFailure",errorMessage:e.errors[0].message})))),(0,ze.R)(Xf(n))))))))(I_)(e),(e=>e.pipe((0,Le.l)("MetricSuggestionSelected"),(0,We.U)((()=>({type:"CancelMetricSuggestionsQuery"})))))(e),(e=>t=>t.pipe((0,Le.l)("PreloadMetricCache"),(0,Qe.w)((({payload:t})=>e.searchValuesWithinKey(Yf(t)))),(0,Ye.l)()))(I_)(e)).pipe((0,Ze.X)())),l_=e=>""===e.metric.trim()&&0===e.filters.length&&0===e.operators.length,c_=({onChange:e,onKeyDown:t,rowKey:i,timeRange:s,queryData:o,variables:l,hasUnexpectedTokenError:c,inputRef:d})=>{const[u,p]=sg(e_,t_,o_),[h,m]=(0,n.useState)(o.metric),{startMeasuringTimeToRenderSuggestions:g}=df({componentName:"new_metrics_metric_selector",suggestions:u.suggestions,rowKey:i});(0,n.useEffect)((()=>{p({type:"PreloadMetricCache",payload:{timeRange:s,queryData:o,rowKey:i,term:"",variables:l,hasUnexpectedTokenError:c}})}),[i,o,s,p,l,c]),(({dispatch:e,rowKey:t,timeRange:i,queryData:a,variables:s,hasUnexpectedTokenError:o})=>{const l=(0,r.usePrevious)(a.filters);(0,n.useEffect)((()=>{const r=!!l&&a.filters.length>l.length;a.filters!==l&&!r&&e({type:"FetchMetricSuggestionsIntent",payload:{term:a.metric,rowKey:t,timeRange:i,queryData:a,variables:s,hasUnexpectedTokenError:o,forceFetch:!0}})}),[e,l,t,i,a,s,o])})({dispatch:p,timeRange:s,variables:l,hasUnexpectedTokenError:c,queryData:o,rowKey:i});const[y,v]=(0,n.useState)();(0,n.useEffect)((()=>{y&&y()}),[y]);const f=(0,n.useCallback)((e=>{g(),v((()=>()=>p({type:"FetchMetricSuggestionsIntent",payload:{term:e,rowKey:i,timeRange:s,queryData:o,variables:l,hasUnexpectedTokenError:c}})))}),[g,p,i,s,o,l,c]),_=Cg({cancelSuggestions:()=>p({type:"MetricSuggestionSelected"}),onChange:e}),E=(0,n.useCallback)((e=>{_((0,S.Z)((0,b.Z)(e,"value")))}),[_]),T=(0,n.useCallback)((e=>{f(e),m(e)}),[f]),x=(0,n.useCallback)((()=>{h!==o.metric&&E([{label:h,value:h}])}),[h,o.metric,E]),C=(0,n.useMemo)((()=>(e=>e?[{label:e,value:e}]:[])(h)),[h]),A=(0,n.useMemo)((()=>{const e=u.suggestions;if(e)return Ct(xt({},e),{term:h})}),[u.suggestions,h]),{getSuggestionsWithSearchText:w,getHighlightedLabelSegments:I}=uf(A),R=(0,n.useMemo)((()=>w()),[w]);return n.createElement(a.Tooltip,{title:o.metric,placement:"top"},n.createElement(hf,{onKeyDown:t},n.createElement(a.AutoComplete,{label:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.metric"),dataSumoTest:{input:"sharedAnalytics.metricsMetricSelector.input",suggestions:"sharedAnalytics.metricsMetricSelector.suggestions"},inlineLabel:!0,optional:!0,className:i_,placeholder:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.metricSelectorPlaceholder"),dense:!0,loading:u.isLoading,error:u.error,selectedItems:C,items:R,categoriesComparator:mm,uncategorizedItemsShouldComeFirst:!0,onSelectedItemsChange:E,onSearchTextChange:T,onBlur:x,onIsOpenChange:e=>{e&&f(h)},isFilteringEnabled:!1,styleProps:{inputField:n_,secondaryAction:a_,suggestionBox:r_},clearable:!0,defaultHighlightedIndex:0,getHighlightedLabelSegments:I,createItemOnBlur:!0,createItemOnEnter:!0,inputRef:d&&s_(d)?d:void 0,flexibleWidth:!0,suggestionsListMaxHeight:400,autoFocus:l_(o)})))},d_={AddOperator:new Set([Vt.Alt,Vt.Shift,Vt.Plus])},u_=Ht(d_),p_={"row-fields":"row-fields___98mf7",rowFields:"row-fields___98mf7",operator:"operator___nXvW5","remove-icon":"remove-icon___Gbelk",removeIcon:"remove-icon___Gbelk",operatorsMenu:"operatorsMenu___EHq-U","button-add-operators":"button-add-operators___yhQmd",buttonAddOperators:"button-add-operators___yhQmd",disabled:"disabled___ITjZ7"},h_={"row-fields":"row-fields___0sKDC",rowFields:"row-fields___0sKDC",operator:"operator___qu7SK","remove-icon":"remove-icon___4X-o4",removeIcon:"remove-icon___4X-o4",operatorsMenu:"operatorsMenu___ajrzs","button-add-operators":"button-add-operators___QUEQC",buttonAddOperators:"button-add-operators___QUEQC",disabled:"disabled___M61EG"},m_=(0,a.withCssModulesTheme)({brandLight:h_,brandDark:p_},h_,(({rowData:e,updateQueryData:t,timeRange:i,variables:s,styles:l,isFocused:d,onInputKeyDown:u,errors:p,inputRef:h})=>{const m=(0,n.useCallback)(((e,i)=>{const r=Object.keys(s).map((e=>`{{${e}}}`)),n=Oe(e,{queryString:{$set:Np(i,new Set(r))},metricsQueryData:{$set:i}});t(n)}),[s,t]),g=e.metricsQueryData,y=(0,n.useCallback)((t=>{const i=Ct(xt({},g),{filters:t});m(e,i)}),[m,g,e]),v=(0,n.useCallback)((t=>{if(g.filters[t]){const i=Ct(xt({},g),{filters:g.filters.map(((e,i)=>i===t?Ct(xt({},e),{negation:!e.negation}):e))});m(e,i)}}),[m,g,e]),{selectedOperators:f,selectableOperatorConfigs:_,areAllOperatorsValid:S,shouldAutoFocusOperatorInputRef:b,addOperator:E,changeOperatorData:T,resetOperatorData:x,removeOperator:A}=((e,t,i)=>{const[a,s]=(0,n.useState)("NewMetricsQueryData"===e.type?e.operators:[]),[l,d]=(0,n.useState)([...Qo]),u=(0,r.usePrevious)(e),p=De.currentUserHelper.hasFeatureFlag("UIMetricsStdDevOperator"),h=De.currentUserHelper.hasFeatureFlag("UIMetricsWhereOperator"),m=De.currentUserHelper.hasFeatureFlag("UIMetricsTimesliceOperator"),g=De.currentUserHelper.hasFeatureFlag("UIMetricsEwmaOperator");(0,n.useEffect)((()=>{d(Qo.filter((({operator:e})=>(p||e!==le.Operator.StandardDeviation)&&(h||e!==le.Operator.Where)&&(g||e!==le.Operator.Ewma)&&(m||e!==le.Operator.Timeslice))))}),[p,h,g,m]),(0,n.useEffect)((()=>{var t,i;const r=(0,c.Z)(u,"operators"),n=(0,c.Z)(e,"operators"),l=(0,o.Z)(r,n)?[]:(0,C.Z)(a,null!=(t=null==u?void 0:u.operators)?t:[],null!=(i=null==e?void 0:e.operators)?i:[],o.Z);(0,o.Z)(e,u)||s("NewMetricsQueryData"===e.type?e.operators.concat(l):[])}),[e,u,a]);const y=(0,r.usePrevious)(a),v=(0,n.useMemo)((()=>a.every(Ay)),[a]),f=(0,n.useRef)(!1);(0,n.useEffect)((()=>{"NewMetricsQueryData"!==e.type||!y||(0,o.Z)(y,a)||v&&t(i,Ct(xt({},e),{operators:a}))}),[y,a,t,e,i,v]);const _=(0,n.useCallback)((t=>{"NewMetricsQueryData"===e.type&&(f.current=!0,s((e=>[...e,wy(t)])))}),[e.type,s]),S=(0,n.useMemo)((()=>a.reduce(((e,t,i)=>(e[i]=e=>{const t=(0,r.immutablySetAtIndex)({array:a,index:i,update:wy(e)});s(t)},e)),{})),[a]),b=(0,n.useCallback)((e=>S[e]),[S]),E=(0,n.useCallback)((t=>i=>{"NewMetricsQueryData"===e.type&&s((e=>(0,r.immutablySetAtIndex)({array:e,index:t,update:i})))}),[e.type]),T=(0,n.useCallback)((t=>{"NewMetricsQueryData"===e.type&&s((e=>(0,r.immutablyRemove)(e,t)))}),[e.type,s]);return{selectedOperators:a,selectableOperatorConfigs:l,areAllOperatorsValid:v,shouldAutoFocusOperatorInputRef:f,addOperator:_,changeOperatorData:E,resetOperatorData:b,removeOperator:T}})(g,m,e),w=(0,n.useRef)(null),I=(0,n.useCallback)((t=>{const i=t[0]||"";i&&setTimeout((()=>{var e;null==(e=w.current)||e.focus()}));const r=Oe(g,{metric:{$set:i}});m(e,r)}),[g,e,m]),R=0===g.metric.trim().length,D=0===g.filters.length,O=R&&D,N=O||!S,M=(0,n.useMemo)((()=>{var e;return null!=(e=null==p?void 0:p.some((({message:e,type:t})=>"error"===t&&e.includes("Unexpected token"))))&&e}),[p]),{buttonRef:k,isMenuOpen:L,buttonProps:P,menuProps:F}=dg({preventFocusingButtonRef:b});return Ni((0,n.useMemo)((()=>({keys:d_.AddOperator,action:()=>{var e;!d||null==(e=k.current)||e.click()}})),[k,d])),n.createElement("div",{className:l.rowFields},n.createElement(c_,{rowKey:e.queryKey,timeRange:i,queryData:g,onChange:I,variables:s,hasUnexpectedTokenError:M,inputRef:h,onKeyDown:u}),n.createElement(Af,{rowKey:e.queryKey,queryData:g,timeRange:i,onFilterItemsSelected:y,onFilterNegationToggled:v,variables:s,hasUnexpectedTokenError:M,inputRef:w,onKeyDown:u}),n.createElement(n.Fragment,null,n.createElement(n.Fragment,null,f.map(((e,t)=>{const o=jo[e.key].fullName;return n.createElement("div",{className:ue(l.operator,{[l.disabled]:O}),key:`operator-${e.key}-${t}`,"data-sumo-test":`metricsQueryBuilder.operator.${o}`},n.createElement(Cy,{selectedOperatorData:e,disabled:O,changeOperatorData:T(t),resetOperatorData:x(t),variables:s,queryData:g,timeRange:i,onInputKeyDown:u,shouldAutoFocusOperatorInputRef:b,selectableOperators:_}),n.createElement(a.IconButton,{className:l.removeIcon,buttonProps:{"data-sumo-test":"metricsQueryBuilder.removeOperator",title:r.i18nUtil.get("sharedAnalytics.removeOperator")},icon:"x",size:"small",onClick:()=>A(t)}))}))),n.createElement(a.Menu,{btnRenderer:e=>{const t=n.createElement(Gf,{addOperatorButtonRef:k,className:l.buttonAddOperators,disabled:N,onClick:t=>{P.onClick(e,t)},onBlur:P.onBlur});return n.createElement(a.Tooltip,{open:!L&&void 0,title:n.createElement(kt,{label:r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.addOperator"),shortcut:u_.AddOperator}),placement:"top"},n.createElement("div",null,t))},onClose:F.onClose,dense:!0,classes:{paper:l.operatorsMenu}},_.map((e=>n.createElement(Py,{config:e,key:e.fullName},n.createElement(a.Menu.Item,{onClick:()=>{E(e.operator)},"data-sumo-test":`metricsQueryBuilder.operatorItem.${e.fullName}`},n.createElement(a.Menu.Text,null,e.fullName))))))))})),g_={autocompleteResetItem:"autocompleteResetItem___FtPUX",autocompleteHeading:"autocompleteHeading___oS9bc",autocompleteItem:"autocompleteItem___Tzjnh",autocompleteHint:"autocompleteHint___GW7Kl",autocompleteSecondaryAction:"autocompleteSecondaryAction___cflgN",autocompleteLabel:"autocompleteLabel___zovR6",autocompleteItemLoading:"autocompleteItemLoading___UKoyP",codeEditorWrapper:"codeEditorWrapper___KzjQv",codeEditor:"codeEditor___sAHye",retentionMessage:"retentionMessage___LlGbD",withComparatorsSuggestions:"withComparatorsSuggestions___X40mH",operatorTooltip:"operatorTooltip___7X1LV",fullName:"fullName___D6DDa",code:"code___C1PYi",description:"description___b6hkn",documentationLink:"documentationLink___cXUu-",categoryOperator:"categoryOperator___ZEZkz",categoryActivePart:"categoryActivePart___iP0-P"},y_={autocompleteResetItem:"autocompleteResetItem___hCpuH",autocompleteHeading:"autocompleteHeading___k8s-c",autocompleteItem:"autocompleteItem___ISHqU",autocompleteHint:"autocompleteHint___rT2bz",autocompleteSecondaryAction:"autocompleteSecondaryAction___JcNBQ",autocompleteLabel:"autocompleteLabel___3AoXE",autocompleteItemLoading:"autocompleteItemLoading___HG3X5",codeEditorWrapper:"codeEditorWrapper___MhLof",codeEditor:"codeEditor___6YLUg",retentionMessage:"retentionMessage___u3iC4",withComparatorsSuggestions:"withComparatorsSuggestions___yUwqJ",operatorTooltip:"operatorTooltip___zpoyB",fullName:"fullName___pdJef",code:"code___FjZlk",description:"description___QK7i9",documentationLink:"documentationLink___4LLW-",categoryOperator:"categoryOperator___nghlg",categoryActivePart:"categoryActivePart___BtVa2"},v_={completeSingle:!1,closeOnPick:!1,updateOnCursorActivity:!1,paddingForScrollbar:!1,moveOnOverlap:!1},f_=(e=[],t)=>{const i=Array.isArray(e)?e:[...e.values()];return t?i.filter((e=>e!==t)):i},__=(e,t,i)=>Object.values(t).filter(((e,t)=>t<i)).map((t=>e[t].length+i)).reduce(((e,t)=>e+t),0),S_=(e=[],t)=>e.some((e=>e.index===t)),b_=({resultType:e,metadata:t})=>"Operators"===e||null!=(null==t?void 0:t.operator),E_=(e,t)=>{var i;if(!t)return t;const{resultType:r,activeQueryLine:n,start:a,metadata:s}=e;if(b_(e))return`${(null==s?void 0:s.prefix)||""}${t}${(null==s?void 0:s.suffix)||""}`;if("Comparators"===r)return t;const o="|"===n[a];return"Key"===r?`${o?" ":""}${Pp(t)} `:`${o?"=":""}${Pp(t)}${null!=(i=null==s?void 0:s.suffix)?i:""} `},T_=(e,t)=>{const i=document.getElementById(L_);if(!i)return;i.innerHTML="";const{x:r,y:n}=t.getBoundingClientRect();i.style.left=`${r+128}px`,i.style.top=n-i.clientHeight/2+t.clientHeight/2+"px",i.style.opacity="1",i.style.visibility="visible",i.appendChild(e)},x_=e=>{const t=document.getElementById(L_);!t||(null==e?void 0:e.relatedTarget)&&t.contains(e.relatedTarget)||(t.innerHTML="",t.style.left="0",t.style.top="0",t.style.opacity="0",t.style.visibility="hidden")},C_=(e,t)=>{e.tooltip?T_(e.tooltip,t):x_()},A_=({suggestions:e,codeMirrorEditor:t,parsedSelection:i,wrapperElement:s,onSubmit:o,onSuggestionsListMouseDown:l,suggestionsCategoriesNodes:c})=>{const d=(0,n.useMemo)((()=>Ct(xt({},v_),{container:s})),[s]),{styles:u}=(0,a.useTheme)({light:y_,brandLight:y_,dark:g_,brandDark:g_}),p=(0,n.useCallback)((()=>{t.closeHint()}),[t]),h=(0,r.usePrevious)(e);(0,n.useEffect)((()=>{if(!(t&&i&&e&&t.hasFocus()))return;if(!i.resultType)return void p();if(h===e)return;const r=[],n=e.some((e=>e.categories)),a=Ct(xt({},d),{hint:()=>{const a=n?((e=[])=>Object.fromEntries(Object.entries(e.reduce(((e,t)=>(f_(t.categories,uv).forEach((i=>{e[i]||(e[i]=[]),e[i].push(t)})),e)),{})).sort((e=>{const t=e[0];return mm(t)}))))(e):void 0,s=n?(e=>e&&Object.keys(e).map(((t,i,r)=>({label:t,index:__(e,r,i)}))))(a):void 0,d=n?(e=>{const t={label:"",value:""};let i=Object.values(e).flatMap((e=>[t].concat(e)));return e.length>0&&(i=[t,...e]),i})(a||e):e,h=e=>{if(S_(s,e))return t=>{var i,n;const a=qy({className:u.autocompleteHeading}),o=(null==(i=null==s?void 0:s.find((({index:t})=>t===e)))?void 0:i.label)||"";o&&c&&c[o]?a.appendChild(c[o]):a.innerText=o,t.appendChild(a),null==(n=t.parentElement)||n.addEventListener("mousedown",(()=>{l()})),r.push({element:t,event:"mousedown",callback:l})};{const t=d[e];if(t.secondaryAction||t.tooltip||t.suggestionsLabel)return(e=>t=>{var i,n;const a=document.createElement("div");a.className=u.autocompleteLabel,a.innerText=null!=(i=e.suggestionsLabel)?i:e.label,f_(e.categories).includes(uv)&&t.classList.add(u.autocompleteHint);const s=[a];if(e.secondaryAction){const t=document.createElement("span");t.className=u.autocompleteSecondaryAction,t.innerText=e.secondaryAction,s.push(t)}if(e.tooltip){const i=()=>T_(e.tooltip,t);t.addEventListener("mouseenter",i),r.push({element:t,event:"mouseenter",callback:i}),t.addEventListener("mouseleave",x_),r.push({element:t,event:"mouseleave",callback:x_})}t.append(...s),null==(n=t.parentElement)||n.addEventListener("mousedown",l),r.push({element:t,event:"mousedown",callback:l})})(t)}};return Ct(xt({},(e=>{const{resultType:t,activeQueryLine:i,line:r,start:n,end:a}=e;if(b_(e))return{from:{line:r,ch:n},to:{line:r,ch:a+1}};const s="Key"===t,o=n===a&&$v.includes(i[n]),l="|"===i[n],c=l?n-1:n;let d=o||l?a:a+1;return s&&"="===i[d]&&(d+=1),{from:{line:r,ch:c},to:{line:r,ch:d}}})(i)),{list:d.map(((e,r)=>{var n;const a=S_(s,r),l=t.getDoc().getCursor();return{text:E_(i,e.label),displayText:null!=(n=e.suggestionsLabel)?n:e.label,className:a?u.autocompleteResetItem:u.autocompleteItem,from:Ct(xt({},l),{ch:i.start}),to:Ct(xt({},l),{ch:i.end}),render:h(r),moveCursor:e.moveCursor,tooltip:e.tooltip,hint:a?()=>{p(),null==o||o()}:(e,t,i)=>{if(e.replaceRange(i.text,i.from||t.from,i.to||t.to,"complete"),i.moveCursor){const t=e.getDoc().getCursor();e.setCursor(Ct(xt({},t),{ch:t.ch+i.moveCursor}))}}}}))})}});((e,t)=>{e.showHint(t)})(t,a),t.state.completionActive&&(it.on(t.state.completionActive.data,"select",C_),it.on(t.state.completionActive.data,"pick",x_)),t.on("endCompletion",(()=>{setTimeout(x_,100),r.forEach((e=>e.element.removeEventListener(e.event,e.callback)))}))}),[t,h,i,e,s,o,d,p,l,u,c])},w_="sumoql-metrics";var I_;class R_{syntaxError(){}}const D_=new Wm,O_=e=>{const t=pe.CharStreams.fromString(e),i=new br(t);i.removeErrorListeners();const r=new pe.CommonTokenStream(i),n=new Tr(r);return n.removeErrorListeners(),n.addErrorListener(new R_),{parser:n,tokens:r}},N_=(e,t)=>{qm(t).forEach((t=>{e[(e=>e.start.line+"_"+e.start.line+"-"+e.end.line+"_"+e.end.char)(t)]=t}))},M_=navigator.userAgent.toLowerCase().includes("jsdom"),k_={fn:(e,t)=>{const i=(0,A.Z)(((e,t)=>{(e=>{const t=e.getDoc().getAllMarks();e.operation((()=>{t.forEach((e=>e.clear()))}))})(e);const{parser:i,tokens:r}=O_(t),n=i.queryRow(),a=D_.visit(n);N_(a,r),((e,t)=>{const i=t.getDoc(),r=Object.values(e).reduce(((e,t)=>{const i=(0,it.Pos)(t.start.line-1,t.start.char),r=(0,it.Pos)(t.end.line-1,t.end.char+1);return[...e,...t.types.map((e=>{const t=`antlr-${e}`;return{startPos:i,endPos:r,options:{className:t,startStyle:`${t}-start`,endStyle:`${t}-end`,clearOnEnter:!1}}}))]}),[]);t.operation((()=>{r.length&&r.reverse().forEach((e=>{i.markText(e.startPos,e.endPos,e.options)}))}))})(a,e)}),25),r=(0,oe.default)(((e,t)=>i(e,t)));return{token:e=>{const i=e.string;if(!t.editor)return e.skipToEnd(),null;const n=t.editor.getDoc().getValue();return r(t.editor,n),e.skipToEnd(),i.match(/^\s*\/\/.*/)?"comment":null}}},name:w_},L_="advanced-mode-suggestions-tooltip",P_=(0,a.withCssModulesTheme)({light:y_,brandDark:g_},y_,(({queryType:e,queryString:t,queryId:i,timeRange:s,variables:o,inputRef:l={current:void 0},onValueUpdated:c,preventFocusingActionsButtonRef:d,autofocus:u=!1,styles:p,readOnly:h,onAutoHide:m})=>{const g=(0,n.useRef)(t),[y,v]=(0,n.useState)(),[f,_]=(0,n.useState)(),S=(0,n.useRef)(null);(0,n.useEffect)((()=>{const e=S.current,t=e=>{E.current&&e.stopPropagation()};null==e||e.addEventListener("keydown",t);let i=document.getElementById(L_);return i||(i=document.createElement("div"),i.setAttribute("id",L_),i.setAttribute("data-sumo-test",L_),document.body.appendChild(i)),()=>{null==e||e.removeEventListener("keydown",t)}}),[]);const b=(0,n.useRef)(!1),E=(0,n.useRef)(!1);(0,n.useEffect)((()=>{d&&(d.current=!0)}),[d]);const T=(0,n.useRef)(u);ag({elemRef:l,shouldAutoFocus:T});const{parsedSelection:x,isLoading:C,suggestions:A,parseSuggestions:w,cancelParsingSuggestions:I,suggestionsCategoriesNodes:R,isSuggestingComparators:D}=sf({rowKey:i,timeRange:s,variables:o}),O=(0,n.useCallback)((()=>{b.current=!0}),[]),N=(0,n.useCallback)(((e,t=!0)=>{var r,n;if(h)return;const a=null!=e?e:f;if(a){const e=a.getDoc().getValue();if(De.currentUserHelper.hasFeatureFlag("UIMetricsJoiningAutoHide")&&m){const t=Km(e).filter((({type:e,value:t})=>"RowVar"===e&&t!==i)).map((({value:e})=>e.replace("#","")));m(t)}(null==(n=null==(r=null==a?void 0:a.curOp)?void 0:r.changeObjs)?void 0:n.some((({origin:e})=>"complete"===e)))&&(E.current=!0,setTimeout((()=>{E.current=!1}))),null==c||c(e,t)}}),[f,c,h,m,i]),M=(0,n.useCallback)((()=>{I(),N()}),[I,N]);(({querySelection:e,parseSuggestions:t})=>{const i=(0,r.usePrevious)(e);(0,n.useEffect)((()=>{i&&e&&(e.query!==i.query||e.start!==i.start||e.end!==i.end||e.line!==i.line)&&t(e)}),[i,e,t])})({querySelection:y,parseSuggestions:w}),(({isLoading:e,codeMirrorEditor:t,parsedSelection:i,wrapperElement:s,onSubmit:o})=>{const l=Ct(xt({},v_),{container:s}),c=(0,n.useContext)(a.ThemeContext),{styles:d}=(0,a.useTheme)({light:y_,brandLight:y_,dark:g_,brandDark:g_}),u=(0,n.useCallback)((()=>{t.closeHint()}),[t]),p=(0,r.usePrevious)(e),h=(0,r.usePrevious)(i);(0,n.useEffect)((()=>{if(t&&(p&&!e&&u(),e&&(!p||(null==i?void 0:i.start)!==(null==h?void 0:h.start)))){const e=Ct(xt({},l),{hint:()=>{var e,t;const r=null!=(e=null==i?void 0:i.line)?e:0,s=null!=(t=null==i?void 0:i.start)?t:0;return Ct(xt({},{from:{line:r,ch:s},to:{line:r,ch:s}}),{list:[{text:"",className:d.autocompleteItemLoading+" js-sumo-test_advancedAutocompleteLoading",render:e=>{tt.render(n.createElement(a.ThemeProvider,{theme:c},n.createElement(a.SkeletonLoadingPanel,{numRows:3,showPadding:!0,dense:!0})),e)},hint:()=>{u(),null==o||o()}}]})}});t.showHint(e)}}),[t,p,e,h,i,s,o,l,u,c,d])})({isLoading:C,codeMirrorEditor:f,parsedSelection:x,wrapperElement:S.current,onSubmit:M}),A_({suggestions:A,codeMirrorEditor:f,parsedSelection:x,wrapperElement:S.current,onSubmit:N,onSuggestionsListMouseDown:O,suggestionsCategoriesNodes:R});const k=(0,n.useCallback)((e=>{if(h)return;const t=e.getDoc().getCursor("start");v({query:e.getDoc().getValue(),start:t.ch,end:e.getDoc().getCursor("end").ch,line:t.line})}),[h]),L=(0,n.useCallback)((e=>{_(e),k(e),l&&(l.current=e)}),[l,k]),P=(0,n.useCallback)((e=>{h||(N(e,!1),k(e))}),[N,k,h]),F=(0,n.useCallback)((e=>{h||k(e)}),[k,h]),U=(0,n.useCallback)((e=>{if(h)return;const t=e.getDoc().getCursor("start");w({query:e.getDoc().getValue(),start:t.ch,end:e.getDoc().getCursor("end").ch,line:t.line})}),[w,h]),V=e=>{e.toggleComment({lineComment:"//",padding:""})},B=e=>{const t=e.getDoc();t.replaceRange("\n",t.getCursor("start"))},$=(0,n.useCallback)((e=>{h||(!b.current&&!T.current&&U(e),b.current=!1,T.current=!1)}),[U,h]),H=(0,n.useCallback)((e=>{U(e)}),[U]),W=De.currentUserHelper.getUserSetting("enterKeyRunsQuery"),q=(0,n.useMemo)((()=>({extraKeys:{Tab:!1,"Shift-Tab":!1,Enter:e=>{W||B(e),N(e)},"Ctrl-Space":U,"Ctrl-/":V,"Ctrl-Enter":B,"Alt-Enter":W?B:null,"Cmd-/":V},gutters:[],lineNumbers:!1,placeholder:r.i18nUtil.get(`sharedAnalytics.queryInput.emptyQueryRowPlaceholder.${e}`),styleActiveLine:!1,viewportMargin:1/0,comment:!0})),[e,U,N,W]);return n.createElement("div",{ref:S,className:ue(p.codeEditorWrapper,{[p.withComparatorsSuggestions]:D}),"data-sumo-test":"metrics-advanced-code-editor-wrapper",style:M_?{position:"relative"}:void 0},n.createElement(a.CodeEditor,{className:p.codeEditor,dataSumoTest:"metrics-advanced-code-editor",defineMode:k_,editorDidMount:L,language:w_,noBorder:!0,onChange:P,onCursorActivity:F,onFocus:$,onMouseDown:H,options:q,readOnly:h,value:g.current}))}));const F_=new class{constructor(){this.setQueryString=(e,t)=>{const{editor:i}=t;void 0!==e&&i.getValue()!==e&&i.setValue(e)}}getCompletionModel(e=SumoApp.context){return new rt.SearchCompletionsModel({context:e})}getQueryEditor(e){return new rt.SearchQueryExpressionEditorView(e)}getDefaultEditorConfig(){const e={};return e.context=SumoApp.context,e.context.searchCompletionsModel=this.getCompletionModel(e.context),e.zIndex=1081,e}},U_="log-query-editor___wRmDk";class V_ extends n.PureComponent{constructor(e){super(e),this.onChangeEditorQuery=()=>{this.updateQuery(!1)},this.updateQuery=(e=!0)=>{var t,i;const r=this.expressionEditorView.getValue();null==(i=(t=this.props).updateQueryString)||i.call(t,r,e)},this.onInputBlur=()=>{const{onInputBlur:e}=this.props;e&&e()},this.queryEditorRef=n.createRef(),this.autocompleteContainerRef=n.createRef()}componentDidMount(){const e=F_.getDefaultEditorConfig(),t=Ct(xt({},e),{el:this.queryEditorRef.current,bUseComplete:!this.props.disableAutocomplete,bEnterStartsSearch:!0,initialFocus:""===this.props.queryString.trim(),containingView:"#log-query-editor",onBlur:this.onInputBlur,onEditorDomUpdate:this.onChangeEditorQuery,onStartSearchQuery:this.updateQuery,placeholderText:this.props.placeholderText,readOnly:this.props.readOnly,autocompleteContainer:this.autocompleteContainerRef.current});this.expressionEditorView=F_.getQueryEditor(t),this.expressionEditorView.setValue(this.props.queryString,!0),this.props.inputRef&&(this.props.inputRef.current={focus:()=>{this.expressionEditorView.focusEditor()}})}componentWillUnmount(){this.expressionEditorView.destroy()}componentDidUpdate(e){const t=this.expressionEditorView.editor.getValue(),{queryString:i}=this.props;this.props.queryString!==e.queryString&&!(0,o.Z)(t,i)&&F_.setQueryString(i,this.expressionEditorView)}render(){const{dataSumoTest:e}=this.props;return n.createElement("div",{id:"log-query-editor","data-sumo-test":e,className:U_},n.createElement("div",{id:"search-input-area",ref:this.autocompleteContainerRef}),n.createElement("textarea",{"data-sumo-test":"sharedAnalytics_logQueryEditor",spellCheck:!1,ref:this.queryEditorRef,id:"logQueryEditor"}))}}const B_="inputContainer___cqPcn",$_={},H_=n.memo((({queryType:e,queryString:t,updateQueryString:i,queryStringClearChanged:a,readOnly:s,disableAutocomplete:o,placeholder:l=r.i18nUtil.get("sharedAnalytics.queryInput.logsQueryEditorPlaceholder"),onInputKeyDown:c,onSubmit:d,inputRef:u,metricsProps:p,preventFocusingActionsButtonRef:h,autofocus:m,onAutoHide:g})=>{var y,v,f;const _=(0,n.useCallback)((0,r.useDebounce)(((e,t)=>{t?d(e,{forceSubmitIfRunQueriesButtonVisible:!0}):i(e,t)}),ip),[d,i]),S=(0,n.useCallback)(((e,t)=>{t?d(e):_(e,!1)}),[d,_]),b=e===le.QueryTypes.LOGS;return n.createElement("div",{className:B_,key:`query-editor-row-${a}`,onKeyDown:c},b?n.createElement(V_,{queryString:t,updateQueryString:_,placeholderText:l,readOnly:s,disableAutocomplete:o,inputRef:u}):n.createElement(P_,{queryType:e,queryString:t,queryId:null!=(y=null==p?void 0:p.queryId)?y:Re.FIRST_QUERY_KEY,timeRange:null!=(v=null==p?void 0:p.timeRange)?v:Gu,variables:null!=(f=null==p?void 0:p.variables)?f:$_,inputRef:u,onValueUpdated:S,preventFocusingActionsButtonRef:h,autofocus:m,onAutoHide:g}))}));var W_=(e=>(e.COUNT="count",e.COUNT_DISTINCT="count_distinct",e.CALCULATION="calculation",e.DURATION="duration",e.CUSTOM="custom",e))(W_||{}),q_=(e=>(e.SPANS="spans",e))(q_||{}),j_=(e=>(e.SUM="sum",e.AVG="avg",e.MIN="min",e.MAX="max",e.PCT="pct",e))(j_||{});const Q_=e=>({queryKey:e,queryString:"",type:"AdvancedSpansQuery",queryType:le.QueryTypes.SPANS,spansQueryData:{facetsQueryString:"* | (endtimestamp - starttimestamp) / 1000 as duration  | json auto field=tags ",filters:[],visualizations:[],groupBy:[]}}),z_={NavigateUpQueryRows:new Set([Vt.Alt,Vt.Up]),NavigateDownQueryRows:new Set([Vt.Alt,Vt.Down]),NewQueryRow:new Set([Vt.Alt,Vt.Plus]),DuplicateQueryRow:new Set([Vt.Alt,Vt.Shift,Vt.q]),DeleteQueryRow:new Set([Vt.Alt,Vt.Minus]),ToggleQueryRowVisibility:new Set([Vt.Alt,Vt.Slash])},G_=Ht(z_),K_={SwitchQueryMode:new Set([Vt.Alt,Vt.Shift,Vt.a])},Y_=Ht(K_),Z_="quantizationInfo___fdX71",X_=({period:e,rollup:t})=>n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.queryBuilder.quantization.tooltip"),multiline:!0},n.createElement("div",{className:Z_,"data-sumo-test":"query-quantization-info"},r.i18nUtil.get("sharedAnalytics.queryBuilder.quantization.info",{granularity:(0,r.formatSeconds)(e/1e3),rollup:t}))),J_={iconWrapper:"iconWrapper___UoCgn",popoverContent:"popoverContent___SLil1",titleWrapper:"titleWrapper___dPJ-k",title:"title___f1N5y",stateOverlayWrapper:"stateOverlayWrapper___1GpGc",clearHistoryButton:"clearHistoryButton___KJb5G"},eS={iconWrapper:"iconWrapper___k-AiL",popoverContent:"popoverContent___hHTUc",titleWrapper:"titleWrapper___tJxrO",title:"title___39DXs",stateOverlayWrapper:"stateOverlayWrapper___0eIzD",clearHistoryButton:"clearHistoryButton___yVgJs"};let tS;const iS="ArrowDown",rS="ArrowUp",nS="Enter",aS=[iS,rS,nS],sS={queryHistoryEntry:"queryHistoryEntry___7dz5A",queryEntryWrapper:"queryEntryWrapper___eMzfn",query:"query___C3PMY",rowWrapper:"rowWrapper___flACz",wordsWrapper:"wordsWrapper___uVpap",dimensionValue:"dimensionValue___dg4n6",queryClause:"queryClause___yqLBd",positiveInteger:"positiveInteger___3pUy1",parameter:"parameter___jIZnx",metricNameSelector:"metricNameSelector___QpWyM",selectedEntry:"selectedEntry___7BY8L",defaultWordStyle:"defaultWordStyle___Ov3Vk",comment:"comment___MBvbO",reducerFn:"reducerFn___Kv3eJ",dimensionKey:"dimensionKey___O8SUi"},oS={queryHistoryEntry:"queryHistoryEntry___ZhjwC",queryEntryWrapper:"queryEntryWrapper___eIqVU",query:"query___rnrNp",rowWrapper:"rowWrapper___rMbsx",wordsWrapper:"wordsWrapper___Q-86e",dimensionValue:"dimensionValue___g0Gka",queryClause:"queryClause___bQ9t8",positiveInteger:"positiveInteger___AXRvZ",parameter:"parameter___fCHWc",metricNameSelector:"metricNameSelector___43XOu",selectedEntry:"selectedEntry___hhaoN",defaultWordStyle:"defaultWordStyle___CgGNo",comment:"comment___ItjfI",reducerFn:"reducerFn___JDEEJ",dimensionKey:"dimensionKey___lVcBC"},lS=["singleDimensionValueExpr","positiveInteger","positiveNumber","positiveTimeDuration","comment","reducerFn","rollupFn","dimensionKey","rateModifier","comparator","fillmissingParameter","ewmaParameter","evalExp","outlierParameter","positiveTimeDuration","metricNameSelector","aggregatorFn","fillmissing","eval","topBottom","filter","delta","ewma","parse","histogramQuantile","outlier","quantize","rate","timeShift","timeslice","where"],cS=new Wm,dS=(0,a.withCssModulesTheme)({brandLight:oS,brandDark:sS},oS,n.memo((e=>{const{queryString:t,variables:i,handleQuerySelectionFromHistory:r,selected:s,styles:o}=e,{parser:l,tokens:c}=O_(t),d=l.queryRow(),u=cS.visit(d);N_(u,c);const p=(e=>Object.values(e).some((e=>e.types.some((t=>"metricNameSelector"===t?!e.types.includes("selector"):lS.includes(t))))))(u),h=t.split("\n");return n.createElement("div",{"data-sumo-test":"query-history-entry",className:ue(o.queryHistoryEntry,{[o.selectedEntry]:s}),onClick:r},n.createElement(a.Text,{noWrap:!0,variant:"title",className:o.queryEntryWrapper},n.createElement("div",{className:o.query,"data-sumo-test":p?"query-with-highlights":"query"},p?h.map(((e,r)=>{const a=((e,t)=>{let i="";const r=[];return t.split("").reduce(((n,a,s)=>{var o,l,c,d,u,p,h;if((null==(o=e[s])?void 0:o.start)&&(null==(l=e[s])?void 0:l.end))return n.push({word:i,type:r[r.length-1]},{word:a,type:null==(c=e[s])?void 0:c.type}),i="",n;if(null!=(d=e[s])&&d.start)return n.push({word:i,type:r[r.length-1]}),r.push(e[s].type),i=a,n;if((null==(u=e[s])?void 0:u.end)||s===t.length-1){if(n.push({word:i+a,type:r.pop()}),(null==(p=e[s])?void 0:p.endsFor)>1)for(let t=0;t<(null==(h=e[s])?void 0:h.endsFor)-1;t++)r.pop();return i="",n}return i+=a,n}),[])})(((e,t)=>Object.values(e).reduce(((e,i)=>{const r=i.types.find((e=>"metricNameSelector"===e?!i.types.includes("selector"):lS.includes(e)));return r?(e[i.start.line]||(e[i.start.line]={}),i.start.line!==i.end.line?(e[i.end.line]||(e[i.end.line]={}),e[i.start.line][i.start.char]={start:!0,type:r},e[i.start.line][t.length-1]={end:!0},e[i.end.line][0]={start:!0,type:r},e[i.end.line][i.end.char]={end:!0},e):(e[i.start.line][i.start.char]={start:!0,type:r},e[i.start.line][i.end.char]?(e[i.start.line][i.end.char].end=!0,e[i.start.line][i.end.char].endsFor++):e[i.start.line][i.end.char]={end:!0,endsFor:1},e)):e}),{}))(u,t)[r+1],e);return n.createElement(n.Fragment,{key:e},n.createElement("div",{className:o.rowWrapper},((e,t)=>{const i={singleDimensionValueExpr:t.dimensionValue,positiveInteger:t.positiveInteger,positiveNumber:t.positiveInteger,positiveTimeDuration:t.positiveInteger,comment:t.comment,reducerFn:t.reducerFn,dimensionKey:t.dimensionKey,fillmissingParameter:t.dimensionKey,ewmaParameter:t.dimensionKey,rollupFn:t.dimensionKey,evalExp:t.dimensionKey,rateModifier:t.dimensionKey,comparator:t.dimensionKey,outlierParameter:t.dimensionKey,aggregatorFn:t.queryClause,fillmissing:t.queryClause,eval:t.queryClause,topBottom:t.queryClause,filter:t.queryClause,delta:t.queryClause,ewma:t.queryClause,parse:t.queryClause,histogramQuantile:t.queryClause,outlier:t.queryClause,quantize:t.queryClause,rate:t.queryClause,timeShift:t.queryClause,timeslice:t.queryClause,where:t.queryClause,metricNameSelector:t.metricNameSelector};return n.createElement("div",{className:t.wordsWrapper},e.map(((e,r)=>n.createElement("span",{className:e.type?i[e.type]:t.defaultWordStyle,"data-sumo-test":`${e.type||"default"}-${r}`,key:e.word},e.word))))})(a,o),i&&r===h.length-1&&((e,t)=>Object.entries(e).map((([e,i])=>{const r=`${e}=${i}`;return n.createElement("span",{className:t.parameter,key:e},r)})))(i,o)))})):t)))}),((e,t)=>e.queryString===t.queryString&&e.selected===t.selected))),uS=(0,a.withCssModulesTheme)({brandLight:eS,brandDark:J_},eS,(e=>{var t;const{queryType:i,baseElementRef:s,handleQuerySelectionFromHistory:o,styles:l}=e,c=(0,n.useRef)(null),d=Jm()||[],u=i===le.QueryTypes.METRICS,{anchorClientRect:p,popoverOpen:h,openPopover:m,closePopover:g}=(e=>{const{baseElementRef:t}=e,[i,r]=(0,n.useState)(!1),[a,s]=(0,n.useState)({top:0,height:0,left:0,width:0});return(0,n.useLayoutEffect)((()=>{if((null==t?void 0:t.current)&&i){const e=(0,A.Z)((e=>{const{width:t,height:r}=e[0].contentRect;i&&(t!==a.width||r!==a.height)&&s(Ct(xt({},a),{height:r,width:t<500?500:t}))}),125);tS=new ResizeObserver(e),tS.observe(t.current)}return()=>null==tS?void 0:tS.disconnect()}),[t,i,a]),{anchorClientRect:a,popoverOpen:i,openPopover:()=>{const{current:e}=t,i=null==e?void 0:e.getBoundingClientRect();if(i){const{top:e,height:t,left:n,width:a}=i;s({top:e,height:t,left:n,width:a}),r(!0)}},closePopover:()=>{r(!1)}}})({baseElementRef:s}),{selectedIdx:y}=(e=>{const{popoverOpen:t,itemCount:i,queryHistoryListRef:r,handleQuerySelectionFromKeyboard:a}=e,[s,o]=(0,n.useState)(),l=(0,n.useCallback)(((e,t)=>{const n=r.current,a=n.querySelector(`[data-sumo-test="query-history-entry"]:nth-child(${e+2})`),s=n.parentElement,o=a.offsetTop,l=a.offsetHeight,c=s.scrollTop+300;if(t!==rS)if(t!==iS);else if(0===e)s.scroll(0,0);else if(o+l>c){const e=s.scrollTop+o+l-c;s.scroll(0,e)}else o+l<=s.scrollTop&&s.scroll(0,o);else if(e===i-1)s.scroll(0,s.scrollHeight);else if(o<=s.scrollTop)s.scroll(0,o);else if(o>=c){const e=s.scrollTop+o+l-c;s.scroll(0,e)}}),[i,r]),c=(0,n.useCallback)((e=>{if(aS.includes(e.code)&&t){if(e.preventDefault(),e.stopPropagation(),e.code===rS)return void o((t=>{const r=Number.isInteger(t)?t-1<0?i-1:t-1:i-1;return l(r,e.code),r}));if(e.code===iS)return void o((t=>{const r=Number.isInteger(t)?t+1>i-1?0:t+1:0;return l(r,e.code),r}));e.code===nS&&s&&a(s)}}),[s,l,a,i,t]);return(0,n.useEffect)((()=>(document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c))),[c]),(0,n.useEffect)((()=>{t||o(void 0)}),[t]),{selectedIdx:s}})({popoverOpen:h,itemCount:d.length,queryHistoryListRef:c,handleQuerySelectionFromKeyboard:e=>{g(),o(d[e])}});return n.createElement("div",{"data-sumo-test":"query-history"},n.createElement(a.Tooltip,{title:r.i18nUtil.get(u?"sharedAnalytics.queryHistory.tooltipTitleEnabled":"sharedAnalytics.queryHistory.tooltipTitleDisabled"),placement:"top","data-sumo-test":"query-history-tooltip"},n.createElement("div",{className:l.iconWrapper},n.createElement(a.IconButton,{icon:"history",size:"large",onClick:m,disabled:!u,"data-sumo-test":"query-history-button"}))),n.createElement(nt.ZP,{anchorReference:"anchorPosition",anchorPosition:{top:p?p.top+p.height+4:0,left:p?p.left:0},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:g,open:h},n.createElement("div",{"data-sumo-test":"query-history-popover-content",className:l.popoverContent,style:{width:null!=(t=null==p?void 0:p.width)?t:0},ref:c},0===d.length&&n.createElement("div",{className:l.stateOverlayWrapper},n.createElement(a.StateOverlay,{"data-sumo-test":"query-history-empty-state-overlay",iconName:"icon-act",title:r.i18nUtil.get("sharedAnalytics.queryHistory.noRecentQueriesTitle"),description:r.i18nUtil.get("sharedAnalytics.queryHistory.noRecentQueriesDescription"),textButtonConfigs:[{buttonTitle:r.i18nUtil.get("noRecentQueriesClose"),onClick:g,"data-sumo-test":"query-history-close-button"}]})),d.length>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:l.titleWrapper},n.createElement(a.Text,{noWrap:!0,variant:"title",className:l.title},r.i18nUtil.get("sharedAnalytics.queryHistory.noRecentQueriesListTitle"))),d.map(((e,t)=>n.createElement(dS,{key:e.id,queryString:e.query.queryString,variables:e.variables,handleQuerySelectionFromHistory:()=>{g(),o(e)},selected:t===y})))))))})),pS="disabled-switch-button___vk4fd",hS=({tooltip:e,text:t,onClick:i,disabled:r})=>n.createElement(a.Tooltip,{debounced:!0,placement:"left",title:e},n.createElement(a.Menu.Item,{className:r?pS:"","data-sumo-test":"sharedAnalytics_switchQueryMode",onClick:i},n.createElement(a.Menu.Text,null,t))),mS=({rowData:e,canSwitchToBasic:t,updateQueryMode:i})=>{const a=(0,n.useMemo)((()=>Pf(e.queryString)),[e.queryString]);if(e.metricsQueryMode===le.QueryModes.BASIC){const t=()=>{i({mode:le.QueryModes.ADVANCED,query:e})};return n.createElement(hS,{tooltip:n.createElement(kt,{label:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.switchToAdvancedMode"),shortcut:Y_.SwitchQueryMode}),text:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.advancedMode"),onClick:t})}if(t||"object"==typeof a){const t=()=>{i({mode:le.QueryModes.BASIC,query:e,basicQueryData:"object"==typeof a?a:void 0})};return n.createElement(hS,{tooltip:n.createElement(kt,{label:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.switchToBasicMode"),shortcut:Y_.SwitchQueryMode}),text:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.basicMode"),onClick:t})}return n.createElement(hS,{tooltip:r.i18nUtil.get("sharedAnalytics.queryEditorRow.cannotSwitchToBasicMode"),text:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.basicMode"),disabled:!0})},gS=n.memo((({queryType:e})=>{const{icon:t}=tp[e];return n.createElement(a.Icon,{name:t,size:"large"})})),yS="selectLabel___Btb7d",vS="toggleIcon___Lb-Wy",fS=e=>n.createElement(gS,{queryType:e}),_S={"data-sumo-test":"mewboard_queryEditorType_opened"},SS=n.memo((({supportedQueryTypes:e,allowedQueryTypes:t,updateQueryType:i,queryType:s,className:o})=>{const l=(0,n.useMemo)((()=>({"data-sumo-test":"mewboard_queryEditorType",SelectDisplayProps:{className:o}})),[o]);return n.createElement(a.Select,{optional:!0,selectProps:l,menuProps:_S,value:s,renderValue:fS,handleChange:i,openOnFocus:!0,className:vS,borderless:!0},e.map((e=>{const i=`newboard-query-type-${e.value.toLowerCase()}`,s=!t.has(e.value),o=n.createElement(a.Select.Item,{key:i,value:e.value,disabled:s},n.createElement(a.Icon,{name:e.icon,size:"medium"}),n.createElement("span",{className:yS,"data-sumo-test":i},r.i18nUtil.get(e.label)));return s?n.createElement(a.Tooltip,{title:r.i18nUtil.get(`sharedAnalytics.queryEditorRow.queryTypeLimitReached.${e.value}`),placement:"right"},n.createElement("div",null,o)):o})))}),((e,t)=>e.queryType===t.queryType&&[...e.allowedQueryTypes].join()===[...t.allowedQueryTypes].join()&&e.supportedQueryTypes.join()===t.supportedQueryTypes.join()&&e.updateQueryType===t.updateQueryType)),bS={autoHiddenTooltipContent:"autoHiddenTooltipContent___PtQhA",rowContainer:"rowContainer___ewuqU",queryCard:"queryCard___r1wub",rowBody:"rowBody___SGbtL",rowIdentifier:"rowIdentifier___beQAs",rowIdentifierClickable:"rowIdentifierClickable___F0wIq",rowIdentifierHiddenQuery:"rowIdentifierHiddenQuery___0a24Q",queryTypeSelectContainer:"queryTypeSelectContainer___UoVkD",queryTypeSelect:"queryTypeSelect___bZJXT",queryTypeSelectClickableElement:"queryTypeSelectClickableElement___yv5kS",single:"single___R694F",rowSidePanelContainer:"rowSidePanelContainer___pk4rF",rowActions:"rowActions___y884W",menuOpen:"menuOpen___nPEf0",actionWrapper:"actionWrapper___w4ThU",toggleQuery:"toggleQuery___Yx8an",scannedBytesDisplay:"scannedBytesDisplay___g-7-U",queryBodyContainer:"queryBodyContainer___5B-qh",queryNotification:"queryNotification___t8fYP",queryNotificationError:"queryNotificationError___rqEVc",queryNotificationWarning:"queryNotificationWarning___O-0cw",newSloCtaDot:"newSloCtaDot___QjHP6"},ES={autoHiddenTooltipContent:"autoHiddenTooltipContent___Gz9Ox",rowContainer:"rowContainer___kDHEy",queryCard:"queryCard___jJeC4",rowBody:"rowBody___NwFW7",rowIdentifier:"rowIdentifier___YAvag",rowIdentifierClickable:"rowIdentifierClickable___ykk1u",rowIdentifierHiddenQuery:"rowIdentifierHiddenQuery___4ChQq",queryTypeSelectContainer:"queryTypeSelectContainer___RrtSf",queryTypeSelect:"queryTypeSelect___H2ySI",queryTypeSelectClickableElement:"queryTypeSelectClickableElement___oU57A",single:"single___EtlJz",rowSidePanelContainer:"rowSidePanelContainer___a32YK",rowActions:"rowActions___CsA50",menuOpen:"menuOpen___s-9AU",actionWrapper:"actionWrapper___yxGWx",toggleQuery:"toggleQuery___vDC3j",scannedBytesDisplay:"scannedBytesDisplay___XNsDj",queryBodyContainer:"queryBodyContainer___l0AMI",queryNotification:"queryNotification___-ydTM",queryNotificationError:"queryNotificationError___a2aKE",queryNotificationWarning:"queryNotificationWarning___z1ax5",newSloCtaDot:"newSloCtaDot___Bj7pW"},TS=new Set,xS=({index:e,query:t,showAddButton:i,showDuplicateButton:s,showDeleteButton:o,showCreateAlertButton:l,showCreateSloButton:c,timeRange:d,isQueryHidden:u,allowHiding:p,addRow:h,duplicateRow:m,createAlert:g,createSlo:y,removeRow:v,toggleQueryVisibility:f,errors:_,queryStringClearChanged:S,allowedQueryTypes:b=TS,supportedQueryTypes:E,variables:T,forceQueryType:x,onQueryUpdated:C,onQuerySubmitted:A,styles:I,isFocused:R,onFocus:D,onInputKeyDown:O,focusPrevRow:N,focusNextRow:M,focusPrevRowWithoutLoop:k,inputRef:L,onSwitchQueryTypePerformanceMeasurement:P,onUpdateMetricsQueryMode:F,defaultMetricsQueryMode:U,renderSpansQueryEditorRow:V,renderTracesQueryEditorRow:B,scannedBytes:$=0,allowOnlySingleQueryRow:H,onAutoHide:W,isAutoHidden:q,showMetricsQuantizationInfo:j,renderRowIdentifier:Q=w.Z,showQueryHistory:z,handleQuerySelectionFromHistory:G})=>{const K=(0,n.useRef)(t);K.current=t;const Y=(0,n.useRef)(null),Z=(0,n.useRef)(null);((e,t)=>{const i=(0,r.usePrevious)(e);(0,n.useLayoutEffect)((()=>{(null==i?void 0:i.queryType)!==(null==e?void 0:e.queryType)&&(null==t||t())}),[e,i,t])})(t,null==P?void 0:P.onFinishRendering);const X=(0,n.useCallback)((()=>v(t.queryKey)),[v,t.queryKey]),J=(0,n.useCallback)((()=>f(t.queryKey)),[f,t.queryKey]),{rememberedQueriesByType:ee,setRememberedQuery:te}=(e=>{const[t,i]=(0,n.useState)({[e.queryType]:e}),r=(0,n.useCallback)((e=>{i(Ct(xt({},t),{[e.queryType]:e}))}),[i,t]);return{rememberedQueriesByType:t,setRememberedQuery:r}})(t),ie=(0,n.useCallback)((e=>{const i=e.target.value;if(!i)return;const n=t.queryType;if(i===n)return;te(t);const a=ee[i]?(0,r.ensureDefined)(ee[i]):(({rowData:e,queryType:t,defaultMetricsQueryMode:i})=>{switch(t){case le.QueryTypes.LOGS:return $p(e.queryKey);case le.QueryTypes.METRICS:return"AdvancedMetricsQuery"===i?Bp(e.queryKey):Up(e.queryKey);case le.QueryTypes.TRACES:return Hp(e.queryKey);case le.QueryTypes.SPANS:return Q_(e.queryKey)}})({rowData:t,queryType:i,defaultMetricsQueryMode:U});a.queryKey!==t.queryKey&&(a.queryKey=t.queryKey,te(a)),C(a),null==P||P.onStartRendering({previousQueryType:n,newQueryType:i})}),[ee,te,t,C,P,U]),[re,ne]=(0,n.useState)(void 0),ae=(0,n.useCallback)((e=>{var t,i,r;if(null==F||F("Advanced"===e.mode?"AdvancedMetricsQuery":"BasicMetricsQuery"),e.mode===le.QueryModes.ADVANCED)ne(e.query),A({type:"AdvancedMetricsQuery",queryKey:e.query.queryKey,queryType:e.query.queryType,queryString:e.query.queryString,metricsQueryMode:le.QueryModes.ADVANCED});else if(e.mode===le.QueryModes.BASIC){let t;e.basicQueryData?(t=Up(e.query.queryKey),t.metricsQueryData=e.basicQueryData,t.queryString=e.query.queryString):t=""===e.query.queryString?Up(e.query.queryKey):re,void 0!==t&&A(t),ne(void 0)}de.datapointService.sendDatapoint(xt({module:null!=(r=null==(i=null==(t=Re.applicationState)?void 0:t.current)?void 0:i.name)?r:"",metric:"ui_event_count",event:"metrics_query_mode_switch",direction:`to_${e.mode}`},(0,de.getOrgDimensions)()),1)}),[A,re,F]),se=(0,n.useCallback)((e=>{const t=Ct(xt({},K.current),{queryString:e});C(t)}),[K,C]),oe=(0,n.useCallback)((e=>{G(t.queryKey,e)}),[t.queryKey,G]);((e,t)=>{(0,n.useEffect)((()=>{if(t){const t="keydown",i=()=>{document.removeEventListener(t,r),document.removeEventListener("focusin",i)},r=t=>{var r;9===t.which&&(null==(r=e.current)||r.focus(),t.preventDefault()),i()};return document.addEventListener(t,r),document.addEventListener("focusin",i),i}}),[])})(L,0===e),(({isFocused:e,focusPrevRow:t,focusNextRow:i,focusPrevRowWithoutLoop:r,query:a,updateQueryMode:s,addRow:o,onRemoveRow:l,duplicateRow:c,onToggleQueryVisibility:d,inputRef:u,showDeleteButton:p,showAddButton:h,showDuplicateButton:m})=>{Ni((0,n.useMemo)((()=>({keys:z_.NavigateDownQueryRows,action:()=>{!e||i()}})),[e,i])),Ni((0,n.useMemo)((()=>({keys:z_.NavigateUpQueryRows,action:()=>{!e||t()}})),[e,t])),Ni((0,n.useMemo)((()=>({keys:K_.SwitchQueryMode,action:()=>{var t;if(e){if(a.queryType===le.QueryTypes.METRICS)if(a.metricsQueryMode===le.QueryModes.BASIC)s({mode:le.QueryModes.ADVANCED,query:a});else{const e=Pf(a.queryString);"object"==typeof e&&s({mode:le.QueryModes.BASIC,query:a,basicQueryData:e})}null==(t=u.current)||t.focus()}}})),[e,a,s,u])),Ni((0,n.useMemo)((()=>({keys:z_.DuplicateQueryRow,action:()=>{!e||!m||![le.QueryTypes.LOGS,le.QueryTypes.METRICS].includes(a.queryType)||c(a.queryKey)}})),[e,c,a,m])),Ni((0,n.useMemo)((()=>({keys:z_.NewQueryRow,action:()=>{!e||!h||(o(),i())}})),[e,h,o,i])),Ni((0,n.useMemo)((()=>({keys:z_.DeleteQueryRow,action:()=>{!e||!p||(l(),r())}})),[e,l,r,p])),Ni((0,n.useMemo)((()=>({keys:z_.ToggleQueryRowVisibility,action:()=>{!e||d()}})),[e,d]))})({isFocused:R,focusPrevRow:N,focusNextRow:M,focusPrevRowWithoutLoop:k,query:t,updateQueryMode:ae,addRow:h,onRemoveRow:X,onToggleQueryVisibility:J,inputRef:L,showDeleteButton:o,showAddButton:i,duplicateRow:m,showDuplicateButton:s}),(({elemRef:e,onFocus:t,onBlur:i})=>{const[r,a]=(0,n.useState)(!1),s=(0,n.useRef)(e),o=(0,n.useRef)(t),l=(0,n.useRef)(i);(0,n.useEffect)((()=>{o.current=t,l.current=i})),(0,n.useEffect)((()=>{const e=s.current.current;if(!e)return;let t;const i=()=>{clearTimeout(t),clearTimeout(r),t=setTimeout((()=>{a(!0),o.current&&o.current()}))};let r;const n=()=>{clearTimeout(t),clearTimeout(r),r=setTimeout((()=>{a(!1),l.current&&l.current()}),300)};return e.addEventListener("focusin",i),e.addEventListener("focusout",n),e.contains(document.activeElement)&&a(!0),()=>{clearTimeout(t),clearTimeout(r),e.removeEventListener("focusin",i),e.removeEventListener("focusout",n)}}),[])})({elemRef:Y,onFocus:(0,n.useCallback)((()=>D(t.queryKey)),[D,t.queryKey])});const ce=(0,n.useCallback)(((e,t)=>{A(Ct(xt({},K.current),{queryString:e}),t)}),[A,K]),pe=(0,n.useRef)(!1),he=(0,n.useCallback)((e=>{W&&W(e.filter((e=>e!==t.queryKey)))}),[W,t.queryKey]),{buttonRef:me,isMenuOpen:ge,buttonProps:ye,menuProps:ve}=dg({preventFocusingButtonRef:pe}),fe=()=>De.currentUserHelper.hasFeatureFlag("UIMetricsQueryHistory")&&z?n.createElement(uS,{queryType:t.queryType,baseElementRef:Z,handleQuerySelectionFromHistory:oe}):null,_e=u?"eye-closed":"eye",Se=p||u,be=r.i18nUtil.get(Se?u?"sharedAnalytics.queryEditorRow.actions.showQuery":"sharedAnalytics.queryEditorRow.actions.hideQuery":"sharedAnalytics.queryEditorRow.actions.hidingQueryDisabled"),Ee=n.createElement(n.Fragment,null,q&&n.createElement("p",{className:I.autoHiddenTooltipContent},r.i18nUtil.get("sharedAnalytics.queryEditorRow.autoHideDisclaimer")),n.createElement(kt,{label:be,disableCentering:Boolean(q),shortcut:Se?G_.ToggleQueryRowVisibility:void 0})),Te=Q(n.createElement(a.Tooltip,{title:Ee,placement:"top"},n.createElement(a.Button,{className:ue(I.rowIdentifier,{[I.rowIdentifierHiddenQuery]:u,[I.rowIdentifierClickable]:Se}),"data-sumo-test":`row-identifier-${t.queryKey}`,onClick:()=>{Se&&f(t.queryKey)},color:"secondary",type:"button",size:"regular"},"#",t.queryKey)),t.queryKey);return n.createElement("section",{className:I.rowContainer,ref:Y,"data-sumo-test":`query-row-${t.queryKey}`},Te,n.createElement(a.Card,{className:I.queryCard,"data-sumo-test":`query-card-${t.queryKey}`},n.createElement("div",{ref:Z,className:I.rowBody,"data-sumo-test":"query-editor-content"},H||x?n.createElement("div",{className:ue(I.queryTypeSelectContainer,I.single)},n.createElement(gS,{queryType:x||t.queryType}),fe()):n.createElement("div",{className:I.queryTypeSelectContainer},n.createElement("div",{className:I.queryTypeSelect},n.createElement(SS,{queryType:t.queryType,supportedQueryTypes:E,allowedQueryTypes:b,updateQueryType:ie}),fe())),n.createElement("div",{className:I.queryBodyContainer},(()=>{var e,i;switch(t.type){case"LogsQuery":case"AdvancedMetricsQuery":return n.createElement(H_,{queryString:t.queryString,queryType:t.queryType,updateQueryString:se,queryStringClearChanged:S,onSubmit:ce,inputRef:L,metricsProps:{queryId:t.queryKey,timeRange:d,variables:T},preventFocusingActionsButtonRef:pe,autofocus:""===t.queryString.trim(),onInputKeyDown:O,onAutoHide:he});case"BasicMetricsQuery":return n.createElement(m_,{timeRange:d,rowData:t,updateQueryData:A,variables:T,isFocused:R,inputRef:L,errors:_,onInputKeyDown:O});case"BasicTracesQuery":return null!=(e=null==B?void 0:B(t,A))?e:null;case"AdvancedSpansQuery":return null!=(i=null==V?void 0:V(t,A,_))?i:null}})(),null==_?void 0:_.map((({message:e,type:t},i)=>n.createElement("div",{key:i,"data-sumo-test":`query-notification-${t}`,className:ue(I.queryNotification,{[I.queryNotificationError]:"error"===t,[I.queryNotificationWarning]:"warning"===t})},e)))),n.createElement("div",{className:ue(I.rowSidePanelContainer)},j&&(()=>{if(!De.currentUserHelper.hasFeatureFlag("UIMetricsQueryBuilderQuantizationInfo")||t.queryType!==le.QueryTypes.METRICS||!Boolean(t.metricsQueryQuantization))return null;const{period:e,rollup:i}=t.metricsQueryQuantization;return n.createElement(X_,{period:e,rollup:i})})(),n.createElement("div",{className:ue(I.rowActions,{[I.menuOpen]:ge||R})},$>0&&n.createElement(zf,{classNames:{container:I.scannedBytesDisplay},scannedBytes:$,tooltipProps:{placement:"top",title:r.i18nUtil.get("sharedAnalytics.queryEditorRow.estimatedScanSize")}}),n.createElement(a.IconBar,{size:"large"},i&&n.createElement(a.Tooltip,{title:n.createElement(kt,{label:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.addQuery"),shortcut:G_.NewQueryRow}),placement:"top"},n.createElement(a.IconButton,{buttonProps:{"data-sumo-test":`add-query-row-${t.queryKey}`},icon:a.IconName.Plus,onClick:h})),!H&&n.createElement(a.Tooltip,{title:Ee,placement:"top"},n.createElement("span",{className:I.actionWrapper},n.createElement(a.IconButton,{icon:_e,className:I.toggleQuery,disabled:!Se,buttonProps:{"data-sumo-test":`hide-query-row-${t.queryKey}`},onClick:J}))),o&&n.createElement(a.Tooltip,{title:p||u?n.createElement(kt,{label:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.deleteQuery"),shortcut:G_.DeleteQueryRow}):r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.hidingQueryDisabled"),placement:"top"},n.createElement("span",{className:I.actionWrapper},n.createElement(a.IconButton,{icon:a.IconName.Trash,onClick:X,disabled:!p&&!u,buttonProps:{"data-sumo-test":`remove-query-row-${t.queryKey}`}}))),(()=>{const e=["AdvancedMetricsQuery","BasicMetricsQuery"],i=De.currentUserHelper.hasPrivilege("UnifiedMonitorsManageAccess");De.currentUserHelper.hasFeatureFlag("UIMonitorsIntegrateSearch")&&i&&e.push("LogsQuery");const o=l&&Boolean(g)&&i&&e.includes(t.type),d=c&&Boolean(y)&&["AdvancedMetricsQuery","BasicMetricsQuery","LogsQuery"].includes(t.type),u=t.queryType===le.QueryTypes.METRICS,p=s&&(t.queryType===le.QueryTypes.LOGS||t.queryType===le.QueryTypes.METRICS);return o||u||p||d?n.createElement(a.Menu,{btnRenderer:e=>{const t=n.createElement(a.IconButton,{icon:"kebab",ref:me,buttonProps:{"data-sumo-test":"sharedAnalytics_menuActions"},onBlur:ye.onBlur,onClick:t=>{ye.onClick(e,t)}});return n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.pressEnterToOpen"),placement:"top"},t)},onClose:ve.onClose},t.queryType===le.QueryTypes.METRICS&&n.createElement(mS,{rowData:t,updateQueryMode:ae,canSwitchToBasic:""===t.queryString.trim()||(null==re?void 0:re.queryString)===t.queryString.trim()}),p&&n.createElement(a.Tooltip,{debounced:!0,placement:"left",title:n.createElement(kt,{label:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.duplicateQueryRow"),shortcut:G_.DuplicateQueryRow})},n.createElement(a.Menu.Item,{onClick:()=>{m(t.queryKey)},"data-sumo-test":"sharedAnalytics_duplicateQueryRow"},n.createElement(a.Menu.Text,null,r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.duplicateQueryRow")))),n.createElement(a.Divider,null),o&&n.createElement(a.Tooltip,{debounced:!0,placement:"left",title:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.createAlertTooltip")},n.createElement(a.Menu.Item,{onClick:()=>(0,r.ensureDefined)(g)(t.queryKey),"data-sumo-test":"create-alert"},n.createElement(a.Menu.Text,null,r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.createAlert")))),d&&n.createElement(a.Tooltip,{debounced:!0,placement:"left",title:r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.createSloTooltip")},n.createElement(a.Menu.Item,{onClick:()=>(0,r.ensureDefined)(y)(t.queryKey),"data-sumo-test":"create-slo"},n.createElement(a.Menu.Text,null,r.i18nUtil.get("sharedAnalytics.queryEditorRow.actions.createSlo"),n.createElement(a.Icon,{name:a.IconName.Dot,className:I.newSloCtaDot,color:"blue"}))))):null})()))))))},CS=(0,a.withCssModulesTheme)({brandLight:ES,brandDark:bS},ES,(0,n.memo)(xS)),AS="notification___Wbz4-",wS=()=>{const e=De.currentUserHelper.getUserSetting("enterKeyRunsQuery"),t=r.i18nUtil.get(e?"sharedAnalytics.metricsQueryBuilder.unexecutedQueriesNotification.enter":"sharedAnalytics.metricsQueryBuilder.unexecutedQueriesNotification.altEnter."+((0,r.isAppRunningOnMac)()?"mac":"nonMac"));return n.createElement(a.AssistiveText,{className:AS,"data-sumo-test":"unexecuted-queries-notification"},t)},IS={OpenHelpTooltip:[Vt.Tab,Vt.Tab,Vt.Tab]};Ht(IS);const RS="QUERY_BUILDER_KEYBOARD_BINDING_TOOLTIP_SEEN",DS=()=>{const[e,t]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=[{keys:IS.OpenHelpTooltip,action:()=>{Boolean(r.localStore.getItem(RS))||setTimeout((()=>{t(!0)}),100)}}];return e.forEach((e=>Oi.addSequence(e))),()=>{e.forEach((e=>Oi.removeSequence(e)))}}),[]);return{shouldDisplayKeyboardBindingsTooltip:e,onKeyboardBindingsTooltipClose:(0,n.useCallback)((()=>{t(!1),r.localStore.setItem(RS,"1")}),[t])}};function OS(e){return e.reduce(((e,t)=>{var i;const r=Ju[t.value];return e+Math.max(0,null!=(i=t.limit)?i:r)}),0)}const NS=e=>{switch(e){case le.Operator.Avg:case le.Operator.Count:case le.Operator.Max:case le.Operator.Min:case le.Operator.Sum:case le.Operator.Eval:case le.Operator.HistogramQuantile:case le.Operator.Percentile:case le.Operator.StandardDeviation:return!0;case le.Operator.Accum:case le.Operator.Bottomk:case le.Operator.Delta:case le.Operator.FillMissing:case le.Operator.Filter:case le.Operator.Parse:case le.Operator.Quantize:case le.Operator.Rate:case le.Operator.TimeShift:case le.Operator.Topk:case le.Operator.Outlier:case le.Operator.Where:case le.Operator.Timeslice:case le.Operator.Ewma:return!1}},MS=(e,t,i)=>{const r=`\\|[\\s]*${t}[\\s]*(by[\\s]+)?${null!=i?i:""}`;return Boolean(e.match(new RegExp(r)))},kS=e=>PS(e)?jh(e,Fh):e,LS=(e,t)=>!!qh(Gh(e),t).length,PS=e=>LS(e,Fh),FS=e=>LS(e,Uh),US=(e,t,i=[])=>{const n=Km(e).filter((({type:e,value:i})=>"RowVar"===e&&i!==t)).map((({value:e})=>i.find((t=>t.queryKey===e.replace("#",""))))).filter(r.isNotUndefined);return n.length>0&&n.every((e=>PS(e.queryString)))},VS=(e,t)=>PS(e.queryString)||US(e.queryString,e.queryKey,t),BS=e=>e.key===le.Operator.Quantize,$S=e=>e.key===le.Operator.Timeslice,HS=({queryString:e,metricsQueryQuantization:t})=>{const i=(e=>{const t=qh(e,/(\s?\|)/g);return t.length?t[0].start:e.length})(e),n=`quantize to ${(0,r.formatMillisecondsToTimeDuration)(t.period)} using ${t.rollup}`;return`${e.slice(0,i)} | ${n}${e.slice(i)}`.trim()},WS=(e,t)=>{if(!Kh(e)||FS(e.queryString))return e.queryString;const i=ZS({query:e,timeRange:t});return i.metricsQueryQuantization?HS({queryString:i.queryString,metricsQueryQuantization:i.metricsQueryQuantization}):e.queryString},qS=[{duration:"5m",period:"1s"},{duration:"30m",period:"5s"},{duration:"1h",period:"15s"},{duration:"3h",period:"30s"},{duration:"6h",period:"1m"},{duration:"1d",period:"5m"},{duration:"3d",period:"15m"},{duration:"7d",period:"1h"},{duration:"30d",period:"2h"},{duration:"90d",period:"6h"},{duration:"150d",period:"12h"},{duration:"400d",period:"1d"}],jS=e=>(0,r.convertFormattedTimeDurationToMilliseconds)(e),QS=e=>{var t;const{startTime:i,endTime:n}=Ie.timeRangeUtil.parseTimeRangeDetails(e);if(void 0===i||void 0===n)return;const a=n-i,{period:s}=null!=(t=qS.find((({duration:e})=>a<=(0,r.convertFormattedTimeDurationToMilliseconds)(e))))?t:qS[0];return jS(s)},zS=e=>{const t=e.filter((e=>void 0!==e.granularity));if(t.length)return t.reduce(((e,t)=>(0,r.convertFormattedTimeDurationToSeconds)(t.granularity)>(0,r.convertFormattedTimeDurationToSeconds)(e.granularity)?t:e))},GS=e=>e.find((e=>!(null==e||!e.rollup))),KS=e=>{var t;if(e.metricsQueryMode===le.QueryModes.BASIC)return e.metricsQueryData.operators.find(BS);const i=Wh(e.queryString,Uh).map((({groups:e})=>e)),r=null!=(t=zS(i))?t:GS(i);return r?{key:le.Operator.Quantize,value:r.granularity,using:r.rollup}:void 0},YS=e=>{var t;if(e.metricsQueryMode===le.QueryModes.BASIC)return e.metricsQueryData.operators.find($S);const i=Wh(e.queryString,Vh).map((({groups:e})=>e)),r=null!=(t=zS(i))?t:GS(i);return r?{key:le.Operator.Timeslice,value:r.granularity,operation:r.rollup}:void 0},ZS=({query:e,timeRange:t})=>{var i,n;const a=KS(e),s=YS(e),o=null!=(i=(e=>{if(e&&e.value)return jS(e.value)||void 0})(((e,t)=>{if(e||t)return e&&t?(0,r.convertFormattedTimeDurationToSeconds)(e.value)>=(0,r.convertFormattedTimeDurationToSeconds)(t.value)?e:t:e||t})(null!=a?a:null,s)))?i:QS(t);if(!o)return e;const l={period:o,rollup:null!=(n=((e,t)=>{var i,n;if(e||t)return e&&t?(0,r.convertFormattedTimeDurationToSeconds)(e.value)>=(0,r.convertFormattedTimeDurationToSeconds)(t.value)?null!=(i=null==e?void 0:e.using)?i:le.Aggregator.avg:t.operation:e?null!=(n=e.using)?n:le.Aggregator.avg:null==t?void 0:t.operation})(null!=a?a:null,s))?n:le.Aggregator.avg};return Ct(xt({},e),{metricsQueryQuantization:l})},XS=(e,t)=>{var i;const r=null==(i=t.find((t=>t.queryId===e.queryKey)))?void 0:i.queryInfo;if(!r)return e;const{quantizationGranularity:n,rollup:a}=r.resultContext,s={period:n,rollup:a};return Ct(xt({},e),{metricsQueryQuantization:s})},JS=(0,r.memoize)((({query:e,series:t,timeRange:i})=>{if(!Kh(e))return e;if(((e,t)=>!(null==t||!t.some((t=>t.queryId===e.queryKey))))(e,t))return XS(e,t);const r=e,{metricsQueryQuantization:n}=r,a=At(r,["metricsQueryQuantization"]);return e.queryString.trim()&&i?ZS({query:e,timeRange:i}):a}),{maxNumberOfResults:100,useDeepEqual:!0}),eb=(e,t)=>{const i=t.find((({value:t})=>t===e));return Math.max(i&&i.limit||Ju[e]||0,0)},tb=(0,oe.default)((e=>Object.values(le.QueryTypes).reduce(((t,i)=>(t[i]=new Set(e.filter((e=>e.queryType===i))),t)),{}))),ib=()=>(0,r.idGenerator)("xxxxxx"),rb=e=>{var t,i;if(""===(null==(t=null==e?void 0:e[e.length-1])?void 0:t.query.queryString)){const t=(0,Re.getQueryWithNormalizedKey)(null==(i=e[e.length-2])?void 0:i.query,e[e.length-1].query);return[...e.slice(0,e.length-1),{localQueryKey:e[e.length-1].localQueryKey,query:t}]}return e},nb=(e,t)=>{const{defaultMetricsQueryMode:i,forceQueryType:r,defaultQueryType:n,supportedQueryTypes:a}=t;switch(((e,{forceQueryType:t,defaultQueryType:i,supportedQueryTypes:r})=>{if(t)return t;const n=tb(e),a={[le.QueryTypes.METRICS]:1,[le.QueryTypes.LOGS]:2,[le.QueryTypes.TRACES]:3,[le.QueryTypes.SPANS]:4};i&&(a[i]=Number.NEGATIVE_INFINITY);const s=(0,d.Z)(Object.entries(a),(([e,t])=>t)).map((([e])=>e));for(const e of s)if(n[e].size<eb(e,r))return e})(e,{defaultQueryType:n,forceQueryType:r,supportedQueryTypes:a})){case le.QueryTypes.LOGS:return $p("");case le.QueryTypes.METRICS:return"AdvancedMetricsQuery"===i?Bp(""):Up("");case le.QueryTypes.TRACES:return Hp("");case le.QueryTypes.SPANS:return Q_("");default:return}},ab=(e,t)=>{const i=((e,t)=>{const i=nb(e,t);return i?(0,Re.getQueryWithNormalizedKey)(e[e.length-1],i):void 0})(e.map((({query:e})=>e)),t);if(void 0===i)return{queryInfos:e,newQueryInfo:null};{const t={localQueryKey:ib(),query:i};return{queryInfos:e.concat(t),newQueryInfo:t}}},sb=(e,t)=>{const i=0===e.length?ab([],t).queryInfos:(De.currentUserHelper.hasFeatureFlag("UIMetricsQueryBuilderQuantizationInfo")?e.map((e=>JS({query:e,series:t.metricsTimeSeriesData,timeRange:t.timeRange}))):e).map((e=>e.queryKey?e:Ct(xt({},e),{queryKey:Re.FIRST_QUERY_KEY}))).map((e=>({localQueryKey:ib(),query:e})));return rb(i)},ob=(e,t)=>{if(!(0,o.Z)(e,t))return!1;const i=e[0],r=t[0];return!("BasicMetricsQuery"===i.query.type&&"BasicMetricsQuery"===r.query.type&&i.query.metricsQueryData.filters!==r.query.metricsQueryData.filters)},lb=(e,t)=>{const i=(0,n.useRef)([]),a=tb(e),s=Object.values(a).reduce(((e,t)=>e+t.size),0),l=OS(t.supportedQueryTypes),[c,d]=(0,n.useState)(sb(e,t)),u=(0,n.useMemo)((()=>(0,oe.default)((e=>e),ob)),[]),[p,h]=(0,n.useState)(),g=(0,r.usePrevious)(t.metricsTimeSeriesData),{current:y}=(0,n.useRef)(new Set);return(0,n.useEffect)((()=>{rm(p,e)||h(e)}),[p,e]),(0,n.useEffect)((()=>{i.current.forEach((e=>{e()})),i.current.length=0}),[i.current.length]),(0,n.useEffect)((()=>{const i=c.map((({query:e})=>e));!rm(p,e,{shouldCompareQueryTypes:!0})&&!rm(i,e,{shouldCompareQueryTypes:!0})&&d(sb(e,t))}),[e]),(0,n.useEffect)((()=>{!De.currentUserHelper.hasFeatureFlag("UIMetricsQueryBuilderQuantizationInfo")||(0,o.Z)(t.metricsTimeSeriesData,g)||d((e=>null==e?void 0:e.map((e=>{var i=e,{query:r}=i,n=At(i,["query"]);return Ct(xt({},n),{query:JS({query:r,series:t.metricsTimeSeriesData,timeRange:t.timeRange})})}))))}),[t.timeRange,t.metricsTimeSeriesData,g]),(0,n.useEffect)((()=>{y.clear()}),[t.metricsTimeSeriesData,y]),{queryInfos:(0,n.useMemo)((()=>c.map((e=>u(e)))),[c,u]),rowsNumber:s,totalLimit:l,queriesByType:a,allowedQueryTypes:(0,n.useCallback)((e=>new Set(Object.entries(a).map((([i,r])=>e.queryType===i||r.size<eb(e.queryType,t.supportedQueryTypes)?i:void 0)).filter((e=>e)))),[a,t.supportedQueryTypes]),updateQuery:(0,n.useCallback)((e=>new Promise((r=>{d((n=>{const a=((e,t)=>{const i=e.findIndex((({query:e})=>e.queryKey===t));return-1===i?void 0:i})(n,e.queryKey),s=rb(c.map(((i,r)=>{var n;return r===a?{localQueryKey:i.localQueryKey,query:De.currentUserHelper.hasFeatureFlag("UIMetricsQueryBuilderQuantizationInfo")?JS({query:e,series:null==(n=t.metricsTimeSeriesData)?void 0:n.filter((e=>!y.has(e.queryId))),timeRange:t.timeRange}):e}:i})));return i.current.push((()=>r({updatedQuery:e,updatedQueries:s.map((({query:e})=>e)),previousQueries:p}))),s}))}))),[p,t.metricsTimeSeriesData,t.timeRange,c,y]),addRow:(0,n.useCallback)((()=>new Promise((e=>{d((r=>{const n={defaultMetricsQueryMode:t.defaultMetricsQueryMode,defaultQueryType:t.defaultQueryType,forceQueryType:t.forceQueryType,supportedQueryTypes:t.supportedQueryTypes},{queryInfos:a,newQueryInfo:s}=ab(r,n),o=null==s?void 0:s.query;return i.current.push((()=>e({queryObject:o,updatedQueries:a.map((({query:e})=>e))}))),a}))}))),[t.defaultMetricsQueryMode,t.defaultQueryType,t.forceQueryType,t.supportedQueryTypes]),duplicateRow:(0,n.useCallback)((e=>new Promise((t=>{d((r=>{const{newQueryInfo:n,queryInfos:a}=((e,t)=>{var i;const r=e.find((({query:e})=>e.queryKey===t));if(!r)return{queryInfos:e,newQueryInfo:null};const n={query:(0,Re.getQueryWithNormalizedKey)(null==(i=(0,m.Z)(e))?void 0:i.query,r.query),localQueryKey:ib()};return{queryInfos:[...e,n],newQueryInfo:n}})(r,e),s=null==n?void 0:n.query;return i.current.push((()=>t({queryObject:s,updatedQueries:a.map((({query:e})=>e))}))),a}))}))),[]),removeRow:(0,n.useCallback)((e=>new Promise((t=>{y.add(e),d((r=>{var n;const a=null==(n=r.find((({query:t})=>t.queryKey===e)))?void 0:n.query,s=void 0===a?r:rb(r.filter((({query:t})=>t.queryKey!==e)));return i.current.push((()=>t({queryObject:a,updatedQueries:s.map((({query:e})=>e))}))),s}))}))),[y])}},cb=e=>{switch(e){case le.FetchStatus.Loading:case le.FetchStatus.Reloading:case le.FetchStatus.PollingInProgress:return!0;default:return!1}},db=(e,t,i,a)=>{const[s,o]=(0,n.useState)(!i||!cb(t));(0,n.useEffect)((()=>{i&&(!cb(null!=l?l:le.FetchStatus.NeverLoaded)&&cb(t)&&o(!1),(cb(null!=l?l:le.FetchStatus.NeverLoaded)&&!cb(t)||void 0!==c&&c!==e)&&o(!0))}),[t,e,i]);const l=(0,r.usePrevious)(t),c=(0,r.usePrevious)(e),d=((e,t)=>cb(e)&&!t?"processing":"default")(t,s);return{runQueriesFeedbackState:d,runQueriesButtonDisabled:"processing"===d||e.every(em),shouldAllowRerunningQueries:s,allowRerunningQueries:(0,n.useCallback)((()=>{i&&o(!0)}),[i]),forbidRerunningQueries:(0,n.useCallback)((()=>{i&&o(!1)}),[i])}},ub=n.memo((({queries:e,errors:t,runQueriesButtonVisible:i,unexecutedQueriesNotificationVisible:s,initialOrMostRecentlyRunQueries:o,initialOrMostRecentlyRunHiddenQueryKeys:l,timeRange:c,fetchStatus:d,originalVisualSettings:u,metricsTimeSeriesData:p,onSwitchQueryTypePerformanceMeasurement:h,onQueryEditorContainerClick:m,onQueriesUpdated:g,onUpdateMetricsQueryMode:y,variables:v,hiddenQueryKeys:f,onHiddenQueryKeysChanged:_,onInputKeyDown:S,runQueries:b,supportedQueryTypes:E,forceQueryType:T,defaultQueryType:x,defaultMetricsQueryMode:C,createAlert:A,createSlo:w,renderSpansQueryEditorRow:R,renderTracesQueryEditorRow:D,disallowDuplicatingQuery:O,renderRowIdentifier:N,scannedBytes:M,showQueryHistory:k,showMetricsQuantizationInfo:L})=>{const P=(0,n.useRef)(new Set(f.filter((t=>e.some((e=>e.queryKey===t&&e.queryType===le.QueryTypes.METRICS)))))),[F,U]=(0,n.useState)([]),{shouldDisplayKeyboardBindingsTooltip:V,onKeyboardBindingsTooltipClose:B}=DS(),{allowRerunningQueries:$,forbidRerunningQueries:H,runQueriesFeedbackState:W,runQueriesButtonDisabled:q}=db(e,null!=d?d:le.FetchStatus.NeverLoaded,null!=i&&i),j=De.currentUserHelper.hasFeatureFlag("UIMonitorsIntegrateMetrics"),Q=De.currentUserHelper.hasFeatureFlag("UISLOSourceMetrics"),z=De.currentUserHelper.getUserSetting("enterKeyRunsQuery"),G=r.i18nUtil.get(z?"sharedAnalytics.metricsQueryBuilder.runQueriesShortcut.enter":"sharedAnalytics.metricsQueryBuilder.runQueriesShortcut.altEnter."+((0,r.isAppRunningOnMac)()?"mac":"nonMac")),K=(0,n.useCallback)((t=>{const i=f.includes(t)?(0,I.Z)(f,t):[...f,t];De.currentUserHelper.hasFeatureFlag("UIMetricsJoiningAutoHide")&&(e.some((e=>e.queryKey===t&&e.queryType===le.QueryTypes.METRICS))&&(P.current=new Set([...P.current,t])),F.length&&U((e=>e.filter((e=>t!==e))))),_(i,(null==u?void 0:u.hiddenQueryKeys)||[])}),[F.length,f,_,null==u?void 0:u.hiddenQueryKeys,e]);(()=>{const e=bm(),t=gm(e);e!==t&&Em(t)})();const{queryInfos:Y,rowsNumber:Z,totalLimit:X,queriesByType:J,allowedQueryTypes:ee,addRow:te,duplicateRow:ie,removeRow:re,updateQuery:ne}=lb(e,{supportedQueryTypes:E,forceQueryType:T,defaultQueryType:x,defaultMetricsQueryMode:C,timeRange:c,metricsTimeSeriesData:p}),ae=(0,n.useCallback)((()=>te().then((({updatedQueries:e,queryObject:t})=>null==g?void 0:g({type:"AddedRow",updatedQueries:e,addedQuery:t})))),[g,te]),se=(0,n.useCallback)((e=>ie(e).then((({updatedQueries:e,queryObject:t})=>null==g?void 0:g({type:"DuplicatedRow",updatedQueries:e,duplicatedQuery:t})))),[g,ie]),oe=(0,n.useCallback)((e=>re(e).then((({updatedQueries:e,queryObject:t})=>null==g?void 0:g({type:"RemovedRow",updatedQueries:e,removedQuery:t})))),[g,re]),de=(0,n.useCallback)((t=>{const i=t.filter((t=>e.some((e=>e.queryKey===t&&e.queryType===le.QueryTypes.METRICS&&!P.current.has(t)))));i.length&&(P.current=new Set([...P.current,...i]),U((e=>F.concat(i))),_(i.concat(f),(null==u?void 0:u.hiddenQueryKeys)||[]))}),[F,f,_,null==u?void 0:u.hiddenQueryKeys,e]),{focusedRowIndex:pe,inputRefs:he,onFocus:me,focusPrevRow:ge,focusPrevRowWithoutLoop:ye,focusNextRow:ve}=(e=>{const t=(0,n.useRef)(new Map),[i,r]=(0,n.useState)(0);(0,n.useMemo)((()=>{e.forEach((({localQueryKey:e})=>{t.current.has(e)||t.current.set(e,{current:void 0})}))}),[e]);const a=(0,n.useCallback)((t=>{const i=e.findIndex((({query:e})=>e.queryKey===t));return-1===i?void 0:i}),[e]),s=(0,n.useCallback)((i=>{var n,a,s;r(i);const o=null==(n=e[i])?void 0:n.localQueryKey;null==(s=null==(a=t.current.get(o))?void 0:a.current)||s.focus()}),[e]);return{inputRefs:t.current,focusedRowIndex:i,onFocus:(0,n.useCallback)((e=>{const t=a(e);t===i||void 0===t||r(t)}),[a,i]),focusPrevRow:(0,n.useCallback)((()=>{const t=(i-1+e.length)%e.length;s(t)}),[i,e,s]),focusPrevRowWithoutLoop:(0,n.useCallback)((()=>{const e=Math.max(0,i-1);s(e)}),[i,s]),focusNextRow:(0,n.useCallback)((()=>{const t=(i+1)%e.length;s(t)}),[i,e,s])}})(Y),fe=(0,n.useCallback)((e=>{H(),ne(e).then((({updatedQuery:e,updatedQueries:t,previousQueries:i})=>null==g?void 0:g({type:"UpdatedRow",updatedQueries:t,previousQueries:i,updatedQuery:e,isSubmitted:!1,forceSubmitIfRunQueriesButtonVisible:!1})))}),[H,g,ne]),_e=(0,n.useCallback)(((e,t)=>{$(),ne(e).then((({updatedQuery:e,updatedQueries:i,previousQueries:r})=>{var n;return null==g?void 0:g({type:"UpdatedRow",updatedQueries:i,previousQueries:r,updatedQuery:e,isSubmitted:!0,forceSubmitIfRunQueriesButtonVisible:null!=(n=null==t?void 0:t.forceSubmitIfRunQueriesButtonVisible)&&n})}))}),[$,g,ne]),Se=Y.filter((({query:e})=>!f.includes(e.queryKey))).length>1,be=De.currentUserHelper.hasFeatureFlag("UIMetricsJoiningAutoHide")&&Array.isArray(l)&&!l.every((e=>f.includes(e))),Ee=Boolean(s)&&(be||!rm(e,o,{queryKeysToOmit:f}))&&!q,Te=(t,i)=>{const{index:r,query:n}=Hf(t,e),a=Wf(i,n),s=i.variables?qf(a,i.variables):a,o=[...e];o.splice(r,1,s),g({type:"UpdatedRow",updatedQueries:o,updatedQuery:s,previousQueries:[],isSubmitted:!0,forceSubmitIfRunQueriesButtonVisible:!1})};return n.createElement("section",{className:ue(wf,{[If]:i}),onClick:m,onInput:$},n.createElement("div",{className:ue({[Rf]:i,[Df]:Boolean(s)})},Y.map((({localQueryKey:e,query:i},r)=>n.createElement(ce.ErrorBoundary,{key:e},n.createElement(CS,{key:e,index:r,query:i,timeRange:c,showAddButton:r===Y.length-1&&Z<X&&!Jh(i),showDuplicateButton:!O&&J[i.queryType].size<Ju[i.queryType]&&!Jh(i),showDeleteButton:Y.length>1,showCreateAlertButton:Boolean(A)&&!Jh(i)&&j,showCreateSloButton:Boolean(w)&&!Jh(i)&&Q,addRow:ae,duplicateRow:se,removeRow:oe,createAlert:A,createSlo:w,toggleQueryVisibility:K,isQueryHidden:f.includes(i.queryKey),allowHiding:Se,errors:t.get(i.queryKey),queryStringClearChanged:!1,allowedQueryTypes:ee(i),allowOnlySingleQueryRow:1===X,supportedQueryTypes:E,variables:v,forceQueryType:T,onQueryUpdated:fe,onQuerySubmitted:_e,isFocused:pe===r,onFocus:me,onInputKeyDown:S,focusPrevRow:ge,focusNextRow:ve,focusPrevRowWithoutLoop:ye,inputRef:he.get(e),onSwitchQueryTypePerformanceMeasurement:h,onUpdateMetricsQueryMode:y,defaultMetricsQueryMode:C,renderSpansQueryEditorRow:R,renderTracesQueryEditorRow:D,onAutoHide:de,isAutoHidden:F.includes(i.queryKey),renderRowIdentifier:N,scannedBytes:M,showQueryHistory:k,handleQuerySelectionFromHistory:Te,showMetricsQuantizationInfo:L})))),Ee&&n.createElement(wS,null)),i&&n.createElement("div",{className:Of},n.createElement(a.Tooltip,{title:G},n.createElement(a.FeedbackButton,{"aria-label":r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.runQueries"),color:"primary","data-sumo-test":`run-queries--${W}`,disabled:q,feedbackState:W,feedbackIcon:{default:a.IconName.Search},onClick:()=>{H(),null==b||b()},size:"small"}))),V&&n.createElement(ti,{onClose:B}))})),pb="QUERY_BUILDER_KEYBOARD_BINDING_TOOLTIP_SEEN",hb=()=>(0,r.idGenerator)("xxxxxx"),mb=(e,t)=>{if(!(0,o.Z)(e,t))return!1;const i=e[0],r=t[0];return!("BasicMetricsQuery"===i.query.type&&"BasicMetricsQuery"===r.query.type&&i.query.metricsQueryData.filters!==r.query.metricsQueryData.filters)},gb=(0,oe.default)((e=>Object.values(le.QueryTypes).reduce(((t,i)=>(t[i]=new Set(e.filter((e=>e.queryType===i))),t)),{}))),yb=e=>{var t,i;if(""===(null==(t=null==e?void 0:e[e.length-1])?void 0:t.query.queryString)){const t=(0,Re.getQueryWithNormalizedKey)(null==(i=e[e.length-2])?void 0:i.query,e[e.length-1].query);return[...e.slice(0,e.length-1),{localQueryKey:e[e.length-1].localQueryKey,query:t}]}return e};class vb extends n.PureComponent{constructor(e){super(e),this.keyboardSequencesDefs=[{keys:IS.OpenHelpTooltip,action:()=>{this.isKeyboardBindingTooltipSeen()||setTimeout((()=>{this.setState({shouldDisplayKeyboardBindingsTooltip:!0})}),100)}}],this.inputRefs=new Map,this.handleAutoHide=e=>{if(!De.currentUserHelper.hasFeatureFlag("UIMetricsJoiningAutoHide"))return;const{onHiddenQueryKeysChanged:t,queries:i,originalVisualSettings:r,hiddenQueryKeys:n}=this.props,a=e.filter((e=>i.some((t=>t.queryKey===e&&t.queryType===le.QueryTypes.METRICS&&!this.everChangedHiddenStateMetrics.has(e)))));a.length&&(this.everChangedHiddenStateMetrics=new Set([...this.everChangedHiddenStateMetrics,...a]),this.setState((({autoHide:e})=>({autoHide:e.concat(a)}))),t(a.concat(n),(null==r?void 0:r.hiddenQueryKeys)||[]))},this.getQueryInfosFromProps=(e=this.props.queries)=>{const t=0===e.length?this.getQueryInfosWithAppendedEmptyQuery([]).queryInfos:(this.isMetricsQuantizationInfoEnabled?e.map((e=>JS({query:e,series:this.props.metricsTimeSeriesData,timeRange:this.props.timeRange}))):e).map((e=>e.queryKey?e:Ct(xt({},e),{queryKey:Re.FIRST_QUERY_KEY}))).map((e=>({localQueryKey:hb(),query:e})));return yb(t)},this.memoizeQueryInfos=e=>e.map((e=>this.memoizeQueryInfo(e))),this.findQueryRowIndex=e=>{const t=this.state.queryInfos.findIndex((({query:t})=>t.queryKey===e));return-1===t?void 0:t},this.getQueryLimitByType=e=>{const t=this.props.supportedQueryTypes.find((({value:t})=>t===e));return Math.max(t&&t.limit||Ju[e]||0,0)},this.getNewEmptyQueryType=e=>{const{forceQueryType:t,defaultQueryType:i}=this.props;if(t)return t;const r=gb(e),n={[le.QueryTypes.METRICS]:1,[le.QueryTypes.LOGS]:2,[le.QueryTypes.TRACES]:3,[le.QueryTypes.SPANS]:4};i&&(n[i]=Number.NEGATIVE_INFINITY);const a=(0,d.Z)(Object.entries(n),(([e,t])=>t)).map((([e])=>e));for(const e of a)if(r[e].size<this.getQueryLimitByType(e))return e},this.getNewEmptyQuery=e=>{switch(this.getNewEmptyQueryType(e)){case le.QueryTypes.LOGS:return $p("");case le.QueryTypes.METRICS:return"AdvancedMetricsQuery"===this.props.defaultMetricsQueryMode?Bp(""):Up("");case le.QueryTypes.TRACES:return Hp("");case le.QueryTypes.SPANS:return Q_("");default:return}},this.getNewEmptyQueryWithKey=e=>{const t=this.getNewEmptyQuery(e);return t?(0,Re.getQueryWithNormalizedKey)(e[e.length-1],t):void 0},this.getQueryInfosWithAppendedEmptyQuery=e=>{const t=this.getNewEmptyQueryWithKey(e.map((({query:e})=>e)));if(void 0===t)return{queryInfos:e,newQueryInfo:null};{const i={localQueryKey:hb(),query:t};return{queryInfos:e.concat(i),newQueryInfo:i}}},this._onQueryUpdated=(e,t)=>{const{forceSubmitIfRunQueriesButtonVisible:i,isSubmitted:r}=t,n=this.findQueryRowIndex(e.queryKey);this.props.runQueriesButtonVisible&&this.setState({shouldAllowRerunningQueries:!r}),this.setState((({queryInfos:t})=>({queryInfos:yb(t.map(((t,i)=>{var r;return i===n?Ct(xt({},t),{query:this.isMetricsQuantizationInfoEnabled?JS({query:e,series:null==(r=this.props.metricsTimeSeriesData)?void 0:r.filter((e=>!this.removedQueryIds.has(e.queryId))),timeRange:this.props.timeRange}):e}):t})))})),(()=>{var t,n,a;null==(a=(n=this.props).onQueriesUpdated)||a.call(n,{type:"UpdatedRow",updatedQueries:this.queries,previousQueries:this.previousQueries,updatedQuery:e,isSubmitted:r,forceSubmitIfRunQueriesButtonVisible:null!=(t=r&&i)&&t})}))},this.onQueryUpdated=e=>{this._onQueryUpdated(e,{isSubmitted:!1})},this.onQuerySubmitted=(e,t)=>{this._onQueryUpdated(e,{isSubmitted:!0,forceSubmitIfRunQueriesButtonVisible:null==t?void 0:t.forceSubmitIfRunQueriesButtonVisible})},this.addRow=()=>{let e;this.setState((({queryInfos:t})=>{const{queryInfos:i,newQueryInfo:r}=this.getQueryInfosWithAppendedEmptyQuery(t);return e=null==r?void 0:r.query,{queryInfos:i}}),(()=>{var t,i;null==(i=(t=this.props).onQueriesUpdated)||i.call(t,{type:"AddedRow",updatedQueries:this.queries,addedQuery:e})}))},this.duplicateRow=e=>{let t;this.setState((({queryInfos:i})=>{const{newQueryInfo:r,queryInfos:n}=((e,t)=>{var i;const r=e.find((({query:e})=>e.queryKey===t));if(!r)return{queryInfos:e,newQueryInfo:null};const n={query:(0,Re.getQueryWithNormalizedKey)(null==(i=(0,m.Z)(e))?void 0:i.query,r.query),localQueryKey:hb()};return{queryInfos:[...e,n],newQueryInfo:n}})(i,e);return t=null==r?void 0:r.query,{queryInfos:n}}),(()=>{var e,i;null==(i=(e=this.props).onQueriesUpdated)||i.call(e,{type:"DuplicatedRow",updatedQueries:this.queries,duplicatedQuery:t})}))},this.removeRow=e=>{let t;this.setState((({queryInfos:i})=>{var r;return t=null==(r=i.find((({query:t})=>t.queryKey===e)))?void 0:r.query,{queryInfos:void 0===t?i:yb(i.filter((({query:t})=>t.queryKey!==e)))}}),(()=>{var e,i;null==(i=(e=this.props).onQueriesUpdated)||i.call(e,{type:"RemovedRow",updatedQueries:this.queries,removedQuery:t})})),this.removedQueryIds.add(e)},this.toggleQueryVisibility=e=>{var t;const{hiddenQueryKeys:i,queries:r}=this.props,n=i.includes(e)?(0,I.Z)(i,e):[...i,e];De.currentUserHelper.hasFeatureFlag("UIMetricsJoiningAutoHide")&&(r.some((t=>t.queryKey===e&&t.queryType===le.QueryTypes.METRICS))&&this.everChangedHiddenStateMetrics.add(e),this.state.autoHide.length&&this.setState((({autoHide:t})=>({autoHide:t.filter((t=>e!==t))})))),this.props.onHiddenQueryKeysChanged(n,(null==(t=this.props.originalVisualSettings)?void 0:t.hiddenQueryKeys)||[])},this.onFocus=e=>{const{focusedRowIndex:t}=this.state,i=this.findQueryRowIndex(e);i===t||void 0===i||this.setState({focusedRowIndex:i})},this.setFocusToRow=e=>{var t,i,r;const{queryInfos:n}=this.state;this.setState({focusedRowIndex:e});const a=null==(t=n[e])?void 0:t.localQueryKey;null==(r=null==(i=this.inputRefs.get(a))?void 0:i.current)||r.focus()},this.focusPrevRow=()=>{const{focusedRowIndex:e,queryInfos:t}=this.state,i=(e-1+t.length)%t.length;this.setFocusToRow(i)},this.focusPrevRowWithoutLoop=()=>{const{focusedRowIndex:e}=this.state,t=Math.max(0,e-1);this.setFocusToRow(t)},this.focusNextRow=()=>{const{focusedRowIndex:e,queryInfos:t}=this.state,i=(e+1)%t.length;this.setFocusToRow(i)},this.onKeyboardBindingsTooltipClose=()=>{this.setState({shouldDisplayKeyboardBindingsTooltip:!1}),r.localStore.setItem(pb,"1")},this.isLoading=(e=this.props)=>{switch(e.fetchStatus){case le.FetchStatus.Loading:case le.FetchStatus.Reloading:case le.FetchStatus.PollingInProgress:return!0;default:return!1}},this.handleQuerySelectionFromHistory=(e,t)=>{const{queries:i,onQueriesUpdated:r}=this.props,{index:n,query:a}=Hf(e,i),s=Wf(t,a),o=t.variables?qf(s,t.variables):s,l=[...i];l.splice(n,1,o),r({type:"UpdatedRow",updatedQueries:l,updatedQuery:o,previousQueries:[],isSubmitted:!0,forceSubmitIfRunQueriesButtonVisible:!1})};const{queries:t,hiddenQueryKeys:i}=e;this.memoizeQueryInfo=(0,oe.default)((e=>e),mb),this.state={queryInfos:this.getQueryInfosFromProps(t),queryStringClearChanged:!1,focusedRowIndex:0,shouldDisplayKeyboardBindingsTooltip:!1,shouldAllowRerunningQueries:!0,autoHide:[]},this.everChangedHiddenStateMetrics=new Set(i.filter((e=>t.some((t=>t.queryKey===e&&t.queryType===le.QueryTypes.METRICS))))),this.removedQueryIds=new Set}componentDidMount(){this.setState((e=>Ct(xt({},e),{previousQueryInfos:this.getQueryInfosFromProps(this.props.queries)}))),this.keyboardSequencesDefs.forEach((e=>Oi.addSequence(e))),this.maybeCleanUpTopSuggestions(),this.props.runQueriesButtonVisible&&this.isLoading()&&this.setState({shouldAllowRerunningQueries:!1})}componentDidUpdate(e){const t=e.forceQueryType!==this.props.forceQueryType,i=!rm(e.queries,this.props.queries,{shouldCompareQueryTypes:!0})&&!rm(this.queries,this.props.queries,{shouldCompareQueryTypes:!0});(t||i)&&this.setState((e=>({queryInfos:this.getQueryInfosFromProps(this.props.queries),queryStringClearChanged:!1,previousQueryInfos:e.queryInfos})));const r=!(0,o.Z)(e.metricsTimeSeriesData,this.props.metricsTimeSeriesData),n=e.timeRange!==this.props.timeRange;this.isMetricsQuantizationInfoEnabled&&(r||n)&&this.setState((({queryInfos:e})=>({queryInfos:e.map((e=>{var t=e,{query:i}=t,r=At(t,["query"]);return Ct(xt({},r),{query:JS({query:i,series:this.props.metricsTimeSeriesData,timeRange:this.props.timeRange})})})),previousQueryInfos:e}))),r&&this.removedQueryIds.clear(),this.props.runQueriesButtonVisible&&this.supportRerunningQueries(e)}componentWillUnmount(){this.keyboardSequencesDefs.forEach((e=>Oi.removeSequence(e)))}get queries(){return this.state.queryInfos.map((({query:e})=>e))}get previousQueries(){var e;return null==(e=this.state.previousQueryInfos)?void 0:e.map((({query:e})=>e))}get isMetricsQuantizationInfoEnabled(){return De.currentUserHelper.hasFeatureFlag("UIMetricsQueryBuilderQuantizationInfo")}isHiddenStatusSame(){return!(Boolean(this.props.unexecutedQueriesNotificationVisible)&&De.currentUserHelper.hasFeatureFlag("UIMetricsJoiningAutoHide")&&this.props.initialOrMostRecentlyRunHiddenQueryKeys)||this.props.initialOrMostRecentlyRunHiddenQueryKeys.every((e=>this.props.hiddenQueryKeys.includes(e)))}shouldShowUnexecutedQueriesNotification(){return Boolean(this.props.unexecutedQueriesNotificationVisible)&&(!this.isHiddenStatusSame()||!rm(this.props.queries,this.props.initialOrMostRecentlyRunQueries,{queryKeysToOmit:this.props.hiddenQueryKeys}))&&!this.runQueriesButtonDisabled}buildInputRefs(e){e.forEach((({localQueryKey:e})=>{this.inputRefs.has(e)||this.inputRefs.set(e,{current:void 0})}))}isKeyboardBindingTooltipSeen(){return Boolean(r.localStore.getItem(pb))}supportRerunningQueries(e){!this.isLoading(e)&&this.isLoading()&&this.setState({shouldAllowRerunningQueries:!1}),(this.isLoading(e)&&!this.isLoading()||!(0,o.Z)(e.queries,this.queries))&&this.setState({shouldAllowRerunningQueries:!0})}get runQueriesFeedbackState(){return this.isLoading()&&!this.state.shouldAllowRerunningQueries?"processing":"default"}get runQueriesButtonDisabled(){return"processing"===this.runQueriesFeedbackState||this.props.queries.every(em)}maybeCleanUpTopSuggestions(){const e=bm(),t=gm(e);e!==t&&Em(t)}render(){const{hiddenQueryKeys:e,supportedQueryTypes:t,variables:i,timeRange:s,forceQueryType:o,onQueryEditorContainerClick:l,onSwitchQueryTypePerformanceMeasurement:c,onUpdateMetricsQueryMode:d,onInputKeyDown:u,defaultMetricsQueryMode:p,renderSpansQueryEditorRow:h,renderTracesQueryEditorRow:m,runQueriesButtonVisible:g,runQueries:y,disallowDuplicatingQuery:v,disallowAddQuery:f,disallowViewQuery:_,scannedBytes:S}=this.props,{queryInfos:b,queryStringClearChanged:E,autoHide:T}=this.state,x=this.memoizeQueryInfos(b),C=gb(this.queries);this.buildInputRefs(x);const A=Object.values(C).reduce(((e,t)=>e+t.size),0),w=OS(t),I=b.filter((({query:t})=>!e.includes(t.queryKey))).length>1,R=De.currentUserHelper.hasFeatureFlag("UIMonitorsIntegrateMetrics"),D=De.currentUserHelper.hasFeatureFlag("UISLOSourceMetrics"),O=De.currentUserHelper.getUserSetting("enterKeyRunsQuery"),N=r.i18nUtil.get(O?"sharedAnalytics.metricsQueryBuilder.runQueriesShortcut.enter":"sharedAnalytics.metricsQueryBuilder.runQueriesShortcut.altEnter."+((0,r.isAppRunningOnMac)()?"mac":"nonMac"));return n.createElement("section",{className:ue(wf,{[If]:g}),onClick:l,onInput:()=>{g&&this.setState({shouldAllowRerunningQueries:!0})}},n.createElement("div",{className:ue({[Rf]:g,[Df]:Boolean(this.props.unexecutedQueriesNotificationVisible)})},x.map((({localQueryKey:r,query:a},l)=>n.createElement(ce.ErrorBoundary,{key:r},n.createElement(CS,{key:r,index:l,query:a,timeRange:s,showAddButton:!f&&l===b.length-1&&A<w&&!Jh(a),showDuplicateButton:!v&&gb(x.map((e=>e.query)))[a.queryType].size<Ju[a.queryType]&&!Jh(a),showDeleteButton:b.length>1,showCreateAlertButton:Boolean(this.props.createAlert)&&!Jh(a)&&R,showCreateSloButton:Boolean(this.props.createSlo)&&!Jh(a)&&D,addRow:this.addRow,duplicateRow:this.duplicateRow,removeRow:this.removeRow,createAlert:this.props.createAlert,createSlo:this.props.createSlo,toggleQueryVisibility:this.toggleQueryVisibility,isQueryHidden:e.includes(a.queryKey),allowHiding:I,errors:this.props.errors.get(a.queryKey),queryStringClearChanged:E,allowedQueryTypes:new Set(Object.entries(C).map((([e,t])=>a.queryType===e||t.size<this.getQueryLimitByType(a.queryType)?e:void 0)).filter((e=>e))),allowOnlySingleQueryRow:_||1===w,supportedQueryTypes:t,variables:i,onInputKeyDown:u,forceQueryType:o,onQueryUpdated:this.onQueryUpdated,onQuerySubmitted:this.onQuerySubmitted,isFocused:this.state.focusedRowIndex===l,onFocus:this.onFocus,focusPrevRow:this.focusPrevRow,focusNextRow:this.focusNextRow,focusPrevRowWithoutLoop:this.focusPrevRowWithoutLoop,inputRef:this.inputRefs.get(r),onSwitchQueryTypePerformanceMeasurement:c,onUpdateMetricsQueryMode:d,defaultMetricsQueryMode:p,renderSpansQueryEditorRow:h,renderTracesQueryEditorRow:m,onAutoHide:this.handleAutoHide,isAutoHidden:T.includes(a.queryKey),renderRowIdentifier:this.props.renderRowIdentifier,scannedBytes:S,showQueryHistory:this.props.showQueryHistory,handleQuerySelectionFromHistory:this.handleQuerySelectionFromHistory,showMetricsQuantizationInfo:this.props.showMetricsQuantizationInfo})))),this.shouldShowUnexecutedQueriesNotification()&&n.createElement(wS,null)),g&&n.createElement("div",{className:Of},n.createElement(a.Tooltip,{title:N},n.createElement(a.FeedbackButton,{"aria-label":r.i18nUtil.get("sharedAnalytics.metricsQueryBuilder.runQueries"),color:"primary","data-sumo-test":`run-queries--${this.runQueriesFeedbackState}`,disabled:this.runQueriesButtonDisabled,feedbackState:this.runQueriesFeedbackState,feedbackIcon:{default:a.IconName.Search},onClick:()=>{this.setState({shouldAllowRerunningQueries:!1}),null==y||y()},size:"small"}))),this.state.shouldDisplayKeyboardBindingsTooltip&&n.createElement(ti,{onClose:this.onKeyboardBindingsTooltipClose}))}}const fb=n.memo(vb),_b=e=>De.currentUserHelper.hasFeatureFlag("UIQueryEditorV2")?n.createElement(ub,xt({},e)):n.createElement(fb,xt({},e)),Sb="previewContainer___UNPl-",bb="previewTabsContainer___d-PuM",Eb="previewTabsContent___-EbaT",Tb="previewChartPane___oBliE",xb="previewTabsSection___9biTn",Cb=({id:e,tabs:t,activeTab:i,onTabClick:r,onSettingsTabClick:s,performanceService:o,classes:{previewContainer:l,previewTabsContainer:c,previewTabsContent:d}={}})=>{const{startMeasuringPerformanceBetweenTabsSwitch:u}=(({id:e,activeTab:t,performanceService:i})=>{const r=`render_switchBetweenTabs_${e}`,a=(0,n.useRef)(t);return(0,n.useEffect)((()=>{t!==a.current&&(null==i||i.measure({measurementId:r,name:"tabs_switch_e2e",metadata:{flow_type:`${a.current}_to_${t}`}}),a.current=t)}),[t,r,i]),{startMeasuringPerformanceBetweenTabsSwitch:()=>{null==i||i.createMark({measurementId:r})}}})({id:e,activeTab:i,performanceService:o}),p=t.filter((e=>void 0===e.visible||e.visible)).map((e=>{var t;if(null!=(t=e.settings)&&t.tabs.length){const t=n.createElement(a.TabDrawerPanel,{tabPos:"right",tabs:e.settings.tabs,isResizable:!0,activeTab:e.settings.activeTab,defaultActiveTab:e.settings.defaultActiveTab,defaultDrawerState:!0,drawerState:e.settings.isSettingsDrawerVisible,disableAnimation:!0,defaultWidth:rp,minWidth:rp,onTabClick:s,styleProps:{tabsSection:xb}},n.createElement(a.TabDrawerPanel.MainWindow,{className:Tb},e.component));return Ct(xt({},e),{component:t})}return e}));return n.createElement("div",{className:ue(Sb,l)},1===p.length?p[0].component:n.createElement(a.Tabs,{tabs:p,activeTab:i,styleProps:{tabsContainer:ue(bb,c),tabContent:ue(Eb,d)},onTabClick:e=>{u(),r&&r(e)}}))},Ab=[Rl.LOWER,Rl.UPPER,Rl.VIOLATION,Rl.INDICATOR],wb=Object.values(Rl).length,Ib=e=>!(!e.outlierData||0===e.outlierData.anomalyScore||null===e.y)&&e.outlierData.isOutlier,Rb=e=>{var t;const i=(null!=(t=(0,m.Z)(e.split("_")))?t:"").toUpperCase();return i in Rl?Rl[i]:null};const Db=(0,oe.default)(((e,t)=>{const i=e.reduce(((e,i)=>{const{name:r,queryId:n}=i;if(n===t.queryId&&function(e,t){const i=t.name,r=Ab;if(0!==e.indexOf(i))return!1;for(const t of r)if(e.lastIndexOf(`_${t}`)===i.length&&i.length+t.length+1===e.length)return!0;return!1}(r,t)){e[Rb(r)]=i}return e}),{});if(Object.keys(i).length===Ab.length)return i})),Ob=(0,oe.default)((e=>e.reduce(((t,i)=>{const r=Db(e,i);return r&&(t[Bb(i)]=r),t}),{})));const Nb=(0,oe.default)((e=>{const t=Ob(e);return Object.keys(t)}));function Mb(e){return Object.entries(xt(xt({},Uc),null==e?void 0:e.general)).reduce(((e,[t,i])=>(t.includes("outlierBand")&&(e[(0,r.uncapitalize)(t.split("outlierBand")[1])]=i),e)),{})}const kb=e=>{var t,i;return Boolean(null!=(i=e.outlierData)?i:null==(t=e.sumoMetadata)?void 0:t.outlierData)},Lb=(0,r.memoize)((e=>{var t;return null==(t=e.dataPoints)?void 0:t.some(kb)}),{maxNumberOfResults:100}),Pb=(0,oe.default)(((e,t)=>{if(void 0!==t&&"NoMetricSeriesOutliers"!==t)return t;if("NoMetricSeriesOutliers"!==t&&e.some(Lb)){let t=0;for(const i of e){if(t>1)break;Lb(i)&&t++}return 1===e.length?"SingleSeriesWithMetricsOutlier":1===t?"MultipleSeriesWithSingleMetricOutlier":"MultipleSeriesWithMultipleMetricOutliers"}if(function(e){const t=new Set;return Array.from(e.reduce(((e,i)=>{var r;const n=i.name;t.add(Bb({queryId:i.queryId,name:n}));for(const t of Ab){const a=n.lastIndexOf(`_${t}`);if(-1!==a){const s=n.substring(0,a),o=Bb({queryId:i.queryId,name:s});(null!=(r=e.get(o))?r:e.set(o,new Set).get(o)).add(t);break}}return e}),new Map).entries()).some((([e,i])=>i.size===Ab.length&&t.has(e)))}(e)){const t=Nb(e).length;return e.length===wb+1?"SingleSeriesWithLogOutlier":1===t?"MultipleSeriesWithSingleLogOutlier":"MultipleSeriesWithMultipleLogOutliers"}return"SeriesWithNoOutlierDataPoints"})),Fb=(0,oe.default)(((e,t)=>{const i=e.length>0?e[0]:void 0;return(null==i?void 0:i.seriesType)===Go.TIMESERIES&&["SingleSeriesWithLogOutlier","MultipleSeriesWithSingleLogOutlier","MultipleSeriesWithMultipleLogOutliers","SingleSeriesWithMetricsOutlier","MultipleSeriesWithSingleMetricOutlier","MultipleSeriesWithMultipleMetricOutliers"].includes(Pb(e,t))})),Ub=(e,[t,i],r,n)=>{if("violation"in r){const e=1===parseFloat(r.indicator.dataPoints[n].y),t=1===parseFloat(r.violation.dataPoints[n].y);return e&&t}return e<t||e>i},Vb=(e,t)=>Ct(xt({},t),{name:`${t.name}_${e}`,dataPoints:t.dataPoints.map((t=>t.outlierData?Ct(xt({},t),{outlierData:null,y:"lower"===e?t.outlierData.lowerBound:t.outlierData.upperBound}):t))}),Bb=({name:e,queryId:t})=>`${t}#${e}`,$b=(0,oe.default)(((e,t)=>{const[i,r]=t.split("#");return e.find((e=>e.queryId===i&&e.name===r))})),Hb=(e,t,i,n)=>{if(!i&&Fb(e,n)){const i=((e,t)=>{let i={};const r=Pb(e,t);if(["SingleSeriesWithMetricsOutlier","MultipleSeriesWithSingleMetricOutlier"].includes(r)){const t=e.find(Lb);if(!t)return{};const r=Vb("upper",t),n=Vb("lower",t);i[Bb(t)]={upper:r,lower:n}}return["SingleSeriesWithLogOutlier","MultipleSeriesWithSingleLogOutlier"].includes(r)&&(i=xt(xt({},i),Ob(e))),i})(e,n),a=e.filter((e=>!Rb(e.name)));return Object.entries(i).forEach((([i,n])=>{const s=$b(e,i);if(s){const e=((e,t,i)=>{const{lower:n,upper:a}=t,s=Mb(null!=i?i:{}),{markerColor:o,markerSize:l,markerType:c,displayType:d}=s,u=At(s,["markerColor","markerSize","markerType","displayType"]),p=[];for(let i=0;i<e.dataPoints.length;i++){const s=e.dataPoints[i],{x:d,y:u}=s;if((0,r.isNumber)(u)&&(0,r.isNumber)(n.dataPoints[i].y)&&(0,r.isNumber)(a.dataPoints[i].y)){const e=[Math.min(n.dataPoints[i].y,a.dataPoints[i].y),Math.max(n.dataPoints[i].y,a.dataPoints[i].y)];p.push({x:d,y:e}),Ub(u,e,t,i)&&(s.isOutlier=!0,s.markerSize=l,s.markerType=c,s.markerColor=o,s.markerBorderColor=o)}}const h=d===le.ChartDisplayTypeOptions.SMOOTH?ce.ChartType.RANGE_SPLINE_AREA:ce.ChartType.RANGE_AREA;return Ct(xt(xt({},e),u),{highlightEnabled:!1,dataPoints:p,name:r.i18nUtil.get("sharedAnalytics.outliersThreshold.legendLabel",e.name),type:h,isOutlierThreshold:!0})})(s,n,t);a.push(e)}})),a.reverse()}return e},Wb=(e,t,i)=>i?e:e.map((e=>{if(!e.dataPoints.some((e=>Ib(e))))return e;const{markerSize:i,markerType:r,markerColor:n}=Mb(t);return Ct(xt({},e),{dataPoints:e.dataPoints.map((e=>xt(xt({},e),Ib(e)?{isOutlier:!0,markerSize:i,markerType:r,markerColor:n,markerBorderColor:n}:void 0)))})})),qb=(e,t,i,r)=>{const n=r===le.VisualSettingsType.TABLE;switch(Pb(e,i)){case"SeriesWithNoOutlierDataPoints":return e;case"SingleSeriesWithLogOutlier":case"MultipleSeriesWithMultipleLogOutliers":case"SingleSeriesWithMetricsOutlier":return Hb(e,t,n,i);case"MultipleSeriesWithSingleMetricOutlier":return((e,t,i,r)=>{const n=Wb(e,t,i);return Hb(n,t,i,r)})(e,t,n,i);case"MultipleSeriesWithMultipleMetricOutliers":return Wb(e,t,n);case"MultipleSeriesWithSingleLogOutlier":return((e,t,i,r)=>{const n=Nb(e);if(n.length){const a=Hb(e,t,i,r),[s,o]=n[0].split("#");return a.filter((e=>e.queryId!==s||e.name===o||e.name===`${o}_threshold`))}return e})(e,t,n,i)}},jb=["column","bar"];function Qb(e,t,i,r){return e===Yo.TIME_SERIES&&t&&jb.includes(t)&&i===le.ChartDisplayTypeOptions.DEFAULT&&r>Xl}function zb(e){return"map"===(null==e?void 0:e.mode)?Jl:ec}function Gb(e,t,i){var r,n,a;const s=zb(t),o=zb(e);return s>o&&(null!=(r=null==i?void 0:i.errors)?r:[]).some((({code:e})=>e.includes(":too_many_input_series")||e.includes(":too_many_output_series")))&&(null!=(a=null!=(n=null==i?void 0:i.data)?n:null==i?void 0:i.series)?a:[]).length<=o}const Kb=(0,oe.default)(((e,{hiddenQueryKeys:t,displayType:i,mode:n,type:a},s)=>{var o;if(!e)return[];const l=e.filter((e=>!(null!=t&&t.includes(e.queryId)))),c=null!=(o=null==s?void 0:s.filter((({queryString:e})=>Gp(e))).length)?o:0,d=Pb(l,void 0),u=[];return(c>1||["MultipleSeriesWithMultipleMetricOutliers","MultipleSeriesWithMultipleLogOutliers"].includes(d))&&u.push({message:r.i18nUtil.get("sharedAnalytics.outliersThreshold.bounds"),type:"warning"}),Qb(n,a,i,l.length)&&u.push({message:r.i18nUtil.get("sharedAnalytics.tooManySeriesOnColumnOrBarChart"),type:"warning"}),u})),Yb=/metric\s*=\s*([^\s]*)+\b/,Zb=e=>{const t=e.match(Yb);return t?t[1]:""},Xb=e=>{var t;return(null==e?void 0:e.type)!==r.ResolvableTimeRangeType.BeginBoundedTimeRange||(null==(t=e.to)?void 0:t.type)!==r.TimeRangeBoundaryType.EpochTimeRangeBoundary||e.from.type!==r.TimeRangeBoundaryType.EpochTimeRangeBoundary?void 0:(e.to.epochMillis-e.from.epochMillis)/1e3},Jb=e=>Yh(e)&&e.queryString.trim().length>0||Zh(e),eE=({queries:e,updatedQuery:t})=>{const i=(0,n.useMemo)((()=>{const i=t&&Jb(t)?t:(0,R.Z)(e,Jb);if(void 0===i)return;const r=i.metricsQueryMode===le.QueryModes.BASIC?xt({},i.metricsQueryData):void 0;return{queries:e,rowKey:i.queryKey,queryData:r}}),[e,t]),a=(0,r.usePrevious)(i);return(0,o.Z)(a,i)?a:i},tE=()=>{var e,t,i;return""!==(null!=(i=null==(t=null==(e=document.getElementById(a.YAMA_AUTOCOMPLETE_CONTAINER_ID))?void 0:e.textContent)?void 0:t.trim())?i:"")},iE=(e,t,i=tE)=>{const r=(0,n.useCallback)((t=>{(t.ctrlKey||t.metaKey)&&"Enter"===t.key&&e()}),[e]),a=(0,n.useCallback)((r=>{i()||(t?!r.ctrlKey&&!r.metaKey&&!r.altKey&&"Enter"===r.key&&e():r.altKey&&"Enter"===r.key&&e())}),[t,e,i]);return void 0===t?r:a},rE=({tabs:e,isPreviewTableAvailable:t,timeSeriesData:i,hiddenQueryKeys:a,previewParameters:s,previewTable:o,onUpdatePreviewParameters:l})=>{const{measurementService:c}=o,{onPreviewTableFinishedRendering:d}=(e=>(null==e||e.start(),{onPreviewTableFinishedRendering:(0,n.useCallback)((t=>{e&&requestAnimationFrame((()=>{e.end(t)}))}),[e])}))(c);return(0,n.useMemo)((()=>e.concat({label:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.tabLabel"),value:"previewTable","data-sumo-test":o.dataSumoTest,visible:o.visible,disabled:!t,component:n.createElement(kh,{fetchStatus:o.fetchStatus,filters:o.previewTableFilters,updateFilters:o.updatePreviewTableFilters,timeSeriesData:i,hiddenQueryKeys:a,previewParameters:s,onUpdatePreviewParameters:l,onDidRender:d})})),[e,t,s,o,a,i,d,l])},nE=()=>{const e=location.hash.includes("metrics"),t={metrics:{title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryRun.title"),description:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryRun.metricsDescription"),buttonTitle:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryRun.metricsButtonText"),docsLink:"https://help.sumologic.com/Metrics"},dashboard:{title:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryRun.title"),description:"",buttonTitle:r.i18nUtil.get("sharedAnalytics.metricsPreviewTableV2.states.noQueryRun.dashboardButtonText"),docsLink:"https://help.sumologic.com/docs/dashboards-new/"}},i=e?t.metrics:t.dashboard;return n.createElement(a.StateOverlay,{iconName:a.SvgName.TimeSeries,title:i.title,description:i.description,textButtonConfigs:[{buttonTitle:i.buttonTitle,onClick:()=>window.open(i.docsLink,"_blank","noopener"),iconRight:"pop-out"}],"data-sumo-test":"empty-visualization"})},aE=(e,t,i)=>{if("whereOperator"===e)return i.length>1?r.i18nUtil.get(t.multiQueryMessageKey,{queryId:t.queryId}):r.i18nUtil.get(t.singleQueryMessageKey);const{operator:n,dimension:a,cardinality:s,queryId:o}=t;return s>1?i.length>1?r.i18nUtil.get("sharedAnalytics.hints.multiQueryAggregationHintWithDimension",{queryId:o,dimension:(0,O.Z)(null!=a?a:""),operator:n}):r.i18nUtil.get("sharedAnalytics.hints.singleQueryAggregationHintWithDimension",{dimension:(0,O.Z)(null!=a?a:""),operator:n}):i.length>1?r.i18nUtil.get("sharedAnalytics.hints.multiQueryAggregationHintWithoutDimension",{queryId:o,operator:n}):r.i18nUtil.get("sharedAnalytics.hints.singleQueryAggregationHintWithoutDimension",n)},sE=({queries:e,setUpdatedQueriesData:t,queryHints:i,updateHint:s})=>{const[o,l]=(0,n.useState)(0);(0,n.useEffect)((()=>{o>i.length-1&&l(i.length>0?i.length-1:0)}),[i,o,l]);const c=(0,n.useCallback)((()=>{o>0&&l((e=>e-1))}),[o]),d=(0,n.useCallback)((()=>{o<i.length-1&&l((e=>e+1))}),[i,o]),u=(0,n.useCallback)((r=>{const{queryId:n,dimension:a,operator:c}=r.meta,d=e.findIndex((e=>e.queryKey===n)),u="BasicMetricsQuery"===e[d].type?((e,t,i)=>{const r=xt({},e);return r.metricsQueryData.operators.push({key:t,value:i}),r.queryString=Np(r.metricsQueryData),r})(e[d],c,a):((e,t,i)=>{const r=e.queryString.split("\n"),n=r.length-1,a=jm(e.queryString,n,r[n].length-1);return Ct(xt({},e),{queryString:`${e.queryString}${a?"\n":" "}| ${t}${i?` by ${i}`:""}`})})(e[d],c,a);t({queries:[...e.slice(0,d),u,...e.slice(d+1)],forceSubmitIfRunQueriesButtonVisible:!1,isSubmitted:!1}),s({dismissAll:!1,hint:r}),o>0&&o===i.length-1&&l((e=>e-1)),(0,de.pendoTrack)(de.PendoEvent.MetricsHint_Applied,{dimension:null!=a?a:"",id:r.id})}),[e,o,i,t,s]),p=0===i.length||o>i.length-1?null:i[o],h=(0,n.useCallback)((()=>{var e;s({dismissAll:!0}),(0,de.pendoTrack)(de.PendoEvent.MetricsHint_Closed,{dimension:"aggregation"===(null==p?void 0:p.type)&&null!=(e=p.meta.dimension)?e:"",id:p.id})}),[p,s]);return p?n.createElement(a.InlineNotification,{key:"query-hints",text:n.createElement("span",{dangerouslySetInnerHTML:{__html:aE(p.type,p.meta,e)}}),status:"recommendation",multiline:!0,"data-sumo-test":"query-hints-inline-notification",navigation:i.length>1?{text:r.i18nUtil.get("sharedAnalytics.hints.navigationText"),current:o+1,count:i.length,onPrev:c,onNext:d}:null,clickAction:"aggregation"===p.type?{text:r.i18nUtil.get("sharedAnalytics.hints.addOperatorToQuery"),onClick:()=>u(p)}:void 0,onClose:h}):null},oE="container___iq82-",lE="queryBuilderWrapper___Oqz-e",cE={},dE=[],uE=({queries:e,timeRange:t,fetchStatus:i,queryErrors:s,queryHints:o,queryNotifications:l,resultsTabs:d,resultsTabsElementId:u,supportedQueryTypes:p,forceQueryTypes:h,hiddenQueryKeys:g,timeSeriesData:y,performanceService:v,originalVisualSettings:f,variables:_,createAlert:S,createSlo:b,onQueriesUpdated:E,initialQueryEditorTab:T,onTabChanged:x,updateHiddenQueryKeys:A,updateHint:w,defaultQueryType:I,previewTableProps:R,handleSettingsTabChange:O,onQueryEditorContainerClick:N,onSwitchQueryTypePerformanceMeasurement:M,renderSpansQueryEditorRow:k,scannedBytes:L})=>{var P,F;const[U,V]=(0,n.useState)({}),[B,$]=(0,n.useState)({queries:e,isSubmitted:!0,forceSubmitIfRunQueriesButtonVisible:!1}),H=(0,n.useRef)(B),W=n.useCallback((e=>{H.current=e,$(e)}),[]),q=eE({queries:e,updatedQuery:B.updatedQuery}),j=(0,n.useCallback)(((e,t)=>{W({queries:e,forceSubmitIfRunQueriesButtonVisible:B.forceSubmitIfRunQueriesButtonVisible||Boolean(t),isSubmitted:Boolean(t)})}),[W,B.forceSubmitIfRunQueriesButtonVisible]),Q=n.useCallback((({dismissAll:e,hint:t})=>{w({dismissAll:e,id:null==t?void 0:t.id}),t&&V((e=>Ct(xt({},e),{[t.meta.queryId]:t})))}),[w]),{isPreviewTableAvailable:z,updatePreviewTable:G}=(({updatedQueriesData:e,runQueriesButtonVisible:t,onQueriesUpdated:i})=>{const{queries:a}=e,[s,o]=(0,n.useState)(Xh(a)),[l,c]=(0,n.useState)(a),d=(0,n.useCallback)((()=>{const e=Xh(a);o(e)}),[a]),u=(0,r.usePrevious)(e);return(0,n.useEffect)((()=>{if(u===e)return;const r=e.queries,n=null==u?void 0:u.queries,s=e.updatedQuery,o=null==n?void 0:n.find((e=>e.queryKey===(null==s?void 0:s.queryKey))),p=o&&s&&o.type!==s.type,h=n&&a&&n.length<a.length,m=t?e.isSubmitted&&Boolean(e.forceSubmitIfRunQueriesButtonVisible):e.isSubmitted||(()=>{const e=l.find((e=>e.queryKey===(null==s?void 0:s.queryKey)));return e&&s&&e.type!==s.type?e.queryString.trim()!==s.queryString.trim():"BasicMetricsQuery"===(null==s?void 0:s.type)})()||!(!n||0===n.length||n.length===r.length)&&(0,C.Z)(r.length>n.length?r:n,r.length<n.length?r:n,((e,t)=>e.queryKey===t.queryKey)).some((0,D.Z)(Jh));i({updatedQueries:e.queries,updatedQuery:s,isSubmitted:m}),m&&d(),(m||p||h)&&c(a)}),[a,l,u,e,t,i,d]),{isPreviewTableAvailable:s,updatePreviewTable:d}})({updatedQueriesData:B,runQueriesButtonVisible:!0,onQueriesUpdated:E}),{activeTab:K,onTabClicked:Y}=(({initialActiveTab:e="chart",isPreviewTableAvailable:t,onTabChanged:i})=>{const[a,s]=(0,n.useState)(e),o=(0,r.usePrevious)(t);(0,n.useEffect)((()=>{void 0!==o&&o!==t&&s(t?"previewTable":"chart")}),[o,t]);const l=(0,r.usePrevious)(a);(0,n.useEffect)((()=>{void 0!==l&&l!==a&&(null==i||i(a))}),[l,a,i]);const c=(0,n.useCallback)((e=>{("previewTable"!==e||t)&&s(e)}),[t]);return{activeTab:a,onTabClicked:c}})({initialActiveTab:T,isPreviewTableAvailable:z,onTabChanged:x}),Z=(0,n.useCallback)((e=>{null==O||O(e)}),[O]),X=n.useCallback((e=>{switch(e.type){case"AddedRow":case"DuplicatedRow":case"RemovedRow":{const t="RemovedRow"===e.type?e.removedQuery:void 0;W({queries:e.updatedQueries,updatedQuery:t,isSubmitted:!1}),(null==t?void 0:t.queryKey)&&U[t.queryKey]&&V((e=>(0,c.Z)(e,t.queryKey)));break}case"UpdatedRow":W({queries:e.updatedQueries,updatedQuery:e.updatedQuery,isSubmitted:e.isSubmitted,forceSubmitIfRunQueriesButtonVisible:e.forceSubmitIfRunQueriesButtonVisible})}}),[U,W]),[J,ee]=(0,n.useState)({queries:e,hiddenQueryKeys:g}),te=(0,n.useCallback)((()=>{for(const t of e){const e=U[t.queryKey];if(!e)continue;const{id:i,meta:r}=e,{dimension:n,operator:a,queryMetric:s}=r;Zb(t.queryString)===s?MS(t.queryString,a,n)?(0,de.pendoTrack)(de.PendoEvent.MetricsHint_QueryWithHintExecuted,{id:i,dimension:null!=n?n:""}):(0,de.pendoTrack)(de.PendoEvent.MetricsHint_QueryWithoutHintExecuted,{id:i,queryString:t.queryString}):V((e=>(0,c.Z)(e,t.queryKey)))}}),[e,U]),ie=(0,n.useCallback)((()=>{if(ee({queries:e,hiddenQueryKeys:g}),E({updatedQueries:H.current.queries,updatedQuery:H.current.updatedQuery,isSubmitted:!0}),De.currentUserHelper.hasFeatureFlag("UIMetricsQueryHistory")){const e=_&&Object.keys(_)?Object.keys(_).reduce(((e,t)=>(e[t]=_[t].selectedValue[0],e)),{}):null;eg(H.current.queries,e)}G(),te()}),[E,e,g,G,te,_]),re=(0,n.useCallback)((()=>{setTimeout(ie)}),[ie]),ne=De.currentUserHelper.getUserSetting("enterKeyRunsQuery"),ae=iE(re,null==ne||ne),se=rE({tabs:d,isPreviewTableAvailable:z,timeSeriesData:y,hiddenQueryKeys:g,previewParameters:q,onUpdatePreviewParameters:j,previewTable:R}),oe=(0,n.useCallback)((e=>{(e=>"chart"===e||"previewTable"===e)(e)&&Y(e)}),[Y]);return n.createElement("div",{className:oE},n.createElement("div",{className:lE},n.createElement(_b,{queries:e,fetchStatus:i,onQueriesUpdated:X,timeRange:t,errors:s,hiddenQueryKeys:null!=g?g:dE,onHiddenQueryKeysChanged:A,supportedQueryTypes:p,forceQueryType:h,variables:null!=_?_:cE,createAlert:S,createSlo:b,metricsTimeSeriesData:y,originalVisualSettings:f,defaultQueryType:null!=(F=null==(P=(0,m.Z)(e))?void 0:P.queryType)?F:I,onQueryEditorContainerClick:N,onSwitchQueryTypePerformanceMeasurement:M,defaultMetricsQueryMode:Bf(),onUpdateMetricsQueryMode:$f,renderSpansQueryEditorRow:k,runQueriesButtonVisible:!0,runQueries:ie,scannedBytes:L,onInputKeyDown:ae,unexecutedQueriesNotificationVisible:!0,initialOrMostRecentlyRunQueries:J.queries,initialOrMostRecentlyRunHiddenQueryKeys:J.hiddenQueryKeys,showQueryHistory:!0,showMetricsQuantizationInfo:!0})),null==l?void 0:l.map((({message:e,type:t},i)=>n.createElement(a.InlineNotification,{key:`general-error-${i}`,text:e,status:t,multiline:!0,"data-sumo-test":"query-notifications-inline-notification"}))),!(null==o||!o.length)&&n.createElement(sE,{queryHints:o,queries:e,updateHint:Q,setUpdatedQueriesData:W}),"NeverLoaded"===i&&De.currentUserHelper.hasFeatureFlag("UINewEmptyStateEnabled")?n.createElement(nE,null):n.createElement(ce.ErrorBoundary,null,n.createElement(Cb,{id:u,tabs:se,activeTab:K,performanceService:v,onSettingsTabClick:Z,onTabClick:oe})))},pE={axisYType:ce.AxisYType.leftYAxis,color:"someColor",dataPointMaxWidth:1,displayType:le.ChartDisplayTypeOptions.DEFAULT,fillOpacity:1,innerRadius:1,lineDashType:le.LineDashStyleOptions.DASH,lineThickness:1,markerSize:1,markerType:le.MarkerTypeOptions.CIRCLE,maxNumOfSlices:1,name:"someName",orientation:nl.DEFAULT,startAngle:0,type:le.VisualSettingsType.LINE,valueRepresents:rl.AREA,visible:!0,aggregationType:"min",decimals:0,paginationPageSize:100,fontSize:12,groupBy:[],outlierBandColor:"#FDECF5",outlierBandMarkerColor:"#F032A9",outlierBandFillOpacity:.5,outlierBandLineThickness:2,outlierBandMarkerSize:10,outlierBandMarkerType:le.MarkerTypeOptions.CIRCLE,outlierBandLineDashType:le.LineDashStyleOptions.DASH,outlierBandDisplayType:le.ChartDisplayTypeOptions.DEFAULT,sortBy:"",sortDir:ac},hE="q1",mE="q2",gE="qX",yE=e=>(0,N.Z)(e,(e=>void 0===e)),vE=(e,t)=>e&&t.includes(e)?e:void 0,fE=e=>{if(!e)return;if(void 0===e.type)return e;const t=e;return e.type&&!zo.includes(e.type)?e:(e=>{const{axisYType:t,color:i,dataPointMaxWidth:r,displayType:n,fillOpacity:a,innerRadius:s,lineDashType:o,lineThickness:l,markerSize:c,markerType:d,maxNumOfSlices:u,name:p,orientation:h,startAngle:m,type:g,valueRepresents:y,visible:v}=e,f={color:i,name:p,visible:v};switch(g){case le.VisualSettingsType.AREA:const e=vE(n,[le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.SMOOTH,le.ChartDisplayTypeOptions.STEPPED,le.ChartDisplayTypeOptions.STACKED,le.ChartDisplayTypeOptions.STACKED_PERCENT]);return yE(Ct(xt({},f),{displayType:e,fillOpacity:a,lineDashType:o,lineThickness:l,markerSize:c,markerType:d,type:g,axisYType:t}));case le.VisualSettingsType.BAR:const i=vE(n,[le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.STACKED,le.ChartDisplayTypeOptions.STACKED_PERCENT]);return yE(Ct(xt({},f),{dataPointMaxWidth:r,displayType:i,fillOpacity:a,name:p,type:g,axisYType:t}));case le.VisualSettingsType.BUBBLE:return yE(Ct(xt({},f),{fillOpacity:a,markerType:d,type:g}));case le.VisualSettingsType.COLUMN:const v=vE(n,[le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.STACKED,le.ChartDisplayTypeOptions.STACKED_PERCENT]);return yE(Ct(xt({},f),{dataPointMaxWidth:r,displayType:v,fillOpacity:a,type:g,axisYType:t}));case le.VisualSettingsType.HONEYCOMB:return yE({name:p,type:g});case le.VisualSettingsType.LINE:const _=vE(n,[le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.SMOOTH,le.ChartDisplayTypeOptions.STEPPED]);return yE(Ct(xt({},f),{displayType:_,lineDashType:o,lineThickness:l,markerSize:c,markerType:d,type:g,axisYType:t}));case le.VisualSettingsType.PIE:return yE(Ct(xt({},f),{fillOpacity:a,innerRadius:s,maxNumOfSlices:u,startAngle:m,type:g}));case le.VisualSettingsType.PYRAMID:const S=vE(n,[le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.FUNNEL]);return yE(Ct(xt({},f),{displayType:S,fillOpacity:a,maxNumOfSlices:u,orientation:h,type:g,valueRepresents:y}));case le.VisualSettingsType.SCATTER:return yE(Ct(xt({},f),{fillOpacity:a,markerSize:c,markerType:d,type:g}));case le.VisualSettingsType.TABLE:return yE({name:p,type:g})}})(t)},_E=e=>(t,i)=>e.queries.some((e=>t.includes(e)))||e.series.some((e=>i.includes(e))),SE=e=>(t,i,r)=>{if(!1===r)return!1;if(!t||!i)return!0;switch(t){case"distribution":case"timeSeries":const r=[le.VisualSettingsType.AREA,le.VisualSettingsType.BAR,le.VisualSettingsType.COLUMN,..."timeSeries"===t?[le.VisualSettingsType.LINE]:[]];return[e,i].every((e=>r.includes(e)));case"heatmap":case"honeyComb":case"ImagePanel":case"map":case"singleValueMetrics":case"table":case"TextPanel":case"traceList":case"serviceMap":return!1}},bE=e=>(t,i)=>(r,n=w.Z)=>{var a;return(null!=(a=e.overrides)?a:[]).reduce(((r,a,s)=>{var o,l;const d="type"in a.properties&&a.properties.type&&!SE(a.properties.type)(null==(o=null==e?void 0:e.general)?void 0:o.mode,null==(l=null==e?void 0:e.general)?void 0:l.type)?(0,c.Z)(a.properties,"type"):a.properties;return((e,t)=>{if(t||e.properties){const i=xt(xt({},e.properties),null==t?void 0:t.properties),r=xt(xt({},e.unsafeCanvasJSProperties),null==t?void 0:t.unsafeCanvasJSProperties);return{properties:(0,u.Z)(i)?void 0:i,unsafeCanvasJSProperties:(0,u.Z)(r)?void 0:r}}return{properties:void 0}})(r,_E(a)(t,i)?{properties:n(d,s),unsafeCanvasJSProperties:a.unsafeCanvasJSProperties}:null)}),{properties:r})},EE=(e,t)=>{var i,r;const n=null==(i=null==e?void 0:e.general)?void 0:i.type,a=n&&zo.includes(n)?n:void 0;let s=null==(r=null==e?void 0:e.series)?void 0:r[t];return s&&"visible"in s&&(s=(0,c.Z)(s,["visible"])),a||s?xt(xt({},a?{type:a}:null),s):void 0},TE=(0,oe.default)((e=>(0,oe.default)(((t,i)=>{if(!Boolean(e.overrides))return(e=>(t,i)=>{var r,n,a,s;let o;return t&&(null==(r=null==e?void 0:e.queries)?void 0:r[t])&&(o=null==(n=null==e?void 0:e.queries)?void 0:n[t]),null!=(a=null==e?void 0:e.series)&&a[i]&&(o=xt(xt({},o),null==(s=null==e?void 0:e.series)?void 0:s[i]),o&&"visible"in o&&(o=(0,c.Z)(o,["visible"]))),o})(e)(t,i);const{properties:r,unsafeCanvasJSProperties:n}=bE(e)(t?[t]:[],[i])(EE(e,i)),a=fE(r);return a?xt(xt({},n),a):void 0})))),xE=e=>(t,i)=>Object.keys(t).reduce(((t,n)=>("overridden"===e?((0,r.assertDefined)(i),t[n]={type:e,overrideIndex:i}):t[n]={type:e},t)),{}),CE=(0,oe.default)(((e,t)=>["queries","series"].reduce(((i,r)=>{var n;const a=((e,t)=>[...new Set(e.reduce(((e,i)=>e.concat(i[t])),[]))])(null!=(n=e.overrides)?n:[],r);return i[r]=a.reduce(((i,n)=>{var a,s;const o=EE(e,n),l=bE(e)("queries"===r?[n]:[null!=(a=t[n])?a:null].filter(Boolean),"series"===r?[n]:[]),c=Object.keys(null!=(s=fE(l(o).properties))?s:{}),d=l(o?xE("initial")(o):void 0,xE("overridden")).properties;return i[n]=((e,t)=>Object.keys(null!=e?e:{}).reduce(((i,r)=>(i[r]=t.includes(r)?null==e?void 0:e[r]:{type:"incompatible"},i)),{}))(d,c),i}),{}),i}),{}))),AE=(e={queries:[],series:[]},t,i)=>xt(xt(xt({},e),"queries"===t?{queries:e.queries.concat(i)}:null),"series"===t?{series:e.series.concat(i)}:null),wE=(0,oe.default)(((e,t,i)=>{const r=["queries","series"].reduce(((i,r)=>[...i,...Object.keys(e[r]).filter((e=>_E(t)("queries"===r?[e]:[],"series"===r?[e]:[]))).reduce(((t,i)=>t.concat(Object.keys(e[r][i]).reduce(((e,t)=>e.concat([[r,i,t]])),[]))),[])]),[]);return(0,N.Z)(r.reduce(((e,t)=>(i,[r,n,a])=>{var s,o,l;const c=e[r][n][a],d="overridden"===(null==c?void 0:c.type)&&t<c.overrideIndex?{overridden:AE(null==(s=null==i?void 0:i[a])?void 0:s.overridden,r,n)}:null,u="incompatible"===(null==c?void 0:c.type)?{incompatible:AE(null==(o=null==i?void 0:i[a])?void 0:o.incompatible,r,n)}:null,p="initial"===(null==c?void 0:c.type)&&"type"===a?{initial:AE(null==(l=null==i?void 0:i[a])?void 0:l.initial,r,n)}:null;return(d||u||p)&&(i[a]=xt(xt(xt(xt({},i[a]),d),u),p)),i})(e,i),{}),u.Z)}));function IE(e){switch(e){case le.VisualSettingsType.AREA:return ce.ChartType.AREA;case le.VisualSettingsType.BAR:return ce.ChartType.BAR;case le.VisualSettingsType.BUBBLE:return ce.ChartType.BUBBLE;case le.VisualSettingsType.COLUMN:return ce.ChartType.COLUMN;case le.VisualSettingsType.DOUGHNUT:return ce.ChartType.DOUGHNUT;case le.VisualSettingsType.FUNNEL:return ce.ChartType.FUNNEL;case le.VisualSettingsType.HONEYCOMB:return ce.ChartType.HONEYCOMB;case le.VisualSettingsType.HEATMAP:return ce.ChartType.HEATMAP;case le.VisualSettingsType.IMAGE:return ce.ChartType.IMAGE;case le.VisualSettingsType.LINE:return ce.ChartType.LINE;case le.VisualSettingsType.MAP:return ce.ChartType.MAP;case le.VisualSettingsType.PIE:return ce.ChartType.PIE;case le.VisualSettingsType.PYRAMID:return ce.ChartType.PYRAMID;case le.VisualSettingsType.SCATTER:return ce.ChartType.SCATTER;case le.VisualSettingsType.SVP:return ce.ChartType.SVP;case le.VisualSettingsType.TABLE:return ce.ChartType.TABLE;case le.VisualSettingsType.TRACE_LIST_TABLE:return ce.ChartType.TRACE_LIST_TABLE;case le.VisualSettingsType.TEXT:return ce.ChartType.TEXT;case le.VisualSettingsType.SERVICE_MAP_GRAPH:return ce.ChartType.SERVICE_MAP_GRAPH}}function RE(e){switch(e){case"distribution":return np.DISTRIBUTION;case"map":return np.MAP;case"singleValueMetrics":return np.SINGLE_VALUE_METRICS;case"timeSeries":return np.TIME_SERIES;case"table":return np.TABLE;case"honeyComb":return np.HONEY_COMB;case"heatmap":return np.HEATMAP;case"traceList":case"serviceMap":case"ImagePanel":case"TextPanel":return null}}function DE(e){switch(e){case"ImagePanel":return gl.IMAGE;case"TextPanel":return gl.TEXT;case"distribution":return gl.DISTRIBUTION;case"honeyComb":return gl.HONEYCOMB;case"map":return gl.MAP;case"singleValueMetrics":return gl.SINGLE_VALUE_METRICS;case"timeSeries":return gl.TIME_SERIES;case"traceList":return gl.TRACE_LIST;case"table":return null}return null}function OE(e){switch(e){case ml.CONTAINER:case ml.REPEATING:case ml.SUMO_SEARCH:case ml.TSAT_EOI:return null;case ml.IMAGE:return gl.IMAGE;case ml.TEXT:return gl.TEXT;case ml.TRACE_LIST:return gl.TRACE_LIST;case ml.SERVICE_MAP:return gl.SERVICE_MAP}}class NE{static fromPotentialUndefined(e){return void 0===e?new kE:new ME(e)}static fromNullable(e){return null===e?new kE:new ME(e)}}class ME extends NE{constructor(e){super(),this.value=e}map(e){return new ME(e(this.value))}flatMap(e){return e(this.value)}toPotentialUndefined(){return this.value}withDefault(e){return this.value}}class kE extends NE{map(e){return new kE}flatMap(e){return new kE}toPotentialUndefined(){}withDefault(e){return e}}const LE=e=>e,PE=(e,t)=>e.map((e=>`${e}=${null==t?void 0:t[e]}`)).join(", ");function FE(e,{queryId:t,name:i}={}){var r,n,a,s,o,l,c;const d=TE(e)(t,i),u=NE.fromPotentialUndefined(null==(r=e.general)?void 0:r.mode).flatMap((e=>NE.fromNullable(DE(e)))).map(Qc).toPotentialUndefined(),p=d&&"type"in d?d.type:void 0,h=null!=(s=null!=(a=null!=p?p:null==(n=e.general)?void 0:n.type)?a:u)?s:le.VisualSettingsType.LINE,m=null!=(c=null!=(l=(e=>{var t;if(void 0!==e&&"displayType"in e)return null!=(t=e.displayType)?t:void 0})(d))?l:null==(o=null==e?void 0:e.general)?void 0:o.displayType)?c:Jc.general.displayType,g=m===le.ChartDisplayTypeOptions.STEPPED,y=m===le.ChartDisplayTypeOptions.SMOOTH;let v;switch(h){case le.VisualSettingsType.LINE:v=g?ce.ChartType.STEP_LINE:y?ce.ChartType.SPLINE:ce.ChartType.LINE;break;case le.VisualSettingsType.AREA:{const e=m===le.ChartDisplayTypeOptions.STACKED?ce.ChartType.STACKED_AREA:m===le.ChartDisplayTypeOptions.STACKED_PERCENT?ce.ChartType.STACKED_AREA_100:ce.ChartType.AREA;v=g?ce.ChartType.STEP_AREA:y?ce.ChartType.SPLINE_AREA:e;break}case le.VisualSettingsType.COLUMN:v=m===le.ChartDisplayTypeOptions.STACKED?ce.ChartType.STACKED_COLUMN:m===le.ChartDisplayTypeOptions.STACKED_PERCENT?ce.ChartType.STACKED_COLUMN_100:ce.ChartType.COLUMN;break;case le.VisualSettingsType.BAR:v=m===le.ChartDisplayTypeOptions.STACKED?ce.ChartType.STACKED_BAR:m===le.ChartDisplayTypeOptions.STACKED_PERCENT?ce.ChartType.STACKED_BAR_100:ce.ChartType.BAR;break;case le.VisualSettingsType.PYRAMID:v=m===le.ChartDisplayTypeOptions.FUNNEL?ce.ChartType.FUNNEL:ce.ChartType.PYRAMID}return null!=v?v:IE(h)}const UE=e=>El.includes(e);function VE(e,t,i,n){const a=FE(t,e),s=Eu(a,n);function o(e){return Object.keys(e).reduce(((e,n)=>{var a,o,l,c;return e[n]=null!=(c=null==(a=(0,r.withIndex)(i))?void 0:a[n])?c:null!=(l=null==(o=t.general)?void 0:o[n])?l:(0,r.withIndex)(s.general)[n],e}),{})}if(a===ce.ChartType.PIE||a===ce.ChartType.DOUGHNUT){const e=o(Gd);return parseInt(e.innerRadius,10)>0&&(e.type=ce.ChartType.DOUGHNUT),e}if(a===ce.ChartType.PYRAMID||a===ce.ChartType.FUNNEL){const e=o(iu),{orientation:t}=e,i=At(e,["orientation"]);return Ct(xt({},i),{reversed:t!==nl.DEFAULT})}return{}}const BE=(e,t)=>e.hiddenQueryKeys&&e.hiddenQueryKeys.includes(t);function $E(e,t,i){var n;const a=NE.fromPotentialUndefined(null==(n=null==e?void 0:e.general)?void 0:n.type).flatMap((e=>NE.fromNullable(IE(e)))).map((e=>Eu(e,i))).withDefault(Jc);return(0,g.Z)({},a[t],(0,r.withIndex)(e)[t])}const HE=e=>/\s/.test(String(e))?`"${e}"`:e,WE=(0,oe.default)((e=>(0,r.truncateString)(e,{maxLen:qE,position:"mid"}))),qE=60;function jE(e,t,i,r=De.currentUserHelper.hasFeatureFlag("UIShowTzOffsetPreference"),n=Ie.timeZoneServiceV2.getUserTimeZone()){var a,s;const{seriesType:o,name:l}=t,c=null!=(a=t.xAxisKeys)?a:[],{x:d}=e,u=null!=(s=e.xAxisValues)?s:{},p=o===Go.TIMESERIES;if(!i&&p&&d)return{x:d};const h=c.length>1,m=c.length?c.reduce(((e,t)=>{var i;let a=null!=(i=u[t])?i:"";return h&&(a=ET(a,t,n,r)),e+(h?`${t}=${HE(a)} `:a)}),"").trim():l;return i||!p?{originalLabel:m,label:WE(m)}:{x:d||+m}}function QE(e){const t=e.length;return e.reduce(((e,{aggregateInfo:i})=>(e.max=Math.max(i.max,e.max),e.min=Math.min(i.min,e.min),e.avg+=i.avg/t,e.sum+=i.sum,e.latest=i.latest,e.count+=i.count,e)),Il)}function zE(e,t,i){return e.map((({aggregateInfo:e,metaData:{data:r},queryId:n})=>({queryId:n,rawMetaData:r,y:e[t],xAxisValues:i.reduce(((e,t)=>(e[t]=r[t],e)),{})})))}function GE(e,t){const i=e.filter((({queryId:e,name:i})=>{var r;return!0===(null==(r=t.get(ST(e,i)))?void 0:r.visible)}));if(i.length<=1)return e;let r=[];return i.forEach((e=>{e.dataPoints.forEach((e=>{void 0!==e.x&&null!==e.x&&null!==e.y&&r.push(e.x)}))})),0===r.length||(r=[...new Set(r)],r.sort(((e,t)=>e-t)),i.forEach((e=>{if(oT(t.get(ST(e.queryId,e.name)))){const t=null===e.dataPoints[0].y?e.dataPoints[0]:void 0,i=null===e.dataPoints[e.dataPoints.length-1].y?e.dataPoints[e.dataPoints.length-1]:void 0;e.dataPoints=[...t?[t]:[],...KE(e.dataPoints,r),...i?[i]:[]]}}))),e}function KE(e,t){e.sort(((e,t)=>e.x-t.x)),e=(0,k.Z)(e,(e=>e.x));let i=0;return t.map((t=>{const r=e[i],n=e[i+1];return n&&n.x===t?(i++,n):r&&r.x===t?r:{x:t,y:YE(t,r,n),isClientInterpolated:!0}}))}function YE(e,t,i){if(!t||!i||(0,L.Z)(t.x)||(0,L.Z)(i.x))return null;if(Array.isArray(t.y)&&Array.isArray(i.y)){const r=t.y.map(xT),n=i.y.map(xT);if(r.some(L.Z)||n.some(L.Z))return null;const a=ZE(e,t.x,r[0],i.x,n[0]),s=ZE(e,t.x,r[1],i.x,n[1]);return(0,L.Z)(a)||(0,L.Z)(s)?null:[a,s]}{const r=CT(t.y),n=CT(i.y);return(0,L.Z)(r)||(0,L.Z)(n)?null:ZE(e,t.x,r,i.x,n)}}function ZE(e,t,i,r,n){return t===r?null:i+(e-t)*(n-i)/(r-t)}const XE=e=>"NaN"===e||null===e,JE=(e,t)=>XE(e.y)&&XE(t.y)||!XE(e.y)&&!XE(t.y),eT=({previousPoint:e,point:t,nextPoint:i})=>void 0!==e&&void 0!==i?JE(e,t)||JE(t,i):void 0!==e?JE(e,t):void 0!==i&&JE(t,i),tT=(e,t,i)=>{e.markerType=t,e.markerSize=i,e.isPointConnected=!1},iT=(e,t)=>{var i,r;const n=Au(null==(i=t.general)?void 0:i.markerType),a=wu(null==(r=t.general)?void 0:r.markerSize);return e.reduce(((t,i,r)=>{const s=e[r-1],o=e[r+1];return eT({previousPoint:s,point:i,nextPoint:o})?i.isPointConnected=!0:(tT(i,n,a),t.hasDisconnectedPoints||(t.hasDisconnectedPoints=Array.isArray(i.y)?i.y.length>0:Boolean(i.y))),t.dataPoints.push(i),t}),{hasDisconnectedPoints:!1,dataPoints:[]})},rT=(e,t)=>e.map((e=>{const{dataPoints:i,hasDisconnectedPoints:r}=iT(e.dataPoints,t);return e.dataPoints=i,e.hasDisconnectedDataPoints=r,e})),nT=e=>(e=>e.reduce(((e,t)=>(0,P.Z)(e,((e,i)=>e===t[i])))))(e.map((({metaData:e})=>e.data)));function aT(e){return"metrics"===(null==e?void 0:e.toLowerCase())}function sT(e){return"logs"===(null==e?void 0:e.toLowerCase())}const oT=e=>(null==e?void 0:e.type)===le.VisualSettingsType.AREA;function lT(e,t={},i,n){var a,s,o;return qi("getRendererSpecificSeries",{attributes:{seriesCount:null!=(s=null==(a=e.series)?void 0:a.length)?s:0,visualSettingsTypeToRender:null!=i?i:null==(o=null==t?void 0:t.general)?void 0:o.type}},(()=>{var a,s,o,l,c,d,u,p;const{series:h=[],timeRange:m}=e,g=null!=i?i:null==(a=null==t?void 0:t.general)?void 0:a.type;let v=h;g!==le.VisualSettingsType.TABLE&&g!==le.VisualSettingsType.SVP&&(v=h.filter((e=>{if(void 0!==e.valueType)return e.valueType!==Me.SeriesValueType.String;const[t]=e.dataPoints;return void 0===t||(0,r.isNumber)(t.y)})));let f,_=!1;v=v.filter((e=>(_=_||e.valueType===Me.SeriesValueType.Double,!BE(t,e.queryId)))),_&&(f="NoMetricSeriesOutliers",v=v.map((e=>{if(e.valueType===Me.SeriesValueType.Double){let t=!1;return e.dataPoints.forEach((e=>{!t&&kb(e)&&(t=!0);let i="string"==typeof e.y&&e.y.length>0?parseFloat(e.y):e.y;"number"==typeof i&&e.isFilled&&Number.isNaN(i)&&(i=null),e.y=i})),t&&(f=((e,t)=>"NoMetricSeriesOutliers"===e?t>1?"MultipleSeriesWithSingleMetricOutlier":"SingleSeriesWithMetricsOutlier":"MultipleSeriesWithSingleMetricOutlier"===e?"MultipleSeriesWithMultipleMetricOutliers":e)(f,v.length)),e}return e})));const S=null!=(o=null==(s=t.general)?void 0:s.aggregationType)?o:Jc.series.aggregationType,E=v.length>0?v[0]:void 0,T=E&&E.seriesType===Go.TIMESERIES,x=null!=(l=null==E?void 0:E.metaData.data)?l:{},{source:C,metric:A,series:w}=x,I=At(x,["source","metric","series"]),R=aT(null==E?void 0:E.source),D=[le.VisualSettingsType.HONEYCOMB,le.VisualSettingsType.SVP,le.VisualSettingsType.TABLE];if(T&&(null==m?void 0:m.type)===r.ResolvableTimeRangeType.BeginBoundedTimeRange&&!D.includes(null!=(d=null==(c=null==t?void 0:t.general)?void 0:c.type)?d:"")&&(v=LT(v,e,t)),S&&wT(t)&&T){const e=[R?"metric":"series"],t=Object.keys(I||{});v=(0,b.Z)((0,y.Z)(v,(({metaData:{data:t}})=>e.map((e=>`${t[e]}`)))),((e,i)=>{var r,n,a;return{queryId:new Set(e.map((({queryId:e})=>e))).size>1?"MULTIPLE QUERIES":e[0].queryId,name:i,dataPoints:zE(e,S,t),aggregateInfo:QE(e),metaData:{data:nT(e)},seriesType:Go.NONTIMESERIES,xAxisKeys:t,valueType:null!=(n=null==(r=null==e?void 0:e[0])?void 0:r.valueType)?n:Me.SeriesValueType.Double,source:null==(a=null==e?void 0:e[0])?void 0:a.source}}))}const O=rT(v,t),N=cT(O),M=qb(N,t,f,g),k=null!=(p=null==(u=t.general)?void 0:u.mode)?p:Yo.TIME_SERIES;let L=!1;if(n&&E){const e=n.find((e=>e.queryKey===E.queryId));L=Boolean(e&&VS(e,n))}const P=k===Yo.TIME_SERIES&&(e=>{var t,i;return(null==(t=e.general)?void 0:t.type)===le.VisualSettingsType.AREA||(null==(i=e.overrides)?void 0:i.some((e=>oT(e.properties))))})(t)&&!L?GE(M,((e,t)=>{const i=TE(t);return e.reduce(((e,r)=>{var n,a,s,o,l,c;const d=i(r.queryId,r.name),u=ST(r.queryId,r.name);return e.set(u,{visible:null==(s=null==(a=null==(n=null==t?void 0:t.series)?void 0:n[u])?void 0:a.visible)||s,type:null!=(c=null!=(l=null==d?void 0:d.type)?l:null==(o=t.general)?void 0:o.type)?c:jc.type}),e}),new Map)})(M,t)):M;return pT(P,t)}))}const cT=e=>e.map((e=>{var t;const i=new Set(Object.entries(null!=(t=e.xAxisKeyTypes)?t:{}).filter((([,e])=>e===qu.Double)).map((([e])=>e)));return Ct(xt({},e),{dataPoints:e.dataPoints.map((e=>e.xAxisValues?Ct(xt({},e),{xAxisValues:Object.entries(e.xAxisValues).reduce(((e,[t,r])=>(e[t]=i.has(t)&&"string"==typeof r&&r.length?parseFloat(r).toString():r,e)),{})}):e))})})),dT=(e,t)=>{var i,r,n,s;if(null==(r=null==(i=t.general)?void 0:i.groupBy)||!r.length||!e.length)return e;const o=null!=(s=null==(n=null==t?void 0:t.general)?void 0:n.groupBy)?s:[],{flattenedDataPoints:l,secondaryGroupIds:c}=((e,t)=>{const i=new Set(t),r=new Set;return{flattenedDataPoints:(0,M.Z)(e,(e=>{const n=e.xAxisKeys.filter((e=>!i.has(e)));return e.dataPoints.map((e=>{const{xAxisValues:i,rawMetaData:a}=e,s=PE(t,a),o=PE(n,i);return r.add(o),Ct(xt({},e),{groupByData:{primaryGroupId:s,secondaryGroupId:o}})}))})),secondaryGroupIds:Array.from(r).sort()}})(e,o),{coloredDataPoints:u}=((e,t,i)=>{var r;const n=null==(r=i.color)?void 0:r.family,s=xt(xt({},Wl),a.colorSchemes)[null!=n?n:Jc.color.family],o=new Map(t.map(((e,t)=>[e,MT(t,s)]))),l=e.map((e=>{var t;const i=null==(t=e.groupByData)?void 0:t.secondaryGroupId,r=i?o.get(i):void 0;return Ct(xt({},e),{groupByData:Ct(xt({},e.groupByData),{color:r})})}));return{groupIdToColorMap:o,coloredDataPoints:l}})(l,c,t),p=(e=>{const t=(0,d.Z)(e,(e=>{var t;return null==(t=null==e?void 0:e.groupByData)?void 0:t.secondaryGroupId}));return(0,y.Z)(t,(e=>{var t;return null==(t=e.groupByData)?void 0:t.primaryGroupId}))})(u);if(!p)return e;const h=Object.keys(p).map(LE),m=e=>p[e],g=h.map(((e,t)=>({groupId:e,dataPointIndex:0,innerArrayIndex:t}))),v=e=>h.map((t=>Ct(xt({},m(t)[e]||m(t)[0]),{y:0,label:t}))),f=[];for(;g.length;){const{groupId:e,dataPointIndex:t,innerArrayIndex:i}=g.shift();if(t>=m(e).length)continue;f.length===t&&f.push(v(t));const r=m(e)[t];f[t][i].y=r.y,t<m(e).length-1&&g.push({groupId:e,dataPointIndex:t+1,innerArrayIndex:i})}const _=u.every((t=>t.queryId===e[0].queryId))?e[0].queryId:"MULTIPLE QUERIES";return f.map((t=>Ct(xt({},e[0]),{queryId:_,name:"",dataPoints:t,seriesType:Go.NONTIMESERIES})))},uT=(e,t)=>{let i=!0;const r=(0,y.Z)(e,(e=>t.reduce(((r,n,a)=>{var s;const o=a===t.length-1?"":", ",l=null==(s=e.rawMetaData)?void 0:s[n];return i&&l&&(i=!1),r+`${n}=${l}${o}`}),"")));return i?void 0:r},pT=(0,oe.default)(dT);function hT(e,t,i,n={},a){var s,o,l,c,d;const{xAxisKeys:u}=i,{xAxisValues:p,y:h}=t,m=u.reduce(((e,t)=>{var i;const r=ET(null!=(i=null==p?void 0:p[t])?i:"",t);return`${e}${t}=${HE(r)} `}),"").trim(),g=u.filter((e=>(0,r.isNumber)(null==p?void 0:p[e]))),y=n.xDimension&&n.xDimension.length?n.xDimension[0].value:g[0],v=n.yDimension&&n.yDimension.length?n.yDimension[0].value:void 0;if(e===le.VisualSettingsType.SCATTER)return{name:m,x:+(null!=(s=null==p?void 0:p[y])?s:""),y:v?+(null!=(o=null==p?void 0:p[v])?o:""):h,z:0};const f=n.zDimension&&n.zDimension.length?n.zDimension[0].value:"";return{name:m,x:+(null!=(l=null==p?void 0:p[y])?l:""),y:+(null!=(c=null==p?void 0:p[null!=v?v:g[1]])?c:""),z:+(f?+(null!=(d=null==p?void 0:p[f])?d:""):a)}}function mT(e){return(0,r.isNumber)(e)?Number(e):null}function gT(e,t=[]){return{y:e,xAxisValues:t.reduce(((e,t)=>(e[t]=wl,e)),{})}}function yT(e,t){let i=e.dataPoints;const r=e.xAxisKeys;let n=0;const a=i.length>t,s=a?function(e,t){const i=e.dataPoints;if(i.length<=t)return null;const r=i.reduce(((e,{y:t})=>{const i=mT(t);return i&&e.push(i),e}),[]).sort(((e,t)=>t-e));return r.length<t?r[r.length-1]:r[t-1]}(e,t):void 0;let o=0;return i=i.reduce(((e,i)=>{const r=mT(i.y);if(!(0,F.Z)(r)||0!==r){let l=!0;a&&(o===t-1?l=!1:s&&(l=!(0,F.Z)(r)&&r>=s)),l?(o++,e.push(i)):r&&(n+=r)}return e}),[]),a&&n&&i.push(gT(n,r)),Ct(xt({},e),{dataPoints:i})}function vT({name:e,queryId:t,metaData:i,overriddenSettings:r,originalName:n}){var a;const s=null==(a=TE(r)(t,null!=n?n:e))?void 0:a.name;if(!s)return e;const o=(0,U.Z)(i,((e,t)=>t.toLowerCase()));return s.replace(/{{\s*(.*?)\s*}}/g,((e,t)=>o[t.toLowerCase()]||e))}const fT=e=>e===ml.TRACE_LIST?le.QueryTypes.TRACES:le.QueryTypes.LOGS,_T=(0,oe.default)(((e,t,i)=>{const r={isLogsQuery:!1,hasLogsQuery:!1,hasMetricsQuery:!1,hasOutlierQuery:Fb(i,void 0)};return e===ml.SUMO_SEARCH&&(t&&t.length>0?t.every((({queryType:e})=>e===le.QueryTypes.LOGS))?(r.isLogsQuery=!0,r.hasLogsQuery=!0):(t.some((({queryType:e})=>e===le.QueryTypes.LOGS))&&(r.hasLogsQuery=!0),t.some((({queryType:e})=>e===le.QueryTypes.METRICS))&&(r.hasMetricsQuery=!0)):fT(e)===le.QueryTypes.LOGS&&(r.isLogsQuery=!0,r.hasLogsQuery=!0)),r})),ST=(e,t)=>`${e}_${t}`,bT="_timeslice";function ET(e,t,i,r,n){var a,s;if(void 0===i)try{i=Ie.timeZoneServiceV2.getUserTimeZone()}catch(e){i="Asia/Calcutta"}if(void 0===r)try{r=De.currentUserHelper.hasFeatureFlag("UIShowTzOffsetPreference")}catch(e){r=!1}return t===bT?null!=(s=null==(a=Ie.userDateService)?void 0:a.formatDateTimeSmart(+e,i,r,n))?s:new Date:e}function TT(e){return null===e?0:e%1!=0?Number(e.toFixed(3)):e}function xT(e){return(0,L.Z)(e)?0:"string"==typeof e?parseFloat(e):e}function CT(e){if(Array.isArray(e)){const[t,i]=e;return(xT(t)+xT(i))/2}return(0,L.Z)(e)?null:xT(e)}function AT(e){var t;return(null==(t=e.general)?void 0:t.mode)===np.TIME_SERIES}function wT(e){var t;return(null==(t=e.general)?void 0:t.mode)===np.DISTRIBUTION}function IT(e){var t,i;return[le.VisualSettingsType.BAR,le.VisualSettingsType.COLUMN,le.VisualSettingsType.TABLE,le.VisualSettingsType.PIE,le.VisualSettingsType.FUNNEL,le.VisualSettingsType.LINE,le.VisualSettingsType.AREA].includes(null!=(i=null==(t=e.general)?void 0:t.type)?i:le.VisualSettingsType.LINE)}function RT(e){var t,i;return(null==(t=e.general)?void 0:t.type)===le.VisualSettingsType.BAR||(null==(i=e.general)?void 0:i.type)===le.VisualSettingsType.COLUMN}const DT=e=>{const t=e.find((({source:e,metaData:{data:t}})=>"Metrics"===e?t.metric:t.series));if(t)return"Metrics"===t.source?t.metaData.data.metric:t.metaData.data.series},OT=e=>{var t,i;return!(null==(i=null==(t=e.general)?void 0:t.groupBy)||!i.length)},NT=(e,t)=>i=>{var n;if(0===i.length)return i;const a=i[0],s=a.dataPoints[0];if(s&&(null==(n=s.sumoMetadata)?void 0:n.groupByData))return(0,V.Z)((0,M.Z)(i,(e=>e.dataPoints)),(e=>e.name)).map((({name:e="",visible:t,color:i})=>({name:(0,r.truncateString)(e,{maxLen:60,position:"mid"}),id:e,visible:t,color:i})));if(e&&1===i.length){const{dataPoints:e}=a;return(Tl.includes(null!=t?t:"")?(0,d.Z)(e,(({originalIndex:e})=>e)):e).map((({color:e,label:t,name:i,visible:r,originalLabel:n})=>{var a;return{name:null!=(a=null!=t?t:i)?a:"",id:null!=n?n:"",visible:r,color:e}}))}return i};function MT(e,t){return t[e%t.length]}function kT(e){let t=1/0,i=-1/0;for(const r of e)for(const e of r.dataPoints)void 0!==e.x&&null!==e.x&&(t=Math.min(e.x,t),i=Math.max(e.x,i));return{minX:t,maxX:i}}function LT(e,t,i={}){let n=e;const{maximum:a,minimum:s}=function({timeRange:e},t){var i,n;const{from:a,to:s}=e;let o=0,l=0;a.type===r.TimeRangeBoundaryType.EpochTimeRangeBoundary&&s&&s.type===r.TimeRangeBoundaryType.EpochTimeRangeBoundary&&(o=a.epochMillis,l=s.epochMillis);const{maximum:c=l,minimum:d=o}=null!=(n=null==(i=t.axes)?void 0:i.axisX)?n:{};return{maximum:c,minimum:d}}(t,i);return!(0,x.Z)(a)&&!(0,x.Z)(s)&&(n=RT(i)?e.map((e=>{const t=[...e.dataPoints].sort(((e,t)=>e.x-t.x)),i=t[0],r=t[t.length-1],n=function(e){let t=Number.POSITIVE_INFINITY;for(let i=1;i<e.length;i++){const r=e[i-1],n=e[i];if(!(0,L.Z)(n.x)&&!(0,L.Z)(r.x)){const e=n.x-r.x;e<t&&(t=e)}}return t===Number.POSITIVE_INFINITY?void 0:t}(t);return i&&!(0,L.Z)(i.x)&&i.x>s&&void 0!==n&&t.unshift({x:Math.min(i.x-n,s),y:null}),r&&!(0,L.Z)(r.x)&&r.x<a&&void 0!==n&&t.push({x:Math.max(r.x+n,a),y:null}),Ct(xt({},e),{dataPoints:t})})):e.map((e=>{const t=[...e.dataPoints].sort(((e,t)=>e.x-t.x)),i=t[0],r=t[t.length-1];return i&&!(0,L.Z)(i.x)&&i.x>s&&t.unshift({x:s,y:null}),r&&!(0,L.Z)(r.x)&&r.x<a&&t.push({x:a,y:null}),Ct(xt({},e),{dataPoints:t})}))),n}function PT(e,t,i,r,{seriesData:n,dataIndex:s,accumObj:o,dataPoint:l,dataPointLabel:c}){var d;const p=wT(e);let h=null!=c?c:"";!h&&l&&(h=null!=(d=jE(l,n,p,r,i).originalLabel)?d:"");const m=function(e,t,i,r){var n,s,o;const l=TE(e)(void 0,i),c=l&&"type"in l&&l.type!==le.VisualSettingsType.TABLE?l.color:void 0,d=t[i],p=d&&"type"in d&&d.type!==le.VisualSettingsType.TABLE?d.color:void 0,h=null==(n=e.color)?void 0:n.family,m=null!=(o=null==(s=e.color)?void 0:s.overrides)?o:xt(xt({},Wl),a.colorSchemes)[h],g=MT(r,xt(xt({},Wl),a.colorSchemes)[Jc.color.family]);return c||((0,u.Z)(m)?p||g:MT(r,m))}(e,t,h,s),g=p?h:ST(n.queryId,n.name),y=Ex(e,g),v=Ex(t,g),f=null!=y?y:v;o[h]||(o[h]={color:m},void 0!==f&&(o[h].visible=f))}function FT(e,t,i,r,n,a,s){var o;const l=lT(e,t,a,s),c=null!=(o=i.series)?o:{},d=(0,B.Z)(PT,t,c,r,n);return 0===l.length||OT(t)?{renderedSeries:l,series:{}}:wT(t)&&1===l.length?{renderedSeries:l,series:l.reduce(((e,i)=>{var r,n,a;i=yT(i,xl.includes(null!=(n=null==(r=t.general)?void 0:r.type)?n:jc.type)?null==(a=null==t?void 0:t.general)?void 0:a.maxNumOfSlices:1/0);const{dataPoints:s,xAxisKeys:o}=i,l=s.length,c={seriesData:i,accumObj:e};return s.forEach(((e,t)=>d(Ct(xt({},c),{dataPoint:e,dataIndex:t})))),d(Ct(xt({},c),{dataPoint:gT(0,o),dataIndex:l})),e}),{})}:{renderedSeries:l,series:l.reduce(((e,t,i)=>{const{name:r}=t;return d(Ct(xt({},{seriesData:t,accumObj:e}),{dataIndex:i,dataPointLabel:r})),e}),{})}}const UT="latitude",VT="longitude";function BT(e,t={}){return(0,at.uf)(function(e,t){const i=e.reduce(((e,t)=>{var i;if("Logs"!==t.source)return e;const r=null!=(i=t.queryId)?i:t.blockId,n=e.get(r);return n?n.push(t):e.set(r,[t]),e}),new Map);if(i.size<1)return[];let r=[];for(const[,e]of i)if(e.length>1&&(!t.metric||e.some((({name:e})=>e===t.metric)))&&(r=r.concat(WT(e,t))),1===e.length){const i=t.metric?e.find((({name:e})=>e===t.metric)):e[0];i&&(r=r.concat(qT(i.dataPoints,t)))}return r}(e,t).concat(function(e,t={}){return zT(e.filter((e=>"Metrics"===e.source)),t)}(e,t)))}function $T(e=[]){const t=e.map((({metaData:e})=>{var t;return null!=(t=e.data.metric)?t:e.data.series})),i=new Set(t);return Array.from(i).map((e=>({label:e,value:e})))}function HT(e){return e.reduce(((e,{queryId:t,blockId:i,metaData:{data:r},source:n,name:a})=>{const{latSet:s,longSet:o,metricSet:l,logSet:c}=e;return"Metrics"===n?(r.metric&&!l.has(r.metric)&&l.add(r.metric),Object.keys(r).forEach((e=>{!o.has(e)&&QT(r[e])&&o.add(e),!s.has(e)&&jT(r[e])&&s.add(e)}))):"Logs"===n&&a&&!l.has(a)&&(l.add(a),c.add(a)),e}),{latSet:new Set(["latitude"]),longSet:new Set(["longitude"]),metricSet:new Set,logSet:new Set})}function WT(e,{latitudeField:t=UT,longitudeField:i=VT}){const r=[],n=e.find((({name:e})=>e===t)),a=e.find((({name:e})=>e===i)),s=e.find((({name:e})=>e!==t&&e!==i));if(n&&a&&s)for(let e=0;e<n.dataPoints.length;e++)r.push((0,at.xm)([a.dataPoints[e].y,n.dataPoints[e].y],{isMultiMetric:!1,count:s.dataPoints[e].y}));return r}function qT(e,{latitudeField:t=UT,longitudeField:i=VT}){const r=[];return e.map((({y:e,sumoMetadata:n,xAxisValues:a})=>{var s,o,l;const d=n?n.xAxisValues:a;if(d){const n=null!=(s=d[t])?s:"",a=null!=(o=d[i])?o:"",u=parseFloat(n),p=parseFloat(a);jT(u)&&QT(p)&&r.push((0,at.xm)([parseFloat(a),parseFloat(n)],Ct(xt({},(0,c.Z)(d,[t,i])),{isMultiMetric:!1,count:null!=(l=CT(e))?l:0})))}})),r.filter((({properties:{count:e},geometry:{coordinates:t}})=>e>0&&t.every((e=>!Number.isNaN(e))))),r}function jT(e){const t="string"==typeof e?parseFloat(e):e;return!Number.isNaN(t)&&t>=-90&&t<=90}function QT(e){const t="string"==typeof e?parseFloat(e):e;return!Number.isNaN(t)&&t>=-180&&t<=180}function zT(e,{latitudeField:t=UT,longitudeField:i=VT,metric:r}){const n=[];let a=r;return e.forEach((({metaData:{data:e},aggregateInfo:r})=>{if(r&&e&&e[i]&&e[t]){const s=parseFloat(e[t]),o=parseFloat(e[i]);jT(s)&&QT(o)&&(!a||e.metric===a)&&(a||(a=e.metric),n.push((0,at.xm)([o,s],Ct(xt({},r),{isMultiMetric:!0}))))}})),n}function GT(e,t){return null!==t&&e?t.map(((t,i)=>{var r,n;return Ct(xt({},t),{color:null!=(n=null==(r=e[i])?void 0:r.color)?n:t.color})})):t}function KT(e,t="count"){const i=[];return(0,st.oq)(e,(e=>{i.push(Math.round(+e[t]))})),(0,H.Z)(function(e,t){e.sort(((e,t)=>e-t));const i=[];for(let r=1;r<t;++r){const n=(e.length-1)*r/t,a=Math.floor(n);if(n===a)i.push(e[n]);else{const t=n-a;i.push(e[a]*(1-t)+e[a+1]*t)}}return i.push(e[e.length-1]),i}(i,Vl))}function YT(e,t){if(1===e.length)return[t[t.length-1]];const i=[];for(let r=0,n=0;r<e.length||n<t.length;r++,n++)i.push(t[n]),r<e.length&&i.push(e[r]);return i}function ZT(e,t,i){if(1===e.length)return[i];const r=[t];for(let n=0;n<e.length;n++)r.push(e[n]),r.push(t+(n+1)/e.length*(i-t));return r}const XT=({mode:e,chartType:t,panelType:i})=>{var r;const n=NE.fromPotentialUndefined(e).flatMap((e=>NE.fromNullable(DE(e)))).toPotentialUndefined(),a=OE(i);if(t===le.VisualSettingsType.HONEYCOMB)return gl.HONEYCOMB;if(t===le.VisualSettingsType.SVP)return gl.SINGLE_VALUE_METRICS;if(t===le.VisualSettingsType.MAP)return gl.MAP;const s=gl.TIME_SERIES;return null!=(r=null!=n?n:a)?r:s},JT=(e=[],t)=>{var i,r;const[n]=e;if((null==n?void 0:n.seriesType)===Go.TABLE)return np.TABLE;const a=null==(i=null==t?void 0:t.general)?void 0:i.type;if(a===le.VisualSettingsType.HEATMAP)return np.HEATMAP;if(a===le.VisualSettingsType.TABLE)return np.TABLE;if(a===le.VisualSettingsType.HONEYCOMB)return np.HONEY_COMB;if(a===le.VisualSettingsType.SVP)return np.SINGLE_VALUE_METRICS;if(a===le.VisualSettingsType.MAP)return np.MAP;const s=NE.fromPotentialUndefined(null==(r=null==t?void 0:t.general)?void 0:r.mode).flatMap((e=>NE.fromNullable(RE(e)))).toPotentialUndefined();return null!=s?s:np.TIME_SERIES},ex=e=>({code:sp.CLIENT_SIDE_ERROR,message:"string"==typeof e?e:e.message,meta:"string"==typeof e?void 0:{type:e.type}}),tx=(e,t,i)=>{var n,a;const s=null!=(n=e[0])?n:{},{xAxisKeys:o=[],dataPoints:l=[]}=s;if((0,u.Z)(t)&&!(0,u.Z)(s)&&UE(i)){const e=l[0];let t,n;if(i===le.VisualSettingsType.SCATTER&&(t=o.length>=2,n=(0,r.isNumber)(null==(a=null==e?void 0:e.xAxisValues)?void 0:a[o[1]])),i===le.VisualSettingsType.BUBBLE&&(t=o.length>=3,n=[o[1],o[2]].every((t=>{var i;return(0,r.isNumber)(null==(i=null==e?void 0:e.xAxisValues)?void 0:i[t])}))),!1===t)return It.errors.xy.minKeys;if(!1===n)return It.errors.xy.numericFields}},ix=(e,t,i,r)=>(i-t)/e>r,rx=(...e)=>e.filter(r.isNotUndefined),nx=({errors:e,series:t,queries:i,visualType:r,rendererType:n,panelData:a})=>{var s;const o=((e,t)=>{var i;const r=null!=(i=e[0])?i:{},{dataPoints:n}=r;if(!(0,u.Z)(null!=n?n:[])&&t&&(0,u.Z)(t.data))return It.errors.incompatibleChartType})(t,a),l=tx(t,e,r),c=((e,t,i)=>{const r=(null==t?void 0:t.length)<=1,n=e.some((e=>e.seriesType===Go.TIMESERIES&&e.metaData.data.source===le.QueryTypes.LOGS)),a=[gl.HONEYCOMB,gl.SINGLE_VALUE_METRICS,gl.TIME_SERIES];if(n&&i&&!a.includes(i))return r?It.errors.incompatibleQuery:It.errors.incompatibleQueries})(t,i,n),d=((e,t,i,r)=>{var n,a,s,o,l,c,d,u,p,h,m,g,y,v;const f=null!=(n=e[0])?n:{},{dataPoints:_=[]}=f,S=(null==t?void 0:t.length)>0,b=_.length>0,E=(null==t?void 0:t.length)<=1;if(b&&S&&i===le.VisualSettingsType.MAP&&"mapSettings"in r){const e=null!=(a=null==r?void 0:r.data)?a:[];if(0===BT(e,{longitudeField:r.mapSettings.longitudeField,latitudeField:r.mapSettings.latitudeField}).features.length)return E?It.errors.incompatibleQuery:It.errors.incompatibleQueries;if(!De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT"))return;const t=HT(e),i=null==(l=null==(o=null==(s=null==r?void 0:r.mapLayers)?void 0:s.main)?void 0:o.sizeSource)?void 0:l.metricName,n=!t.metricSet.has(null!=(d=null==(c=null==r?void 0:r.mapLayers)?void 0:c.main.metricName)?d:"")||i&&!t.metricSet.has(i),f=null==(h=null==(p=null==(u=null==r?void 0:r.mapLayers)?void 0:u.secondary)?void 0:p.sizeSource)?void 0:h.metricName,_=(null==(m=null==r?void 0:r.mapLayers)?void 0:m.secondary)&&!t.metricSet.has(null!=(v=null==(y=null==(g=null==r?void 0:r.mapLayers)?void 0:g.secondary)?void 0:y.metricName)?v:"")||f&&!t.metricSet.has(f);if(n&&_)return{message:It.errors.bothQueriesUnavailable,type:"warning"};if(n)return{message:It.errors.primaryQueryUnavailable,type:"warning"};if(_)return{message:It.errors.secondaryQueryUnavailable,type:"warning"}}})(t,i,r,a),p=(({series:e,visualType:t,panelData:i})=>[le.VisualSettingsType.PIE,le.VisualSettingsType.FUNNEL,le.VisualSettingsType.HEATMAP].includes(t)&&e.every((({dataPoints:e})=>e.every((({x:e,y:t})=>!e&&0===t))))?{message:It.errors.zeroValue,type:"error"}:void 0)({series:t,visualType:r,panelData:a}),h=null!=(s=((e,t)=>{var i;if(e!==le.VisualSettingsType.HEATMAP||!t)return;const r=t;if(!r.data||!r.data.length||"number"!=typeof(null==r?void 0:r.xAxisBucketSize)&&"number"!=typeof(null==r?void 0:r.yAxisBucketSize))return;const n=null!=(i=r.metricName)?i:DT(r.data),a=(0,Me.findMinMax)(r.data.filter((({metaData:{data:e}})=>e.metric===n)));return"number"==typeof(null==r?void 0:r.xAxisBucketSize)&&ix(r.xAxisBucketSize,a.minX,a.maxX,pl)||"number"==typeof(null==r?void 0:r.yAxisBucketSize)&&ix(r.yAxisBucketSize,a.minY,a.maxY,pl)?[It.errors.heatmapInvalidBuckets]:void 0})(r,a))?s:[],m=[...rx(o,l,c,d,p),...h].map(ex);return e.concat(m)},ax=e=>{var t;if("Basic"===e.metricsQueryMode)return!(null==(t=e.metricsQueryData)||!t.operators)&&e.metricsQueryData.operators.some((e=>NS(e.operatorName)));if("Advanced"===e.metricsQueryMode){const t=qh(e.queryString,Bh);if(0===t.length)return!1;const i=`key=value ${e.queryString.slice(t[0].start)}`,r=Pf(i);if("object"==typeof r)return!!r.operators&&r.operators.some((e=>NS(e.key)))}return!1},sx=e=>{var t;if("Basic"===e.metricsQueryMode)return!(null==(t=e.metricsQueryData)||!t.operators)&&e.metricsQueryData.operators.some((e=>e.operatorName===le.Operator.Where&&e.parameters.some((e=>"operation"===e.key&&e.value===le.BooleanOperation.equals))));if("Advanced"===e.metricsQueryMode){const t=Pf(e.queryString);if("object"==typeof t)return!!t.operators&&t.operators.some((e=>e.key===le.Operator.Where&&e.operation===le.BooleanOperation.equals))}return!1},ox=(e,t)=>!(e.queryType!==le.QueryTypes.METRICS||t.includes(e.queryKey)||ax(e)),lx=(e,t)=>!(e.queryType!==le.QueryTypes.METRICS||t.includes(e.queryKey)||!sx(e)),cx=e=>{const t={};return e.forEach((e=>{Object.keys(e.metaData.data).forEach((i=>{const r=e.metaData.data[i];void 0!==r&&(t[i]?t[i].add(r):t[i]=new Set([r]))}))})),t},dx=(e,t,i,r,n)=>({id:r,type:"aggregation",meta:{cardinality:i,operator:le.Operator.Avg,dimension:i>1?t:void 0,queryId:e,queryMetric:Zb(n)}}),ux=(e,t,i,r)=>{const n={cardinality:0,dimension:""},a={cardinality:Number.MAX_SAFE_INTEGER,dimension:""};for(const s of e){const e=t[s].size;if(1!==e||r===gl.SINGLE_VALUE_METRICS)if(e<=i&&e>n.cardinality){if(n.cardinality=e,n.dimension=s,e===i)break}else e>i&&e<a.cardinality&&(a.cardinality=e,a.dimension=s)}return n.dimension?n:a},px={[gl.SINGLE_VALUE_METRICS]:1,[gl.TIME_SERIES]:10,[gl.DISTRIBUTION]:10},hx=e=>r.localStore.getItem(gp)?[]:[...gx(e),...mx(e)].sort(((e,t)=>e.meta.queryId>=t.meta.queryId?1:-1)),mx=({queries:e,series:t,dismissedHints:i=[],hiddenQueryKeys:r=[],pendoIntegrationEnabled:n})=>{const a=[];for(const s of e){if(!lx(s,r)||t.filter((e=>e.queryId===s.queryKey)).length>0)continue;const e=`${s.queryKey}-${s.queryString.trim().replace(/\s/g,"_")}_whereOperator`;i.includes(e)||((0,de.pendoTrack)(de.PendoEvent.MetricsHint_Generated,{id:e},n),a.push({id:e,type:"whereOperator",meta:{queryId:s.queryKey,singleQueryMessageKey:"sharedAnalytics.hints.singleQueryWhereOperatorHint",multiQueryMessageKey:"sharedAnalytics.hints.multiQueryWhereOperatorHint"}}))}return a},gx=({queries:e,series:t,rendererType:i,dismissedHints:r=[],hiddenQueryKeys:n=[],queryEditorTab:a,pendoIntegrationEnabled:s})=>{const o="chart"===a?px[i]:50;if(!o)return[];const l=[];for(const a of e){if(!ox(a,n))continue;const e=t.filter((e=>e.queryId===a.queryKey));if(e.length<=o)continue;const c=`${a.queryKey}-${a.queryString.trim().replace(/\s/g,"_")}`;if(r.includes(c))continue;const d=cx(e),u=Object.keys(d),{cardinality:p,dimension:h}=ux(u,d,o,i);p>0&&p<Number.MAX_SAFE_INTEGER&&((0,de.pendoTrack)(de.PendoEvent.MetricsHint_Generated,{originalCardinality:e.length,dimension:null!=h?h:"",id:c},s),l.push(dx(a.queryKey,h,p,c,a.queryString)))}return l},yx=e=>{switch(e){case le.VisualizationSelectedType.DISTRIBUTION:return gl.DISTRIBUTION;case le.VisualizationSelectedType.HONEY_COMB:return gl.HONEYCOMB;case le.VisualizationSelectedType.MAP:return gl.MAP;case le.VisualizationSelectedType.SINGLE_VALUE_METRICS:return gl.SINGLE_VALUE_METRICS;case le.VisualizationSelectedType.TIME_SERIES:return gl.TIME_SERIES}},vx=(e,t)=>{var i,r;if((null==(i=e.general)?void 0:i.type)===le.VisualSettingsType.TABLE)return np.TABLE;if((null==(r=e.general)?void 0:r.type)===le.VisualSettingsType.HEATMAP)return np.HEATMAP;switch(t){case le.VisualizationSelectedType.DISTRIBUTION:return np.DISTRIBUTION;case le.VisualizationSelectedType.TIME_SERIES:return np.TIME_SERIES;case le.VisualizationSelectedType.MAP:return np.MAP;case le.VisualizationSelectedType.SINGLE_VALUE_METRICS:return np.SINGLE_VALUE_METRICS;case le.VisualizationSelectedType.HONEY_COMB:return np.HONEY_COMB}};function fx(e){switch(e){case np.TABLE:return le.VisualSettingsType.TABLE}}const _x=e=>{const t=new Map;for(const i of e)for(const e of i.dataPoints)"string"==typeof e.originalLabel&&"string"==typeof e.label&&t.set(e.originalLabel,e.label);return e.map((e=>{const i=(0,h.Z)(e.dataPoints,(e=>e.originalLabel)),r=[];return t.forEach(((e,t)=>{i[t]?r.push(i[t]):r.push({originalLabel:t,label:e,y:null})})),Ct(xt({},e),{dataPoints:r})}))},Sx=(e,t)=>Object.entries(t||{}).reduce(((t,[i,r])=>(e.includes(i)&&(t[i]=r),t)),{}),bx=(e,t,i)=>{var r;const n=null==(r=null==e?void 0:e[i])?void 0:r.visible,a=t.getCanvasData().data,s=a.map((e=>e.id)).filter((e=>void 0!==e)),o=xt({},Sx(s,e));if(a.length>1){const e=a.some((({visible:e})=>!e)),t=!n||!e;a.forEach((e=>{e.id&&(o[e.id]=Ct(xt({},o[e.id]),{visible:!t||e.id===i}))}))}else if(1===a.length){const e=a[0].dataPoints.some((({visible:e})=>!e)),t=!n||!e;a[0].dataPoints.forEach((e=>{e.originalLabel&&(o[e.originalLabel]=Ct(xt({},o[e.originalLabel]),{visible:!t||e.originalLabel===i}))}))}return o},Ex=(e,t)=>{var i;if(!t||null==e||!e.series)return;const r=null==(i=e.series)?void 0:i[t];return r&&"visible"in r?r.visible:void 0},Tx={type:{kind:"PredefinedSetSeriesSetting",label:"sharedAnalytics.visualizationSettings.type",propertyName:"type",availableItems:[{value:"area",label:"sharedAnalytics.visualizationSettings.properties.type.area",shouldShow:SE(le.VisualSettingsType.AREA)},{value:"bar",label:"sharedAnalytics.visualizationSettings.properties.type.bar",shouldShow:SE(le.VisualSettingsType.BAR)},{value:"column",label:"sharedAnalytics.visualizationSettings.properties.type.column",shouldShow:SE(le.VisualSettingsType.COLUMN)},{value:"line",label:"sharedAnalytics.visualizationSettings.properties.type.line",shouldShow:SE(le.VisualSettingsType.LINE)}]}},xx={axisYType:{kind:"PredefinedSetSeriesSetting",label:"sharedAnalytics.visualizationSettings.axisYType",propertyName:"axisYType",availableItems:[{value:ce.AxisYType.leftYAxis,label:"sharedAnalytics.visualizationSettings.properties.axisYType.leftYAxis"},{value:ce.AxisYType.rightYAxis,label:"sharedAnalytics.visualizationSettings.properties.axisYType.rightYAxis"}]}},Cx={color:{kind:"UserProvidedSeriesSetting",label:"sharedAnalytics.visualizationSettings.color",propertyName:"color",inputType:"text"}},Ax={fillOpacity:{kind:"UserProvidedSeriesSetting",label:"sharedAnalytics.visualizationSettings.fillOpacity",propertyName:"fillOpacity",inputType:"number",defaultValue:1,inputProps:{max:1,min:0,step:.01}}},wx=e=>({dataPointMaxWidth:{kind:"UserProvidedSeriesSetting",label:e,propertyName:"dataPointMaxWidth",inputType:"number",defaultValue:10,inputProps:{min:0}}}),Ix=e=>({displayType:{kind:"PredefinedSetSeriesSetting",label:"sharedAnalytics.visualizationSettings.displayType",propertyName:"displayType",availableItems:[{value:le.ChartDisplayTypeOptions.DEFAULT,label:"sharedAnalytics.visualizationSettings.properties.displayType.default"},{value:le.ChartDisplayTypeOptions.SMOOTH,label:"sharedAnalytics.visualizationSettings.properties.displayType.smooth"},{value:le.ChartDisplayTypeOptions.STEPPED,label:"sharedAnalytics.visualizationSettings.properties.displayType.stepped"},{value:le.ChartDisplayTypeOptions.STACKED_PERCENT,label:"sharedAnalytics.visualizationSettings.properties.displayType.stackedPercent"},{value:le.ChartDisplayTypeOptions.STACKED,label:"sharedAnalytics.visualizationSettings.properties.displayType.stacked"}].filter((({value:t})=>e.includes(t)))}}),Rx={lineDashType:{kind:"PredefinedSetSeriesSetting",label:"sharedAnalytics.visualizationSettings.lineDashType",propertyName:"lineDashType",availableItems:[{value:le.LineDashStyleOptions.SOLID,label:"sharedAnalytics.visualizationSettings.properties.lineDashType.solid"},{value:le.LineDashStyleOptions.DOT,label:"sharedAnalytics.visualizationSettings.properties.lineDashType.dot"},{value:le.LineDashStyleOptions.DASH,label:"sharedAnalytics.visualizationSettings.properties.lineDashType.dash"},{value:le.LineDashStyleOptions.DASH_DOT,label:"sharedAnalytics.visualizationSettings.properties.lineDashType.dashDot"}]}},Dx={lineThickness:{kind:"UserProvidedSeriesSetting",label:"sharedAnalytics.visualizationSettings.lineThickness",propertyName:"lineThickness",inputType:"number",defaultValue:Vc.lineThickness,inputProps:{min:0}}},Ox={markerSize:{kind:"UserProvidedSeriesSetting",label:"sharedAnalytics.visualizationSettings.markerSize",propertyName:"markerSize",inputType:"number",defaultValue:Bc,inputProps:{min:0}}},Nx={markerType:{kind:"PredefinedSetSeriesSetting",label:"sharedAnalytics.visualizationSettings.markerType",propertyName:"markerType",availableItems:[{value:le.MarkerTypeOptions.NONE,label:"sharedAnalytics.visualizationSettings.properties.markerType.none"},{value:le.MarkerTypeOptions.CIRCLE,label:"sharedAnalytics.visualizationSettings.properties.markerType.circle"},{value:le.MarkerTypeOptions.SQUARE,label:"sharedAnalytics.visualizationSettings.properties.markerType.square"},{value:le.MarkerTypeOptions.TRIANGLE,label:"sharedAnalytics.visualizationSettings.properties.markerType.triangle"},{value:le.MarkerTypeOptions.CROSS,label:"sharedAnalytics.visualizationSettings.properties.markerType.cross"}]}},Mx={visible:{kind:"PredefinedSetSeriesSetting",label:"sharedAnalytics.visualizationSettings.visible",propertyName:"visible",availableItems:[{value:!0,label:"sharedAnalytics.visualizationSettings.properties.visible.true"},{value:!1,label:"sharedAnalytics.visualizationSettings.properties.visible.false"}]}},kx=xt(xt(xt(xt(xt(xt(xt(xt(xt(xt({},Tx),xx),Cx),Ix([le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.SMOOTH,le.ChartDisplayTypeOptions.STEPPED,le.ChartDisplayTypeOptions.STACKED,le.ChartDisplayTypeOptions.STACKED_PERCENT])),Rx),Dx),Ox),Nx),Ax),Mx),Lx=xt(xt(xt(xt(xt(xt(xt({},Tx),xx),Cx),wx("sharedAnalytics.visualizationSettings.barMaxWidth")),Ix([le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.STACKED,le.ChartDisplayTypeOptions.STACKED_PERCENT])),Ax),Mx),Px=xt(xt(xt({},Tx),Cx),Ax),Fx=xt(xt(xt(xt(xt(xt(xt({},Tx),xx),Cx),Ax),wx("sharedAnalytics.visualizationSettings.columnMaxWidth")),Ix([le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.STACKED,le.ChartDisplayTypeOptions.STACKED_PERCENT])),Mx),Ux={},Vx=xt(xt(xt(xt(xt(xt(xt(xt(xt({},Tx),xx),Cx),Ix([le.ChartDisplayTypeOptions.DEFAULT,le.ChartDisplayTypeOptions.SMOOTH,le.ChartDisplayTypeOptions.STEPPED])),Rx),Dx),Ox),Nx),Mx),Bx=xt(xt(xt({},Tx),Cx),Ax),$x=xt(xt(xt({},Tx),Cx),Ax),Hx={},Wx=xt(xt(xt(xt(xt(xt(xt(xt(xt({},kx),Lx),Px),Fx),Ux),Vx),Bx),$x),Hx),qx={area:kx,bar:Lx,bubble:Px,column:Fx,honeyComb:Ux,line:Vx,pie:Bx,scatter:$x,table:Hx},jx=[le.VisualSettingsType.AREA,le.VisualSettingsType.BAR,le.VisualSettingsType.BUBBLE,le.VisualSettingsType.COLUMN,le.VisualSettingsType.HONEYCOMB,le.VisualSettingsType.LINE,le.VisualSettingsType.PIE,le.VisualSettingsType.SCATTER,le.VisualSettingsType.TABLE],Qx=e=>Kx(e)?e:{},zx=(e,t,i)=>{var r,n,a,s,o,l,c,d;if(wT(i)){const e=null!=(a=null==(n=null==(r=null==t?void 0:t.data)?void 0:r[0])?void 0:n.dataPoints.map((e=>{var t;return{color:e.color,name:null!=(t=e.originalLabel)?t:e.label}})))?a:[],i=(null!=(o=null==(s=null==t?void 0:t.data)?void 0:s.length)?o:0)>=2&&null!=(c=null==(l=null==t?void 0:t.data)?void 0:l.map((e=>{var t;return{color:e.color,name:null!=(t=e.originalName)?t:e.name}})))?c:[];return e.concat(i)}const u=(null!=(d=null==t?void 0:t.data)?d:[]).reduce(((e,t)=>(e[t.name]=t,e)),{});return e.filter((({name:e})=>u[e])).map((({name:e})=>({name:e,color:u[e].color})))},Gx=(0,oe.default)((({data:e})=>(null!=e?e:[]).reduce(((e,{blockId:t,name:i})=>(e[i]=t,e)),{}))),Kx=(0,oe.default)((e=>e.data instanceof Array&&e.data.every((e=>["blockId","color","name"].every((t=>"string"==typeof e[t]))&&e.dataPoints instanceof Array)))),Yx=({overrides:e,overrideIndex:t,seriesToQueryMapping:i,mode:r,baseVisualSettingsType:n})=>{var a;const s=e.slice(0,t),o=e[t];if("type"in o.properties&&SE(o.properties.type)(r,n))return o.properties.type;const l=Symbol("not possible to determine type from previous overrides"),c=null!=(a=[...o.queries.map((e=>({key:"queries",queryId:e}))),...o.series.map((e=>({key:"series",series:e})))].reduce(((e,t)=>{if(e===l)return e;const r=TE({overrides:s})("queries"===t.key?t.queryId:i[t.series],"series"===t.key?t.series:""),n=r&&"type"in r?r.type:void 0;return n&&e&&n!==e?l:null!=n?n:e}),void 0))?a:l;return c===l?n:c},Zx={overrideNames:"overrideNames___-DNWt",overrideProperty:"overrideProperty___Pyjwp",override:"override___wDHJu",overrideAlias:"overrideAlias___0yGcw",colon:"colon___MSXVS",remainingOverrides:"remainingOverrides___mfv8n",color:"color___RV3IV","first-line-container":"first-line-container___DKnFz",firstLineContainer:"first-line-container___DKnFz","edit-delete-buttons-container":"edit-delete-buttons-container___QDHJ1",editDeleteButtonsContainer:"edit-delete-buttons-container___QDHJ1",deleteButton:"deleteButton___6F3Xj",value:"value___TSlW3"},Xx={overrideNames:"overrideNames___oZ3NA",overrideProperty:"overrideProperty___gz7V1",override:"override___6eIr2",overrideAlias:"overrideAlias___lQi8w",colon:"colon___kdyNN",remainingOverrides:"remainingOverrides___pqLWM",color:"color___IRC2H","first-line-container":"first-line-container___GHnwG",firstLineContainer:"first-line-container___GHnwG","edit-delete-buttons-container":"edit-delete-buttons-container___i9DdV",editDeleteButtonsContainer:"edit-delete-buttons-container___i9DdV",deleteButton:"deleteButton___co2CA",value:"value___6j8NG"},Jx=(0,a.withCssModulesTheme)({brandLight:Xx,brandDark:Zx},Xx,(({override:e,editOverride:t,deleteOverride:i,styles:s})=>{const o=(0,n.useMemo)((()=>`${e.queries.map((e=>`#${e}`)).concat(e.series).join(", ")}`||r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.noQueryOrSeriesSelected")),[e]),{allPropertiesLength:l,previewProperties:c}=(0,n.useMemo)((()=>{const t=Object.keys(e.properties);return{allPropertiesLength:t.length,previewProperties:t.sort(((e,t)=>"name"===e?-1:"name"===t?1:e.localeCompare(t))).slice(0,lp)}}),[e]);return n.createElement("li",{className:s.override},n.createElement("div",{className:s.firstLineContainer},n.createElement("p",{className:s.overrideNames,title:o},o),n.createElement("div",{className:s.editDeleteButtonsContainer},n.createElement(a.IconButton,{buttonProps:{name:r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.delete")},onClick:i,icon:a.IconName.Trash,className:s.deleteButton}),n.createElement(a.IconButton,{buttonProps:{name:r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.edit")},onClick:t,icon:a.IconName.AngleDown}))),c.map(((t,i)=>n.createElement("p",{className:s.overrideProperty,key:t},r.i18nUtil.get(`sharedAnalytics.visualizationSettings.${t}`),n.createElement("span",{className:s.colon},":"),(t=>{var i;const a=null==(i=(0,r.withIndex)(e.properties)[t])?void 0:i.toString();if(a)switch(t){case"name":return n.createElement("strong",{className:s.value,title:a},'"',a,'"');case"color":return n.createElement("span",{className:s.color,title:a,style:{backgroundColor:a}});default:const e=r.i18nUtil.get(`sharedAnalytics.visualizationSettings.properties.${t}.${a}`)||a;return n.createElement("strong",{className:s.value,title:e},e)}})(t),i===lp-1&&l>lp&&n.createElement("span",{className:s.remainingOverrides},r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.remainingOverrides",l-lp))))))})),eC=(e,t,i,r)=>[...e.map((e=>({type:"query",label:`#${e}`,value:e}))),...t.filter((({name:e})=>r[i[e]]>1)).map((({name:e,color:t})=>({type:"series",label:xc(e),value:e,icon:t?{name:a.IconName.Dot,style:{fill:t}}:void 0})))],tC="styles-rows___TfwzE",iC="styles-row___DXOQc",rC="warning___sJAmq",nC="trash___Ip6ib",aC="color-picker___s0LHJ",sC="property-placeholder___nCfAu",oC="select-key___6pqzv",lC="key-rendered-label___m4coJ",cC="select-value___aWTHQ",dC="text-field-value___I9rOQ",uC="editable-value-container___eJsY9",pC=e=>e.filter((({value:e})=>Boolean(e)||0===e||!1===e)).reduce(((e,t)=>Ct(xt({},e),{[t.propertyName]:t.value})),{}),hC=(e,t)=>"type"===e.propertyName?-1:"type"===t.propertyName?1:e.propertyName<t.propertyName?-1:e.propertyName>t.propertyName?1:0,mC=(0,r.memoize)(((e,t,i)=>{var r;return(0,P.Z)((0,q.Z)(null!=(r=qx[t])?r:{},(r=>{if("PredefinedSetSeriesSetting"===(null==r?void 0:r.kind)){const n=r.availableItems.filter((({shouldShow:r})=>{var n;return!e||null==(n=null==r?void 0:r(e,t,i))||n}));return n.length>0?Ct(xt({},r),{availableItems:n}):void 0}return r})),Boolean)}),{maxNumberOfResults:150}),gC=e=>{const{override:t,warningInfo:i,editOverride:s,visualSettingsMode:o,visualSettingsType:l,allowChangingChartType:c}=e,d=(0,r.useDebounce)(s,op),[u,p]=(0,n.useState)(Object.entries(t.properties).filter((0,D.Z)((([e])=>"name"===e))).map((([e,t])=>({propertyName:e,value:t}))).sort(hC)),h=mC(o,l,c),m=(0,n.useMemo)((()=>Object.values(h).filter(r.isNotUndefined).filter((e=>!Boolean(u.find((t=>t.propertyName===e.propertyName)))))),[u,h]),g=e=>{const t=e.queries.map((e=>`#${e}`)).concat(e.series);return` ${t.join(", ")}${t.length>3?", ":""}`},y=e=>n.createElement(n.Fragment,null,e.overridden?n.createElement("p",null,n.createElement("strong",null,r.i18nUtil.get("sharedAnalytics.seriesOverridesStylesEditor.overriddenPropertyInfo")),": ",g(e.overridden),"."):null,e.incompatible?n.createElement("p",null,n.createElement("strong",null,r.i18nUtil.get("sharedAnalytics.seriesOverridesStylesEditor.ignoredPropertyInfo")),": ",g(e.incompatible),"."):null,e.initial?n.createElement("p",null,n.createElement("strong",null,r.i18nUtil.get("sharedAnalytics.seriesOverridesStylesEditor.disallowedPropertyInfo")),": ",g(e.initial),"."):null),v=e=>{p(e),d(Ct(xt({},t),{properties:xt(xt({},pC(e)),(0,j.Z)(t.properties,"name"))}))},f=(e,t)=>{const i=(0,r.immutablySetAtIndex)({array:u,index:t,update:e});v(i)},_=e=>m.length>0?n.createElement("div",{className:iC},n.createElement(a.Select,{selectProps:{"data-sumo-test":"seriesStyles"},className:oC,label:e?r.i18nUtil.get("sharedAnalytics.seriesOverridesStylesEditor.style"):void 0,value:"Property",renderValue:e=>n.createElement(a.Text,{className:"Property"===e?sC:""},r.i18nUtil.get("sharedAnalytics.seriesOverridesStylesEditor.property")),handleChange:e=>(e=>f({propertyName:e,value:"type"===e?l:void 0},u.length))(e.target.value)},m.map((({propertyName:e,label:t})=>n.createElement(a.Select.Item,{"data-sumo-test":`seriesStyles-item-${String(e).toLowerCase()}`,key:e,value:e},r.i18nUtil.get(t)))))):null,S=({item:e,index:t,disabled:i,availableItems:s,inputType:o,defaultValue:c,inputProps:d})=>{var p,h,m,g;if("color"===e.propertyName)return((e,t)=>n.createElement(a.ColorPicker,{className:aC,colorCode:u[t].value,onChange:e=>f(Ct(xt({},u[t]),{value:e.colorResult.hex}),t)}))(0,t);if(s)return n.createElement(a.Select,{selectProps:{"data-sumo-test":"seriesStyles-editableValue"},className:cC,label:0===t?"":void 0,value:e.value,optional:!0,disabled:i,handleChange:e=>f(Ct(xt({},u[t]),{value:e.target.value}),t)},s.map((e=>n.createElement(a.Select.Item,{"data-sumo-test":e.value?`seriesStyles-editableValue-item-${String(e.value).toLowerCase()}`:"seriesStyles-editableValueEmpty",key:e.label,value:e.value},r.i18nUtil.get(e.label)))));{const s=null!=(h=null==(p=null==qx?void 0:qx[l])?void 0:p[e.propertyName])?h:Wx[e.propertyName];if(!s)return null;const y=i&&"PredefinedSetSeriesSetting"===s.kind?r.i18nUtil.get(null!=(g=null==(m=s.availableItems.find((t=>t.value===e.value)))?void 0:m.label)?g:e.value):e.value,v=void 0===y?c:y;return n.createElement(a.TextField,{label:0===t?"":void 0,value:v,className:dC,optional:!0,disabled:i,type:o,inputProps:d,onChange:e=>{const i="number"===o&&(0,r.isNumber)(e.target.value)?Number(e.target.value):e.target.value;f(Ct(xt({},u[t]),{value:i}),t)}})}},b=({item:e,index:t,disabled:i,availableItems:s,inputType:o,defaultValue:c,inputProps:d})=>n.createElement(n.Fragment,null,(({item:e,index:t,disabled:i})=>n.createElement(a.Select,{selectProps:{"data-sumo-test":"seriesStyles-editableKey"},className:oC,disabled:i,label:0===t?r.i18nUtil.get("sharedAnalytics.seriesOverridesStylesEditor.style"):void 0,value:e.propertyName,renderValue:e=>{var t,i,a,s;return n.createElement("div",{className:lC},r.i18nUtil.get(null!=(s=null==(a=null!=(i=null==(t=null==qx?void 0:qx[l])?void 0:t[e])?i:null==Wx?void 0:Wx[e])?void 0:a.label)?s:""))},handleChange:e=>{const i=e.target.value;f({propertyName:i,value:"type"===i?l:""},t)}},m.map((({propertyName:e,label:t})=>n.createElement(a.Select.Item,{"data-sumo-test":`seriesStyles-editableKey-item-${String(e).toLowerCase()}`,key:e,value:e},r.i18nUtil.get(t))))))({item:e,index:t,disabled:i}),n.createElement("div",{className:uC},S({item:e,index:t,disabled:i,availableItems:s,inputType:o,defaultValue:c,inputProps:d})));return 0===u.length?n.createElement("div",null,n.createElement("div",{className:tC},_(!0))):n.createElement("div",null,n.createElement("div",{className:tC},u.map(((e,t)=>{const s=h[e.propertyName],o="PredefinedSetSeriesSetting"===(null==s?void 0:s.kind)?s.availableItems:void 0,l="UserProvidedSeriesSetting"===(null==s?void 0:s.kind)?s:void 0,c=void 0===s,d=i[e.propertyName];return n.createElement("div",{className:iC,key:e.propertyName},b({item:e,index:t,disabled:c,availableItems:o,inputType:null==l?void 0:l.inputType,defaultValue:null==l?void 0:l.defaultValue,inputProps:null==l?void 0:l.inputProps}),d?n.createElement("div",{className:rC},n.createElement(a.Tooltip,{multiline:!0,title:y(d)},n.createElement(a.IconButton,{icon:a.IconName.ExclamationCircle}))):null,n.createElement("div",{className:nC},n.createElement(a.IconButton,{icon:a.IconName.Trash,onClick:()=>(e=>{const t=(0,r.immutablyRemove)(u,e);v(t)})(t)})))})),_(!1)))},yC={"override-form":"override-form___XtEg9",overrideForm:"override-form___XtEg9","first-line-container":"first-line-container___vpXTZ",firstLineContainer:"first-line-container___vpXTZ","actions-container":"actions-container___9yMz-",actionsContainer:"actions-container___9yMz-","delete-button":"delete-button___X3paY",deleteButton:"delete-button___X3paY","auto-complete":"auto-complete___u9Kny",autoComplete:"auto-complete___u9Kny","auto-complete-chip":"auto-complete-chip___VGpaF",autoCompleteChip:"auto-complete-chip___VGpaF",alias:"alias___6gqBx"},vC={"override-form":"override-form___1KCGM",overrideForm:"override-form___1KCGM","first-line-container":"first-line-container___J8HdJ",firstLineContainer:"first-line-container___J8HdJ","actions-container":"actions-container___B6Hfd",actionsContainer:"actions-container___B6Hfd","delete-button":"delete-button___AIL1M",deleteButton:"delete-button___AIL1M","auto-complete":"auto-complete___e3WjT",autoComplete:"auto-complete___e3WjT","auto-complete-chip":"auto-complete-chip___EeTn5",autoCompleteChip:"auto-complete-chip___EeTn5",alias:"alias___jc4nM"},fC=(0,a.withCssModulesTheme)({brandLight:vC,brandDark:yC},vC,(({override:e,warningInfo:t,editOverride:i,stopEditing:s,availableQueries:o,availableSeries:l,seriesToQueryMapping:c,visualSettingsType:d,visualSettingsMode:u,allowChangingChartType:p,styles:h,deleteOverride:m})=>{var g;const{selectedQueriesOrSeries:y,setSelectedQueriesOrSeries:v,autoCompleteItems:f,getItemType:_}=((e,t,i,r)=>{const a=(0,n.useMemo)((()=>Object.values(r).reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{})),[r]),s=(0,n.useMemo)((()=>eC(t,i,r,a)),[i,t,r,a]),[o,l]=(0,n.useState)((()=>{const t=e.queries,i=e.series.map((e=>({name:e})));return eC(t,i,r,a)})),c=(0,n.useMemo)((()=>(0,W.Z)(s,o,"value")),[s,o]);return{selectedQueriesOrSeries:o,setSelectedQueriesOrSeries:l,autoCompleteItems:c,getItemType:e=>{var t;return null==(t=s.find((({value:t})=>t===e.value)))?void 0:t.type}}})(e,o,l,c),[S,b]=(0,n.useState)(null!=(g=e.properties.name)?g:""),E=(0,r.useDebounce)(i,op);return n.createElement("div",{className:h.overrideForm},n.createElement("div",{className:h.firstLineContainer},n.createElement(a.AssistiveText,null,n.createElement(a.AutoComplete,{dataSumoTest:{input:"queryOrSeriesName"},className:h.autoComplete,label:r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.queryOrSeriesName"),items:f,selectedItems:y,onSelectedItemsChange:t=>{v(t);const n=Ct(xt({},e),{series:t.filter((e=>"series"===_(e))).map((e=>(0,r.ensureDefined)(e.value))),queries:t.filter((e=>"query"===_(e))).map((e=>(0,r.ensureDefined)(e.value)))});i(n)},multiselect:!0,styleProps:{chip:h.autoCompleteChip}}),r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.queryOrSeriesNameHint")),n.createElement("div",{className:h.actionsContainer},n.createElement(a.IconButton,{className:h.deleteButton,onClick:()=>{s(),m()},icon:a.IconName.Trash}),n.createElement(a.IconButton,{onClick:s,icon:a.IconName.AngleUp}))),n.createElement(a.AssistiveText,null,n.createElement(a.TextField,{"data-sumo-test":"seriesAlias",className:h.alias,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.name"),inputProps:{maxLength:150},value:S,onChange:t=>{b(t.target.value);const i=xt({},e.properties);t.target.value?i.name=t.target.value:delete i.name,E(Ct(xt({},e),{properties:i}))},fullWidth:!0}),r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.aliasHint")),n.createElement(gC,{warningInfo:t,editOverride:i,override:e,visualSettingsMode:u,visualSettingsType:d,allowChangingChartType:p}))})),_C="overrides___-L-e2",SC=({overrides:e,overridesInfo:t,seriesToQueryMapping:i,changeCurrentlyEditedOverrideIndex:r,currentlyEditedOverrideIndex:a,editOverride:s,stopEditingOverride:o,deleteOverride:l,availableSeries:c,availableQueries:d,visualSettingsTypeFromGeneral:u,visualSettingsMode:p,allowChangingChartType:h})=>{const m=(0,n.useCallback)((t=>Yx({overrides:e,overrideIndex:t,seriesToQueryMapping:i,mode:p,baseVisualSettingsType:u})),[e,i,p,u]),g=e.map(((e,u)=>{const g="type"in e.properties?e.properties.type:void 0;switch(g){case le.VisualSettingsType.AREA:case le.VisualSettingsType.BAR:case le.VisualSettingsType.BUBBLE:case le.VisualSettingsType.COLUMN:case le.VisualSettingsType.HONEYCOMB:case le.VisualSettingsType.LINE:case le.VisualSettingsType.PIE:case le.VisualSettingsType.SCATTER:case le.VisualSettingsType.TABLE:case void 0:if(void 0===g||g)return a===u?n.createElement(fC,{override:e,warningInfo:wE(t,e,u),key:u,editOverride:e=>s(e,u),stopEditing:o,availableQueries:d,availableSeries:c,seriesToQueryMapping:i,visualSettingsType:m(u),visualSettingsMode:p,allowChangingChartType:h,deleteOverride:()=>l(u)}):n.createElement(Jx,{key:u,override:e,editOverride:()=>r(u),deleteOverride:()=>l(u)});break;default:return null}})).filter(Boolean);return g.length>0?n.createElement("ul",{className:_C},g):null},bC="seriesOverrides___qPxh-",EC="title___E2J3x",TC="add-new-override-button___KBpKx",xC=({visualizationSettings:e,updateVisualizationSettings:t,availableSeries:i,availableQueries:s,visualSettingsType:o,seriesToQueryMapping:l,allowChangingChartType:d})=>{var p,h;const m=e=>({series:[],queries:[],properties:{},isInitial:e}),[g,y]=(0,n.useState)(null!=(p=e.overrides)?p:[m(!0)]),[v,f]=(0,n.useState)(e.overrides?void 0:0),[_,S]=(0,n.useState)(!1),[b,E]=(0,n.useState)(),T=(0,r.usePrevious)(g);(0,n.useEffect)((()=>{if(g===T)return;const i={};T&&(i.overrides=!0);const r=g.filter((e=>!e.isInitial)).map((e=>(0,c.Z)(e,["isInitial"])));t(Ct(xt({},e),{overrides:(0,u.Z)(r)?void 0:r}),i)}),[t,g,T,e]);return n.createElement("div",{className:bC,"data-sumo-test":"seriesOverrides"},n.createElement(a.Toast.CasualToast,{open:_,onClose:(e,t)=>{"clickaway"!==t&&S(!1)},message:r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.overrideDeleted"),action:n.createElement(a.Toast.ActionTextBtn,{key:"override-delete-undo-button",onClick:()=>{!b||(y((e=>(0,r.addAtIndex)(e,b.deletedAtIndex,b.override))),S(!1))}},r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.undo"))}),n.createElement(a.Text,{variant:"panel",className:EC},r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.seriesOverrides")),Object.values(g)?n.createElement(SC,{overrides:g,overridesInfo:CE(e,l),seriesToQueryMapping:l,currentlyEditedOverrideIndex:v,changeCurrentlyEditedOverrideIndex:f,editOverride:(e,t)=>{y((i=>(0,r.immutablySetAtIndex)({array:i,index:t,update:Ct(xt({},e),{isInitial:!1})}))),f(t)},stopEditingOverride:()=>f(void 0),deleteOverride:e=>{y((t=>(0,r.immutablyRemove)(t,e))),S(!0),E({override:xt({},g[e]),deletedAtIndex:e})},availableQueries:s,availableSeries:i,visualSettingsTypeFromGeneral:o,visualSettingsMode:null==(h=null==e?void 0:e.general)?void 0:h.mode,allowChangingChartType:d}):null,n.createElement(a.TextButton,{className:TC,onClick:()=>{f(g.length),y((e=>[...e,m()]))}},r.i18nUtil.get("sharedAnalytics.seriesOverridesEditor.addNewOverride")))},CC=(0,n.createContext)(void 0),AC={tabsSection:"tabsSection___pYwMe",tabContent:"tabContent___I8IeX",resizable:"resizable___7Y58x",overlay:"overlay___9VHgA",content:"content___gpCfy",headerBar:"headerBar___n95-N",headerBarBack:"headerBarBack___xZnN2",resizeHandle:"resizeHandle___VQ2EQ",singleTab:"singleTab___PX-yl",headerText:"headerText___oiz-9"},wC={tabsSection:"tabsSection___cb1Oc",tabContent:"tabContent___OoYSL",resizable:"resizable___0gxLk",overlay:"overlay___PJioC",content:"content___9frEH",headerBar:"headerBar___bi-a2",headerBarBack:"headerBarBack___0TEcs",resizeHandle:"resizeHandle___z4yPW",singleTab:"singleTab___kaBVQ",headerText:"headerText___Cj4u6"},IC=(0,n.memo)((0,a.withCssModulesTheme)({brandLight:wC,brandDark:AC},wC,(({state:{open:e,activeSubTab:t,width:i},title:r,tabs:s,container:o,classes:l,hideSingleTabHeader:c=!0,autoClose:d=!1,dispatch:u,styles:p})=>{var h,m,g,y;const v=(0,n.useRef)(null),f=(0,n.useRef)(null),_=(0,n.useCallback)((()=>{u({type:"PassToSidePanel",_action:{type:"CloseSidePanel"}}),s.forEach((e=>{var t;return null==(t=e.onSidePanelClose)?void 0:t.call(e)}))}),[u,s]),S=(0,n.useCallback)((e=>{u({type:"PassToSidePanel",_action:{type:"ResizeSidePanel",width:e}})}),[u]),b=(0,n.useCallback)((e=>{u({type:"PassToSidePanel",_action:{type:"ChangeSidePanelSubTab",subTabName:e}})}),[u]),E=(0,n.useCallback)((()=>{var e,t;const i=null!=(t=null==(e=v.current)?void 0:e.state.width)?t:le.SIDE_PANEL_MIN_WIDTH;S(i)}),[S]);(0,n.useEffect)((()=>{if(!d)return;const t=t=>{const{target:i}=t,r=f.current;e&&r&&(null==o?void 0:o.current)&&(i instanceof HTMLElement||i instanceof SVGElement)&&!r.contains(i)&&o.current.contains(i)&&_()};return window.addEventListener("click",t,{capture:!0}),()=>{window.removeEventListener("click",t,{capture:!0})}}),[e,_,o,d]);const T=null==(h=null==o?void 0:o.current)?void 0:h.getBoundingClientRect().width;return n.createElement(ce.Overlay,{className:ue(p.overlay,null==l?void 0:l.overlay),open:e,onClose:_,onBackClick:null==(m=s[0])?void 0:m.onSidePanelBack,closeButtonSize:"small",containerDivRef:f},e&&n.createElement(ce.Resizable,{className:p.resizable,afterResize:E,direction:"west",minWidth:le.SIDE_PANEL_MIN_WIDTH,maxWidth:T,suppressRepositioning:!0,resizeRegionSize:5,resizeHandleClassName:p.resizeHandle,ref:v},n.createElement("div",{"data-sumo-test":"side-panel-content",className:p.content,style:{width:`${i}px`}},n.createElement(a.HeaderBar,{size:"small",className:ue([p.headerBar,{[p.headerBarBack]:Boolean(null==(g=s[0])?void 0:g.onSidePanelBack)}])},n.createElement(a.HeaderBar.Row,null,n.createElement(a.HeaderBar.Column,{fullSize:!0,"data-sumo-test":"side-panel-title",className:p.headerText},r))),n.createElement(CC.Provider,{value:null==(y=s[0])?void 0:y.value},c&&1===s.length?n.createElement("div",{className:p.singleTab,"data-sumo-test":s[0]["data-sumo-test"]?`single-${s[0]["data-sumo-test"]}`:void 0},s[0].component):n.createElement(a.Tabs,{tabs:s,activeTab:t,onTabClick:b,styleProps:{tabsSection:ue(p.tabsSection,null==l?void 0:l.tabsSection),tabContent:ue(p.tabContent,null==l?void 0:l.tabContent)}})))))}))),RC=(e=(0,Re.getInitialGeneralSidePanelState)(),t)=>(e=>"PassToSidePanel"===e.type)(t)?((e,t)=>{switch(t.type){case"OpenSidePanel":return Ct(xt({},e),{open:!0});case"CloseSidePanel":return Ct(xt({},e),{entityInspectorId:void 0,open:!1});case"ResizeSidePanel":return Ct(xt({},e),{width:t.width});case"ChangeSidePanelSubTab":return Ct(xt({},e),{activeSubTab:t.subTabName});case"ChangeSidePanelTitle":return Ct(xt({},e),{title:t.title});case"EntityInspectorInitialized":return Ct(xt({},e),{entityInspectorId:t.entityInspectorId})}})(e,t._action):e,DC={tileActive:"tileActive___MEmYZ"},OC={tileActive:"tileActive___uVZUQ"},NC={tileActive:"tileActive___ia-ET"},MC={tileActive:"tileActive___QqThS"};function kC(e){switch(e){case gl.TIME_SERIES:return"timeSeries";case gl.DISTRIBUTION:return"distribution";case gl.SINGLE_VALUE_METRICS:return"singleValueMetrics";case gl.MAP:return"map";case gl.TEXT:return"TextPanel";case gl.HONEYCOMB:return"honeyComb";case gl.IMAGE:return"image";case gl.TRACE_LIST:return"traceList";case gl.SERVICE_MAP:return"serviceMap"}}const LC=(0,a.withCssModulesTheme)({light:MC,dark:NC,brandLight:OC,brandDark:DC},MC,(({dataSumoTest:e,layoutType:t,onVisualizationTypeClick:i,onVisualizationTypeMouseEnter:s,onVisualizationTypeMouseLeave:o,closeMenu:l,tileCardClassName:c,tileContentClassName:d,tiles:u=$l,tileSize:p,activeType:h,styles:m})=>{const g=(0,n.useMemo)((()=>De.currentUserHelper.hasFeatureFlag("UITraceListPanelsOnDashboardsEnabled")),[]),y=(0,n.useMemo)((()=>De.currentUserHelper.hasFeatureFlag("UIServiceMapPanelsOnDashboardsEnabled")),[]),v=(0,n.useMemo)((()=>(null!=u?u:$l).filter((e=>{switch(e.type){case gl.TRACE_LIST:return g;case gl.SERVICE_MAP:return y;default:return!0}}))),[y,u,g]),f=(0,n.useMemo)((()=>v.map((({type:e,disabled:t})=>{const n=yl[e];return{label:r.i18nUtil.get(n.label),description:r.i18nUtil.get(n.explanationMessage),onClick:()=>null==i?void 0:i(e),onMouseEnter:()=>null==s?void 0:s(e),onMouseLeave:()=>null==o?void 0:o(e),disabled:t,"data-sumo-test":`newDashboard.${kC(e)}-panelType`,icon:n.icon,className:e===h?m.tileActive:void 0,size:p}}))),[h,v,i,s,o,m.tileActive,p]);return n.createElement(a.Menu.TileContent,{tileButtons:f,layoutType:t,closeMenu:null!=l?l:Q.Z,"data-sumo-test":e,className:c,styleProps:{content:d}})})),PC={get ENVIRONMENT(){return window.ENVIRONMENT},get userPreferencesModel(){var e;return null==(e=SumoApp.user)?void 0:e.userPreferencesModel},get moment(){return window.moment}};function FC(e){switch(e){case il.LIGHT:return Ne.ColorsV1.white;case il.DARK:return Ne.ColorsV1.seal;case il.BRANDLIGHT:return Ne.ColorsV2["white-10"];case il.BRANDDARK:return Ne.ColorsV2["black-90"];default:return Ne.ColorsV1.white}}const UC=e=>[Zo.GREATER_OR_EQUAL,Zo.GREATER].includes(e),VC=(e,t)=>(e>t.startValue||Boolean(t.inclusive)&&e===t.startValue)&&(e<t.endValue||Boolean(t.inclusive)&&e===t.endValue),BC=(e,t,i,r,n)=>{if(!e.display||!(e=>[Zo.EXCLUDES,Zo.INCLUDES].includes(e.comparator)?void 0!==e.value&&void 0!==e.toValue&&e.toValue>e.value:void 0!==e.value)(e))return[];if(e.comparator===Zo.EXCLUDES&&(VC(e.value,{startValue:i,endValue:r})||VC(e.toValue,{startValue:i,endValue:r})))return[{startValue:e.toValue,endValue:r,color:Wc[n][t]},{startValue:i,endValue:e.value,color:Wc[n][t]}];const a=((e,t)=>e.comparator===Zo.INCLUDES||UC(e.comparator)?e.value:t)(e,i),s=((e,t)=>e.comparator===Zo.INCLUDES?e.toValue:UC(e.comparator)?t:e.value)(e,r);return a<=s?[{startValue:a,endValue:s,color:Wc[n][t],inclusive:[Zo.INCLUDES,Zo.GREATER_OR_EQUAL,Zo.LESS_OR_EQUAL].includes(e.comparator)}]:[]},$C=(e,t,i,r,n)=>{if(!i)return;const a=((e,t,i)=>{if(i){const t=(0,ce.getMinDistanceBetweenDataPoints)(e);if(t)return t/2}let r,n;try{[r,n]=JSON.parse((0,Re.convertResolvableTimeRangeToTimeDetails)(t))}catch(t){r={d:e[0].dataPoints[0].x},n={d:e[0].dataPoints[e[0].dataPoints.length-1].x}}return.005*(n.d-r.d)})(i,r,n),s=(e=>e.flatMap((e=>e.dataPoints)).filter((e=>null!==e.y&&null!==e.x)).reduce(((e,t)=>(e[t.x]||(e[t.x]=[]),e[t.x].push(t),e)),{}))(i),o=Object.keys(s).sort(),l=[];let c=!1,d=!1,u=0;for(let i=0;i<o.length;i++){const r=Number(o[i]),n=e.critical.some((e=>s[r].some((t=>VC(t.y,e))))),p=e.warning.some((e=>s[r].some((t=>VC(t.y,e))))),h=i===o.length-1;c&&(h||!n)&&(c=!1,l.push({color:Wc[t].critical,startValue:u,endValue:(n?r:Number(o[i-1]))+a})),d&&(h||!p||n)&&(d=!1,l.push({color:Wc[t].warning,startValue:u,endValue:(!p||n?Number(o[i-1]):r)+a})),!c&&n&&(c=!0,u=r-a),!c&&!d&&p&&(d=!0,u=r-a)}if((c||d)&&l.push({color:c?Wc[t].critical:Wc[t].warning,startValue:u,endValue:Number(o[o.length-1])+a}),1===l.length)return l;if(0===l.length)return;const p=[],h=l.sort(((e,t)=>e.startValue-t.startValue));let{startValue:m,endValue:g,color:y}=l[0];for(let e=1;e<h.length;e++)h[e].startValue<=g&&h[e].color===y?g=Math.max(g,h[e].endValue):(p.push({startValue:m,endValue:g,color:y}),m=h[e].startValue,g=h[e].endValue,y=h[e].color),e===h.length-1&&p.push({startValue:m,endValue:g,color:y});return p},HC=(e={},t,i,r,n="light")=>{var a,s;const o=null!=(s=(null!=(a=e.thresholdsSettings)?a:{}).thresholds)?s:qc.thresholds;return((e,t)=>{const i=[];for(const r of t){let t=!1;const{startValue:n,endValue:a}=r,s=[xt({},r)];for(const i of e){if(n>=i.startValue&&a<=i.endValue){t=!0;break}VC(i.endValue,{startValue:n,endValue:a})&&VC(i.startValue,{startValue:n,endValue:a})?(s.push(xt({},r)),s[0].startValue=i.endValue,s[1].endValue=i.startValue):VC(i.endValue,{startValue:n,endValue:a})?s[0].startValue=i.endValue:i.startValue>n&&i.startValue<a&&(s[0].endValue=i.startValue)}t||i.push(...s)}return{warning:i,critical:e}})(BC(o.critical,"critical",i,r,n),BC(o.warning,"warning",i,r,n))},WC=(e={},t)=>{var i,r,n,a;let s,o;if((null==(i=e.general)?void 0:i.type)!==le.VisualSettingsType.TABLE&&(null==(r=e.axes)?void 0:r.axisY)&&(s=null==(n=e.axes)?void 0:n.axisY.minimum,o=null==(a=e.axes)?void 0:a.axisY.maximum),void 0===s||void 0===o){const{maxY:e,minY:i}=t.reduce(((e,{aggregateInfo:t})=>({maxY:Math.max(e.maxY,t.max),minY:Math.min(e.minY,t.min)})),{maxY:0,minY:0});s=null!=s?s:i-Math.abs(1*i),o=null!=o?o:e+Math.abs(1*e)}return{minimum:s,maximum:o}},qC=(e={},t,i="light")=>{var r;const n=null!=(r=e.thresholdsSettings)?r:{};if(!(De.currentUserHelper.hasFeatureFlag("UIMetricsThresholdAreas")&&(null==n?void 0:n.showThresholds)&&t))return;const{minimum:a,maximum:s}=WC(e,t),o=HC(e,0,a,s,i);return Ct(xt({},o),{fillRemaining:Boolean(n.fillRemainingGreen)})};function jC(e,t){var i,r,n;return null!=(n=null!=(r=e&&"type"in e?e.type:void 0)?r:null==(i=null==t?void 0:t.general)?void 0:i.type)?n:jc.type}function QC(e=Go.TIMESERIES){return e===Go.TIMESERIES?ce.AxisType.DATETIME_CJS:ce.AxisType.NUMBER}function zC(e,t,i){e[t]=i,e.sumoMetadata[t]=i}function GC(e,t,i,r,n,a,s,o,l){var c,d,u;const p={y:e.y,xAxisValues:e.xAxisValues,rawMetaData:e.rawMetaData,isFilled:e.isFilled,outlierData:e.outlierData,isOutlier:e.isOutlier,groupByData:e.groupByData,queryId:e.queryId,isClientInterpolated:e.isClientInterpolated,isPointConnected:e.isPointConnected,label:e.label,seriesMetadata:r},h=KC(e.y),m=o?function(e,t,i=il.LIGHT){const{critical:r,warning:n,fillRemaining:a}=t,s=[il.DARK,il.BRANDDARK].includes(i)?"dark":"light";return r.some((t=>VC(e,t)))?Wc[s].critical:n.some((t=>VC(e,t)))?Wc[s].warning:a?Wc[s].remainingArea:void 0}(h,o,l):void 0,g=xt({y:h,markerSize:e.markerSize,markerType:e.markerType,markerColor:e.markerColor,markerBorderColor:e.markerBorderColor,sumoMetadata:p},m?{color:m}:{}),y=g.y,v=wT(t);g.sumoMetadata=p;const f=jE(e,i,v,s,a);if(Object.assign(g,f),Object.assign(g.sumoMetadata,f),v){const a=null!=(c=e.queryId)?c:i.queryId,s=null!=(d=f.label)?d:"",o=f.originalLabel,l=TE(t)(a,null!=o?o:s),{color:p,visible:h}=ZC(l),m=CT(y);!h&&m&&(r.aggregateInfo.sum-=m,r.aggregateInfo.avg-=m/n.length),zC(g,"visible",h),h||(zC(g,"y",0),zC(g,"indexLabelFontSize",0),zC(g,"indexLabelLineThickness",0)),e.groupByData?(zC(g,"color",e.groupByData.color),zC(g,"name",String(e.groupByData.secondaryGroupId))):(zC(g,"color",p),zC(g,"label",vT({name:s,queryId:a,metaData:null!=(u=e.rawMetaData)?u:r.dimensions,overriddenSettings:t,originalName:o})))}return g}function KC(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?null:t}return null===e||isNaN(e)?null:e}function YC(e,t){return ot(e).setAlpha(t).toHex8String()}const ZC=(0,oe.default)((e=>!e||"type"in e&&e.type===le.VisualSettingsType.TABLE?{color:void 0,visible:!0}:{color:"fillOpacity"in e&&e.fillOpacity&&e.color?YC(e.color,e.fillOpacity):"color"in e?e.color:void 0,visible:!("visible"in e)||!1!==e.visible}));function XC({dataPoints:e,overriddenSettings:t,quantizationGranularity:i}){var r,n;const a=[],s=Au(null==(r=t.general)?void 0:r.markerType),o=wu(null==(n=t.general)?void 0:n.markerSize);for(let t=0;t<e.length;t++){const r=t===e.length-1,n=e[t],l=t>0&&null===a[a.length-1].y,c=!r&&null!==n.y&&e[t+1].x-n.x>i;(c||r)&&(l||0===t)&&null!==n.y&&tT(n,s,o),a.push(n),c&&a.push({x:e[t].x+i,y:null,isPointConnected:!1})}return a}function JC(e,t,i,r,n,a,s,o,l){const{queryId:c,name:d}=e,u=xt({},e.aggregateInfo),p=e.metaData.data,h={dimensions:p,blockId:c,id:ST(c,d),name:wT(i)?d:vT({name:d,queryId:c,metaData:p,overriddenSettings:i}),originalName:d,aggregateInfo:u};let m;return m=UE(t)?e.dataPoints.map(((r,n)=>function(e,t,i,r,n,a,s){var o;const l=hT(e,t,r,i.xy,t.y),c=TE(i)(n,l.name),{color:d,visible:u}=ZC(c),p=l,{name:h}=p,m=At(p,["name"]),g=xt(Ct(xt({},m),{label:vT({name:h,queryId:r.queryId,metaData:null!=(o=t.rawMetaData)?o:r.metaData.data,overriddenSettings:i}),visible:u,color:d}),u?{}:{markerType:"none"});return g.sumoMetadata=Ct(xt(xt({},t),g),{seriesMetadata:a}),g.z=l.z,g.originalIndex=s,g.originalLabel=h,g}(t,r,i,e,c,h,n))):(t===le.VisualSettingsType.LINE&&s&&r?XC({dataPoints:e.dataPoints,quantizationGranularity:s,overriddenSettings:i}):e.dataPoints).map(((t,r,s)=>GC(t,i,e,h,s,n,a,o,l))),{seriesMetadata:h,dataPoints:m}}function eA(e,t,i,r){var n,a,s,o,l,c;const d=null==(a=null==(n=e.axes)?void 0:n[t])?void 0:a.title,u=null==(s=e.xy)?void 0:s[i],p=u&&u.length?u[0].label:"";return void 0===d||p?Ct(xt({},e),{axes:Ct(xt({},null!=(o=e.axes)?o:{}),{[t]:Ct(xt({},p?{title:p}:null!=(c=null==(l=e.axes)?void 0:l[t])?c:{}),{title:r})})}):e}const tA=(e,t)=>{const i=({hasAnyNegativeTimeSeries:e,hasAnyTimeSeriesWithConsecutiveZeros:t,maxVal:i})=>!e&&t?i?{minimum:-i/100}:{maximum:10,minimum:-.1}:null,r=e.reduce(((e,{queryId:i,name:r,aggregateInfo:n,dataPoints:a})=>{var s;const o=n.min<0;let l=n.min===n.max&&0===n.min;if(!l)for(let e=0;e<a.length-1;e++)if(0===a[e].y&&0===a[e+1].y){l=!0;break}const c=TE(t)(i,r),d=e[null!=(s=null==c?void 0:c.axisYType)?s:"primary"];return d.hasAnyNegativeTimeSeries=d.hasAnyNegativeTimeSeries||null!=o&&o,d.hasAnyTimeSeriesWithConsecutiveZeros=d.hasAnyTimeSeriesWithConsecutiveZeros||null!=l&&l,d.maxVal=Math.max(n.max,d.maxVal),e}),{primary:{maxVal:0,hasAnyNegativeTimeSeries:!1,hasAnyTimeSeriesWithConsecutiveZeros:!1},secondary:{maxVal:0,hasAnyNegativeTimeSeries:!1,hasAnyTimeSeriesWithConsecutiveZeros:!1}});return{primary:i(r.primary),secondary:i(r.secondary)}};function iA(e){if(!De.currentUserHelper.hasFeatureFlag("UICanvasYAxisAutoScale"))return;const{minY:t,maxY:i}=function(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const r of e)for(const e of r.dataPoints)"number"==typeof e.y&&(e.y<t&&e.y!==Number.NEGATIVE_INFINITY&&(t=e.y),e.y>i&&e.y!==Number.POSITIVE_INFINITY&&(i=e.y));return{minY:t===Number.POSITIVE_INFINITY?void 0:t,maxY:i===Number.NEGATIVE_INFINITY?void 0:i}}(e);if("number"!=typeof t||"number"!=typeof i||i<t)return;const r=i-t,n=.1*(0===r?t:r);return{scaledMinY:t>=0?Math.max(t-n,0):t-n,scaledMaxY:i+n}}const rA=(e,t)=>{const{viewportMinimum:i,viewportMaximum:r}=t;for(const t of e)for(const e of t.dataPoints)if(e.x&&null!==e.y&&e.x>=i&&e.x<=r)return!0;return!1},nA={interactivity:({overriddenSettings:e,zoomHandlers:t})=>{const{enabled:i,zoom:{zoomEnabled:r,zoomType:n}}=$E(e,"interactivity");return xt({interactivityEnabled:i},i&&{zoomEnabled:r,zoomType:n,rangeChanging(e){var i;if(!t)return;const r=null==(i=e.chart.container)?void 0:i.getElementsByClassName("canvasjs-chart-toolbar")[0];if("zoom"===e.trigger&&e.axisX)if(rA(e.chart.data,e.axisX[0])){const i=JSON.stringify([{t:"absolute",d:e.axisX[0].viewportMinimum},{t:"absolute",d:e.axisX[0].viewportMaximum}]),n=(e=>{const t=e.axisY[0],i=e.axisY2?e.axisY2[0]:null;return{yAxis:{minimum:t.minimum,maximum:t.maximum},yAxis2:i?{minimum:i.minimum,maximum:i.maximum}:void 0}})(e.chart);t.onZoom(i,!0,n),r&&(r.style.display="inline")}else e.chart.axisX[0].set&&(e.chart.axisX[0].set("viewportMaximum",null,!1),e.chart.axisX[0].set("viewportMinimum",null,!0)),t.onEmptyAreaSelected(),r&&(r.style.display="none");else"reset"===e.trigger&&t.onReset()}})},dataPointMaxWidth:({overriddenSettings:e})=>{var t,i;const r=null==(i=null==(t=null==e?void 0:e.overrides)?void 0:t.slice().reverse().find((({queries:e,series:t,properties:i})=>(e.length>0||t.length>0)&&"dataPointMaxWidth"in i&&void 0!==i.dataPointMaxWidth)))?void 0:i.properties,n=r&&"dataPointMaxWidth"in r?r.dataPointMaxWidth:null;return n?{dataPointMaxWidth:n}:AT(e)?{dataPointMaxWidth:Zl}:{}},toolTip:({overriddenSettings:e})=>({toolTip:$E(e,"toolTip")}),axes:({visualData:e,overriddenSettings:t,theme:i,zoomedInAxes:n})=>{var a,s,o,l,d,u,p,h,m,g,y,v,f,_,S,b,E,T,x,C,A,w,I;const{axes:R}=e;let D;try{D=Ie.timeZoneServiceV2.getUserTimeZone()}catch(e){D="Asia/Calcutta"}if(!R)return{};const O=null!=(a=e.series)?a:[],N=O[0]||{},{name:M,queryId:k,seriesType:L,xAxisKeys:P=[]}=N,F=jC(TE(t)(k,M),t),U=bl.includes(F),V=null==(s=t.general)?void 0:s.groupBy;if(QC(L)===ce.AxisType.DATETIME_CJS){const i=null==(o=PC.userPreferencesModel)?void 0:o.getDateLocaleFormat(),r=kT(null!=(l=e.series)?l:[]);t=Ct(xt({},t),{axes:Ct(xt({},t.axes),{axisX:xt(Ct(xt({},null==(d=t.axes)?void 0:d.axisX),{labelFormatter:(0,B.Z)(ce.labelDateFormatter,{timeZone:D,dateLocaleFormat:i,boundary:r}),labelAngle:0,type:ce.AxisType.DATETIME_CJS}),(null==n?void 0:n.xAxis)||{})})})}if(1===O.length&&(U||UE(F))){const e=null==(u=t.xy)?void 0:u.yDimension;t=eA(t,"axisY","yDimension",e&&e.length?e[0].value||"":M)}if(L===Go.NONTIMESERIES){const e=null==(p=t.xy)?void 0:p.xDimension,i=e&&e.length?e[0].value||"":P[0];(t=eA(t,"axisX","xDimension",(null!=V&&V.length?V.join(", "):"")||i)).axes&&(t.axes.axisX=Ct(xt({},t.axes.axisX),{crosshair:{enabled:!1}}))}const $=(null==(m=null==(h=t.axes)?void 0:h.axisY)?void 0:m.gridColor)===ql||(null==(y=null==(g=t.axes)?void 0:g.axisY)?void 0:y.gridColor)===jl||(null==(f=null==(v=t.axes)?void 0:v.axisY)?void 0:f.gridColor)===Ql?(0,c.Z)(null==(_=t.axes)?void 0:_.axisY,["gridColor"]):null==(S=t.axes)?void 0:S.axisY,H=(null==(E=null==(b=t.axes)?void 0:b.axisY2)?void 0:E.gridColor)===ql||(null==(x=null==(T=t.axes)?void 0:T.axisY2)?void 0:x.gridColor)===jl||(null==(A=null==(C=t.axes)?void 0:C.axisY2)?void 0:A.gridColor)===Ql?(0,c.Z)(null==(w=t.axes)?void 0:w.axisY2,["gridColor"]):null==(I=t.axes)?void 0:I.axisY2;t=Ct(xt({},t),{axes:Ct(xt({},t.axes),{axisY:xt({},$),axisY2:xt({},H)})});const{axisX:W,axisY:q,axisY2:j}=$E(t,"axes",i);null!=V&&V.length&&(W.labelFormatter=e=>e.label);const Q=iA(O);Q&&(q.minimum=Q.scaledMinY,q.maximum=Q.scaledMaxY,q.stripLines=[{value:q.minimum,label:(0,r.formatNumberWithUnit)(q.minimum),labelPlacement:"outside",labelFontColor:q.labelFontColor,color:q.tickColor,labelBackgroundColor:FC(i),thickness:1},{value:q.maximum,label:(0,r.formatNumberWithUnit)(q.maximum),labelPlacement:"outside",labelFontColor:q.labelFontColor,color:q.tickColor,labelBackgroundColor:FC(i),thickness:1}]);const G=((e={},t,i,r="light")=>{var n;const a=null!=(n=e.thresholdsSettings)?n:{};if(!(De.currentUserHelper.hasFeatureFlag("UIMetricsThresholdAreas")&&(null==a?void 0:a.showThresholds)&&t)||a.highlightViolations&&RT(e))return;const{minimum:s,maximum:o}=WC(e,t),l=HC(e,0,s,o,r),c=[...l.warning,...l.critical],d=[];if(c.forEach((e=>{a.highlightViolations||d.push(xt({opacity:Hc[r]},e)),[e.startValue,e.endValue].forEach((t=>{t!==s&&t!==o&&d.push({value:t,color:e.color,opacity:1,lineDashType:le.LineDashStyleOptions.DASH})}))})),!a.highlightViolations&&a.fillRemainingGreen){const e=((e,t,i)=>{if(0===e.length)return[{startValue:t,endValue:i}];const r=[],n=e.sort(((e,t)=>e.startValue-t.startValue));e[0].startValue>t&&r.push({startValue:t,endValue:e[0].startValue}),e[e.length-1].endValue<i&&r.push({startValue:e[e.length-1].endValue,endValue:i});for(let e=0;e<n.length-1;e++){const t=n[e],i=n[e+1];t.endValue<i.startValue&&r.push({startValue:t.endValue,endValue:i.startValue})}return r})(c,s,o).map((e=>xt({opacity:Hc[r],color:Wc[r].remainingArea},e)));d.push(...e)}const u=null==t?void 0:t.filter((t=>{var i,r;const n=null!=(r=null==(i=null==e?void 0:e.series)?void 0:i[t.name])?r:{};return!("visible"in n)||!1!==n.visible})),p=RT(e),h=a.highlightViolations?$C(l,r,u,i,p):void 0,m=h?h.map((e=>Ct(xt({},e),{opacity:2*Hc[r]}))):void 0;return{y:d,x:m}})(t,e.series,e.timeRange,[il.DARK,il.BRANDDARK].includes(null!=i?i:il.LIGHT)?"dark":"light");G&&(q.stripLines||(q.stripLines=[]),q.stripLines.push(...G.y),G.x&&(W.stripLines||(W.stripLines=[]),W.stripLines.push(...G.x))),null!=n&&n.yAxis&&(q.minimum=n.yAxis.minimum,q.maximum=n.yAxis.maximum),null!=n&&n.yAxis2&&(j.minimum=n.yAxis2.minimum,j.maximum=n.yAxis2.maximum);const K=tA(O,t);K.primary&&(0,z.Z)(q,K.primary),K.secondary&&(0,z.Z)(q,K.secondary);const Y=(e,t)=>(null!=e?e:[]).map((e=>xt(xt({},e),t))),Z=fl(),X=fl();return q.labelFormatter=e=>Z(e.value,e.axis.unit,e.axis.unitDecimals),j.labelFormatter=e=>X(e.value,e.axis.unit,e.axis.unitDecimals),{axisX:Y(R.x,W),axisY:Y(R.y,q),axisY2:Y(R.y2,j)}},series:({visualData:e,overriddenSettings:t,theme:i=il.LIGHT,timeZone:n,showTzOffset:s,queries:o})=>{var l,c,d,u,p,h;const m=(0,j.Z)(null!=(l=null==t?void 0:t.general)?l:{},Object.keys(Vc)),g=null!=(c=e.series)?c:[],y=wT(t),v=g.reduce(((e,{queryId:t})=>e.add(t)),new Set),f=(null!=o?o:[]).filter((({queryKey:e})=>v.has(e))),_=f.reduce(((e,t)=>e.set(t.queryKey,VS(t,null!=o?o:f))),new Map),S=OT(t),b=null!=(d=t.thresholdsSettings)?d:{},E=RT(t)&&b.highlightViolations&&!y?qC(t,g):void 0;let T=g.map(((e,o)=>{var l,c,d,u,p,h;const g=e,{queryId:v,name:f,canvasJSSettings:b,queryInfo:T}=g,x=At(g,["queryId","name","canvasJSSettings","queryInfo"]),C=null!=(l=TE(t)(v,f))?l:{},A=jC(C,t),w=FE(t,e),I=Eu(null!=(c=x.type)?c:w,i),R=_.get(v);if(y){e=yT(e,xl.includes(A)?null!=(p=null==(d=null==t?void 0:t.general)?void 0:d.maxNumOfSlices)?p:null==(u=null==I?void 0:I.general)?void 0:u.maxNumOfSlices:1/0)}const D=xt(Ct(xt(Ct(xt({},(0,r.mergeObjects)(xt(xt({},I.series),m),C)),{visibleInLegend:"visible"in C?C.visible:void 0,xValueType:QC(e.seriesType)}),b),{type:w}),VE(e,t,C,i)),{seriesMetadata:O,dataPoints:N}=JC(e,A,t,R,n,s,null==T?void 0:T.resultContext.quantizationGranularity,E,i);let M={};return y&&!S&&(M={color:MT(o,null!=(h=xt(xt({},Wl),a.colorSchemes)[I.color.family])?h:[])}),Ct(xt(xt(xt(xt({},M),D),O),x),{dataPoints:N,zIndex:[ce.ChartType.LINE,ce.ChartType.SPLINE,ce.ChartType.STEP_LINE].includes(w)?100:1})}));if(y&&RT(t)&&!S&&(T=_x(T)),De.currentUserHelper.hasFeatureFlag("UIChartFunnelNMT")&&y&&IT(t)&&(null==(u=t.general)?void 0:u.sortBy)){const e=null==(p=t.general)?void 0:p.sortBy;if(1===T.length||e===nc){const i=(null==(h=t.general)?void 0:h.sortDir)===sc?-1:1;T[0].dataPoints.sort(e===rc?(e,t)=>"number"==typeof e.y&&"number"==typeof t.y?(e.y-t.y)*i:0:(e,t)=>(0,r.naturalSortComparator)("string"==typeof e.label?e.label:"","string"==typeof t.label?t.label:"")*i)}}return T.length>1&&T.sort(((e,t)=>{var i,r;return(null!=(i=e.zIndex)?i:0)-(null!=(r=t.zIndex)?r:0)})),{data:T}},legend:({overriddenSettings:e,preview:t=!1,isEditMode:i=!1})=>{var r;let n=$E(e,"legend");return De.currentUserHelper.hasFeatureFlag("UIHideLegendForCategoricalChartByDefault")&&t&&!i&&void 0===(null==(r=null==e?void 0:e.legend)?void 0:r.enabled)&&(n=Ct(xt({},n),{enabled:!1})),{legend:n}},time:({visualData:e,overriddenSettings:t,theme:i=il.LIGHT,timeZone:r,showTzOffset:n})=>AT(t)?{time:{timeZoneOffset:-Ie.userDateService.getDiffBetweenTimeZones(Date.now())}}:{time:{timeZoneOffset:0}}},aA=e=>{var t,i;let r;switch(e.colorMode){case"opacity":r=sl("#ffffff",null!=(t=e.baseOpacityColor)?t:cl,7),r.shift();break;case"spectrum":default:r=ol[null!=(i=e.colorSchemeName)?i:ll]}return r.map(((e,t)=>({value:t/(r.length-1),color:e})))},sA={patchSettings:({overriddenSettings:e,visualData:t})=>{var i,r;const n=(null!=(i=null==e?void 0:e.general)?i:{}).metricName||DT(null!=(r=t.series)?r:[]);return{metricName:null!=n?n:null}},series:e=>{var t;const{visualData:i,overriddenSettings:{general:n,color:a}}=e,{metricName:s,xAxisBucketSize:o,yAxisBucketSize:l}=null!=n?n:{},c=null!=(t=i.series)?t:[],d=s||DT(c),u="inTimeHistogram-1",p=c.filter((({metaData:e})=>{const{data:t}=e;return t.metric===d||t.series===d})).map((e=>Ct(xt({},e),{transformBy:u,chartType:"heatmap",heatmapColorThresholds:aA(null!=a?a:ul)}))),h=(0,Me.findMinMax)(p),m=o?(0,r.convertFormattedTimeDurationToMilliseconds)(o):void 0;return{transformPipes:[{type:"inTimeHistogram",xBucketSize:m,yBucketSize:l,id:u}],data:p,type:"heatmap",minMaxConstraints:h,autoXBucketSize:(0,r.formatSeconds)(Math.round((0,Me.getAutoXBucketSize)(p,h)/1e3)),autoYBucketSize:(0,Me.getAutoYBucketSize)(h),xAxisBucketSize:m,yAxisBucketSize:l}},legend:({overriddenSettings:e})=>({legend:$E(e,"legend")}),axes:({visualData:e,overriddenSettings:t,theme:i})=>{var r,n,a,s,o,l,d,u,p,h,m,g,y;const{axes:v={x:{},y:{},y2:{}}}=e;let f;try{f=Ie.timeZoneServiceV2.getUserTimeZone()}catch(e){f="Asia/Calcutta"}const _=null==(r=PC.userPreferencesModel)?void 0:r.getDateLocaleFormat(),S=kT(null!=(n=e.series)?n:[]);t=Ct(xt({},t),{axes:Ct(xt({},t.axes),{axisX:Ct(xt({valueFormatString:"hh:mm"},null==(a=t.axes)?void 0:a.axisX),{labelFormatter:(0,B.Z)(ce.labelDateFormatter,{timeZone:f,dateLocaleFormat:_,boundary:S,dateOnFirstLabel:!0}),labelAngle:0,type:ce.AxisType.DATETIME_CJS})})});const b=[ql,jl,Ql].includes(null!=(l=null==(o=null==(s=t.axes)?void 0:s.axisY)?void 0:o.gridColor)?l:"")?(0,c.Z)(null==(d=t.axes)?void 0:d.axisY,["gridColor"]):null==(u=t.axes)?void 0:u.axisY,E=[ql,jl,Ql].includes(null!=(m=null==(h=null==(p=t.axes)?void 0:p.axisY2)?void 0:h.gridColor)?m:"")?(0,c.Z)(null==(g=t.axes)?void 0:g.axisY2,["gridColor"]):null==(y=t.axes)?void 0:y.axisY2;t=Ct(xt({},t),{axes:Ct(xt({},t.axes),{axisY:xt({},b),axisY2:xt({},E)})});const{axisX:T,axisY:x,axisY2:C}=$E(t,"axes",i),A=(e,t)=>Array.isArray(e)?e.map((e=>xt(xt({},e),t))):[],w=fl(),I=fl();return x.labelFormatter=e=>w(e.value,e.axis.unit,e.axis.unitDecimals),C.labelFormatter=e=>I(e.value,e.axis.unit,e.axis.unitDecimals),{axisX:A(v.x,T),axisY:A(v.y,x),axisY2:A(v.y2,C)}}},oA=(e,t)=>{e.count+=t.count,(0,G.Z)(e.sum)&&(e.sum=e.sum+t.sum),(0,G.Z)(e.avg)&&(e.avg=e.sum/e.count),(0,G.Z)(e.min)&&(e.min=Math.min(e.min,t.min)),(0,G.Z)(e.max)&&(e.max=Math.max(e.max,t.max)),(0,G.Z)(e.latest)&&(e.latest=t.latest)},lA=(0,oe.default)((e=>{const t=new lt.Z(xt({radius:Me.MAX_CLUSTER_RADIUS,reduce:oA},De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT")?{maxZoom:24}:void 0));return t.load(e.features),t})),cA=(e,t)=>{const i=[2,3.5,6],r=lA(e);let n=[];for(let e=0;e<i.length&&n.length<2;e++){const a=i[e],s=r.getClusters(Me.WORLD_BOUNDS,Math.floor(a));s.length>2&&(n=KT((0,at.uf)(s),t))}n.length<2&&(n=KT(e,t));const a=n.findIndex((e=>isNaN(e)||void 0===e));return a>-1?n.slice(0,a):n};const dA=(e,t)=>{const i=De.currentUserHelper.hasFeatureFlag("MapboxHeatMapChart")?Ol:Dl;return function(e,t){if(1===e.length)return[{value:null,color:t[t.length-1]}];const i=[];for(let r=-1,n=0;r<e.length||n<t.length;r++,n++){const a=-1===r?null:e[r],s=t[n];i.push({value:a,color:s})}return i}(cA(e,t),i).map(((e,t)=>Ct(xt({},e),{id:Date.now()+100*t})))},uA=({mapSettings:e,series:t,layerSettings:i,resultLayer:r})=>{var n,a,s,o,l,c,d;if(r.layerType!==el.CLUSTER)return;const u=i;if(r.sizeSource=null,u.hasCustomSizeMetric){const i=null!=(s=null!=(a=null==(n=u.sizeMetric)?void 0:n.metricName)?a:u.metricName)?s:DT(t);"string"==typeof i&&(r.sizeSource={geoJSON:BT(t,{latitudeField:e.latitudeField,longitudeField:e.longitudeField,metric:i}),metricName:i,aggregationType:null!=(c=null!=(l=null==(o=u.sizeMetric)?void 0:o.metricAggregationType)?l:u.metricAggregationType)?c:"count"})}const p=null!=(d=r.sizeSource)?d:r;p.geoJSON.features.length&&(r.sizeSteps=(e=>{const t=cA(e.geoJSON,e.aggregationType),i=e.geoJSON.features.reduce(((t,{properties:i})=>{var r;return Math.min(t,null!=(r=i[e.aggregationType])?r:t)}),t[0]);return i<t[0]?[i,...t]:t})(p))},pA=e=>e.length>Yl?e.slice(0,Yl):e,hA=(e,t)=>{var i;return(e=>void 0===e.layerType||e.layerType===el.CLUSTER)(e)?(null!=(i=e.colorCalculationMode)?i:tl.AUTO)===tl.AUTO?{colorCalculationMode:tl.AUTO,colorThresholds:e.colorThresholds?GT(pA(e.colorThresholds),t):t,defaultColorThresholds:t}:e.colorThresholds?{colorCalculationMode:tl.FIXED,colorThresholds:pA(e.colorThresholds),defaultColorThresholds:t}:{colorCalculationMode:tl.AUTO,colorThresholds:t,defaultColorThresholds:t}:{colorThresholds:null,defaultColorThresholds:t}},mA=(e,t)=>{var i,r;return null!=(i=null==e?void 0:e.features[0])&&i.properties.isMultiMetric&&null!=(r=null==t?void 0:t.metricAggregationType)?r:"count"},gA={series:e=>nA.series(e),patchSettings:({overriddenSettings:e,visualData:t})=>{var i,r,n,a,s,o,l,c,d,u,p;const h=null!=(i=null==e?void 0:e.map)?i:{},m=null!=(r=h.latitudeField)?r:"latitude",g=null!=(n=h.longitudeField)?n:"longitude",y=null!=(a=t.series)?a:[],v=null!=(s=h.mainMetric)?s:{},f=null!=(o=h.secondaryMetric)?o:{},_=null!=(c=null!=(l=v.metricName)?l:DT(y))?c:null,S=null!=(d=null==f?void 0:f.metricName)?d:null,b=BT(y,{latitudeField:m,longitudeField:g,metric:_}),E=mA(b,h.mainMetric),T=S?BT(y,{latitudeField:m,longitudeField:g,metric:S}):null,x=mA(T,h.secondaryMetric),C=dA(b,E),A=T?dA(T,x):null,w=xt({layerType:null!=(u=v.layerType)?u:el.CLUSTER,metricName:_,aggregationType:E,geoJSON:b},hA(v,C)),I=S?xt({layerType:null!=(p=f.layerType)?p:el.CLUSTER,metricName:S,aggregationType:x,geoJSON:T},hA(f,A)):null,R={latitudeField:m,longitudeField:g};return uA({mapSettings:R,series:y,layerSettings:v,resultLayer:w}),f&&I&&uA({mapSettings:R,series:y,layerSettings:f,resultLayer:I}),{mapSettings:R,mapLayers:{main:w,secondary:I}}}},yA={series:({visualData:e,overriddenSettings:t,timeZone:i,showTzOffset:n})=>{var a,s;const o=null!=(a=e.series)?a:[],l=null==(s=t.svp)?void 0:s.noDataString;if(!o||!o.length)return l===Kc.noDataString?{}:{data:{id:"single"}};const c=(0,r.ensureDefined)((0,K.Z)(o,(e=>e.queryId))).queryId,d=o.filter((e=>e.queryId===c));if(d.length>1)return{data:{id:"single",multipleSeriesError:!0,queryId:c}};const{aggregateInfo:u,dataPoints:p,valueType:h}=d[0];let m=p.map((e=>{var t;const r=jE(e,d[0],!1,n,i);return{value:e.y,y:e.y,x:null!=(t=r.x)?t:e.x,timestamp:r.x||e.x,xAxisValues:e.xAxisValues}}));h===Me.SeriesValueType.Double&&(m=m.filter((e=>e.timestamp)));const{name:g,queryId:y,metaData:v}=d[0];return{data:{id:"single",values:{Latest:`${u.latest}`,Average:`${u.avg}`,Minimum:`${u.min}`,Maximum:`${u.max}`,Sum:`${u.sum}`,DataPoints:m,Count:u.count},valueType:h,name:vT({name:g,queryId:y,metaData:v.data,overriddenSettings:t}),metaData:v,xAxisKeys:d[0].xAxisKeys,queryId:y,aggregateInfo:u}}},settings:({overriddenSettings:e,theme:t})=>{var i,r;const n=$E(e,"svp");return{settings:Ct(xt({},n),{visualizations:vA(e,t),option:null!=(r=null==(i=e.svp)?void 0:i.option)?r:"Average"})}}};function vA(e,t){var i,r;const n=e.svp,a={};if(n){if(n.sparkline&&n.sparkline.show){const e={color:t===il.BRANDDARK?n.sparkline.color===zl?Gl:n.sparkline.color||Gl:n.sparkline.color||Kl};a.sparkline=e}if(n.gauge&&n.gauge.show){const e=Ct(xt(xt({},Zc),n.gauge),{min:null!=(i=n.gauge.min)?i:null==Zc?void 0:Zc.min,max:null!=(r=n.gauge.max)?r:null==Zc?void 0:Zc.max}),{min:t,max:s}=e,o=At(e,["min","max"]),l=Ct(xt({},o),{range:[t,s],showThreshold:!0,showThresholdMarker:!0});a.gauge=l}}return a}const fA=["avg","latest","max","min","sum","count"];const _A=e=>(t,i)=>{const{aggregateInfo:r,dataPoints:n,metaData:a,name:s,queryId:o,seriesType:l}=i,c=vT({name:s,queryId:o,metaData:a.data,overriddenSettings:e}),d=c===s?void 0:c;return l===Go.TIMESERIES?t.push({aggregateInfo:r,metaData:a,queryId:o,dataPoints:n,nameFromAlias:d,name:s}):t.push(...function({queryId:e,metaData:t,dataPoints:i},r,n){return i.map((({xAxisValues:i,y:a})=>({metaData:t,xAxisValues:i,queryId:e,name:r,nameFromAlias:n,aggregateInfo:fA.reduce(((e,t)=>(e[t]=a,e)),{})})))}(i,s,d)),t},SA={data:({visualData:e,overriddenSettings:t})=>{var i,r,n,a,s;let o=null!=(i=e.series)?i:[];o=o.map((e=>Ct(xt({},e),{dataPoints:e.dataPoints.filter((e=>null!==e.y&&void 0!==e.y&&""!==e.y))})));const l=null!=(n=null==(r=t.honeyComb)?void 0:r.groupBy)?n:Ec.groupBy,c=o.filter((e=>e.valueType!==Me.SeriesValueType.String)),d=(0,y.Z)(c,(({metaData:{data:e}})=>l.map((({value:t=""})=>`${e[t]||""}`))));return{data:(0,b.Z)(d,((e,i)=>({dataPoints:e.reduce(_A(t),[]),title:i.replace(/\,$/,"")}))),dimension:null!=(s=null==(a=t.honeyComb)?void 0:a.aggregationType)?s:Ec.aggregationType}},thresholds:({overriddenSettings:e})=>{var t,i;return{thresholds:null!=(i=null==(t=e.honeyComb)?void 0:t.thresholds)?i:Ec.thresholds}},shape:({overriddenSettings:e})=>{var t,i;return{shape:null!=(i=null==(t=e.honeyComb)?void 0:t.shape)?i:Ec.shape}}},bA=e=>t=>{var i;return{field:t,headerName:null!=(i=e[t])?i:t}};function EA(e,t){return`${e}:${t}`}function TA(e){const t=e.indexOf(":");return e.substring(t+1)}const xA=(0,oe.default)(((e,t)=>{if(!t)return e;const i=t.reduce(((e,t,i)=>(e[t]=i,e)),{});return e.sort(((e,t)=>{const r=TA(e.field),n=TA(t.field);return i[r]<i[n]?-1:1}))})),CA=e=>{const t=vu,i=null==e?void 0:e.fontSize;return void 0===i?t.rowStyle["font-size"]:`${i}px`},AA={columnOptions:({visualData:e,overriddenSettings:t,theme:i})=>{var r,n,a;const s=null!=(r=e.series)?r:[],[o]=s,l=null==o?void 0:o.seriesType,c=null!=(a=null==(n=s[0])?void 0:n.xAxisKeys)?a:[],d=xt(xt({},s.reduce(((e,i)=>(e[EA(i.queryId,i.name)]=vT({name:i.name,queryId:i.queryId,metaData:i.metaData.data,overriddenSettings:t}),e)),{})),c.reduce(((e,i)=>(e[i]=vT({name:i,metaData:nT(s),overriddenSettings:t}),e)),{})),u=c.map(bA(d)),p=l===Go.TABLE?[]:s.map((({queryId:e,name:t})=>bA(d)(EA(e,t)))),h=qC(t,e.series),m=h?((e,t,i)=>{const{critical:r,warning:n,fillRemaining:a}=e,s=CA(t.general),o=[il.DARK,il.BRANDDARK].includes(null!=i?i:il.LIGHT)?"dark":"light";return e=>{const t=s?{"font-size":s}:{};return r.some((t=>VC(e.value,t)))?t.backgroundColor=(0,ce.hexToRgbA)(Wc[o].critical,Hc[o]):n.some((t=>VC(e.value,t)))?t.backgroundColor=(0,ce.hexToRgbA)(Wc[o].warning,Hc[o]):a&&(t.backgroundColor=(0,ce.hexToRgbA)(Wc[o].remainingArea,Hc[o])),t}})(h,t,i):void 0,g=[...u,...h?p.map((e=>Ct(xt({},e),{cellStyle:m}))):p];return{columnOptions:xA(g,e.fieldOrdering)}},gridOptions:({overriddenSettings:{general:e}})=>{const t=vu,i=CA(e),r=null==e?void 0:e.paginationPageSize;return{gridOptions:{paginationPageSize:(0,L.Z)(r)||Number.isNaN(+r)?t.paginationPageSize:+r,rowStyle:{"font-size":i}}}},data:({visualData:e,overriddenSettings:t,timeZone:i})=>{var n,a,s,o,l;const c=Symbol("value"),d=Symbol("label"),u=e.series,[p]=u,h=aT(null==p?void 0:p.source),m=wT(t),g=null==(n=t.general)?void 0:n.sortBy,y=m&&Boolean(g)&&(null==u?void 0:u.length)>0,v=u.length,f={};for(let e=0;e<v;e++){const{dataPoints:n,name:o,seriesType:l,queryId:p}=u[e],m=null!=(a=u[e].xAxisKeyTypes)?a:{},g=n.length;for(let e=0;e<g;e++){const{xAxisValues:a,y:u,x:g}=n[e],v=l===Go.TIMESERIES;let _="";v?_=`${bT}=${g}`:(_=(0,Y.Z)(a,((e,t,i)=>e+=`${i}=${t}_`),""),h&&(null==(s=null==t?void 0:t.general)?void 0:s.mode)===Yo.DISTRIBUTION||(_=`${_}_${e}`));let S={};(0,G.Z)(g)&&(0,G.Z)(u)&&v?S={_timeslice:g}:v||(S=(0,Y.Z)(a,((e,t,i)=>{let r="";return t&&(r=m[i]!==qu.Double||Number.isNaN(t)?t:parseFloat(t)),e[i]=r,e}),{})),l!==Go.TABLE&&null!=u&&(S[c]=u,S[EA(p,o)]=u),S[bT]&&(S[bT]=ET(S[bT].toString(),bT,i,!1,r.DATE_FORMAT_PRESET.DATE_TIME_24_HOURS));for(const e in S)f[_]||(f[_]={}),(0,r.withIndex)(f[_])[e]=S[e];y&&((0,r.withIndex)(f[_])[d]=_,S.hasOwnProperty(c)&&((0,r.withIndex)(f[_])[c]=S[c]))}}const _=Object.values(f);if(De.currentUserHelper.hasFeatureFlag("UIChartFunnelNMT")&&y){const e=null==u?void 0:u[0].queryId,i=null!=(o=null==u?void 0:u.some((({queryId:t})=>t!==e)))&&o;if(g===nc||!i){const e=(null==(l=t.general)?void 0:l.sortDir)===sc?-1:1;_.sort(g===rc?(t,i)=>(t[c]-i[c])*e:(t,i)=>{var n,a;return(0,r.naturalSortComparator)(null!=(n=t[d])?n:"",null!=(a=i[d])?a:"")*e})}}return{data:_}}},wA=e=>{const t=e.general;if(t){const i=t,{backgroundColor:r}=i,n=At(i,["backgroundColor"]);e=Ct(xt({},e),{general:n})}return $E(e,"general")},IA={[np.DISTRIBUTION]:nA,[np.HONEY_COMB]:SA,[np.MAP]:gA,[np.HEATMAP]:sA,[np.SINGLE_VALUE_METRICS]:yA,[np.TABLE]:AA,[np.TIME_SERIES]:nA},RA="A";function DA(e,t){return{type:"BeginBoundedTimeRange",from:{type:"EpochTimeRangeBoundary",epochMillis:e},to:{type:"EpochTimeRangeBoundary",epochMillis:t}}}const OA={queryId:RA,seriesType:Go.TIMESERIES,xAxisKeys:["_timeslice"],name:"nite-zk-1",dataPoints:[{x:1535171715e3,y:4,isPointConnected:!0},{x:153517173e4,y:2,isPointConnected:!0}],metaData:{data:{_sourceHost:"nite-zk-1",metric:"avg(CPU_User)"}},aggregateInfo:{count:2,sum:6,avg:3,latest:2,max:4,min:2},valueType:Me.SeriesValueType.Double,source:"Metrics"},NA={queryId:RA,seriesType:Go.TIMESERIES,xAxisKeys:["_timeslice"],name:"nite-zk-1-shifted",dataPoints:[{x:1535171715500,y:4,isPointConnected:!0},{x:1535171735e3,y:2,isPointConnected:!0}],metaData:{data:{_sourceHost:"nite-zk-1",metric:"avg(CPU_User)"}},aggregateInfo:{count:2,sum:6,avg:3,latest:2,max:4,min:2},valueType:Me.SeriesValueType.Double,source:"Metrics"},MA={name:"_count",queryId:RA,dataPoints:[{y:40,xAxisValues:{_sourceCategory:"stream"}},{y:0,xAxisValues:{_sourceCategory:"view"}},{y:50,xAxisValues:{_sourceCategory:"katta"}},{y:60,xAxisValues:{_sourceCategory:"forge"}},{y:30,xAxisValues:{_sourceCategory:"search"}}],xAxisKeys:["_sourceCategory"],metaData:{data:{source:"Logs",series:"_count"}},aggregateInfo:{sum:180,avg:36,latest:10,max:40,min:0,count:10},valueType:Me.SeriesValueType.Double,source:"Logs"},kA={name:"CPU_Idle",queryId:RA,dataPoints:[{y:100,xAxisValues:{_source:"wow this source name is definitely longer than sixty characters"}}],xAxisKeys:["_source"],metaData:{data:{}},aggregateInfo:{sum:180,avg:36,latest:10,max:40,min:0,count:10},valueType:Me.SeriesValueType.Double,seriesType:Go.NONTIMESERIES,source:"Metrics"},LA=[{queryId:RA,name:"_count_upper",dataPoints:[{x:1580751e6,y:43152.1305890462,xAxisValues:{}},{x:15807519e5,y:41786.84654447916,xAxisValues:{}},{x:15807528e5,y:40669.295249411996,xAxisValues:{}},{x:15807537e5,y:41546.11641979771,xAxisValues:{}},{x:15807546e5,y:41437.17933010194,xAxisValues:{}},{x:15807555e5,y:42030.20029794082,xAxisValues:{}},{x:15807564e5,y:75109.40607308141,xAxisValues:{}}],aggregateInfo:{max:75109.40607308141,min:40669.295249411996,avg:46533.02492912275,sum:325731.17450385925,latest:75109.40607308141,count:7},metaData:{data:{source:"Logs",series:"_count_upper"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count_std",dataPoints:[{x:1580751e6,y:9528.143529682067,xAxisValues:{}},{x:15807519e5,y:8696.34884815972,xAxisValues:{}},{x:15807528e5,y:8878.198416470665,xAxisValues:{}},{x:15807537e5,y:9136.838806599239,xAxisValues:{}},{x:15807546e5,y:8920.859776700649,xAxisValues:{}},{x:15807555e5,y:9403.43343264694,xAxisValues:{}},{x:15807564e5,y:18492.535357693803,xAxisValues:{}}],aggregateInfo:{max:18492.535357693803,min:8696.34884815972,avg:10436.62259542187,sum:73056.35816795309,latest:18492.535357693803,count:7},metaData:{data:{source:"Logs",series:"_count_std"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count_violation",dataPoints:[{x:1580751e6,y:0,xAxisValues:{}},{x:15807519e5,y:0,xAxisValues:{}},{x:15807528e5,y:0,xAxisValues:{}},{x:15807537e5,y:0,xAxisValues:{}},{x:15807546e5,y:0,xAxisValues:{}},{x:15807555e5,y:1,xAxisValues:{}},{x:15807564e5,y:0,xAxisValues:{}}],aggregateInfo:{max:1,min:0,avg:.14285714285714285,sum:1,latest:0,count:7},metaData:{data:{source:"Logs",series:"_count_violation"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count",dataPoints:[{x:1580751e6,y:14747,xAxisValues:{}},{x:15807519e5,y:5686,xAxisValues:{}},{x:15807528e5,y:35370,xAxisValues:{}},{x:15807537e5,y:13844,xAxisValues:{}},{x:15807546e5,y:5318,xAxisValues:{}},{x:15807555e5,y:65417,xAxisValues:{},markerSize:10,markerType:"triangle",markerColor:"#ED3CPE",markerBorderColor:"#ED3CPE"},{x:15807564e5,y:12994,xAxisValues:{}}],aggregateInfo:{max:65417,min:5318,avg:21910.85714285714,sum:153376,latest:12994,count:7},metaData:{data:{source:"Logs",series:"_count"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count_indicator",dataPoints:[{x:1580751e6,y:0,xAxisValues:{}},{x:15807519e5,y:0,xAxisValues:{}},{x:15807528e5,y:0,xAxisValues:{}},{x:15807537e5,y:0,xAxisValues:{}},{x:15807546e5,y:0,xAxisValues:{}},{x:15807555e5,y:1,xAxisValues:{}},{x:15807564e5,y:0,xAxisValues:{}}],aggregateInfo:{max:1,min:0,avg:.14285714285714285,sum:1,latest:0,count:7},metaData:{data:{source:"Logs",series:"_count_indicator"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count_error",dataPoints:[{x:1580751e6,y:179.29999999999927,xAxisValues:{}},{x:15807519e5,y:-10011.8,xAxisValues:{}},{x:15807528e5,y:21335.3,xAxisValues:{}},{x:15807537e5,y:-291.60000000000036,xAxisValues:{}},{x:15807546e5,y:-9356.6,xAxisValues:{}},{x:15807555e5,y:51597.1,xAxisValues:{}},{x:15807564e5,y:-6637.799999999999,xAxisValues:{}}],aggregateInfo:{max:51597.1,min:-10011.8,avg:6687.699999999999,sum:46813.899999999994,latest:-6637.799999999999,count:7},metaData:{data:{source:"Logs",series:"_count_error"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count_mean",dataPoints:[{x:1580751e6,y:14567.7,xAxisValues:{}},{x:15807519e5,y:15697.8,xAxisValues:{}},{x:15807528e5,y:14034.7,xAxisValues:{}},{x:15807537e5,y:14135.6,xAxisValues:{}},{x:15807546e5,y:14674.6,xAxisValues:{}},{x:15807555e5,y:13819.9,xAxisValues:{}},{x:15807564e5,y:19631.8,xAxisValues:{}}],aggregateInfo:{max:19631.8,min:13819.9,avg:15223.157142857142,sum:106562.09999999999,latest:19631.8,count:7},metaData:{data:{source:"Logs",series:"_count_mean"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"},{queryId:RA,name:"_count_lower",dataPoints:[{x:1580751e6,y:-14016.730589046201,xAxisValues:{}},{x:15807519e5,y:-10391.24654447916,xAxisValues:{}},{x:15807528e5,y:-12599.895249411991,xAxisValues:{}},{x:15807537e5,y:-13274.916419797713,xAxisValues:{}},{x:15807546e5,y:-12087.979330101944,xAxisValues:{}},{x:15807555e5,y:-14390.40029794082,xAxisValues:{}},{x:15807564e5,y:-35845.8060730814,xAxisValues:{}}],aggregateInfo:{max:-10391.24654447916,min:-35845.8060730814,avg:-16086.710643408462,sum:-112606.97450385924,latest:-35845.8060730814,count:7},metaData:{data:{source:"Logs",series:"_count_lower"}},seriesType:"timeseries",xAxisKeys:["_timeslice"],source:"Logs"}],PA=[...LA.slice(0,3),Ct(xt({},LA[3]),{dataPoints:[Ct(xt({},LA[3].dataPoints[0]),{outlierData:{anomalyScore:0,baseline:30,unit:25,lowerBound:0,upperBound:50,isOutlier:!0}})]}),...LA.slice(4,8)],FA={type:"honeyComb",thresholds:[{from:0,to:50,color:"#69DB4A"},{from:50,to:80,color:"#E1C60E"},{from:80,to:100,color:"#C73A25"}],shape:Jo.HEXAGON,data:[{dataPoints:[{queryId:RA,aggregateInfo:{max:26.129648939867916,min:.5042162914022429,avg:8.157610896275266,sum:65.26088717020212,latest:22.76352288488211,count:8},metaData:{data:{_sourceHost:"nite-zk-1",source:"Metrics",metric:"avg(CPU_User)"}}},{queryId:RA,aggregateInfo:{max:25.69534142771032,min:.36577067029601906,avg:7.87601663346801,sum:63.00813306774408,latest:23.607038123167158,count:8},metaData:{data:{_sourceHost:"nite-zk-2",source:"Metrics",metric:"avg(CPU_User)"}}},{queryId:RA,aggregateInfo:{max:30.737134909596662,min:1.1813137640952212,avg:5.241439718922034,sum:41.93151775137627,latest:30.737134909596662,count:8},metaData:{data:{_sourceHost:"nite-zk-3",source:"Metrics",metric:"avg(CPU_User)"}}}],title:"avg(CPU_User)"}],dimension:"avg"},UA={type:"honeyComb",thresholds:[],shape:Jo.HEXAGON,series:[{aggregateInfo:{max:26.129648939867916,min:.5042162914022429,avg:8.157610896275266,sum:65.26088717020212,latest:22.76352288488211,count:8},metaData:{data:{_sourceHost:"nite-zk-1",source:"Metrics",metric:"avg(CPU_User)"}}},{aggregateInfo:{max:25.69534142771032,min:.36577067029601906,avg:7.87601663346801,sum:63.00813306774408,latest:23.607038123167158,count:8},metaData:{data:{_sourceHost:"nite-zk-2",source:"Metrics",metric:"avg(CPU_User)"}}},{aggregateInfo:{max:30.737134909596662,min:1.1813137640952212,avg:5.241439718922034,sum:41.93151775137627,latest:30.737134909596662,count:8},metaData:{data:{_sourceHost:"nite-zk-3",source:"Metrics",metric:"avg(CPU_User)"}}}],dimension:"avg"},VA=[{x:1606186665e3,y:"22.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.8916451401205645,baseline:30,unit:26.91653766738954,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618667e4,y:"29.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:26.8,unit:24.684002916869066,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606186725e3,y:"17.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:1.69089845259911,baseline:28.8,unit:20.935615586841443,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618673e4,y:"30.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.5403758258679826,baseline:25.6,unit:24.42744358298671,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606186785e3,y:"23.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.522152245559189,baseline:27.2,unit:24.130893062628253,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618679e4,y:"40.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:2.9492809021388995,baseline:24.2,unit:16.07171428317466,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606186845e3,y:"26.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:27.8,unit:25.754611237601694,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618685e4,y:"33.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.6756071695074168,baseline:27.2,unit:25.754611237601715,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606186905e3,y:"25.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.8206345767423128,baseline:30.4,unit:19.740820651634515,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618691e4,y:"42.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:1.7945149694720348,baseline:29.4,unit:21.064187617850386,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606186965e3,y:"21.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:1.5659052679113434,baseline:33.2,unit:23.37306141693891,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618697e4,y:"29.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:29.4,unit:24.793144213673294,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187025e3,y:"23.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.8682431421244593,baseline:30,unit:24.186773244895647,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618703e4,y:"33.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.5976143046671968,baseline:28,unit:25.099800796022265,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187085e3,y:"28.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:29.6,unit:25.242820761555144,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618709e4,y:"41.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:2.948114534807766,baseline:26.8,unit:14.449913494550767,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187145e3,y:"29.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:30.8,unit:20.169283576765892,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618715e4,y:"42.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:1.665899528464446,baseline:30.8,unit:20.169283576765892,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187205e3,y:"21.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:2.066783378462122,baseline:34.6,unit:19.740820651634515,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618721e4,y:"35.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:32.2,unit:27.11641569234397,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187265e3,y:"21.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:1.4377717134510617,baseline:33.6,unit:26.290682760247968,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618727e4,y:"28.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:29.6,unit:27.298351598585576,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187325e3,y:"22.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.8107915596386478,baseline:29.4,unit:27.380650101851153,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618733e4,y:"46.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:3.3729725317191486,baseline:25.4,unit:18.322117781522984,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187385e3,y:"19.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:1.1005378673132942,baseline:30.4,unit:31.07571399018854,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618739e4,y:"34.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.6164014101531435,baseline:27.2,unit:33.095316889251876,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187445e3,y:"26.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.35404409643746704,baseline:29.8,unit:32.19937887599694,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618745e4,y:"29.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:0,baseline:29.4,unit:32.56071252291635,lowerBound:0,upperBound:50,isOutlier:!1}},{x:1606187505e3,y:"28.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:.2776499214107408,baseline:30.8,unit:30.253925365148874,lowerBound:0,upperBound:50,isOutlier:!1}},{x:160618751e4,y:"45.0",isFilled:!1,xAxisValues:{},outlierData:{anomalyScore:3.2661925032082006,baseline:27.2,unit:16.349311912126467,lowerBound:0,upperBound:50,isOutlier:!1}}],BA=100;var $A=(e=>(e.MARKER_SIZE="onMarkerSizeChange",e.XY_DIMENSION="onXYDimensionChange",e.VISUAL_TYPE="onVisualTypeChange",e.SHOW_COLOR_AS="onShowColorAsChange",e))($A||{});const HA=(0,r.memoize)((e=>[{componentType:ce.IFormFieldComponentTypes.COLOR_SCHEME_SELECTOR,label:r.i18nUtil.get("sharedAnalytics.colorFamily"),name:"colorFamily",defaultValue:Jc.color.family,onChangeFnName:ce.OnChangeFn.COLOR_SELECTOR,customColorSchemes:e}]),{maxNumberOfResults:100}),WA=(0,r.memoize)((e=>({label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType."+(e?"grouped":"default")),value:le.ChartDisplayTypeOptions.DEFAULT})),{maxNumberOfResults:3}),qA=(0,oe.default)((()=>[WA(),{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.smooth"),value:le.ChartDisplayTypeOptions.SMOOTH},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.stepped"),value:le.ChartDisplayTypeOptions.STEPPED}])),jA=(0,oe.default)((()=>[WA(),{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.smooth"),value:le.ChartDisplayTypeOptions.SMOOTH}])),QA=(0,oe.default)((()=>[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.stackedPercent"),value:le.ChartDisplayTypeOptions.STACKED_PERCENT},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.stacked"),value:le.ChartDisplayTypeOptions.STACKED}])),zA=e=>e?[{name:"groupBy",label:r.i18nUtil.get("sharedAnalytics.groupBy"),optional:!0,componentType:ce.IFormFieldComponentTypes.AUTOCOMPLETE,items:e.groupByKeys.map((e=>({label:e,value:e}))),defaultValue:[],onChangeFnName:ce.OnChangeFn.AUTOCOMPLETE,useStringValue:!0}]:[],GA=e=>{const t=Eu(e);return{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineThickness"),name:"lineThickness",defaultValue:t.series.lineThickness,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",1),value:1},{type:"integer",message:r.i18nUtil.get("sharedAnalytics.integerValue")}]))}},KA=(0,oe.default)((()=>({componentType:ce.IFormFieldComponentTypes.SELECT,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineDashType"),name:"lineDashType",defaultValue:Jc.series.lineDashType,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.dot"),value:le.LineDashStyleOptions.DOT},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.solid"),value:le.LineDashStyleOptions.SOLID},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.dash"),value:le.LineDashStyleOptions.DASH},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.dashDot"),value:le.LineDashStyleOptions.DASH_DOT}]}))),YA=e=>{const t=Eu(e);return{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"markerSize",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.markerSize"),defaultValue:t.series.markerSize,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0},{type:"integer",message:r.i18nUtil.get("sharedAnalytics.integerValue")}]))}},ZA=e=>{const t=Eu(e),i=[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.circle"),value:le.MarkerTypeOptions.CIRCLE},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.square"),value:le.MarkerTypeOptions.SQUARE},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.triangle"),value:le.MarkerTypeOptions.TRIANGLE},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.cross"),value:le.MarkerTypeOptions.CROSS}];return e!==ce.ChartType.SCATTER&&e!==ce.ChartType.BUBBLE&&i.unshift({label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.none"),value:le.MarkerTypeOptions.NONE}),{componentType:ce.IFormFieldComponentTypes.SELECT,name:"markerType",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.markerType"),defaultValue:t.series.markerType,onChangeFnName:"onMarkerSizeChange",choices:i}},XA=e=>{const t=Eu(e);return{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"fillOpacity",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.fillOpacity"),defaultValue:t.series.fillOpacity,onChangeFnName:ce.OnChangeFn.TEXTFIELD,inputProps:{step:.01},validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0},{type:"maxValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",1),value:1}]))}},JA=(0,oe.default)((()=>[{componentType:ce.IFormFieldComponentTypes.AUTOCOMPLETE,name:"xDimension",optional:!0,label:r.i18nUtil.get("sharedAnalytics.xAxisDimension"),defaultValue:[],onChangeFnName:"onXYDimensionChange",multiselect:!1,items:[]},{componentType:ce.IFormFieldComponentTypes.AUTOCOMPLETE,name:"yDimension",optional:!0,label:r.i18nUtil.get("sharedAnalytics.yAxisDimension"),defaultValue:[],onChangeFnName:"onXYDimensionChange",multiselect:!1,items:[]}])),ew=(0,oe.default)((()=>[...JA(),{componentType:ce.IFormFieldComponentTypes.AUTOCOMPLETE,name:"zDimension",optional:!0,label:r.i18nUtil.get("sharedAnalytics.zAxisDimension"),defaultValue:[],onChangeFnName:"onXYDimensionChange",multiselect:!1,items:[]}])),tw=(e,t)=>{const i=YA(e),n=r.i18nUtil.get("sharedAnalytics.visualizationSettings.validation.markerSizeDisconnectedPointsLimit",Cu),a={type:"custom",value:(e,t,i)=>{const n=parseInt(e),a=parseInt(i.lineThickness);if(!Number.isNaN(n)&&!Number.isNaN(a)&&"none"!==i.markerType)return a>n?r.i18nUtil.get("sharedAnalytics.visualizationSettings.validation.markerSizeSmallerThanLineThikness"):null}};return[KA(),GA(e),ZA(e),null!=t&&t.hasDisconnectedDataPoints?Ct(xt({},i),{infoList:[n],validationRulesFn:(0,Z.Z)((()=>{var e,t;return[...null!=(t=null==(e=i.validationRulesFn)?void 0:e.call(i))?t:[],a,{type:"minValue",message:n,value:Cu}]}))}):Ct(xt({},i),{validationRulesFn:(0,Z.Z)((()=>{var e,t;return[...null!=(t=null==(e=i.validationRulesFn)?void 0:e.call(i))?t:[],a]}))})]},iw=e=>(null==e?void 0:e.sortMode)===tc||(null==e?void 0:e.sortMode)===ic?[{componentType:ce.IFormFieldComponentTypes.SELECT,name:"sortBy",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortBy"),dataSumoTest:"chartSortByDropDown",defaultValue:"",onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.noSort"),value:""},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortByLabel"),value:nc},...e.sortMode!==tc?[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortByValue"),value:rc}]:[]]},...e.isSortEnabled?[{componentType:ce.IFormFieldComponentTypes.SELECT,name:"sortDir",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortDirection"),dataSumoTest:"chartSortDirectionDropDown",defaultValue:ac,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortAsc"),value:ac,icon:"arrow-up"},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortDesc"),value:sc,icon:"arrow-down"}]}]:[]]:[],rw=(0,oe.default)((()=>({componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"maxNumOfSlices",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.maxNumOfSlices"),defaultValue:Kd.maxNumOfSlices,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0}]))}))),nw=()=>({componentType:ce.IFormFieldComponentTypes.SELECT,name:"type",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.type"),defaultValue:Jc.general.type,onChangeFnName:"onVisualTypeChange",choices:[],dataSumoTest:"chartTypeDropDown"}),aw=e=>[Ct(xt({},nw()),{defaultValue:Qc(e),choices:[...up(),...dp(),cp()]})],sw=(0,oe.default)((()=>[Ct(xt({},nw()),{defaultValue:ce.ChartType.LINE,choices:[pp()[ce.ChartType.LINE],cp()]})])),ow=(0,oe.default)((()=>[{componentType:ce.IFormFieldComponentTypes.COLOR_PICKER,name:"outlierBandColor",label:r.i18nUtil.get("sharedAnalytics.outlierOptions.bandColor"),onChangeFnName:ce.OnChangeFn.TEXTFIELD,defaultValue:Uc.outlierBandColor},{componentType:ce.IFormFieldComponentTypes.SELECT,name:"outlierBandDisplayType",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:jA()},Ct(xt({},KA()),{name:"outlierBandLineDashType"}),{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"outlierBandFillOpacity",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.fillOpacity"),defaultValue:Uc.outlierBandFillOpacity,onChangeFnName:ce.OnChangeFn.TEXTFIELD,inputProps:{step:.01},validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0},{type:"maxValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",1),value:1}]))},{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineThickness"),name:"outlierBandLineThickness",defaultValue:Uc.outlierBandLineThickness,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0},{type:"integer",message:r.i18nUtil.get("sharedAnalytics.integerValue")}]))},Ct(xt({},ZA(ce.ChartType.LINE)),{name:"outlierBandMarkerType",defaultValue:Uc.outlierBandMarkerType}),Ct(xt({},YA(ce.ChartType.LINE)),{name:"outlierBandMarkerSize",defaultValue:Uc.outlierBandMarkerSize}),{componentType:ce.IFormFieldComponentTypes.COLOR_PICKER,name:"outlierBandMarkerColor",label:r.i18nUtil.get("sharedAnalytics.outlierOptions.markerColor"),onChangeFnName:ce.OnChangeFn.TEXTFIELD,defaultValue:Uc.outlierBandMarkerColor}])),lw=(0,oe.default)((()=>Me.chartSingleValueStatOptions.map((e=>({label:e.value,value:e.value}))))),cw=(e,t)=>i=>{if(!i)return null;if(!(0,G.Z)(i))return r.i18nUtil.get("sharedAnalytics.integerValue");const n=Number(i);return Number.isInteger(n)?n<e?r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",e):n>t?r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",t):null:r.i18nUtil.get("sharedAnalytics.integerValue")},dw=e=>({label:"sharedAnalytics.queryBuilder.svpDataColumn",settings:[...e?[]:[{name:"svp#option",label:r.i18nUtil.get("sharedAnalytics.queryBuilder.statistics"),componentType:ce.IFormFieldComponentTypes.SELECT,defaultValue:Kc.option,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:lw(),dataSumoTest:"svc_StatTypeDropdown"}],{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.label"),name:"svp#label",defaultValue:Kc.label,componentType:ce.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:ce.OnChangeFn.TEXTFIELD,dataSumoTest:"singleValueLabel",hintText:r.i18nUtil.get("sharedAnalytics.queryBuilder.labelHintText")},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.defaultSVPText"),name:"svp#noDataString",defaultValue:Kc.noDataString,componentType:ce.IFormFieldComponentTypes.TEXT_FIELD,onChangeFnName:ce.OnChangeFn.TEXTFIELD,hintText:r.i18nUtil.get("sharedAnalytics.queryBuilder.defaultSVPTextHint"),dataSumoTest:"singleValueSettings_DefaultValInput"}]}),uw=()=>({label:"sharedAnalytics.visualSettings",settings:[{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showSVPValue"),name:"svp#hideData",defaultValue:Kc.hideData,componentType:ce.IFormFieldComponentTypes.TOGGLE,onChangeFnName:ce.OnChangeFn.TEXTFIELD,dataSumoTest:"singleValueSettings_HideValue"},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.valueFontSize"),name:"svp#valueFontSize",componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,onChangeFnName:ce.OnChangeFn.TEXTFIELD,defaultValue:Kc.valueFontSize,validationRulesFn:(0,Z.Z)((()=>[{type:"custom",value:cw(8,50)}]))},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.round"),name:"svp#rounding",componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,onChangeFnName:ce.OnChangeFn.TEXTFIELD,defaultValue:Kc.rounding,hintText:r.i18nUtil.get("sharedAnalytics.queryBuilder.roundHintText"),validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0},{type:"maxValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",11),value:11},{type:"integer",message:r.i18nUtil.get("sharedAnalytics.integerValue")}]))},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showSVPLabel"),name:"svp#hideLabel",defaultValue:Kc.hideLabel,componentType:ce.IFormFieldComponentTypes.TOGGLE,onChangeFnName:ce.OnChangeFn.TEXTFIELD,dataSumoTest:"singleValueSettings_HideLabel"},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.labelFontSize"),name:"svp#labelFontSize",componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,onChangeFnName:ce.OnChangeFn.TEXTFIELD,defaultValue:Kc.labelFontSize,validationRulesFn:(0,Z.Z)((()=>[{type:"custom",value:cw(8,50)}]))}]}),pw={minRangeName:"from",maxRangeName:"to",overrideColor:"color"};function hw(e){var t;const i=null==(t=null==e?void 0:e.svp)?void 0:t.useBackgroundColor;return{label:"sharedAnalytics.queryBuilder.svpThresholdColumn",settings:[{name:"svp#useBackgroundColor",label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showColorAs"),componentType:ce.IFormFieldComponentTypes.SELECT,defaultValue:Kc.useBackgroundColor,onChangeFnName:"onShowColorAsChange",choices:[{label:"Text",value:!1,dataSumoTest:"showColorAsText"},{label:"Background",value:!0,dataSumoTest:"showColorAsBackground"}],dataSumoTest:"singleValueSettings_ShowColorAsInput"},{name:"svp#thresholds",label:"",defaultValue:Gc(i),componentType:ce.IFormFieldComponentTypes.RANGE_COLOR_SELECTOR,onChangeFnName:ce.OnChangeFn.TEXTFIELD,customConfig:pw,validationRulesFn:(0,Z.Z)((()=>[{type:"custom",value:(e,t,i)=>{if(De.currentUserHelper.hasFeatureFlag("UIThresholdsNMT")&&"value"in i["svp#thresholds"][0])return null;const[,n]=t.split("_"),a=parseInt(n),{from:s,to:o}=i["svp#thresholds"][a];let l;return(0,G.Z)(s)&&(0,G.Z)(o)&&s>=o&&(l=r.i18nUtil.get("sharedAnalytics.thresholdError")),l}}])),axisRangeMaximumLabel:r.i18nUtil.get("sharedAnalytics.charts.axisRangeMaximumLabel")}]}}const mw=(0,oe.default)((()=>({label:"sharedAnalytics.queryBuilder.svpSparklinesColumn",settings:[{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showSparklines"),name:"svp#sparkline_show",defaultValue:Kc.sparkline.show,componentType:ce.IFormFieldComponentTypes.TOGGLE,onChangeFnName:ce.OnChangeFn.TEXTFIELD,dataSumoTest:"newDashboard.showSparkline"},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.sparklineColor"),name:"svp#sparkline_color",defaultValue:Kc.sparkline.color,componentType:ce.IFormFieldComponentTypes.COLOR_PICKER,onChangeFnName:ce.OnChangeFn.TEXTFIELD}]}))),gw=(0,oe.default)((()=>({label:"sharedAnalytics.queryBuilder.svpGaugesColumn",settings:[{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showGauge"),name:"svp#gauge_show",defaultValue:Kc.gauge.show,componentType:ce.IFormFieldComponentTypes.TOGGLE,onChangeFnName:ce.OnChangeFn.TEXTFIELD},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.minimum"),name:"svp#gauge_min",defaultValue:Kc.gauge.min,componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,onChangeFnName:ce.OnChangeFn.TEXTFIELD},{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.maximum"),name:"svp#gauge_max",defaultValue:Kc.gauge.max,componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,onChangeFnName:ce.OnChangeFn.TEXTFIELD}]})));function yw(e,t){return[dw(t),uw(),hw(e),mw(),gw()]}const vw=(0,oe.default)((()=>({name:"aggregationType",label:r.i18nUtil.get("sharedAnalytics.aggregationType"),componentType:ce.IFormFieldComponentTypes.SELECT,defaultValue:Vc.aggregationType,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{value:"avg",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeAvg"),dataSumoTest:"average"},{value:"count",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeCount"),dataSumoTest:"count"},{value:"min",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeMin"),dataSumoTest:"minimum"},{value:"max",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeMax"),dataSumoTest:"maximum"},{value:"sum",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeSum"),dataSumoTest:"sum"},{value:"latest",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeLatest"),dataSumoTest:"latest"}],dataSumoTest:"chartAggregationTypeDropdown"}))),fw=(e,t,i)=>{if(t===Go.TABLE)return[Ct(xt({},nw()),{choices:[cp()],defaultValue:Al.TABLE})];switch(e){case gl.TIME_SERIES:return aw(gl.TIME_SERIES);case gl.DISTRIBUTION:const t=[Ct(xt({},nw()),{choices:[...up(),...hp()],defaultValue:Qc(gl.DISTRIBUTION)})];return i||t.push(vw()),t;default:return aw(e)}},_w=(0,oe.default)(((e,t,i,n)=>{switch(e){case ce.ChartType.LINE:return((e,t)=>[...HA(e),{componentType:ce.IFormFieldComponentTypes.SELECT,name:"displayType",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:qA()},...tw(ce.ChartType.LINE,t),...iw(t)])(i,n);case ce.ChartType.AREA:return((e,t)=>[...HA(e),XA(ce.ChartType.AREA),{componentType:ce.IFormFieldComponentTypes.SELECT,name:"displayType",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[...qA(),...QA()]},...tw(ce.ChartType.AREA,t),...iw(t)])(i,n);case ce.ChartType.COLUMN:case ce.ChartType.BAR:return((e,t,i)=>{var n;const a=!(null==(n=null==e?void 0:e.selectedKeys)||!n.length);return[...HA(t),XA(ce.ChartType.COLUMN),...zA(e),...iw(i),{componentType:ce.IFormFieldComponentTypes.SELECT,name:"displayType",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[WA(a),...QA()]}]})(t,i,n);case ce.ChartType.FUNNEL:return((e,t)=>[...HA(e),XA(ce.ChartType.PIE),rw(),...iw(t)])(i,n);case ce.ChartType.PIE:return((e,t)=>[...HA(e),XA(ce.ChartType.PIE),{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"innerRadius",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.innerRadius"),defaultValue:Kd.innerRadius,format:ce.FORM_FIELD_FORMAT_TYPES.PERCENTAGE,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0}]))},rw(),{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"startAngle",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.startAngle"),defaultValue:Kd.startAngle,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0}]))},...iw(t)])(i,n);case ce.ChartType.SCATTER:return(e=>[...HA(e),XA(ce.ChartType.SCATTER),YA(ce.ChartType.SCATTER),ZA(ce.ChartType.SCATTER)])(i);case ce.ChartType.BUBBLE:return[...HA(),XA(ce.ChartType.SCATTER),ZA(ce.ChartType.SCATTER)];case ce.ChartType.PYRAMID:return(e=>[...HA(e),XA(ce.ChartType.PYRAMID),{componentType:ce.IFormFieldComponentTypes.SELECT,name:"displayType",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{label:r.i18nUtil.get("sharedAnalytics.pyramidDisplayOptions.default"),value:le.ChartDisplayTypeOptions.DEFAULT},{label:r.i18nUtil.get("sharedAnalytics.pyramidDisplayOptions.funnel"),value:le.ChartDisplayTypeOptions.FUNNEL}]},rw(),{componentType:ce.IFormFieldComponentTypes.SELECT,name:"valueRepresents",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.valueRepresents"),defaultValue:rl.HEIGHT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{label:r.i18nUtil.get("sharedAnalytics.pyramidDisplayOptions.height"),value:rl.HEIGHT},{label:r.i18nUtil.get("sharedAnalytics.pyramidDisplayOptions.area"),value:rl.AREA}]},{componentType:ce.IFormFieldComponentTypes.SELECT,name:"orientation",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.orientation"),defaultValue:nl.DEFAULT,onChangeFnName:ce.OnChangeFn.TEXTFIELD,choices:[{label:r.i18nUtil.get("sharedAnalytics.pyramidDisplayOptions.default"),value:nl.DEFAULT},{label:r.i18nUtil.get("sharedAnalytics.pyramidDisplayOptions.reversed"),value:nl.REVERSED}]}])(i);case Al.TABLE:return(e=>[{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"fontSize",label:r.i18nUtil.get("sharedAnalytics.fontSize"),defaultValue:12,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",8),value:8},{type:"maxValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",50),value:50}]))},{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"decimals",label:r.i18nUtil.get("sharedAnalytics.decimals"),hintText:r.i18nUtil.get("sharedAnalytics.decimalsRange"),defaultValue:null,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0},{type:"maxValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",10),value:10}]))},{componentType:ce.IFormFieldComponentTypes.TEXT_FIELD_NUMBER,name:"paginationPageSize",label:r.i18nUtil.get("sharedAnalytics.paginationPageSize"),defaultValue:BA,onChangeFnName:ce.OnChangeFn.TEXTFIELD,validationRulesFn:(0,Z.Z)((()=>[{type:"minValue",message:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0),value:0}]))},...iw(e)])(n);default:return[]}})),Sw=(e,t,i)=>Ct(xt({},t),{color:Ct(xt({},t.color),{family:i})}),bw=(e,t,i)=>Ct(xt({},t),{general:Ct(xt({},t.general),{[e]:i})}),Ew=(e,t,i)=>{var r,n;const a={[e]:i},s=null!=(n=null==(r=t.general)?void 0:r.markerSize)?n:Bc;return Ct(xt({},t),{general:xt(xt(xt({},t.general),i!==le.MarkerTypeOptions.NONE?{markerSize:s}:{}),a)})},Tw=(e,t,i)=>Ct(xt({},t),{general:Ct(xt({},t.general),{[e]:i})}),xw={[ce.OnChangeFn.COLOR_SELECTOR]:Sw,[ce.OnChangeFn.TEXTFIELD]:bw,[ce.OnChangeFn.AUTOCOMPLETE]:Tw,[$A.VISUAL_TYPE]:bw,[$A.MARKER_SIZE]:Ew};function Cw(e,t,i={}){if(e.includes("gauge")){const[,r]=e.split("_");return{gauge:{show:"show"===r?t:i.gauge&&i.gauge.show,min:"min"===r?t:i.gauge&&i.gauge.min,max:"max"===r?t:i.gauge&&i.gauge.max},sparkline:Ct(xt({},i.sparkline),{show:"show"===r?!t&&i.sparkline&&i.sparkline.show:i.sparkline&&i.sparkline.show})}}if(e.includes("sparkline")){const[,r]=e.split("_");return{sparkline:{show:"show"===r?t:i.sparkline&&i.sparkline.show||!1,color:"color"===r?t:i.sparkline&&i.sparkline.color||""},gauge:{show:"show"===r?!t&&i.gauge&&i.gauge.show:i.gauge&&i.gauge.show}}}return"hideData"===e?{hideData:t,hideLabel:t}:{[e]:t}}const Aw={[ce.OnChangeFn.TEXTFIELD]:(e,t,i)=>{const[,r]=e.split("#"),n=t,a=n.svp,s=xt(xt({},a),Cw(r,i,a));return Ct(xt({},n),{svp:s})},[$A.SHOW_COLOR_AS]:(e,t,i)=>{const[,r]=e.split("#"),n=t,a=n.svp,s=null==a?void 0:a.thresholds,o=Gc(!!i),l=Ct(xt(xt({},a),Cw(r,i,a)),{thresholds:ww(o,s)});return Ct(xt({},n),{svp:l})}};function ww(e,t){return t?t.map(((t,i)=>{var r=t,{color:n}=r,a=At(r,["color"]);return Ct(xt({},a),{color:e[i].color})})):e}const Iw={[ce.OnChangeFn.TEXTFIELD]:bw,[$A.VISUAL_TYPE]:bw},Rw=Ct(xt({},xw),{[$A.XY_DIMENSION]:(e,t,i)=>Ct(xt({},t),{xy:Ct(xt({},t.xy),{[e]:i})})});function Dw(e,t,i){const{series:n}=t,{xAxisKeys:a=[]}=n&&n[0]||{},s=(0,r.withIndex)(Fc),o=a.map((e=>({label:e,value:e}))),l="scatter"===e?JA():ew(),c=[...o,{label:r.i18nUtil.get("sharedAnalytics.aggregatedValue"),value:""}];return l.map((e=>{var t,r;return Ct(xt({},e),{items:c,defaultValue:null!=(r=null==(t=i.xy)?void 0:t[e.name])?r:s[e.name]})}))}const Ow=({visualSettings:e},{value:t},i)=>{if(Object.values(le.VisualSettingsType).includes(t)||console.warn(`onVisualTypeChange: visualType has unexpected value "${t}"`),UE(t)){const t=(0,r.ensureDefined)(i).setFieldValue;["markerSize","markerType"].forEach((i=>{var n,a;const s=null!=(a=null==(n=e.general)?void 0:n[i])?a:(0,r.withIndex)(hu.series)[i];t(i,s)}))}},Nw=e=>{switch(e){case Al.SVP:return Aw;case Al.TABLE:return Iw;case ce.ChartType.SCATTER:case ce.ChartType.BUBBLE:return Rw;default:return xw}};const Mw=(0,oe.default)((function(e,t){const i=Nw(e);return(e,r)=>{const n=kw(e);return(0,i[n])(e,t,r)}})),kw=e=>{switch(e){case"colorFamily":return ce.OnChangeFn.COLOR_SELECTOR;case"xDimension":case"yDimension":case"zDimension":return $A.XY_DIMENSION;default:return ce.OnChangeFn.TEXTFIELD}},Lw=e=>{window.localStorage.removeItem(`panel_editor_${e}`)},Pw=(0,oe.default)(((e,t,i,r)=>{var n,a;return((e,t,i)=>De.currentUserHelper.hasFeatureFlag("UINewboardCategoricalGroupBy")&&i&&t===gl.DISTRIBUTION&&[ce.ChartType.COLUMN,ce.ChartType.BAR,ce.ChartType.FUNNEL,ce.ChartType.PIE,ce.ChartType.LINE,ce.ChartType.AREA].includes(e))(e,t,i)?(0,X.Z)(null!=(a=null==(n=null==r?void 0:r.series)?void 0:n.flatMap((({metaData:e})=>Object.keys(e.data))))?a:[]).sort():null})),Fw=(0,oe.default)((e=>({label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType."+(e?"grouped":"default")),value:le.ChartDisplayTypeOptions.DEFAULT}))),Uw=(0,oe.default)((()=>[Fw(),{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.smooth"),value:le.ChartDisplayTypeOptions.SMOOTH},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.stepped"),value:le.ChartDisplayTypeOptions.STEPPED}])),Vw=(0,oe.default)((()=>[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.stackedPercent"),value:le.ChartDisplayTypeOptions.STACKED_PERCENT},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.displayType.stacked"),value:le.ChartDisplayTypeOptions.STACKED}])),Bw=(0,oe.default)((()=>[...Uw(),...Vw()])),$w=(0,oe.default)((e=>[Fw(e),...Vw()])),Hw=()=>[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.dot"),value:le.LineDashStyleOptions.DOT},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.solid"),value:le.LineDashStyleOptions.SOLID},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.dash"),value:le.LineDashStyleOptions.DASH},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.lineDashType.dashDot"),value:le.LineDashStyleOptions.DASH_DOT}],Ww=(0,oe.default)((e=>{const t=[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.circle"),value:le.MarkerTypeOptions.CIRCLE},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.square"),value:le.MarkerTypeOptions.SQUARE},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.triangle"),value:le.MarkerTypeOptions.TRIANGLE},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.cross"),value:le.MarkerTypeOptions.CROSS}];return e!==le.VisualSettingsType.SCATTER&&e!==le.VisualSettingsType.BUBBLE&&t.unshift({label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.properties.markerType.none"),value:le.MarkerTypeOptions.NONE}),t})),qw=(0,oe.default)((()=>[...jw(),{value:rc,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortByValue")}])),jw=(0,oe.default)((()=>[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.noSort"),value:""},{value:nc,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortByLabel")}])),Qw=(0,oe.default)((()=>[{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortAsc"),value:ac,icon:"arrow-up"},{label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortDesc"),value:sc,icon:"arrow-down"}])),zw=(0,oe.default)((()=>[{value:"avg",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeAvg"),dataSumoTest:"average"},{value:"count",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeCount"),dataSumoTest:"count"},{value:"min",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeMin"),dataSumoTest:"minimum"},{value:"max",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeMax"),dataSumoTest:"maximum"},{value:"sum",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeSum"),dataSumoTest:"sum"},{value:"latest",label:r.i18nUtil.get("sharedAnalytics.aggregationTypeLatest"),dataSumoTest:"latest"}])),Gw=(0,oe.default)((()=>Me.chartSingleValueStatOptions.map((e=>({label:e.value,value:e.value}))))),Kw=(0,oe.default)((()=>[{label:"Text",value:!1,dataSumoTest:"showColorAsText"},{label:"Background",value:!0,dataSumoTest:"showColorAsBackground"}]));var Yw=(e=>(e.Outlier="OUTLIER",e))(Yw||{});const Zw=(0,oe.default)((e=>{switch(e){case"OUTLIER":return[pp()[ce.ChartType.LINE],cp()];case gl.TIME_SERIES:return[...up(),...dp(),cp()];case gl.DISTRIBUTION:return[...up(),...hp()]}})),Xw=(0,oe.default)((()=>({useBackgroundColor:{kind:"select",defaultValue:Kc.useBackgroundColor,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showColorAs"),dataSumoTest:"singleValueSettings_ShowColorAsInput"},option:{kind:"select",defaultValue:Kc.option,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.statistics"),dataSumoTest:"svc_StatTypeDropdown"},label:{kind:"string",defaultValue:Kc.label,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.label"),hintText:r.i18nUtil.get("sharedAnalytics.queryBuilder.labelHintText"),dataSumoTest:"singleValueLabel"},noDataString:{kind:"string",defaultValue:Kc.noDataString,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.defaultSVPText"),hintText:r.i18nUtil.get("sharedAnalytics.queryBuilder.defaultSVPTextHint"),dataSumoTest:"singleValueSettings_DefaultValInput"},hideLabel:{kind:"toggle",defaultValue:Kc.hideLabel,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showSVPLabelV2"),dataSumoTest:"singleValueSettings_HideLabel"},hideData:{kind:"toggle",defaultValue:Kc.hideData,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showSVPValueV2"),dataSumoTest:"singleValueSettings_HideValue"},labelFontSize:{kind:"number",defaultValue:Kc.labelFontSize,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.labelFontSize"),dataSumoTest:"svp#labelFontSize",maximum:50},valueFontSize:{kind:"number",defaultValue:Kc.valueFontSize,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.valueFontSize"),dataSumoTest:"svp#valueFontSize",maximum:50},rounding:{kind:"number",defaultValue:Kc.rounding,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.round"),minimum:0,maximum:11},thresholds:{kind:"threshold",defaultValue:Kc.thresholds,label:"",axisRangeMaximumLabel:r.i18nUtil.get("sharedAnalytics.charts.axisRangeMaximumLabel")},useNoData:{kind:"toggle",defaultValue:Kc.useNoData,label:""},sparkline_show:{kind:"toggle",defaultValue:Kc.sparkline.show,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showSparklines"),dataSumoTest:"newDashboard.showSparkline"},sparkline_color:{kind:"colorPicker",defaultValue:Kc.sparkline.color,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.sparklineColor")},gauge_show:{kind:"toggle",defaultValue:Kc.gauge.show,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.showGauge")},gauge_min:{kind:"number",defaultValue:Kc.gauge.min,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.minimum")},gauge_max:{kind:"number",defaultValue:Kc.gauge.max,label:r.i18nUtil.get("sharedAnalytics.queryBuilder.maximum")}})));var Jw=(e=>(e[e.select=0]="select",e[e.string=1]="string",e[e.number=2]="number",e[e.toggle=3]="toggle",e[e.threshold=4]="threshold",e[e.colorPicker=5]="colorPicker",e))(Jw||{});const eI=e=>{var t,i,s,o,l,c,d,u,p,h,m,g,y,v,f,_,S,b,E,T,x,C,A,w,I;const{visualSettings:R}=e,D=(t,i)=>e.onChange(`svp#${t}`,i);return n.createElement(n.Fragment,null,n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.queryBuilder.svpDataColumn")),n.createElement(GI,{name:"option",value:null==(t=R.svp)?void 0:t.option,options:Gw(),onChange:D}),n.createElement(qI,{name:"label",value:null==(i=R.svp)?void 0:i.label,onChange:D}),n.createElement(qI,{name:"noDataString",value:null==(s=R.svp)?void 0:s.noDataString,onChange:D}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.visualSettings")),n.createElement(zI,{name:"hideData",value:!(null!=(o=R.svp)&&o.hideData),defaultValue:!Kc.hideData,onChange:(e,t)=>D("hideData",!t)}),!(null!=(l=R.svp)&&l.hideData)&&n.createElement(n.Fragment,null,n.createElement(jI,{name:"valueFontSize",value:null==(c=R.svp)?void 0:c.valueFontSize,onChange:D}),n.createElement(jI,{name:"rounding",value:null==(d=R.svp)?void 0:d.rounding,onChange:D})),n.createElement(zI,{name:"hideLabel",value:!(null!=(u=R.svp)&&u.hideLabel),defaultValue:!Kc.hideLabel,onChange:(e,t)=>D("hideLabel",!t)}),!(null!=(p=R.svp)&&p.hideLabel)&&n.createElement(jI,{name:"labelFontSize",value:null==(h=R.svp)?void 0:h.labelFontSize,onChange:D}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.queryBuilder.svpThresholdColumn")),n.createElement(GI,{name:"useBackgroundColor",value:null==(m=R.svp)?void 0:m.useBackgroundColor,options:Kw(),onChange:D}),n.createElement(tI,{visualSettings:e.visualSettings,onChange:D}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.queryBuilder.svpSparklinesColumn")),n.createElement(zI,{name:"sparkline_show",value:null==(y=null==(g=R.svp)?void 0:g.sparkline)?void 0:y.show,onChange:D}),(null==(f=null==(v=R.svp)?void 0:v.sparkline)?void 0:f.show)&&n.createElement(KI,{name:"sparkline_color",value:null==(S=null==(_=R.svp)?void 0:_.sparkline)?void 0:S.color,onChange:D}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.queryBuilder.svpGaugesColumn")),n.createElement(zI,{name:"gauge_show",value:null==(E=null==(b=R.svp)?void 0:b.gauge)?void 0:E.show,onChange:D}),(null==(x=null==(T=R.svp)?void 0:T.gauge)?void 0:x.show)&&n.createElement(n.Fragment,null,n.createElement(jI,{name:"gauge_min",value:null==(A=null==(C=R.svp)?void 0:C.gauge)?void 0:A.min,onChange:D}),n.createElement(jI,{name:"gauge_max",value:null==(I=null==(w=R.svp)?void 0:w.gauge)?void 0:I.max,onChange:D})))},tI=({visualSettings:e,onChange:t})=>{var i,a,s;const o=ce.RENDER_COMPONENT_MAP[ce.IFormFieldComponentTypes.RANGE_COLOR_SELECTOR],l="thresholds",c={name:l,label:"",defaultValue:Gc(null==(i=null==e?void 0:e.svp)?void 0:i.useBackgroundColor),componentType:ce.IFormFieldComponentTypes.RANGE_COLOR_SELECTOR,onChangeFnName:ce.OnChangeFn.TEXTFIELD,customConfig:{minRangeName:"from",maxRangeName:"to",overrideColor:"color"},axisRangeMaximumLabel:r.i18nUtil.get("sharedAnalytics.charts.axisRangeMaximumLabel")},d=null!=(s=null==(a=e.svp)?void 0:a.thresholds)?s:[];return n.createElement(o,{name:l,value:d,fieldConfig:c,onChange:({value:e})=>{t("thresholds",e)},form:{}})},iI=(0,oe.default)((()=>{var e,t;return{type:{kind:"select",defaultValue:le.VisualSettingsType.LINE,label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.type"),dataSumoTest:"chartTypeDropDown"},displayType:{kind:"select",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,label:null==(e=r.i18nUtil)?void 0:e.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown"},aggregationType:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.aggregationType"),defaultValue:Jc.series.aggregationType,dataSumoTest:"chartAggregationTypeDropdown"},colorFamily:{kind:"colorSchemePicker",label:r.i18nUtil.get("sharedAnalytics.colorFamily"),defaultValue:Jc.color.family,dataSumoTest:"colorFamily"},fillOpacity:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.fillOpacity"),defaultValue:Jc.series.fillOpacity,minimum:0,maximum:1,inputProps:{step:.01},dataSumoTest:"fillOpacity"},lineDashType:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineDashType"),defaultValue:Jc.series.lineDashType,dataSumoTest:"lineDashType"},lineThickness:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineThickness"),defaultValue:Jc.series.lineThickness,minimum:1,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"lineThickness"},markerType:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.markerType"),defaultValue:Jc.series.markerType,dataSumoTest:"markerType"},markerSize:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.markerSize"),defaultValue:Jc.series.markerSize,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"markerSize"},maxNumOfSlices:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.maxNumOfSlices"),defaultValue:Kd.maxNumOfSlices,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"maxNumOfSlices"},innerRadius:{kind:"percentage",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.innerRadius"),defaultValue:Kd.innerRadius,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"innerRadius"},startAngle:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.startAngle"),defaultValue:Kd.startAngle,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"startAngle"},xDimension:{kind:"autocomplete",label:r.i18nUtil.get("sharedAnalytics.xAxisDimension"),defaultValue:Fc.xDimension,multiselect:!1,optional:!0,dataSumoTest:"xDimension"},yDimension:{kind:"autocomplete",label:r.i18nUtil.get("sharedAnalytics.yAxisDimension"),defaultValue:Fc.yDimension,multiselect:!1,optional:!0,dataSumoTest:"yDimension"},zDimension:{kind:"autocomplete",label:r.i18nUtil.get("sharedAnalytics.zAxisDimension"),defaultValue:Fc.zDimension,multiselect:!1,optional:!0,dataSumoTest:"zDimension"},decimals:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.decimals"),defaultValue:null,minimum:0,maximum:10,dataSumoTest:"decimals"},fontSize:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.fontSize"),defaultValue:12,minimum:0,maximum:50,dataSumoTest:"fontSize"},paginationPageSize:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.paginationPageSize"),defaultValue:100,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"paginationPageSize"},groupBy:{defaultValue:[],kind:"autocompleteWithStringValues",label:r.i18nUtil.get("sharedAnalytics.groupBy"),multiselect:!0,dataSumoTest:"groupBy"},outlierBandDisplayType:{kind:"select",defaultValue:le.ChartDisplayTypeOptions.DEFAULT,label:null==(t=r.i18nUtil)?void 0:t.get("sharedAnalytics.visualizationSettings.displayType"),dataSumoTest:"chartDisplayTypeDropDown"},outlierBandColor:{kind:"colorPicker",label:r.i18nUtil.get("sharedAnalytics.outlierOptions.bandColor"),defaultValue:Uc.outlierBandColor,dataSumoTest:"outlierBandColor"},outlierBandFillOpacity:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.fillOpacity"),defaultValue:Uc.outlierBandFillOpacity,minimum:0,maximum:1,inputProps:{step:.01},dataSumoTest:"outlierBandFillOpacity"},outlierBandLineDashType:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineDashType"),defaultValue:Jc.series.lineDashType,dataSumoTest:"outlierBandLineDashType"},outlierBandLineThickness:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.lineThickness"),defaultValue:Uc.outlierBandLineThickness,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"outlierBandLineThickness"},outlierBandMarkerType:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.markerType"),defaultValue:Uc.outlierBandMarkerType,dataSumoTest:"outlierBandMarkerType"},outlierBandMarkerSize:{kind:"number",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.markerSize"),defaultValue:Uc.outlierBandMarkerSize,minimum:0,maximum:Number.POSITIVE_INFINITY,dataSumoTest:"outlierBandMarkerSize"},outlierBandMarkerColor:{kind:"colorPicker",label:r.i18nUtil.get("sharedAnalytics.outlierOptions.markerColor"),defaultValue:Uc.outlierBandMarkerColor,dataSumoTest:"outlierBandMarkerColor"},sortBy:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortBy"),defaultValue:"",dataSumoTest:"sortBy"},sortDir:{kind:"select",label:r.i18nUtil.get("sharedAnalytics.visualizationSettings.sortDirection"),defaultValue:ac,dataSumoTest:"sortDir"}}}));var rI=(e=>(e[e.select=0]="select",e[e.percentage=1]="percentage",e[e.autocomplete=2]="autocomplete",e[e.autocompleteWithStringValues=3]="autocompleteWithStringValues",e[e.colorSchemePicker=4]="colorSchemePicker",e[e.colorPicker=5]="colorPicker",e))(rI||{});xt(xt({},Jw),rI);const nI=({min:e,errorMessage:t})=>i=>i<e?{type:"Error",message:t}:{type:"Success",result:i},aI=({max:e,errorMessage:t})=>i=>i>e?{type:"Error",message:t}:{type:"Success",result:i},sI=({errorMessage:e})=>t=>Number.isInteger(Number(t))?{type:"Success",result:t}:{type:"Error",message:e},oI=({errorMessage:e})=>t=>Number.isInteger(Number(t))||(0,r.isFloat)(Number(t))?{type:"Success",result:t}:{type:"Error",message:e},lI=({min:e,errorMessage:t})=>i=>i<=e?{type:"Error",message:t}:{type:"Success",result:i},cI=(e,t)=>i=>t(i)?{type:"Success",result:i}:e(i),dI=e=>"Error"===e.type;function uI(e){var t=e,{validators:i,onChange:r,value:s,useInternalState:o=!0}=t,l=At(t,["validators","onChange","value","useInternalState"]);const[c,d]=(0,n.useState)(`${null!=s?s:""}`),[u,p]=(0,n.useState)(void 0),h=o?c:s,m=(0,n.useCallback)(((e,t)=>{const i=((e,t)=>{for(const i of t){const t=i(e);if(dI(t))return t}return{type:"Success",result:void 0}})(e,t),r=dI(i)?i.message:void 0;return p(r),!!r}),[]);(0,n.useEffect)((()=>{m(h,i)}),[i]);const g=(0,n.useCallback)((e=>{const t=e.target.value;d(t),(!m(t,i)||!o)&&r(t)}),[o,i,r,m]);return u?n.createElement(a.TextField,Ct(xt({},l),{error:!0,hintText:u,value:h,onChange:g,fullWidth:!0})):n.createElement(a.TextField,Ct(xt({},l),{value:h,onChange:g,fullWidth:!0}))}const pI=(0,oe.default)((()=>[nI({min:5,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",5)}),aI({max:100,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",100)}),sI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerValue")})])),hI="wrapper___Ixe2Q",mI=({value:e,onChange:t,label:i="",hintText:r=""})=>{const a=(0,n.useCallback)((e=>{const i=parseInt(e);Number.isNaN(i)||t(i)}),[t]);return n.createElement("div",{className:hI},n.createElement(uI,{validators:pI(),type:"number",value:e,label:i,hintText:r,onChange:a,fullWidth:!0}))},gI=(0,oe.default)((()=>[nI({min:8,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",8)}),aI({max:50,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",50)}),sI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerValue")})])),yI="wrapper___DCVkJ",vI=({value:e,onChange:t,label:i="",hintText:r="",fullWidth:a=!1,dataSumoTest:s})=>{const o=(0,n.useCallback)((e=>{t(parseInt(e))}),[t]);return n.createElement("div",{className:yI},n.createElement(uI,{validators:gI(),type:"number",value:e,label:i,hintText:r,onChange:o,fullWidth:a,"data-sumo-test":s}))},fI="wrapper___bS8mM",_I="list___3GnFx";function SI({values:e,translations:t,onChange:i}){const r=Object.entries(e),s=r.reduce(((e,[,t])=>e+(t?1:0)),0);return 0===r.length?null:n.createElement("div",{className:fI},n.createElement("ul",{className:_I},r.map((([r,o])=>n.createElement("li",{key:`${r}`},n.createElement(a.Checkbox,{checked:o,disabled:1===s&&o,label:t[r],onChange:(t,n)=>{i(Ct(xt({},e),{[r]:n}))}}))))))}const bI=e=>""===e,EI=(0,oe.default)((e=>{const t=null!=e?e:0;return[cI(nI({min:t,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",t)}),bI),cI(sI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerValue")}),bI)]})),TI=(0,oe.default)((e=>{const t=null!=e?e:0;return[cI(lI({min:t,errorMessage:r.i18nUtil.get("sharedAnalytics.greaterThanValidatorErrorMessage",t)}),bI),cI(oI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerOrFloatValue")}),bI)]})),xI=(0,oe.default)((()=>[cI(oI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerOrFloatValue")}),bI)])),CI=(0,oe.default)(((e=0,t=Number.POSITIVE_INFINITY,i={enforceInteger:!0})=>{const n=[nI({min:e,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",e)}),aI({max:t,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",t)})];return i.enforceInteger&&n.push(sI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerValue")})),n})),AI={toggle:"toggle___QoYXq",label:"label___boOk2",colorPicker:"colorPicker___x8nLt",colorSchemeFormControl:"colorSchemeFormControl___Ijvwe",chartTypeSelector:"chartTypeSelector___WwNqq",selectLabel:"selectLabel___ejo9H",selectRoot:"selectRoot___q-vjz"},wI={toggle:"toggle___7TuI9",label:"label___cjkQo",colorPicker:"colorPicker___QXeeY",colorSchemeFormControl:"colorSchemeFormControl___ZzxYD",chartTypeSelector:"chartTypeSelector___oL9-b",selectLabel:"selectLabel___en9tG",selectRoot:"selectRoot___eSurX"},II="toggle___8pBnb",RI="label___rcCyC",DI="colorSchemeFormControl___TI5Gv",OI="chartTypeSelector___7NpHE",NI="selectLabel___i3Foe",MI="selectRoot___A8PRD",kI="errorMessage___nRxZW";function LI({value:e,label:t,options:i,disabled:r,error:s,errorMessage:o,className:l,name:c,classes:d,dataSumoTest:u,onChange:p}){return n.createElement(n.Fragment,null,n.createElement(a.Select,{name:c,label:t,value:e,disabled:r,error:s,handleChange:e=>{const t=e.target.value;p(t)},className:l,classes:d,selectProps:{"data-sumo-test":u}},i.map((e=>n.createElement(a.Select.Item,{value:e.value,key:e.value,"data-sumo-test":e.dataSumoTest},e.icon?n.createElement(a.Icon,{name:e.icon,size:"large",color:"luna"}):null,n.createElement("span",{className:NI},e.label))))),o&&n.createElement(a.AssistiveText,{className:kI,error:o},o))}const PI=({name:e,label:t,value:i,dataSumoTest:r,onChange:s})=>n.createElement(a.Toggle,{onToggle:s,btnProps:{type:"button",name:e},toggled:Boolean(i),className:II,"data-sumo-test":r},n.createElement("div",{className:RI},t)),FI=e=>{var t=e,{label:i,value:r,dataSumoTest:a,onChange:s,minimum:o=0,maximum:l=Number.POSITIVE_INFINITY}=t,c=At(t,["label","value","dataSumoTest","onChange","minimum","maximum"]);const d=xt({"data-sumo-test":a},c.inputProps),u=!d.step||Number.isInteger(d.step),p=n.useCallback((e=>{s(parseFloat(e))}),[s]);return n.createElement(uI,xt({fullWidth:!0,validators:CI(o,l,{enforceInteger:u}),type:"number",value:r,label:i,onChange:p,inputProps:d,useInternalState:!1},c))},UI=e=>{var t=e,{onChange:i,dataSumoTest:r}=t,s=At(t,["onChange","dataSumoTest"]);return n.createElement(a.TextField,xt({fullWidth:!0,onChange:i,inputProps:{"data-sumo-test":r}},s))},VI=(0,a.withCssModulesTheme)({brandDark:AI,brandLight:wI},wI,(({label:e,value:t,defaultValue:i,onChange:r,styles:s})=>n.createElement("div",{className:s.colorPicker},n.createElement("div",{className:s.label},e),n.createElement(a.ColorPicker,{autoApplyChanges:!0,defaultColorCode:i,colorCode:t,onChange:e=>{r(e.colorResult.hex)},swatchesTabProps:{"data-sumo-test":"swatches-tab"},customTabProps:{"data-sumo-test":"custom-tab"}})))),BI=({label:e,value:t,onChange:i})=>{const r=xt(xt({},t in a.colorSchemes?{[t]:[...a.colorSchemes[t]]}:null),Wl);return n.createElement(a.ColorSchemeSelector,{optional:!0,value:t,label:e,indicateIsOptional:!1,onChange:(e,t)=>{i(t)},styleProps:{formControl:DI},colorSchemes:r})},$I=e=>{var t=e,{label:i,value:r,items:s,onChange:o,optional:l,multiselect:c}=t,d=At(t,["label","value","items","onChange","optional","multiselect"]);return n.createElement(a.AutoComplete,xt({items:null!=s?s:[],selectedItems:r,onSelectedItemsChange:o,label:i,multiselect:c,optional:l},d))},HI=(0,oe.default)((()=>xt(xt({},Xw()),iI()))),WI=e=>n.useMemo((()=>HI()[e]),[e]),qI=e=>{var t,i;const{defaultValue:r,label:a,dataSumoTest:s,hintText:o}=WI(e.name),l=null!=(i=null!=(t=e.value)?t:e.defaultValue)?i:r;return n.createElement(UI,{value:l,label:a,hintText:o,dataSumoTest:s,onChange:t=>e.onChange(e.name,t.target.value)})},jI=e=>{var t,i,r,a;const{name:s,value:o,defaultValue:l,error:c,hintText:d}=e,u=WI(s),{defaultValue:p,label:h,dataSumoTest:m}=u,g=At(u,["defaultValue","label","dataSumoTest"]),y=null===o?null:null!=(t=null!=o?o:l)?t:p;return n.createElement(FI,xt({value:y,label:h,dataSumoTest:m,minimum:null!=(r=null!=(i=e.minimum)?i:"minimum"in g?g.minimum:void 0)?r:0,maximum:null!=(a=e.maximum)?a:"maximum"in g?g.maximum:void 0,onChange:t=>e.onChange(e.name,parseFloat(`${t}`)),error:c,hintText:d},g))},QI=e=>{var t,i,r;const{defaultValue:a,label:s,dataSumoTest:o}=WI(e.name),l=null!=(i=null!=(t=e.value)?t:e.defaultValue)?i:a,c="number"==typeof l?l:parseFloat(l.replace(/%/g,""));return n.createElement(FI,{label:s,value:c,dataSumoTest:o,minimum:null!=(r=e.minimum)?r:0,maximum:e.maximum,onChange:t=>e.onChange(e.name,`${t}%`)})},zI=e=>{var t,i;const{label:r,defaultValue:a,dataSumoTest:s}=WI(e.name),o=null!=(i=null!=(t=e.value)?t:e.defaultValue)?i:a;return n.createElement(PI,{name:e.name,value:o,label:r,dataSumoTest:s,onChange:t=>e.onChange(e.name,t)})},GI=e=>{var t,i,r;const{defaultValue:a,label:s,dataSumoTest:o}=WI(e.name),l=null!=(i=null!=(t=e.value)?t:e.defaultValue)?i:a;return n.createElement(LI,{name:e.name,value:l,label:s,className:e.className,classes:e.classes,dataSumoTest:o,options:null!=(r=e.options)?r:[],disabled:e.disabled,onChange:t=>e.onChange(e.name,t)})},KI=e=>{var t,i;const{defaultValue:r,label:a,dataSumoTest:s}=WI(e.name),o=null!=(i=null!=(t=e.value)?t:e.defaultValue)?i:r;return n.createElement(VI,{value:o,label:a,dataSumoTest:s,defaultValue:r,onChange:t=>e.onChange(e.name,t)})},YI=e=>{var t,i;const{defaultValue:r,label:a,dataSumoTest:s}=WI(e.name),o=null!=(i=null!=(t=e.value)?t:e.defaultValue)?i:r;return n.createElement(BI,{label:a,value:o,dataSumoTest:s,onChange:t=>e.onChange(e.name,t)})},ZI=e=>{var t,i=e,{name:r,onChange:a,value:s,defaultValue:o}=i,l=At(i,["name","onChange","value","defaultValue"]);const c=WI(r),{defaultValue:d,label:u,kind:p,dataSumoTest:h}=c,m=At(c,["defaultValue","label","kind","dataSumoTest"]),g=null!=(t=null!=s?s:o)?t:d;return n.createElement($I,xt(xt({value:null!=g?g:[],label:u,onChange:e=>a(r,e)},m),l))},XI=e=>{var t=e,{value:i,name:r,onChange:a,defaultValue:s}=t,o=At(t,["value","name","onChange","defaultValue"]);const l=WI(r),{defaultValue:c,label:d,kind:u,dataSumoTest:p}=l,h=At(l,["defaultValue","label","kind","dataSumoTest"]),m=n.useMemo((()=>(null!=i?i:c).map((e=>({label:e,value:e})))),[i,c]),g=n.useMemo((()=>{var e;return null==(e=o.items)?void 0:e.map((e=>({label:e,value:e})))}),[o.items]),y=n.useCallback((e=>{const t=e.map((e=>e.value));a(r,t)}),[r,a]);return n.createElement($I,Ct(xt(xt({value:null!=m?m:[],label:d,onChange:y},h),o),{items:g}))},JI="inlineRow___noHVx",eR="rowAlignContainer___Lf-Fu",tR=({value:e,onChange:t})=>{var i,s,o;const l=(0,n.useCallback)(((i,r)=>{!r||t(Ct(xt({},e),{colorMode:r}))}),[t,e]),c=(0,n.useCallback)(((i,r)=>{t(Ct(xt({},e),{colorSchemeName:r}))}),[t,e]),d=(0,n.useCallback)((({colorResult:i})=>{t(Ct(xt({},e),{baseOpacityColor:i.hex}))}),[t,e]),u=null!=(i=e.colorMode)?i:dl;return n.createElement(n.Fragment,null,n.createElement(a.ToggleButtonGroup,{title:r.i18nUtil.get("sharedAnalytics.heatmapSettings.colorMode"),value:u,onChange:l},n.createElement(a.ToggleButtonGroup.Button,{value:"spectrum",color:"secondary"},r.i18nUtil.get("sharedAnalytics.heatmapSettings.spectrumColorMode")),n.createElement(a.ToggleButtonGroup.Button,{value:"opacity",color:"secondary"},r.i18nUtil.get("sharedAnalytics.heatmapSettings.opacityColorMode"))),"spectrum"===u&&n.createElement(a.ColorSchemeSelector,{optional:!0,value:null!=(s=e.colorSchemeName)?s:ll,label:r.i18nUtil.get("sharedAnalytics.colorFamily"),indicateIsOptional:!1,onChange:c,colorSchemes:ol}),"opacity"===u&&n.createElement("div",{className:JI},n.createElement(a.ColorPicker,{colorCode:null!=(o=e.baseOpacityColor)?o:cl,onChange:d}),n.createElement("div",{className:eR},n.createElement(a.InputLabel,null,r.i18nUtil.get("sharedAnalytics.colorThresholds.baseColor")))))},iR=e=>{var t;const{onChange:i,metricName:a,panelData:s={}}=e,o=$T(s.series),l=o.find((({value:e})=>e===a)),c=(null==(t=s.status)?void 0:t.state)===hl.FINISHED_SUCCESSFULLY&&!l;return l||o.push({label:a,value:a}),n.createElement(LI,{name:"metricName",disabled:o.length<=1,error:c,errorMessage:c?r.i18nUtil.get("sharedAnalytics.mapSettings.metricNotAvailable"):void 0,value:a,label:r.i18nUtil.get("sharedAnalytics.mapSettings.metricField"),options:o,onChange:i,"data-sumo-test":"heatmap-metric-selector"})},rR="heatmapSettings___esbp6",nR=(e,t,i)=>{if(""===e)return;if(!/^\d+[dhms]$/g.test(e))return r.i18nUtil.get("sharedAnalytics.heatmapSettings.xAxisBucketSizeFormatError");const n=(0,r.convertFormattedTimeDurationToMilliseconds)(e);if(t&&i){const e=i-t;if(n>e)return r.i18nUtil.get("sharedAnalytics.heatmapSettings.xAxisBucketSizeRangeError",(0,r.formatMillisecondsToTimeDuration)(e));if(ix(n,t,i,pl))return r.i18nUtil.get("sharedAnalytics.heatmapSettings.xAxisBucketSizeTooManyBucketsError",pl)}},aR=(e,t,i)=>{if(""===e)return;const n=Number(e);if(isNaN(n))return r.i18nUtil.get("sharedAnalytics.heatmapSettings.yAxisBucketSizeFormatError");if(n<=0)return r.i18nUtil.get("sharedAnalytics.heatmapSettings.yAxisBucketSizeNegativeNumber");if("number"==typeof t&&"number"==typeof i){const e=t===i?1:i,a=e%1==0?e:e.toFixed(2);if(n>a)return r.i18nUtil.get("sharedAnalytics.heatmapSettings.yAxisBucketSizeRangeError",a);if(ix(n,t,i,pl))return r.i18nUtil.get("sharedAnalytics.heatmapSettings.yAxisBucketSizeTooManyBucketsError",pl)}},sR=({updatePanelVisualSettings:e,panelData:t,visualizationData:i={},visualSettings:s={}})=>{const{minMaxConstraints:{minX:o,maxX:l,minY:c,maxY:d}={},metricName:u="",autoXBucketSize:p="1m",autoYBucketSize:h=10}=i,{general:{xAxisBucketSize:m,yAxisBucketSize:g}={},color:y=xt({},ul)}=s,[v,f]=(0,n.useState)(String(g||"")),[_,S]=(0,n.useState)(null!=m?m:""),b=(0,r.useDebounce)((t=>{aR(t,c,d)||e({general:{yAxisBucketSize:t?parseFloat(t):void 0}})}),100),E=(0,r.useDebounce)((t=>{nR(t,o,l)||e({general:{xAxisBucketSize:t||void 0}})}),100),T=aR(v,c,d),x=nR(_,o,l),C=!Number.isNaN(h),A=!Number.isNaN((0,r.convertFormattedTimeDurationToMilliseconds)(p));return n.createElement("div",{className:rR,"data-sumo-test":"heatmap-settings"},n.createElement(tR,{value:y,onChange:t=>{e({color:t})}}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.heatmapSettings.dataSettings")),n.createElement(iR,{onChange:t=>{e({general:{metricName:t}})},panelData:t,metricName:u}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.heatmapSettings.bucketSettings")),n.createElement(a.TextField,{"data-sumo-test":"y-axis-bucket-size",value:v,placeholder:C?r.i18nUtil.get("sharedAnalytics.heatmapSettings.yAxisBucketSizePlaceholder",String(h)):"N/A",label:r.i18nUtil.get("sharedAnalytics.heatmapSettings.yAxisBucketSizeLabel"),onChange:e=>{const t=e.target.value;f(t),b(t)},fullWidth:!0,error:Boolean(v&&T),hintText:v&&T}),n.createElement(a.TextField,{"data-sumo-test":"x-axis-bucket-size",value:_,placeholder:A?r.i18nUtil.get("sharedAnalytics.heatmapSettings.xAxisBucketSizePlaceholder",p):"N/A",label:r.i18nUtil.get("sharedAnalytics.heatmapSettings.xAxisBucketSizeLabel"),onChange:e=>{const t=e.target.value;S(t),E(t)},fullWidth:!0,error:Boolean(_&&x),hintText:_&&x}))},oR=e=>{var t,i,s,o,l,c,d,u,p,h,m;return n.createElement(n.Fragment,null,n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.outlierOptions.title")),n.createElement(KI,{name:"outlierBandColor",value:null==(t=e.visualSettings.general)?void 0:t.outlierBandColor,onChange:e.onChange}),n.createElement(jI,{name:"outlierBandFillOpacity",value:null==(s=null==(i=e.visualSettings)?void 0:i.general)?void 0:s.outlierBandFillOpacity,onChange:e.onChange}),n.createElement(GI,{name:"outlierBandDisplayType",value:null==(o=e.visualSettings.general)?void 0:o.outlierBandDisplayType,options:Uw(),onChange:e.onChange}),n.createElement(GI,{name:"outlierBandLineDashType",value:null==(l=e.visualSettings.general)?void 0:l.outlierBandLineDashType,options:Hw(),onChange:e.onChange}),n.createElement(jI,{name:"outlierBandLineThickness",value:null==(c=e.visualSettings.general)?void 0:c.outlierBandLineThickness,onChange:e.onChange}),n.createElement(GI,{name:"outlierBandMarkerType",value:null==(d=e.visualSettings.general)?void 0:d.outlierBandMarkerType,options:Ww(e.chartType),onChange:e.onChange}),(null==(u=e.visualSettings.general)?void 0:u.outlierBandMarkerType)!==le.MarkerTypeOptions.NONE&&n.createElement(n.Fragment,null,n.createElement(jI,{name:"outlierBandMarkerSize",value:null==(h=null==(p=e.visualSettings)?void 0:p.general)?void 0:h.outlierBandMarkerSize,onChange:e.onChange}),n.createElement(KI,{name:"outlierBandMarkerColor",value:null==(m=e.visualSettings.general)?void 0:m.outlierBandMarkerColor,onChange:e.onChange})))},lR=e=>{var t,i,r,a,s,o,l,c;const{visualSettings:d,onChange:u,isMetricsQuery:p,rendererType:h,panelData:m,chartType:g,visualizationData:y}=e,v=null==(i=null==(t=null==m?void 0:m.series)?void 0:t[0])?void 0:i.queryId,f=!(!v||null==(a=null==(r=null==m?void 0:m.series)?void 0:r.some((({queryId:e})=>e!==v))))&&a;if(!De.currentUserHelper.hasFeatureFlag("UIChartFunnelNMT")||h!==gl.DISTRIBUTION||!p)return[];const _=Boolean(null==(s=d.general)?void 0:s.sortBy);return[n.createElement(GI,{key:"sortBy",name:"sortBy",value:null==(o=d.general)?void 0:o.sortBy,options:1!==(null==(l=null==y?void 0:y.data)?void 0:l.length)&&g!==le.VisualSettingsType.TABLE||f?jw():qw(),onChange:u}),..._?[n.createElement(GI,{key:"sortDir",name:"sortDir",value:null==(c=d.general)?void 0:c.sortDir,options:Qw(),onChange:u})]:[]]},cR=e=>{var t,i,a,s,o,l,c,d,u,p,h,m,g;const{visualSettings:y,onChange:v,isMetricsQuery:f,rendererType:_}=e,S=null!=(i=null==(t=y.general)?void 0:t.type)?i:Jc.general.type;return n.createElement(n.Fragment,null,f&&_===gl.DISTRIBUTION&&n.createElement(GI,{name:"aggregationType",value:null==(a=y.general)?void 0:a.aggregationType,options:zw(),onChange:v}),n.createElement(YI,{name:"colorFamily",value:null==(s=y.color)?void 0:s.family,onChange:v}),e.chartType===le.VisualSettingsType.AREA&&n.createElement(jI,{name:"fillOpacity",defaultValue:Eu(ce.ChartType.AREA).series.fillOpacity,value:null==(l=null==(o=e.visualSettings)?void 0:o.general)?void 0:l.fillOpacity,onChange:v}),n.createElement(GI,{name:"displayType",value:null==(c=y.general)?void 0:c.displayType,options:e.chartType===le.VisualSettingsType.AREA?Bw():Uw(),onChange:v}),n.createElement(GI,{name:"lineDashType",value:null==(d=y.general)?void 0:d.lineDashType,options:Hw(),onChange:v}),n.createElement(jI,{name:"lineThickness",value:null==(u=y.general)?void 0:u.lineThickness,onChange:v}),n.createElement(GI,{name:"markerType",value:null==(p=y.general)?void 0:p.markerType,options:Ww(S),onChange:v}),(null==(h=y.general)?void 0:h.markerType)!==le.MarkerTypeOptions.NONE&&n.createElement(jI,xt({name:"markerSize",value:null==(g=null==(m=e.visualSettings)?void 0:m.general)?void 0:g.markerSize,onChange:v},(()=>{var e,t,i;const n=null==(e=y.general)?void 0:e.lineThickness,a=null==(t=null==y?void 0:y.general)?void 0:t.markerSize;if(a&&!Number.isNaN(a)){if(n&&!Number.isNaN(n)&&"none"!==(null==(i=y.general)?void 0:i.markerType)&&n>a)return{error:!0,hintText:r.i18nUtil.get("sharedAnalytics.visualizationSettings.validation.markerSizeSmallerThanLineThikness")};if(a<Cu)return{error:!1,hintText:r.i18nUtil.get("sharedAnalytics.visualizationSettings.validation.markerSizeDisconnectedPointsLimit",Cu)}}return{}})())),e.chartType===le.VisualSettingsType.LINE&&e.isOutlierQuery&&n.createElement(oR,xt({},e)),lR(e))},dR=e=>{var t,i,r,a;const{visualSettings:s,onChange:o,isMetricsQuery:l}=e;return n.createElement(n.Fragment,null,l&&n.createElement(GI,{name:"aggregationType",value:null==(t=s.general)?void 0:t.aggregationType,options:zw(),onChange:o}),n.createElement(YI,{name:"colorFamily",value:null==(i=s.color)?void 0:i.family,onChange:o}),n.createElement(jI,{name:"fillOpacity",value:null==(r=null==s?void 0:s.general)?void 0:r.fillOpacity,onChange:o}),n.createElement(uR,xt({},e)),lR(e),n.createElement(GI,{name:"displayType",value:null==(a=s.general)?void 0:a.displayType,options:$w(),onChange:o}))},uR=({chartType:e,rendererType:t,isMetricsQuery:i,visualSettings:r,panelData:a,onChange:s})=>{var o;const l=Pw(e,t,i,a);return l?n.createElement(XI,{name:"groupBy",items:l,value:null==(o=r.general)?void 0:o.groupBy,onChange:s}):null},pR=e=>{var t,i,r,a;const{visualSettings:s,onChange:o,isMetricsQuery:l}=e;return n.createElement(n.Fragment,null,l&&n.createElement(GI,{name:"aggregationType",value:null==(t=s.general)?void 0:t.aggregationType,options:zw(),onChange:o}),n.createElement(YI,{name:"colorFamily",value:null==(i=s.color)?void 0:i.family,onChange:o}),n.createElement(jI,{name:"fillOpacity",value:null==(r=null==s?void 0:s.general)?void 0:r.fillOpacity,onChange:o}),n.createElement(jI,{name:"maxNumOfSlices",value:null==(a=null==s?void 0:s.general)?void 0:a.maxNumOfSlices,onChange:o}),lR(e))},hR=e=>{var t,i,r,a,s,o;const{visualSettings:l,onChange:c,isMetricsQuery:d}=e;return n.createElement(n.Fragment,null,d&&n.createElement(GI,{name:"aggregationType",value:null==(t=l.general)?void 0:t.aggregationType,options:zw(),onChange:c}),n.createElement(YI,{name:"colorFamily",value:null==(i=l.color)?void 0:i.family,onChange:c}),n.createElement(jI,{name:"fillOpacity",value:null==(r=null==l?void 0:l.general)?void 0:r.fillOpacity,onChange:c}),n.createElement(QI,{name:"innerRadius",value:`${null==(a=null==l?void 0:l.general)?void 0:a.innerRadius}`,onChange:c,maximum:100}),n.createElement(jI,{name:"maxNumOfSlices",value:null==(s=null==l?void 0:l.general)?void 0:s.maxNumOfSlices,onChange:c}),n.createElement(jI,{name:"startAngle",value:null==(o=null==l?void 0:l.general)?void 0:o.startAngle,onChange:c}),lR(e))},mR=e=>{var t,i,s,o,l,c,d,u,p,h,m;const{visualSettings:g,onChange:y,panelData:v,chartType:f,isMetricsQuery:_}=e,S=null!=(t=null==v?void 0:v.series)?t:[],{xAxisKeys:b=[]}=S&&S[0]||{},E=[...b.map((e=>({label:e,value:e}))),{label:r.i18nUtil.get("sharedAnalytics.aggregatedValue"),value:""}];return n.createElement(n.Fragment,null,_&&n.createElement(GI,{name:"aggregationType",value:null==(i=g.general)?void 0:i.aggregationType,options:zw(),onChange:y}),n.createElement(YI,{name:"colorFamily",value:null==(s=g.color)?void 0:s.family,onChange:y}),n.createElement(jI,{name:"fillOpacity",value:null==(o=null==g?void 0:g.general)?void 0:o.fillOpacity,onChange:y}),n.createElement(GI,{name:"markerType",defaultValue:Eu(ce.ChartType.SCATTER).general.markerType,value:null==(l=g.general)?void 0:l.markerType,options:Ww(f),onChange:y}),e.chartType===le.VisualSettingsType.SCATTER&&(null==(c=g.general)?void 0:c.markerType)!==le.MarkerTypeOptions.NONE&&n.createElement(jI,{name:"markerSize",defaultValue:Eu(ce.ChartType.SCATTER).general.markerSize,value:null==(u=null==(d=e.visualSettings)?void 0:d.general)?void 0:u.markerSize,onChange:y}),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.dimensions")),n.createElement(ZI,{name:"xDimension",items:E,value:null==(p=g.xy)?void 0:p.xDimension,onChange:y}),n.createElement(ZI,{name:"yDimension",items:E,value:null==(h=g.xy)?void 0:h.yDimension,onChange:y}),f===le.VisualSettingsType.BUBBLE&&n.createElement(ZI,{name:"zDimension",items:E,value:null==(m=g.xy)?void 0:m.zDimension,onChange:y}))},gR=e=>{var t,i,r,a;const{onChange:s,visualSettings:o,isMetricsQuery:l}=e;return n.createElement(n.Fragment,null,l&&n.createElement(GI,{name:"aggregationType",value:null==(t=o.general)?void 0:t.aggregationType,options:zw(),onChange:s}),n.createElement(jI,{name:"fontSize",value:null==(i=o.general)?void 0:i.fontSize,onChange:s}),n.createElement(jI,{name:"decimals",maximum:10,onChange:s,value:null==(r=o.general)?void 0:r.decimals}),n.createElement(jI,{name:"paginationPageSize",value:null==(a=o.general)?void 0:a.paginationPageSize,onChange:s}),lR(e))},yR=e=>{var t=e,{onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o,updatePanelVisualSettings:l}=t,c=At(t,["onChange","panelData","isMetricsQuery","isOutlierQuery","visualizationData","updatePanelVisualSettings"]);switch(c.chartType){case le.VisualSettingsType.LINE:case le.VisualSettingsType.AREA:return n.createElement(cR,xt({onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o},c));case le.VisualSettingsType.BAR:case le.VisualSettingsType.COLUMN:return n.createElement(dR,xt({onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o},c));case le.VisualSettingsType.FUNNEL:return n.createElement(pR,xt({onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o},c));case le.VisualSettingsType.PIE:return n.createElement(hR,xt({onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o},c));case le.VisualSettingsType.SCATTER:case le.VisualSettingsType.BUBBLE:return n.createElement(mR,xt({onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s},c));case le.VisualSettingsType.TABLE:return n.createElement(gR,xt({onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o},c));case le.VisualSettingsType.HEATMAP:return n.createElement(sR,{updatePanelVisualSettings:l,panelData:r,visualizationData:o,visualSettings:c.visualSettings})}},vR=e=>{var t=e,{onChange:i,updatePanelVisualSettings:s,panelData:o,isMetricsQuery:l,isOutlierQuery:c,visualizationData:d}=t,u=At(t,["onChange","updatePanelVisualSettings","panelData","isMetricsQuery","isOutlierQuery","visualizationData"]);return n.createElement(n.Fragment,null,n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.visualSettings")),n.createElement(yR,xt({onChange:i,panelData:o,isMetricsQuery:l,isOutlierQuery:c,visualizationData:d,updatePanelVisualSettings:s},u)))},fR=({chartType:e,rendererType:t,onChange:i,containsOutlierQuery:r})=>{const a=r&&t===gl.TIME_SERIES?Zw(Yw.Outlier):Zw(t),s=Qc(t);return n.createElement(GI,{name:"type",value:e||s,classes:{paper:OI,root:OI,select:MI},options:a,onChange:i})},_R=e=>{var t=e,{onChange:i,panelData:r,isMetricsQuery:a,isOutlierQuery:s,visualizationData:o,updatePanelVisualSettings:l}=t,c=At(t,["onChange","panelData","isMetricsQuery","isOutlierQuery","visualizationData","updatePanelVisualSettings"]);switch(c.rendererType){case gl.TIME_SERIES:case gl.DISTRIBUTION:return n.createElement(vR,xt({onChange:i,panelData:r,visualizationData:o,isMetricsQuery:a,isOutlierQuery:s,updatePanelVisualSettings:l},c));case gl.SINGLE_VALUE_METRICS:return n.createElement(eI,xt({onChange:i,panelData:r},c));default:return null}},SR="visualSettingsContainer___rXw1z",bR="container___iY7GP",ER="visualizationTypeSelectorCard___nWPZ3",TR="visualizationTypeSelectorContent___iuBhH",xR={general:{},xy:{xDimension:[],yDimension:[],zDimension:[]},color:{}},CR=({settings:e,props:t})=>n.createElement("section",null,n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.panelSettings")),n.createElement(LC,{tileSize:"compact",tiles:t.visualizationTiles,activeType:e.rendererType,onVisualizationTypeClick:t.onVisualizationTypeSelected,tileCardClassName:ER,tileContentClassName:TR,dataSumoTest:"sharedAnalytics.displaySettings.visualizationTypeSelector"}),(e.rendererType===gl.TIME_SERIES||e.rendererType===gl.DISTRIBUTION)&&n.createElement(fR,{rendererType:e.rendererType,chartType:e.chartType,onChange:t.onChange,containsOutlierQuery:t.isOutlierQuery})),AR=({settings:e,updatePanelVisualSettings:t,props:i})=>n.createElement("section",{className:SR,"section-name":e.rendererType},n.createElement(_R,Ct(xt({onChange:i.onChange,panelData:i.panelData,isMetricsQuery:i.isMetricsQuery,isOutlierQuery:i.isOutlierQuery,visualizationData:i.visualizationData},e),{updatePanelVisualSettings:t}))),wR=({viewKey:e,panelData:t,containsMetricsQuery:i,containsOutlierQuery:a,visualSettings:s,visualizationTiles:o,onVisualizationTypeSelected:l,updatePanelVisualSettings:d,originalVisualSettings:u,visualizationData:p})=>{const{settings:h,onChange:m}=((e,t,i,a)=>{const s=n.useMemo((()=>{var e,i;return null!=(i=null==(e=t.general)?void 0:e.type)?i:jc.type}),[t]),o={[s]:(0,J.Z)((0,j.Z)(i,(0,ee.Z)(xR)))},[l,d]=(0,r.useStorage)(`panel_editor_${e}`,{status:"CLOSED",partialSettingsChangesByChartType:o},{storage:localStorage,serialize:JSON.stringify,deserialize:JSON.parse}),u=n.useCallback((e=>{d((0,g.Z)({},l,e))}),[d,l]);"CLOSED"===l.status&&u({status:"OPEN"});const p=n.useMemo((()=>{var e;return XT({mode:null==(e=t.general)?void 0:e.mode,panelType:ml.SUMO_SEARCH,chartType:s})}),[t,s]),h=Mw(s,t),m=n.useCallback(((e,i)=>{var r,n;if("type"===e){const e=(0,j.Z)(bu(i),(0,ee.Z)(xR)),n=l.partialSettingsChangesByChartType[i],s=(0,g.Z)({},(0,c.Z)(t,(0,ee.Z)(xR)),e,n,{general:{type:i,mode:null==(r=t.general)?void 0:r.mode}});return a(s),s}const o=h(e,i),d=null!=(n=l.partialSettingsChangesByChartType[s])?n:xR,p=Mw(s,d)(e,i);return u({partialSettingsChangesByChartType:{[s]:p}}),a(o),o}),[t,s,l,u,a,h]);return{settings:n.useMemo((()=>({rendererType:p,chartType:s,visualSettings:t})),[p,s,t]),onChange:m}})(e,s,u,d),y={panelData:t,isMetricsQuery:i,isOutlierQuery:a,visualizationTiles:o,onVisualizationTypeSelected:l,onChange:m,updatePanelVisualSettings:d,visualizationData:p};return n.createElement("div",{className:bR,"data-sumo-test":"newDashboard_settings_display"},n.createElement(CR,{settings:h,props:y}),n.createElement(AR,{settings:h,props:y,updatePanelVisualSettings:e=>{var t=e,{general:i}=t,r=At(t,["general"]);d(Ct(xt(xt({},s),r),{general:xt(xt({},s.general),i)}))}}))},IR={gridline:"gridline___WkuTs",label:"label___8uKB8",colorPicker:"colorPicker___76lHu"},RR={gridline:"gridline___15oGT",label:"label___FZxxT",colorPicker:"colorPicker___FmRBE"},DR=(0,a.withCssModulesTheme)({brandLight:RR,brandDark:IR},RR,(({color:e,label:t="",onChange:i,styles:r})=>n.createElement("div",{className:r.gridline},n.createElement("span",{className:r.label},t),n.createElement(a.ColorPicker,{className:r.colorPicker,autoApplyChanges:!0,colorCode:e,onChange:i,swatchesTabProps:{"data-sumo-test":"swatches-tab"},customTabProps:{"data-sumo-test":"custom-tab"}})))),OR={wrapper:"wrapper___1Fx-s",rangeRow:"rangeRow___dNLNR",fromRangeLabel:"fromRangeLabel___ZUZZa",toRangeLabel:"toRangeLabel___wTLDU"},NR={wrapper:"wrapper___RC3RB",rangeRow:"rangeRow___Qh5XH",fromRangeLabel:"fromRangeLabel___AU7R2",toRangeLabel:"toRangeLabel___i8xwY"},MR=(e,t)=>i=>{e({type:t,value:void 0!==i&&""!==i?Number(i):void 0})},kR=(0,a.withCssModulesTheme)({brandLight:NR,brandDark:OR},NR,(({min:e,fromValue:t,fromRangeLabel:i,toValue:r,toRangeLabel:a,onChange:s,styles:o})=>n.createElement("div",{className:o.wrapper},n.createElement("div",{className:o.fromRangeLabel},i),n.createElement("div",{className:o.rangeRow},n.createElement(uI,{placeholder:"Min",value:t,onChange:MR(s,"minimum"),validators:EI(e)}),n.createElement("span",{className:o.toRangeLabel},a),n.createElement(uI,{placeholder:"Max",value:r,onChange:MR(s,"maximum"),validators:EI(t)}))))),LR={label:"label___Baf1O"},PR={label:"label___Cr-7y"},FR=(0,a.withCssModulesTheme)({brandLight:PR,brandDark:LR},PR,(({axisName:e,visualizationSettings:t,styles:i})=>"axisY2"!==e?null:n.createElement(a.Text,{noWrap:!1,variant:"text",className:i.label},r.i18nUtil.get("sharedAnalytics.rightYAxisHint")))),UR="wrapper___TESJZ",VR=({value:e=!1,onChange:t})=>n.createElement("div",{className:UR},n.createElement(a.Select,{"data-sumo-test":"scale-selector",value:e,label:r.i18nUtil.get("sharedAnalytics.charts.chartAxisScaleTypeFieldLabel"),handleChange:e=>{const i=e.target.value;t(i)}},n.createElement(a.Select.Item,{value:!1,"data-sumo-test":"scale-option-linear"},r.i18nUtil.get("sharedAnalytics.charts.axisScaleTypeOption-linear")),n.createElement(a.Select.Item,{value:!0,"data-sumo-test":"scale-option-logarithmic"},r.i18nUtil.get("sharedAnalytics.charts.axisScaleTypeOption-logarithmic")))),BR=(0,oe.default)((()=>[nI({min:0,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0)}),aI({max:10,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMaxValue",10)}),sI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerValue")})])),$R="wrapper___0y3jg";function HR(e){return void 0===e?"":String(e)}const WR=({value:e,onChange:t,label:i="",hintText:r="",fullWidth:a=!1})=>{const s=(0,n.useCallback)((e=>{t(function(e){const t=parseInt(e);return Number.isNaN(t)?void 0:(0,ce.asUnitDecimals)(t)}(e))}),[t]);return n.createElement("div",{className:$R},n.createElement(uI,{validators:BR(),type:"number",value:HR(e),label:i,hintText:r,onChange:s,fullWidth:a}))},qR={wrapper:"wrapper___WVW1p",autoCompleteSecondaryAction:"autoCompleteSecondaryAction___4BZdU",secondary:"secondary___DKh-a"},jR={wrapper:"wrapper___3bbEI",autoCompleteSecondaryAction:"autoCompleteSecondaryAction___AyCqn",secondary:"secondary___CGu7k"},QR=ce.ALL_UNIT_OPTIONS.flatMap((e=>e.items.map((t=>({label:t.label,secondaryAction:t.value,value:t.value,categories:e.label?[e.label]:void 0}))))),zR=(0,a.withCssModulesTheme)({brandLight:jR,brandDark:qR},jR,(({unit:e={},label:t="",onChange:i,styles:r})=>{const[s,o]=(0,n.useState)((()=>{const{value:t=ce.UNIT_SYMBOL.None,isCustom:i}=e,r=(0,ce.getUnitBySymbol)(t);return!i&&r&&r.symbol&&r.name?{value:r.symbol,label:r.name}:{value:t,label:t}})),l=(0,n.useCallback)((([e])=>{if(e){const t=(0,j.Z)(e,"value","label"),r=t.value===t.label;o(t),i({value:t.value,isCustom:r})}else o({}),i({value:"",isCustom:!1})}),[i]);return n.createElement("div",{className:r.wrapper},n.createElement(a.AutoComplete,{allowCustomItem:e=>!(e=>QR.find((t=>t.label===e)))(e),label:t,items:QR,selectedItems:[s],onSelectedItemsChange:l,dataSumoTest:{input:"axesUnitInput",suggestions:"axesUnitSuggestions"},styleProps:{secondaryAction:r.autoCompleteSecondaryAction}}))})),GR="section___-vCsb",KR="sectionHeader___vceos",YR="title___xryWd",ZR="secondTitle___Wt5la",XR="showAxisToggle___we9S5",JR="wrapper___oUbNV",eD=({visualizationSettings:e={},updateVisualizationSettings:t,theme:i})=>{var s,o,l,c,d,p,h,m,g;const y=(0,n.useMemo)((()=>{var t;return null!=(t=e.axes)?t:{}}),[e.axes]),[v,f]=(0,n.useState)(null!=(o=null==(s=null==y?void 0:y.axisY)?void 0:s.title)?o:""),[_,S]=(0,n.useState)(null!=(c=null==(l=null==y?void 0:y.axisY2)?void 0:l.title)?c:""),[b,E]=(0,n.useState)(null!=(p=null==(d=null==y?void 0:y.axisX)?void 0:d.title)?p:"");n.useEffect((()=>{var e,t;f(null!=(t=null==(e=null==y?void 0:y.axisY)?void 0:e.title)?t:"")}),[null==(h=null==y?void 0:y.axisY)?void 0:h.title]),n.useEffect((()=>{var e,t;S(null!=(t=null==(e=null==y?void 0:y.axisY2)?void 0:e.title)?t:"")}),[null==(m=null==y?void 0:y.axisY2)?void 0:m.title]),n.useEffect((()=>{var e,t;E(null!=(t=null==(e=null==y?void 0:y.axisX)?void 0:e.title)?t:"")}),[null==(g=null==y?void 0:y.axisX)?void 0:g.title]);const T=i===il.BRANDLIGHT?_d.axes:i===il.BRANDDARK?Sd.axes:null,x=(0,n.useMemo)((()=>xt(xt(xt({},Jc.axes.axisY),null==T?void 0:T.axisY),y.axisY)),[y,T]),C=(0,n.useMemo)((()=>xt(xt(xt({},Jc.axes.axisY2),null==T?void 0:T.axisY2),y.axisY2)),[y,T]),A=(0,n.useMemo)((()=>xt(xt(xt({},Jc.axes.axisX),null==T?void 0:T.axisX),y.axisX)),[y,T]),w=(0,n.useMemo)((()=>{var t;return null==(t=e.overrides)?void 0:t.some((e=>!((0,u.Z)(e.queries)&&(0,u.Z)(e.series)||!("axisYType"in e.properties))&&e.properties.axisYType===ce.AxisYType.rightYAxis))}),[e.overrides]),I=(0,n.useCallback)(((i,r)=>t(Ct(xt({},e),{axes:Ct(xt({},y),{[i]:r})}),{})),[y,t,e]),R=(0,r.useDebounce)(((e,t)=>I(e,t)),op),D=(0,r.useDebounce)(((i,r)=>{t(Ct(xt({},e),{axes:Ct(xt({},y),{axisY:Ct(xt({},x),{[i]:r}),axisY2:Ct(xt({},C),{[i]:r})})}),{})}),op),O=(0,n.useCallback)(((e,t,i,r)=>{e(t,((e,t,i)=>{const r=Ct(xt({},e),{[t]:i});return void 0===i&&delete r[t],r.logarithmic&&(void 0!==r.minimum&&r.minimum<=0&&delete r.minimum,void 0!==r.maximum&&r.maximum<=0&&delete r.maximum),r})(y[t],i,r))}),[y]),N=({title:t,axisName:i,axisValue:s,"data-sumo-test":o})=>{const l="axisY2"!==i||"hideLabels"in s?!s.hideLabels:w,c=l&&!w;return n.createElement("div",{className:GR,"data-sumo-test":o},n.createElement("div",{className:KR},n.createElement(a.Text,{variant:"panel",className:ZR},t),n.createElement(a.Toggle,{toggled:l,onToggle:e=>{O(I,i,"hideLabels",!e)},"data-sumo-test":"show-axis",className:XR})),c&&n.createElement(FR,{axisName:i,visualizationSettings:e}),l&&n.createElement(n.Fragment,null,n.createElement(VR,{value:s.logarithmic,onChange:e=>{O(R,i,"logarithmic",e)}}),n.createElement(kR,{min:s.logarithmic?0:Number.MIN_SAFE_INTEGER,fromValue:s.minimum,fromRangeLabel:r.i18nUtil.get("sharedAnalytics.charts.axisRangeLabel"),toValue:s.maximum,toRangeLabel:r.i18nUtil.get("sharedAnalytics.charts.axisRangeMaximumLabel"),onChange:({type:e,value:t})=>O(R,i,e,t)}),n.createElement("div",{className:JR},n.createElement(a.TextField,{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.label"),value:"axisY2"===i?_:v,onChange:e=>{const t=e.currentTarget.value;"axisY2"===i?S(t):f(t),O(R,i,"title",t)},fullWidth:!0})),n.createElement(zR,{unit:s.unit,label:r.i18nUtil.get("sharedAnalytics.unitTitle"),onChange:({value:e,isCustom:t})=>{O(R,i,"unit",{value:e,isCustom:t})}}),n.createElement(WR,{label:r.i18nUtil.get("sharedAnalytics.unitDecimals"),value:s.unitDecimals,onChange:e=>{O(R,i,"unitDecimals",e)}})))};return n.createElement("div",null,(({title:e})=>n.createElement("div",{className:GR},n.createElement("div",{className:KR},n.createElement(a.Text,{variant:"panel",className:YR},e)),n.createElement(vI,{dataSumoTest:"axes-editor-y-axis-title-font-size",label:r.i18nUtil.get("sharedAnalytics.labelFontSize"),value:x.titleFontSize,onChange:e=>{D("titleFontSize",e)}}),n.createElement(vI,{dataSumoTest:"axes-editor-y-axis-label-font-size",label:r.i18nUtil.get("sharedAnalytics.unitFontSize"),value:x.labelFontSize,onChange:e=>{D("labelFontSize",e)}}),n.createElement(DR,{color:x.gridColor,label:r.i18nUtil.get("sharedAnalytics.axesEditor.gridLine"),onChange:e=>O(R,"axisY","gridColor",e.colorResult.hex)})))({title:r.i18nUtil.get("sharedAnalytics.axesEditor.yAxis")}),N({title:r.i18nUtil.get("sharedAnalytics.axesEditor.leftYAxis"),axisName:"axisY",axisValue:x,"data-sumo-test":"leftYAxis"}),N({title:r.i18nUtil.get("sharedAnalytics.axesEditor.rightYAxis"),axisName:"axisY2",axisValue:C,"data-sumo-test":"rightYAxis"}),(({title:e})=>n.createElement("div",{className:GR},n.createElement("div",{className:KR},n.createElement(a.Text,{variant:"panel",className:YR},e),n.createElement(a.Toggle,{toggled:!A.hideLabels,onToggle:e=>{O(I,"axisX","hideLabels",!e)},"data-sumo-test":"show-axis-x",className:XR})),!A.hideLabels&&n.createElement(n.Fragment,null,n.createElement(a.TextField,{label:r.i18nUtil.get("sharedAnalytics.queryBuilder.label"),value:b,onChange:e=>{const t=e.currentTarget.value;E(t),O(R,"axisX","title",t)},fullWidth:!0}),n.createElement(vI,{dataSumoTest:"axes-editor-x-axis-title-font-size",label:r.i18nUtil.get("sharedAnalytics.labelFontSize"),value:A.titleFontSize,onChange:e=>O(R,"axisX","titleFontSize",e)}),n.createElement(vI,{dataSumoTest:"axes-editor-x-axis-label-font-size",label:r.i18nUtil.get("sharedAnalytics.unitFontSize"),value:A.labelFontSize,onChange:e=>O(R,"axisX","labelFontSize",e)}))))({title:r.i18nUtil.get("sharedAnalytics.axesEditor.xAxis")}))},tD=(0,oe.default)((()=>[nI({min:0,errorMessage:r.i18nUtil.get("sharedAnalytics.outOfRangeMinValue",0)}),sI({errorMessage:r.i18nUtil.get("sharedAnalytics.integerValue")})])),iD="container___oXHFJ",rD="toggleContainer___uiZ6R",nD="verticalAlignRadios___iFzG2",aD=e=>Object.values(ce.LegendPosition).some((t=>t===e)),sD=({value:e,onChange:t})=>n.createElement("div",null,n.createElement(a.AssistiveText,null,r.i18nUtil.get("sharedAnalytics.legendEditor.position")),n.createElement("div",{className:nD},[{position:ce.LegendPosition.RIGHT,i18nKey:"sharedAnalytics.legendEditor.legendPosition.right"},{position:ce.LegendPosition.BOTTOM,i18nKey:"sharedAnalytics.legendEditor.legendPosition.bottom"}].map((({position:i,i18nKey:s})=>n.createElement(a.Radio,{key:i,label:r.i18nUtil.get(s),value:i,onChange:()=>t(i),checked:e===i}))))),oD=({value:e,onChange:t,label:i,fullWidth:r})=>{const a=(0,n.useCallback)((e=>{t(parseInt(e))}),[t]);return n.createElement(uI,{validators:tD(),type:"number",label:i,value:e,onChange:a,fullWidth:r,useInternalState:!1})};function lD(e,t){const i=e.legend;if(wT(e)){if(!t)return xt({enabled:!1},i);if(void 0===(null==i?void 0:i.enabled))return xt({enabled:!0},i)}return null!=i?i:{enabled:!0}}const cD=({visualizationSettings:e,updateVisualizationSettings:t,isEditMode:i=!1})=>{var s,o;const l=De.currentUserHelper.hasFeatureFlag("UIHideLegendForCategoricalChartByDefault")?lD(e,i):null!=(s=e.legend)?s:{enabled:!0},c=(i,r)=>t(Ct(xt({},e),{legend:Ct(xt({},l),{[i]:r})})),d=(0,r.useDebounce)(c,op);return n.createElement("div",{className:iD},n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.legendEditor.legend")),n.createElement("section",null,n.createElement(a.Toggle,{toggled:l.enabled,onToggle:e=>c("enabled",e),className:rD,"data-sumo-test":"legendEditor.showLegend"},r.i18nUtil.get("sharedAnalytics.showLegend")),n.createElement(sD,{value:aD(l.verticalAlign)?l.verticalAlign:Jc.legend.verticalAlign,onChange:e=>c("verticalAlign",e)})),n.createElement(a.Text,{variant:"panel"},r.i18nUtil.get("sharedAnalytics.legendEditor.displayProperties")),n.createElement("section",null,n.createElement(vI,{label:r.i18nUtil.get("sharedAnalytics.fontSize"),hintText:r.i18nUtil.get("sharedAnalytics.fontSizeRange"),value:null!=(o=l.fontSize)?o:Jc.legend.fontSize,onChange:e=>d("fontSize",e),fullWidth:!0}),(null==(u=e.general)?void 0:u.type)===le.VisualSettingsType.HEATMAP?null:n.createElement(n.Fragment,null,l.verticalAlign===ce.LegendPosition.RIGHT?n.createElement(oD,{key:"maxWidth",label:r.i18nUtil.get("sharedAnalytics.legendEditor.maxWidth"),value:null!=(p=l.maxWidth)?p:Jc.legend.maxWidth,onChange:e=>c("maxWidth",e),fullWidth:!0}):n.createElement(oD,{key:"maxHeight",label:r.i18nUtil.get("sharedAnalytics.legendEditor.maxHeight"),value:null!=(h=l.maxHeight)?h:Jc.legend.maxHeight,onChange:e=>c("maxHeight",e),fullWidth:!0}),n.createElement(a.Toggle,{toggled:null!=(m=l.showAsTable)?m:Jc.legend.showAsTable,onToggle:e=>c("showAsTable",e)},r.i18nUtil.get("sharedAnalytics.legendEditor.showTable")),n.createElement(a.Toggle,{toggled:null!=(g=l.wrap)?g:Jc.legend.wrap,onToggle:e=>c("wrap",e)},r.i18nUtil.get("sharedAnalytics.legendEditor.wrapLegend")))));var u,p,h,m,g},dD="header___AKzOE",uD="info___WhtbQ",pD="dashboard___1C5mW",hD="showAll___e9Y4I",mD="noResults___-GxkL",gD=(0,n.memo)((e=>{let t,i,s,o;return e.showAll||e.dashboards.length<=7?(t=e.dashboards,i=!0):(t=e.dashboards.slice(0,5),i=!1),s=i?null:n.createElement(a.TextButton,{className:hD,onClick:e.onShowAllClick},r.i18nUtil.get("sharedAnalytics.recommendedDashboards.showAll")),o=e.dashboards.length?n.createElement(n.Fragment,null,n.createElement(a.List,{border:!1,dense:!0},t.map((t=>n.createElement(a.List.Item,{key:t.accessKey,className:pD,onClick:()=>{e.onDashboardClick(t)}},n.createElement(a.List.PrimaryAction,null,n.createElement(a.Icon,{name:"new-dashboard-view-icon"})),n.createElement(a.List.Text,null,t.name))))),s):n.createElement("div",{className:mD},n.createElement(a.Text,{noWrap:!1},r.i18nUtil.get("sharedAnalytics.recommendedDashboards.noResults"))),n.createElement("div",null,n.createElement("div",{className:dD},n.createElement(a.Text,{variant:"subtitle"},r.i18nUtil.get("sharedAnalytics.recommendedDashboards.title")),n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.recommendedDashboards.info"),placement:"top",multiline:!0},n.createElement(a.Icon,{className:uD,name:a.IconName.Info}))),o)})),yD="header___38dga",vD="info___L0KbI",fD="log___Y0GvO",_D="noResults___vaFEv",SD=(0,n.memo)((e=>{let t;return t=e.logs.length?n.createElement(a.List,{border:!1,dense:!0},e.logs.map((t=>n.createElement(a.List.Item,{key:t.drilldownType,className:fD,onClick:()=>{e.onLogClick(t)}},n.createElement(a.List.PrimaryAction,null,n.createElement(a.Icon,{name:a.SvgName.SearchViewIcon})),n.createElement(a.List.Text,null,r.i18nUtil.get(`sharedAnalytics.relatedLogs.types.${t.drilldownType}`)))))):n.createElement("div",{className:_D},n.createElement(a.Text,{noWrap:!1},r.i18nUtil.get("sharedAnalytics.relatedLogs.noResults.beforeLink"),n.createElement(a.TextLink,{onClick:e.onFieldsClick},r.i18nUtil.get("sharedAnalytics.relatedLogs.noResults.link")),r.i18nUtil.get("sharedAnalytics.relatedLogs.noResults.afterLink"))),n.createElement("div",null,n.createElement("div",{className:yD},n.createElement(a.Text,{variant:"subtitle"},r.i18nUtil.get("sharedAnalytics.relatedLogs.title")),n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.relatedLogs.info"),placement:"top",multiline:!0},n.createElement(a.Icon,{className:vD,name:a.IconName.Info}))),t)})),bD="tooltip___NHv6b",ED=n.memo((({timeRange:e})=>{var t;const i=e&&(null==(t=Ie.timeRangeUtil.parseTimeRangeDetails(e))?void 0:t.startTime),s=De.currentUserHelper.getIntDynamicProperty("ui_metrics_autocomplete_range");return i&&s&&(Date.now()-i)/864e5>s?n.createElement(a.Tooltip,{title:r.i18nUtil.get("sharedAnalytics.queryBuilder.suggestionRetentionExceeded",s),placement:"left",className:bD},n.createElement(a.Icon,{name:"exclamation-triangle","data-sumo-test":"retention-period-exceeded-message"})):null})),TD={measureTrePopupOpenStart:()=>{var e,t,i;de.basicPerformanceMeasurement.createMark({id:"tre",action:"open_tre",checkpoint:"openTrePopupStart",module:null!=(i=null==(t=null==(e=Re.applicationState)?void 0:e.current)?void 0:t.name)?i:"",component:"Tre"})},measureTrePopupOpenEnd:()=>{de.basicPerformanceMeasurement.measure({id:"tre",name:"open_tre",from:"openTrePopupStart",to:"openTrePopupEnd"})}};var xD=(e=>(e.DAY="DAY",e.TIME="TIME",e))(xD||{});const CD=(e,t=!1,i)=>{let r="L";return"TIME"===i&&(r+=" LTS"),t&&(r+=" ZZ"),moment(e).format(r)},AD=(e,t=!1,i="TIME")=>`${CD(e.startTime,t,i)} to ${CD(e.endTime,t,i)}`,wD=e=>{var t;return null==(t=(0,Re.parseTimeText)(AD(e,!1)))?void 0:t.details},ID=Object.freeze(Object.defineProperty({__proto__:null,TIME_PRECISION:xD,formatDate:CD,formatDateRange:AD,parseDateRange:wD,convertTimeDetailsToBeginBoundedTimeRange:Re.convertTimeDetailsToBeginBoundedTimeRange,convertBeginBoundedTimeRangeToTimeDetails:Re.convertBeginBoundedTimeRangeToTimeDetails,convertCompleteLiteralTimeRangeToTimeDetails:Re.convertCompleteLiteralTimeRangeToTimeDetails,convertResolvableTimeRangeToTimeDetails:Re.convertResolvableTimeRangeToTimeDetails,parseTimeText:Re.parseTimeText},Symbol.toStringTag,{value:"Module"})),RD=[{key:"last15Minutes",label:"Last 15 Minutes",value:"-15m"},{key:"last60Minutes",label:"Last 60 Minutes",value:"-60m"},{key:"last3Hours",label:"Last 3 Hours",value:"-3h"},{key:"last6Hours",label:"Last 6 Hours",value:"-6h"},{key:"last24Hours",label:"Last 24 Hours",value:"-24h"},{key:"today",label:"Today",value:"today"},{key:"yesterday",label:"Yesterday",value:"yesterday"},{key:"last3Days",label:"Last 3 Days",value:"-3d"},{key:"last7Days",label:"Last 7 Days",value:"-7d"},{key:"thisWeek",label:"This Week",value:"this week"},{key:"previousWeek",label:"Previous Week",value:"previous week"},{key:"last14Days",label:"Last 14 Days",value:"-14d"},{key:"last30Days",label:"Last 30 Days",value:"-30d"},{key:"thisMonth",label:"This Month",value:"this month"},{key:"previousMonth",label:"Previous Month",value:"previous month"}],DD={key:"inheritDashboard",label:"Inherit dashboard's time range",value:""},OD={RELATIVE:{label:"Relative",value:"relative"},RECENT:{label:"Recent",value:"recent"},CUSTOM:{label:"Custom",value:"custom"}};var ND=(e=>(e.RELATIVE="RELATIVE",e.RECENT="RECENT",e.CUSTOM="CUSTOM",e))(ND||{});const MD="ui.tre",kD="ui.saved.tre",LD=10,PD={s:"s",m:"m",h:"h",d:"D",w:"W"},FD="-15m",UD="tre-popper___j3SB-",VD="container___v8pII",BD="treInput___I4H7l",$D="tre-input-form-control___OPJI3",HD="menu___GWyPk",WD=(e,t)=>{const i=e.startErrorMessage,r=e.endErrorMessage,a=Ie.timeZoneServiceV2.getUserTimeZone(),s=e=>Ie.userDateService.formatDateTimeSmart(e,a,!t&&void 0,t),o=e.hasStartErrors?i:s(e.startTime),l=e.hasEndErrors?r:s(e.endTime);return n.createElement("div",null,n.createElement("span",null,o),n.createElement("br",null),n.createElement("span",null,l))};class qD extends n.Component{constructor(e){if(super(e),this.inputRef=n.createRef(),this.menuRef=n.createRef(),this.updateTooltipContent=e=>{this.tooltip=WD(e,this.props.dateTimeFormat)},this.handleClick=e=>{var t,i;this.props.shouldToggleTreMode(e,[this.inputRef,this.menuRef])&&this.props.toggleMode&&!this.state.hasParsingError&&(this.props.toggleMode(hO.DISPLAY),null==(i=(t=this.props).handleClickOutside)||i.call(t,this.state.text))},this.onBlur=e=>{var t,i;this.props.shouldToggleTreMode(e,[this.inputRef,this.menuRef])&&this.props.toggleMode&&!this.state.hasParsingError&&(this.props.toggleMode(hO.DISPLAY),null==(i=(t=this.props).onInputBlur)||i.call(t,this.state.text))},this.onEditTextBox=e=>{const t=e.currentTarget.value;this.setState({text:t});const i=0===t.length||!this.state.showPopup;this.openPopup(i);const r=(0,Re.parseTimeText)(t);this.updateTooltipContent(r),this.setState({hasParsingError:r.errors>0}),this.props.handleParseError&&this.props.handleParseError(r.errors>0)},this.onTextBoxKeyDown=e=>{var t,i;const{onHitEnter:n,handleParseError:a}=this.props,{hasParsingError:s}=this.state;e.keyCode===r.NAVIGATION_KEYS.ENTER.keyCode&&n&&!s&&n(this.state.text),e.keyCode===r.NAVIGATION_KEYS.ESC.keyCode&&(!s||!a)&&(null==(i=(t=this.props).onInputBlur)||i.call(t,this.state.text))},this.openPopup=(e=!0)=>{this.setState({showPopup:e});const{onPopupOpenStart:t,onPopupOpenEnd:i}=this.props;e&&(null==t||t(),i&&setTimeout((()=>{i()})))},this.getRenderingInput=e=>{var t;const{hasParsingError:i,text:r}=this.state,s=i?"error":"default",o=this.props.tooltipPlacement||"left";return n.createElement(a.Tooltip,{title:this.tooltip,placement:o,type:s},n.createElement(a.TextField,Ct(xt({},e),{inputProps:Ct(xt({},e.inputProps),{size:r.length}),className:BD,classes:{root:$D},value:r,placeholder:null!=(t=e.placeholder)?t:FD,onChange:this.onEditTextBox,inputRef:this.inputRef,error:i,onKeyDown:this.onTextBoxKeyDown,onBlur:this.onBlur})))},this.state={text:this.props.value||"",showPopup:!1,hasParsingError:!1},this.props.value){const e=(0,Re.parseTimeText)(this.props.value);this.state={text:this.props.value,showPopup:!1,hasParsingError:e.errors>0},this.updateTooltipContent(e)}}componentDidMount(){document.addEventListener("mousedown",this.handleClick,!1),this.openPopup(),this.inputRef.current.select()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClick,!1)}render(){const e=this.props,{menuComponent:t,showPopup:i,textValidator:r,toggleMode:a,onHitEnter:s,shouldToggleTreMode:o,popUpAnchor:l,menuPlacement:c="auto",onBlur:d,styleProps:u}=e,p=At(e,["menuComponent","showPopup","textValidator","toggleMode","onHitEnter","shouldToggleTreMode","popUpAnchor","menuPlacement","onBlur","styleProps"]),h=this.state.showPopup?"tre-menu":null;return n.createElement("div",{className:ue(VD,null==u?void 0:u.treInputContainer)},this.getRenderingInput(p),this.props.disabled?null:n.createElement(ct.Z,{id:h,className:UD,open:this.state.showPopup,anchorEl:l.current,placement:c,modifiers:jD},(()=>n.createElement("div",{className:HD,ref:this.menuRef},t))))}}const jD={preventOverflow:{enabled:!0,boundariesElement:"viewport",padding:16}};function QD(e){const t=e.split(" ");let i=e;if("last"===t[0].toLowerCase()&&t.length>2){i="-"+t[1]+function(e){const[t]=e.toLowerCase();return PD[t]}(t[2])}return i}const zD={customPanel:"customPanel___VniP1",controlContainer:"controlContainer___19EJr",btnContainer:"btnContainer___HeEZC"},GD={customPanel:"customPanel___SZDUp",controlContainer:"controlContainer___G7AZU",btnContainer:"btnContainer___vub2V"};class KD extends n.Component{constructor(e){super(e),this.startDate=this.props.startDate,this.endDate=this.props.endDate,this.handleCalendarSelected=e=>{let t=new Date(e.endDate);t=new Date(t.setDate(e.endDate.getDate()+1)),this.setState({inputStartDate:e.startDate,inputEndDateOfCalendar:e.endDate,inputEndDate:t,disableBtn:!1}),this.updateTimeRange(e.startDate,t)},this.handleClockChange=e=>{const t=!e.isRangeError&&0===e.start.error.length&&0===e.end.error.length;this.setState({disableBtn:!t}),this.updateTimeRange(e.start.validDate,e.end.validDate)},this.updateTimeRange=(e,t)=>{this.startDate=e,this.endDate=t},this.updateTimeRangeCallback=()=>{this.props.onTimeRangeChange&&this.props.onTimeRangeChange({startTime:this.startDate.getTime(),endTime:this.endDate.getTime()})};const t=new Date(e.endDate),i=new Date(e.startDate);(function(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()})(t)&&t.getDate()>i.getDate()&&t.setDate(t.getDate()-1),this.state={inputStartDate:e.startDate,inputEndDate:e.endDate,inputEndDateOfCalendar:t,disableBtn:!1}}render(){const{inputStartDate:e,inputEndDate:t,inputEndDateOfCalendar:i}=this.state,{styles:s,minDate:o}=this.props;return n.createElement("form",{className:s.customPanel,onSubmit:e=>{e.preventDefault(),this.updateTimeRangeCallback()}},this.props.children,n.createElement(ce.DateRangePicker,{minDate:o,startDate:e,endDate:i,onTimeRangeSelected:this.handleCalendarSelected}),n.createElement("div",{className:s.controlContainer},n.createElement(ce.TimeRangeInput,{startTime:e,endTime:t,onChange:this.handleClockChange,precision:this.props.precision,key:`${e.toString()} ${t.toString()}`,timeFormat:this.props.timeFormat?r.DATE_FORMATS[this.props.timeFormat]():void 0}),n.createElement("div",{className:s.btnContainer},n.createElement(a.Button,{color:"primary",buttonProps:{type:"submit"},disabled:this.state.disableBtn,"data-sumo-test":"custom-panel-apply-button"},"Apply"))))}}const YD=(0,a.withCssModulesTheme)({brandLight:GD,brandDark:zD},GD,KD),ZD="prettyBox___zUxer",XD="mutable___m3IC9",JD="error___FhHdm",eO="tempColor___dnUVy";function tO({children:e,onClick:t,error:i=!1,rootProps:r,readOnly:a,tempColor:s}){const o=ue(ZD,{[XD]:!a,[JD]:i,[eO]:s});return n.createElement("div",xt({className:o,onClick:t},r),e)}const iO="overrideContent___xW3d7",rO=e=>n.createElement(a.Dialog,{dialogSize:"regular",open:e.open},n.createElement(a.Dialog.Title,null,It.timeRangeDefault.header),n.createElement(a.Dialog.Content,null,n.createElement("div",{className:iO},n.createElement("span",null,It.timeRangeDefault.content)),n.createElement(a.Checkbox,{label:It.timeRangeDefault.override,disabled:!1,indeterminate:!1,value:"start",size:"regular",solidFill:!1,colorVariation:"blue",checked:e.isDashboardPanelOverridden,onChange:(t,i)=>{var r;null==(r=e.onDashboardPanelOverride)||r.call(e,i)}})),n.createElement(a.Dialog.Actions,null,n.createElement(a.Button,{color:"secondary",onClick:e.dialogCancel},It.timeRangeDefault.dialogCancel),n.createElement(a.Button,{color:"primary",onClick:e.setAsDefault},It.timeRangeDefault.setAsDefault))),nO="treDropdown___h4tos",aO={transformOrigin:{vertical:"top",horizontal:"right"},position:{vertical:"bottom",horizontal:"right"}};function sO({set:e,revert:t,isRootPanel:i}){const r=i?It.timeRangeDefault.setAsDefault:It.timeRangeDefault.setAsPanelDefault;return n.createElement("div",{className:nO,"data-sumo-test":"set-default-dropdown"},n.createElement(a.Menu,{dense:!0,anchor:aO,btnRenderer:e=>n.createElement(a.Tooltip,{title:It.timeRangeDefault.moreOptions,placement:"top"},n.createElement(a.IconButton,{"data-sumo-test":"newDashboard.setDefaultTR",icon:"angleDown",size:"small",onClick:e}))},n.createElement(a.Menu.Item,{key:"revertToDefault","data-sumo-test":"sharedAnalytics.timeRangeDefault.revertToDefault",onClick:t},n.createElement(a.Menu.Text,null,It.timeRangeDefault.revertToDefault)),n.createElement(a.Menu.Item,{key:"setAsDefault","data-sumo-test":"newDashboard-timeRange-setAsDefault",onClick:e},n.createElement(a.Menu.Text,null,r))))}const oO={prettyBox:"prettyBox___-qUlc",tre:"tre___EFipl",hideIcon:"hideIcon___pJHUI","tre-input-mode":"tre-input-mode___1OVvl",treInputMode:"tre-input-mode___1OVvl","tre-full-width":"tre-full-width___zi6QK",treFullWidth:"tre-full-width___zi6QK","tre-popper":"tre-popper___4D1m6",trePopper:"tre-popper___4D1m6",container:"container___1Kjzc","tre-input":"tre-input___u-sSi",treInput:"treInput___Dmu3q","tre-input-form-control":"tre-input-form-control___1ICnW",treInputFormControl:"tre-input-form-control___1ICnW",menu:"menu___khax7",listItem:"listItem___YgHc6",listItemCheckbox:"listItemCheckbox___Ef51k",listItemCheckboxCustom:"listItemCheckboxCustom___D50LX",listItemCheckboxRoot:"listItemCheckboxRoot___V-94Z","tre-wrapper":"tre-wrapper___GE-Tj",treWrapper:"tre-wrapper___GE-Tj",clock:"clock___vDobQ","tre-title-container":"tre-title-container___KVfi2",treTitleContainer:"tre-title-container___KVfi2","tre-title-input":"tre-title-input___CgrVy",treTitleInput:"tre-title-input___CgrVy","tab-container":"tab-container___6sa4A",tabContainer:"tab-container___6sa4A"},lO={prettyBox:"prettyBox___RID7U",tre:"tre___7oToG",hideIcon:"hideIcon___zDcMI","tre-input-mode":"tre-input-mode___D7o3-",treInputMode:"tre-input-mode___D7o3-","tre-full-width":"tre-full-width___oP3jj",treFullWidth:"tre-full-width___oP3jj","tre-popper":"tre-popper___j121t",trePopper:"tre-popper___j121t",container:"container___BaNN0","tre-input":"tre-input___gCMvT",treInput:"treInput___xRJHJ","tre-input-form-control":"tre-input-form-control___v2wMD",treInputFormControl:"tre-input-form-control___v2wMD",menu:"menu___rW0fS",listItem:"listItem___y6AE7",listItemCheckbox:"listItemCheckbox___x88sl",listItemCheckboxCustom:"listItemCheckboxCustom___qZXJP",listItemCheckboxRoot:"listItemCheckboxRoot___pE5nh","tre-wrapper":"tre-wrapper___BWCIo",treWrapper:"tre-wrapper___BWCIo",clock:"clock___A1C-V","tre-title-container":"tre-title-container___BJgNd",treTitleContainer:"tre-title-container___BJgNd","tre-title-input":"tre-title-input___exK-0",treTitleInput:"tre-title-input___exK-0","tab-container":"tab-container___gTGTf",tabContainer:"tab-container___gTGTf"},cO=(e,t)=>{const i=t||Ie.timeZoneServiceV2.getUserTimeZone(),r=moment(e).tz(i).format();return new Date(r.substring(0,19))},dO=e=>(JSON.parse(r.localStore.getItem(MD))||{})[e]||[],uO=(e,t)=>{const i=JSON.parse(r.localStore.getItem(MD))||{};void 0===i[e]&&(i[e]=[]);const n=i[e],a=n.indexOf(t);a>-1&&n.splice(a,1),n.unshift(t),n.length>LD&&n.pop(),localStorage.setItem(MD,JSON.stringify(i))},pO=e=>(JSON.parse(r.sessionStore.getItem(kD))||{})[e]||{};var hO=(e=>(e.DISPLAY="display",e.INPUT_WITH_MODAL="input_with_modal",e))(hO||{});class mO extends n.Component{constructor(e){super(e),this.tooltip="",this.popUpAnchor=n.createRef(),this.hasModifiedCheckbox=!1,this.componentDidUpdate=e=>{const t=this.props.value,i=this.props.now;if(t&&e.value!==t||i&&e.now!==i){const e=(0,Re.parseTimeText)(t),i=(0,r.ensureDefined)(e.startTime),n=(0,r.ensureDefined)(e.endTime);this.setState({startTime:i,endTime:n,value:t}),this.onUpdateTimeRange(e)}},this.onUpdateTimeRange=e=>{const{onChange:t,suppressInitialOnChange:i}=this.props;this.updateTooltipContent(e),t&&!i&&t(e,!this.props.temporaryTimeRangeEnabled&&this.hasModifiedCheckbox)},this.updateTooltipContent=e=>{this.tooltip=WD(e,this.props.dateTimeFormat)},this.handleSaveCheckboxClick=(e,t)=>{this.setState({shouldSaveOnClose:t}),this.hasModifiedCheckbox=!this.hasModifiedCheckbox},this.openTreInput=()=>{this.props.readOnly||this.toggleMode("input_with_modal")},this.handleTabClick=e=>{this.setState({activeTab:e})},this.toggleMode=e=>{this.setState({mode:e}),this.props.onModeChange&&this.props.onModeChange(e)},this.applyRelativeTime=e=>{this.setState({value:e.value}),this.postApplyTimeRange(e.value,!0)},this.applyLiberalTime=e=>{this.setState({value:e}),this.postApplyTimeRange(e,!0)},this.saveForRevert=({parsedTime:e,isRootPanel:t,inheritedFromDashboard:i})=>{const n=this.makeConsistentTimeRange(e);if(void 0!==n&&void 0!==n.details){const e={consistentTR:n,isRootPanel:t,inheritedFromDashboard:i};((e,t)=>{const i=JSON.parse(r.sessionStore.getItem(kD))||{};i[e]=t,r.sessionStore.setItem(kD,JSON.stringify(i))})(this.props.name,e)}},this.shouldShowTemporaryTimeRange=e=>{var t;if(!this.props.temporaryTimeRangeEnabled)return!1;if(null!=(t=this.props)&&t.value){const t=pO(this.props.name),i=t.inheritedFromDashboard,r=(0,Re.parseTimeText)(e),n=this.makeConsistentTimeRange(r),a=t.consistentTR.details===n.details;return""===e?!i:!a}return!1},this.onHitEnter=e=>{this.applyLiberalTime(e),"function"==typeof this.props.onHitEnter&&this.props.onHitEnter(e)},this.handleOnBlur=e=>{const{allowChangeOnBlur:t}=this.props;this.postApplyTimeRange(t?e:void 0,t)},this.applyCustomRange=e=>{const t=AD(e,!1,this.props.precision);this.setState({value:t}),this.postApplyTimeRange(t,!0)},this.makeConsistentTimeRange=e=>((!e.details||"[]"===e.details)&&void 0!==e.startTime&&void 0!==e.endTime&&(e.details=`[{"t":"absolute","d":${e.startTime}},{"t":"absolute","d":${e.endTime}}]`),e),this.postApplyTimeRange=(e=this.state.value,t=!1)=>{var i;this.toggleMode("display");const r=(0,Re.parseTimeText)(e);this.props.name&&uO(this.props.name,e);const n=this.shouldShowTemporaryTimeRange(e);this.setState({startTime:r.startTime,endTime:r.endTime,showTemporaryTimeRange:n}),this.updateTooltipContent(r);const a=!this.props.temporaryTimeRangeEnabled&&!this.props.showSaveOption||this.state.shouldSaveOnClose,s=!!this.props.allowDuplicateTimeRangeChange||(r.details!==(0,Re.parseTimeText)(null!=(i=this.props.value)?i:"").details||(this.props.temporaryTimeRangeEnabled?a:this.hasModifiedCheckbox));if(this.props.onChange&&s){const e=this.makeConsistentTimeRange(r);e.isTimeRangeTemporary=n,this.props.onChange(e,a,{isNewTimeRangeApplied:t})}},this.setRevert=()=>{const e=pO(this.props.name);this.setState({shouldSaveOnClose:!0,showTemporaryTimeRange:!1},(()=>{e&&(e.inheritedFromDashboard?this.postApplyTimeRange("",!0):this.postApplyTimeRange(e.consistentTR.value,!0))}))},this.isRootPanel=e=>!!e.name&&e.name.startsWith("newDashboard"),this.setDefault=()=>{const{hasPanelsWithCustomTimerange:e}=this.props;this.isRootPanel(this.props)&&e?this.setState({dialogOpen:!0}):this.setAsDefault()},this.dialogCancel=()=>{this.setState({dialogOpen:!1})},this.setAsDefault=()=>{this.setState({shouldSaveOnClose:!0,showTemporaryTimeRange:!1,dialogOpen:!1},(()=>{const{value:e,name:t}=this.props;if("string"==typeof e){const i=""===dO(t)[0];this.saveForRevert({parsedTime:(0,Re.parseTimeText)(e),isRootPanel:this.isRootPanel(this.props),inheritedFromDashboard:i}),this.postApplyTimeRange(i?"":e,!0)}}))},this.renderSaveCheckbox=(e=!1)=>{const{styles:t,saveOptionLabel:i,saveOptionDataTest:r}=this.props,s=ue(t.listItem,t.listItemCheckbox,{[t.listItemCheckboxCustom]:e});return this.props.showSaveOption&&n.createElement(a.List.Item,{className:s,"data-sumo-test":r},n.createElement(a.Checkbox,{label:i,checked:this.state.shouldSaveOnClose,onChange:this.handleSaveCheckboxClick,classes:{root:t.listItemCheckboxRoot}}))},this.wrapInTooltip=e=>n.createElement(a.Tooltip,{title:this.tooltip,placement:"top",type:"default"},e),this.getTreMenuComponent=()=>{const{styles:e}=this.props;return this.tabs.length>0?n.createElement(a.Tabs,{tabs:this.tabs,activeTab:this.state.activeTab,onTabClick:this.handleTabClick,styleProps:{tabsContainer:e.tabContainer},rootProps:this.props.menuProps}):this.tabs[0].component},this.getDefaultTabsConfig=()=>{const e=[];return e.push(this.getTabsConfig().RELATIVE),this.props.name&&dO(this.props.name).length>0&&e.push(this.getTabsConfig().RECENT),e.push(this.getTabsConfig().CUSTOM),e},this.getTabsConfig=()=>{const{styles:e}=this.props;return{RELATIVE:this.getRelativeTabConfig(this.props),RECENT:{label:OD.RECENT.label,value:OD.RECENT.value,"data-sumo-test":"tre-recent-tab",component:n.createElement(a.List,{dense:!0,border:!1},this.props.temporaryTimeRangeEnabled?"":this.renderSaveCheckbox(),(this.props.name?dO(this.props.name):[]).map((t=>n.createElement(a.List.Item,{key:t,onClick:()=>this.applyLiberalTime(t),className:e.listItem},n.createElement(a.List.Text,{title:t},t)))))},CUSTOM:{label:OD.CUSTOM.label,value:OD.CUSTOM.value,"data-sumo-test":"tre-custom-tab",component:n.createElement(YD,{startDate:cO(this.state.startTime),endDate:cO(this.state.endTime),onTimeRangeChange:this.applyCustomRange,precision:this.props.precision,minDate:this.props.minDate,timeFormat:this.props.timeFormat},this.props.temporaryTimeRangeEnabled?"":this.renderSaveCheckbox(!0))}}};const t=new Date,i=new Date;i.setDate(i.getDate()+1);const s={activeTab:OD.RELATIVE.value,mode:"display",value:e.value||"",startTime:t.getTime(),endTime:i.getTime(),showTemporaryTimeRange:!1,dialogOpen:!1};if(e.value){const t=(0,Re.parseTimeText)(e.value,void 0,e.now);s.startTime=(0,r.ensureDefined)(t.startTime),s.endTime=(0,r.ensureDefined)(t.endTime),this.onUpdateTimeRange(t),this.saveForRevert({parsedTime:t,isRootPanel:this.isRootPanel(this.props),inheritedFromDashboard:!e.forceTreVisible&&!this.isRootPanel(e)})}this.state=s}get tabs(){let e=[];return e=this.props.tabs?this.props.tabs.map((e=>this.getTabsConfig()[e])):this.getDefaultTabsConfig(),e}getRelativeTabConfig(e,t){var i;let r=null!=(i=this.props.relativeTimeOptions)?i:RD;this.props.addInheritDashboardOption&&(r=[DD,...r]);const{styles:s}=this.props;return{label:OD.RELATIVE.label,value:OD.RELATIVE.value,"data-sumo-test":"tre-relative-tab",component:n.createElement(a.List,{dense:!0,border:!1},this.props.temporaryTimeRangeEnabled?"":this.renderSaveCheckbox(),r.map((e=>n.createElement(a.List.Item,{key:e.value,onClick:()=>this.applyRelativeTime(e),className:s.listItem},n.createElement(a.List.Text,null,e.label)))))}}shouldToggleTreMode({target:e},t){try{if(t.some((({current:t})=>!!t&&t.contains(e))))return!1}catch(e){return!1}return!0}getTreDisplayComponent(e){const{styles:t,styleProps:i}=this.props;return n.createElement("div",{className:ue(t.treTitleContainer,t.treTemp,null==i?void 0:i.treDisplayComponent)},n.createElement(tO,xt({},e)))}render(){var e;const{value:t,mode:i}=this.state,r=QD((0,u.Z)(this.props.value)?t:this.props.value),s=this.props,{onChange:o,tabs:l,precision:c,fullWidth:d,refreshInterval:p,onRefreshIntervalChange:h,suppressInitialOnChange:m,displayFieldProps:g,treInputProps:y,menuPlacement:v,styles:f,"data-sumo-test":_,onHitEnter:S,hideIcon:b,tooltipPlacement:E,handleParseError:T,readOnly:x,isTimeRangeTemporaryOverride:C}=s,A=At(s,["onChange","tabs","precision","fullWidth","refreshInterval","onRefreshIntervalChange","suppressInitialOnChange","displayFieldProps","treInputProps","menuPlacement","styles","data-sumo-test","onHitEnter","hideIcon","tooltipPlacement","handleParseError","readOnly","isTimeRangeTemporaryOverride"]),I=ue(f.tre,this.props.className,{[f.treFullWidth]:d,[f.treInputMode]:"input_with_modal"===i,[f.hideIcon]:b}),R=null!=(e=this.props.formatTextField)?e:w.Z,D=(0,Re.parseTimeText)(r).errors>0,O=this.props.temporaryTimeRangeEnabled&&(C||this.state.showTemporaryTimeRange),N=this.getTreDisplayComponent({children:R(r),error:D,onClick:this.openTreInput,rootProps:g,tempColor:O,readOnly:x});return n.createElement("div",{className:I,ref:this.popUpAnchor,"data-sumo-test":_},!b&&n.createElement(a.Icon,{className:f.clock,name:"clock",onClick:this.openTreInput}),"display"===this.state.mode?this.tooltip?this.wrapInTooltip(N):N:n.createElement(qD,xt({value:r,label:this.props.label,showPopup:"input_with_modal"===this.state.mode,toggleMode:this.toggleMode,onHitEnter:this.onHitEnter,handleClickOutside:this.handleOnBlur,menuComponent:this.getTreMenuComponent(),shouldToggleTreMode:this.shouldToggleTreMode,inputProps:y,popUpAnchor:this.popUpAnchor,menuPlacement:v,onInputBlur:this.handleOnBlur,tooltipPlacement:E,handleParseError:T,styleProps:this.props.styleProps},A)),O&&n.createElement(sO,{set:this.setDefault,revert:this.setRevert,isRootPanel:this.isRootPanel(this.props)}),n.createElement(rO,{open:this.state.dialogOpen,setAsDefault:this.setAsDefault,onDashboardPanelOverride:this.props.onDashboardPanelOverride,dialogCancel:this.dialogCancel,isDashboardPanelOverridden:this.props.isDashboardPanelOverridden}))}}const gO=(0,a.withCssModulesTheme)({brandLight:lO,brandDark:oO},lO,mO),yO="tre___9M6Tf",vO="treVisible___e6QYt",fO=n.memo((({name:e,timeRange:t,preview:i,updateTimeRange:a,forceTreVisible:s,className:o,suppressInitialOnChange:l,now:c,tabs:d,placeholder:u,menuPlacement:p,formatTextField:h,allowDuplicateTimeRangeChange:m,addInheritDashboardOption:g,relativeTimeOptions:y,"data-sumo-test":v,onHitEnter:f,allowChangeOnBlur:_,showSaveOption:S,temporaryTimeRangeEnabled:b,onDashboardPanelOverride:E,isDashboardPanelOverridden:T,saveOptionLabel:x,saveOptionDataTest:C,hideIcon:A,tooltipPlacement:w,minDate:I,handleParseError:R,readOnly:D,dateTimeFormat:O,timeFormat:N,styleProps:M})=>{var k;const[L,P]=(0,n.useState)(!1),F=t&&(null==(k=Ie.timeRangeUtil.parseTimeRangeDetails(t,O?r.DATE_FORMATS[O]():void 0))?void 0:k.value),U=L||s;return n.createElement(n.Fragment,null,F?n.createElement(gO,{name:e,forceTreVisible:s,placeholder:u,className:ue("tre",o,yO,{[vO]:U}),value:F,minDate:I,onChange:({details:e=""},t,i)=>{a&&(null==i?void 0:i.isNewTimeRangeApplied)&&a(e,t)},onModeChange:e=>{P(e===hO.INPUT_WITH_MODAL)},suppressInitialOnChange:l,now:c,tabs:d,displayFieldProps:{"data-sumo-test":"mewboard.panelTre.displayField"},treInputProps:{"data-sumo-test":"mewboard.panelTre.treInputField"},menuProps:{"data-sumo-test":"mewboard.panelTre.menu"},onPopupOpenStart:TD.measureTrePopupOpenStart,onPopupOpenEnd:TD.measureTrePopupOpenEnd,menuPlacement:p,formatTextField:h,allowDuplicateTimeRangeChange:m,addInheritDashboardOption:g,relativeTimeOptions:y,"data-sumo-test":v,onHitEnter:f,allowChangeOnBlur:_,showSaveOption:S,temporaryTimeRangeEnabled:b,onDashboardPanelOverride:E,isDashboardPanelOverridden:T,saveOptionLabel:x,saveOptionDataTest:C,hideIcon:A,tooltipPlacement:w,handleParseError:R,readOnly:D,dateTimeFormat:O,timeFormat:N,styleProps:M}):null)})),_O="refresh-interval-container___Eba88",SO="refresh-interval-apply___CmFA1",bO="auto-refresh-select___ooUo8",EO="refresh-hint-text___HuKen",TO="treTitleContainer___mMNVs";function xO({refreshInterval:e=0,refreshChoices:t,onRefreshIntervalChange:i}){const[s,o]=(0,n.useState)(e);return n.createElement("div",{className:_O},n.createElement(a.Select,{name:"refreshIntervalPicker",label:It.autoRefresh.hintText,value:s,handleChange:({target:{value:e}})=>{if("string"==typeof e||"number"==typeof e){const i=t.find((t=>t===+e));void 0!==i&&o(i)}},menuProps:{ModalClasses:{root:bO}},inline:!0,optional:!0},t.map((e=>n.createElement(a.Select.Item,{value:e,key:e},e?(0,r.formatSeconds)(e):It.autoRefresh.off)))),n.createElement(a.Button,{className:SO,color:"primary",size:"regular",onClick:()=>i(s)},It.autoRefresh.apply))}const CO=(0,a.withCssModulesTheme)({brandLight:lO,brandDark:oO},lO,class extends mO{getTreDisplayComponent(e){var t=e,{refreshInterval:i}=t,s=At(t,["refreshInterval"]);return n.createElement("div",{className:TO},n.createElement(tO,xt({},s)),i?n.createElement(a.Text,{variant:"textSmallHeavy",className:EO},function(e){return e?(0,dt.sprintf)(It.autoRefresh.refreshHintText,(0,r.formatSeconds)(e)):It.autoRefresh.off}(i)):null)}shouldToggleTreMode(e,t){const i=$("#menu-refreshIntervalPicker")[0];return!(i&&$.contains(i,e.target))&&super.shouldToggleTreMode(e,t)}}),AO="legend-container___sSfDb",wO="disabledTextSelection___4KQsh",IO=e=>{const t=(0,n.useRef)(null),i=e.paginationOptions.pageSize,r=e.data,{loadedIndex:a}=cg({elementRef:t,data:r,pageSize:i}),s=(0,n.useMemo)((()=>[...r].sort(((e,t)=>{var i,r,n;return null!=(n=null==(r=e.name)?void 0:r.localeCompare(null!=(i=t.name)?i:""))?n:1}))),[r]),o=(0,n.useMemo)((()=>s.slice(0,a)),[s,a]);return((e,t)=>{(0,n.useEffect)((()=>{const i=i=>{i.shiftKey&&e.current&&e.current.classList.add(t)},r=i=>{!i.shiftKey&&e.current&&e.current.classList.remove(t)};return document.addEventListener("keydown",i),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",r)}}),[t,e])})(t,wO),n.createElement("div",{ref:t,className:AO},o.map((t=>void 0===t.visibleInLegend||t.visibleInLegend?e.renderLegendItem(t):null)))},RO={"legend-item-table":"legend-item-table___YJryd",legendItemTable:"legend-item-table___YJryd","legend-item":"legend-item___ufxXu",legendItem:"legend-item___ufxXu","legend-item-inactive":"legend-item-inactive___zXn1I",legendItemInactive:"legend-item-inactive___zXn1I","legend-wrap":"legend-wrap___qhRML",legendWrap:"legend-wrap___qhRML","legend-indicator":"legend-indicator___QGALv",legendIndicator:"legend-indicator___QGALv","legend-item-short":"legend-item-short___rFUzc",legendItemShort:"legend-item-short___rFUzc","legend-wrapped":"legend-wrapped___MleXd",legendWrapped:"legend-wrapped___MleXd"},DO={"legend-item-table":"legend-item-table___P-XWI",legendItemTable:"legend-item-table___P-XWI","legend-item":"legend-item___cHbEC",legendItem:"legend-item___cHbEC","legend-item-inactive":"legend-item-inactive___8G1MT",legendItemInactive:"legend-item-inactive___8G1MT","legend-wrap":"legend-wrap___FX2bJ",legendWrap:"legend-wrap___FX2bJ","legend-indicator":"legend-indicator___-4tqs",legendIndicator:"legend-indicator___-4tqs","legend-item-short":"legend-item-short___lndlN",legendItemShort:"legend-item-short___lndlN","legend-wrapped":"legend-wrapped___3gGNe",legendWrapped:"legend-wrapped___3gGNe"},OO={"legend-item-table":"legend-item-table___UM0NS",legendItemTable:"legend-item-table___UM0NS","legend-item":"legend-item___C-jG1",legendItem:"legend-item___C-jG1","legend-item-inactive":"legend-item-inactive___BpfLx",legendItemInactive:"legend-item-inactive___BpfLx","legend-wrap":"legend-wrap___Vxkre",legendWrap:"legend-wrap___Vxkre","legend-indicator":"legend-indicator___Kd-PK",legendIndicator:"legend-indicator___Kd-PK","legend-item-short":"legend-item-short___jZCjA",legendItemShort:"legend-item-short___jZCjA","legend-wrapped":"legend-wrapped___rjmHv",legendWrapped:"legend-wrapped___rjmHv"},NO=(0,a.withCssModulesTheme)({dark:OO,brandLight:DO,brandDark:RO},DO,(e=>{const{formatter:t,item:i,styles:r}=e,a=(0,n.useMemo)((()=>{var e;const r=null!=(e=null==t?void 0:t(i))?e:i.name;return r&&xc(r)}),[t,i]),s=(0,n.useMemo)((()=>{var e;return null!=(e=i.fixedColor)?e:i.color}),[i.fixedColor,i.color]),o=(0,n.useMemo)((()=>ue({[r.legendWrap]:e.options.wrap})),[e.options.wrap,r.legendWrap]),l=(0,n.useCallback)((t=>{var i;null==(i=e.onLegendItemClick)||i.call(e,e.item,t.shiftKey)}),[e]),c=(0,n.useMemo)((()=>({backgroundColor:s})),[s]),d=(0,n.useMemo)((()=>ue(r.legendItem,{[r.legendItemInactive]:!1===e.item.visible,[r.legendItemTable]:e.options.showAsTable,[r.legendItemShort]:!e.options.wrap})),[e.item.visible,e.options.showAsTable,e.options.wrap,r.legendItem,r.legendItemInactive,r.legendItemShort,r.legendItemTable]);return n.createElement("div",{className:d,onClick:e=>l(e),title:a,"data-sumo-test":"legend-item"},s&&n.createElement("span",{style:c,className:r.legendIndicator}),n.createElement("span",{className:o},a))}));function MO(e,t,i=(e=>(0,ce.toggleSeriesVisibility)(t,e))){const r={showAsTable:t.getCanvasData().legend.showAsTable,wrap:t.getCanvasData().legend.wrap};return n.createElement(NO,{item:e,key:e.id||e.name,options:r,formatter:t.getCanvasData().legend.formatter,onLegendItemClick:i})}function kO(e,t){const{name:i,validationRulesFn:n,validationRules:a}=t;if(n||a){const s=(0,r.ensureDefined)(n?n():a);switch(i){case"svp#thresholds":(0,te.Z)(e,function(e,t){const{customConfig:{minRangeName:i}}=e,r=Kc.thresholds.length,n={};for(let e=0;e<r;e++)n[`${i}_${e}`]=t;return n}(t,s));break;default:e[i]=s}}}const LO=(e,t,{ignoreUndefined:i}={ignoreUndefined:!0})=>Object.entries(t).reduce(((t,[r,n])=>(t[r]=!(i&&void 0===e[r]||(0,o.Z)(e[r],n)),t)),{});function PO({errors:e,values:t,initialValues:i,originalInitialValues:n,visualizationSettings:a,visualUpdateFn:s,getDefaultValue:o}){const l=Object.keys(e);return Object.keys(i).filter((e=>(0,r.withIndex)(t)[e]!==(0,r.withIndex)(i)[e])).reduce(((e,a)=>{var c;return l.includes(a)?e:s(a,e,null!=(c=(0,r.withIndex)(t)[a])?c:o?o(a,null!=n?n:i):(0,r.withIndex)(null!=n?n:i)[a])}),a)}function FO(e,t,i){return Object.keys(e).reduce(((r,n)=>(!(n in t)||(0,ie.Z)(e[n])?r[n]=e[n]:(0,re.Z)(e[n])&&(0,re.Z)(t[n])?r[n]=FO(e[n],t[n],i):r[n]=void 0===t[n]||i(n,e,t)?e[n]:t[n],r)),{})}const UO="chartFormat___p7tEb",VO="title___c0fpC",BO=({label:e,className:t,children:i})=>{var s;return n.createElement("div",{className:ue(UO,t)},e&&n.createElement(a.Text,{variant:"panel",className:VO},null!=(s=r.i18nUtil.get(e))?s:e),i)},$O="formColumn___Nj85s",HO="visualizationTypeSelectorCard___LDvlE",WO="visualizationTypeSelectorContent___EOtSi",qO=({metricOptions:e,onChange:t,value:i})=>{const a=(0,n.useCallback)((e=>t(Ct(xt({},i),{metricName:e}),{field:"metricName"})),[i,t]),s=(0,n.useCallback)(((e,r)=>t(Ct(xt({},i),{metricAggregationType:r}),{field:"metricAggregationType"})),[i,t]),o=(0,n.useMemo)((()=>e.some((e=>e.value===i.metricName&&e.isVirtual))),[e,i]),l=(0,n.useMemo)((()=>e.some((e=>e.value===i.metricName&&!e.isMultiMetric))),[e,i]);return n.createElement(n.Fragment,null,n.createElement(LI,{key:+Boolean(e.length),name:"metricName",disabled:e.length<=1,error:o,errorMessage:o?r.i18nUtil.get("sharedAnalytics.mapSettings.metricNotAvailable"):void 0,value:i.metricName,label:r.i18nUtil.get("sharedAnalytics.mapSettings.metricField"),options:e,onChange:a,"data-sumo-test":"mainMetric"}),n.createElement(GI,{name:"aggregationType",defaultValue:"count",value:i.metricAggregationType,options:zw(),disabled:l,onChange:s}))},jO="container___ud6Ji",QO="inlineRow___P3Adt",zO="modeToggle___mjri4",GO=({value:e,onChange:t,calculationMode:i,onCalculationModeChange:s})=>{const o=i===tl.AUTO;return n.createElement("div",{className:jO,"data-sumo-test":"color-thresholds"},n.createElement(a.InputLabel,null,r.i18nUtil.get("sharedAnalytics.colorThresholds.title")),n.createElement("div",{className:QO},n.createElement(a.Toggle,{className:zO,toggled:o,onToggle:e=>s(e?tl.AUTO:tl.FIXED)},r.i18nUtil.get("sharedAnalytics.colorThresholds.colorAutoMode")),n.createElement(a.Tooltip,{multiline:!0,title:n.createElement(a.Text,{noWrap:!1,variant:"textSmall"},r.i18nUtil.get("sharedAnalytics.colorThresholds.colorAutoModeDescription"))},n.createElement(a.IconButton,{icon:"info"}))),n.createElement(ce.ColorThresholdsComponent,{value:e,onChange:t,isReadonly:o}))},KO="panelContent___Uu5J5",YO=({metric:e})=>n.createElement(a.Text,{htmlTagName:"p",variant:"label",noWrap:!0},r.i18nUtil.get("sharedAnalytics.mapSettings.selectedMetric",e)),ZO={content:"content___OVVo3"},XO={content:"content___3cV4q"},JO={content:"content___GcsPa"},eN={content:"content___IPaz3"},tN=(0,a.withCssModulesTheme)({light:eN,dark:JO,brandLight:XO,brandDark:ZO},XO,(({metric:e,children:t,styles:i})=>{var s;return n.createElement(n.Fragment,null,n.createElement(YO,{metric:null!=(s=e.metricName)?s:""}),n.createElement("div",{className:i.content},n.createElement(a.Text,null,r.i18nUtil.get("sharedAnalytics.mapSettings.selectedStatisticType",e.metricAggregationType)),t&&n.createElement(a.Text,null,t)))}));var iN=(e=>(e.SIZE="size",e.COLOR="color",e))(iN||{});const rN=()=>{},nN=n.memo((({value:e})=>n.createElement(LI,{name:"clusterAttribute",disabled:!0,value:e,label:r.i18nUtil.get("sharedAnalytics.mapSettings.clusterAttribute"),options:[{value:"size",label:r.i18nUtil.get("sharedAnalytics.mapSettings.sizeClusterAttribute")},{value:"color",label:r.i18nUtil.get("sharedAnalytics.mapSettings.colorClusterAttribute")}],onChange:rN,"data-sumo-test":"clusterAttribute"}))),aN=e=>e.hasCustomSizeMetric,sN=({value:e,onChange:t,metricOptions:i})=>{var s;const o=(0,n.useCallback)(((i,r)=>t(Ct(xt({},e),{hasCustomSizeMetric:r}),{field:"hasCustomSizeMetric"})),[e,t]),l=(0,n.useCallback)((i=>{t(Ct(xt({},e),{colorThresholds:i}),{field:"colorThresholds"})}),[e,t]),c=(0,n.useCallback)(((i,{field:r})=>{const n=e;t(Ct(xt({},n),{sizeMetric:Ct(xt({},n.sizeMetric),{[r]:i[r]})}),{field:"sizeMetric"})}),[e,t]),d=(0,n.useCallback)((i=>{t(Ct(xt({},e),{colorCalculationMode:i}),{field:["colorCalculationMode","colorThresholds"]})}),[e,t]),u=null!=(s=e.hasCustomSizeMetric)&&s;return n.createElement(n.Fragment,null,n.createElement(a.ToggleButtonGroup,{title:r.i18nUtil.get("sharedAnalytics.mapSettings.clusterMetricsNum"),value:u,onChange:o},n.createElement(a.ToggleButtonGroup.Button,{value:!1,color:"secondary"},r.i18nUtil.get("sharedAnalytics.mapSettings.clusterSingleMetric")),n.createElement(a.ToggleButtonGroup.Button,{value:!0,color:"secondary"},r.i18nUtil.get("sharedAnalytics.mapSettings.clusterDoubleMetric"))),n.createElement(a.List,null,n.createElement(ce.CollapsibleListItem,{collapsed:!1,isFloatableIcons:!0,index:0,renderCollapsedItem:()=>n.createElement(tN,{metric:e},aN(e)&&r.i18nUtil.get("sharedAnalytics.mapSettings.selectedClusterAttribute",r.i18nUtil.get("sharedAnalytics.mapSettings.colorClusterAttribute"))),renderExpandedItem:()=>n.createElement(n.Fragment,null,n.createElement(YO,{metric:e.metricName}),n.createElement("div",{className:KO},aN(e)&&n.createElement(nN,{value:iN.COLOR}),n.createElement(qO,{value:e,onChange:t,metricOptions:i}),n.createElement(GO,{value:e.colorThresholds,onChange:l,calculationMode:e.colorCalculationMode,onCalculationModeChange:d})))}),aN(e)&&n.createElement(ce.CollapsibleListItem,{collapsed:!1,isFloatableIcons:!0,index:1,renderCollapsedItem:()=>n.createElement(tN,{metric:e.sizeMetric},r.i18nUtil.get("sharedAnalytics.mapSettings.selectedClusterAttribute",r.i18nUtil.get("sharedAnalytics.mapSettings.sizeClusterAttribute"))),renderExpandedItem:()=>n.createElement(n.Fragment,null,n.createElement(YO,{metric:e.sizeMetric.metricName}),n.createElement("div",{className:KO},n.createElement(nN,{value:iN.SIZE}),n.createElement(qO,{value:e.sizeMetric,onChange:c,metricOptions:i})))})))},oN=({metricOptions:e,onChange:t,value:i})=>n.createElement(a.List,null,n.createElement(ce.CollapsibleListItem,{collapsed:!1,isFloatableIcons:!0,index:0,renderCollapsedItem:()=>n.createElement(tN,{metric:i}),renderExpandedItem:()=>n.createElement(n.Fragment,null,n.createElement(YO,{metric:i.metricName}),n.createElement("div",{className:KO},n.createElement(qO,{value:i,onChange:t,metricOptions:e})))})),lN=(0,oe.default)((()=>[{value:el.CLUSTER,label:r.i18nUtil.get("sharedAnalytics.cluster")},{value:el.HEATMAP,label:r.i18nUtil.get("sharedAnalytics.heatMap")}])),cN=({value:e,onChange:t,metricOptions:i})=>{var a;const s=(0,n.useCallback)((i=>t(Ct(xt({},e),{layerType:i}),{field:"layerType"})),[e,t]),o=null!=(a=e.layerType)?a:el.CLUSTER,l=o===el.CLUSTER,c=o===el.HEATMAP;return n.createElement(n.Fragment,null,n.createElement(LI,{name:"layerTypeDropdown",value:o,label:r.i18nUtil.get("sharedAnalytics.chartType"),options:lN(),onChange:s,dataSumoTest:"layerTypeDropdown"}),l&&n.createElement(sN,{value:e,metricOptions:i,onChange:t}),c&&n.createElement(oN,{value:e,metricOptions:i,onChange:t}))},dN=(0,oe.default)((()=>(De.currentUserHelper.hasFeatureFlag("MapboxHeatMapChart")?Ol:Dl).map(((e,t)=>({color:e,value:null,id:Date.now()+t}))))),uN=(e,t,i)=>(0,n.useMemo)((()=>{var r,n,a,s,o,l,c,d;const u={metricName:null!=(n=null!=(r=e.metricName)?r:t.values().next().value)?n:"",layerType:null!=(a=e.layerType)?a:el.CLUSTER,metricAggregationType:null!=(s=e.metricAggregationType)?s:"count"};if(u.layerType===el.CLUSTER){const t=u,r=e;if(t.colorCalculationMode=null!=(o=r.colorCalculationMode)?o:tl.AUTO,t.colorThresholds=t.colorCalculationMode===tl.AUTO?GT(r.colorThresholds,null!=i?i:dN()):null!=(l=r.colorThresholds)?l:dN(),t.hasCustomSizeMetric=null!=(c=r.hasCustomSizeMetric)&&c,t.hasCustomSizeMetric){const i=null!=(d=e.sizeMetric)?d:{};void 0===i.metricName&&(i.metricName=u.metricName),void 0===i.metricAggregationType&&(i.metricAggregationType=u.metricAggregationType),t.sizeMetric=i}return t}return u}),[e,t,i]),pN=(e,{missingMetricsSet:t,logSet:i}={missingMetricsSet:new Set,logSet:new Set})=>({value:e,label:e,isVirtual:t.has(e),isMultiMetric:!i.has(e)}),hN={},mN={},gN=[],yN=({onVisualizationTypeSelected:e,originalVisualizationSettings:t,panelData:i,updateVisualizationSettings:s,visualizationData:o,visualizationSettings:l,visualizationTiles:c})=>{var d,u,p,h,m,g,y,v,f,_,S,b,E;const T=null!=(d=null==l?void 0:l.general)?d:{},x=null!=(u=null==l?void 0:l.map)?u:mN,C=null!=(p=x.mainMetric)?p:hN,A=null!=(h=x.secondaryMetric)?h:hN,w=XT({chartType:T.type,mode:T.mode,panelType:ml.SUMO_SEARCH}),I=null!=(m=x.latitudeField)?m:UT,R=null!=(g=x.longitudeField)?g:VT,D=null!=(y=null==i?void 0:i.series)?y:gN,O=null==(v=null==i?void 0:i.status)?void 0:v.state;(0,n.useRef)(D).current=D;const{latSet:N,longSet:M,metricSet:k,logSet:L,missingMetrics:P}=(0,n.useMemo)((()=>{const e=Ct(xt({},HT(D)),{missingMetrics:new Set}),t=t=>{t&&!e.metricSet.has(t)&&(e.metricSet.add(t),O===hl.FINISHED_SUCCESSFULLY&&e.missingMetrics.add(t))};return t(C.metricName),t(A.metricName),e}),[O,D,C.metricName,A.metricName]),F=(0,n.useMemo)((()=>Array.from(k).map((e=>pN(e,{missingMetricsSet:P,logSet:L})))),[k,P,L]),U=(0,n.useMemo)((()=>Array.from(N).map((e=>pN(e)))),[N]),V=(0,n.useMemo)((()=>Array.from(M).map((e=>pN(e)))),[M]),B=(0,n.useCallback)(((e,i)=>{const r=LO(xt({layerType:el.CLUSTER},t.map),{[e]:i});s(Ct(xt({},l),{map:Ct(xt({},x),{[e]:i})}),r)}),[x,t.map,s,l]),$=De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT"),H=uN(C,k,null!=(_=null==(f=o.mapLayers)?void 0:f.main.defaultColorThresholds)?_:null),W=uN(A,k,null!=(E=null==(b=null==(S=o.mapLayers)?void 0:S.secondary)?void 0:b.defaultColorThresholds)?E:null),q=(0,n.useCallback)(((e,t,i)=>{var r;const n=null!=(r=x[e])?r:{},a=("string"==typeof i?[i]:i).reduce(((e,i)=>Ct(xt({},e),{[i]:t[i]})),{});B(e,xt(xt({},n),a))}),[x,B]),j=(0,n.useCallback)((e=>{if(e){const e=Array.from(k.values());if(1===e.length)B("secondaryMetric",Ct(xt({},A),{metricName:e[0]}));else if(e.length>1){const t=e.find((e=>e!==H.metricName));B("secondaryMetric",Ct(xt({},A),{metricName:t}))}}else{const e=A,{metricName:t}=e,i=At(e,["metricName"]);B("secondaryMetric",i)}}),[A,k,B,H.metricName]),Q=Boolean(A.metricName);return n.createElement("div",{"data-sumo-test":"newDashboard_settings_display_map"},c&&n.createElement(BO,{label:De.currentUserHelper.hasFeatureFlag("UIDashboardsUseDisplaySettingsV2")?"sharedAnalytics.panelSettings":"sharedAnalytics.visualizationType",key:"sharedAnalytics.visualizationType"},n.createElement(LC,{onVisualizationTypeClick:e,dataSumoTest:"sharedAnalytics.displaySettings.visualizationTypeSelector",tileCardClassName:HO,tileContentClassName:WO,tiles:c,activeType:w,tileSize:"compact"})),$&&n.createElement(BO,{label:"sharedAnalytics.mapSettings.coordinates",className:$O},n.createElement(LI,{name:"longitudeField",value:R,label:r.i18nUtil.get("sharedAnalytics.mapSettings.longitudeField"),disabled:V.length<=1,options:V,onChange:e=>B("longitudeField",e),"data-sumo-test":"longitudeFieldDropdown"}),n.createElement(LI,{name:"latitudeField",value:I,disabled:U.length<=1,label:r.i18nUtil.get("sharedAnalytics.mapSettings.latitudeField"),options:U,"data-sumo-test":"latitudeFieldDropdown",onChange:e=>B("latitudeField",e)})),n.createElement(BO,{label:"sharedAnalytics.visualSettings",className:$O},$?n.createElement(n.Fragment,null,n.createElement(cN,{value:H,metricOptions:F,onChange:(e,{field:t})=>q("mainMetric",e,t)}),n.createElement(a.Toggle,{toggled:Q,onToggle:j,disabled:0===F.length},r.i18nUtil.get("sharedAnalytics.mapSettings.displaySecondaryMetric")),Q&&n.createElement(cN,{value:W,metricOptions:F,onChange:(e,{field:t})=>q("secondaryMetric",e,t)})):n.createElement(LI,{name:"layerTypeDropdown",value:H.layerType,label:r.i18nUtil.get("sharedAnalytics.chartType"),options:lN(),onChange:e=>B("mainMetric",{layerType:e}),dataSumoTest:"layerTypeDropdown"})))};function vN({label:e,settings:t},i,r){return n.createElement(BO,{label:e,key:e},t.map((e=>(0,ce.renderFormFieldFromConfig)({fieldConfig:e,formProps:i,onChange:r,touchFieldsOnChange:!0}))))}const fN="container___OPjU7",_N="visualizationTypeSelectorCard___xLViq",SN="visualizationTypeSelectorContent___F-xw8",bN="visualizationTypeSelectorContentExpanded___lhT2k",EN=e=>{var t;const{formProps:i,panelData:r,visualizationData:a,visualSettings:s,callbackMap:o,onVisualizationTypeSelected:l,rendererType:c,containsMetricsQuery:d,containsOutlierQuery:u,isLogsQuery:p,visualizationTiles:h,updatePanelVisualSettings:m}=e,g=e=>{const t=e.fieldConfig.onChangeFnName,r=o[t];r&&r({visualSettings:s},e,i)},y=CN(s,null!=r?r:{},a,c,d,u,p);if(i.values.markerType===ce.MarkerType.NONE){const e=y.find((e=>"sharedAnalytics.visualSettings"===e.label));e&&(e.settings=e.settings.filter((e=>"sharedAnalytics.visualizationSettings.markerSize"!==e.label)))}return n.createElement("div",{className:fN,"data-sumo-test":"newDashboard_settings_display"},n.createElement(BO,{label:"sharedAnalytics.visualizationType",key:"sharedAnalytics.visualizationType"},n.createElement(LC,{onVisualizationTypeClick:l,dataSumoTest:"sharedAnalytics.displaySettings.visualizationTypeSelector",tileCardClassName:_N,tileContentClassName:ue(SN,{[bN]:null!=(t=null==h?void 0:h.length)&&t}),tiles:h,activeType:c,tileSize:"compact"})),y.map((e=>vN(e,i,g))),"heatmap"===(null==a?void 0:a.type)&&n.createElement(sR,{visualSettings:s,visualizationData:a,updatePanelVisualSettings:e=>{const t=s;m(Ct(xt({},t),{general:xt(xt({},t.general),e.general),color:e.color?e.color:t.color}))},panelData:r}))},TN={[ce.FORM_FIELD_FORMAT_TYPES.PERCENTAGE]:e=>`${(0,ne.Z)(e,"%")}%`},xN=(0,oe.default)((e=>{var t;return{hasDisconnectedDataPoints:!(null==(t=null==e?void 0:e.data)||!t.length)&&e.data.some((({hasDisconnectedDataPoints:e})=>e))}}));function CN(e,t,i,r,n,s,o){var l,c,d,u,p,h,m,g,y,v,f;const _=null==(c=null==(l=t.series)?void 0:l[0])?void 0:c.seriesType,S=_===Go.TABLE?le.VisualSettingsType.TABLE:null!=(u=null==(d=null==e?void 0:e.general)?void 0:d.type)?u:Qc(r),b=null==(p=t.series)?void 0:p[0].queryId,E=null!=(m=null==(h=t.series)?void 0:h.some((({queryId:e})=>e!==b)))&&m;if(r===gl.SINGLE_VALUE_METRICS)return yw(e);const T=s?sw():fw(r,_,o),x=Pw(S,r,n,t),C=x&&[le.VisualSettingsType.BAR,le.VisualSettingsType.COLUMN].includes(S)?{groupByKeys:x,selectedKeys:null==(g=e.general)?void 0:g.groupBy}:null,A=xt(xt({},Wl),a.colorSchemes),w=null==(y=e.color)?void 0:y.family,I=xt(xt({},w&&A[w]?{[w]:[...A[w]]}:null),Wl),R=_w(S,C,I,Ct(xt({},xN(i)),{rendererType:r,allDimensions:x,sortMode:De.currentUserHelper.hasFeatureFlag("UIChartFunnelNMT")&&r===gl.DISTRIBUTION&&n?1!==(null==(v=null==i?void 0:i.data)?void 0:v.length)&&S!==le.VisualSettingsType.TABLE||E?tc:ic:null,isSortEnabled:Boolean(null==(f=e.general)?void 0:f.sortBy)})),D=[],O=T.concat(R);return O.length&&D.push({label:"sharedAnalytics.visualSettings",settings:O}),UE(S)&&D.push({label:"sharedAnalytics.dimensions",settings:Dw(S,t,e)}),s&&S!==le.VisualSettingsType.TABLE&&D.push({label:"sharedAnalytics.outlierOptions.title",settings:ow()}),D}function AN(e,t,i,n,a,s,o){const l=CN(e,t,i,n,a,s,o);return(0,M.Z)(l,(({settings:e})=>[...e])).reduce(((t,i)=>{var n,a,s,o;const{defaultValue:l,name:c,onChangeFnName:d,format:u}=i;kO(t.validationRules,i);const[p,h]=c.split("#");t.initialValues[c]="svp"===p?function(e,t,i){var n,a,s;const o=e.svp;if(!o)return i;const[l,c]=t.split("_");if("gauge"===l){const e=o.gauge;return e?(0,r.withIndex)(e)[c]:i}if("sparkline"===l){const e=o.sparkline;if("show"===c){const t=null==(n=o.gauge)?void 0:n.show,i=null==e?void 0:e.show;if(t&&i)return!1}return e?(0,r.withIndex)(e)[c]:i}if("thresholds"===l){const e=t,i=o.useBackgroundColor;return null!=(a=o[e])?a:Gc(i)}return null!=(s=o[t])?s:i}(e,h,l):"colorFamily"===c?null!=(a=null==(n=null==e?void 0:e.color)?void 0:n.family)?a:l:l===Go.TABLE?l:null!=(o=null==(s=null==e?void 0:e.general)?void 0:s[c])?o:l,t.initialOnChangeFnNames[c]=d;const m=void 0!==u&&TN[u],g=t.initialValues[c];return m&&"string"==typeof g&&(t.initialValues[c]=m(g),t.formatValueFns[c]=m),t}),{validationRules:{},initialValues:{},initialOnChangeFnNames:{},formatValueFns:{}})}const wN=({visualSettings:e,originalVisualSettings:t,updatePanelVisualSettings:i,panelData:s={},visualizationData:o,containsMetricsQuery:l,containsOutlierQuery:c,isLogsQuery:d,onVisualizationTypeSelected:u,visualizationTiles:p,displayVisualizationSelector:h})=>{var m,g,y,v,f,_,S;const b=XT({chartType:null==(m=e.general)?void 0:m.type,mode:null==(g=e.general)?void 0:g.mode,panelType:ml.SUMO_SEARCH}),E=(0,r.useDebounce)(i,op),T=null==(y=null==e?void 0:e.general)?void 0:y.type,x=Nw(T),{initialValues:C,validationRules:A,initialOnChangeFnNames:I}=(0,n.useMemo)((()=>AN(e,s,o,b,l,c,d)),[b,e,s,o,l,c,d]),{initialValues:R,formatValueFns:D}=AN(t,s,o,b,l,c),O=(0,n.useCallback)(((t,i,n)=>{if(t)return;const a=PO({errors:n,values:i,initialValues:C,originalInitialValues:R,visualizationSettings:e,visualUpdateFn:(e,t,i=null)=>{const r=I[e],n=r&&x[r],a=D[e]||w.Z;return n?n(e,t,a(i)):t},getDefaultValue:(e,t)=>"decimals"===e?null:(0,r.withIndex)(t)[e]}),s=i.type!==R.type?{type:!0}:LO(R,i,{ignoreUndefined:!1});s.markerSize&&i.markerType===ce.MarkerType.NONE&&(s.markerSize=!1),Object.values(s).includes(!0)&&E(a,s)}),[C,e,R,E,I,x,D]),N=(0,n.useRef)(),M=(0,n.useRef)(),k=(0,n.useCallback)((t=>(M.current=t,EN({formProps:t,panelData:s,visualSettings:e,visualizationData:o,callbackMap:{[$A.MARKER_SIZE]:({visualSettings:e},t,i)=>{var n,a;const s=(null!=(a=null==(n=e.general)?void 0:n.markerSize)?a:Bc).toString();(0,r.ensureDefined)(i).setFieldValue("markerSize",s)},[$A.VISUAL_TYPE]:Ow,[$A.SHOW_COLOR_AS]:({visualSettings:e},t,i)=>{const n=e.svp,a=null==n?void 0:n.thresholds,s=Gc(!!t.value);(0,r.ensureDefined)(i).setFieldValue("svp#thresholds",ww(s,a))}},onVisualizationTypeSelected:u,rendererType:b,containsMetricsQuery:l,containsOutlierQuery:c,isLogsQuery:d,visualizationTiles:p,displayVisualizationSelector:h,updatePanelVisualSettings:E}))),[o,b,s,e,u,l,c,d,p,h,E]),L=null!=(f=null==(v=e.general)?void 0:v.type)?f:le.VisualSettingsType.LINE,P=null!=(S=null==(_=e.general)?void 0:_.mode)?S:Yo.TIME_SERIES;return(0,n.useEffect)((()=>{var e;M.current&&(null==(e=M.current)||e.setValues(C))}),[L,P,null==o?void 0:o.dataId]),(0,n.useEffect)((()=>{N.current&&M.current&&(null==o?void 0:o.dataId)&&M.current.validateForm()}),[null==o?void 0:o.dataId]),n.createElement(a.Form,{ref:N,initialValues:C,validationRules:A,onSubmit:Q.Z,onValidation:O,render:k})},IN=n.memo(wN),RN="pristineMessage___v2p7G",DN="emptyVisualization___JxBqv",ON=({icon:e,message:t})=>n.createElement("div",{className:DN,"data-sumo-test":"empty-visualization"},n.createElement(a.Icon,{name:e,size:"tile"}),n.createElement("div",{className:RN},r.i18nUtil.get(t))),NN="visualizationTypeSelectorCard___wR0HL",MN="visualizationTypeSelectorContent___YaNdd",kN=({visualizationTiles:e,visualizationSettings:t,onVisualizationTypeSelected:i})=>{var r;const a=null!=(r=null==t?void 0:t.general)?r:{},s=XT({chartType:a.type,mode:a.mode,panelType:ml.SUMO_SEARCH});return n.createElement("div",{"data-sumo-test":"newDashboard_settings_display_map"},e&&n.createElement(BO,{label:De.currentUserHelper.hasFeatureFlag("UIDashboardsUseDisplaySettingsV2")?"sharedAnalytics.panelSettings":"sharedAnalytics.visualizationType",key:"sharedAnalytics.visualizationType"},n.createElement(LC,{onVisualizationTypeClick:i,dataSumoTest:"sharedAnalytics.displaySettings.visualizationTypeSelector",tileCardClassName:NN,tileContentClassName:MN,tiles:e,activeType:s,tileSize:"compact"})))},LN=(0,oe.default)((()=>({name:"shape",label:r.i18nUtil.get("sharedAnalytics.honeyCombOptions.shape"),componentType:ce.IFormFieldComponentTypes.SELECT,defaultValue:Ec.shape,onChangeFnName:"onHoneyCombChange",choices:[{value:Jo.HEXAGON,label:r.i18nUtil.get("sharedAnalytics.honeyCombOptions.hexagon")},{value:Jo.CIRCLE,label:r.i18nUtil.get("sharedAnalytics.honeyCombOptions.circle")}]}))),PN=(0,oe.default)((()=>Ct(xt({},vw()),{defaultValue:Ec.aggregationType,onChangeFnName:"onHoneyCombChange"}))),FN=(0,oe.default)((()=>[{label:"sharedAnalytics.chartType",settings:[PN(),LN(),{name:"groupBy",label:r.i18nUtil.get("sharedAnalytics.groupBy"),optional:!1,componentType:ce.IFormFieldComponentTypes.AUTOCOMPLETE,items:Ec.groupBy,defaultValue:Ec.groupBy,onChangeFnName:"onHoneyCombChange"}]},{label:"sharedAnalytics.visualSettings",settings:[{name:"thresholds",label:"",defaultValue:Ec.thresholds,componentType:ce.IFormFieldComponentTypes.RANGE_COLOR_SELECTOR,onChangeFnName:"onHoneyCombChange",customConfig:Ct(xt({},pw),{allowEmpty:!0}),axisRangeMaximumLabel:r.i18nUtil.get("sharedAnalytics.charts.axisRangeMaximumLabel")}]}]));function UN({series:e=[]}){return Array.from(e.reduce(((e,{metaData:{data:t}})=>(Object.keys(t).forEach((t=>e.add(t))),e)),new Set)).map((e=>({label:e,value:e})))}const VN=n.memo((e=>{var t,i;const{visualizationSettings:r,updateVisualizationSettings:s,originalVisualizationSettings:o,onVisualizationTypeSelected:l,visualizationTiles:c,displayVisualizationSelector:d}=e,u=XT({chartType:null==(t=r.general)?void 0:t.type,mode:null==(i=r.general)?void 0:i.mode,panelType:ml.SUMO_SEARCH}),p=e=>{const{name:t,value:i}=e,n=LO(xt({shape:"hexagon"},o.honeyComb),{[t]:i});s(Ct(xt({},r),{honeyComb:Ct(xt({},r.honeyComb),{[t]:i})}),n)},h=Ct(xt({},function(e){return(0,M.Z)(FN(),(({settings:e})=>[...e])).reduce(((t,i)=>{var r;const{defaultValue:n,name:a}=i,s=a,o=null==(r=e.honeyComb)?void 0:r[s];return kO(t.validationRules,i),t.initialValues[s]=void 0===o?n:o,t}),{validationRules:{},initialValues:{}})}(e.visualizationSettings)),{render:function(t){var i;return n.createElement("div",{className:fN,"data-sumo-test":"newDashboard_settings_display_honeycomb"},d&&n.createElement(BO,{label:De.currentUserHelper.hasFeatureFlag("UIDashboardsUseDisplaySettingsV2")?"sharedAnalytics.panelSettings":"sharedAnalytics.visualizationType",key:"sharedAnalytics.visualizationType"},n.createElement(LC,{onVisualizationTypeClick:l,dataSumoTest:"sharedAnalytics.displaySettings.visualizationTypeSelector",tileCardClassName:_N,tileContentClassName:ue(SN,{[bN]:null!=(i=null==c?void 0:c.length)&&i}),tiles:c,activeType:u,tileSize:"compact"})),function(e={}){const[{label:t,settings:i},...r]=FN();return[{label:t,settings:i.map((t=>"groupBy"===t.name?Ct(xt({},t),{items:UN(e)}):t))},...r]}(e.panelData).map((e=>vN(e,t,p))))}});return n.createElement(a.Form,xt({},h))}));function BN(e){void 0===e&&(e={});var t=e.onResize,i=(0,n.useRef)(void 0);i.current=t;var r=(0,n.useRef)(),a=(0,n.useState)({width:void 0,height:void 0}),s=a[0],o=a[1],l=(0,n.useRef)(!1);(0,n.useEffect)((function(){return function(){l.current=!0}}),[]);var c=(0,n.useRef)({width:void 0,height:void 0}),d=function(e,t){var i,r=null,a=(0,n.useRef)(null),s=(0,n.useRef)(null),o=(0,n.useCallback)((function(e){s.current=e,d()}),[]),l=(0,n.useRef)(null),c=(0,n.useRef)(),d=function(){var i=null;s.current?i=s.current:a.current?i=a.current:t instanceof HTMLElement&&(i=t),l.current!==i&&(c.current&&(c.current(),c.current=null),l.current=i,i&&(c.current=e(i)))};return t&&!(t instanceof HTMLElement)&&(r=t),(0,n.useEffect)((function(){r&&(a.current=r.current),d()}),[r,null==(i=r)?void 0:i.current,t]),o}((function(e){return r.current||(r.current=new ResizeObserver((function(e){if(Array.isArray(e)&&e.length){var t=e[0],r=Math.round(t.contentRect.width),n=Math.round(t.contentRect.height);if(c.current.width!==r||c.current.height!==n){var a={width:r,height:n};i.current?i.current(a):(c.current.width=r,c.current.height=n,l.current||o(a))}}}))),r.current.observe(e),function(){r.current&&r.current.unobserve(e)}}),e.ref);return(0,n.useMemo)((function(){return{ref:d,width:s.width,height:s.height}}),[d,s?s.width:null,s?s.height:null])}var $N=(e=>(e.LESS_THAN_15m="less_than_15m",e.FROM_15m_TO_60m="15m_to_60m",e.FROM_60m_TO_3h="60m_to_3h",e.FROM_3h_TO_6h="3h_to_6h",e.FROM_6h_TO_12h="6h_to_12h",e.FROM_12h_TO_1d="12h_to_1d",e.FROM_1d_TO_3d="1d_to_3d",e.FROM_3d_TO_1w="3d_to_1w",e.FROM_1w_TO_2w="1w_to_2w",e.FROM_2w_TO_1M="2w_to_1M",e.MORE_THAN_1M="more_than_1M",e))($N||{}),HN=(e=>(e.ZERO="zero",e.FROM_1_TO_50="1_to_50",e.FROM_51_TO_100="51_to_100",e.FROM_101_TO_250="101_to_250",e.FROM_251_TO_500="251_to_500",e.FROM_501_TO_750="501_to_750",e.FROM_751_TO_1000="751_to_1000",e.MORE_OR_EQUAL_1000="more_or_equal_1000",e))(HN||{}),WN=(e=>(e.LOG_QUERIES="logs",e.METRICS_QUERIES="metrics",e.MIX_QUERIES="mixed",e.NO_QUERIES="none",e))(WN||{}),qN=(e=>(e.LESS_OR_EQUAL_5="less_or_equal_5",e.FROM_6_TO_10="6_to_10",e.FROM_11_TO_50="11_to_50",e.FROM_51_TO_99="51_to_99",e.MORE_OR_EQUAL_100="more_or_equal_100",e))(qN||{}),jN=(e=>(e.LESS_OR_EQUAL_50="less_or_equal_50",e.FROM_51_TO_250="51_to_250",e.FROM_251_TO_500="251_to_500",e.FROM_501_TO_750="501_to_750",e.FROM_751_TO_1000="751_to_1000",e.MORE_OR_EQUAL_1000="more_or_equal_1000",e))(jN||{}),QN=(e=>(e.LESS_OR_EQUAL_100="less_or_equal_100",e.FROM_101_TO_1000="101_to_1000",e.FROM_1001_TO_5000="1001_to_5000",e.FROM_5001_TO_20000="5001_to_20000",e.FROM_20001_TO_50000="20001_to_50000",e.MORE_THAN_50000="more_than_50000",e))(QN||{});const zN=e=>0===e?HN.ZERO:e<=50?HN.FROM_1_TO_50:e<=100?HN.FROM_51_TO_100:e<=250?HN.FROM_101_TO_250:e<=500?HN.FROM_251_TO_500:e<=750?HN.FROM_501_TO_750:e<=1e3?HN.FROM_751_TO_1000:HN.MORE_OR_EQUAL_1000,GN=e=>e<=100?QN.LESS_OR_EQUAL_100:e<=1e3?QN.FROM_101_TO_1000:e<=5e3?QN.FROM_1001_TO_5000:e<=2e4?QN.FROM_5001_TO_20000:e<=5e4?QN.FROM_20001_TO_50000:QN.MORE_THAN_50000,KN=e=>{const t=Ie.timeRangeUtil.parseTimeRangeDetails(e),i=(0,r.ensureDefined)(t.startTime),n=((0,r.ensureDefined)(t.endTime)-i)/1e3/60,a=n/60,s=a/24;return n<15?$N.LESS_THAN_15m:n<60?$N.FROM_15m_TO_60m:a<3?$N.FROM_60m_TO_3h:a<6?$N.FROM_3h_TO_6h:a<12?$N.FROM_6h_TO_12h:a<24?$N.FROM_12h_TO_1d:s<3?$N.FROM_1d_TO_3d:s<7?$N.FROM_3d_TO_1w:s<14?$N.FROM_1w_TO_2w:s<31?$N.FROM_2w_TO_1M:$N.MORE_THAN_1M},YN=e=>{let t=0,i=0;return e.forEach((e=>{e.queryType===le.QueryTypes.LOGS?t++:i++})),t>0&&i>0?WN.MIX_QUERIES:t>0?WN.LOG_QUERIES:i>0?WN.METRICS_QUERIES:WN.NO_QUERIES},ZN=e=>e.length,XN=e=>e<=5?qN.LESS_OR_EQUAL_5:e<=10?qN.FROM_6_TO_10:e<=50?qN.FROM_11_TO_50:e<=99?qN.FROM_51_TO_99:qN.MORE_OR_EQUAL_100,JN=e=>e<=50?jN.LESS_OR_EQUAL_50:e<=250?jN.FROM_51_TO_250:e<=500?jN.FROM_251_TO_500:e<=750?jN.FROM_501_TO_750:e<=1e3?jN.FROM_751_TO_1000:jN.MORE_OR_EQUAL_1000,eM="drilldown-item___wMXAb",tM="drilldown-item-loading___n8uBF";function iM(e){const{drilldown:{anchorEl:t,anchorPosition:i,transformOrigin:s,drillDownQueries:o},handleClose:l,onClick:c}=e;return t?n.createElement(a.Menu,{anchor:{element:t,transformOrigin:s,position:i},onClose:l},n.createElement("div",{onClick:l},n.createElement(a.List,null,(0,u.Z)(o)?n.createElement(a.SkeletonLoadingPanel,{numRows:3,className:tM,showPadding:!0}):o.map((e=>n.createElement(a.List.Item,{className:eM,onClick:()=>c(e),key:e.drilldownType},n.createElement(a.List.Text,null,r.i18nUtil.get(`newDashboard[${e.drilldownType}]`)))))))):null}const rM="container-outer-group",nM="container-inner-group",aM="title",sM="hexagon-group",oM="highlight-layer",lM="fade-out-overlay",cM="highlight-hover",dM="highlight-focus";function uM({width:e,height:t,hexCount:i,overriddenRadius:r}){const{selectedCountPerRow:n,selectedRowCount:a}=function(e,t,i){let r=0,n=0;for(let a=1,s=-1/0;a<=i;a+=1){const o=Math.ceil(i/a),l=Math.min(2*e/(Math.sqrt(3)*(2*a+1)),2*t/(1+3*o));l>s&&(s=l,r=o,n=a)}return{selectedRowCount:r,selectedCountPerRow:n}}(e,t,i);return{hexRadius:r||Math.floor((0,ut.min)([e/((n+.5)*Math.sqrt(3)),t/(1.5*(a+1/3)),e/7])),MapColumns:n,MapRows:a}}const pM={[Jo.CIRCLE]:ut.symbolCircle},hM=(0,r.memoize)(((e,t)=>{const i=(0,pt.g)().radius(t);let r={hexbin:i};if(e===Jo.HEXAGON){const e=(0,pt.g)().radius(0);r=Ct(xt({},r),{getShapePath:()=>`${i.hexagon(t-2.5)}`,getInitialPath:()=>`${e.hexagon()}`})}else{const i=Math.PI/3,n=2*t*Math.sin(i),a=1.5*t,s=Math.min(n,a),o=(0,ut.symbol)().size(s*s),l=(0,ut.symbol)().size(1),c=pM[e];r=Ct(xt({},r),{getShapePath:o.type(c),getInitialPath:l.type(c)})}return r}),{maxNumberOfResults:300});function mM(e,t=10){const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.246875,.2640625,.3265625,.6234375,.5640625,.7328125,.6234375,.1765625,.3328125,.3359375,.4328125,.56875,.1984375,.275,.26875,.415625,.5640625,.5640625,.5640625,.5640625,.5640625,.5640625,.5640625,.5640625,.5640625,.5640625,.253125,.2578125,.5078125,.5640625,.5234375,.4765625,.8953125,.6484375,.640625,.634375,.659375,.5859375,.5828125,.6828125,.7140625,.2828125,.553125,.64375,.540625,.8796875,.7140625,.6828125,.640625,.6828125,.6640625,.625,.5859375,.678125,.6328125,.884375,.6328125,.6109375,.5984375,.2703125,.4140625,.2703125,.41875,.4546875,.3140625,.55,.56875,.53125,.56875,.5296875,.3484375,.56875,.56875,.253125,.2921875,.5140625,.253125,.875,.56875,.56875,.56875,.56875,.34375,.5234375,.346875,.56875,.503125,.7578125,.503125,.503125,.503125,.340625,.2484375,.340625,.6796875];return e.length?e.split("").map((e=>e.charCodeAt(0)<i.length?i[e.charCodeAt(0)]:.5177631578947369)).reduce(((e,t)=>t+e))*t:0}const gM=(e,t=["#abd7ed","#18406e"])=>(0,ut.scalePow)().exponent(1).range(t)(e);function yM(e){return e.selectAll(`.${aM}`)}function vM(e,{width:t,title:i},r){const n=yM(e).data([1]),a=mM(i),s=t-8,o=Math.min(18,s/a*18);n.exit().remove(),n.enter().insert("text",`.${nM}`).merge(n).attr("class",`title ${r}`).attr("x",8).attr("y",o).text((()=>function({text:e,availableWidth:t,fontSize:i=18}){const r=mM(e,i),n=e.length;if(r>t){const i=n/r*t-3;return`${e.substring(0,i)}...`}return e}({text:i,availableWidth:s,fontSize:o}))).style("font-size",o).attr("text-anchor","start")}function fM(e){const t=ue("tooltip",e),i=(0,ut.select)("body").selectAll(`.${e}`).data([1]);return i.enter().append("div").attr("class",t).style("opacity",0),i}const _M=(0,A.Z)((function(e,t,i){(0,tt.render)(n.createElement(ce.CanvasChart,xt({},function(e=[],t){const i=document.body.getAttribute("data-theme");let r=null==i?void 0:i.split("-")[0];(!r||"null"===r)&&(r=il.LIGHT);const n={canvasData:{animationEnabled:!0,animationDuration:500,backgroundColor:"#222D3B",axisX:[{labelFontColor:"#9badbf",lineColor:"#DDE4E9",labelFontSize:12,labelFontFamily:'Roboto, "Arial", sans-serif',type:ce.AxisType.DATETIME_CJS}],axisY:[{labelFontColor:"#9badbf",lineColor:"#DDE4E9",stripLines:null,gridColor:"#dde4e9",gridThickness:1,lineThickness:0,labelFontSize:12,labelFontFamily:'Roboto, "Arial", sans-serif',tickColor:"#dde4e9",logarithmic:!1,linear:!1}],data:[{showInLegend:!1,markerSize:0,markerType:"none",type:ce.ChartType.LINE,color:"#8BE2FF",xValueType:"dateTime",dataPoints:e}],legend:{enabled:!1}},container:t};if(r===il.BRANDLIGHT||r===il.BRANDDARK){let e="#546685",t="#9DB4C7";r===il.BRANDDARK&&(e="#C9D0D6",t="#517691"),n.canvasData.backgroundColor="transparent",n.canvasData.axisX[0].lineColor=e,n.canvasData.axisY[0].lineColor=e,n.canvasData.axisY[0].gridColor=e,n.canvasData.axisY[0].tickColor=e,n.canvasData.axisX[0].labelFontSize=10,n.canvasData.axisY[0].labelFontSize=10,n.canvasData.axisX[0].labelFontColor=t,n.canvasData.axisY[0].labelFontColor=t,n.canvasData.axisX[0].labelFontFamily='Lab Grotesque Regular, "Arial", sans-serif',n.canvasData.axisY[0].labelFontFamily='Lab Grotesque Regular, "Arial", sans-serif'}return n}(t,i))),e)}),300);function SM({tooltipClassName:e,chartTooltipClassName:t,chartTooltipTrendClassName:i,contentFormatter:n,d:a}){const s=a[0][2].dataPoint.dataPoints,o=function(e,t){const{dimension:i,color:n,dataPoint:{aggregateInfo:a,metaData:s,nameFromAlias:o,xAxisValues:l={}}}=e,c=xt(xt({},(0,r.withIndex)(s).data),l),{source:d,series:u,metric:p}=c,h=At(c,["source","series","metric"]),m=null!=o?o:(0,Y.Z)(h,((e,t,i)=>`${e}${i}=${t} `),"").trim();return(0,r.ensureDefined)(t)({entries:[{dataPoint:{y:(0,r.withIndex)(a)[i],color:n,name:m}}]})}(a[0][2],n),l=fM(e);if(o&&(l.transition().duration(200).style("opacity",1),l.html(o).style("left",`${ut.event.pageX}px`).style("top",ut.event.pageY-28+"px"),Number(null==s?void 0:s.length)>1)){l.select(`.${t}`).classed("show-trend",!0);const r=l.select(`.${i}`).node();r&&_M(r,s,e)}}const bM={svg:"svg___-ymM4",tooltip:"tooltip___dphGI",container:"container___1FyYj",hexagon:"hexagon___k1303",focused:"focused___S-G1A",hexagonHighlight:"hexagonHighlight___aKLfJ",visible:"visible___hyoxy",boundingRect:"boundingRect___UOwMm",containerOverlay:"containerOverlay___4p2Zf",hoveredHexagon:"hoveredHexagon___-eSdH",honeycombTitle:"honeycombTitle___Iejjt"},EM={svg:"svg___tFuW-",tooltip:"tooltip___2XIw-",container:"container___ynjIE",hexagon:"hexagon___zjkLS",focused:"focused___9TSnd",hexagonHighlight:"hexagonHighlight___tDUaP",visible:"visible___ukHO-",boundingRect:"boundingRect___v8599",containerOverlay:"containerOverlay___QMFA9",hoveredHexagon:"hoveredHexagon___denCV",honeycombTitle:"honeycombTitle___vDREa"},TM={svg:"svg___RyAZ6",tooltip:"tooltip___DyozD",container:"container___GHRMv",hexagon:"hexagon___Ckuon",focused:"focused___c-3gf",hexagonHighlight:"hexagonHighlight___WvwRJ",visible:"visible___SFkz-",boundingRect:"boundingRect___eCuaw",containerOverlay:"containerOverlay___UD2-0",hoveredHexagon:"hoveredHexagon___6Mj0F",honeycombTitle:"honeycombTitle___66MUN"},xM={svg:"svg___Fnom6",tooltip:"tooltip___Q0WLW",container:"container___HjvF0",hexagon:"hexagon___H2LzX",focused:"focused___r-P2-",hexagonHighlight:"hexagonHighlight___umLvz",visible:"visible___hYIpq",boundingRect:"boundingRect___-osEM",containerOverlay:"containerOverlay___EiOnR",hoveredHexagon:"hoveredHexagon___yopuP",honeycombTitle:"honeycombTitle___y-39D"},CM=e=>`newboard_honeycomb_hexbin_${e}`;function AM(e){var t,i,r;de.basicPerformanceMeasurement.createMark({module:null!=(r=null==(i=null==(t=Re.applicationState)?void 0:t.current)?void 0:i.name)?r:"",component:"honeycombPanel",action:"render_honeycomb_hexbin",id:CM(e),checkpoint:"startRenderingHoneycombHexBin"})}const wM=e=>`newboard_honeycomb_${e}`;function IM({styles:e},t,i){const n=(0,r.ensureDefined)(e.visible);t.select(`.${i}`).classed(n,!1)}function RM(e,t,i){const{styles:n}=e,a=(0,r.ensureDefined)(n.visible);IM(e,t,i),t.select(`.${a}`).empty()&&null===t.attr("data-pin-overlay")&&t.select(`.${lM}`).classed((0,r.withIndex)(n).hoveredHexagon,!1)}const DM=e=>{const{styles:t,focusedIndex:i}=e;return e=>{var r,n;return ue(t.hexagon,sM,{[t.focused]:void 0!==typeof i&&Number(i)===(null==(n=null==(r=e[0])?void 0:r[2])?void 0:n.dataPoint.index)})}};function OM(e,{dataPoints:t}){const{visualizationData:{dimension:i,thresholds:n},id:a,isExportMode:s}=e;s||AM(a);const o=t.map((({aggregateInfo:e})=>(0,r.ensureDefined)((0,r.withIndex)(e)[i]))),{dataMax:l,dataMin:c}=function(e,t=bc){const i=Math.max(...e),r=Math.min(...e),n=i-r,a=t.length;return{thresholdArr:t.map(((e,t)=>({from:r+t*n/a,to:t===a-1?i:r+(t+1)*n/a,color:e}))),dataMax:i,dataMin:r}}(o);return(e,t)=>{var i;const a=o[t];let s=(a-c)/(l-c);if(s=isNaN(s)?1:s,De.currentUserHelper.hasFeatureFlag("UIThresholdsNMT")&&"value"in(null!=(i=n[0])?i:{})){const e=n;if(e.every((e=>!e.value)))return gM(s,e.map((({color:e})=>e)));const t=e.filter(((e,t)=>0===t||"number"==typeof e.value));for(let e=0;e<t.length;e++){const i=t[e].value;if("number"==typeof i&&a<i)return t[e-1].color}return t[t.length-1].color}const d=n.reduce((function(e,t,i){return(0,r.isInNullableRange)(Math.max(c,Math.min(a,l)),t.from,t.to,{r1Inclusive:!0,r2Inclusive:!0})&&(e=i),e}),NaN);return isNaN(d)?gM(s):n[d].color}}const NM=(e,t)=>{t.select(`.${lM}`).classed((0,r.withIndex)(e.styles).hoveredHexagon,!0)};function MM(e,t,i,n){const a=t.select("text").node(),s=a?a.getBBox().height:0,o=Ct(xt({},i),{height:i.height-s}),{dataPoints:l,width:c,overriddenRadius:d,height:u}=o,{visualizationData:{dimension:p,shape:h},contentFormatter:m=Jc.toolTip.contentFormatter,styles:g,isShapeToggled:y,updateDrilldownRef:v,id:f,isExportMode:_,onHexBinClickRef:S}=e,b=(0,ut.transition)().duration(750),E=l.length;_||AM(f);const{MapColumns:T,MapRows:x,hexRadius:C}=uM({width:c,height:u,hexCount:E,overriddenRadius:d}),A=function(e,t,i,r){const n=[];for(let a=0,s=0;a<e;a++)for(let e=0;e<t&&s<=i-1;e++,s++)n.push([r*e*1.75,r*a*1.5]);return n}(x,T,E,C),w=C/2*(1+3*x),I=Math.max(0,u-w-C),R=C*Math.cos(30*Math.PI/180),D=R+(c-2*R*T-R)/2,O=C+s+I/2,{hexbin:N,getShapePath:M,getInitialPath:k}=hM(h,C);t.selectAll("g."+nM).data([1]).enter().append("g").attr("class",nM).attr("data-sumo-test","honeycomb-cluster");const L=t.selectAll("g."+oM).data([e.theme],(e=>e));L.enter().append("g").classed(oM,!0).each((function(){const e=(0,ut.select)(this),t=(0,r.ensureDefined)((0,r.withIndex)(g).hexagonHighlight);e.append("rect").classed((0,r.withIndex)(g).containerOverlay,!0).classed(lM,!0),e.append("path").classed(t,!0).classed(cM,!0),e.append("path").classed(t,!0).classed(dM,!0)})),L.exit().remove();const P=t.selectAll(`.${nM}`).attr("transform",`translate(${D.toFixed(1)},${O.toFixed(1)})`),F=t.select(`.${oM}`).attr("transform",`translate(${D.toFixed(1)},${O.toFixed(1)})`);F.select(`.${lM}`).attr("x",-C).attr("y",-C).attr("width",c).attr("height",u);const U=OM(e,o),V=N(A.map(((e,t)=>{const i={dataPoint:l[t],dimension:p,color:U(e,t)};return[e[0],e[1],i]}))),B=P.selectAll(`.${sM}`).data(V),$=(0,r.ensureDefined)(g.tooltip),H=DM(e),W=((e,t,i)=>{const{dataPoints:n,width:a,height:s,overriddenRadius:o}=t,{visualizationData:{shape:l}}=e,c=n.length,{hexRadius:d}=uM({width:a,height:s,hexCount:c,overriddenRadius:o}),{getShapePath:u}=hM(l,d),p=OM(e,t),h=DM(e);return(t,n,a)=>{NM(e,i),i.select(`.${t}`).classed((0,r.ensureDefined)((0,r.withIndex)(e.styles).visible),!0).classed(h(n),!0).style("fill",p(n,a)).attr("transform",`translate(${n.x.toFixed(1)},${n.y.toFixed(1)})`).attr("d",u(n,a))}})(e,o,F),q=function(t,i){const{chartTooltip:r,chartTooltipTrend:a}=Jc.toolTip.classNames;(0,ut.select)(this).on("mouseover",(()=>{n.current||(SM({tooltipClassName:$,chartTooltipClassName:r,chartTooltipTrendClassName:a,contentFormatter:m,d:t}),W(cM,t,i))})).on("mouseout",(()=>{n.current||(function({tooltipClassName:e,chartTooltipTrendClassName:t}){const i=fM(e).select(t).node();i&&(0,tt.unmountComponentAtNode)(i),fM(e).transition().duration(500).style("opacity",0)}({tooltipClassName:$,chartTooltipTrendClassName:a}),RM(e,F,cM))}))};return B.enter().append("path").attr("class",H).attr("data-sumo-test","honeycomb-hexagon").attr("transform",(e=>`translate(${e.x.toFixed(1)},${e.y.toFixed(1)})`)).attr("d",k).each(q).on("mousemove",(()=>{n.current||function(e){const t=document.querySelector(`.${e}`);if(t){const i=t.getBoundingClientRect(),r=(0,ut.mouse)(document.body);let n=r[0]-20-i.width;n<0&&(n=r[0]+20);let a=r[1]-20-i.height;a<0&&(a=20),fM(e).style("left",n+"px").style("top",a+"px")}}($)})).on("click",((e,t)=>{!function({updateDrilldownRef:e,onHexBinClickRef:t,data:i}){var n,a;const{dataPoint:{aggregateInfo:s,metaData:o,xAxisValues:l,queryId:c,index:d,name:u},dimension:p,color:h}=i[0][2],m={y:0,sumoMetadata:{y:(0,r.withIndex)(s)[p],color:h,xAxisValues:l,seriesMetadata:{dimensions:o.data,blockId:c,id:"",name:u||"",aggregateInfo:{}}}},g={chart:{toolTip:{container:(0,ut.select)(".tooltip").node()},options:{focusedIndex:`${d}`}},dataPoint:m};null==(n=e.current)||n.call(e,g,ut.event),null==(a=t.current)||a.call(t,g)}({updateDrilldownRef:v,onHexBinClickRef:S,data:e})})).style("fill",U).transition(b).attr("d",M),B.each(q),B.exit().remove(),y&&B.attr("d",k),B.attr("transform",(e=>"translate("+e.x+","+e.y+")")).attr("class",H).transition(b).style("fill",U).attr("d",M),function(e,t){de.basicPerformanceMeasurement.measure({id:CM(e),name:"render_honeycomb_hexbin",from:"startRenderingHoneycombHexBin",to:"completeRenderingHoneycombHexBin",metadata:{item_count:XN(t)}})}(f,E),{focusHexagon(t){const i=V.findIndex((e=>t===e[0][2].dataPoint.index));if(F.attr("data-pin-overlay",!0),i>-1){const e=V[i];W(dM,e,i)}else IM(e,F,dM),NM(e,F)},blurHexagon(){F.attr("data-pin-overlay",null),RM(e,F,dM)}}}const kM=e=>{const{toggleSidePanel:t,fetchDrilldownQueries:i,shouldShowContextualMenu:a,focusedIndex:s,styles:l,isExportMode:c,onChartDidRender:d,onChartDidUpdate:u,onFocusIndexChanged:p,onHexBinClick:h}=e,m=(0,n.useRef)([]),g=(0,n.useRef)(null),y=(e=>{const[t,i]=n.useState({width:0,height:0});return BN({ref:e,onResize:n.useCallback((({width:e,height:t})=>i({width:e,height:t})),[])}),t})(g),v=(0,n.useRef)(null),f=(0,n.useRef)(!1),_=(0,r.usePrevious)(e),S=(0,r.usePrevious)(y),{drilldown:b,updateDrilldown:E}=lg({fetchDrilldownQueries:i,shouldShowContextualMenu:a}),{setPanelRenderTime:T,id:x}=e,C=(0,n.useRef)(!1);(0,n.useEffect)((()=>{fM((0,r.ensureDefined)(l.tooltip))}),[l.tooltip]);const A=(0,n.useCallback)((e=>{m.current.forEach((t=>{t.focusHexagon(e)}))}),[m]),w=(0,n.useCallback)((()=>{m.current.forEach((e=>{e.blurHexagon()}))}),[m]),I=(0,n.useRef)(h),R=(0,n.useRef)(E);return(0,n.useEffect)((()=>{I.current=h,R.current=E}),[h,E]),(0,n.useEffect)((()=>{if((null==_?void 0:_.visualizationData)===e.visualizationData&&(null==_?void 0:_.theme)===e.theme&&(null==S?void 0:S.width)===y.width)return;const t=!(0,o.Z)(null==_?void 0:_.visualizationData.shape,e.visualizationData.shape),i=v.current;if(i){c||function(e){var t,i,r;de.basicPerformanceMeasurement.createMark({module:null!=(r=null==(i=null==(t=Re.applicationState)?void 0:t.current)?void 0:i.name)?r:"",component:"honeycombPanel",action:"render_honeycomb",id:wM(e),checkpoint:"startRenderingHoneycombPanel"})}(x);const{height:n,width:a}=i.getBoundingClientRect(),o=Ct(xt({},e),{container:e.container||{width:a,height:n},isShapeToggled:t,onHexBinClickRef:I,updateDrilldownRef:R}),p=(0,ut.select)(i),h=function(e,t,i){const{container:n,styles:a,visualizationData:{data:s=[]}}=e,o=(0,r.withIndex)(a),l=(0,r.ensureDefined)(o.container),{width:c}=(0,r.ensureDefined)(n),d=s.length,u=Math.min(3,Math.ceil(Math.sqrt(d))),p=Math.ceil(d/u),h=c/u,m=Math.max(200,i/p),g=p*m,{hexRadius:y}=uM({width:h-24,height:m-24,hexCount:Math.max(...s.map((({dataPoints:e})=>e.length)))});t.style("height",`${g}px`);let v=0;const f=s.map((e=>{const t=e.dataPoints.map(((e,t)=>Ct(xt({},e),{index:v+t})));return v+=e.dataPoints.length,Ct(xt({},e),{dataPoints:t,width:h,height:m,overriddenRadius:y})})),_=t.selectAll(`.${rM}`).data(f);return _.exit().remove(),_.enter().append("g").merge(_).attr("class",`${l} ${rM}`).attr("transform",((e,t)=>`translate(${t%u*h},${Math.floor(t/u)*m})`)),f}(o,p,y.height),g=h.length,v=h.reduce(((e,t)=>e+t.dataPoints.length),0);m.current=[],p.selectAll(`.${rM}`).each((function(e,t,i){const r=h[t];setTimeout((()=>{i.length>1?vM((0,ut.select)(this),r,l.honeycombTitle):function(e){yM(e).remove()}((0,ut.select)(this));const e=MM(o,(0,ut.select)(this),r,f);void 0!==s&&e.focusHexagon(Number(s)),m.current.push(e),t===i.length-1&&(C.current?null==u||u({clustersCount:i.length,type:"update"}):null==d||d({clustersCount:i.length,type:"init"}),function(e,t,i){de.basicPerformanceMeasurement.measure({id:wM(e),name:"render_honeycomb",from:"startRenderingHoneycombPanel",to:"completeRenderingHoneycombPanel",metadata:{cluster_count:XN(t),item_count:JN(i)}})}(x,g,v),null==T||T(),C.current=!0)}))}))}})),(0,n.useEffect)((()=>{v.current&&(void 0!==s?A(Number(s)):w())}),[A,w,s,l]),(0,n.useEffect)((()=>{var e,i,r;const n=null==(r=null==(i=null==(e=b.canvasEvent)?void 0:e.chart)?void 0:i.options)?void 0:r.focusedIndex;b.anchorEl&&void 0!==n&&(a||null==t||t(n,!0),null==p||p(n))}),[b,t,a,p]),(0,n.useEffect)((()=>{const e=()=>{const{target:e}=ut.event;e.classList.contains(sM)||(E(null),null==h||h(Ct(xt({},ut.event),{dataPoint:null})))};return(()=>{const t=v.current;if(!t)return;const i=(0,ut.select)(t);return i.on("click",e),()=>{i.on("click",null)}})()}),[p,h,t,E]),n.createElement("div",{className:(0,r.withIndex)(e.styles).boundingRect,ref:g},n.createElement("svg",{className:(0,r.withIndex)(e.styles).svg,ref:v,"data-sumo-test":"honeyComb-visualization"}),a&&n.createElement(iM,{drilldown:b,onClick:t=>{f.current=!0,e.sendSearchDrillDown(t)},handleClose:()=>E(null)}))},LM=n.memo((0,a.withCssModulesTheme)({light:xM,dark:TM,brandLight:EM,brandDark:bM},xM,kM)),PM=new Map([["Gauge",12],["Sparkline",-25]]),FM=new Map([["Gauge",.7]]),UM=[{range:[0,6],value:.34},{range:[6,8],value:.24},{range:[8,15],value:.14}],VM={"text-elements":"text-elements___4wR0N",textElements:"text-elements___4wR0N",label:"label___Yaiby",placeholder:"placeholder___afBIm",selectable:"selectable___9luzl","value-base":"value-base___Q8s6a",valueBase:"value-base___Q8s6a","value-colorless-light-background":"value-colorless-light-background___uSqf0",valueColorlessLightBackground:"value-colorless-light-background___uSqf0","value-colorless-dark-background":"value-colorless-dark-background___gbJ3V",valueColorlessDarkBackground:"value-colorless-dark-background___gbJ3V","value-green":"value-green___TPMQO",valueGreen:"value-green___TPMQO","value-yellow":"value-yellow___wOx2n",valueYellow:"value-yellow___wOx2n","value-red":"value-red___io91r",valueRed:"value-red___io91r","value-colorless":"value-colorless___EqTZc",valueColorless:"value-colorless___EqTZc",arrow:"arrow___L4xnm"},BM={"text-elements":"text-elements___JIcHo",textElements:"text-elements___JIcHo",label:"label___lyKQn",placeholder:"placeholder___t7bWC",selectable:"selectable___IqMHd","value-base":"value-base___Ou0qa",valueBase:"value-base___Ou0qa","value-colorless-light-background":"value-colorless-light-background___aMoZF",valueColorlessLightBackground:"value-colorless-light-background___aMoZF","value-colorless-dark-background":"value-colorless-dark-background___fLEXR",valueColorlessDarkBackground:"value-colorless-dark-background___fLEXR","value-green":"value-green___B-sY7",valueGreen:"value-green___B-sY7","value-yellow":"value-yellow___1mJoI",valueYellow:"value-yellow___1mJoI","value-red":"value-red___BrQmY",valueRed:"value-red___BrQmY","value-colorless":"value-colorless___LycVz",valueColorless:"value-colorless___LycVz",arrow:"arrow___fyGWf"},$M={"text-elements":"text-elements___Bx15t",textElements:"text-elements___Bx15t",label:"label___LdpY-",placeholder:"placeholder___bxriB",selectable:"selectable___Ox-XX","value-base":"value-base___ZVc88",valueBase:"value-base___ZVc88","value-colorless-light-background":"value-colorless-light-background___NxfMd",valueColorlessLightBackground:"value-colorless-light-background___NxfMd","value-colorless-dark-background":"value-colorless-dark-background___ooJB0",valueColorlessDarkBackground:"value-colorless-dark-background___ooJB0","value-green":"value-green___WcEeS",valueGreen:"value-green___WcEeS","value-yellow":"value-yellow___3YeNg",valueYellow:"value-yellow___3YeNg","value-red":"value-red___DooQK",valueRed:"value-red___DooQK","value-colorless":"value-colorless___ubtPx",valueColorless:"value-colorless___ubtPx",arrow:"arrow___NjOF6"},HM={"text-elements":"text-elements___ejKAM",textElements:"text-elements___ejKAM",label:"label___eqlX8",placeholder:"placeholder___AbPM2",selectable:"selectable___pcfbn","value-base":"value-base___PmsMp",valueBase:"value-base___PmsMp","value-colorless-light-background":"value-colorless-light-background___WD5nQ",valueColorlessLightBackground:"value-colorless-light-background___WD5nQ","value-colorless-dark-background":"value-colorless-dark-background___-Z-Jy",valueColorlessDarkBackground:"value-colorless-dark-background___-Z-Jy","value-green":"value-green___hqJm7",valueGreen:"value-green___hqJm7","value-yellow":"value-yellow___6VCDb",valueYellow:"value-yellow___6VCDb","value-red":"value-red___1swXT",valueRed:"value-red___1swXT","value-colorless":"value-colorless___yQY6y",valueColorless:"value-colorless___yQY6y",arrow:"arrow___Ll92p"};class WM extends n.PureComponent{constructor(){super(...arguments),this.viewBoxRef=n.createRef(),this.textGroupRef=n.createRef(),this.valueTextRef=n.createRef(),this.labelTextRef=n.createRef(),this.debouncedUpdateAdjustedLabelFontSize=(0,A.Z)(this.updateAdjustedLabelFontSize,100,{leading:!0}),this.state={valueTextLength:0,textGroupTransform:void 0,adjustedLabelFontSize:Kc.labelFontSize},this.getValueClassName=()=>{const{color:e,styles:t,visualizations:i}=this.props,n=(0,r.withIndex)(t);return this.isTextColorUsed()?ue(n.valueBase,i.includes("gauge")?n[`value${(0,ae.Z)(e)}`]:(0,r.withIndex)(this.props.styles).valueColorlessLightBackground):ue(n.valueBase,this.getContrastingTextColor(this.props.color))},this.getContrastingTextColor=e=>{if(""===(e=e.trim())||this.isTextColorUsed()){const e=this.props.theme;return e===il.BRANDDARK||e===il.DARK?(0,r.withIndex)(this.props.styles).valueColorlessDarkBackground:(0,r.withIndex)(this.props.styles).valueColorlessLightBackground}"#"===e[0]&&(e=e.slice(1)),3===e.length&&(e=e.split("").map((e=>e+e)).join(""));return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?(0,r.withIndex)(this.props.styles).valueColorlessLightBackground:(0,r.withIndex)(this.props.styles).valueColorlessDarkBackground},this.isTextColorUsed=()=>{const{color:e,useBackgroundColor:t}=this.props;return!(t||!e)}}getArrowDirection(){const[e,t]=this.props.datapoints.slice(-2);if(e&&t&&e.value!==t.value)return e.value<t.value?"up":"down"}updateValueTextLength(){if(this.valueTextRef.current&&this.valueTextRef.current.getComputedTextLength){const e=this.valueTextRef.current.getComputedTextLength();this.state.valueTextLength!==e&&this.setState({valueTextLength:e})}}updateTextVerticalAlignment(){var e;const{visualizations:t,label:i}=this.props;if((null==(e=this.textGroupRef.current)?void 0:e.getBBox)&&0===t.length&&""!==i){const{height:e,y:t}=this.textGroupRef.current.getBBox(),i=(100-e)/2,r=`translate(0, ${Math.floor(i-t)})`;r!==this.state.textGroupTransform&&this.setState({textGroupTransform:r})}else void 0!==this.state.textGroupTransform&&this.setState({textGroupTransform:void 0})}isDefaultLabelFontSize(e){return!e||e===Kc.labelFontSize}updateAdjustedLabelFontSize(e,t,i){const{label:r,fontSizes:{labelFontSize:n}}=this.props,a=this.viewBoxRef.current,s=this.labelTextRef.current,o=this.isDefaultLabelFontSize(n),l=this.isDefaultLabelFontSize(i);if(a&&s&&(e&&o&&""!==r||!e&&(o&&(r!==t||!l)||!o&&l))){const e=s.getBoundingClientRect().width,t=a.getBoundingClientRect().width,i=Kc.labelFontSize,r=this.state.adjustedLabelFontSize,n=e/(r/i),o=.8*t;if(e>o){const e=o/n,t=Math.trunc(i*e),a=Math.max(t,5);a!==r&&this.setState({adjustedLabelFontSize:a})}else r!==i&&e<=o&&n<=o&&this.setState({adjustedLabelFontSize:i})}}componentDidMount(){this.updateValueTextLength(),this.updateAdjustedLabelFontSize(!0),this.updateTextVerticalAlignment()}componentDidUpdate(e){this.updateValueTextLength(),this.debouncedUpdateAdjustedLabelFontSize(!1,e.label,e.fontSizes.labelFontSize),this.updateTextVerticalAlignment()}render(){const{valueToShow:e,label:t,color:i,visualizations:a,isValuePlaceholder:s,fontSizes:o,useBackgroundColor:l,shouldShowSidePanel:c}=this.props,d=(0,r.ensureDefined)(this.props.styles),u=this.isTextColorUsed(),[p,h]=[50,50+(PM.get(a.includes("gauge")?"Gauge":a.includes("sparkline")?"Sparkline":"Color")||0)],m=this.getValueClassName(),g=UM.findIndex((({range:[t,i]})=>(0,se.Z)(e.length,t,i))),y=100*(g>=0?UM[g].value:.09)*(FM.get(a.includes("gauge")?"Gauge":"Color")||1),v=this.getArrowDirection(),f=a.includes("sparkline")&&!a.includes("gauge")&&v,_=o.valueFontSize?{fontSize:o.valueFontSize}:{},S=!o.valueFontSize||o.valueFontSize===Kc.valueFontSize&&y<Kc.valueFontSize,b=c?d.selectable:null;return n.createElement("svg",{viewBox:"0 0 100 100",className:d.textElements,ref:this.viewBoxRef},n.createElement("g",{ref:this.textGroupRef,transform:this.state.textGroupTransform},n.createElement("text",{x:p,y:h,textAnchor:"middle",dominantBaseline:"central",ref:this.valueTextRef,fontSize:S?y:o.valueFontSize,style:l?{}:{fill:i},className:ue(m,s&&d.placeholder,b),"data-sumo-test":"metrics-singlevalue-panel-value"+(u?`-${i}`:"")},e),f&&n.createElement("use",xt({x:p+this.state.valueTextLength/2+2,y:h-8,height:16,width:16,className:d.arrow,xlinkHref:`#bundle_arrow-${v}`},_)),!s&&n.createElement("text",{x:"50",y:h+25,ref:this.labelTextRef,textAnchor:"middle",fontSize:this.isDefaultLabelFontSize(o.labelFontSize)?this.state.adjustedLabelFontSize:o.labelFontSize,dominantBaseline:"central",className:ue(this.getContrastingTextColor(i),b),"data-sumo-test":"metrics-singlevalue-panel-label"},t)))}}const qM=(0,a.withCssModulesTheme)({light:HM,dark:$M,brandLight:BM,brandDark:VM},HM,WM),jM={message:"message___e6B8R","background-base":"background-base___5-2Oi",backgroundBase:"background-base___5-2Oi",clickable:"clickable___tgdks","sparkline-container":"sparkline-container___5tBcq",sparklineContainer:"sparkline-container___5tBcq","sparkline-adjusted":"sparkline-adjusted___vXEQc",sparklineAdjusted:"sparkline-adjusted___vXEQc","background-green":"background-green___6AUKo",backgroundGreen:"background-green___6AUKo","background-yellow":"background-yellow___ZzY0l",backgroundYellow:"background-yellow___ZzY0l","background-red":"background-red___vFLS7",backgroundRed:"background-red___vFLS7","value-colorless":"value-colorless___punA4",valueColorless:"value-colorless___punA4",label:"label___7cO0I"},QM={message:"message___SJFY0","background-base":"background-base___CXRYk",backgroundBase:"background-base___CXRYk",clickable:"clickable___qi6Oe","sparkline-container":"sparkline-container___FOERr",sparklineContainer:"sparkline-container___FOERr","sparkline-adjusted":"sparkline-adjusted___Q-628",sparklineAdjusted:"sparkline-adjusted___Q-628","background-green":"background-green___ZkHGb",backgroundGreen:"background-green___ZkHGb","background-yellow":"background-yellow___DEfsv",backgroundYellow:"background-yellow___DEfsv","background-red":"background-red___cfDU9",backgroundRed:"background-red___cfDU9","value-colorless":"value-colorless___tFvQz",valueColorless:"value-colorless___tFvQz",label:"label___ej8oh"},zM={"gauge-container":"gauge-container___lWgvt",gaugeContainer:"gauge-container___lWgvt","band-green":"band-green___M-FmM",bandGreen:"band-green___M-FmM","band-yellow":"band-yellow___nSIFY",bandYellow:"band-yellow___nSIFY","band-red":"band-red___JB-hm",bandRed:"band-red___JB-hm","value-color-green":"value-color-green___eaKf5",valueColorGreen:"value-color-green___eaKf5","value-color-yellow":"value-color-yellow___Zvekw",valueColorYellow:"value-color-yellow___Zvekw","value-color-red":"value-color-red___wpV8c",valueColorRed:"value-color-red___wpV8c"},GM={"gauge-container":"gauge-container___0fLFo",gaugeContainer:"gauge-container___0fLFo","band-green":"band-green___xbGHZ",bandGreen:"band-green___xbGHZ","band-yellow":"band-yellow___edVUx",bandYellow:"band-yellow___edVUx","band-red":"band-red___A5d5Y",bandRed:"band-red___A5d5Y","value-color-green":"value-color-green___DLzeb",valueColorGreen:"value-color-green___DLzeb","value-color-yellow":"value-color-yellow___hpnI8",valueColorYellow:"value-color-yellow___hpnI8","value-color-red":"value-color-red___Q95KC",valueColorRed:"value-color-red___Q95KC"},KM={"gauge-container":"gauge-container___eKJ28",gaugeContainer:"gauge-container___eKJ28","band-green":"band-green___O3SqL",bandGreen:"band-green___O3SqL","band-yellow":"band-yellow___C9NUu",bandYellow:"band-yellow___C9NUu","band-red":"band-red___FAXgG",bandRed:"band-red___FAXgG","value-color-green":"value-color-green___2uOZa",valueColorGreen:"value-color-green___2uOZa","value-color-yellow":"value-color-yellow___HMmV5",valueColorYellow:"value-color-yellow___HMmV5","value-color-red":"value-color-red___Mq1lB",valueColorRed:"value-color-red___Mq1lB"};class YM extends n.Component{constructor(){super(...arguments),this.state={chartElementSize:[0,0],labelDistance:0},this.chartElementRef=n.createRef(),this.setChartSize=e=>{var t;const i=(0,r.ensureDefined)(this.chart),[n,a]=this.state.chartElementSize,s=null!=(t=null==e?void 0:e[0].contentRect)?t:this.chartElement.getBoundingClientRect(),{width:o,height:l}=s,c=.85;if(n!==o||a!==l){l>c*o?i.setSize(o,c*o):i.setSize(1/c*l,l);const e=this.state.labelDistance,t=Du(l);e!==t&&this.updateYAxis({labels:{distance:Du(l)}},!1),this.setState({chartElementSize:[o,l],labelDistance:t})}}}componentDidMount(){this.recreateGauge(),this.updateGauge(),this.setChartSize(),this.setupAutoResizing()}componentWillUnmount(){var e;this.chart&&this.chart.destroy(),null==(e=this.resizeObserver)||e.disconnect()}componentDidUpdate(e){(!(0,o.Z)(this.props.chartSettings,e.chartSettings)||!(0,o.Z)(this.props.theme,e.theme))&&this.recreateGauge(),this.updateGauge()}render(){const e=(0,r.ensureDefined)(this.props.styles);return n.createElement("div",{id:this.props.chartId,ref:this.chartElementRef,className:e.gaugeContainer})}recreateGauge(){this.chart&&this.chart.destroy();const{chartSettings:e,onPanelLoaded:t,styles:i}=this.props,n=Ru(e,t,(0,r.withIndex)(i),this.props.theme);this.chart=Highcharts.chart(this.chartElement,n)}updateYAxis(e,t=!0){const i=(0,r.ensureDefined)(this.chart);i.yAxis[0].update(e,!1),i.update({plotOptions:{}},t)}updateGauge(){var e;const{chartSettings:{visualizations:t}}=this.props,i=(0,r.ensureDefined)(this.chart),n=(0,r.withIndex)(this.props.styles),a=i.series[0].data[0];if(t.gauge&&t.gauge.showThreshold&&i.update({chart:{className:n[`value-color-${this.props.color}`]}}),a.update({y:this.props.value,dataLabels:{formatter:()=>this.props.valueText}}),this.props.value&&(null==(e=this.props.chartSettings.visualizations.gauge)?void 0:e.showThreshold)){const e={minColor:this.props.color,maxColor:this.props.color};this.updateYAxis(e)}}setupAutoResizing(){this.debouncedSetChartSize=(0,A.Z)(this.setChartSize,200),this.resizeObserver=new ResizeObserver(this.debouncedSetChartSize),this.resizeObserver.observe(this.chartElement)}get chartElement(){if(!this.chartElementRef.current)throw new Error("Chart element ref should be defined at this point");return this.chartElementRef.current}}const ZM=(0,a.withCssModulesTheme)({light:KM,dark:GM,brandDark:zM},KM,YM),XM={id:"",zoomEnabled:!1,axisX:[{gridThickness:0,tickThickness:0,lineThickness:0,labelFontColor:"transparent",labelFormatter:()=>" "}],axisY:[{gridThickness:0,tickThickness:0,lineThickness:0,labelFontColor:"transparent",labelFormatter:()=>" "}],toolTip:{enabled:!1},data:[{type:ce.ChartType.SPLINE,markerType:"none",dataPoints:[],name:""}],legend:{enabled:!1},backgroundColor:"transparent"},JM=e=>{const t=(0,n.useMemo)((()=>e.datapoints.map((e=>({y:e.value,x:e.timestamp}))).sort(((e,t)=>e.x-t.x))),[e.datapoints]),i=`${e.chartId||(0,r.idGenerator)()}-sparkline`,s=(0,n.useContext)(a.ThemeContext),o=e.chartSettings.visualizations.sparkline?e.chartSettings.visualizations.sparkline.color:"dark"===s?Ne.ColorsV1.overcast:Ne.ColorsV1.seal,l=Oe(XM,{id:{$set:i},data:{0:{dataPoints:{$set:t},color:{$set:o}}},axisY:{0:{$merge:{includeZero:!1}}}});return n.createElement(ce.CanvasChart,{canvasData:l,container:i,renderLegend:()=>null})};class ek extends n.PureComponent{constructor(){super(...arguments),this.baseRef=n.createRef(),this.shouldShowSidePanel=()=>De.currentUserHelper.hasFeatureFlag("UINewboardSidePanelSvp"),this.isMissingData=()=>{var e;return!(null!=(e=this.props.chartSeries)&&e.values)},this.getValue=()=>{var e,t;const{settings:i}=this.props;if(this.isMissingData())return;const n=i.option,a=parseFloat(`${(0,r.withIndex)(null!=(t=null==(e=this.props.chartSeries)?void 0:e.values)?t:{})[n]}`);return Number.isNaN(a)?void 0:a},this.getStringValue=()=>{var e,t,i,r;const{chartSeries:n}=this.props;return(null==(r=null==(i=null==(t=null==(e=null==n?void 0:n.values)?void 0:e.DataPoints)?void 0:t[0])?void 0:i.value)?void 0:r.toString())||this.getFallbackValue()},this.isValuePlaceholder=()=>void 0===this.getValue(),this.getFallbackValue=()=>{const{settings:e,isPanelQueryMissing:t}=this.props;if(e.hideData)return"";let i;return t?i="":e.useNoData&&(i=e.noDataString),i||"--"},this.getValueToShow=()=>{const{settings:e,chartSeries:t}=this.props;if(e.hideData)return"";if((null==t?void 0:t.valueType)===Me.SeriesValueType.String)return this.getStringValue();const i=this.getValue();return void 0===i?this.getFallbackValue():(0,x.Z)(e.rounding)||e.unitify?e.unitify?`${(0,r.formatNumberWithUnit)(i)}`:`${(0,r.formatNumber)(i)}`:`${this.getRoundedValue(+e.rounding,i)}`},this.getLabelToShow=()=>{const{settings:e}=this.props;return e.hideData||e.hideLabel?"":e.label},this.getActiveThreshold=()=>{var e;const t=null!=(e=this.getValue())?e:+this.getFallbackValue();if(!isNaN(t)){if(De.currentUserHelper.hasFeatureFlag("UIThresholdsNMT")&&"value"in this.props.settings.thresholds[0]){const e=this.props.settings.thresholds;for(let i=0;i<e.length;i++){const r=e[i].value;if("number"==typeof r&&t<r)return{threshold:e[i-1],index:i-1}}return{threshold:e[e.length-1],index:e.length-1}}return[...this.props.settings.thresholds].map(((e,t)=>({threshold:e,index:t}))).reverse().find((({threshold:e})=>(0,r.isInNullableRange)(t,e.from,e.to,{r1Inclusive:e.fromInclusive,r2Inclusive:e.toInclusive})))}},this.getActiveThresholdColor=()=>{const e=this.getActiveThreshold();return e?e.threshold.color:void 0},this.getActiveThresholdIndex=()=>{const e=this.getActiveThreshold();return e?e.index:void 0},this.getImageSrc=()=>{const e=this.props.settings.visualizations.image;if(e){const t=this.getActiveThresholdIndex();return void 0!==t?e.urls&&e.urls[t]:""}},this.isBackgroundColorUsed=()=>{const{useBackgroundColor:e}=this.props.settings,t=this.getActiveThresholdColor(),i=!!this.props.settings.visualizations.gauge;return!(!e||!t||i)},this.getBackgroundClassName=()=>{const e=this.getActiveThresholdColor(),t=(0,r.withIndex)(this.props.styles);return ue(t.backgroundBase,this.isBackgroundColorUsed()?t[`background${(0,ae.Z)(e)}`]:"",this.shouldShowSidePanel()?t.clickable:"")},this.onChartClick=e=>{var t,i,r,n;if(!this.shouldShowSidePanel())return;null==(i=(t=this.props).onInitShowingSidePanel)||i.call(t);const{chartSeries:a,updateDrilldown:s,theme:o}=this.props;if(a){const{queryId:t,metaData:i,name:l,xAxisValues:c}=a,d=this.getActiveThresholdColor()||("brandDark"===o?"white":"black"),u=t?{y:0,sumoMetadata:{y:null!=(r=this.getValue())?r:"",color:d,xAxisValues:c,seriesMetadata:{dimensions:null!=(n=null==i?void 0:i.data)?n:{},blockId:t,id:"",name:l||"",aggregateInfo:{}}}}:null,p={chart:{toolTip:{container:e.currentTarget}},dataPoint:u};null==s||s(p,e)}}}getRoundedValue(e,t){return e<0||e>20?(0,r.formatNumber)(t):(0,r.formatNumber)(t,{fractionDigits:e})}getActiveVisualizations(e){const t=this.getVisualizationFlags();return(0,P.Z)(e,((e,i)=>t.has((0,ae.Z)(i))))}getVisualizationFlags(){return new Set((0,S.Z)(["Gauge","Sparkline",De.currentUserHelper.hasFeatureFlag("UIMetricsChartTypeSingleValueImages")?"Image":void 0]))}getMessage(){const{settings:e,chartSeries:t,isPanelFetching:i,isPanelQueryMissing:r}=this.props;return i?{short:"metrics.singleValue.loading",test:"panel-fetching-info"}:null!=t&&t.multipleSeriesError?{short:"metrics.singleValue.multipleSeries",tooltip:"metrics.singleValue.multipleSeriesTooltip",test:"multiple-series-error"}:!this.isMissingData()||e.useNoData||r?void 0:{short:"metrics.singleValue.missingData",test:"missing-data-error"}}componentDidMount(){void 0!==this.props.onPanelLoaded&&this.props.onPanelLoaded()}render(){var e,t;const{settings:i,chartId:s,chartSeries:o,onPanelLoaded:l,styles:c}=this.props,d=(0,r.ensureDefined)(c),u=this.getActiveThresholdColor()||"",p=this.isBackgroundColorUsed(),h=this.getBackgroundClassName(),m=this.getMessage(),g=m&&`metrics-singlevalue-panel-${m.test}`,y=this.getValue(),v=this.getValueToShow(),f=this.getLabelToShow(),_=null!=(t=null==(e=null==o?void 0:o.values)?void 0:e.DataPoints)?t:[],S=this.getActiveVisualizations(i.visualizations),b=S.gauge&&void 0!==y,E=S.sparkline&&!S.gauge;return n.createElement("div",{ref:this.baseRef,className:h,"data-sumo-test":"metrics-singlevalue-panel-background"+(p?`-${u}`:""),style:xt({},i.useBackgroundColor?{backgroundColor:this.getActiveThresholdColor()}:{}),onClick:this.onChartClick},m?n.createElement("div",{className:d.message,"data-sumo-test":g},r.i18nUtil.get(m.short).toUpperCase(),"",m.tooltip&&n.createElement(a.Tooltip,{title:r.i18nUtil.get(m.tooltip),placement:"right",multiline:!0},n.createElement(a.Icon,{name:"exclamation-circle",color:"coral"}))):(()=>n.createElement(n.Fragment,null,n.createElement(qM,{color:u,isValuePlaceholder:this.isValuePlaceholder(),visualizations:(0,ee.Z)(S),useBackgroundColor:this.props.settings.useBackgroundColor,label:f,valueToShow:v,datapoints:_,fontSizes:{labelFontSize:i.labelFontSize,valueFontSize:i.valueFontSize},shouldShowSidePanel:this.shouldShowSidePanel()}),b&&n.createElement(ZM,{chartId:s,value:y,valueText:v,chartSettings:Ct(xt({},i),{visualizations:S}),label:f,color:u,onPanelLoaded:l}),E&&n.createElement("div",{className:ue(d.sparklineContainer,{[d.sparklineAdjusted]:S.sparkline&&S.gauge})},n.createElement(JM,{chartSettings:Ct(xt({},i),{visualizations:S}),chartId:s,datapoints:_,onPanelLoaded:l})),S.image&&n.createElement("img",{src:this.getImageSrc()})))())}}const tk=(0,a.withCssModulesTheme)({light:QM,dark:jM},QM,ek),ik=n.memo((e=>{const{visualizationData:t,isPanelQueryMissing:i,id:r,preview:a,setPanelRenderTime:s,onPanelLoaded:o,toggleSidePanel:l,onInitShowingSidePanel:c,shouldShowContextualMenu:d,fetchDrilldownQueries:p}=e,h=`svp-${r}${a?"-preview":""}`,{drilldown:m,updateDrilldown:g}=lg({shouldShowContextualMenu:d,fetchDrilldownQueries:p});return(0,n.useEffect)((()=>{null==s||s()}),[t.data,s]),(0,n.useEffect)((()=>{if(m.anchorEl){const e="0";null==l||l(e,!0)}}),[m,l]),(0,u.Z)(t)?null:n.createElement(tk,{chartId:h,chartSeries:t.data,settings:Ct(xt({},t.settings),{useNoData:!!t.settings.noDataString}),isPanelFetching:!1,isPanelQueryMissing:i,onPanelLoaded:o,toggleSidePanel:l,onInitShowingSidePanel:c,updateDrilldown:g,drilldown:m})})),rk="canvasChart___OJmZk",nk="chart-visualization-tooltip",ak=[ce.ChartType.LINE,ce.ChartType.AREA,ce.ChartType.BAR,ce.ChartType.DOUGHNUT,ce.ChartType.COLUMN,ce.ChartType.PIE,ce.ChartType.HEATMAP],sk=[ce.ChartType.BAR,ce.ChartType.DOUGHNUT,ce.ChartType.COLUMN,ce.ChartType.STACKED_AREA,ce.ChartType.STACKED_AREA_100,ce.ChartType.STACKED_COLUMN,ce.ChartType.STACKED_COLUMN_100,ce.ChartType.PIE,ce.ChartType.STACKED_BAR,ce.ChartType.STACKED_BAR_100,ce.ChartType.HEATMAP],ok=()=>{const e=document.getElementById(nk);e&&setTimeout((()=>{e.style.opacity="0",e.style.visibility="hidden"}),0)},lk=({date:e,bucket:t,count:i})=>`\n  <div class="chart-tooltip">\n    <div class="chart-tooltip__header chart-tooltip__value">\n      ${(0,r.encode)(e)}\n    </div>\n    <div class="chart-tooltip__justified-row">\n      <div class="chart-tooltip__value">${r.i18nUtil.get("sharedAnalytics.charts.tooltips.bucket")}</div>\n      <div class="chart-tooltip__value">${(0,r.encode)(t)}</div>\n    </div>\n    <div class="chart-tooltip__justified-row">\n      <div class="chart-tooltip__value">${r.i18nUtil.get("sharedAnalytics.charts.tooltips.count")}</div>\n      <div class="chart-tooltip__value">${i}</div>\n    </div>\n  </div>\n`;const ck=()=>{const e=PC.userPreferencesModel.get("dateLocaleFormat");if(e&&"auto"!==e)return e;const t=new Date(1980,5,24).toLocaleDateString(),i=t.indexOf("1980"),r=t.indexOf("6");let n=t.indexOf("24");-1===n&&(n=t.indexOf("Jun"));let a="ymd";return i<r&&r<n?a="ymd":r<n&&n<i?a="mdy":n<r&&r<i&&(a="dmy"),a},dk=e=>e?new PC.moment(e).locale((()=>{const e={dmy:"en-au",ymd:"en-ca",mdy:"en-us"};return e[ck()]||e.mdy})()).tz(Ie.timeZoneServiceV2.getUserTimeZone()).format("L"):void 0,uk=()=>PC.moment,pk=e=>{const t=PC.moment.duration(e),i=t.days(),r=t.hours(),n=t.minutes(),a=[{val:i,label:It.dateUtil.timeDuration.days(i)},{val:r,label:It.dateUtil.timeDuration.hours(r)},{val:n,label:It.dateUtil.timeDuration.minutes(n)}];let s="";for(let e=0;e<a.length;e++){const t=a[e];if(t.val){s+=`${t.val} ${t.label}`,a[e+1]&&a[e+1].val&&(s+=` ${It.dateUtil.and} ${a[e+1].val} ${a[e+1].label}`);break}}return s},hk=e=>e?new PC.moment(e).format("hh:mm:ss A Z"):void 0,mk=uk(),gk=new Ve.xQ,yk=new Ve.xQ;yk.pipe((0,Ke.M)(gk)).subscribe((([{entry:e,content:t,chart:i,customTooltipClass:r},n])=>{const a=document.getElementById(nk);if(a){let s=0,o=0;const l=e.dataSeries.type;a.innerHTML=t;const c=a.getBoundingClientRect();try{if(sk.includes(l)){const e=n.pageX,t=n.pageY;s=e-c.width-10,s<0&&(s=e),o=Math.max(t-c.height-10,10)}else{const t=e.dataSeries.axisX.convertValueToPixel(e.dataPoint.x),r=e.dataSeries.axisY.convertValueToPixel(e.dataPoint.y),n=i.container.getBoundingClientRect(),a=n.left+t;s=a-c.width-10,s<0&&(s=a),o=window.pageYOffset+Math.max(n.top+r-c.height-10,10)}requestAnimationFrame((()=>{a.style.left=`${s}px`,a.style.top=`${o}px`,a.style.opacity="1",a.style.visibility="visible",r?a.classList.add(r):a.setAttribute("class","")}))}catch(e){}}}));const vk=e=>e.axisY2&&e.data.every((e=>e.axisYType===ce.AxisYType.rightYAxis))?e.axisY2.map((e=>Ct(xt({},e),{gridThickness:1}))):e.axisY2;function fk(e,t){if(void 0!==t)return t;let i=Number(e);return isNaN(i)&&(i=0),0===i?10:i+5}const _k=e=>{e.hideLabels&&(e.labelFormatter=()=>"",e.title="")};const Sk=n.memo((function(e){const{visualizationData:t,id:i,preview:s,fetchDrilldownQueries:o,toggleSidePanel:l,shouldShowContextualMenu:c,isFocused:d=!1,focusedIndex:u,focusedMarkerSize:p,onChartClick:h,onChartDidRender:m,setPanelRenderTime:g,updateSeriesVisibility:y,enableLegend:v=!0,customTooltipClass:f,onFocusIndexChanged:_,onChartDidUpdate:S,renderLegend:b,theme:E,renderAdditionalData:T,dataSumoTest:x,timeRangeId:C,timeRangeSeconds:A,updatePanelVisualSettings:w,visualSettings:I}=e,R=`charts-${i}${s?"-preview":""}`,{drilldown:D,updateDrilldown:O}=lg({shouldShowContextualMenu:c,fetchDrilldownQueries:o}),N=(0,n.useMemo)((()=>De.currentUserHelper.hasFeatureFlag("UICanvasChartCustomTooltip")&&ak.includes(t.type)),[t.type]);(0,n.useEffect)((()=>{let e=document.getElementById(nk);if(e){const t=Number(e.dataset.ref);e.dataset.ref=`${t+1}`}else e=document.createElement("div"),e.setAttribute("id",nk),e.dataset.ref="1",document.body.appendChild(e),document.removeEventListener("click",ok),document.addEventListener("click",ok);return()=>{if(e){const t=Number(e.dataset.ref);1===t?(e.remove(),document.removeEventListener("click",ok)):e.dataset.ref=""+(t-1)}}}),[]),(0,n.useEffect)((()=>{if(D.anchorEl){const e=`${D.canvasEvent.dataSeriesIndex}-${D.canvasEvent.dataPointIndex}`;null==l||l(e,!0,D.canvasEvent.dataSeries.type),null==_||_(e)}}),[D,l,_]);const M=ue({[rk]:N}),k=(0,n.useContext)(a.ThemeContext),L=null!=E?E:k,P=(0,n.useMemo)((()=>{0===t.data.length&&$.logWarnLocal("visualizationData.data is empty list");const e=function(e){const{mode:t,type:i,data:r,displayType:n}=e;if(Qb(t,i,n,r.length))return r.slice(0,Xl);const a=zb(e);return r.slice(0,a)}(t),i=Ct(xt({},t),{data:e.map(((e,t)=>{var i=e,{cursor:r}=i,n=At(i,["cursor"]);let a=n.markerType,s=n.markerSize;("none"===a||"threshold"===n.name)&&(a="circle",s=0);for(const e of n.dataPoints){const t=e.sumoMetadata;null!=t&&t.isClientInterpolated?(e.markerType="none",e.cursor="default",e.highlightEnabled=!1):e.cursor="pointer",(null==t||!t.isOutlier)&&(null==t?void 0:t.isPointConnected)&&delete e.markerSize}if(d){const[e,i]=(null!=u?u:"").split("-");if(e&&i){const r=n.dataPoints[Number(i)];t===Number(e)&&void 0!==r&&(r.markerSize=fk(s,p))}}return Ct(xt({},n),{markerType:a,markerSize:s,mouseout:e=>{n.mouseout&&n.mouseout(e),ok()}})})),toolTip:Ct(xt({},t.toolTip),{contentFormatter:e=>{var i,r,n,a;const{entries:s}=e,o=s[0];if(null!=(r=null==(i=o.dataPoint)?void 0:i.sumoMetadata)&&r.isClientInterpolated)return null;const l=null==(a=null==(n=null==t?void 0:t.toolTip)?void 0:n.contentFormatter)?void 0:a.call(n,e,t.mode,[],(e=>{var i,r,n;switch(e){case ce.AxisYType.leftYAxis:return null!=(i=t.axisY[0].unit)?i:ce.EMPTY_UNIT_SELECTOR_EVENT;case ce.AxisYType.rightYAxis:return null!=(n=null==(r=t.axisY2)?void 0:r[0].unit)?n:ce.EMPTY_UNIT_SELECTOR_EVENT}})(o.dataSeries.axisYType),(e=>{var i;switch(e){case ce.AxisYType.leftYAxis:return t.axisY[0].unitDecimals;case ce.AxisYType.rightYAxis:return null==(i=t.axisY2)?void 0:i[0].unitDecimals}})(o.dataSeries.axisYType));return N?(yk.next({entry:o,content:l,chart:e.chart,customTooltipClass:f}),""):l}}),focusedIndex:d?u:void 0,axisY2:vk(t),backgroundColor:FC(L)});return[i.axisY,i.axisY2,i.axisX].forEach((e=>{null==e||e.forEach(_k)})),De.currentUserHelper.hasFeatureFlag("UICanvasChartDisableDistributionCrosshair")&&i.mode===np.DISTRIBUTION&&(i.axisX[0].crosshair.enabled=!1),i}),[f,u,p,N,d,L,t]),F=(0,n.useMemo)((()=>({click:(e,t)=>{var i;const r=e,n=null!=(i=null==r?void 0:r.dataPoint)?i:null;if(null==n||!n.sumoMetadata.isClientInterpolated)return null==h||h({dataPoint:n,dataSeries:null==r?void 0:r.dataSeries,dataPointIndex:null==r?void 0:r.dataPointIndex}),O(r,t)},mouseout:ok,mousemove:(e,t)=>{De.currentUserHelper.hasFeatureFlag("UICanvasChartCustomTooltip")&&(t.persist(),gk.next(t))}})),[h,O]),U=P.mode===np.DISTRIBUTION,V=P.type,B=(0,n.useCallback)((e=>v?b?b(e):(0,ce.getCommonLegend)(e,(({id:t,visible:i},r)=>{void 0!==t&&(null==y||y({seriesId:t,visible:!(null==i||i),sumoCanvasChart:e,shiftKey:r}))}),NT(U,V),IO,MO,{pageSize:10},{legendKey:`distribution-${String(U)}`}):null),[V,v,U,y,b]),H=(0,n.useCallback)((e=>{null==g||g(),null==m||m({type:"init"},e)}),[g,m]),W=(0,n.useCallback)((e=>{null==S||S({type:"update"},e),null==g||g()}),[S,g]);return"heatmap"===P.type?n.createElement(ce.SumoChart,{id:R,config:P,onDataPointHover:e=>{const{labelFormatter:i,unit:n}=t.axisY[0],a=((e,t,i)=>{const{data:n,dataPoints:a}=e,{yBucketSize:s}=n[0],{y:o}=a[0];if("number"!=typeof o)return;const l=t({value:o,axis:{unit:i}}),c=t({value:o+s,axis:{unit:i}});return a[0].z?{entry:{dataSeries:{type:ce.ChartType.HEATMAP}},content:lk({date:Ie.userDateService.formatter(r.DATE_FORMAT_PRESET.DATE_TIME_24_HOURS)(mk(a[0].x),Ie.timeZoneServiceV2.getUserTimeZone()),bucket:`${l} - ${c}`,count:a[0].z}),chart:e.container}:void 0})(e,i,n);gk.next(e.originalEvent),yk.next(Ct(xt({},a),{customTooltipClass:f}))},onDataPointOut:()=>{ok()},events:{onMouseMove:e=>{(()=>{var e,t;const i=document.getElementById(nk);return i&&"1"===(null==(e=null==i?void 0:i.style)?void 0:e.opacity)&&"visible"===(null==(t=null==i?void 0:i.style)?void 0:t.visibility)})()&&requestAnimationFrame((()=>{(e=>{const t=document.getElementById(nk),i=t.getBoundingClientRect(),{pageX:r,pageY:n}=e;let a=r-i.width-10;a<0&&(a=r);const s=Math.max(n-i.height-10,10);t.style.left=`${a}px`,t.style.top=`${s}px`})(e)}))}}}):n.createElement(n.Fragment,null,n.createElement(ce.CanvasChart,{canvasData:P,container:R,className:M,events:F,afterRender:H,afterUpdate:W,renderLegend:B,renderAdditionalData:T,dataSumoTest:x,timeRangeId:C,timeRangeSeconds:A,updatePanelVisualSettings:w,visualSettings:I}),c&&n.createElement(iM,{drilldown:D,onClick:e.sendSearchDrillDown,handleClose:()=>O(null)}))}));function bk(e){return(0,L.Z)(e)||"number"==typeof e&&isNaN(e)||"NaN"===e}const Ek=e=>[{name:r.i18nUtil.get("sharedAnalytics.urlContextMenu.openInNewWindow"),action:()=>window.open(e,"_blank","noopener")},{name:r.i18nUtil.get("sharedAnalytics.urlContextMenu.openInSumoTab"),action:()=>Tk(e)}],Tk=e=>{const{name:t,params:i}=(0,Ie.findStateMatchForRouteUrl)(e.split("#")[1],!1)||{};t?Re.applicationState.go(t,i):window.open(e,"_blank","noopener")},xk=e=>{const t=0===e.indexOf(window.location.origin),[i,r]=e.split("#");if(t&&r){const{name:e}=(0,Ie.findStateMatchForRouteUrl)(r,!1)||{};return!!e}return!1},Ck=({event:e,btnRenderer:t,url:i=""})=>{const[r,s]=n.useState(!1),[o,l]=n.useState({});return n.useEffect((()=>{if(e){const{target:t,clientX:i,clientY:r}=e,n={left:i,top:r};s(!0),l({element:t,position:n,anchorOrigin:{vertical:"top",horizontal:"left"}})}}),[e]),n.createElement(a.Menu,{anchor:o,btnRenderer:t,isOpen:r,onClose:()=>s(!1)},((e="")=>Ek(e).map((e=>n.createElement(a.Menu.Item,{key:e.name,onClick:e.action},n.createElement(a.Menu.Text,null,e.name)))))(i))},Ak=({cell:e,title:t})=>n.createElement(Ck,{btnRenderer:i=>n.createElement("a",{href:e.link,target:"_blank",rel:"noopener",title:t,onContextMenu:e=>{e.preventDefault(),i(e)}},e.value),url:e.link}),wk={getContextMenuItems:Ek,shouldRenderContextMenu:xk,renderUrlContextMenu:(e,t)=>{const i=e.currentTarget.href;xk(i)&&(e.preventDefault(),tt.render(n.createElement(Ck,{url:i,event:e}),t))},UrlContextMenu:Ak},Ik={tbody:"tbody___Sbj0b",thead:"thead___3MGRn",table:"table___8mV4d",tableContainer:"tableContainer___HgTLN",tr:"tr___Xx56-",td:"td___UPu-d",th:"th___-Mdie",wrapper:"wrapper___Uw-V2",verticalbar:"verticalbar___2njfV",sortContainer:"sortContainer___ORRUz",sortIconPlaceholder:"sortIconPlaceholder___kwzx4",arrow:"arrow___ylelL",content:"content___kBNZf",colSetting:"colSetting___h02gF",trWrapper:"trWrapper___2tORu",paginationContainer:"paginationContainer___Wm40J",spacer:"spacer___sCGIW",indexCol:"indexCol___bvGje",numCol:"numCol___8GbSV",stringCol:"stringCol___eVl-h",linkCol:"linkCol___tMYr5"},Rk={tbody:"tbody___--h7v",thead:"thead___2S5oP",table:"table___f7Tbr",tableContainer:"tableContainer___uLKoU",tr:"tr___QMWWv",td:"td___8f2mX",th:"th___9Ei4F",wrapper:"wrapper___Z0D3N",verticalbar:"verticalbar___N5RRs",sortContainer:"sortContainer___nsGfP",sortIconPlaceholder:"sortIconPlaceholder___Xa6Gj",arrow:"arrow___nPQsG",content:"content___igQws",colSetting:"colSetting___wT6QA",trWrapper:"trWrapper___RpxDy",paginationContainer:"paginationContainer___dNz4D",spacer:"spacer___h-OCe",indexCol:"indexCol___MkwZ0",numCol:"numCol___Yl-0l",stringCol:"stringCol___VsjEU",linkCol:"linkCol___MH0IE"},Dk="perf-table-text-measurement",Ok="sumo_table_index",Nk=250;class Mk extends n.PureComponent{constructor(e){var t,i,s,o;super(e),this.textWidthCache=new Ii(1e3),this.lastScrollLeft=0,this.measureWidthOf=(e,t)=>{var i,n,a;const s=`${e}_${t}_${null!=(a=null==(n=null==(i=this.props.options)?void 0:i.tableStyle)?void 0:n.fontSize)?a:"0"}`;if(this.textWidthCache.has(s))return(0,r.ensureDefined)(this.textWidthCache.get(s));let o=0;return this.textDiv&&(t&&"number"===t?this.textDiv.classList.add("isNumber"):this.textDiv.classList.remove("isNumber"),this.textDiv.textContent=e,o=this.textDiv.clientWidth+10+16),this.textWidthCache.set(s,o),o},this.clearMemoizedData=()=>{this.processDataMemoized([],[],{})},this.getTableOptions=(e={})=>{const{data:t}=this.props,{pagination:i=!0,currentPage:n=this.state.settings.currentPage,formatNumber:a=!0,showIndexCol:s=!0,paginationPageSize:o=this.state.settings.paginationPageSize,tableStyle:l={},customNumberFormatter:c,onRowClick:d,classes:u}=e,p=Math.ceil(t.length/o);return{pagination:i,currentPage:Math.min(n,p-1),totalPages:p,formatNumber:a,customNumberFormatter:null!=c?c:r.formatNumber,showIndexCol:s,paginationPageSize:o,tableStyle:l,classes:u,onRowClick:d}},this.maybeCreateTextMeasurementContainer=()=>{this.textDiv||(this.textDiv=document.createElement("div"),this.textDiv.setAttribute("id",Dk),document.body.appendChild(this.textDiv),this.syncTextMeasurementContainerStyle())},this.syncTextMeasurementContainerStyle=()=>{var e,t;const{options:i}=this.props;this.textDiv&&null!=(e=null==i?void 0:i.tableStyle)&&e.fontSize&&(this.textDiv.style.fontSize=null==(t=null==i?void 0:i.tableStyle)?void 0:t.fontSize)},this.checkVerticalScrollBarExists=()=>{const e=this.spacerRef.current,t=this.tbodyRef.current;if(e&&t){const i=t.scrollHeight>t.clientHeight;e.style.display=i?"inline-block":"none"}},this.isFlexibleColumn=e=>(0,L.Z)(e.width)&&["string","link"].includes(e.columnType),this.processData=(e,t,i)=>{const n=[],a=[];for(const s of e){const e=s.field;let o=s.headerName,l="nil";t.forEach(((t,n)=>{const s=t[e];let c,d="";if(!(0,L.Z)(s)){if("number"==typeof s)l="number",isNaN(s)?d="":i.formatNumber&&(d=i.customNumberFormatter(s));else if((0,r.isMarkdownUrl)(s)){l="link";const e=(0,r.extractURLFromLink)(s);d=e.title,c=e.url}else"nil"===l&&(l="string"),d=s.replace(/\r/g,"\n");if(d.includes("\n")){const e=d.split("\n").reduce(((e,t)=>e.length>t.length?e:t));o=e.length>o.length?e:o}else o=d.length>o.length?d:o}a[n]||(a[n]={});let u="";u="link"===l?d:"number"===l&&""===d?-1/0:s,a[n][e]={value:d,valueToCompare:u,link:c}})),s.valFormatter&&(o=s.valFormatter(o));const c=Ct(xt({},s),{columnType:l,maxWidth:(0,L.Z)(s.width)&&"string"!==l?this.measureWidthOf(o,l):0,sortable:!1!==s.sortable,longestWord:o});if(this.isFlexibleColumn(c)){const e=o.length;if(e<=Nk){const e=this.measureWidthOf(o)+10,t=c.headerName===o?e:this.measureWidthOf(c.headerName),i=Math.max(e,t);c.flexBasis=Math.min(i,Nk),c.minWidth=Math.max(Math.min(e,100),Math.min(i,Nk))}else c.flexBasis=Nk,c.minWidth=Nk;e<=100?c.flexGrow=1:e<=Nk&&(c.flexGrow=2)}n.push(c)}if(i.showIndexCol){const e=String(a.length),t="".length>e.length?"":e;n.unshift({columnType:"index",maxWidth:this.measureWidthOf(t)-10-8+1,field:Ok,headerName:"",longestWord:t}),a.forEach(((e,t)=>{e[Ok]={value:t+1,valueToCompare:t+1}}))}return{columnsInternal:n,dataInternal:a}},this.handleScroll=e=>{const t=e.currentTarget.scrollLeft;t!==this.lastScrollLeft&&this.syncHeaderHorizontalScroll(t)},this.syncHeaderHorizontalScroll=e=>{requestAnimationFrame((()=>{this.theadRef.current&&(this.theadRef.current.scrollLeft=e)}))},this.handleSort=e=>{const{sortedOrder:t,sortedColumn:i}=this.state.settings;let r="ascending";if(e.field===i)switch(t){case"none":r="ascending";break;case"ascending":r="descending";break;case"descending":r="none"}this.setState((t=>({settings:Ct(xt({},t.settings),{sortedColumn:e.field,sortedOrder:r})})))},this.getSortingSymbol=e=>{switch(e){case"ascending":return n.createElement(a.Icon,{name:"caret-up"});case"descending":return n.createElement(a.Icon,{name:"caret-down"});case"none":return""}return""},this.openMenu=e=>{},this.renderPagination=e=>{const{styles:t}=this.props;if(e.pagination)return n.createElement("div",{className:t.paginationContainer},n.createElement(a.SumoTablePagination,{currentPage:e.currentPage,totalPages:e.totalPages,onChangePage:this.handlePageChange}))},this.handlePageChange=e=>{this.setState((t=>Ct(xt({},t),{settings:Ct(xt({},t.settings),{currentPage:e})})))},this.sortColumnIfRequired=(e,t)=>{const{settings:i}=this.state;if(null!==i.sortedColumn&&"none"!==i.sortedOrder){const r=e.find((e=>e.field===i.sortedColumn));if(r){const e=r.columnType;"nil"!==e&&(["index","number"].includes(e)?"ascending"===i.sortedOrder?t.sort(((e,t)=>{const r=e[i.sortedColumn].valueToCompare,n=t[i.sortedColumn].valueToCompare;return bk(r)&&bk(n)?0:bk(r)?-1:bk(n)?1:r-n})):t.sort(((e,t)=>{const r=e[i.sortedColumn].valueToCompare,n=t[i.sortedColumn].valueToCompare;return bk(r)&&bk(n)?0:bk(r)?1:bk(n)?-1:n-r})):"string"===e&&("ascending"===i.sortedOrder?t.sort(((e,t)=>{const r=e[i.sortedColumn].valueToCompare,n=t[i.sortedColumn].valueToCompare;return bk(r)&&bk(n)?0:bk(r)?-1:bk(n)?1:r.localeCompare(n)})):t.sort(((e,t)=>{const r=e[i.sortedColumn].valueToCompare,n=t[i.sortedColumn].valueToCompare;return bk(r)&&bk(n)?0:bk(r)?1:bk(n)?-1:n.localeCompare(r)}))))}}return t},this.renderLinkCell=(e,t)=>e.link&&xk(e.link)?n.createElement(Ak,{cell:e,title:t}):n.createElement("a",{href:e.link,target:"_blank",rel:"noopener",title:t},e.value),this.renderFlexibleCell=(e,t)=>{const i=(0,r.withIndex)(e)[t.field],a="string"==typeof i.value||"number"==typeof i.value?`${i.value}`:"";return void 0!==i.link&&i.link.length>0?this.renderLinkCell(i,a):n.createElement("span",{title:a},i.value)},this.getColKey=(e,t)=>`${e.columnType}-${e.field}-${e.headerName}-${t}`,this.state={settings:{currentPage:null!=(i=null==(t=e.options)?void 0:t.currentPage)?i:0,paginationPageSize:null!=(o=null==(s=e.options)?void 0:s.paginationPageSize)?o:50,sortedColumn:null,sortedOrder:"none",showIndexCol:!0}},this.tableRef=n.createRef(),this.theadRef=n.createRef(),this.tbodyRef=n.createRef(),this.spacerRef=n.createRef(),this.textDiv=document.getElementById(Dk),this.maybeCreateTextMeasurementContainer(),this.resizeObserver=new ResizeObserver((()=>{this.checkVerticalScrollBarExists()})),this.processDataMemoized=(0,oe.default)(this.processData)}componentDidMount(){this.tbodyRef.current&&this.tbodyRef.current.addEventListener("scroll",(e=>{const t=e.currentTarget;this.syncHeaderHorizontalScroll(t.scrollLeft)})),this.tableRef.current&&this.resizeObserver.observe(this.tableRef.current)}componentWillUnmount(){var e;null==(e=this.resizeObserver)||e.disconnect(),this.clearMemoizedData()}render(){var e,t,i,s,o;const{columns:l,data:c,styles:d}=this.props,{settings:u}=this.state;this.syncTextMeasurementContainerStyle();const p=this.getTableOptions(this.props.options),{columnsInternal:h,dataInternal:m}=this.processDataMemoized(l,c,p);this.sortColumnIfRequired(h,m);const g=m.slice(p.currentPage*p.paginationPageSize,(p.currentPage+1)*p.paginationPageSize);return n.createElement("div",{className:ue(d.wrapper,null==(e=p.classes)?void 0:e.wrapper,"table-wrapper")},n.createElement("div",{className:ue(d.tableContainer,"perf-table"),"data-sumo-test":"perf-table"},n.createElement("div",{className:ue(d.table,null==(t=p.classes)?void 0:t.table,"perf-table__table"),role:"table",ref:this.tableRef,style:p.tableStyle},n.createElement("div",{className:ue(d.thead,null==(i=p.classes)?void 0:i.tHead,"perf-table__thead"),ref:this.theadRef,"data-sumo-test":"perf-table.thead"},n.createElement("div",{className:ue(d.tr,"perf-table__tr"),"data-sumo-test":"perf-table.tr"},h.map(((e,t)=>{var i;let r={};if(["number","nil","index"].includes(e.columnType)){const t=null!=(i=e.width)?i:e.maxWidth;r={flexBasis:`${t}px`,width:`${t}px`,flexGrow:0,flexShrink:0}}return this.isFlexibleColumn(e)&&(r={flexGrow:e.flexGrow,minWidth:e.minWidth,flexBasis:e.flexBasis}),n.createElement("div",{className:ue(d.th,"perf-table__th",{[d.numCol]:"number"===e.columnType,[d.stringCol]:"string"===e.columnType,[d.indexCol]:"index"===e.columnType,[d.linkCol]:"link"===e.columnType}),key:this.getColKey(e,t),style:r,"data-sumo-test":"perf-table.th"},t>1&&n.createElement("span",{className:d.verticalbar}),n.createElement("span",{className:d.sortContainer,onClick:()=>this.handleSort(e)},n.createElement("span",{className:d.sortIconPlaceholder},u.sortedColumn===e.field&&n.createElement("span",{className:d.arrow},this.getSortingSymbol(u.sortedOrder))),n.createElement("span",{className:d.content},e.headerName)),n.createElement("span",{className:d.colSetting},n.createElement(a.Icon,{name:"kebab",onClick:()=>this.openMenu(e)})))})),n.createElement("div",{className:d.spacer,ref:this.spacerRef}))),n.createElement("div",{className:ue(d.tbody,null!=(o=null==(s=p.classes)?void 0:s.tBody)?o:"","perf-table__tbody","table-panel-content"),ref:this.tbodyRef,"data-sumo-test":"perf-table.tbody"},g.map(((e,t)=>n.createElement("div",{className:d.trWrapper,key:t,onClick:()=>{(0,r.isNotUndefined)(p.onRowClick)&&p.onRowClick(t)}},n.createElement("div",{className:ue(d.tr,"perf-table__tr"),"data-sumo-test":"perf-table.tr"},h.map(((t,i)=>{var a,s,o;let l={};if(["number","nil","index"].includes(t.columnType)){const e=null!=(a=t.width)?a:t.maxWidth;l={flexBasis:`${e}px`,width:`${e}px`,flexGrow:0,flexShrink:0}}this.isFlexibleColumn(t)&&(l={flexGrow:t.flexGrow,minWidth:t.minWidth,flexBasis:t.flexBasis});const c=(0,r.withIndex)(e)[t.field];if(t.cellStyle&&"function"==typeof t.cellStyle&&!Number.isNaN(c.valueToCompare)){const e=t.cellStyle({value:Number(c.valueToCompare)});l=xt(xt({},l),e)}return n.createElement("div",{className:ue(d.td,t.customCellStyle,null!=(o=null==(s=p.classes)?void 0:s.cell)?o:"","perf-table__td",{[d.numCol]:"number"===t.columnType,[d.stringCol]:"string"===t.columnType,[d.indexCol]:"index"===t.columnType,[d.linkCol]:"link"===t.columnType}),key:this.getColKey(t,i),style:l,"data-sumo-test":"perf-table.td"},this.renderFlexibleCell(e,t))})))))))),this.renderPagination(p)))}}const kk=(0,a.withCssModulesTheme)({brandLight:Rk,brandDark:Ik},Rk,Mk),Lk={tableContainer:"table-panel-container",tableHeader:"table-panel-header",tableContent:"table-panel-content",table:"table-panel-table",cellClass:"table-panel-cell-class"},Pk=e=>{const{data:t,fieldName:i}=e,a=(0,r.extractURLFromLink)((0,r.withIndex)(t)[i]),s={value:a.title,link:a.url};return a.url&&xk(a.url)?n.createElement(Ak,{cell:s,title:a.title}):n.createElement("a",{href:a.url,target:"_blank",rel:"noopener"},a.title)},Fk=({value:e,colDef:t})=>"number"==typeof e?(0,r.formatNumberWithCommas)(e,t.decimalScale,!1):e;function Uk(e,t,{fontSize:i,decimals:n}={}){const a=Ct(xt({},e),{cellClass:Lk.cellClass,headerTooltip:!0,decimalScale:null!=n?n:void 0,valueFormatter:Fk,headerName:"_timeslice"===e.headerName?r.i18nUtil.get("sharedAnalytics.timesliceHeaderName"):e.headerName});if(i&&!a.cellStyle&&(a.cellStyle={"font-size":i}),t.indexOf(e.field)>-1){const t={component:Pk,props:{fieldName:e.field}};a.customCellRenderer=t}return a}function Vk(e){const t=[];return Object.keys(e).forEach((i=>{const n=(0,r.withIndex)(e)[i];n&&(0,r.isMarkdownUrl)(n)&&t.push(i)})),t}const Bk=n.memo((e=>{var t;const{visualizationData:i,setPanelRenderTime:s}=e,{columnOptions:l,data:c}=i,d=i.gridOptions||{},{paginationPageSize:u=BA}=d,p=At(d,["paginationPageSize"]),h=(0,n.useRef)(!0),m=null==(t=p.rowStyle)?void 0:t["font-size"],{decimals:g}=i;let y=[];void 0!==c&&Array.isArray(c)&&c[0]&&(y=Vk(c[0]));const v=!De.currentUserHelper.hasFeatureFlag("UIDashboardPerformantTable")||l.length>15,f=(0,n.useRef)({redrawRows:Q.Z,paginationSetPageSize:Q.Z,paginationGotoPage:Q.Z,paginationGetCurrentPage:Q.Z});(0,n.useEffect)((()=>{v&&f.current.redrawRows()}),[m,g,v]),(0,n.useEffect)((()=>{v&&(f.current.paginationSetPageSize(u),f.current.paginationGotoPage(0))}),[u,v]),(0,n.useEffect)((()=>{s&&s()}),[c,s]);const _=(0,r.usePrevious)(l);return(0,o.Z)(_,l)||(h.current=!0),v?n.createElement(a.Table,{styleProps:{tableContainer:Lk.tableContainer,tableHeader:Lk.tableHeader,tableContent:Lk.tableContent,table:Lk.table},columnOptions:l.map((e=>Uk(e,y,{fontSize:m,decimals:g}))),data:c,gridOptions:Ct(xt({},p),{enableSizeColumnsToFit:!1,enableSizeColumnsToContent:h.current,density:"dense",suppressFieldDotNotation:!0,onTableInit:e=>{e.paginationSetPageSize(u),f.current=e},onTotalAnimationQueueEmpty:()=>{h.current&&(h.current=!1)},indexColumn:{isEnabled:!0,headerName:"",cellStyle:{color:"#889EB3"}}})}):n.createElement(kk,{columns:l.map((e=>Uk(e,y,{fontSize:m}))),data:c,options:{paginationPageSize:u,tableStyle:{fontSize:m},customNumberFormatter:e=>"number"==typeof g?(0,r.formatNumberWithCommas)(e,g,!1):(0,r.formatNumberWithCommas)(e)}})}));function $k(e){var t=[1/0,1/0,-1/0,-1/0];return(0,st.pZ)(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}$k.default=$k;const Hk="rulerContainer___w96BZ",Wk="clustersContainer___QIdJT",qk="cluster___h0hT6",jk="steps___bEkWk",Qk="rule___wZYM3",zk="ruler___FBxbU",Gk="name___CaTUo",Kk="rulesList___n9I5p",Yk="rulesBlock___lBCcv",Zk="rule___NRRzg",Xk=({name:e,steps:t})=>{const i=(Me.MAX_CLUSTER_RADIUS-Me.MIN_CLUSTER_RADIUS)/(t.length-1);return n.createElement("div",{className:zk,"data-sumo-test":"size-thresholds-ruler"},n.createElement("div",{className:Gk},e),n.createElement("div",{style:{"--max-cluster-radius":`${Me.MAX_CLUSTER_RADIUS}px`},className:ue(Yk,Hk)},n.createElement("div",{className:Wk},t.map(((e,t)=>n.createElement("div",{key:t,className:qk,style:{"--cluster-radius":Me.MIN_CLUSTER_RADIUS+i*t-2+"px"}})))),n.createElement("ul",{className:ue(Kk,jk)},t.map((e=>n.createElement("li",null,n.createElement("div",{className:ue(Zk,Qk)},(0,r.formatNumber)(e))))))))},Jk="colorBox___Y-7W-",eL="singleRuler___4hkRg",tL="ruler___5Oo3t",iL="ruleList___QCAHt",rL="rule___DBsGf",nL=(e,t)=>{const i=e.toString(),r=i.indexOf(".");if(r<0)return e-t;{const n=i.substring(r+1).length,a=Math.pow(10,n);return(e*a-t)/a}},aL=(e,t)=>e<t?`${e} - ${t}`:`${e}`,sL=({name:e,thresholds:t})=>n.createElement("div",{className:ue(zk,tL),"data-sumo-test":"color-threshold-ruler"},1===t.length?n.createElement("div",{className:eL},n.createElement("div",{className:Jk,style:{backgroundColor:t[0].color}}),n.createElement("div",{className:Gk},e)):n.createElement(n.Fragment,null,n.createElement("div",{className:Gk},e),n.createElement("ul",{className:ue(Kk,iL,Yk)},t.map((({color:e,id:i},r)=>n.createElement("li",{key:i,className:eL},n.createElement("div",{className:Jk,style:{backgroundColor:e}}),n.createElement("div",{className:ue(Zk,rL)},((e,t)=>{const{value:i}=e[t],r=e[t+1];if(t===e.length-1)return`>= ${i}`;if(r){if(null===i)return`< ${r.value}`;if("number"==typeof r.value)return i<r.value?aL(i,nL(r.value,1)):i>r.value?aL(i,nL(r.value,-1)):`${i}`}return""})(t,r)))))))),oL="rulerBlock___kEW8A",lL=({layers:e})=>{if(!De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT"))return null;const t=e.filter((({layerType:e,metricName:t})=>e===el.CLUSTER&&t));return t.length?n.createElement("div",{className:oL},t.map((e=>n.createElement(n.Fragment,{key:e.metricName},null!==e.sizeSource&&n.createElement(Xk,{name:e.sizeSource.metricName,steps:e.sizeSteps}),n.createElement(sL,{key:e.metricName,name:e.metricName,thresholds:e.colorThresholds}))))):null},cL=([e,t],[i,r])=>Math.sqrt(Et(i-e,2)+Et(r-t,2)),dL=(e,t,i,r,a,s,o,l)=>(0,n.useCallback)((()=>{var n;const d=null==(n=a.current)?void 0:n.getMap(),u=null==d?void 0:d.getZoom();if(t&&void 0!==u){const n=t.getClusters(Me.WORLD_BOUNDS,Math.floor(u)),a=(0,at.uf)(n);if(o&&((e,t,i)=>{if(e.features.length>1){const r=[];for(const n of e.features){const{id:e,geometry:{coordinates:a}}=n,s=e;let o=0;if("number"==typeof s){const e=t.getLeaves(s,Number.POSITIVE_INFINITY);for(const{geometry:{coordinates:t}}of e)o=Math.max(o,cL(a,t));n.properties.extraProperties=null,r.push({zoomedCluster:n,center:a,radius:o})}else{const e=n.geometry.coordinates,t=i.geoJSON.features.find((({geometry:{coordinates:[t,i]}})=>e[0]===t&&e[1]===i));n.properties.extraProperties=t?(0,c.Z)(t.properties,"extraProperties"):{count:Number.MIN_SAFE_INTEGER,min:Number.MIN_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER,avg:Number.MIN_SAFE_INTEGER,sum:Number.MIN_SAFE_INTEGER,latest:Number.MIN_SAFE_INTEGER}}}for(const{properties:e,geometry:{coordinates:t}}of i.geoJSON.features)for(const{zoomedCluster:i,center:n,radius:a}of r)cL(n,t)<=a&&(i.properties.extraProperties?oA(i.properties.extraProperties,e):i.properties.extraProperties=e);for(const{zoomedCluster:e}of r)e.properties.extraProperties||(e.properties.extraProperties={count:Number.MIN_SAFE_INTEGER,min:Number.MIN_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER,avg:Number.MIN_SAFE_INTEGER,sum:Number.MIN_SAFE_INTEGER,latest:Number.MIN_SAFE_INTEGER})}})(a,t,o),i(a),n.length>=1){const t=null!=l?l:KT(a,s),i="auto"===e.type?YT(t,e.colors):e.thresholds.flatMap((e=>null!==e.value?[e.value,e.color]:[e.color])),n=ZT(t,Me.MIN_CLUSTER_RADIUS,Me.MAX_CLUSTER_RADIUS),c=ZT(t,Me.MIN_SINGLEPOINTCLUSTER_RADIUS,Me.MAX_SINGLEPOINTCLUSTER_RADIUS);r({clusterColor:i.length>1?["step",o?["get",o.aggregationType,["get","extraProperties"]]:["get",s],...i]:i[0],clusterRadius:n.length>1?["step",["get",s],...n]:Me.MAX_CLUSTER_RADIUS,singleClusterRadius:c.length>1?["step",["get",s],...c]:Me.MAX_SINGLEPOINTCLUSTER_RADIUS})}i(a)}}),[e,t,i,r,s,a,o,l]),uL=(e,t,i,r,a)=>{const[s,o]=(0,n.useState)(null),[l,c]=(0,n.useState)((0,at.uf)([])),[d,u]=(0,n.useState)({clusterColor:"auto"===i.type?i.colors[i.colors.length-1]:i.thresholds[0].color,clusterRadius:Me.MAX_CLUSTER_RADIUS,singleClusterRadius:Me.MAX_SINGLEPOINTCLUSTER_RADIUS}),p=((e,t)=>(0,n.useCallback)((()=>{const i=lA(t);e(i)}),[e,t]))(o,e.geoJSON),h=dL(i,s,c,u,a,e.aggregationType,t,r);return(0,n.useEffect)((()=>{p()}),[p,a]),(0,n.useEffect)((()=>{var e;h();const t=null==(e=a.current)?void 0:e.getMap();return null==t||t.on("moveend",h),()=>{null==t||t.off("moveend",h)}}),[h,a]),[s,l,d]},pL=1e-5,hL=({colorThresholds:e,setViewport:t,mapRef:i,colorMetric:r,sizeMetric:a,Source:s,Layer:l,FlyToInterpolator:c,eventsRegistrator:d,sizeSteps:u,layerIds:{clusterLayerId:p,clusterCountLayerId:h,singleClusterLayerId:m}})=>{const g=(0,n.useMemo)((()=>e&&De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT")?{type:"controlled",thresholds:e}:{type:"auto",colors:De.currentUserHelper.hasFeatureFlag("MapboxHeatMapChart")?Ol:Dl}),[e]),y=null!=a?a:r,[v,f,_]=uL(y,a?r:null,g,De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT")?u:null,i),S=((e,t,i)=>(0,n.useCallback)((r=>{const[n]=r.features;if(!n)return;let a=n.geometry.coordinates;const s=null==n?void 0:n.properties.cluster_id,l=(e,r,[n,a])=>t((t=>Ct(xt({},t),{longitude:n,latitude:a,zoom:e,transitionDuration:r,transitionEasing:ut.easeCubicOut,transitionInterpolator:new i})));if(s){const t=null==e?void 0:e.getClusterExpansionZoom(s);if(t){if(e&&t>=24){const[{geometry:{coordinates:t}},...i]=e.getLeaves(s);if(i.every((({geometry:{coordinates:e}})=>(0,o.Z)(e,t)))){a=t;const i=[...t.map((e=>e-pL)),...t.map((e=>e+pL))],r=e.getClusters(i,24);r.length&&(a=r[0].geometry.coordinates)}}l(t,Pl,a)}}else l(Ul,Fl,a)}),[e,t,i]))(v,t,c),b=Ml(p),E=kl(m);return(0,n.useEffect)((()=>d.registerOnClick(S)),[d,S]),n.createElement(s,{type:"geojson",data:f},n.createElement(l,Ct(xt({},b),{paint:Ct(xt({},b.paint),{"circle-color":_.clusterColor,"circle-radius":_.clusterRadius})})),n.createElement(l,Ct(xt({},E),{paint:Ct(xt({},E.paint),{"circle-color":_.clusterColor,"circle-radius":_.singleClusterRadius})})),n.createElement(l,xt({},Ll(h,y.aggregationType))))};hL.displayName="ClusterMap";const mL=(0,n.memo)(hL);const gL=({metric:e,Source:t,Layer:i})=>{const a=(e,t)=>{const i=[];return(0,st.oq)(e,(e=>{e&&t&&i.push(Math.round(Number(e[t])))})),i},s={maxzoom:13,type:"heatmap",paint:{"heatmap-weight":{property:e.aggregationType,type:"interval",stops:(()=>{const t=ht.limits(a(e.geoJSON,e.aggregationType),"q",5);let i=0;return t.map((e=>(i+=.2,[e,i])))})()},"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["exponential",2],["heatmap-density"],0,"rgba(0, 0, 0, 0)",.16,r.SUMO_HEATMAP_DEFAULT_COLOR.aqua,.32,r.SUMO_HEATMAP_DEFAULT_COLOR.yellow,.48,r.SUMO_HEATMAP_DEFAULT_COLOR.brown,.64,r.SUMO_HEATMAP_DEFAULT_COLOR.pink,.82,r.SUMO_HEATMAP_DEFAULT_COLOR.red,1,r.SUMO_HEATMAP_DEFAULT_COLOR.fire]}},o=ht.limits(a(e.geoJSON,e.aggregationType),"q",2),l={type:"circle",minzoom:13,paint:{"circle-color":{property:e.aggregationType,type:"interval",stops:(c=o,c.map(((e,t)=>[e,Ol[t]])))},"circle-radius":{property:e.aggregationType,type:"interval",stops:((e,t,i)=>{const r=e.length-1;return e.map(((e,n)=>[e,t+n/r*(i-t)]))})(o,14,14)},"circle-stroke-color":Ne.ColorsV1.white,"circle-stroke-width":.7}};var c;return n.createElement(t,{type:"geojson",data:e.geoJSON},n.createElement(i,xt({},s)),n.createElement(i,xt({},l)))};gL.displayName="HeatMap";const yL=(0,n.memo)(gL),vL=()=>(0,n.useMemo)((()=>{const e=Math.random(),t=`cluster-layer-${Date.now()}-${e}`,i=`single-cluster-layer-${Date.now()}-${e}`;return{layerIds:{clusterLayerId:t,singleClusterLayerId:i,clusterCountLayerId:`cluster-count-layer-${Date.now()}-${e}`},interactiveLayerIds:[t,i]}}),[]),fL={mapContainer:"mapContainer___eR7J9",mapMessageContainer:"mapMessageContainer___SayoE"},_L=new Ve.xQ,SL={MIN:-180,MAX:180},bL={MIN:-90,MAX:90},EL=new Map,TL="Cypress"in window||window.navigator.webdriver;TL&&(window.getMapVisualizationTestHelper=e=>EL.get(e));const xL=e=>e.layerType===el.CLUSTER&&e.sizeSource?!e.sizeSource.geoJSON.features.length:!e.geoJSON.features.length,CL=({setPanelRenderTime:e,theme:t,mapChartData:s,isExportMode:o=!1,queries:l,styles:c,id:d})=>{var u;const p={light:PC.ENVIRONMENT.MAPBOX_STYLE_BASIC,brandLight:PC.ENVIRONMENT.MAPBOX_STYLE_BASIC,dark:PC.ENVIRONMENT.MAPBOX_STYLE_DARK,brandDark:PC.ENVIRONMENT.MAPBOX_STYLE_DARK},h=s.mapLayers.main,m=s.mapLayers.secondary,g=h.layerType,y=null!=(u=null==m?void 0:m.layerType)?u:null,[v,f]=(0,n.useState)("loading"),[_,S]=(0,n.useState)({latitude:0,longitude:0,bearing:0,pitch:0,zoom:0}),b=(0,n.useMemo)((()=>$k(h.geoJSON)),[h.geoJSON]),E=(0,n.useRef)(null),T=(0,n.useRef)(!1);(0,n.useEffect)((()=>{var e;const t=null==(e=E.current)?void 0:e.getMap();if(t){t.setMaxBounds([[SL.MIN,bL.MIN],[SL.MAX,bL.MAX]]);const e=t.fitBounds(b,{padding:50,duration:0}),{lat:i,lng:r}=e.getCenter(),{clientWidth:n,clientHeight:a}=e.getCanvasContainer(),s=Math.min(Math.max(e.getZoom(),0),Ul);S({width:n,height:a,latitude:i,longitude:r,zoom:s})}}),[!E.current]);const x=l.map((({queryString:e})=>e)).join(";");(0,n.useEffect)((()=>{if(TL&&E.current)return EL.set(x,E.current),()=>{EL.delete(x)}}),[x,E.current]),(0,n.useEffect)((()=>{null==e||e()}),[h.geoJSON,null==m?void 0:m.geoJSON,e]),(0,n.useEffect)((()=>{if(o&&E.current&&!T.current)try{T.current=!0,E.current.getMap().once("idle",(()=>{_L.next(d)}))}catch(e){}}),[o,d,E.current]);const C=(0,r.isDevMode)()?PC.ENVIRONMENT.MAPBOX_ACCESS_TOKEN_DEV:De.currentUserHelper.getDynamicProperty("ui_mabpox_access_token"),[A,w]=(0,n.useState)();(0,n.useEffect)((()=>{Promise.all([i.e(5306),i.e(522)]).then(i.bind(i,68076)).then((e=>{w({ReactMapGL:e.default,Source:e.Source,Layer:e.Layer,FlyToInterpolator:e.FlyToInterpolator})}))}),[]);const I=(0,n.useMemo)((()=>{var e;return null!=(e=E.current)&&e.getMap().isStyleLoaded()?Date.now():0}),[E.current,g,y]),R=vL(),D=vL(),O=(0,n.useMemo)((()=>(g===el.CLUSTER?R.interactiveLayerIds:[]).concat(y===el.CLUSTER?D.interactiveLayerIds:[])),[R.interactiveLayerIds,g,D.interactiveLayerIds,y]),N=(0,n.useCallback)((({width:e,height:t})=>{var i;const r=null==(i=E.current)?void 0:i.getMap();if(r){const i=r.fitBounds(b,{padding:50,duration:0}),{lat:n,lng:a}=i.getCenter(),s=Math.min(Math.max(i.getZoom(),0),Ul);S(Ct(xt({},_),{latitude:n,longitude:a,width:e,height:t,zoom:s}))}}),[b,_]),{mapEventHandlers:M,eventsRegistrator:k}=(0,n.useMemo)((()=>{const e=[];return{eventsRegistrator:{registerOnClick:t=>(e.push(t),()=>{const i=e.indexOf(t);-1!==i&&e.splice(i)})},mapEventHandlers:{onClick:t=>{e.forEach((e=>e(t)))}}}}),[]),L=(0,n.useMemo)((()=>performance.now()),[]),P=(0,n.useCallback)((()=>{de.basicPerformanceMeasurement.sendCustomMeasure({id:`map-load-id-${Date.now()}`,module:"shared-analytics",component:"mapVisualization",action:"mapbox_loaded",checkpoint:"has_data"},{name:"mapbox_loaded",timeInMs:performance.now()-L}),f("loaded")}),[L]),F=(0,n.useCallback)((e=>{console.error("MapVisualization error",e),f((e=>"loaded"!==e?"error":e))}),[]),U=(0,n.useMemo)((()=>[h].concat(m||[])),[h.metricName,h.colorThresholds,null==m?void 0:m.metricName,null==m?void 0:m.colorThresholds]),V=(0,n.useMemo)((()=>De.currentUserHelper.hasFeatureFlag("UIChartMapboxNMT")?{logoPosition:"top-left"}:{}),[]);if(!A)return null;const{Source:B,Layer:$,ReactMapGL:H,FlyToInterpolator:W}=A,q={mapRef:E,Layer:$,Source:B,FlyToInterpolator:W},j=Ct(xt({},q),{FlyToInterpolator:W,colorThresholds:h.colorThresholds,aggregationType:h.aggregationType});return!xL(h)||m&&!xL(m)?n.createElement("div",{className:c.mapContainer},n.createElement(H,Ct(xt(xt({},_),M),{ref:E,width:"100%",height:"100%",onError:F,onLoad:P,mapStyle:p[t],mapboxApiAccessToken:C,preserveDrawingBuffer:o,interactiveLayerIds:O,onResize:N,onViewportChange:S,mapOptions:V}),g===el.CLUSTER?n.createElement(mL,Ct(xt({key:"main-c"+I},j),{colorMetric:h,eventsRegistrator:k,setViewport:S,layerIds:R.layerIds,sizeSteps:h.sizeSteps,sizeMetric:h.sizeSource})):n.createElement(yL,Ct(xt({key:"main-h"+I},j),{metric:h})),m&&(y===el.CLUSTER?n.createElement(mL,Ct(xt({key:"secondary-c"+I},q),{colorThresholds:m.colorThresholds,eventsRegistrator:k,setViewport:S,layerIds:D.layerIds,colorMetric:m,sizeSteps:m.sizeSteps,sizeMetric:m.sizeSource})):y===el.HEATMAP?n.createElement(yL,Ct(xt({key:"secondary-h"+I},q),{metric:m,colorThresholds:m.colorThresholds})):null)),"loaded"!==v&&n.createElement("div",{className:c.mapMessageContainer},"loading"===v?n.createElement(a.Loader,{loaderType:"spinner",isVisible:!0,size:"large"}):r.i18nUtil.get("sharedAnalytics.errors.mapCannotBeLoaded")),n.createElement(lL,{layers:U})):null};CL.displayName="MapVisualization";const AL=(0,n.memo)((0,a.withCssModulesTheme)({light:fL},fL,CL));const wL=n.forwardRef(((e,t)=>{var i=e,{dataSumoTest:r,status:s}=i,o=At(i,["dataSumoTest","status"]);const[l,c]=function(e){switch(e){case"Normal":return["check-circle","success-40"];case"Critical":return["exclamation-circle","critical-60"];case"Warning":return["exclamation-triangle","warning-40"];case"MissingData":return["question-circle","magenta-80"];case"Disabled":return["disabled","grey-30"];case"Resolved":return["check-circle","grey-30"]}}(s);return n.createElement(a.Icon,xt({"data-sumo-test":r,name:l,ref:t,size:"medium",color:c},o))})),IL="sparkLineChart___eWUyR",RL=[le.VisualSettingsType.LINE,le.VisualSettingsType.AREA,le.VisualSettingsType.HONEYCOMB,le.VisualSettingsType.SVP],DL=[ce.ChartType.LINE,ce.ChartType.SPLINE,ce.ChartType.STEP_LINE,ce.ChartType.STACKED_LINE,ce.ChartType.STACKED_LINE_100,ce.ChartType.AREA,ce.ChartType.RANGE_AREA,ce.ChartType.RANGE_SPLINE_AREA,ce.ChartType.SPLINE_AREA,ce.ChartType.STEP_AREA,ce.ChartType.STACKED_AREA,ce.ChartType.STACKED_AREA_100];function OL(e){var t,i,r,n,a,s,o,l;if(e.type===le.VisualSettingsType.HONEYCOMB||e.type===le.VisualSettingsType.SVP)return(e=>{const t=Ie.timeZoneServiceV2.getUserTimeZone();return{type:ce.CartesianChartTypes.LINE,animationEnabled:!0,animationDuration:500,backgroundColor:Ne.ColorsV2["white-10"],axisX:[{labelFontColor:Ne.ColorsV2["grey-50"],lineColor:Ne.ColorsV2["white-50"],labelFontSize:10,labelFontFamily:'Roboto, "Arial", sans-serif',crosshair:Rc.crosshair,labelFormatter:(0,B.Z)(ce.labelDateFormatter,{timeZone:t}),type:ce.AxisType.DATETIME_CJS}],axisY:[{labelFontColor:Ne.ColorsV2["grey-50"],lineColor:Ne.ColorsV2["white-50"],stripLines:null,gridColor:Ne.ColorsV2["white-50"],gridThickness:1,lineThickness:0,labelFontSize:10,labelFontFamily:'Roboto, "Arial", sans-serif',tickColor:Ne.ColorsV2["white-50"],logarithmic:!1,linear:!1}],data:[{showInLegend:!1,markerSize:2,markerType:"circle",type:ce.ChartType.LINE,color:Ne.ColorsV2["grey-60"],xValueType:"dateTime",dataPoints:e.dataPoints,name:e.name}],toolTip:$d.toolTip,legend:{enabled:!1}}})(e.data);const c=e.data,d=Ct(xt({},c),{axisX:[xt({},c.axisX[0])],axisY:[xt({},c.axisY[0])]});return null==(i=null==(t=d.axisX)?void 0:t[0])||delete i.labelFontSize,null==(n=null==(r=d.axisX)?void 0:r[0])||delete n.titleFontSize,null==(s=null==(a=d.axisY)?void 0:a[0])||delete s.labelFontSize,null==(l=null==(o=d.axisY)?void 0:o[0])||delete l.titleFontSize,d}const NL=({series:e,focusedIndex:t,theme:i})=>{const r=(0,n.useRef)(null);((null==e?void 0:e.type)===le.VisualSettingsType.LINE||(null==e?void 0:e.type)===le.VisualSettingsType.AREA)&&t&&(t=t.replace(/\d+/,"0"));const a=(0,n.useCallback)((()=>{const a=r.current;null===a||void 0===e||(0,tt.render)(n.createElement(Sk,{id:"side-panel-sparkline",visualizationData:OL(e),preview:!1,enableLegend:!1,customTooltipClass:"sidePanel",isFocused:!0,focusedIndex:t,theme:i}),a)}),[r,e,t,i]);if((0,n.useEffect)((()=>{const e=setTimeout(a,300);return()=>{clearTimeout(e)}}),[e,a]),!e||!RL.includes(e.type)||(0,u.Z)(e.data.data)&&(0,u.Z)(e.data.dataPoints))return null;if(e.type===le.VisualSettingsType.LINE||e.type===le.VisualSettingsType.AREA){const t=e.data.data[0].type;if(void 0!==t&&!DL.includes(t))return null}return n.createElement("div",{ref:r,className:IL,"data-sumo-test":"single-series-spark-line"})},ML=({dimensions:e,theme:t})=>{const i=(0,n.useMemo)((()=>({variant:"text",color:"brandLight"===t||"light"===t?Ne.ColorsV2["grey-60"]:Ne.ColorsV2["grey-30"]})),[t]),a=(0,n.useMemo)((()=>({variant:"text",color:"brandLight"===t||"light"===t?Ne.ColorsV2["black-80"]:Ne.ColorsV2["white-30"]})),[t]),s=(0,n.useMemo)((()=>Object.entries(e).map((([e,t])=>({key:e,value:t||"",keyProps:i,valueProps:a})))),[e,i,a]),o=(0,n.useMemo)((()=>({showMoreBtn:r.i18nUtil.get("newDashboard.showMore"),showLessBtn:r.i18nUtil.get("newDashboard.showLess"),copiedToClipboard:r.i18nUtil.get("newDashboard.copiedToClipboard")})),[]);return n.createElement(n.Fragment,null,n.createElement(ce.KeyValuePairsListComponent,{pairs:s,messages:o,tooltipPlacement:"left"}))},kL="decreaseRetentionContainer___9Mubo",LL="borderBottom___jk601",PL="decreaseRetentionRow___uOmRi",FL="decreaseRetentionRowDescription___9rKnD",UL={get softDeleteGracePeriod(){return De.currentUserHelper.getDynamicProperty("soft_delete_grace_period")}},VL=e=>{const{dialogMethods:{closeDialog:t,updateRetentionPeriod:i},isOpen:r,dialogData:{data:s}}=e,{retentionPeriodDelta:o}=s,[l,c]=n.useState(!1),d=n.useCallback((()=>{i({reduceRetentionPeriodImmediately:l}),t()}),[l,i,t]),u=n.useMemo((()=>{if(o&&o>0)return n.createElement("div",{dangerouslySetInnerHTML:{__html:et.sanitize(It.changesRetentionDialog.increaseRetention.body_no_capacity(s.name,s.retentionPeriod.toString()))},"data-sumo-test":`${s.sumoTestScope}-increase-retention`});{const e=new(uk()),t=e.clone().subtract(s.retentionPeriod-(o||0),"days"),i=e.clone().subtract(s.retentionPeriod,"days"),r=Number(UL.softDeleteGracePeriod),d=t.clone().add(r),u=i.clone().add(r),p=t.format("MM/DD/YYYY"),h=i.format("MM/DD/YYYY"),m=d.format("MM/DD/YYYY"),g=u.format("MM/DD/YYYY");return n.createElement("div",{"data-sumo-test":`${s.sumoTestScope}-reduce-retention`},n.createElement("div",{dangerouslySetInnerHTML:{__html:et.sanitize(It.changesRetentionDialog.decreaseRetention.body(s.name,s.sumoTestScope,s.retentionPeriod.toString()))}}),n.createElement("div",{className:kL},n.createElement("div",{className:ue(PL,LL),onClick:()=>c(!1),"data-sumo-test":`${s.sumoTestScope}-reduce-retention-later`},n.createElement(a.Radio,{label:It.changesRetentionDialog.decreaseRetention.applyInGraceTime.title(pk(r)),value:"7days",checked:!l}),n.createElement(a.Text,{noWrap:!1,variant:"textSmall",className:FL},It.changesRetentionDialog.decreaseRetention.applyInGraceTime.description(m,g,pk(r)))),n.createElement("div",{className:PL,onClick:()=>c(!0),"data-sumo-test":`${s.sumoTestScope}-reduce-retention-now`},n.createElement(a.Radio,{label:It.changesRetentionDialog.decreaseRetention.applyNow.title,value:"applyNow",checked:l}),n.createElement(a.Text,{noWrap:!1,variant:"textSmall",className:FL},It.changesRetentionDialog.decreaseRetention.applyNow.description(p,h)))))}}),[o,s.name,s.retentionPeriod,s.sumoTestScope,l]);return n.createElement(a.ConfirmDialog,{title:It.changesRetentionDialog.confirmation,onAction:e=>e?d():t(),remove:!0,onSubmit:d,okButtonText:It.changesRetentionDialog.retentionPeriodDestructiveFeedbackText.default,open:!!r,dialogSize:a.DialogSizes.Regular},u)};const BL=function(e){return e.en}({en:{bucketInvalidatedErrorMsg:'Data Forwarding has been disabled due to too many errors connecting to your configured bucket.\n      Please check your Key/ID and bucket configuration and select the "Active" checkbox to re-enable Data Forwarding',bucketDisabledByUser:"The bucket is disabled by user"}}),$L="warningIcon___oT9UY",HL=e=>{const{destinationName:t,invalidatedBySystem:i,enabled:r,isActive:s}=e;return t&&s?n.createElement(n.Fragment,null,t,!r&&n.createElement(a.Tooltip,{title:i?BL.bucketInvalidatedErrorMsg:BL.bucketDisabledByUser,multiline:!0},n.createElement(a.Icon,{"data-sumo-test":"not-enabled-warning-icon",size:"small",name:"exclamation-triangle",color:i?"dolphin":"coral",className:$L}))):n.createElement(n.Fragment,null,"--")},WL="warningIcon___OSRIO",qL=e=>{const{retentionEffectiveAt:t,newRetentionPeriod:i,retentionPeriod:r,createdAt:s}=e.data;let o,l,c,d=!0;const u=i&&i>-1;if(u){const e=uk(),n=new e,a=new e(t),u=new e(s);let p=a.clone().subtract(r,"days");const h=a.clone().subtract(i,"days");u>h?d=!1:u>p&&u<h&&(p=u),o=p.format("MM/DD/YYYY"),l=h.format("MM/DD/YYYY"),c=a.diff(n)}return n.createElement(n.Fragment,null,r,u&&n.createElement(a.InteractiveTooltip,{placement:"left",multiline:!0,title:n.createElement("div",{"data-sumo-test":"partition-retention-changed-warning"},It.retentionWarning(pk(c),i||0,o,l,d),n.createElement("br",null),n.createElement(a.TextButton,{iconLeft:a.IconName.History,onClick:()=>e.cancelRetentionUpdate(e.data,e.data.id)},It.resetRetention(r)))},n.createElement(a.Icon,{size:"small",name:"exclamation-triangle",color:"uni",className:WL})))},jL="section___FWQVJ",QL="hint___eT7sI",zL="sectionHeader___2D-1d",GL="title___78qA0",KL="displayThresholdsToggle___yUNb9",YL="threshold___ww40A",ZL="thresholdType___PD9sg",XL="valueField___cOdQZ",JL="comparatorField___S5JHq",eP=({visualizationSettings:e,updateVisualizationSettings:t})=>{var i,s;const o=null!=(i=e.thresholdsSettings)?i:qc,l=i=>t(Ct(xt({},e),{thresholdsSettings:xt(xt({},o),i)}));return n.createElement("div",{className:jL},n.createElement("div",{className:zL},n.createElement(a.Text,{variant:"panel",className:GL},r.i18nUtil.get("sharedAnalytics.thresholdsEditor.thresholds")),n.createElement(a.Toggle,{toggled:null==o?void 0:o.showThresholds,onToggle:t=>{var i,r;l({showThresholds:t}),(0,de.pendoTrack)(t?de.PendoEvent.MetricsThresholds_Enabled:de.PendoEvent.MetricsThresholds_Disabled,null!=(i=e.general)&&i.type?{chartType:null==(r=e.general)?void 0:r.type}:void 0)},"data-sumo-test":"show-thresholds",className:KL})),!(null!=o&&o.showThresholds)&&n.createElement("div",{"data-sumo-test":"thresholds-description"},n.createElement(a.Text,{noWrap:!1,variant:"textItalic",className:QL},r.i18nUtil.get("sharedAnalytics.thresholdsEditor.hintFirstLine")),n.createElement(a.Text,{noWrap:!1,variant:"textItalic",className:QL},r.i18nUtil.get("sharedAnalytics.thresholdsEditor.hintSecondLine"))),(null==o?void 0:o.showThresholds)&&n.createElement(n.Fragment,null,["critical","warning"].map((e=>{var t;return n.createElement(tP,{key:e,type:e,thresholds:null!=(t=o.thresholds)?t:qc.thresholds,onUpdate:l})})),n.createElement(a.Toggle,{toggled:null==(s=e.thresholdsSettings)?void 0:s.fillRemainingGreen,onToggle:e=>l({fillRemainingGreen:e}),"data-sumo-test":"fill-remaining-green"},r.i18nUtil.get("sharedAnalytics.thresholdsEditor.fillRemainingGreen"))))},tP=({type:e,thresholds:t,onUpdate:i})=>{const s=t[e],[o,l]=(0,n.useState)(s.value),[c,d]=(0,n.useState)(s.toValue),u=(0,r.useDebounce)(i,op),p=r=>i({thresholds:Ct(xt({},t),{[e]:xt(xt({},s),r)})});return n.createElement(n.Fragment,null,n.createElement(a.Checkbox,{checked:s.display,classes:{label:ZL},"data-sumo-test":`display-${e}-threshold`,label:r.i18nUtil.get(`sharedAnalytics.thresholdsEditor.${e}`),size:"regular",onChange:e=>p({display:e.target.checked})}),n.createElement("div",{className:YL},n.createElement(a.Select,{value:s.comparator,styleProps:{container:JL},inline:!0,"data-sumo-test":`${e}-threshold-comparator`,handleChange:e=>{const t=e.target.value,i=[Zo.INCLUDES,Zo.EXCLUDES].includes(t);p({comparator:t,toValue:i?s.toValue:void 0}),(0,de.pendoTrack)(de.PendoEvent.MetricsThresholds_FunctionChanged,{function:t}),i||d(void 0)}},Object.values(Zo).map((e=>n.createElement(a.Select.Item,{value:e,key:e},r.i18nUtil.get(`sharedAnalytics.thresholdsEditor.comparator.${e}`))))),n.createElement(uI,{validators:xI(),value:null!=o?o:0,className:XL,"data-sumo-test":`${e}-threshold-value`,type:"number",onChange:i=>{const r=""!==i?Number(i):void 0;l(r),u({thresholds:Ct(xt({},t),{[e]:Ct(xt({},s),{value:r})})})}}),[Zo.EXCLUDES,Zo.INCLUDES].includes(s.comparator)&&n.createElement(uI,{validators:TI(o),value:c,className:XL,"data-sumo-test":`${e}-threshold-to-value`,type:"number",inline:!0,label:r.i18nUtil.get("sharedAnalytics.thresholdsEditor.to"),onChange:i=>{const r=""!==i?Number(i):void 0;d(r),u({thresholds:Ct(xt({},t),{[e]:Ct(xt({},s),{toValue:r})})})}})))};var iP=(e=>(e.manually="Manually",e.template="Template",e))(iP||{}),rP=(e=>(e.awsConsole="https://console.aws.amazon.com/cloudformation",e.iAmRoleInfo="/json/v1/account/getIAMRoleSetupInfo",e.iamRoleCloudFormationTemplate="/json/v1/dataforward/cf/getIamRoleCloudFormationTemplate",e))(rP||{});const nP="manualWrapper___B4Crw",aP="templateWrapper___zjzxa",sP="mannualHeading___OtvCY",oP="warningIcon___Xx9fG",lP="actionButtonsWrapper___7NBtt",cP="actionButton___9umsP",dP=()=>(0,r.getWithPromise)(rP.iAmRoleInfo),uP=e=>(0,r.getWithPromise)(rP.iamRoleCloudFormationTemplate+"?bucketName="+e),pP=e=>{const{form:{values:{createIAMRole:t=iP.manually,bucketName:i=""}={}}={},fieldConfig:{accountId:s,externalId:o}}=e,[l,c]=(0,n.useState)(""),d=(0,r.useDebounce)((0,n.useCallback)((()=>{!i||uP(i).then((({template:e})=>{c(e)}))}),[i]),700);return(0,n.useEffect)((()=>{d()}),[i,d]),t===iP.template?n.createElement(n.Fragment,null,n.createElement("div",{className:aP},!!i&&n.createElement(a.Text,{noWrap:!1},n.createElement("pre",null,l)),!i&&n.createElement(a.Text,null,n.createElement(a.Icon,{className:oP,name:"exclamation-triangle",size:"medium",color:"coral"}),It.createIAMRole.bucketNameMissing)),!!i&&n.createElement("div",{className:lP},n.createElement(a.Button,{onClick:e=>{e.preventDefault(),window.open(rP.awsConsole,"_blank","noopener")},className:cP,color:"secondary",size:"small"},It.createIAMRole.openAWSConsoleText),n.createElement(a.Button,{onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(l)},className:cP,color:"secondary",size:"small"},It.createIAMRole.copyText),n.createElement(a.Button,{onClick:e=>{e.preventDefault();const t=i||"cloudformation-template";Re.DownloadTextAsFileService.downloadText(t,l,"text/yaml",".yaml",1111)},className:cP,color:"secondary",size:"small"},It.createIAMRole.downloadText))):n.createElement("div",{className:nP},n.createElement(a.Text,{className:sP,noWrap:!1},It.createIAMRole.manualIAMRoleHeading),n.createElement(a.Text,null,It.createIAMRole.accountId,"",s),n.createElement(a.Text,null,It.createIAMRole.externalId,"",o))};class hP{constructor(e,t){this.module=e,this.component=t}createMark({measurementId:e,action:t,checkpoint:i="start_rendering"}){de.basicPerformanceMeasurement.createMark({id:e,module:this.module,component:this.component,action:t,checkpoint:i})}measure({measurementId:e,metadata:t,name:i,from:r="start_rendering",to:n="finish_rendering"}){de.basicPerformanceMeasurement.measure({id:e,name:i,from:r,to:n,metadata:xt({},t)})}}const mP=e=>()=>{if(Array.isArray(e))return"should not be an array"},gP=e=>()=>{if(null!==e&&Array.isArray(e))return"should not be an array"},yP=e=>t=>t(e).toHaveShape({x:mP(e.x),y:mP(e.y),x2:gP(e.x2),y2:gP(e.y2)}),vP=e=>t=>{var i,r;return null==(r=null==(i=t(e).ifNot(void 0))?void 0:i.ifNot(null))?void 0:r.toHaveShape({code:()=>t(null==e?void 0:e.code).toBeOfType("string"),detail:()=>{var i,r;return null==(r=null==(i=t(null==e?void 0:e.detail).ifNot(void 0))?void 0:i.ifNot(null))?void 0:r.toBeOfType("string")},message:()=>t(null==e?void 0:e.message).toBeOfType("string")})},fP=e=>t=>{var i;return null==(i=t(e).ifNot(void 0))?void 0:i.toHaveShape({dataPoints:()=>t(e.dataPoints).toBeArray(),name:()=>t(e.name).toBeOfType("string"),queryId:()=>t(e.queryId).toBeOfType("string"),seriesType:()=>{var i;return null==(i=t(e.seriesType).ifNot(null))?void 0:i.toBeEnum(Wu)},valueType:()=>{var i;return null==(i=t(e.valueType).ifNot(null))?void 0:i.toBeEnum(qu)}})},_P=e=>t=>t(e).toHaveShape({percentCompleted:()=>{var i;return null==(i=t(e.percentCompleted).ifNot(null))?void 0:i.toBeOfType("number")},state:()=>t(e.state).toBeEnum(Hu)}),SP="/api/v1/aggregateSearches/jobs",bP=e=>(0,r.postWithObservable)(SP,e),EP=(e,t)=>{if(!e.source){const i=t.find((t=>t.queryKey===e.queryId));if(i)switch(i.queryType){case le.QueryTypes.LOGS:e.source="Logs";break;case le.QueryTypes.METRICS:e.source="Metrics"}}},TP=(e,t=[])=>{const i=(0,r.getWithObservable)(`${SP}/${e.join(",")}`).pipe((0,qe.b)((e=>{!De.currentUserHelper.hasFeatureFlag("UIRuntimeAssertions")||(0,r.assertUISharedAnalytics)("fetchAggregateSearchesResultsFromSessions")({response:t=>t(e).toHaveShape(Object.keys(e.data).reduce(((t,i)=>(t[i]=(e=>t=>{var i;return t(e).toHaveShape({axes:yP(e.axes),errors:()=>{var i;return null==(i=t(e.errors).ifNot(null))?void 0:i.toBeArray()},"errors[0]":vP(null==(i=e.errors)?void 0:i[0]),fieldOrdering:()=>{var i;return null==(i=t(e.fieldOrdering).ifNot(void 0))?void 0:i.toBe(null)},requestToken:()=>null===e.requestToken?void 0:t(e.requestToken).toBeOfType("string"),series:()=>t(e.series).toBeArray(),"series[0]":fP(e.series[0]),status:_P(e.status)})})(e.data[i]),t)),{}))})})));return t.length?i.pipe((0,We.U)((e=>{var i;for(const r of Object.keys(e.data))null==(i=e.data[r].series)||i.forEach((e=>EP(e,t)));return e}))):i},xP=e=>(0,r.deleteWithObservable)(`${SP}/${e.join(",")}`),CP=e=>bP([e]).pipe((0,Qe.w)((({data:t})=>{const i=t[e.key];return(0,Be.H)(Zu).pipe((0,Qe.w)((()=>(0,$e.P)((()=>TP([i]))).pipe((0,We.U)((e=>e.data[i])),(0,Xe.a)((e=>e.pipe((0,Je.g)(Xu)))),(0,r.takeWhileInclusive)((({status:{state:e}})=>e===Hu.NOT_STARTED||e===Hu.IN_PROGRESS))))))})));function AP(e){return(0,r.postWithObservable)("/api/v1alpha/dashboard/searches",e)}function wP(e){return(0,r.getWithObservable)(`/api/v1alpha/dashboard/searches/${e}`)}function IP(e){return(0,r.postWithObservable)("/api/v1alpha/dashboard/searches/refresh",e)}function RP(e){return(0,r.getWithObservable)(e)}function DP(e){return(0,r.deleteWithPromise)(`/api/v1alpha/dashboard/searches/${e}`)}function OP(e){return(0,r.getWithPromise)(`/json/v1/savedsearch/${e}/getinstance`)}function NP(e){return(0,r.postWithPromise)("/api/v1alpha/dashboard/panel/drilldown",e)}const MP=e=>(0,r.postWithObservable)("/api/v1alpha/dashboard/panel/drilldown",e),kP=(e,t=!1,i,n)=>{const a={data:e,partialMatch:t,domain:null!=i?i:mt.Domain.unspecified,hierarchy:n};return(0,r.postWithObservable)("/api/v1alpha/topology/labels/search",a)};function LP({allQueries:e,queryToBeValidated:t}){return FP(t.queryString)?function(e,t){return BP(t)&&HP(e,t).every(BP)}(e,t)?$P(e,t)?{error:!1}:{error:!0,message:r.i18nUtil.get("sharedAnalytics.unifiedMonitorCreationErrorMessages.compositeQueriesMissingReference")}:{error:!0,message:r.i18nUtil.get("sharedAnalytics.unifiedMonitorCreationErrorMessages.compositeQueriesNotSupported")}:{error:!1}}function PP(e,t){return e.find((e=>e.queryKey===t))}function FP(e){return/#([A-Z]+)/.test(e)}function UP(e,t){return FP(t.queryString)?VP(t.queryString).map((t=>PP(e,t))).filter(r.isNotUndefined):[]}function VP(e){var t,i;return null!=(i=null==(t=e.match(/#([A-Z]+)/gm))?void 0:t.map((e=>e.slice(1))))?i:[]}function BP(e){return"AdvancedMetricsQuery"===e.type||"BasicMetricsQuery"===e.type}function $P(e,t){const i=UP(e,t),r=VP(t.queryString);return i.length===r.length&&i.every((t=>$P(e,t)))}function HP(e,t){const i=UP(e,t);return[...i.map((t=>HP(e,t))).flat(),...i]}function WP(e){return"LogsQuery"===e?"Logs":"AdvancedMetricsQuery"===e||"BasicMetricsQuery"===e?"Metrics":void 0}const qP={createMonitorFromQueries:function({timeRange:e,queries:t,openMonitorEditorDialog:i,queryKey:r,variables:n={}}){if(!t.length)return;const a=PP(t=t.map((e=>Ct(xt({},e),{queryString:Kp({query:e.queryString,variables:n})}))),r);if(!a)return;const s=LP({allQueries:t,queryToBeValidated:a});s.error?i({error:s.message}):i({queries:(t=[...HP(t,a),a]).map((function(e){return{query:e.queryString,rowId:e.queryKey}})),timeRange:e,monitorType:WP(t[0].type)})},canCreateUnifiedMonitor:function(e,t){var i;const r=null==(i=e.find((e=>e.queryKey===t)))?void 0:i.type;if(!r)return!1;const n=De.currentUserHelper.hasPrivilege("UnifiedMonitorsManageAccess");let a=!1;const s=WP(r);return("Logs"===s&&De.currentUserHelper.hasFeatureFlag("UIMonitorsIntegrateSearch")||"Metrics"===s&&De.currentUserHelper.hasFeatureFlag("UIMonitorsIntegrateMetrics"))&&(a=!0),n&&a}},jP=/(#[A-Z]*)/g,QP=e=>e.map((({queryString:e,queryKey:t})=>({queryString:e,rowId:t,rowVars:e.match(jP)||[]}))),zP={createAlertForQuery:({timeRange:e,queries:t,queryKey:i,applicationViewShimService:r})=>{if(qP.canCreateUnifiedMonitor(t,i))return qP.createMonitorFromQueries({timeRange:e,queries:t,queryKey:i,openMonitorEditorDialog:r.openMonitorEditorDialog});r.dillDownToUnifiedMonitor()}},GP="svv",KP="map",YP="single";const ZP=Yo.TIME_SERIES,XP={[Yo.TIME_SERIES]:ce.ChartType.LINE,[Yo.DISTRIBUTION]:ce.ChartType.AREA},JP={[Yo.TIME_SERIES]:[ce.ChartType.LINE,ce.ChartType.AREA,ce.ChartType.COLUMN,ce.ChartType.BAR,Al.TABLE],[Yo.DISTRIBUTION]:[ce.ChartType.LINE,ce.ChartType.AREA,ce.ChartType.COLUMN,ce.ChartType.BAR,Al.TABLE,ce.ChartType.PIE,ce.ChartType.SCATTER,ce.ChartType.BUBBLE],[Yo.MAP]:[Al.MAP],[Yo.SINGLE_VALUE_METRICS]:[Al.SVP]},eF={percent:le.ChartDisplayTypeOptions.STACKED_PERCENT,normal:le.ChartDisplayTypeOptions.STACKED};const tF=({queryString:e,isTimeSeries:t,viewerType:i,visualSettings:r})=>{var n;const a=null!=(n=function(e,t){return e===GP||e===YP?Yo.SINGLE_VALUE_METRICS:e===KP?Yo.MAP:t?Yo.TIME_SERIES:Yo.DISTRIBUTION}(null!=i?i:"",t))?n:ZP,s=JP[a].find((e=>e===(i===GP||i===YP?Al.SVP:i===KP?Al.MAP:i))),o=t&&e&&Gp(e),l=JSON.parse(null!=r?r:"{}"),c=function(e,t){var i,r,n,a,s,o;const l=null!=(s=null==(a=null==(n=null==(r=null==(i=null==t?void 0:t.settings)?void 0:i[e])?void 0:r.configuration)?void 0:n.plotOptions)?void 0:a.stacking)?s:null;return null!=(o=eF[l])?o:le.ChartDisplayTypeOptions.DEFAULT}(i,l),d={general:xt({mode:a,type:null!=s?s:XP[a],displayType:c},o?Uc:{})},u=(0,g.Z)(d,l);return JSON.stringify(u)},iF=(e,t,i)=>{var r;return i&&t?e!==np.TIME_SERIES&&e!==np.DISTRIBUTION||!(null==(r=t[0])?void 0:r.type)?t:OT(i)?nF(t,i):wT(i)&&1===t.length?rF(t,i):t.map((e=>{var t;const r=e.visible;return e.visible=null==(t=null!=r?r:Ex(i,null==e?void 0:e.id))||t,e})):t},rF=(e,t)=>{const i=e[0];return i&&i.id?[Ct(xt({},i),{dataPoints:i.dataPoints.map((e=>{var i,r,n;const a=null==(i=Ex(t,null==e?void 0:e.originalLabel))||i,s=a&&null!=(r=null==e?void 0:e.y)?r:0;return Ct(xt({},e),{visible:a,y:s,sumoMetadata:Ct(xt({},null!=(n=null==e?void 0:e.sumoMetadata)?n:{}),{visible:a,y:s})})}))})]:e},nF=(e,t)=>e.map((e=>Ct(xt({},e),{dataPoints:e.dataPoints.map((e=>{var i,r,n;const a=e.name,s=null==(i=Ex(t,a))||i,o=s&&null!=(r=null==e?void 0:e.y)?r:0;return Ct(xt({},e),{visible:s,y:o,sumoMetadata:Ct(xt({},null!=(n=null==e?void 0:e.sumoMetadata)?n:{}),{visible:s,y:o})})}))}))),aF=e=>new Promise((t=>{setTimeout((()=>{t(e())}))})),sF=(0,r.memoize)(((...e)=>{let t,i=0;return e=>t!==e?(t=e,++i):i}),{maxNumberOfResults:500}),oF=(0,oe.default)((e=>wt(void 0,[e],(function*({visualizationType:e,initialVisualizationSettings:t,searchData:i,timezone:n,showTimezoneOffset:a,queries:s,zoomHandlers:o,zoomedInAxes:l}){return qi("getVisualizationDataUnmemorized",(()=>wt(void 0,null,(function*(){var c,d,p,h;null!=(c=window.ENVIRONMENT)&&c.IS_TEST&&$.logInfoLocal("Test: getVisualizationData");const{generalSettings:m,refinedVisualizationSettings:g}=yield qi("prepareVisualisationSettings",(()=>wt(void 0,null,(function*(){let e=yield(e=>{if(Boolean(e.overrides)&&(Boolean(e.series)||Boolean(e.queries))){const t=e,{queries:i,series:r}=t,n=At(t,["queries","series"]),a=(0,q.Z)(r,(e=>(0,j.Z)(e,"visible")));return xt(xt({},n),(0,u.Z)(a)?null:{series:a})}return e})(t);const i=wA(e||{});return e=xt(xt({},e),i),{refinedVisualizationSettings:e,generalSettings:i}})))),{mergedVisualizationSettings:y,renderedSeries:v}=yield qi("computeConsistentVisualSettings",(()=>wt(void 0,null,(function*(){const t=yield aF((()=>FT(null!=i?i:{},g,{},n,a,fx(e),s))),{renderedSeries:o}=t,l=At(t,["renderedSeries"]);return{mergedVisualizationSettings:(0,r.mergeObjects)(g,l),renderedSeries:o}})))),f=Ct(xt({},null!=i?i:{}),{series:v}),_=yield aF((()=>Object.entries(IA[e]).reduce(((t,[i,r])=>t.then((t=>qi(`rendererSpecificCreatorsBy_${e}Type_${i}`,(()=>aF((()=>r({visualData:f,overriddenSettings:y,preview:!0,theme:il.LIGHT,timeZone:Ie.timeZoneServiceV2.getUserTimeZone(),showTzOffset:De.currentUserHelper.hasFeatureFlag("UIShowTzOffsetPreference"),zoomHandlers:o,queries:s,zoomedInAxes:l}))).then((e=>xt(xt({},t),e)))))))),Promise.resolve(xt({},m)))));null!=(d=null==_?void 0:_.data)&&d.length&&(_.data=iF(e,_.data,y));const S=sF(null==i?void 0:i.requestToken);return _.dataId=`${null==i?void 0:i.requestToken}-${S(null!=(h=null==(p=null==_?void 0:_.data)?void 0:p.length)?h:-1)}`,_}))))}))),((e,t)=>e.length===t.length&&e.every(((i,r)=>((e,t)=>{if(e&&t&&"object"==typeof e&&"object"==typeof t){const i=Object.keys(e),r=Object.keys(t);return i.length===r.length&&i.every((i=>e[i]===t[i]))}return e===t})(e[r],t[r])))));var lF=(e=>(e.AllLogs="AllLogs",e.ErrorLogs="ErrorLogs",e.ErrorLogsWithLogReduce="ErrorLogsWithLogReduce",e))(lF||{}),cF=(e=>(e.INTERACTIVE="interactive",e.DASHBOARD="dashboard",e))(cF||{}),dF=(e=>(e.PERFORMANCE="performance",e.INTELLIGENT="intelligent",e))(dF||{}),uF=(e=>(e.NONE="None",e.AVG="Average",e.COUNT="Count",e.MAX="Maximum",e.MIN="Minimum",e.SUM="Sum",e))(uF||{});const pF=e=>{var t,i,r,n,a;const s=e;return s.axes.x2=null!=(t=e.axes.x2)?t:{},s.axes.y2=null!=(i=e.axes.y2)?i:{},s.series=e.series.map(hF),s.status={state:e.status.state,percentCompleted:null!=(r=e.status.percentCompleted)?r:0},s.errors=null!=(n=e.errors)?n:[],s.timeRange=null!=(a=e.timeRange)?a:(0,Re.convertTimeDetailsToBeginBoundedTimeRange)(zu),s},hF=e=>{var t,i,r;const n=e;return n.dataPoints=e.dataPoints.map((e=>{var t,i;const r=e;return r.xAxisValues=null!=(t=e.xAxisValues)?t:void 0,r.isFilled=null!=(i=e.isFilled)?i:void 0,r})),n.xAxisKeys=null!=(t=e.xAxisKeys)?t:[],n.metaData={data:null!=(r=null==(i=e.metaData)?void 0:i.data)?r:{}},n.aggregateInfo=mF(e.aggregateInfo),n.seriesType=e.seriesType,n.valueType=e.valueType,n},mF=e=>{var t,i,r,n,a,s;return{max:null!=(t=null==e?void 0:e.max)?t:0,min:null!=(i=null==e?void 0:e.min)?i:0,avg:null!=(r=null==e?void 0:e.avg)?r:0,sum:null!=(n=null==e?void 0:e.sum)?n:0,latest:null!=(a=null==e?void 0:e.latest)?a:0,count:null!=(s=null==e?void 0:e.count)?s:0}},gF=e=>{const t=new Map(Array.from(e.dimensions).map((([e,t])=>[e.toLowerCase(),t]))),i={tags:(0,d.Z)(Array.from(t),(([e])=>e)).map((([e,t])=>({key:e,values:new Set([t])})))};switch(e.domain){case mt.Domain.app:return{initialEoiTypes:new Set([le.RceEoiType.trace]),initialTraceFilters:i};case mt.Domain.aws:return{initialEoiTypes:new Set([le.RceEoiType.aws]),initialAwsFilters:i};case mt.Domain.k8s:return{initialEoiTypes:new Set([le.RceEoiType.k8s]),initialK8sFilters:i}}};function yF(e){return[e.firstGeneralError].concat(e.restGeneralErrors)}function vF(e,t){var i,n;const a=e=>t(`keyederrors.${e}`),s=e.flatMap((({code:e,message:t,meta:i})=>{var n;const s=null!=i?i:{};if([sp.ErrorCodeDashboardGenericError,sp.ErrorCodeSeriesTypeConsistencyError,sp.ErrorCodeFieldDimensionalityError,sp.ErrorCodeLogQueryTimeoutError].includes(e))return[{kind:"QueryErrorNotification",type:"error",message:a(e)}];if([sp.ErrorCodePanelValidationError,sp.ErrorCodeLogQueryValidationError,sp.ErrorCodeMetricsQueryValidationError,sp.ErrorCodeSpanQueryValidationError].includes(e))return Object.entries(s).map((([e,t])=>({kind:"QuerySpecificErrorNotification",rowId:e,type:"error",message:t})));if(e===sp.ErrorCodeLogsSearchError){const e=s.queryKey;return e?[{kind:"QuerySpecificErrorNotification",rowId:e,type:s.errorType,message:t}]:[{kind:"QueryErrorNotification",type:s.errorType,message:t}]}if(e.startsWith(sp.LOGS_PREFIX))return[{kind:"QueryErrorNotification",type:"error",message:s.warnMessage}];if(e.startsWith(sp.METRICS_PREFIX)){const i=a(e),{type:n,rowId:o}=s,l=(e=>"default"===e||"warning"===e||"error"===e||"recommendation"===e)(n)?n:"warning";if(!i)return[Ct(xt({},o?{kind:"QuerySpecificErrorNotification",rowId:o}:{kind:"QueryErrorNotification"}),{type:l,message:t})];let c;try{c=sprintf(i,function(e){return Object.entries(e).reduce(((e,[t,i])=>(e[t]=(0,r.isNumber)(i)?(0,r.formatNumber)(parseFloat(i)):i,e)),{})}(s))}catch(e){c=i}return[o?xt({kind:"QuerySpecificErrorNotification",rowId:o,type:l,message:c},e===sp.NonExistentKey&&{meta:{nonExistentKeys:!0}}):{kind:"QueryErrorNotification",type:l,message:c}]}return[{kind:"QueryErrorNotification",type:null!=(n=null==s?void 0:s.type)?n:"error",message:t}]})).filter((({message:e})=>!!e)),o=[],l=[];let c,d,u,p;for(const e of s)"QueryErrorNotification"===e.kind&&(!c&&"error"===e.type&&(c=e),!d&&"warning"===e.type&&(d=e),o.push(e)),"QuerySpecificErrorNotification"===e.kind&&(!u&&"error"===e.type&&(u=e),!p&&"warning"===e.type&&(p=e),l.push(e));const h=null!=(n=null!=(i=null!=u?u:c)?i:p)?n:d,m=r.Dict.groupBy(l,(e=>e.rowId));return 0===o.length?{type:"SearchQueryErrors",queryErrors:m,panelLevelError:h}:{type:"SearchGeneralErrors",firstGeneralError:o[0],restGeneralErrors:o.slice(1),queryErrors:m,panelLevelError:h}}const fF=(e,t)=>{switch(e){case gl.TIME_SERIES:case gl.DISTRIBUTION:return(()=>{switch(t){case le.VisualSettingsType.SCATTER:case le.VisualSettingsType.AREA:case le.VisualSettingsType.BAR:case le.VisualSettingsType.COLUMN:case le.VisualSettingsType.HEATMAP:case le.VisualSettingsType.LINE:return!0;default:return!1}})();default:return!1}},_F=(e,t)=>{switch(t){case le.VisualSettingsType.TABLE:case le.VisualSettingsType.PIE:case le.VisualSettingsType.PYRAMID:return!0;default:return(()=>{switch(e){case gl.TIME_SERIES:case gl.SINGLE_VALUE_METRICS:case gl.DISTRIBUTION:case gl.IMAGE:return!0;default:return!1}})()}},SF=(e,t)=>{switch(e){case gl.DISTRIBUTION:case gl.HONEYCOMB:case gl.TIME_SERIES:return(()=>{switch(t){case le.VisualSettingsType.AREA:case le.VisualSettingsType.BAR:case le.VisualSettingsType.BUBBLE:case le.VisualSettingsType.COLUMN:case le.VisualSettingsType.HONEYCOMB:case le.VisualSettingsType.LINE:case le.VisualSettingsType.PIE:case le.VisualSettingsType.SCATTER:case le.VisualSettingsType.TABLE:return{enabled:!0,visualSettingsType:t};default:return{enabled:!1}}})();default:return{enabled:!1}}},bF=(e,t)=>{switch(t){case le.VisualSettingsType.TABLE:return!1;case le.VisualSettingsType.PIE:case le.VisualSettingsType.PYRAMID:return!0;default:return(()=>{switch(e){case gl.TIME_SERIES:case gl.DISTRIBUTION:return!0;default:return!1}})()}},EF=({exclude:e}={})=>ep.reduce(((t,i)=>{if(e&&e.includes(i.value))return t;if(i.value===le.QueryTypes.METRICS){const e=De.currentUserHelper.getIntDynamicProperty("ui_metrics_queries_max_limit");t.push(void 0!==e?Ct(xt({},i),{limit:e}):i)}else t.push(i);return t}),[]);function TF(e){return"*"!==e}const xF=e=>{var t;const i=/^_code=(\S+)\s*$/.exec(e);return null!=(t=null==i?void 0:i[1])?t:null};function CF(e,t){if(!t.length)throw new Error("No migrations defined. Add them to the migrations array.");AF(t);const i=(0,J.Z)(e),r=wF(i,t);return-1===r?e:t.slice(r).reduce(((e,t)=>({data:t.migration(e.data),version:t.version})),i)}const AF=e=>{if(e[0].version<=1)throw new Error("First migration needs to have a version greater than 1. Fix versions in migrations array.");for(let t=1;t<e.length;++t){const i=e[t-1].version,r=e[t].version;if(!IF(i,r))throw new Error(`Version ${r} is not the next version for ${i}. Each version should increment the previous one by 1. Fix order in migrations array.`)}},wF=(e,t)=>t.findIndex((t=>IF(e.version,t.version))),IF=(e,t)=>e+1===t,RF=({visualData:e,theme:t,visualSettings:i,visualizationType:r,userTimezoneService:n,queries:a,preview:s,isEditMode:o,currentUserHelper:l})=>{var c;let d={};if(e){const l=De.currentUserHelper.hasFeatureFlag("UINewDashboardBrandTheme"),p=null===t&&l?Ne.ColorsV2["white-10"]:FC(t),h=e,{errors:m}=h,g=At(h,["errors"]);if(!(0,u.Z)(g)){d=Ct(xt(xt({},d),wA(i||{})),{timeRange:e.timeRange}),d.backgroundColor=p;const l={general:{type:d.type}},u=null!=(c=null==i?void 0:i.general)&&c.type?i:xt(xt({},i),l);if(r){const i=IA[r],l=lT(e,u,fx(r),(0,Re.decodeSearchQueries)(null!=a?a:[]));if(i)for(const r of Object.values(i)){const i=r({visualData:Ct(xt({},e),{series:l}),overriddenSettings:u,theme:t,timeZone:n.getUserTimeZone(),showTzOffset:De.currentUserHelper.hasFeatureFlag("UIShowTzOffsetPreference"),queries:a,preview:s,isEditMode:o});d=xt(xt({},d),i)}}}}return d.data&&Array.isArray(d.data)&&(d.data=iF(r,d.data,i)),d},DF="A",OF="B",NF="C",MF="D",kF="E",LF="F",PF="G",FF="H",UF={text:"Last 15 minutes",details:zu},VF={type:"table",mode:"distribution",backgroundColor:"#FFFFFF",columnOptions:[{field:"_sourcecategory",headerName:"_sourcecategory"},{field:"_sourcehost",headerName:"_sourcehost"},{customCellRenderer:{component:Pk,props:{fieldName:"_link"}},field:"_count",headerName:"_count"}],gridOptions:{paginationPageSize:25},data:[{_sourcehost:"stag-alert-1",_sourcecategory:"alert",_count:1}]},BF={type:"table",mode:"distribution",backgroundColor:"#FFFFFF",columnOptions:[{field:"_sourcecategory",headerName:"_sourcecategory"},{field:"_sourcehost",headerName:"_sourcehost"},{field:"_count",headerName:"_count"},{field:"_link",headerName:"_link"}],gridOptions:{paginationPageSize:25},data:[{_sourcehost:"stag-alert-1",_sourcecategory:"alert",_count:1,_link:"[link to](https://help.sumologic.com/05Search/Search-Query-Language/Search-Operators/tourl)"}]},$F=[{name:"map_data",blockId:"A",source:"Metrics",xAxisKeys:[],aggregateInfo:{count:10,avg:5,sum:50,latest:5,max:5,min:5},metaData:{data:{latitude:"3.124",longitude:"84.56"}},queryId:"A",dataPoints:[]},{name:"map_data",blockId:"A",source:"Metrics",xAxisKeys:[],aggregateInfo:{count:10,avg:5,sum:50,latest:5,max:5,min:5},metaData:{data:{latitude:"10.00001",longitude:"22.9893"}},queryId:"A",dataPoints:[]}],HF=[{name:"map_data",blockId:"A",source:"Logs",xAxisKeys:[],aggregateInfo:{count:10,avg:5,sum:50,latest:5,max:5,min:5},metaData:{data:{}},queryId:"A",dataPoints:[{y:88535,sumoMetadata:{xAxisValues:{country:"US",latitude:"37.33053",longitude:"-121.83823"}}},{y:38807,sumoMetadata:{xAxisValues:{latitude:"37.76399",longitude:"-122.39422"}}},{y:587,sumoMetadata:{xAxisValues:{latitude:"45.73723",longitude:"-119.81143"}}},{y:60,sumoMetadata:{xAxisValues:{latitude:"43.7876",longitude:"-79.4727"}}},{y:55,sumoMetadata:{xAxisValues:{latitude:"39.0437",longitude:"-77.4742"}}},{y:2,sumoMetadata:{xAxisValues:{latitude:"12.9584",longitude:"77.6794"}}}]}],WF=[{name:"latitude",blockId:"A",source:"Logs",xAxisKeys:[],aggregateInfo:{count:10,avg:5,sum:50,latest:5,max:5,min:5},metaData:{data:{}},queryId:"A",dataPoints:[{y:-5.12,sumoMetadata:{xAxisValues:{}}},{y:-3,sumoMetadata:{xAxisValues:{}}}]},{name:"longitude",blockId:"A",source:"Logs",xAxisKeys:[],aggregateInfo:{count:10,avg:5,sum:50,latest:5,max:5,min:5},metaData:{data:{}},queryId:"A",dataPoints:[{y:10,sumoMetadata:{xAxisValues:{}}},{y:12,sumoMetadata:{xAxisValues:{}}}]},{name:"values",blockId:"A",source:"Logs",xAxisKeys:[],aggregateInfo:{count:10,avg:5,sum:50,latest:5,max:5,min:5},metaData:{data:{}},queryId:"A",dataPoints:[{y:200,sumoMetadata:{xAxisValues:{}}},{y:100,sumoMetadata:{xAxisValues:{}}}]}],qF=[{queryType:le.QueryTypes.LOGS,drilldownType:lF.AllLogs,queryString:"_sourceCategory = katta",startMillis:(new Date).getTime()-36e3,endMillis:(new Date).getTime()},{queryType:le.QueryTypes.LOGS,drilldownType:lF.ErrorLogs,queryString:"_sourceCategory = katta error*",startMillis:(new Date).getTime()-36e3,endMillis:(new Date).getTime()},{queryType:le.QueryTypes.LOGS,drilldownType:lF.ErrorLogsWithLogReduce,queryString:"_sourceCategory = katta error* | logreduce",startMillis:(new Date).getTime()-36e3,endMillis:(new Date).getTime()}],jF=["x","y","x2","y2"].reduce(((e,t)=>(e[t]=[{index:0}],e)),{}),QF={requestToken:"123",errors:[],timeRange:DA(1566646359958,1566647259958),status:{state:hl.FINISHED_SUCCESSFULLY,percentCompleted:100},axes:jF,series:[{xAxisKeys:["_sourcehost"],queryId:DF,blockId:DF,name:"_count",dataPoints:[{y:4135,xAxisValues:{_sourcehost:"nite-katta-lru-1"}},{y:3600,xAxisValues:{_sourcehost:"nite-katta-lru-2"}},{y:3522,xAxisValues:{_sourcehost:"nite-katta-lru-3"}},{y:36,xAxisValues:{_sourcehost:"nite-katta-cold-4"}},{y:36,xAxisValues:{_sourcehost:"nite-katta-cold-5"}}],aggregateInfo:{max:4135,min:36,avg:2265.8,sum:11329,latest:0,count:10},metaData:{data:{source:"Logs",series:"_count"}},seriesType:Go.NONTIMESERIES,valueType:Me.SeriesValueType.Double,source:"Logs"}]},zF=Ct(xt({},QF),{series:[...QF.series,{xAxisKeys:["_sourcehost"],queryId:DF,blockId:DF,name:"_avg",dataPoints:[{y:4135,xAxisValues:{_sourcehost:"nite-katta-lru-1"}},{y:3600,xAxisValues:{_sourcehost:"nite-katta-lru-2"}},{y:3522,xAxisValues:{_sourcehost:"nite-katta-lru-3"}},{y:36,xAxisValues:{_sourcehost:"nite-katta-cold-4"}},{y:36,xAxisValues:{_sourcehost:"nite-katta-cold-5"}}],aggregateInfo:{max:4135,min:36,avg:2265.8,sum:11329,latest:0,count:10},metaData:{data:{source:"Logs",series:"_count"}},seriesType:Go.NONTIMESERIES,valueType:Me.SeriesValueType.Double,source:"Logs"}]});class GF{constructor(){this.value="",this.addEventListener=(e,t)=>null,this.focus=()=>null,this.remove=()=>null}setValue(e){this.value=e}}class KF{constructor(e){var t;this.editor={getValue:()=>this.$el.value,setValue:e=>{this.$el.value=e}},this.$el=null!=(t=e.el)?t:new GF,this.$el.addEventListener("blur",(()=>{var t;null==(t=e.onBlur)||t.call(e)})),this.$el.addEventListener("keypress",(t=>{var i;t.keyCode===Lt.Enter&&(null==(i=e.onStartSearchQuery)||i.call(e))}))}setValue(e){this.$el.value=e}getValue(){return this.$el.value}focusEditor(){this.$el.focus()}destroy(){this.$el.remove()}}const YF={"background-color":"red !important",transition:"all 0.3s"},ZF="devHighlightFocusedElement";function XF(){return`\n    .${ZF},\n    button.${ZF} {\n      ${function(e){return Object.keys(e).map((t=>`${t}: ${e[t]}`)).join(";")}(YF)}\n    }\n  `}function JF(){!De.currentUserHelper.hasFeatureFlag("UIDevHighlightFocusedElement")||(function(){const e=document.createElement("style");e.setAttribute("data-name","highlightFocusedElement"),e.innerHTML=XF(),document.head.append(e)}(),document.addEventListener("focusin",(()=>{var e;null==(e=document.activeElement)||e.classList.add(ZF)}),{capture:!0}),document.addEventListener("focusout",(e=>{var t;null==(t=e.target)||t.classList.remove(ZF)}),{capture:!0}))}const eU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/page.json",required:["visualizationSettings","queries"],properties:{visualizationSettings:{$ref:"visualizationSettingsDefs.json#/definitions/VisualizationSettings"},queries:{$ref:"queriesDefs.json#/definitions/Queries"},timeRange:{$ref:"timeRangeDefs.json#/definitions/TimeRange"}}},tU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/schema.json",definitions:{panels:{BasePanel:{id:"#/definitions/panels/BasePanel",required:["panelType","keepVisualSettingsConsistentWithParent"],properties:{panelType:{type:"string",default:"",enum:["SumoSearchPanel","ContainerPanel","RepeatingPanel","TextPanel"]},title:{type:["null","string"],default:""},keepVisualSettingsConsistentWithParent:{type:"boolean",description:"Keeps the visual settings (e.g., series colors) consistent with the parent panel's settings.",default:!0}}},SumoSearchPanel:{allOf:[{$ref:"#/definitions/panels/BasePanel"},{id:"#/definitions/panels/SumoSearchPanel",required:["queries"],properties:{panelType:{$id:"#/properties/panelType",type:"string",title:"The Paneltype Schema",default:"",enum:["SumoSearchPanel","ContainerPanel","RepeatingPanel","TextPanel"]},title:{$id:"#/properties/title",type:["null","string"],title:"The Title Schema",default:""},keepVisualSettingsConsistentWithParent:{$id:"#/properties/keepVisualSettingsConsistentWithParent",type:"boolean",title:"The keepVisualSettingsConsistentWithParent Schema",default:!0},queries:{$id:"#/properties/queries",$ref:"queriesDefs.json#/definitions/Queries"},description:{$id:"#/properties/description",type:["null","string"],title:"The Description Schema",default:""},timeRange:{$id:"#/properties/timeRange",$ref:"timeRangeDefs.json#/definitions/TimeRange"},coloringRules:{$id:"#/properties/coloringRules",type:["null","object"],title:"The Coloring Rules Schema",default:null}}}]},TextPanel:{allOf:[{$ref:"#/definitions/panels/BasePanel"},{id:"#/definitions/panels/TextPanel",required:["text"],properties:{text:{type:"string",default:""},visualSettings:{type:["object","string"],properties:{text:{type:"object",properties:{format:{type:"string",enum:["text","markdown","markdownV2"],default:"text"},showTitle:{type:"boolean",default:!0},fontSize:{type:"number",default:24,minimum:1},backgroundColor:{type:"string",default:"#FFFFFF"},textColor:{type:"string",default:"#222D3B"},alignment:{type:"string",enum:["left","center","right"],default:"center"}}},title:{type:"object",properties:{fontSize:{type:"integer",default:16}}}}}}}]},TracesListPanel:{id:"#/definitions/panels/TracesListPanel",required:["queries"],properties:{panelType:{type:"string",default:"",enum:["TracesListPanel"]},title:{type:["null","string"],default:""},queries:{$ref:"queriesDefs.json#/definitions/Queries"},description:{type:["null","string"],default:""},visualSettings:{type:["object","string"],properties:{title:{type:"object",properties:{fontSize:{type:"number"}}},displaySettings:{type:"object",properties:{fontSize:{type:"number"},rowsPerPage:{type:"number"},columnsToDisplay:{type:"object",additionalProperties:{type:"boolean"}}}}}}}}},properties:{}},type:"object",if:{properties:{panelType:{const:"TextPanel"}}},allOf:[{if:{properties:{panelType:{const:"TextPanel"}}},then:{allOf:[{$ref:"#/definitions/panels/TextPanel"}]}},{if:{properties:{panelType:{const:"SumoSearchPanel"}}},then:{allOf:[{$ref:"#/definitions/panels/SumoSearchPanel"}]}},{if:{properties:{panelType:{const:"TracesListPanel"}}},then:{allOf:[{$ref:"#/definitions/panels/TracesListPanel"}]}}]},iU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/honeyCombDefs.json",definitions:{HONEYCOMB_SHAPES:{enum:["circle","hexagon"],type:"string"},ThresholdRange:{type:["null","number"]},ColorThreshold:{title:"ColorThreshold",type:"object",properties:{from:{type:["null","number"],title:"from"},to:{type:["null","number"],title:"to"},name:{type:"string",title:"name"},color:{type:"string",title:"color"}},required:["color","from","to"]},HoneyCombVisualSettings:{title:"HoneyCombVisualSettings",type:"object",properties:{thresholds:{type:"array",items:{$ref:"#/definitions/ColorThreshold"},title:"thresholds"},shape:{enum:["circle","hexagon"],type:"string",title:"shape"}}}}},rU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/queriesDefs.json",definitions:{CommonQuery:{required:["queryType","queryKey","queryString"],properties:{type:{type:"string",enum:["LogsQuery","BasicMetricsQuery","AdvancedMetricsQuery","BasicTracesQuery","AdvancedSpansQuery"]},queryKey:{type:"string",enum:["A","B","C","D","E","F"]},queryString:{type:"string"}}},LogsQuery:{allOf:[{$ref:"#/definitions/CommonQuery"},{required:["queryType"],properties:{queryType:{enum:["Logs"]}}}]},BasicMetricsQuery:{allOf:[{$ref:"#/definitions/CommonQuery"},{required:["queryType","metricsQueryMode","metricsQueryData"],properties:{queryType:{enum:["Metrics"]},metricsQueryMode:{enum:["Basic"]},metricsQueryData:{required:["type","metric","operators","filters"],properties:{type:{enum:["NewMetricsQueryData"]},metric:{type:"string"},operators:{type:"array",items:{anyOf:[{title:"ParameterLessOperatorData",required:["key"],properties:{key:{enum:["rate","delta","accum"]}}},{title:"FilterOperatorData",required:["key","aggregator","operation"],properties:{key:{enum:["filter"]},aggregator:{enum:["min","max","avg","count","sum","latest"]},operation:{enum:["<","<=",">",">=","=","!="]},value:{type:"number"}}},{title:"WhereOperatorData",required:["key","operation"],properties:{key:{enum:["where"]},operation:{enum:["<","<=",">",">=","=","!="]},value:{type:"number"}}},{title:"TimesliceOperatorData",required:["key","operation"],properties:{key:{enum:["timeslice"]},operation:{enum:["avg","count","max","min","sum","rate"]},value:{type:"string"}}},{title:"EwmaOperatorData",required:["key","parameter"],properties:{key:{enum:["ewma"]},parameter:{enum:["span","alpha"]},span:{type:"number"},alpha:{type:"number"}}},{title:"ByOperatorData",required:["key"],properties:{key:{enum:["avg","count","max","min","sum","stddev"]},value:{type:"string"}}},{title:"PercentileOperatorData",required:["key"],properties:{key:{enum:["pct"]},value:{type:"number"},by:{type:"string"}}},{title:"UsingOperatorData",required:["key","using"],properties:{key:{enum:["bottomk","topk","quantize"]},value:{type:["number","string"]},using:{enum:["min","max","avg","count","sum","latest"]}}},{title:"FreeTextOperatorData",required:["key"],properties:{key:{enum:["eval","parse","timeshift"]},value:{type:"string"}}},{title:"FillMissingOperatorData",required:["key","policy"],properties:{key:{enum:["fillmissing"]},policy:{required:["type"],properties:{type:{enum:["empty","last","interpolation","fixed"]},value:{type:"number"}}}}},{title:"HistogramQuantileData",required:["min","max","step"],properties:{key:{enum:["histogram_quantile"]},value:{type:"number"},min:{type:"number"},max:{type:"number"},step:{type:"number"}}},{title:"OutlierOperatorData",required:["key"],properties:{key:{enum:["outlier"]},direction:{enum:["+-","+","-"]}}}]}},filters:{type:"array",items:{required:["type"],properties:{type:{enum:["NewMetricsQueryFilterByValue","NewMetricsQueryFilterByPair"]}},if:{properties:{type:{enum:["NewMetricsQueryFilterByValue"]}}},then:{required:["value","negation"],properties:{value:{type:"string"},negation:{type:"boolean"}}},else:{required:["key","value","negation"],properties:{key:{type:"string"},value:{type:"string"},negation:{type:"boolean"}}}}}}}}}]},AdvancedMetricsQuery:{allOf:[{$ref:"#/definitions/CommonQuery"},{required:["queryType","metricsQueryMode"],properties:{queryType:{enum:["Metrics"]},metricsQueryMode:{enum:["Advanced"]}}}]},BasicTracesQuery:{allOf:[{$ref:"#/definitions/CommonQuery"},{required:["queryType","tracesQueryData"],properties:{queryType:{enum:["Traces"]},tracesQueryData:{required:["filters"],properties:{filters:{type:"array",items:{type:"object",anyOf:[{required:["type","field","operator","value","target","valueType"],properties:{type:{type:"string",enum:["FieldDescriptor"]},field:{type:"string"},operator:{$ref:"#/definitions/ComparisonOperators"},value:{type:"string"},target:{type:"string",enum:["any span","root span"]},valueType:{type:"string",enum:["StringTracingValue","IntegerTracingValue"]}}},{required:["type","metric","operator","value","unit"],properties:{type:{type:"string",enum:["DurationMetricDescriptor"]},metric:{type:"string"},operator:{$ref:"#/definitions/ComparisonOperators"},value:{type:"number"},unit:{type:"string",enum:["m","ms"]}}},{required:["type","metric","operator","value"],properties:{type:{type:"string",enum:["NumericMetricDescriptor"]},metric:{type:"string"},operator:{$ref:"#/definitions/ComparisonOperators"},value:{type:"number"}}}]}}}}}}]},AdvancedSpansQuery:{allOf:[{$ref:"#/definitions/CommonQuery"},{required:["queryType","spansQueryData"],properties:{queryType:{enum:["Spans"]},spansQueryData:{}}}]},Queries:{type:"array",items:{type:"object",title:"Query",anyOf:[{$ref:"#/definitions/LogsQuery"},{$ref:"#/definitions/BasicMetricsQuery"},{$ref:"#/definitions/AdvancedMetricsQuery"},{$ref:"#/definitions/BasicTracesQuery"},{$ref:"#/definitions/AdvancedSpansQuery"}]}},ComparisonOperators:{type:"string",enum:["<","<=",">",">=","=","!="]}}},nU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/seriesOverridesDefs.json",definitions:{axisYType:{enum:["primary","secondary"]},markerType:{enum:["none","circle","square","triangle","cross"]},ChartSeriesVisualizationSettings:{properties:{color:{type:"string"},name:{type:"string"},visible:{type:"boolean",default:!0}}},AreaSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{axisYType:{$ref:"#/definitions/axisYType"},displayType:{enum:["default","smooth","stepped","stackedPercent","stacked"]},fillOpacity:{type:"number"},lineDashType:{enum:["solid","dot","dash","dashDot"]},lineThickness:{type:"number"},markerSize:{type:"number"},markerType:{$ref:"#/definitions/markerType"}}}]},BarSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{axisYType:{$ref:"#/definitions/axisYType"},dataPointMaxWidth:{type:"number"},displayType:{enum:["default","stackedPercent","stacked"]},fillOpacity:{type:"number"}}}]},BubbleSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{fillOpacity:{type:"number"},markerType:{$ref:"#/definitions/markerType"}}}]},ColumnSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{axisYType:{$ref:"#/definitions/axisYType"},dataPointMaxWidth:{type:"number"},displayType:{enum:["default","stackedPercent","stacked"]},fillOpacity:{type:"number"}}}]},HoneyCombSeriesVisualizationSettings:{allOf:[{properties:{name:{type:"string"}}}]},LineSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{axisYType:{$ref:"#/definitions/axisYType"},displayType:{enum:["default","smooth","stepped"]},lineDashType:{enum:["solid","dot","dash","dashDot"]},lineThickness:{type:"number"},markerSize:{type:"number"},markerType:{$ref:"#/definitions/markerType"}}}]},PieSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{fillOpacity:{type:"number"},innerRadius:{type:"number"},maxNumOfSlices:{type:"number"},startAngle:{type:"number"}}}]},ScatterSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{fillOpacity:{type:"number"},markerSize:{type:"number"},markerType:{$ref:"#/definitions/markerType"}}}]},PyramidSeriesVisualizationSettings:{allOf:[{$ref:"#/definitions/ChartSeriesVisualizationSettings"},{properties:{displayType:{enum:["default","funnel"]},fillOpacity:{type:"number"},maxNumOfSlices:{type:"number"},orientation:{enum:["default","reversed"]},valueRepresents:{enum:["height","area"]}}}]},TableSeriesVisualizationSettings:{allOf:[{properties:{name:{type:"string"}}}]},SeriesOverride:{title:"The Overrides Schema",type:"object",required:["queries","series","properties"],properties:{queries:{type:"array",items:{type:"string"}},series:{type:"array",items:{type:"string"}},properties:{type:"object",properties:{type:{enum:["area","bar","bubble","column","honeycomb","line","pie","pyramid","scatter","table"]}},allOf:[{if:{properties:{type:{const:"area"}}},then:{$ref:"#/definitions/AreaSeriesVisualizationSettings"}},{if:{properties:{type:{const:"bar"}}},then:{$ref:"#/definitions/BarSeriesVisualizationSettings"}},{if:{properties:{type:{const:"bubble"}}},then:{$ref:"#/definitions/BubbleSeriesVisualizationSettings"}},{if:{properties:{type:{const:"column"}}},then:{$ref:"#/definitions/ColumnSeriesVisualizationSettings"}},{if:{properties:{type:{const:"honeycomb"}}},then:{$ref:"#/definitions/HoneyCombSeriesVisualizationSettings"}},{if:{properties:{type:{const:"line"}}},then:{$ref:"#/definitions/LineSeriesVisualizationSettings"}},{if:{properties:{type:{const:"pie"}}},then:{$ref:"#/definitions/PieSeriesVisualizationSettings"}},{if:{properties:{type:{const:"pyramid"}}},then:{$ref:"#/definitions/PyramidSeriesVisualizationSettings"}},{if:{properties:{type:{const:"scatter"}}},then:{$ref:"#/definitions/ScatterSeriesVisualizationSettings"}},{if:{properties:{type:{const:"table"}}},then:{$ref:"#/definitions/TableSeriesVisualizationSettings"}}]},unsafeCanvasJSProperties:{type:"object"}}},SeriesOverrides:{type:"array",items:{$ref:"#/definitions/SeriesOverride"}}}},aU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/visualizationSettingsDefs.json",definitions:{VisualizationSettings:{type:"object",title:"The VisualizationSettings Schema",required:["general"],properties:{interactivity:{$id:"#/properties/visualSettings/properties/interactivity",type:"object",title:"The Interactivity Schema",properties:{enabled:{$id:"#/properties/visualSettings/properties/interactivity/properties/enabled",type:"boolean",title:"The Enabled Schema",default:!1},zoom:{$id:"#/properties/visualSettings/properties/interactivity/properties/zoom",type:"object",title:"The Zoom Schema",properties:{zoomEnabled:{$id:"#/properties/visualSettings/properties/interactivity/properties/zoom/properties/zoomEnabled",type:"boolean",title:"The Zoom Enabled Schema",default:!1},zoomType:{$id:"#/properties/visualSettings/properties/interactivity/properties/zoom/properties/zoomType",type:"string",title:"The Zoomtype Schema",default:""}}}}},axes:{$id:"#/properties/visualSettings/properties/axes",type:"object",title:"The Axes Schema",properties:{axisX:{$id:"#/properties/visualSettings/properties/axes/properties/axisX",type:"object",title:"The Axisx Schema",properties:{title:{$id:"#/properties/visualSettings/properties/axes/properties/axisX/properties/title",type:"string",title:"The Title Schema",default:""},labelFontSize:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/labelFontSize",type:"integer",title:"The LabelFontSize Schema",default:""},titleFontSize:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/titleFontSize",type:"integer",title:"The Title FontSize Schema",default:""}}},axisY:{$id:"#/properties/visualSettings/properties/axes/properties/axisY",type:"object",title:"The Axisy Schema",properties:{title:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/title",type:"string",title:"The Title Schema",default:""},logarithmic:{$id:"#/properties/visualSettings/properties/axes/properties/axisX/properties/logarithmic",type:"boolean",title:"The Logarithmic Schema",default:""},minimum:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/minimum",type:"number",title:"The Minimum Schema",default:""},maximum:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/maximum",type:"number",title:"The Maximum Schema",default:""},labelFontSize:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/labelFontSize",type:"integer",title:"The LabelFontSize Schema",default:""},titleFontSize:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/titleFontSize",type:"integer",title:"The Title FontSize Schema",default:""}}},axisY2:{$id:"#/properties/visualSettings/properties/axes/properties/axisY2",type:"object",title:"The Axisy2 Schema",properties:{title:{$id:"#/properties/visualSettings/properties/axes/properties/axisY2/properties/title",type:"string",title:"The Title Schema",default:""},minimum:{$id:"#/properties/visualSettings/properties/axes/properties/axisY2/properties/minimum",type:"number",title:"The Minimum Schema",default:0},maximum:{$id:"#/properties/visualSettings/properties/axes/properties/axisY2/properties/maximum",type:"number",title:"The Maximum Schema",default:0},labelFontSize:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/labelFontSize",type:"integer",title:"The LabelFontSize Schema",default:""},titleFontSize:{$id:"#/properties/visualSettings/properties/axes/properties/axisY/properties/titleFontSize",type:"integer",title:"The Title FontSize Schema",default:""}}}}},series:{$id:"#/properties/visualSettings/properties/series",type:"object",title:"The Series Schema",properties:{showInLegend:{$id:"#/properties/visualSettings/properties/series/properties/showInLegend",type:"boolean",title:"The Showinlegend Schema",default:!1},cursor:{$id:"#/properties/visualSettings/properties/series/properties/cursor",type:"string",title:"The Cursor Schema",default:""},markerSize:{$id:"#/properties/visualSettings/properties/series/properties/markerSize",type:"integer",title:"The Markersize Schema",default:0},xValueType:{$id:"#/properties/visualSettings/properties/series/properties/xValueType",type:"string",title:"The Xvaluetype Schema",default:"",enum:["number","dateTime"]},lineThickness:{$id:"#/properties/visualSettings/properties/series/properties/lineThickness",type:"integer",title:"The Linethickness Schema",default:0},lineDashType:{$id:"#/properties/visualSettings/properties/series/properties/lineDashType",type:"string",title:"The Linedashtype Schema",default:"",enum:["solid","dot","dash","dashDot"]}}},overrides:{$ref:"seriesOverridesDefs.json#/definitions/SeriesOverrides",title:"The Overrides Schema"},thresholdsSettings:{$id:"#/properties/visualSettings/properties/thresholdsSettings",type:"object",title:"The ThresholdsSettings Schema",properties:{fillRemainingGreen:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/fillRemainingGreen",type:"boolean",title:"The FillRemainingGreen Schema",default:!1},showThresholds:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/showThresholds",type:"boolean",title:"The ShowThresholds Schema",default:!1},thresholds:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds",type:"object",title:"The Thresholds Schema",required:["warning","critical"],properties:{warning:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/warning",type:"object",title:"The Warning Threshold Schema",properties:{display:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/warning/properties/display",type:"boolean",title:"The Display Schema",default:!0},comparator:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/warning/properties/comparator",type:"string",title:"The Comparator Schema",default:"greater_or_equal",enum:["greater_or_equal","greater","less_or_equal","less","excludes","includes"]},value:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/warning/properties/value",type:"number",title:"The Value Schema",default:"80"}}},critical:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/critical",type:"object",title:"The Critical Threshold Schema",properties:{display:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/critical/properties/display",type:"boolean",title:"The Display Schema",default:!0},comparator:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/critical/properties/comparator",type:"string",title:"The Comparator Schema",default:"greater_or_equal",enum:["greater_or_equal","greater","less_or_equal","less","excludes","includes"]},value:{$id:"#/properties/visualSettings/properties/thresholdsSettings/properties/thresholds/properties/critical/properties/value",type:"number",title:"The Value Schema",default:"100"}}}}}}},legend:{$id:"#/properties/visualSettings/properties/legend",type:"object",title:"The Legend Schema",properties:{enabled:{$id:"#/properties/visualSettings/properties/legend/properties/enabled",type:"boolean",title:"The Enabled Schema",default:!1},verticalAlign:{$id:"#/properties/visualSettings/properties/legend/properties/verticalAlign",type:"string",title:"The Verticalalign Schema",default:"",enum:["right","bottom"]},maxWidth:{$id:"#/properties/visualSettings/properties/legend/properties/maxWidth",type:"integer",title:"The Maxwidth Schema",default:150},maxHeight:{$id:"#/properties/visualSettings/properties/legend/properties/maxHeight",type:"integer",title:"The Max Height Schema",default:150},fontSize:{$id:"#/properties/visualSettings/properties/legend/properties/fontSize",type:"integer",title:"The Font Size Schema",default:12},showAsTable:{$id:"#/properties/visualSettings/properties/legend/properties/showAsTable",type:"boolean",title:"The ShowAsTable Schema",default:!1},wrap:{$id:"#/properties/visualSettings/properties/legend/properties/wrap",type:"boolean",title:"The Wrap Schema",default:!1}}},general:{$id:"#/properties/visualSettings/properties/general",type:"object",title:"The General Schema",properties:{type:{$id:"#/properties/visualSettings/properties/general/properties/type",type:"string",title:"The Type Schema",default:"",enum:["area","bar","bubble","column","honeyComb","line","map","pie","funnel","pyramid","scatter","spline","splineArea","stackLine","stepLine","svp","svpGauge","svpSparkline","table","heatmap"]},displayType:{$id:"#/properties/visualSettings/properties/general/properties/displayType",type:"string",title:"The Display Type Schema",default:"",enum:["default","funnel","smooth","stacked","stackedPercent","stepped"]},aggregationType:{$id:"#/properties/visualSettings/properties/general/properties/aggregationType",type:["string","null"],title:"The Aggregation Type Schema",default:"",enum:["avg","count","latest","min","max","sum",null]},markerType:{$id:"#/properties/visualSettings/properties/general/properties/markerType",type:"string",title:"The Marker Type Schema",default:"",enum:["none","circle","cross","square","triangle"]},lineThickness:{$id:"#/properties/visualSettings/properties/general/properties/lineThickness",type:"integer",title:"The Line Thickness Schema",default:1},lineDashType:{$id:"#/properties/visualSettings/properties/general/properties/lineDashType",type:"string",title:"The Line Dash Type Schema",default:"",enum:["solid","dash","dashDot","dot"]},nullValue:{$id:"#/properties/visualSettings/properties/series/properties/nullValue",type:"string",title:"The Null Value Schema",default:""},maxNumOfSlices:{$id:"#/properties/visualSettings/properties/general/properties/maxNumOfSlices",type:"integer",title:"The Maxnumofslices Schema",default:0},startAngle:{$id:"#/properties/visualSettings/properties/general/properties/startAngle",type:"number",title:"The Start Angle Schema",default:0},innerRadius:{$id:"#/properties/visualSettings/properties/general/properties/innerRadius",type:["integer","string"],title:"The Inner Radius Schema",default:""},radius:{$id:"#/properties/visualSettings/properties/general/properties/radius",type:"integer",title:"The Radius Schema",default:""},indexLabelFontSize:{$id:"#/properties/visualSettings/properties/general/properties/indexLabelFontSize",type:"integer",title:"The Indexlabelfontsize Schema",default:0},orientation:{$id:"#/properties/visualSettings/properties/general/properties/orientation",type:"string",title:"The Orientation Schema",enum:["default","reversed"],default:""},valueRepresents:{$id:"#/properties/visualSettings/properties/general/properties/valueRepresents",type:"string",title:"The Valuerepresents Schema",default:"",enum:["area","height"]},fontSize:{$id:"#/properties/visualSettings/properties/general/properties/fontSize",type:"integer",title:"The Font Size Schema",default:""},paginationPageSize:{$id:"#/properties/visualSettings/properties/general/properties/paginationPageSize",type:"integer",title:"The Pagination Page Size Schema",default:""},fillOpacity:{$id:"#/properties/visualSettings/properties/general/properties/fillOpacity",type:"number",title:"The Fill Opacity Size Schema",default:1},mode:{$id:"#/properties/visualSettings/properties/general/properties/mode",type:"string",title:"The Mode Schema",enum:["distribution","honeyComb","map","singleValueMetrics","timeSeries"],default:""},groupBy:{$id:"#/properties/visualSettings/properties/general/properties/groupBy",type:"array",items:{type:"object",properties:{label:{type:"string"},value:{type:"string"}},required:["label","value"]},title:"The GroupBy Schema",default:[]}}},color:{$id:"#/properties/visualSettings/properties/color",type:"object",title:"The Color Schema",properties:{family:{$id:"#/properties/visualSettings/properties/color/properties/family",type:"string",title:"The Family Schema",default:"",enum:["scheme1","scheme2","scheme3","scheme4","scheme5","scheme6","scheme7","scheme8","scheme9","Categorical Default","Categorical Light","Categorical Dark","Diverging 1","Diverging 2","Sequential 1","Sequential 2","Colorsafe","custom"]},overrides:{$id:"#/properties/visualSettings/properties/color/properties/overrides",type:"array",title:"The Overrides Schema"}}},honeyComb:{$ref:"honeyCombDefs.json#/definitions/HoneyCombVisualSettings",title:"honeyComb"},title:{$id:"#/properties/title",type:"object",title:"The Title Schema",properties:{fontSize:{$id:"#/properties/title/properties/fontSize",type:"integer",title:"The Fontsize Schema",default:8}}}}}}},sU={$schema:"http://json-schema.org/draft-07/schema#",$id:"schemas/timeRangeDefs.json",definitions:{TimeRange:{$id:"#/properties/timeRange",type:"array",title:"The Timerange Schema",items:{$id:"#/properties/timeRange/items",type:"object",title:"The Items Schema",required:["t","d"],properties:{t:{$id:"#/properties/timeRange/items/properties/t",type:"string",title:"The T Schema",default:"",enum:["relative","absolute"]},d:{$id:"#/properties/timeRange/items/properties/d",type:"integer",title:"The D Schema",default:0}}}}}};var oU=(e=>(e.DEPLOYMENT="k8s.deployment.name",e.CLUSTER="k8s.cluster.name",e.CONTAINER="k8s.container.name",e.NAMESPACE="k8s.namespace.name",e.NODE="k8s.node.name",e.POD="k8s.pod.name",e.SERVICE="k8s.service.name",e))(oU||{}),lU=(e=>(e.Dynamic="Runtime",e.Ingest="Ingest",e))(lU||{}),cU=(e=>(e.All="all",e.Specific="specific",e))(cU||{});const dU={RUN_TIME:["_sourcecategory","_sourcehost","_sourcename","_source","_sourceid","_collector","_collectorid","_view","_index"],INGEST_TIME:["_sourcecategory","_sourcehost","_sourcename","_source","_sourceid","_collector","_collectorid"]},uU={SIDEBAR_HEADER_COMPONENT:"fieldsExtractionRulesSidebarHeaderComponent",SIDEBAR_CUSTOM_COMPONENT:"fieldsExtractionRulesSidebarCustomComponent",CONFIRMATION_DIALOG:"fieldsExtractionRulesConfirmationDialog"},pU="/api/v1/extractionRules",hU="/api/v1/extractionRules?limit=1000",mU="/api/v1/dynamicParsingRules",gU="/api/v2/extractionRules",yU=["name","scope","parseExpression","enabled"],vU=["name","scope","enabled"],fU=["name","appliedAt","parseExpression","enabled","parentDataStreams"],_U="fieldsExtractionRules",SU="id",bU=`views.${_U}`;var EU=(e=>(e.ENABLE="enable",e.DISABLE="disable",e))(EU||{}),TU=(e=>(e.ENABLE="tableRowActionEnable",e.DISABLE="tableRowActionDisable",e))(TU||{});const xU={VIEW:"sidebarModes.view",EDIT:"sidebarModes.edit",ADD:"sidebarModes.add"};var CU=(e=>(e.ENABLE="enable",e.DISABLE="disable",e))(CU||{}),AU=(e=>(e.BULK_REMOVE="bulkRemove",e))(AU||{});const wU={DEFAULT:"default",PROCESSING:"processing"},IU="JSON Auto Parsing - All Sources",RU="_index=sec_",DU={NAME:"Sumo Logic",ID:"FFFFFFFFFFFFFD66"},OU="a-zA-Z0-9 +%-@.,_()",NU=e=>({id:e.id,name:e.name,scope:e.scope,enabled:e.enabled,createdAt:e.createdAt,createdBy:e.createdBy,modifiedAt:e.modifiedAt,modifiedBy:e.modifiedBy,isSystemRule:e.isSystemRule||!1,version:e.version}),MU=e=>e.map((e=>Ct(xt({},NU(e)),{appliedAt:lU.Ingest,fieldNames:e.fieldNames,parseExpression:e.parseExpression,id:e.id+"-"+lU.Ingest}))),kU=e=>e.map((e=>Ct(xt({},NU(e)),{appliedAt:lU.Dynamic,id:e.id+"-"+lU.Dynamic}))),LU=e=>e.fields.map((e=>e.fieldName)),PU=(e=!0)=>wt(void 0,null,(function*(){if(e){const e=(0,gt.legacyHttpGet)(hU),t=(0,gt.legacyHttpGet)("/api/v1/dynamicParsingRules"),[i,r]=yield Promise.all([e,t]);return[...MU(i.data),...kU(r.data)]}{const e=yield(0,gt.legacyHttpGet)(hU);return MU(e.data)}})),FU=(e,t)=>wt(void 0,null,(function*(){if(t===lU.Ingest){const t=yield(0,gt.legacyHttpGet)(`/api/v1/extractionRules/${e}`);return MU([t])[0]}if(t===lU.Dynamic){const t=yield(0,gt.legacyHttpGet)(`/api/v1/dynamicParsingRules/${e}`);return kU([t])[0]}})),UU=(e,t,i)=>wt(void 0,null,(function*(){switch(t){case lU.Ingest:return yield(0,gt.legacyHttpPut)(`/api/v1/extractionRules/${e}`,i);case lU.Dynamic:return yield(0,gt.legacyHttpPut)(`/api/v1/dynamicParsingRules/${e}`,{name:i.name,scope:i.scope,enabled:i.enabled})}})),VU=e=>{const t=$U(e)[0];return Promise.all([(0,gt.legacyHttpPost)("/api/v1alpha/extractionRules/expression/parse",{expression:t}),(0,gt.legacyHttpPost)("/api/v1alpha/extractionRules/expression/parse",{expression:e})]).then((e=>({fieldNames:LU(e[0]),selectedFieldNames:LU(e[1])})))},BU=e=>wt(void 0,[e],(function*({metaKey:e,partialToken:t=""}){const i=`${Date.now()}`;return yield(0,gt.legacyHttpPost)(`/json/v2/reports/${i}/autocomplete/suggest`,{autoCompleteId:i,fieldName:e,partialToken:t})})),$U=e=>e.split(/\|\s*fields\s+[^\s]+$/),HU=Object.freeze(Object.defineProperty({__proto__:null,mapIngestRules:MU,mapDynamicRules:kU,filterOutDynamicRules:e=>e.filter((e=>e.appliedAt!==lU.Dynamic)),$fetchRules:PU,$fetchRule:FU,$editRule:UU,$parseExpression:VU,$fetchBuiltInFields:()=>wt(void 0,null,(function*(){return yield(0,gt.legacyHttpGet)(De.currentUserHelper.hasFeatureFlag("UIFieldsNewEndpoints")?"/api/v1/fields/builtin/usage":"/api/v1/fields/builtin",{params:{limit:1e3}})})),$fetchMetaValues:BU,getParseExpressionParts:$U},Symbol.toStringTag,{value:"Module"})),WU=()=>(0,gt.legacyHttpGet)(De.currentUserHelper.hasFeatureFlag("UIFieldsNewEndpoints")?"/api/v1/fields/usage":"/api/v1/fields"),qU=()=>(0,gt.legacyHttpGet)("/api/v1/fields/quota"),jU=e=>(0,gt.legacyHttpGet)(De.currentUserHelper.hasFeatureFlag("UIFieldsNewEndpoints")?`/api/v1/fields/${e}/usage`:`/api/v1/fields/${e}`),QU=()=>(0,gt.legacyHttpGet)("/json/v1/views/rules/list/get"),zU=e=>(0,gt.legacyHttpGet)(De.currentUserHelper.hasFeatureFlag("UIFieldsNewEndpoints")?`/api/v1/fields/${e}/usage/collectors?limit=100`:`/api/v1/fields/${e}/collectors?limit=100`),GU=e=>(0,gt.legacyHttpGet)(De.currentUserHelper.hasFeatureFlag("UIFieldsNewEndpoints")?`/api/v1/fields/${e}/usage/sources?limit=100`:`/api/v1/fields/${e}/sources?limit=100`),KU=(e,t)=>t?(0,gt.legacyHttpPut)(`/api/v1/fields/${e}/enable`,void 0):(0,gt.legacyHttpDelete)(`/api/v1/fields/${e}/disable`),YU=Object.freeze(Object.defineProperty({__proto__:null,$fetchFields:WU,$fetchQuota:qU,$fetchField:jU,$fetchPartitions:QU,$fetchCollectors:zU,$fetchSources:GU,$enableField:KU},Symbol.toStringTag,{value:"Module"}));var ZU=(e=>(e[e.ExistingCustom=0]="ExistingCustom",e[e.ExistingBuiltIn=1]="ExistingBuiltIn",e[e.Dropped=2]="Dropped",e))(ZU||{});const XU="TierUI",JU=e=>Ep.find((t=>t.value===e)),eV=(e,t)=>{const{label:i=""}=e||{};if(i===bp.label)for(const e of Ep){const i=`${XU}${e.label}${t}`;if(De.currentUserHelper.hasFeatureFlag(i))return!0}const r=`${XU}${i}${t}`;if(De.currentUserHelper.hasFeatureFlag(r))return!0;const n=De.currentUserHelper.getDynamicProperty("tier_ui_feature_"+t);return!!n&&(i===bp.label||n.split(",").includes(i))},tV=e=>Ep.filter((t=>t.label!==bp.label&&eV(t,e))),iV=e=>e.label===bp.label?[]:Object.values(Tp).reduce(((t,i)=>(eV(e,i)&&t.push(i),t)),[]),rV=()=>iV(vp),nV=()=>iV(fp),aV=()=>iV(_p),sV=()=>iV(yp);function oV(e){const t=Ep.map((({value:e})=>e)),i=(0,r.stripComments)(e).match(/_dataTier\"?\s*=\s*(\w+)/gi);return i?i.map((e=>e.split("=")[1].trim().toLowerCase())).find((e=>t.indexOf(e)>-1)):void 0}const lV=(e,t)=>{const i=new Set;return Object.keys(e).length?((0,r.getQueryMetadataKeyValuesList)(t.replace(/[()]/g," ")).forEach((t=>{const n=t.split("=");if(2===n.length){const t=n[0].replace(/\"$/,"").trim(),a=n[1].trim();("_index"===t||"_view"===t)&&Object.keys(e).forEach((t=>{(e[t]||[]).some((e=>(0,r.matchWithWildCard)(a,e)))&&i.add(t)}))}})),Array.from(i)):i},cV=({query:e,partitions:t,feature:i})=>{let r=oV(e);if(eV(JU(r),i))return!0;const n=lV(t,e);for(r in n)if(eV(JU(r),i))return!0;return!1},dV=(e,t)=>{e&&tt.render(n.createElement(fO,xt({preview:!0,forceTreVisible:!0,allowChangeOnBlur:!0,allowDuplicateTimeRangeChange:!0,minDate:new Date(2e3,0,0)},t)),e)},uV=e=>{e&&tt.unmountComponentAtNode(e)};Dt(),function(){try{var e=document.createElement("style");e.appendChild(document.createTextNode('.cardHeader___AhcTU{padding-left:12px}.headerContainer___ISc5e{align-items:center;display:flex;flex:1 1 auto;font-size:16px;margin:1px 0}.cardContent___jPChi{overflow:visible}.noPadding___JZFVE{padding:0 5px 0 0!important}.previewTableContainer___U41nn{display:flex;height:100%}.previewTableContainer___U41nn .ag-root{border:none!important}.tableRow___wEhSe{cursor:default!important}.csvExportButton___jpD4N{margin-left:20px}.valueFromFilters___LiXrA{color:#517691}.timeSeriesCount___-Lx-6{color:#517691;flex:1;font-family:RobotoMedium,Arial Bold,sans-serif}.shortcut___nLwNV{text-align:center}.keyboardInput___BdA7X{display:inline-flex}.keyboardInput___BdA7X kbd{margin:0 4px 0 0;padding:0 4px}.keyboardInput___BdA7X kbd:last-of-type{margin-right:0}.codeSpace___Oy70C{display:inline-block;width:15px}.keyboardInput___BdA7X kbd{background-color:#1a253b;border:1px solid #ebeff2;color:#fafafa}.keyboardInput___elCIn{display:inline-flex}.keyboardInput___elCIn kbd{margin:0 4px 0 0;padding:0 4px}.keyboardInput___elCIn kbd:last-of-type{margin-right:0}.codeSpace___AtlVV{display:inline-block;width:15px}.keyboardInput___elCIn kbd{background-color:#fafafa;border:1px solid #ebeff2;color:#151e30}.tooltip___ogyrh{margin-top:8px;position:absolute;right:0;z-index:5}.card___tR6E4{padding:8px}.headerIconCloseColumn___a2xED{margin-bottom:auto;margin-top:0}.cardContent___xt2lc{overflow:visible}.bindingList___-CCrR{margin:16px 0}.bindingListSubtitle___Qtu7Z{max-width:-moz-fit-content;max-width:fit-content}.keyboardInputColumn___hp7-1{padding-right:24px}.commentColumn___Mz1HD{color:#517691;font-family:Lab Grotesque Regular,sans-serif}.hint___02QOc{color:#517691}.actionBar___zWfpx{display:flex;justify-content:flex-end;margin-top:16px}.cardHeader___IJoRo{padding-left:12px}.headerContainer___Ret-D{align-items:center;display:flex;flex:1 1 auto;font-size:16px;margin:1px 0}.cardContent___8Ktjy{overflow:visible}.noPadding___-Rx6d{padding:0 5px 0 0!important}.previewTableContainer___4XXtM{display:flex;height:100%}.previewTableContainer___4XXtM .ag-root{border:none!important}.tableRow___S0sPS{cursor:default!important}.csvExportButton___fq9lo{margin-left:20px}.cardHeader___AMgLJ{padding-left:12px}.headerContainer___4VIyY{align-items:center;display:flex;flex:1 1 auto;font-size:16px;margin:1px 0}.cardContent___7YOlZ{overflow:visible}.noPadding___V-ZhF{padding:0 5px 0 0!important}.previewTableContainer___tuT34{display:flex;height:100%}.previewTableContainer___tuT34 .ag-root{border:none!important}.tableRow___dE5HH{cursor:default!important}.csvExportButton___Au9c7{margin-left:20px}.valueFromFilters___WBUyG{color:#9db4c7}.timeSeriesCount___0hkvW{color:#9db4c7;flex:1;font-family:RobotoMedium,Arial Bold,sans-serif}.csvExportButton___rDKLG{margin-left:20px}.description___noVtZ,.field___OniDX{margin-bottom:12px}.tableContainer___d0F9k{display:flex;height:100%}.tableCell___XlaKl{font-family:Lab Grotesque Mono Regular,Courier New,monospace!important}.tableCell___XlaKl .text-matches-search{background-color:#fff9c3}.tableCellKebabIcon___T250N{display:none}.tableCellTooltipContainer___ODhTY{border-radius:4px;display:none;font-size:12px;max-width:420px;padding:12px;pointer-events:none;position:fixed;word-break:break-word;z-index:1}[data-theme=brandLight-theme] .tableCellTooltipContainer___ODhTY,[data-theme=light-theme] .tableCellTooltipContainer___ODhTY{background-color:#111b27;color:#fff}[data-theme=brandDark-theme] .tableCellTooltipContainer___ODhTY{background-color:#c6d3db;color:#222d3b}.ag-cell .tableCellKebabIcon___T250N{display:block;position:absolute;right:0;top:50%;transform:translateY(-50%)}.chart-tooltip__date___C8gyu{font-family:Roboto,Arial,sans-serif;font-size:14px}.chart-tooltip__value___wjMEB{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px}[data-theme=brandDark-theme] .chart-tooltip__slim___QHTGm .no-break___IZUmV,[data-theme=brandLight-theme] .chart-tooltip__slim___QHTGm .no-break___IZUmV{font-family:Lab Grotesque Regular,Arial,sans-serif;font-size:14px}.chart-tooltip___RS5Aj{background-color:#111b27e6!important;border-radius:2px;box-sizing:border-box;min-width:400px;padding:10px}.chart-tooltip__ellipsify___OIQtz{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chart-tooltip__header___wZyaM{align-items:center;display:flex;font-family:RobotoLight,Arial,sans-serif!important;padding-bottom:6px}.chart-tooltip__header-slim___FLdCG{font-weight:700;padding-bottom:4px}.chart-tooltip__footer___PEtYN{color:#7c828b;overflow-wrap:break-word;white-space:pre-line}.chart-tooltip__value___wjMEB{color:#f5f8fa}.chart-tooltip_total-value___Dy-1R{padding-top:8px}.chart-tooltip__total___umySf{font-family:RobotoLight,Arial,sans-serif;font-size:12px;padding-bottom:8px}.chart-tooltip__indicator___xDnGM{border-radius:50%;display:inline-block;height:10px;margin:0 6px 0 0;vertical-align:middle;width:10px}.chart-tooltip___RS5Aj .chart-tooltip__indicator___xDnGM.icon--outlier___E9pDe{background-color:#f032af80!important;box-sizing:border-box;height:24px;vertical-align:middle;width:24px}.chart-tooltip___RS5Aj .chart-tooltip__indicator___xDnGM.icon--outlier__center___vrkxF{background-color:#f032af!important;display:block;margin:4px}.chart-tooltip__outlier-values___3hZb0{margin-bottom:8px}.chart-tooltip__range___at8Cu{padding-left:16px}.chart-tooltip__date___C8gyu{border-bottom:1px solid #676e78;color:#8accf2!important;max-width:400px}.chart-tooltip__label_key_value___zvjEb{font-weight:700}.chart-tooltip__label_key_value___zvjEb span{font-weight:400}.chart-tooltip___RS5Aj.show-trend___m1Lse .chart-tooltip__trend___yKdos{color:#fff;height:100px;margin-top:4px;width:250px}.chart-tooltip___RS5Aj.show-trend___m1Lse .no-break___IZUmV{max-width:250px}.chart-tooltip__slim___QHTGm{background:#0000;border-radius:3px;margin:-5px;padding:8px}.chart-tooltip__slim___QHTGm .no-break___IZUmV{word-wrap:break-word;border-bottom:none;white-space:pre-wrap}.chart-tooltip__slim___QHTGm .label___Qp2Yw{color:#f5f8fa!important}.chart-tooltip__count___5g9V1,.chart-tooltip__quantize___SZmm-{margin-left:16px!important}.chart-tooltip__count___5g9V1{padding-bottom:16px}.chart-tooltip__name___D4-f4{overflow-wrap:break-word;white-space:pre-line}.chart-tooltip__dimension-item___JCNOU{align-items:flex-start;display:flex}.chart-tooltip__dimension-name___5S37Q{flex-basis:100px;font-weight:700}.chart-tooltip__dimension-value___C9Os9{overflow-wrap:break-word;white-space:pre-line;width:180px}[data-theme=brandLight-theme] .chart-tooltip___RS5Aj{background-color:#233654f2!important;border-radius:0;text-shadow:none}[data-theme=brandLight-theme] .chart-tooltip__header-slim___FLdCG{padding-bottom:8px}[data-theme=brandLight-theme] .chart-tooltip__indicator___xDnGM{height:16px;margin:0 8px 0 0;width:16px}[data-theme=brandLight-theme] .chart-tooltip__value-slim___9kaqj,[data-theme=brandLight-theme] .chart-tooltip__value___wjMEB{color:#f5f8fa}[data-theme=brandLight-theme] .chart-tooltip__trend___yKdos:not(:empty){height:400px;padding-top:12px}[data-theme=brandLight-theme] .chart-tooltip__slim___QHTGm{padding:12px}[data-theme=brandLight-theme] .chart-tooltip__slim___QHTGm .no-break___IZUmV{color:#a0c1fa!important}[data-theme=brandLight-theme] .chart-tooltip__slim___QHTGm .white___xh-8Q{color:#f5f8fa!important}[data-theme=brandLight-theme] .chart-tooltip__slim___QHTGm .metadata___G-FAO{line-height:17px}[data-theme=brandDark-theme] .chart-tooltip___RS5Aj{background-color:#ebeff2f2!important;border-radius:0;text-shadow:none}[data-theme=brandDark-theme] .chart-tooltip__header-slim___FLdCG{padding-bottom:8px}[data-theme=brandDark-theme] .chart-tooltip__indicator___xDnGM{height:16px;margin:0 8px 0 0;width:16px}[data-theme=brandDark-theme] .chart-tooltip__value-slim___9kaqj,[data-theme=brandDark-theme] .chart-tooltip__value___wjMEB{color:#151e30}[data-theme=brandDark-theme] .chart-tooltip__trend___yKdos:not(:empty){height:400px;padding-top:12px}[data-theme=brandDark-theme] .chart-tooltip__slim___QHTGm{padding:12px}[data-theme=brandDark-theme] .chart-tooltip__slim___QHTGm .no-break___IZUmV{color:#2063d6!important}[data-theme=brandDark-theme] .chart-tooltip__slim___QHTGm .white___xh-8Q{color:#151e30!important}[data-theme=brandDark-theme] .chart-tooltip__slim___QHTGm .metadata___G-FAO{line-height:17px}.container___E1P1c{align-items:center;display:flex;margin:0 8px}.text-field___6KNov{margin-left:8px;max-width:120px}.tableContainer___RGAeG{display:flex;height:100%}.tableCell___RwwpZ{font-family:Lab Grotesque Mono Regular,Courier New,monospace!important}.tableCell___RwwpZ .text-matches-search{background-color:#fff9c3}.tableCellKebabIcon___w7Cek{display:none}.tableCellTooltipContainer___PunWc{border-radius:4px;display:none;font-size:12px;max-width:420px;padding:12px;pointer-events:none;position:fixed;word-break:break-word;z-index:1}[data-theme=brandLight-theme] .tableCellTooltipContainer___PunWc,[data-theme=light-theme] .tableCellTooltipContainer___PunWc{background-color:#111b27;color:#fff}[data-theme=brandDark-theme] .tableCellTooltipContainer___PunWc{background-color:#c6d3db;color:#222d3b}.ag-cell .tableCellKebabIcon___w7Cek{display:block;position:absolute;right:0;top:50%;transform:translateY(-50%)}.tableContainer___9Sjcb{display:flex;height:100%}.tableCell___Mn3J5{font-family:Lab Grotesque Mono Regular,Courier New,monospace!important}.tableCell___Mn3J5 .text-matches-search{background-color:#fff9c3}.tableCellKebabIcon___n7kVN{display:none}.tableCellTooltipContainer___b9jZi{border-radius:4px;display:none;font-size:12px;max-width:420px;padding:12px;pointer-events:none;position:fixed;word-break:break-word;z-index:1}[data-theme=brandLight-theme] .tableCellTooltipContainer___b9jZi,[data-theme=light-theme] .tableCellTooltipContainer___b9jZi{background-color:#111b27;color:#fff}[data-theme=brandDark-theme] .tableCellTooltipContainer___b9jZi{background-color:#c6d3db;color:#222d3b}.ag-cell .tableCellKebabIcon___n7kVN{display:block;position:absolute;right:0;top:50%;transform:translateY(-50%)}.label___xwg9-{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px;margin-bottom:8px}.divider___R-lI0{margin:12px 0}.item___U2eHf{align-items:center;display:flex;height:28px;padding:0 12px}.item___U2eHf span:last-of-type{line-height:18px}.itemCheckbox___NGLoS{width:100%}.itemLabel___KwcxN{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.itemGroupTitleLabel___MFwmO{font-weight:600}.columnFilterGroupTitleRow___dMMYY{align-items:center;background:#fafafa;display:flex;justify-content:space-between}.groupDivider___LMw-X{border-top:1px solid #ebeff2;margin-top:8px}.noOfSelected___04142{color:#517691;font-size:12px}.divider___R-lI0{background:#6d8da6}.label___xwg9-{color:#889eb3}.label___-do6P{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:14px;margin-bottom:8px}.divider___-gPj5{margin:12px 0}.item___WBnKr{align-items:center;display:flex;height:28px;padding:0 12px}.item___WBnKr span:last-of-type{line-height:18px}.itemCheckbox___iv4Vz{width:100%}.itemLabel___vf1Yr{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.itemGroupTitleLabel___ROUbP{font-weight:600}.columnFilterGroupTitleRow___swsl8{align-items:center;background:#fafafa;display:flex;justify-content:space-between}.groupDivider___TpROq{border-top:1px solid #ebeff2;margin-top:8px}.noOfSelected___twFno{color:#517691;font-size:12px}.searchBar___bEXhw{max-width:700px;min-width:180px;width:unset}.textMeasurementDiv___KqBuB{left:10000px;position:absolute;top:10000px;visibility:hidden;width:-moz-fit-content;width:fit-content}.matchingTimeSeries___pCfQ2{font-family:Roboto,Arial,sans-serif;font-size:14px}.container___7a6wD{display:flex;height:100%}.filters___jtVU-{box-sizing:border-box;overflow:auto;padding-top:4px;width:245px}.table___ewDPJ{flex:1}.matchingTimeSeries___pCfQ2{color:#9db4c7;line-height:24px;margin-left:auto;margin-right:12px}.filters___jtVU-{background-color:#151e30}.matchingTimeSeries___RMxRB{font-family:Roboto,Arial,sans-serif;font-size:14px}.container___MOusH{display:flex;height:100%}.filters___WJkZk{box-sizing:border-box;overflow:auto;padding-top:4px;width:245px}.table___Svs3R{flex:1}.matchingTimeSeries___RMxRB{color:#517691;line-height:24px;margin-left:auto;margin-right:12px}.by-operator___J3pSE{align-items:center;display:flex}.input-field___9azoz{margin-left:8px}.fill-missing-operator___Sz50a{align-items:center;display:flex}.input-field___OoIvA{max-width:80px}.input-field___OoIvA,.select-field___RPbtm{margin-left:8px}.filter-operator___Y4XVg{align-items:center;display:flex}.input-field___dORrC{max-width:80px}.input-field___dORrC,.select-field___WJNmW{margin-left:8px}.free-text-operator___Jka-o{align-items:center;display:flex}.text-field___zmOxN{margin-left:8px}.time-shift___Vh8a0{max-width:60px}.parse-eval___rZYaA{max-width:150px}.container___unLmn{align-items:center;display:flex}.value-input-field___JLrVw{margin-left:8px;width:60px}.container___ImAWA{align-items:center;display:flex;margin:0 8px}.text-field___PkDP7{margin-left:8px;max-width:120px}.percentile-operator___To4Ff{align-items:center;display:flex}.value-input-field___asI20{max-width:60px}.by-input-field___IPobN{max-width:100px}.by-input-field___IPobN,.value-input-field___asI20{margin-left:8px}.field___ZF--T{margin:0 8px}.using-operator___WZRJk{align-items:center;display:flex}.input-field___XoTMc{margin:0 8px;max-width:55px}.operatorSelect___M0rAC{max-height:350px}.operatorSelectItem___j-HZr{width:100%}.operatorHint___5YrD2{max-width:300px}.operatorHint___5YrD2>*{color:inherit}.operatorHint___5YrD2>*+*{margin-top:6px}.operatorHint___5YrD2 .documentationLink___8116Z{color:#6a9ef7;display:block;margin-top:8px}.autocompleteResetItem___Tm-3W{display:block;flex-direction:column;font-size:14px;max-width:none;padding:0!important;pointer-events:none}.autocompleteHeading___2j-Wj{font-family:Lab Grotesque Regular,sans-serif;font-size:12px;line-height:20px;padding:0 16px}.autocompleteItem___F4OWp{border-radius:0;font-family:Lab Grotesque Regular,sans-serif;font-size:14px;line-height:28px;max-width:none;padding:0 16px!important;pointer-events:all}.autocompleteItem___F4OWp.autocompleteHint___TIfzg{color:#9db4c7;font-style:italic;pointer-events:none}.autocompleteItem___F4OWp.autocompleteHint___TIfzg:hover{background-color:initial}.autocompleteSecondaryAction___tc8VR{clear:both;color:#517691;float:right;font-style:italic}.autocompleteLabel___sbvKM{display:inline-block}.autocompleteItemLoading___Bxdtt{height:auto!important;max-width:none;padding:0!important;pointer-events:none}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror{height:auto}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror.CodeMirror-empty{font-family:Lab Grotesque Mono Regular,sans-serif}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror-line:hover{background:none!important}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-dimensionKey{background-color:initial;border-width:0;padding-bottom:2px;padding-top:2px}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror span.antlr-comment,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror span.antlr-comment.antlr-comment-start.antlr-comment-end{font-style:italic}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-dimensionKeyList,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-singleDimensionValueExpr{color:#4b5cd9}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-queryClause{background-color:initial;border-width:0;padding-bottom:2px;padding-top:2px}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-queryClause.antlr-metricNameSelector{border-radius:0}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-accum-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-aggregatorFn,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-delta-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-eval-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-ewma-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-fillmissing-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-filter-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-histogramQuantile-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-outlier-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-parse.antlr-parse-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-quantize-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-rate-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-timeShift-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-timeslice-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-topBottom-end,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-topBottom-start,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-where-start{color:#9f3ca3}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-parse.antlr-metricNameSelector{color:#ac4401}.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-positiveInteger,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-positiveNumber,.codeEditorWrapper___2D0W7 .codeEditor___Sv-AW .react-codemirror2 .CodeMirror .antlr-positiveTimeDuration{color:#027c6e}.codeEditorWrapper___2D0W7 .CodeMirror-hints{border:none;border-radius:0;font-family:inherit;max-height:400px;min-width:700px;padding:0}.codeEditorWrapper___2D0W7 .CodeMirror-hints .retentionMessage___brNiq{font-size:12px;font-style:italic;font-weight:400;padding:6px 16px}.codeEditorWrapper___2D0W7 .CodeMirror-hint{border-radius:0}.codeEditorWrapper___2D0W7 .autocompleteItem___F4OWp.autocompleteHint___TIfzg.CodeMirror-hint-active{background-color:initial;color:#9db4c7}.codeEditorWrapper___2D0W7.withComparatorsSuggestions___0Vm0- .CodeMirror-hints{min-width:200px}.operatorTooltip___x7RjD{font-size:12px;max-width:300px;padding:8px}.operatorTooltip___x7RjD .fullName___sG2kL{font-family:Lab Grotesque Medium,Arial Bold,sans-serif}.operatorTooltip___x7RjD .code___Fs6HG{font-family:Lab Grotesque Mono Regular,Courier New,monospace;margin-top:6px}.operatorTooltip___x7RjD .description___SFR1U{font-family:Lab Grotesque Regular,Arial,sans-serif;margin-top:6px}.operatorTooltip___x7RjD .documentationLink___sNDFz{margin-top:8px}.operatorTooltip___x7RjD .documentationLink___sNDFz a{color:#6a9ef7}.operatorTooltip___x7RjD .documentationLink___sNDFz svg{fill:#9db4c7;height:12px;padding-left:6px;vertical-align:text-top;width:12px}[data-theme=brandDark-theme] .operatorTooltip___x7RjD{background-color:#cedeeb;color:#151e30}[data-theme=brandLight-theme] .operatorTooltip___x7RjD{background-color:#233654;color:#f5f8fa}#advanced-mode-suggestions-tooltip{opacity:0;position:absolute;visibility:hidden;will-change:left,top;z-index:1000}.categoryOperator___CAT7q{color:#9f3ca3}[data-theme=brandDark-theme] .categoryActivePart___pMWgl{color:#f5f8fa}[data-theme=brandLight-theme] .categoryActivePart___pMWgl{color:#151e30}.row-field___TOnNv{display:flex;flex:0 1 auto;margin:0 12px 12px 0;max-width:100%}.row-field___TOnNv input{font-size:14px}.row-field-title___bcAv5{color:#889eb3;font-size:14px}.suggestions___7XoFa{min-width:700px}.row-field-title___bcAv5{margin-right:6px}.autoComplete___wPyKn label{color:#889eb3;font-size:14px}.suggestions___F0zYP{min-width:700px}.chip___xe0IK{border:1px solid #0000}.negatedChip___WLOmy{border-color:#ff7350}.chipIconButton___-Zdi2:focus svg{fill:#69859f!important}.negatedChipIconButton___yuBCH svg{fill:#ff7350!important}.autoCompleteSecondaryAction___57g3j{flex-shrink:0}.comparatorsSuggestions___soyit{min-width:200px}.editorContainer___PHDf6{margin-bottom:16px;position:relative}.editorContainerWithRunQueriesButton___pukJR{display:flex}.editorRowsNextToRunQueriesButton___7kI1r{flex:1;max-width:calc(100% - 98px);position:relative}.editorRowsWithSpaceForUnexecutedQueryNotification___n3RCW{margin-bottom:8px}.runQueriesButtonContainer___4TGjW{margin-left:16px;margin-top:1px}.chipStyles___sfmjQ{margin:0}.autoComplete___Hbm5- label{color:#889eb3;font-size:14px}.suggestions___f-gvX{min-width:700px}.autoComplete___Hbm5-{max-width:100%}.autoComplete___Hbm5- .inputField___FA4QG input{min-width:160px}.autoCompleteSecondaryAction___0Dz9o{flex-shrink:0}.row-fields___98mf7{display:flex;flex:1 1 auto;flex-wrap:wrap;padding-top:12px}.operator___nXvW5{align-items:baseline;border-radius:2px;display:flex;padding:0 8px}.operator___nXvW5 .remove-icon___Gbelk{margin-left:8px}.operatorsMenu___EHq-U{max-height:350px}.button-add-operators___yhQmd,.operator___nXvW5{margin:-5px 9px 8px 0;padding-top:5px}.operator___nXvW5{background-color:#151e30}.operator___nXvW5.disabled___ITjZ7{background-color:#344666}.row-fields___0sKDC{display:flex;flex:1 1 auto;flex-wrap:wrap;padding-top:12px}.operator___qu7SK{align-items:baseline;border-radius:2px;display:flex;padding:0 8px}.operator___qu7SK .remove-icon___4X-o4{margin-left:8px}.operatorsMenu___ajrzs{max-height:350px}.button-add-operators___QUEQC,.operator___qu7SK{margin:-5px 9px 8px 0;padding-top:5px}.operator___qu7SK{background-color:#dde4e9}.operator___qu7SK.disabled___M61EG{background-color:#dde4e980}.autocompleteResetItem___FtPUX{display:block;flex-direction:column;font-size:14px;max-width:none;padding:0!important;pointer-events:none}.autocompleteHeading___oS9bc{font-family:Lab Grotesque Regular,sans-serif;font-size:12px;line-height:20px;padding:0 16px}.autocompleteItem___Tzjnh{border-radius:0;font-family:Lab Grotesque Regular,sans-serif;font-size:14px;line-height:28px;max-width:none;padding:0 16px!important;pointer-events:all}.autocompleteItem___Tzjnh.autocompleteHint___GW7Kl{color:#9db4c7;font-style:italic;pointer-events:none}.autocompleteItem___Tzjnh.autocompleteHint___GW7Kl:hover{background-color:initial}.autocompleteSecondaryAction___cflgN{clear:both;color:#517691;float:right;font-style:italic}.autocompleteLabel___zovR6{display:inline-block}.autocompleteItemLoading___UKoyP{height:auto!important;max-width:none;padding:0!important;pointer-events:none}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror{height:auto}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror.CodeMirror-empty{font-family:Lab Grotesque Mono Regular,sans-serif}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror-line:hover{background:none!important}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-dimensionKey{background-color:initial;border-width:0;padding-bottom:2px;padding-top:2px}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror span.antlr-comment,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror span.antlr-comment.antlr-comment-start.antlr-comment-end{font-style:italic}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-dimensionKeyList,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-singleDimensionValueExpr{color:#4b5cd9}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-queryClause{background-color:initial;border-width:0;padding-bottom:2px;padding-top:2px}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-queryClause.antlr-metricNameSelector{border-radius:0}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-accum-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-aggregatorFn,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-delta-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-eval-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-ewma-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-fillmissing-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-filter-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-histogramQuantile-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-outlier-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-parse.antlr-parse-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-quantize-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-rate-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-timeShift-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-timeslice-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-topBottom-end,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-topBottom-start,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-where-start{color:#9f3ca3}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-parse.antlr-metricNameSelector{color:#ac4401}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-positiveInteger,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-positiveNumber,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-positiveTimeDuration{color:#027c6e}.codeEditorWrapper___KzjQv .CodeMirror-hints{border:none;border-radius:0;font-family:inherit;max-height:400px;min-width:700px;padding:0}.codeEditorWrapper___KzjQv .CodeMirror-hints .retentionMessage___LlGbD{font-size:12px;font-style:italic;font-weight:400;padding:6px 16px}.codeEditorWrapper___KzjQv .CodeMirror-hint{border-radius:0}.codeEditorWrapper___KzjQv .autocompleteItem___Tzjnh.autocompleteHint___GW7Kl.CodeMirror-hint-active{background-color:initial;color:#9db4c7}.codeEditorWrapper___KzjQv.withComparatorsSuggestions___X40mH .CodeMirror-hints{min-width:200px}.operatorTooltip___7X1LV{font-size:12px;max-width:300px;padding:8px}.operatorTooltip___7X1LV .fullName___D6DDa{font-family:Lab Grotesque Medium,Arial Bold,sans-serif}.operatorTooltip___7X1LV .code___C1PYi{font-family:Lab Grotesque Mono Regular,Courier New,monospace;margin-top:6px}.operatorTooltip___7X1LV .description___b6hkn{font-family:Lab Grotesque Regular,Arial,sans-serif;margin-top:6px}.operatorTooltip___7X1LV .documentationLink___cXUu-{margin-top:8px}.operatorTooltip___7X1LV .documentationLink___cXUu- a{color:#6a9ef7}.operatorTooltip___7X1LV .documentationLink___cXUu- svg{fill:#9db4c7;height:12px;padding-left:6px;vertical-align:text-top;width:12px}[data-theme=brandDark-theme] .operatorTooltip___7X1LV{background-color:#cedeeb;color:#151e30}[data-theme=brandLight-theme] .operatorTooltip___7X1LV{background-color:#233654;color:#f5f8fa}#advanced-mode-suggestions-tooltip{opacity:0;position:absolute;visibility:hidden;will-change:left,top;z-index:1000}.categoryOperator___ZEZkz{color:#9f3ca3}[data-theme=brandDark-theme] .categoryActivePart___iP0-P{color:#f5f8fa}[data-theme=brandLight-theme] .categoryActivePart___iP0-P{color:#151e30}.autocompleteHeading___oS9bc{background-color:#1a253b;color:#9db4c7}.autocompleteItem___Tzjnh{background-color:#151e30;color:#f5f8fa}.autocompleteItem___Tzjnh:hover{background-color:#233654;color:#f5f8fa}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-dimensionKey,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror .antlr-selector-start.antlr-selector-end{color:#fff}.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror span.antlr-comment,.codeEditorWrapper___KzjQv .codeEditor___sAHye .react-codemirror2 .CodeMirror span.antlr-comment.antlr-comment-start.antlr-comment-end{color:#84a1b8}.codeEditorWrapper___KzjQv .CodeMirror-hints{background-color:#151e30;box-shadow:0 2px 6px #101827}.codeEditorWrapper___KzjQv .CodeMirror-hints .retentionMessage___LlGbD{background-color:#151e30;color:#9db4c7}.codeEditorWrapper___KzjQv .autocompleteItem___Tzjnh.CodeMirror-hint-active{background-color:#233654;color:#f5f8fa}.codeEditorWrapper___KzjQv .CodeMirror-hint-active .autocompleteItem___Tzjnh{background-color:#233654}.autocompleteResetItem___hCpuH{display:block;flex-direction:column;font-size:14px;max-width:none;padding:0!important;pointer-events:none}.autocompleteHeading___k8s-c{font-family:Lab Grotesque Regular,sans-serif;font-size:12px;line-height:20px;padding:0 16px}.autocompleteItem___ISHqU{border-radius:0;font-family:Lab Grotesque Regular,sans-serif;font-size:14px;line-height:28px;max-width:none;padding:0 16px!important;pointer-events:all}.autocompleteItem___ISHqU.autocompleteHint___rT2bz{color:#9db4c7;font-style:italic;pointer-events:none}.autocompleteItem___ISHqU.autocompleteHint___rT2bz:hover{background-color:initial}.autocompleteSecondaryAction___JcNBQ{clear:both;color:#517691;float:right;font-style:italic}.autocompleteLabel___3AoXE{display:inline-block}.autocompleteItemLoading___HG3X5{height:auto!important;max-width:none;padding:0!important;pointer-events:none}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror{height:auto}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror.CodeMirror-empty{font-family:Lab Grotesque Mono Regular,sans-serif}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror-line:hover{background:none!important}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-dimensionKey{background-color:initial;border-width:0;padding-bottom:2px;padding-top:2px}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror span.antlr-comment,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror span.antlr-comment.antlr-comment-start.antlr-comment-end{font-style:italic}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-dimensionKeyList,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-singleDimensionValueExpr{color:#4b5cd9}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-queryClause{background-color:initial;border-width:0;padding-bottom:2px;padding-top:2px}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-queryClause.antlr-metricNameSelector{border-radius:0}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-accum-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-aggregatorFn,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-delta-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-eval-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-ewma-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-fillmissing-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-filter-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-histogramQuantile-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-outlier-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-parse.antlr-parse-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-quantize-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-rate-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-timeShift-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-timeslice-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-topBottom-end,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-topBottom-start,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-where-start{color:#9f3ca3}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-parse.antlr-metricNameSelector{color:#ac4401}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-positiveInteger,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-positiveNumber,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-positiveTimeDuration{color:#027c6e}.codeEditorWrapper___MhLof .CodeMirror-hints{border:none;border-radius:0;font-family:inherit;max-height:400px;min-width:700px;padding:0}.codeEditorWrapper___MhLof .CodeMirror-hints .retentionMessage___u3iC4{font-size:12px;font-style:italic;font-weight:400;padding:6px 16px}.codeEditorWrapper___MhLof .CodeMirror-hint{border-radius:0}.codeEditorWrapper___MhLof .autocompleteItem___ISHqU.autocompleteHint___rT2bz.CodeMirror-hint-active{background-color:initial;color:#9db4c7}.codeEditorWrapper___MhLof.withComparatorsSuggestions___yUwqJ .CodeMirror-hints{min-width:200px}.operatorTooltip___zpoyB{font-size:12px;max-width:300px;padding:8px}.operatorTooltip___zpoyB .fullName___pdJef{font-family:Lab Grotesque Medium,Arial Bold,sans-serif}.operatorTooltip___zpoyB .code___FjZlk{font-family:Lab Grotesque Mono Regular,Courier New,monospace;margin-top:6px}.operatorTooltip___zpoyB .description___QK7i9{font-family:Lab Grotesque Regular,Arial,sans-serif;margin-top:6px}.operatorTooltip___zpoyB .documentationLink___4LLW-{margin-top:8px}.operatorTooltip___zpoyB .documentationLink___4LLW- a{color:#6a9ef7}.operatorTooltip___zpoyB .documentationLink___4LLW- svg{fill:#9db4c7;height:12px;padding-left:6px;vertical-align:text-top;width:12px}[data-theme=brandDark-theme] .operatorTooltip___zpoyB{background-color:#cedeeb;color:#151e30}[data-theme=brandLight-theme] .operatorTooltip___zpoyB{background-color:#233654;color:#f5f8fa}#advanced-mode-suggestions-tooltip{opacity:0;position:absolute;visibility:hidden;will-change:left,top;z-index:1000}.categoryOperator___nghlg{color:#9f3ca3}[data-theme=brandDark-theme] .categoryActivePart___BtVa2{color:#f5f8fa}[data-theme=brandLight-theme] .categoryActivePart___BtVa2{color:#151e30}.autocompleteHeading___k8s-c{background-color:#f5f8fa;color:#517691}.autocompleteItem___ISHqU{background-color:#fff;color:#151e30}.autocompleteItem___ISHqU:hover{background-color:#ebeff2;color:#151e30}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-dimensionKey,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror .antlr-selector-start.antlr-selector-end{color:#222d3b}.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror span.antlr-comment,.codeEditorWrapper___MhLof .codeEditor___6YLUg .react-codemirror2 .CodeMirror span.antlr-comment.antlr-comment-start.antlr-comment-end{color:#6d8da6}.codeEditorWrapper___MhLof .CodeMirror-hints{background-color:#fff;box-shadow:0 2px 6px #c6d3db}.codeEditorWrapper___MhLof .CodeMirror-hints .retentionMessage___u3iC4{background-color:#fff;color:#517691}.codeEditorWrapper___MhLof .autocompleteItem___ISHqU.CodeMirror-hint-active{background-color:#ebeff2;color:#151e30}.codeEditorWrapper___MhLof .CodeMirror-hint-active .autocompleteItem___ISHqU{background-color:#ebeff2}[data-theme=brandDark-theme] .log-query-editor___wRmDk .CodeMirror{background:#151e30}[data-theme=brandDark-theme] .log-query-editor___wRmDk .CodeMirror-line{color:#e6eaed}[data-theme=brandDark-theme] .log-query-editor___wRmDk .search-editor-placeholder-text{color:#6d8da6!important}[data-theme=brandDark-theme] .log-query-editor___wRmDk .cm-word{color:#e6eaed}[data-theme=brandDark-theme] .log-query-editor___wRmDk .cm-s-default .CodeMirror-line span.cm-string{color:#e0a35f!important}[data-theme=brandDark-theme] .log-query-editor___wRmDk .cm-s-default .CodeMirror-line span.cm-keyword{color:#99a0ff}[data-theme=brandDark-theme] .log-query-editor___wRmDk .cm-operator{color:#e6eaed}[data-theme=brandDark-theme] .log-query-editor___wRmDk .cm-number{color:#c4dd95}[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete{background:#151e30;border-color:#233654}[data-theme=brandDark-theme] .log-query-editor___wRmDk .sumocomplete-desc,[data-theme=brandDark-theme] .log-query-editor___wRmDk .sumocomplete-type{color:#9db4c7}[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete.ui-menu .ui-menu-item a{color:#f5f8fa!important}[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete.ui-menu .ui-menu-item .ui-state-active,[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete.ui-menu .ui-menu-item .ui-state-focus,[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete.ui-menu .ui-menu-item .ui-state-hover{background:#233654;border-color:#233654;border-radius:0}[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete-description-title{background-color:#1a253b;color:#f5f8fa}[data-theme=brandDark-theme] .log-query-editor___wRmDk .description .label{background:#1a253b;border:none;color:#9db4c7}[data-theme=brandDark-theme] .log-query-editor___wRmDk .example .label{background:#1a253b;color:#9db4c7}[data-theme=brandDark-theme] .log-query-editor___wRmDk .ui-sumocomplete-description-body{background:#151e30;border:none;color:#f5f8fa}[data-theme=brandDark-theme] .log-query-editor___wRmDk .CodeMirror-selected{background-color:#435575}[data-theme=brandDark-theme] .log-query-editor___wRmDk .CodeMirror-cursor{border-left-color:#fff}[data-theme=brandDark-theme] .log-query-editor___wRmDk .CodeMirror-line span.cm-atom{color:#99a0ff}.inputContainer___cqPcn{flex:1;padding:12px 0}.inputContainer___cqPcn input{font-size:14px}.rowSettings___d-vFH{cursor:pointer}.quantizationInfo___fdX71{color:#517691;cursor:default;font-family:RobotoItalic,Roboto,Arial,sans-serif;font-size:14px}.iconWrapper___UoCgn{margin-left:8px;margin-top:2px}.popoverContent___SLil1{box-sizing:border-box;max-height:300px}.titleWrapper___dPJ-k{align-items:center;display:flex;height:28px;padding:0 16px}.title___f1N5y{font-size:12px;font-weight:500;line-height:14px}.stateOverlayWrapper___1GpGc{margin:24px 0}.clearHistoryButton___KJb5G{cursor:pointer;margin-left:12px}.titleWrapper___dPJ-k{background-color:#1a253b}.title___f1N5y{color:#9db4c7}.iconWrapper___k-AiL{margin-left:8px;margin-top:2px}.popoverContent___hHTUc{box-sizing:border-box;max-height:300px}.titleWrapper___tJxrO{align-items:center;display:flex;height:28px;padding:0 16px}.title___39DXs{font-size:12px;font-weight:500;line-height:14px}.stateOverlayWrapper___0eIzD{margin:24px 0}.clearHistoryButton___yVgJs{cursor:pointer;margin-left:12px}.titleWrapper___tJxrO{background:#f5f8fa}.title___39DXs{color:#517691}.queryHistoryEntry___7dz5A{align-items:center;cursor:pointer;display:flex;padding:8px 16px}.queryHistoryEntry___7dz5A:hover{background-color:#ebeff2}.queryEntryWrapper___eMzfn{font-size:14px}.query___C3PMY{font-family:Roboto Mono,Courier New,monospace;font-size:12px;line-height:24px;white-space:pre}.rowWrapper___flACz{display:flex;flex-wrap:wrap;line-height:24px}.wordsWrapper___uVpap{margin-right:12px}.dimensionValue___dg4n6{color:#4b5cd9}.queryClause___yqLBd{color:#9f3ca3}.queryClause___yqLBd[data-sumo-test^=parse]~.queryClause___yqLBd[data-sumo-test^=parse]{color:unset!important}.positiveInteger___3pUy1{color:#027c6e}.parameter___jIZnx{color:#9db4c7;display:inline-block;font-size:12px;font-style:italic;line-height:24px;margin-right:12px}.metricNameSelector___QpWyM{color:#ac4401}.queryHistoryEntry___7dz5A{background-color:#151e30}.queryHistoryEntry___7dz5A:hover,.selectedEntry___7BY8L{background-color:#233654}.defaultWordStyle___Ov3Vk{color:#e6eaed}.comment___MBvbO{color:#84a1b8;font-style:italic}.reducerFn___Kv3eJ{color:#e6eaed}.dimensionKey___O8SUi{color:#fff}.queryHistoryEntry___ZhjwC{align-items:center;cursor:pointer;display:flex;padding:8px 16px}.queryEntryWrapper___eIqVU{font-size:14px}.query___rnrNp{font-family:Roboto Mono,Courier New,monospace;font-size:12px;line-height:24px;white-space:pre}.rowWrapper___rMbsx{display:flex;flex-wrap:wrap;line-height:24px}.wordsWrapper___Q-86e{margin-right:12px}.dimensionValue___g0Gka{color:#4b5cd9}.queryClause___bQ9t8{color:#9f3ca3}.queryClause___bQ9t8[data-sumo-test^=parse]~.queryClause___bQ9t8[data-sumo-test^=parse]{color:unset!important}.positiveInteger___AXRvZ{color:#027c6e}.parameter___fCHWc{color:#9db4c7;display:inline-block;font-size:12px;font-style:italic;line-height:24px;margin-right:12px}.metricNameSelector___43XOu{color:#ac4401}.queryHistoryEntry___ZhjwC{background-color:#fff}.queryHistoryEntry___ZhjwC:hover,.selectedEntry___hhaoN{background-color:#ebeff2}.defaultWordStyle___CgGNo{color:#344666}.comment___ItjfI{color:#6d8da6;font-style:italic}.reducerFn___JDEEJ{color:#344666}.dimensionKey___lVcBC{color:#222d3b}.disabled-switch-button___vk4fd{opacity:.5}.selectLabel___Btb7d{font-size:14px;margin:0 8px}.toggleIcon___Lb-Wy{min-width:36px}.autoHiddenTooltipContent___PtQhA{margin-bottom:8px}.rowContainer___ewuqU{align-items:center;display:flex}.rowContainer___ewuqU .queryCard___r1wub{flex:1;min-width:0;overflow:visible}.rowContainer___ewuqU:not(:first-of-type) .queryCard___r1wub{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.rowContainer___ewuqU:not(:last-of-type) .queryCard___r1wub{border-bottom-left-radius:0;border-bottom-right-radius:0}.rowBody___SGbtL{align-items:center;display:flex;flex:1 1 auto;min-height:53px;overflow:visible}.rowIdentifier___beQAs{align-items:center;background-color:initial;color:#517691;display:flex;font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;height:53px;justify-items:center;line-height:22px;margin-right:12px;min-width:28px;width:28px}.rowIdentifier___beQAs>div{padding:0}.rowIdentifier___beQAs:focus,.rowIdentifier___beQAs:hover{background-color:initial}.rowIdentifier___beQAs:hover{cursor:text}.rowIdentifierClickable___F0wIq:hover{cursor:pointer}.rowIdentifierHiddenQuery___0a24Q{opacity:.5}.queryTypeSelectContainer___UoVkD{align-items:center;align-self:stretch;display:flex;flex:0 0 auto;justify-content:center;padding:0 12px}.queryTypeSelectContainer___UoVkD .queryTypeSelect___bZJXT{align-items:center;display:flex;height:53px}.queryTypeSelectContainer___UoVkD .queryTypeSelect___bZJXT .queryTypeSelectClickableElement___yv5kS{display:inline-flex;padding-right:16px}.queryTypeSelectContainer___UoVkD.single___R694F{width:51px}.queryTypeSelectContainer___UoVkD.single___R694F>svg{height:20px;width:20px}.rowSidePanelContainer___pk4rF{align-items:center;align-self:stretch;display:flex;flex:0 0 auto;gap:10px;height:53px;justify-content:space-between;margin:0 12px 0 auto}.rowSidePanelContainer___pk4rF .rowActions___y884W{align-items:center;display:flex;justify-content:end;min-width:155px;visibility:hidden}.rowContainer___ewuqU:focus-within .rowSidePanelContainer___pk4rF .rowActions___y884W,.rowContainer___ewuqU:hover .rowSidePanelContainer___pk4rF .rowActions___y884W,.rowSidePanelContainer___pk4rF .rowActions___y884W.menuOpen___nPEf0{visibility:visible}.rowSidePanelContainer___pk4rF .actionWrapper___w4ThU{margin-left:13px}.rowSidePanelContainer___pk4rF .toggleQuery___Yx8an{pointer-events:auto}.scannedBytesDisplay___g-7-U{margin-right:18px}.queryBodyContainer___5B-qh{display:flex;flex:1 1 auto;flex-direction:column;margin:0 16px;overflow:hidden}.queryBodyContainer___5B-qh .queryNotification___t8fYP{font-size:12px;padding-bottom:8px}.queryBodyContainer___5B-qh .queryNotificationError___rqEVc{color:#f54e25}.queryBodyContainer___5B-qh .queryNotificationWarning___O-0cw{color:#ff9343}.newSloCtaDot___QjHP6{height:7px;margin:2px;vertical-align:top;width:7px}.queryTypeSelectContainer___UoVkD{background:#1a253b}.queryTypeSelectContainer___UoVkD .queryTypeSelect___bZJXT .queryTypeSelectClickableElement___yv5kS{color:#f5f8fa}.rowBody___SGbtL{border:1px solid #233654}.autoHiddenTooltipContent___Gz9Ox{margin-bottom:8px}.rowContainer___kDHEy{align-items:center;display:flex}.rowContainer___kDHEy .queryCard___jJeC4{flex:1;min-width:0;overflow:visible}.rowContainer___kDHEy:not(:first-of-type) .queryCard___jJeC4{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.rowContainer___kDHEy:not(:last-of-type) .queryCard___jJeC4{border-bottom-left-radius:0;border-bottom-right-radius:0}.rowBody___NwFW7{align-items:center;display:flex;flex:1 1 auto;min-height:53px;overflow:visible}.rowIdentifier___YAvag{align-items:center;background-color:initial;color:#517691;display:flex;font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;height:53px;justify-items:center;line-height:22px;margin-right:12px;min-width:28px;width:28px}.rowIdentifier___YAvag>div{padding:0}.rowIdentifier___YAvag:focus,.rowIdentifier___YAvag:hover{background-color:initial}.rowIdentifier___YAvag:hover{cursor:text}.rowIdentifierClickable___ykk1u:hover{cursor:pointer}.rowIdentifierHiddenQuery___4ChQq{opacity:.5}.queryTypeSelectContainer___RrtSf{align-items:center;align-self:stretch;display:flex;flex:0 0 auto;justify-content:center;padding:0 12px}.queryTypeSelectContainer___RrtSf .queryTypeSelect___H2ySI{align-items:center;display:flex;height:53px}.queryTypeSelectContainer___RrtSf .queryTypeSelect___H2ySI .queryTypeSelectClickableElement___oU57A{display:inline-flex;padding-right:16px}.queryTypeSelectContainer___RrtSf.single___EtlJz{width:51px}.queryTypeSelectContainer___RrtSf.single___EtlJz>svg{height:20px;width:20px}.rowSidePanelContainer___a32YK{align-items:center;align-self:stretch;display:flex;flex:0 0 auto;gap:10px;height:53px;justify-content:space-between;margin:0 12px 0 auto}.rowSidePanelContainer___a32YK .rowActions___CsA50{align-items:center;display:flex;justify-content:end;min-width:155px;visibility:hidden}.rowContainer___kDHEy:focus-within .rowSidePanelContainer___a32YK .rowActions___CsA50,.rowContainer___kDHEy:hover .rowSidePanelContainer___a32YK .rowActions___CsA50,.rowSidePanelContainer___a32YK .rowActions___CsA50.menuOpen___s-9AU{visibility:visible}.rowSidePanelContainer___a32YK .actionWrapper___yxGWx{margin-left:13px}.rowSidePanelContainer___a32YK .toggleQuery___vDC3j{pointer-events:auto}.scannedBytesDisplay___XNsDj{margin-right:18px}.queryBodyContainer___l0AMI{display:flex;flex:1 1 auto;flex-direction:column;margin:0 16px;overflow:hidden}.queryBodyContainer___l0AMI .queryNotification___-ydTM{font-size:12px;padding-bottom:8px}.queryBodyContainer___l0AMI .queryNotificationError___a2aKE{color:#f54e25}.queryBodyContainer___l0AMI .queryNotificationWarning___z1ax5{color:#ff9343}.newSloCtaDot___Bj7pW{height:7px;margin:2px;vertical-align:top;width:7px}.queryTypeSelectContainer___RrtSf{background:#f5f8fa}.rowBody___NwFW7{border:1px solid #0000}.notification___Wbz4-{position:absolute;right:0}.previewContainer___UNPl-{display:flex;flex:1 1 auto;margin-bottom:16px;min-height:450px;position:relative}.previewContainer___UNPl->div{height:auto}.previewTabsContainer___d-PuM{overflow:visible;width:100%}.previewTabsContent___-EbaT{background-color:#fff;box-shadow:0 2px 3px #333e4b14;flex:1;overflow:hidden}.previewChartPane___oBliE{overflow:auto}.previewTabsSection___9biTn{max-height:none}.container___iq82-{display:flex;flex-direction:column;height:100%;overflow:hidden;overflow-y:auto;padding:0 16px}.container___iq82->*{margin-bottom:16px}.queryBuilderWrapper___Oqz-e>:first-child{margin-bottom:0}.overrideNames___-DNWt{font-family:Roboto,Arial,sans-serif;font-size:14px}.overrideProperty___Pyjwp{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:12px}.override___wDHJu{background:#f8fbfd;margin:0 -16px 6px;padding:8px 12px 8px 18px}.overrideAlias___0yGcw,.overrideNames___-DNWt{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.overrideNames___-DNWt{max-width:200px}.overrideProperty___Pyjwp{align-items:flex-start;color:#889eb3;display:flex;margin-top:4px}.overrideProperty___Pyjwp .colon___MSXVS{padding:0 6px 0 2px}.overrideProperty___Pyjwp .remainingOverrides___mfv8n{margin-left:4px}.overrideProperty___Pyjwp .color___RV3IV{border-radius:4px;display:inline-block;height:14px;width:14px}.first-line-container___DKnFz{align-items:center;display:flex;justify-content:space-between}.first-line-container___DKnFz .edit-delete-buttons-container___QDHJ1{margin-top:5px;visibility:hidden}:hover>.first-line-container___DKnFz .edit-delete-buttons-container___QDHJ1{visibility:visible}.first-line-container___DKnFz .edit-delete-buttons-container___QDHJ1 .deleteButton___6F3Xj{margin-right:10px}.value___TSlW3{word-break:break-word}.override___wDHJu{background:#1a253b}.overrideNames___oZ3NA{font-family:Roboto,Arial,sans-serif;font-size:14px}.overrideProperty___gz7V1{font-family:RobotoMedium,Arial Bold,sans-serif;font-size:12px}.override___6eIr2{background:#f8fbfd;margin:0 -16px 6px;padding:8px 12px 8px 18px}.overrideAlias___lQi8w,.overrideNames___oZ3NA{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.overrideNames___oZ3NA{max-width:200px}.overrideProperty___gz7V1{align-items:flex-start;color:#889eb3;display:flex;margin-top:4px}.overrideProperty___gz7V1 .colon___kdyNN{padding:0 6px 0 2px}.overrideProperty___gz7V1 .remainingOverrides___pqLWM{margin-left:4px}.overrideProperty___gz7V1 .color___IRC2H{border-radius:4px;display:inline-block;height:14px;width:14px}.first-line-container___GHnwG{align-items:center;display:flex;justify-content:space-between}.first-line-container___GHnwG .edit-delete-buttons-container___i9DdV{margin-top:5px;visibility:hidden}:hover>.first-line-container___GHnwG .edit-delete-buttons-container___i9DdV{visibility:visible}.first-line-container___GHnwG .edit-delete-buttons-container___i9DdV .deleteButton___co2CA{margin-right:10px}.value___6j8NG{word-break:break-word}.override___6eIr2{background:#f5f8fa}.styles-rows___TfwzE{margin-top:22px}.styles-rows___TfwzE .styles-row___DXOQc{display:flex;position:relative}.styles-rows___TfwzE .styles-row___DXOQc:not(:first-child){margin-top:12px}.styles-rows___TfwzE .styles-row___DXOQc:last-child{margin-bottom:6px}.styles-rows___TfwzE .styles-row___DXOQc:first-child .trash___Ip6ib,.styles-rows___TfwzE .styles-row___DXOQc:first-child .warning___sJAmq{top:27px}.styles-rows___TfwzE .styles-row___DXOQc .trash___Ip6ib,.styles-rows___TfwzE .styles-row___DXOQc .warning___sJAmq{position:absolute;top:4px}.styles-rows___TfwzE .styles-row___DXOQc .warning___sJAmq{right:20px}.styles-rows___TfwzE .styles-row___DXOQc .trash___Ip6ib{right:0;visibility:hidden}.styles-rows___TfwzE .styles-row___DXOQc:hover .trash___Ip6ib{visibility:visible}.styles-rows___TfwzE .styles-row___DXOQc:first-child .color-picker___s0LHJ{margin-top:23px}.styles-rows___TfwzE .styles-row___DXOQc .color-picker___s0LHJ{margin-top:2px}.styles-rows___TfwzE .styles-row___DXOQc .property-placeholder___nCfAu{color:#889eb3}.styles-rows___TfwzE .select-key___6pqzv{margin-right:12px}.styles-rows___TfwzE .key-rendered-label___m4coJ{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.styles-rows___TfwzE .select-key___6pqzv,.styles-rows___TfwzE .select-value___aWTHQ,.styles-rows___TfwzE .text-field-value___I9rOQ{width:100px}.styles-rows___TfwzE .select-value___aWTHQ,.styles-rows___TfwzE .text-field-value___I9rOQ{margin-right:25px}.styles-rows___TfwzE .editable-value-container___eJsY9{width:100px}.override-form___XtEg9{margin:0 -16px 6px;padding:8px 12px 8px 18px}.first-line-container___vpXTZ{align-items:center;display:flex;justify-content:space-between}.first-line-container___vpXTZ .actions-container___9yMz-{align-self:end;margin-top:5px}.first-line-container___vpXTZ .actions-container___9yMz- .delete-button___X3paY{margin-right:10px}.first-line-container___vpXTZ .auto-complete___u9Kny{width:210px}.first-line-container___vpXTZ .auto-complete-chip___VGpaF{max-width:200px}.alias___6gqBx{width:210px}.override-form___XtEg9{background:#1a253b}.override-form___1KCGM{margin:0 -16px 6px;padding:8px 12px 8px 18px}.first-line-container___J8HdJ{align-items:center;display:flex;justify-content:space-between}.first-line-container___J8HdJ .actions-container___B6Hfd{align-self:end;margin-top:5px}.first-line-container___J8HdJ .actions-container___B6Hfd .delete-button___AIL1M{margin-right:10px}.first-line-container___J8HdJ .auto-complete___e3WjT{width:210px}.first-line-container___J8HdJ .auto-complete-chip___EeTn5{max-width:200px}.alias___jc4nM{width:210px}.override-form___1KCGM{background:#f8fbfd}.overrides___-L-e2{list-style-type:none;margin-top:0;padding-left:0}.seriesOverrides___qPxh-{display:flex;flex-direction:column;max-width:400px}.title___E2J3x{margin-bottom:12px}.add-new-override-button___KBpKx{margin-left:-10px;width:130px}.toast-message___YAcOL{align-items:center;display:flex}.toast-message___YAcOL .icon___hgL8-{margin-right:5px}.tabsSection___pYwMe{padding:0 4px}.tabContent___I8IeX{height:100%;overflow-y:auto;padding:12px 16px}.resizable___7Y58x{box-sizing:border-box;display:flex;z-index:-1}.resizable___7Y58x[data-resizing=true]{border:0}.overlay___9VHgA{border:1px solid #e6eaed;box-shadow:none}.content___gpCfy{box-sizing:border-box;display:flex;flex:1;flex-direction:column;margin-right:-5px;overflow-x:hidden}.headerBar___n95-N{border-bottom:1px solid #e6eaed;padding-right:32px}.headerBarBack___xZnN2{margin-left:16px;padding-left:20px}.resizeHandle___VQ2EQ{cursor:col-resize}.singleTab___PX-yl{height:100%;overflow-y:auto;padding:16px}[data-theme=brandLight-theme] .headerText___oiz-9{color:#517691}[data-theme=brandDark-theme] .headerText___oiz-9{color:#9db4c7}.overlay___9VHgA{background-color:#151e30;border:1px solid #517691}.headerBar___n95-N{border-bottom:1px solid #517691}.tabsSection___cb1Oc{padding:0 4px}.tabContent___OoYSL{height:100%;overflow-y:auto;padding:12px 16px}.resizable___0gxLk{box-sizing:border-box;display:flex;z-index:-1}.resizable___0gxLk[data-resizing=true]{border:0}.overlay___PJioC{box-shadow:none}.content___9frEH{box-sizing:border-box;display:flex;flex:1;flex-direction:column;margin-right:-5px;overflow-x:hidden}.headerBar___bi-a2{padding-right:32px}.headerBarBack___0TEcs{margin-left:16px;padding-left:20px}.resizeHandle___z4yPW{cursor:col-resize}.singleTab___kaBVQ{height:100%;overflow-y:auto;padding:16px}[data-theme=brandLight-theme] .headerText___Cj4u6{color:#517691}[data-theme=brandDark-theme] .headerText___Cj4u6{color:#9db4c7}.overlay___PJioC{border:1px solid #e6eaed}.headerBar___bi-a2{border-bottom:1px solid #e6eaed}.tileActive___MEmYZ>div:first-of-type{background-color:#1d2b45;box-shadow:none}.tileActive___uVZUQ>div:first-of-type{background-color:#f5f8fa;box-shadow:none}.tileActive___ia-ET>div:first-of-type{background-color:#333e4b;box-shadow:none}.tileActive___QqThS>div:first-of-type{background-color:#f4f7f9;box-shadow:none}.wrapper___Ixe2Q,.wrapper___DCVkJ,.wrapper___bS8mM{margin:10px 0}ul.list___3GnFx{margin:0}ul.list___3GnFx li:not(:last-child){margin-bottom:6px}.toggle___QoYXq{display:block;margin:18px 0}.toggle___QoYXq .label___boOk2{font-size:15px}.colorPicker___x8nLt{margin:10px 0}.colorPicker___x8nLt .label___boOk2{color:#abbac9;font-size:12px;margin:10px 0}.colorSchemeFormControl___Ijvwe{margin:8px 0}.chartTypeSelector___WwNqq .selectLabel___ejo9H{font-size:14px;margin-left:8px}.chartTypeSelector___WwNqq .selectRoot___q-vjz{display:flex;padding-top:2px}.colorPicker___x8nLt .label___boOk2{color:#9db4c7}.toggle___7TuI9{display:block;margin:18px 0}.toggle___7TuI9 .label___cjkQo{font-size:15px}.colorPicker___QXeeY{margin:10px 0}.colorPicker___QXeeY .label___cjkQo{color:#abbac9;font-size:12px;margin:10px 0}.colorSchemeFormControl___ZzxYD{margin:8px 0}.chartTypeSelector___oL9-b .selectLabel___en9tG{font-size:14px;margin-left:8px}.chartTypeSelector___oL9-b .selectRoot___eSurX{display:flex;padding-top:2px}.colorPicker___QXeeY .label___cjkQo{color:#517691}.toggle___8pBnb{display:block;margin:18px 0}.toggle___8pBnb .label___rcCyC{font-size:15px}.colorPicker___v1V04{margin:10px 0}.colorPicker___v1V04 .label___rcCyC{color:#abbac9;font-size:12px;margin:10px 0}.colorSchemeFormControl___TI5Gv{margin:8px 0}.chartTypeSelector___7NpHE .selectLabel___i3Foe{font-size:14px;margin-left:8px}.chartTypeSelector___7NpHE .selectRoot___A8PRD{display:flex;padding-top:2px}.errorMessage___nRxZW{margin-top:-8px;white-space:break-spaces}.inlineRow___noHVx{display:flex;gap:8px}.rowAlignContainer___Lf-Fu{align-items:center;display:flex;height:24px}.heatmapSettings___esbp6{display:flex;flex-direction:column;gap:16px}.visualSettingsContainer___rXw1z>*{margin:15px 0}.container___iY7GP{display:flex;flex:1 1 0;flex-direction:column;min-height:250px}.container___iY7GP>section{margin-bottom:8px}.container___iY7GP>section[section-name=SINGLE_VALUE_METRICS]{margin-top:-20px}.visualizationTypeSelectorCard___nWPZ3{margin-bottom:5px;margin-left:-5px;margin-right:-16px;overflow:hidden!important;padding:0}.visualizationTypeSelectorContent___iuBhH{display:flex;flex-wrap:wrap;gap:12px;margin:8px 0}.gridline___WkuTs{align-items:center;display:flex;margin:5px 0}.label___8uKB8{font-size:12px}.colorPicker___76lHu{margin-left:5px}.label___8uKB8{color:#9db4c7}.gridline___15oGT{align-items:center;display:flex;margin:5px 0}.label___FZxxT{font-size:12px}.colorPicker___FmRBE{margin-left:5px}.label___FZxxT{color:#517691}.wrapper___1Fx-s{margin:10px 0}.rangeRow___dNLNR{align-items:flex-start;display:flex;gap:10px}.fromRangeLabel___ZUZZa{font-size:12px;margin-bottom:5px;margin-right:10px}.toRangeLabel___wTLDU{margin-top:5px}.fromRangeLabel___ZUZZa,.toRangeLabel___wTLDU{color:#9db4c7}.wrapper___RC3RB{margin:10px 0}.rangeRow___Qh5XH{align-items:flex-start;display:flex;gap:10px}.fromRangeLabel___AU7R2{font-size:12px;margin-bottom:5px;margin-right:10px}.toRangeLabel___i8xwY{margin-top:5px}.fromRangeLabel___AU7R2,.toRangeLabel___i8xwY{color:#517691}.label___Baf1O{color:#9db4c7;font-size:12px}.label___Cr-7y{color:#517691;font-size:12px}.wrapper___TESJZ,.wrapper___0y3jg,.wrapper___WVW1p{margin:10px 0}.autoCompleteSecondaryAction___4BZdU{flex-shrink:0}.secondary___DKh-a{color:#517691}.wrapper___3bbEI{margin:10px 0}.autoCompleteSecondaryAction___AyCqn{flex-shrink:0}.secondary___CGu7k{color:#517691}.section___-vCsb{flex-direction:column;justify-content:space-around;margin-bottom:30px;max-width:400px;width:100%}.sectionHeader___vceos{display:flex;justify-content:space-between;margin-bottom:15px}.title___xryWd{font-size:16px}.secondTitle___Wt5la{color:ux-color("black-90");font-size:14px}.showAxisToggle___we9S5{margin:0}.wrapper___oUbNV{margin:10px 0}.container___oXHFJ .toggleContainer___uiZ6R{margin:18px 0}.container___oXHFJ section{display:flex;flex-direction:column;margin-bottom:30px}.container___oXHFJ section:not(:first-of-type){margin-top:10px}.container___oXHFJ section>*{margin:10px 0}.verticalAlignRadios___iFzG2{display:flex;flex-direction:column;margin-left:8px}.header___AKzOE{align-items:center;display:flex;padding:0 16px}.info___WhtbQ{margin-left:8px}.dashboard___1C5mW{cursor:default;padding-left:16px!important;padding-right:16px!important}.showAll___e9Y4I{margin:0 16px!important}.noResults___-GxkL{padding:0 16px}.header___38dga{align-items:center;display:flex;padding:0 16px}.info___L0KbI{margin-left:8px}.log___Y0GvO{cursor:default;padding-left:16px!important;padding-right:16px!important}.noResults___vaFEv{padding:0 16px}.tooltip___NHv6b{width:240px}.prettyBox___ZXAeZ{font-family:Roboto,Arial,sans-serif;font-size:14px}.tre___x2xYT{align-items:center;display:inline-flex;min-height:20px;padding-left:5px;position:relative}.tre___x2xYT.hideIcon___WSLlF{padding-left:unset}.tre-input-mode___gA8Kk{max-width:330px}.tre-full-width___ETMoa{width:100%}.tre-popper___j3SB-{z-index:1400}.container___v8pII{display:flex;position:relative;width:100%}.tre-input___fi1Rk{width:100%}.tre-input___fi1Rk input{transition:width .5s ease-in-out}.tre-input-form-control___OPJI3{flex-grow:1}.menu___GWyPk{background-color:#fff;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;display:flex;margin-top:6px;overflow:hidden;width:342px}.prettyBox___ZXAeZ{cursor:pointer;padding-bottom:1px}.listItem___CcLTb{cursor:pointer}.listItemCheckbox___of7Km{padding:0!important}.listItemCheckboxCustom___nO3Y-{max-height:32px}label.listItemCheckboxRoot___b7Vvn{height:100%;margin:0 0 0 3px;padding:0;width:100%}.tre-wrapper___QrVXb{display:flex}.clock___AG2Zf,[data-theme=brandDark-theme] .clock___AG2Zf,[data-theme=brandLight-theme] .clock___AG2Zf{cursor:default;flex-shrink:0;padding-right:5px}.treInput___I4H7l{height:22px}[data-theme=brandLight-theme] .clock___AG2Zf{fill:#9db4c7}[data-theme=brandDark-theme] .clock___AG2Zf{fill:#6d8da6}.tre-title-container___SM4bv{align-items:center;cursor:text;display:inline-flex;font-weight:400}[data-theme=brandLight-theme] .tre-title-input___JKaX2{color:#517691!important}[data-theme=brandDark-theme] .tre-title-input___JKaX2{color:#9db4c7!important}.customPanel___VniP1{display:flex;flex:1 1 auto;flex-direction:column}.controlContainer___19EJr{padding:0 12px 12px 18px}.btnContainer___HeEZC{padding:12px;text-align:right}.controlContainer___19EJr{background-color:#1a253b}.customPanel___SZDUp{display:flex;flex:1 1 auto;flex-direction:column}.controlContainer___G7AZU{padding:0 12px 12px 18px}.btnContainer___vub2V{padding:12px;text-align:right}.controlContainer___G7AZU{background-color:#f5f8fa}.prettyBox___zUxer{font-family:Lab Grotesque Medium,Arial Bold,sans-serif;font-size:14px;line-height:16px;position:relative}.prettyBox___zUxer:after{border-bottom:2px solid #0000;bottom:-2px;content:"";height:0;left:0;position:absolute;width:100%}.prettyBox___zUxer.mutable___m3IC9:hover:after{border-bottom:2px solid #b6c3d0}.prettyBox___zUxer.error___FhHdm:after{border-bottom:2px solid #f54e25}.prettyBox___zUxer.tempColor___dnUVy{color:#2063d6}.overrideContent___xW3d7{margin-bottom:15px}.treDropdown___h4tos{display:flex;margin-left:5px}.prettyBox___-qUlc{font-family:Roboto,Arial,sans-serif;font-size:14px}.tre___EFipl{align-items:center;display:inline-flex;min-height:20px;padding-left:5px;position:relative}.tre___EFipl.hideIcon___pJHUI{padding-left:unset}.tre-input-mode___1OVvl{max-width:330px}.tre-full-width___zi6QK{width:100%}.tre-popper___4D1m6{z-index:1400}.container___1Kjzc{display:flex;position:relative;width:100%}.tre-input___u-sSi{width:100%}.tre-input___u-sSi input{transition:width .5s ease-in-out}.tre-input-form-control___1ICnW{flex-grow:1}.menu___khax7{background-color:#fff;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;display:flex;margin-top:6px;overflow:hidden;width:342px}.prettyBox___-qUlc{cursor:pointer;padding-bottom:1px}.listItem___YgHc6{cursor:pointer}.listItemCheckbox___Ef51k{padding:0!important}.listItemCheckboxCustom___D50LX{max-height:32px}label.listItemCheckboxRoot___V-94Z{height:100%;margin:0 0 0 3px;padding:0;width:100%}.tre-wrapper___GE-Tj{display:flex}.clock___vDobQ,[data-theme=brandDark-theme] .clock___vDobQ,[data-theme=brandLight-theme] .clock___vDobQ{cursor:default;flex-shrink:0;padding-right:5px}.treInput___Dmu3q{height:22px}[data-theme=brandLight-theme] .clock___vDobQ{fill:#9db4c7}[data-theme=brandDark-theme] .clock___vDobQ{fill:#6d8da6}.tre-title-container___KVfi2{align-items:center;cursor:text;display:inline-flex;font-weight:400}[data-theme=brandLight-theme] .tre-title-input___CgrVy{color:#517691!important}[data-theme=brandDark-theme] .tre-title-input___CgrVy{color:#9db4c7!important}.tab-container___6sa4A{background:#1a253b}.listItemCheckbox___Ef51k{background:#151e30}.tre-title-container___KVfi2{color:#9db4c7}.prettyBox___RID7U{font-family:Roboto,Arial,sans-serif;font-size:14px}.tre___7oToG{align-items:center;display:inline-flex;min-height:20px;padding-left:5px;position:relative}.tre___7oToG.hideIcon___zDcMI{padding-left:unset}.tre-input-mode___D7o3-{max-width:330px}.tre-full-width___oP3jj{width:100%}.tre-popper___j121t{z-index:1400}.container___BaNN0{display:flex;position:relative;width:100%}.tre-input___gCMvT{width:100%}.tre-input___gCMvT input{transition:width .5s ease-in-out}.tre-input-form-control___v2wMD{flex-grow:1}.menu___rW0fS{background-color:#fff;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;display:flex;margin-top:6px;overflow:hidden;width:342px}.prettyBox___RID7U{cursor:pointer;padding-bottom:1px}.listItem___y6AE7{cursor:pointer}.listItemCheckbox___x88sl{padding:0!important}.listItemCheckboxCustom___qZXJP{max-height:32px}label.listItemCheckboxRoot___pE5nh{height:100%;margin:0 0 0 3px;padding:0;width:100%}.tre-wrapper___BWCIo{display:flex}.clock___A1C-V,[data-theme=brandDark-theme] .clock___A1C-V,[data-theme=brandLight-theme] .clock___A1C-V{cursor:default;flex-shrink:0;padding-right:5px}.treInput___xRJHJ{height:22px}[data-theme=brandLight-theme] .clock___A1C-V{fill:#9db4c7}[data-theme=brandDark-theme] .clock___A1C-V{fill:#6d8da6}.tre-title-container___BJgNd{align-items:center;cursor:text;display:inline-flex;font-weight:400}[data-theme=brandLight-theme] .tre-title-input___exK-0{color:#517691!important}[data-theme=brandDark-theme] .tre-title-input___exK-0{color:#9db4c7!important}.tab-container___gTGTf{background:#f5f8fa}.listItemCheckbox___x88sl{background:#fff}.tre-title-container___BJgNd{color:#517691}.tre___9M6Tf{cursor:text;overflow:hidden;visibility:hidden;width:0}.treVisible___e6QYt{visibility:visible;width:auto}.auto-refresh-container___N-4p7{display:flex;flex-direction:column}.refresh-interval-container___Eba88{background-color:#f1f4f5;flex:1 1 0;padding:12px}.refresh-interval-apply___CmFA1{float:right;margin:12px 0}.auto-refresh-select___ooUo8{z-index:1500!important}.refresh-hint-text___HuKen{color:ux-color("tangerine")}.clock___-OKkT{padding-left:5px;padding-right:5px;position:relative;top:2px}.treTitleContainer___mMNVs{align-items:center;display:inline-flex}.legend-container___sSfDb{height:100%;overflow:auto}.disabledTextSelection___4KQsh{-webkit-user-select:none;user-select:none}.legend-item-table___YJryd{display:block;overflow:hidden;width:100%}.legend-item___ufxXu{color:#889eb3;cursor:pointer;display:inline-block;margin:2px 5px;white-space:nowrap}.legend-item-inactive___zXn1I{color:#889eb380}.legend-wrap___qhRML{white-space:normal;word-break:break-all}span.legend-indicator___QGALv{border-radius:50%;display:inline-block;height:10px;margin-right:5px;width:10px}.legend-item-short___rFUzc{max-width:100%;overflow:hidden;text-overflow:ellipsis}.legend-wrapped___MleXd{color:#222d3b;cursor:pointer;display:inline-block;margin:5px;max-width:100px;word-break:break-all}.legend-item___ufxXu{color:#d5dade}.legend-item-inactive___zXn1I{color:#ebeff280}.legend-item-table___P-XWI{display:block;overflow:hidden;width:100%}.legend-item___cHbEC{color:#889eb3;cursor:pointer;display:inline-block;margin:2px 5px;white-space:nowrap}.legend-item-inactive___8G1MT{color:#889eb380}.legend-wrap___FX2bJ{white-space:normal;word-break:break-all}span.legend-indicator___-4tqs{border-radius:50%;display:inline-block;height:10px;margin-right:5px;width:10px}.legend-item-short___lndlN{max-width:100%;overflow:hidden;text-overflow:ellipsis}.legend-wrapped___3gGNe{color:#222d3b;cursor:pointer;display:inline-block;margin:5px;max-width:100px;word-break:break-all}.legend-item___cHbEC{color:#435575}.legend-item-inactive___8G1MT{color:#43557580}.legend-item-table___UM0NS{display:block;overflow:hidden;width:100%}.legend-item___C-jG1{color:#889eb3;cursor:pointer;display:inline-block;margin:2px 5px;white-space:nowrap}.legend-item-inactive___BpfLx{color:#889eb380}.legend-wrap___Vxkre{white-space:normal;word-break:break-all}span.legend-indicator___Kd-PK{border-radius:50%;display:inline-block;height:10px;margin-right:5px;width:10px}.legend-item-short___jZCjA{max-width:100%;overflow:hidden;text-overflow:ellipsis}.legend-wrapped___rjmHv{color:#222d3b;cursor:pointer;display:inline-block;margin:5px;max-width:100px;word-break:break-all}.legend-item___C-jG1{color:#abbac9}.legend-item-inactive___BpfLx{color:#abbac980}.chartFormat___p7tEb{display:flex;flex-direction:column;justify-content:space-around;margin-bottom:16px;max-width:400px;width:100%}.title___c0fpC{margin-bottom:4px}.formColumn___Nj85s{gap:8px}.visualizationTypeSelectorCard___LDvlE{margin-left:-4px;margin-right:-16px;overflow:hidden!important;padding-left:0}.visualizationTypeSelectorContent___EOtSi{display:flex;flex-wrap:wrap;gap:12px}.container___ud6Ji{flex-direction:column}.container___ud6Ji,.inlineRow___P3Adt{display:flex;gap:8px}.colorInput___fjwoy{width:160px}.rowAlignContainer___Rf0ez{align-items:center;display:flex;height:24px}.modeToggle___mjri4{margin:0}.panelContent___Uu5J5{display:flex;flex-direction:column;gap:12px;padding-top:12px}.content___OVVo3{color:#9db4c7}.content___3cV4q{color:#517691}.content___GcsPa{color:#abbac9}.content___IPaz3{color:#889eb3}.container___OPjU7{display:flex;flex:1 1 0;flex-direction:column;min-height:250px}.visualizationTypeSelectorCard___xLViq{margin-left:-4px;margin-right:-16px;overflow:hidden!important;padding-left:0}.visualizationTypeSelectorContent___F-xw8{display:flex;flex-wrap:wrap}.visualizationTypeSelectorContentExpanded___lhT2k{gap:12px}.pristineMessage___v2p7G{font-family:RobotoLight,Arial,sans-serif;font-size:20px}[data-theme=brandDark-theme] .pristineMessage___v2p7G,[data-theme=brandLight-theme] .pristineMessage___v2p7G{font-family:Lab Grotesque Light,Arial,sans-serif;font-size:20px}.emptyVisualization___JxBqv{align-items:center;display:flex;flex-flow:column;justify-content:center;width:100%}.pristineMessage___v2p7G{color:#889eb3;margin-top:24px}[data-theme=brandLight-theme] .pristineMessage___v2p7G{color:#517691;margin-top:24px}[data-theme=brandDark-theme] .pristineMessage___v2p7G{color:#9db4c7;margin-top:24px}.formColumn___6vCSZ{gap:8px}.visualizationTypeSelectorCard___wR0HL{margin-left:-4px;margin-right:-16px;overflow:hidden!important;padding-left:0}.visualizationTypeSelectorContent___YaNdd{display:flex;flex-wrap:wrap;gap:12px}.drilldown-item___wMXAb{cursor:pointer}.drilldown-item-loading___n8uBF{width:120px}.svg___-ymM4{height:100%;width:100%}.tooltip___dphGI{word-wrap:break-word;background:#b0c4de;border:0;border-radius:8px;font:12px sans-serif;padding:2px;pointer-events:none;position:absolute;text-align:justify;z-index:2}[data-theme^=brand] .tooltip___dphGI{background:#0000}.container___1FyYj .hexagon___k1303{stroke-width:1px}.container___1FyYj .hexagon___k1303.focused___S-G1A,.container___1FyYj .hexagon___k1303:hover{cursor:pointer}.container___1FyYj .hexagonHighlight___aKLfJ{stroke-width:5px;display:none;pointer-events:none}.container___1FyYj .hexagonHighlight___aKLfJ.visible___hyoxy{display:inline}.boundingRect___UOwMm{position:relative;width:100%}.containerOverlay___4p2Zf{fill-opacity:0;height:100%;left:0;pointer-events:none;position:absolute;top:0;transition:fill .3s ease;width:100%}.containerOverlay___4p2Zf.hoveredHexagon___-eSdH{fill-opacity:.6}.honeycombTitle___Iejjt{fill:inherit}.hexagon___k1303{stroke:#151e30}.hexagon___k1303:hover{stroke:#233654}.honeycombTitle___Iejjt{fill:#9db4c7}.containerOverlay___4p2Zf{fill:#151e30}.hexagonHighlight___aKLfJ{stroke:#233654}.svg___tFuW-{height:100%;width:100%}.tooltip___2XIw-{word-wrap:break-word;background:#b0c4de;border:0;border-radius:8px;font:12px sans-serif;padding:2px;pointer-events:none;position:absolute;text-align:justify;z-index:2}[data-theme^=brand] .tooltip___2XIw-{background:#0000}.container___ynjIE .hexagon___zjkLS{stroke-width:1px}.container___ynjIE .hexagon___zjkLS.focused___9TSnd,.container___ynjIE .hexagon___zjkLS:hover{cursor:pointer}.container___ynjIE .hexagonHighlight___tDUaP{stroke-width:5px;display:none;pointer-events:none}.container___ynjIE .hexagonHighlight___tDUaP.visible___ukHO-{display:inline}.boundingRect___v8599{position:relative;width:100%}.containerOverlay___QMFA9{fill-opacity:0;height:100%;left:0;pointer-events:none;position:absolute;top:0;transition:fill .3s ease;width:100%}.containerOverlay___QMFA9.hoveredHexagon___denCV{fill-opacity:.6}.hexagon___zjkLS{stroke:#fff}.hexagon___zjkLS:hover{stroke:#ebeff2}.honeycombTitle___vDREa{fill:inherit}.containerOverlay___QMFA9{fill:#fff}.hexagonHighlight___tDUaP{stroke:#ebeff2}.svg___RyAZ6{height:100%;width:100%}.tooltip___DyozD{word-wrap:break-word;background:#b0c4de;border:0;border-radius:8px;font:12px sans-serif;padding:2px;pointer-events:none;position:absolute;text-align:justify;z-index:2}[data-theme^=brand] .tooltip___DyozD{background:#0000}.container___GHRMv .hexagon___Ckuon{stroke-width:1px}.container___GHRMv .hexagon___Ckuon.focused___c-3gf,.container___GHRMv .hexagon___Ckuon:hover{cursor:pointer}.container___GHRMv .hexagonHighlight___WvwRJ{stroke-width:5px;display:none;pointer-events:none}.container___GHRMv .hexagonHighlight___WvwRJ.visible___SFkz-{display:inline}.boundingRect___eCuaw{position:relative;width:100%}.containerOverlay___UD2-0{fill-opacity:0;height:100%;left:0;pointer-events:none;position:absolute;top:0;transition:fill .3s ease;width:100%}.containerOverlay___UD2-0.hoveredHexagon___6Mj0F{fill-opacity:.6}.hexagonHighlight___WvwRJ{stroke:#233654}.honeycombTitle___66MUN{fill:inherit}.containerOverlay___UD2-0{fill:#222d3b}.hexagonHighlight___WvwRJ{stroke:#fff}.svg___Fnom6{height:100%;width:100%}.tooltip___Q0WLW{word-wrap:break-word;background:#b0c4de;border:0;border-radius:8px;font:12px sans-serif;padding:2px;pointer-events:none;position:absolute;text-align:justify;z-index:2}[data-theme^=brand] .tooltip___Q0WLW{background:#0000}.container___HjvF0 .hexagon___H2LzX{stroke-width:1px}.container___HjvF0 .hexagon___H2LzX.focused___r-P2-,.container___HjvF0 .hexagon___H2LzX:hover{cursor:pointer}.container___HjvF0 .hexagonHighlight___umLvz{stroke-width:5px;display:none;pointer-events:none}.container___HjvF0 .hexagonHighlight___umLvz.visible___hYIpq{display:inline}.boundingRect___-osEM{position:relative;width:100%}.containerOverlay___EiOnR{fill-opacity:0;height:100%;left:0;pointer-events:none;position:absolute;top:0;transition:fill .3s ease;width:100%}.containerOverlay___EiOnR.hoveredHexagon___yopuP{fill-opacity:.6}.honeycombTitle___y-39D{fill:inherit}.containerOverlay___EiOnR{fill:#fff}.hexagonHighlight___umLvz{stroke:#222d3b}.text-elements___4wR0N{height:100%;left:0;position:absolute;top:0;width:100%}.label___Yaiby{fill:#222d3b;text-align:center}.placeholder___afBIm{fill:#222d3b80}.selectable___9luzl{cursor:text}.value-base___Q8s6a{font-weight:400}.value-colorless-light-background___uSqf0{fill:#151e30}.value-colorless-dark-background___gbJ3V{fill:#f5f8fa}.value-green___TPMQO{fill:#69db4a}.value-yellow___wOx2n{fill:#e1c60e}.value-red___io91r{fill:#c73a25}.label___Yaiby{fill:#84a1b8}.placeholder___afBIm{fill:#f5f8fa80}.arrow___L4xnm,.value-colorless___EqTZc{fill:#84a1b8}.text-elements___JIcHo{height:100%;left:0;position:absolute;top:0;width:100%}.label___lyKQn{fill:#222d3b;text-align:center}.placeholder___t7bWC{fill:#222d3b80}.selectable___IqMHd{cursor:text}.value-base___Ou0qa{font-weight:400}.value-colorless-light-background___aMoZF{fill:#151e30}.value-colorless-dark-background___fLEXR{fill:#f5f8fa}.value-green___B-sY7{fill:#69db4a}.value-yellow___1mJoI{fill:#e1c60e}.value-red___BrQmY{fill:#c73a25}.label___lyKQn{fill:#315775}.placeholder___t7bWC{fill:#151e3080}.arrow___fyGWf,.value-colorless___LycVz{fill:#315775}.text-elements___Bx15t{height:100%;left:0;position:absolute;top:0;width:100%}.label___LdpY-{fill:#222d3b;text-align:center}.placeholder___bxriB{fill:#222d3b80}.selectable___Ox-XX{cursor:text}.value-base___ZVc88{font-weight:400}.value-colorless-light-background___NxfMd{fill:#151e30}.value-colorless-dark-background___ooJB0{fill:#f5f8fa}.value-green___WcEeS{fill:#69db4a}.value-yellow___3YeNg{fill:#e1c60e}.value-red___DooQK{fill:#c73a25}.label___LdpY-{fill:#c6d3db}.placeholder___bxriB{fill:#c6d3db80}.arrow___NjOF6,.value-colorless___ubtPx{fill:#c6d3db}.text-elements___ejKAM{height:100%;left:0;position:absolute;top:0;width:100%}.label___eqlX8{fill:#222d3b;text-align:center}.placeholder___AbPM2{fill:#222d3b80}.selectable___pcfbn{cursor:text}.value-base___PmsMp{font-weight:400}.value-colorless-light-background___WD5nQ{fill:#151e30}.value-colorless-dark-background___-Z-Jy{fill:#f5f8fa}.value-green___hqJm7{fill:#69db4a}.value-yellow___6VCDb{fill:#e1c60e}.value-red___1swXT{fill:#c73a25}.arrow___Ll92p,.value-colorless___yQY6y{fill:#222d3b}.message___e6B8R{font-family:Roboto,Arial,sans-serif;font-size:12px}.background-base___5-2Oi{flex:1 1 auto;font-family:RobotoMedium,Arial Bold,sans-serif;justify-content:center;position:relative;text-align:center}.clickable___tgdks{cursor:pointer}.message___e6B8R{left:0;margin:auto;position:absolute;right:0;top:50%}.sparkline-container___5tBcq{bottom:5%;height:20%;left:0;margin-left:auto;margin-right:auto;max-width:400px;position:absolute;right:0;width:100%}.sparkline-adjusted___vXEQc{bottom:-10%}.background-green___6AUKo{background-color:#69db4a}.background-yellow___ZzY0l{background-color:#e1c60e}.background-red___vFLS7{background-color:#c73a25}.background-green___6AUKo .label___7cO0I,.background-green___6AUKo .value-colorless___punA4,.background-red___vFLS7 .label___7cO0I,.background-red___vFLS7 .value-colorless___punA4,.background-yellow___ZzY0l .label___7cO0I,.background-yellow___ZzY0l .value-colorless___punA4{fill:#222d3b}.message___SJFY0{font-family:Roboto,Arial,sans-serif;font-size:12px}.background-base___CXRYk{flex:1 1 auto;font-family:RobotoMedium,Arial Bold,sans-serif;justify-content:center;position:relative;text-align:center}.clickable___qi6Oe{cursor:pointer}.message___SJFY0{left:0;margin:auto;position:absolute;right:0;top:50%}.sparkline-container___FOERr{bottom:5%;height:20%;left:0;margin-left:auto;margin-right:auto;max-width:400px;position:absolute;right:0;width:100%}.sparkline-adjusted___Q-628{bottom:-10%}.background-green___ZkHGb{background-color:#69db4a}.background-yellow___DEfsv{background-color:#e1c60e}.background-red___cfDU9{background-color:#c73a25}.background-green___ZkHGb .label___ej8oh,.background-green___ZkHGb .value-colorless___tFvQz,.background-red___cfDU9 .label___ej8oh,.background-red___cfDU9 .value-colorless___tFvQz,.background-yellow___DEfsv .label___ej8oh,.background-yellow___DEfsv .value-colorless___tFvQz{fill:#222d3b}.gauge-container___lWgvt{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;width:100%}.gauge-container___lWgvt .highcharts-plot-band{stroke:none}.gauge-container___lWgvt .highcharts-grid-line,.gauge-container___lWgvt .highcharts-tick{display:none}.band-green___M-FmM{fill:#69db4a}.band-yellow___nSIFY{fill:#e1c60e}.band-red___JB-hm{fill:#c73a25}.value-color-green___eaKf5 .highcharts-point{fill:#69db4a;stroke:#69db4a}.value-color-yellow___Zvekw .highcharts-point{fill:#e1c60e;stroke:#e1c60e}.value-color-red___wpV8c .highcharts-point{fill:#c73a25;stroke:#c73a25}.gauge-container___lWgvt .highcharts-pane{fill:#344666;stroke:#344666}.gauge-container___0fLFo{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;width:100%}.gauge-container___0fLFo .highcharts-plot-band{stroke:none}.gauge-container___0fLFo .highcharts-grid-line,.gauge-container___0fLFo .highcharts-tick{display:none}.band-green___xbGHZ{fill:#69db4a}.band-yellow___edVUx{fill:#e1c60e}.band-red___A5d5Y{fill:#c73a25}.value-color-green___DLzeb .highcharts-point{fill:#69db4a;stroke:#69db4a}.value-color-yellow___hpnI8 .highcharts-point{fill:#e1c60e;stroke:#e1c60e}.value-color-red___Q95KC .highcharts-point{fill:#c73a25;stroke:#c73a25}.gauge-container___0fLFo .highcharts-pane{fill:#333e4b;stroke:#333e4b}.gauge-container___eKJ28{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;width:100%}.gauge-container___eKJ28 .highcharts-plot-band{stroke:none}.gauge-container___eKJ28 .highcharts-grid-line,.gauge-container___eKJ28 .highcharts-tick{display:none}.band-green___O3SqL{fill:#69db4a}.band-yellow___C9NUu{fill:#e1c60e}.band-red___FAXgG{fill:#c73a25}.value-color-green___2uOZa .highcharts-point{fill:#69db4a;stroke:#69db4a}.value-color-yellow___HMmV5 .highcharts-point{fill:#e1c60e;stroke:#e1c60e}.value-color-red___Mq1lB .highcharts-point{fill:#c73a25;stroke:#c73a25}.gauge-container___eKJ28 .highcharts-pane{fill:#eaeef1;stroke:#eaeef1}.drilldown-item___l8a2u{cursor:pointer}#chart-visualization-tooltip{max-height:1000px;max-width:300px;opacity:0;pointer-events:none;position:absolute;visibility:hidden;will-change:left,top;z-index:1200}.canvasChart___OJmZk{align-self:normal}.canvasChart___OJmZk .canvasjs-chart-tooltip{display:none!important}.tableContainer___HgTLN,.table___8mV4d,.tbody___Sbj0b,.thead___3MGRn{display:flex;flex-direction:column}.thead___3MGRn .tr___Xx56-{display:flex;flex-direction:row}.tbody___Sbj0b .tr___Xx56- .td___UPu-d,.thead___3MGRn .tr___Xx56- .th___-Mdie{flex:1 1 0}.wrapper___Uw-V2{display:flex;flex-direction:column;width:100%}.tableContainer___HgTLN{box-sizing:border-box;display:flex;height:100%;width:100%}.table___8mV4d{border:1px solid #dde4e9;flex:1 0 0;font-size:14px}.thead___3MGRn{background-color:#f6f9fb;color:#536b82;flex:0 0 auto;overflow-x:hidden}.thead___3MGRn .tr___Xx56-{flex:1 1 auto;padding:4px 0}.thead___3MGRn .tr___Xx56- .th___-Mdie{box-sizing:border-box;display:flex;padding:0 8px 0 0;position:relative}.thead___3MGRn .tr___Xx56- .verticalbar___2njfV{background-color:#51769180;height:100%;left:0;position:absolute;width:1px}.thead___3MGRn .tr___Xx56- .sortContainer___ORRUz{display:inline-flex}.thead___3MGRn .tr___Xx56- .sortContainer___ORRUz .sortIconPlaceholder___kwzx4{display:inline-flex;height:100%;min-width:16px}.thead___3MGRn .tr___Xx56- .sortContainer___ORRUz .sortIconPlaceholder___kwzx4 .arrow___ylelL{align-items:center;display:inline-flex;width:16px}.thead___3MGRn .tr___Xx56- .sortContainer___ORRUz .content___kBNZf{cursor:pointer;display:inline-flex}.thead___3MGRn .tr___Xx56- .colSetting___h02gF{align-items:center;cursor:pointer;display:inline-flex;height:100%;opacity:0;position:absolute;right:0;top:0;width:8px}.tbody___Sbj0b{flex:1 1 0;overflow-y:auto}.tbody___Sbj0b .trWrapper___2tORu:last-child .tr___Xx56-{border-bottom:1px solid #dde4e9}.tbody___Sbj0b .tr___Xx56-{border-top:1px solid #dde4e9;display:inline-flex;min-width:100%}.tbody___Sbj0b .tr___Xx56-:hover{background-color:#f6f9fb}.tbody___Sbj0b .tr___Xx56- .td___UPu-d{box-sizing:border-box;padding:4px 8px 4px 16px;word-break:break-word}.paginationContainer___Wm40J>div{width:100%}.spacer___sCGIW{display:inline-block;max-width:15px;min-width:15px}.indexCol___bvGje{color:#889eb3;padding-right:0!important;text-align:center}.indexCol___bvGje.td___UPu-d{padding:4px 0!important}.numCol___8GbSV{justify-content:flex-end;text-align:right}.numCol___8GbSV.td___UPu-d{font-family:Roboto Mono,Courier New,monospace}[data-theme=brandDark-theme] .numCol___8GbSV.td___UPu-d,[data-theme=brandLight-theme] .numCol___8GbSV.td___UPu-d{font-family:Lab Grotesque Mono Regular,Courier New,monospace}.linkCol___tMYr5,.stringCol___eVl-h{min-width:200px;white-space:pre-line}#perf-table-text-measurement{font-size:14px;height:auto;left:-999px;position:absolute;top:-999px;visibility:hidden;white-space:pre-line;width:auto}#perf-table-text-measurement.isNumber{font-family:Lab Grotesque Mono Regular,Courier New,monospace}.table___8mV4d{border:1px solid #233654}.tbody___Sbj0b .trWrapper___2tORu:last-child .tr___Xx56-{border-bottom:1px solid #233654}.tbody___Sbj0b .tr___Xx56-{border-top:1px solid #233654}.tbody___Sbj0b .tr___Xx56-:hover{background-color:#233654}.thead___3MGRn{background:#1a253b;color:#9db4c7}.tableContainer___uLKoU,.table___f7Tbr,.tbody___--h7v,.thead___2S5oP{display:flex;flex-direction:column}.thead___2S5oP .tr___QMWWv{display:flex;flex-direction:row}.tbody___--h7v .tr___QMWWv .td___8f2mX,.thead___2S5oP .tr___QMWWv .th___9Ei4F{flex:1 1 0}.wrapper___Z0D3N{display:flex;flex-direction:column;width:100%}.tableContainer___uLKoU{box-sizing:border-box;display:flex;height:100%;width:100%}.table___f7Tbr{border:1px solid #dde4e9;flex:1 0 0;font-size:14px}.thead___2S5oP{background-color:#f6f9fb;color:#536b82;flex:0 0 auto;overflow-x:hidden}.thead___2S5oP .tr___QMWWv{flex:1 1 auto;padding:4px 0}.thead___2S5oP .tr___QMWWv .th___9Ei4F{box-sizing:border-box;display:flex;padding:0 8px 0 0;position:relative}.thead___2S5oP .tr___QMWWv .verticalbar___N5RRs{background-color:#51769180;height:100%;left:0;position:absolute;width:1px}.thead___2S5oP .tr___QMWWv .sortContainer___nsGfP{display:inline-flex}.thead___2S5oP .tr___QMWWv .sortContainer___nsGfP .sortIconPlaceholder___Xa6Gj{display:inline-flex;height:100%;min-width:16px}.thead___2S5oP .tr___QMWWv .sortContainer___nsGfP .sortIconPlaceholder___Xa6Gj .arrow___nPQsG{align-items:center;display:inline-flex;width:16px}.thead___2S5oP .tr___QMWWv .sortContainer___nsGfP .content___igQws{cursor:pointer;display:inline-flex}.thead___2S5oP .tr___QMWWv .colSetting___wT6QA{align-items:center;cursor:pointer;display:inline-flex;height:100%;opacity:0;position:absolute;right:0;top:0;width:8px}.tbody___--h7v{flex:1 1 0;overflow-y:auto}.tbody___--h7v .trWrapper___RpxDy:last-child .tr___QMWWv{border-bottom:1px solid #dde4e9}.tbody___--h7v .tr___QMWWv{border-top:1px solid #dde4e9;display:inline-flex;min-width:100%}.tbody___--h7v .tr___QMWWv:hover{background-color:#f6f9fb}.tbody___--h7v .tr___QMWWv .td___8f2mX{box-sizing:border-box;padding:4px 8px 4px 16px;word-break:break-word}.paginationContainer___dNz4D>div{width:100%}.spacer___h-OCe{display:inline-block;max-width:15px;min-width:15px}.indexCol___MkwZ0{color:#889eb3;padding-right:0!important;text-align:center}.indexCol___MkwZ0.td___8f2mX{padding:4px 0!important}.numCol___Yl-0l{justify-content:flex-end;text-align:right}.numCol___Yl-0l.td___8f2mX{font-family:Roboto Mono,Courier New,monospace}[data-theme=brandDark-theme] .numCol___Yl-0l.td___8f2mX,[data-theme=brandLight-theme] .numCol___Yl-0l.td___8f2mX{font-family:Lab Grotesque Mono Regular,Courier New,monospace}.linkCol___MH0IE,.stringCol___VsjEU{min-width:200px;white-space:pre-line}#perf-table-text-measurement{font-size:14px;height:auto;left:-999px;position:absolute;top:-999px;visibility:hidden;white-space:pre-line;width:auto}#perf-table-text-measurement.isNumber{font-family:Lab Grotesque Mono Regular,Courier New,monospace}.rulerContainer___w96BZ{display:flex;gap:8px;height:var(--max-cluster-radius)}.clustersContainer___QIdJT{position:relative;width:var(--max-cluster-radius)}.cluster___h0hT6{border:1px solid #6d8da6;border-radius:calc(var(--cluster-radius)/2);bottom:0;height:var(--cluster-radius);left:calc(50% - var(--cluster-radius)/2);position:absolute;width:var(--cluster-radius)}.steps___bEkWk{display:flex;flex-direction:column-reverse;height:100%;justify-content:space-between}.rule___wZYM3{line-height:1}.ruler___FBxbU{background-color:#9db4c7bf;max-height:150px;padding:8px}.name___CaTUo{color:#000;font-size:12px}.rulesList___n9I5p{list-style:none;margin:0;padding:0}.rulesBlock___lBCcv{margin-top:5px}.rule___NRRzg{color:#3c6482;font-size:12px;line-height:1}.colorBox___Y-7W-{height:24px;margin-right:8px;width:16px}.singleRuler___4hkRg{display:flex;flex-direction:row}.ruler___5Oo3t{display:flex;flex-direction:column}.ruleList___QCAHt{flex:1;overflow-y:auto}.rule___DBsGf{line-height:24px}.rulerBlock___kEW8A{align-items:flex-end;bottom:10px;display:flex;gap:12px;left:14px;max-height:50%;position:absolute}.mapContainer___eR7J9{height:100%;position:relative;width:100%}.mapMessageContainer___SayoE{align-items:center;display:flex;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%}.sparkLineChart___eWUyR{height:200px}.decreaseRetentionContainer___9Mubo{border:1px solid #dde4e9;cursor:pointer;display:flex;flex-direction:column;margin-top:16px}.borderBottom___jk601{border-bottom:1px solid #dde4e9}.decreaseRetentionRow___uOmRi{padding:10px 24px 12px 12px}.decreaseRetentionRowDescription___9rKnD{margin-left:24px}.warningIcon___oT9UY,.warningIcon___OSRIO{margin-left:5px}.section___FWQVJ{max-width:400px;width:100%}.hint___eT7sI{color:#517691;margin-bottom:12px}.sectionHeader___2D-1d{display:flex;justify-content:space-between;margin-bottom:16px}.title___78qA0{font-size:16px}.displayThresholdsToggle___yUNb9{margin-bottom:0;margin-top:0}.threshold___ww40A{align-items:center;column-gap:8px;display:flex;margin-bottom:12px;margin-top:8px}.thresholdType___PD9sg{font-weight:700}.valueField___cOdQZ{max-width:100px}.comparatorField___S5JHq{flex-grow:1}.wrapper___ndhmG{margin:10px 0}.manualWrapper___B4Crw{background-color:#f5f8fa;margin-bottom:15px;padding:12px}.templateWrapper___zjzxa{background-color:#f5f8fa;margin-bottom:8px;max-height:160px;overflow-y:scroll;padding:12px}.mannualHeading___OtvCY{margin-bottom:20px}.warningIcon___Xx9fG{margin-right:3px}.actionButtonsWrapper___7NBtt{margin-bottom:15px;text-align:end}.actionButton___9umsP{margin-left:15px}')),document.head.appendChild(e)}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}()}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var i=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=n,e=[],s.O=function(t,i,r,n){if(!i){var a=1/0;for(d=0;d<e.length;d++){for(var[i,r,n]=e[d],o=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,r,n]},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},i=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},s.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var a={};t=t||[null,i({}),i([]),i(i)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},s.d(n,a),n},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))},s.u=function(e){return{522:"lazy.react-mapbox-gl",536:"lazy.canvasjs",711:"lazy.access-keys",779:"lazy.partitions",848:"lazy.searchResultsMessagesTab",1174:"lazy.tsat-ui",1466:"lazy.dataForwarding",1654:"lazy.slo~lazy.unified-monitors~lazy.dashboard~lazy.createDashboard~lazy.tsat-ui~lazy.header-bar~lazy.root-cause-explorer~lazy.alert-response-page~lazy.kansoDashboard~lazy.kansoSearch",1979:"lazy.alert-response-page",2191:"lazy.table",2469:"lazy.dashboard",2758:"lazy.account-overview",2812:"lazy.scheduledViews",3134:"lazy.root-cause-explorer",3178:"undefined",3823:"lazy.agents",3859:"lazy.createDashboard",4208:"lazy.editSearchDialog",4776:"lazy.unified-monitors~lazy.alert-response-page",4881:"lazy.developer-tabs",5131:"lazy.tsat-ui~lazy.unified-nav~lazy.header-bar~lazy.scheduledViews~lazy.dataForwarding~lazy.logsToArchive~lazy.collectionDataForwarding~lazy.installationToken~lazy.ingestBudgets~lazy.agents~lazy.kansoDashboard~lazy.kansoSearch",5306:"lazy.mapbox-gl~lazy.react-mapbox-gl",5485:"lazy.slo~lazy.slo_monitor_components~lazy.unified-monitors",5533:"lazy.appDetail~lazy.appDetailButton~lazy.appCatalogReact~lazy.integrations",5586:"lazy.searchQueryStats",5614:"lazy.slo~lazy.dashboard~lazy.createDashboard~lazy.header-bar~lazy.kansoDashboard~lazy.kansoSearch",5681:"lazy.slo",5921:"lazy.header-bar~lazy.kansoDashboard~lazy.kansoSearch",6341:"lazy.metrics-explorer",6646:"lazy.sumoChartEngine",6686:"lazy.saveSearchDialog~lazy.editSearchDialog",6834:"lazy.organizations",7096:"lazy.unified-nav~lazy.header-bar~lazy.kansoDashboard~lazy.kansoSearch",7356:"lazy.user-preferences",7931:"lazy.tsat-ui~lazy.unified-nav~lazy.header-bar~lazy.logsToArchive~lazy.collectionDataForwarding~lazy.installationToken~lazy.ingestBudgets~lazy.agents~lazy.kansoDashboard~lazy.kansoSearch",8471:"lazy.manage-plan~lazy.manage-payment~lazy.request-update",8831:"lazy.unified-monitors",9180:"lazy.pickerpanel",9346:"lazy.header-bar",9792:"lazy.slo~lazy.dashboard~lazy.createDashboard~lazy.tracing~lazy.header-bar~lazy.kansoDashboard~lazy.kansoSearch"}[e]+"."+{522:"3a09c63bb73088bf",536:"f5b3dcf6a410625c",711:"c5203d3985f29dca",779:"71447cb38bc87a8e",848:"62411b85de571391",1174:"b0b69f7622519061",1466:"8ca69f3463f0fb0d",1654:"43b5e101ec740332",1979:"2cae82d96ae54966",2191:"70ee3951ccb044a1",2469:"1ab2562589e16981",2758:"75c0216f14c940ae",2812:"43a3f625db1ac06d",3134:"c947e0838b89b09d",3178:"748401f208703eae",3823:"cb9bb18b623bf9a4",3859:"339be31e7c70cae0",4208:"4f3fe541291750be",4776:"e04ae9d4bbf512a0",4881:"817cfbd6eedf8521",5131:"89a7b2c4f3fdf2d0",5306:"8ed56afc3e26e810",5485:"2a551ff790cda710",5533:"7cab4419e1bba8e2",5586:"53bedaf4a0524983",5614:"e3637de9adc1d845",5681:"e0bf9e9713dde934",5921:"aeae3e9a0471f1ca",6341:"c51dbce92ae43b7a",6646:"2798be90897bdc97",6686:"f353850b5bc6ddca",6834:"87e160f02d0cd4ac",7096:"5741349ee6da4d0b",7356:"3cd1a9bc9fccc5c9",7931:"f8851ef27d862ae8",8471:"8601289541b934ed",8831:"9bb507bcbfcef172",9180:"95f5bd04b25377fd",9346:"0f1546e2baf8fbb4",9792:"98b204419fa5f6a5"}[e]+".chunk.js"},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r={},s.l=function(e,t,i,n){if(r[e])r[e].push(t);else{var a,o;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==e){a=d;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.src=e),r[e]=[t];var u=function(t,i){a.onerror=a.onload=null,clearTimeout(p);var n=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(e){return e(i)})),t)return t(i)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),o&&document.head.appendChild(a)}},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},s.j=998,s.p="/ui/",function(){s.b=document.baseURI||self.location.href;var e={998:0};s.f.j=function(t,i){var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise((function(i,n){r=e[t]=[i,n]}));i.push(r[2]=n);var a=s.p+s.u(t),o=new Error;s.l(a,(function(i){if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,r[1](o)}}),"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,n,[a,o,l]=i,c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var d=l(s)}for(t&&t(i);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},i=globalThis.webpackChunk=globalThis.webpackChunk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var o=s.O(void 0,[3170,4736,9351],(function(){return s(35479)}));o=s.O(o)}();